# Comparing `tmp/roboticstoolbox-python-1.0.3.tar.gz` & `tmp/roboticstoolbox-python-1.1.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "roboticstoolbox-python-1.0.3.tar", last modified: Wed Dec  7 08:20:22 2022, max compression
+gzip compressed data, was "roboticstoolbox-python-1.1.0.tar", last modified: Sun May 14 06:46:54 2023, max compression
```

## Comparing `roboticstoolbox-python-1.0.3.tar` & `roboticstoolbox-python-1.1.0.tar`

### file list

```diff
@@ -1,607 +1,627 @@
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/
--rw-r--r--   0 runner    (1001) docker     (122)     1062 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/LICENSE
--rw-r--r--   0 runner    (1001) docker     (122)    19118 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (122)    16701 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/README.md
--rw-r--r--   0 runner    (1001) docker     (122)     4077 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/pyproject.toml
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.178813 roboticstoolbox-python-1.0.3/roboticstoolbox/
--rw-r--r--   0 runner    (1001) docker     (122)     1715 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.178813 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/
--rw-r--r--   0 runner    (1001) docker     (122)     2463 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/Connector.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.182813 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/
--rw-r--r--   0 runner    (1001) docker     (122)     5584 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/EllipsePlot.py
--rw-r--r--   0 runner    (1001) docker     (122)    17977 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/PyPlot.py
--rw-r--r--   0 runner    (1001) docker     (122)    10649 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/PyPlot2.py
--rw-r--r--   0 runner    (1001) docker     (122)     7402 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/RobotPlot.py
--rw-r--r--   0 runner    (1001) docker     (122)     3526 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/RobotPlot2.py
--rw-r--r--   0 runner    (1001) docker     (122)      161 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.182813 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/
--rw-r--r--   0 runner    (1001) docker     (122)    17592 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/VPython.py
--rw-r--r--   0 runner    (1001) docker     (122)       90 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)    57652 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/canvas.py
--rw-r--r--   0 runner    (1001) docker     (122)     3848 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/common_functions.py
--rw-r--r--   0 runner    (1001) docker     (122)    29937 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/graphicalrobot.py
--rw-r--r--   0 runner    (1001) docker     (122)    22788 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/grid.py
--rw-r--r--   0 runner    (1001) docker     (122)     8844 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/object2d.py
--rw-r--r--   0 runner    (1001) docker     (122)     4225 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/stl.py
--rw-r--r--   0 runner    (1001) docker     (122)    12836 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/VPython/text.py
--rw-r--r--   0 runner    (1001) docker     (122)      389 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.182813 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/swift/
--rw-r--r--   0 runner    (1001) docker     (122)      388 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/backends/swift/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.182813 roboticstoolbox-python-1.0.3/roboticstoolbox/bin/
--rwxr-xr-x   0 runner    (1001) docker     (122)     5929 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/bin/rtbtool
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.182813 roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/
--rw-r--r--   0 runner    (1001) docker     (122)      118 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)    42184 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/arm.py
--rw-r--r--   0 runner    (1001) docker     (122)    13976 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/mobile.py
--rw-r--r--   0 runner    (1001) docker     (122)    30178 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/uav.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.182813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.186813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/
--rw-r--r--   0 runner    (1001) docker     (122)     1161 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Cholesky
--rw-r--r--   0 runner    (1001) docker     (122)     1900 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/CholmodSupport
--rw-r--r--   0 runner    (1001) docker     (122)    12799 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Core
--rw-r--r--   0 runner    (1001) docker     (122)      122 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Dense
--rw-r--r--   0 runner    (1001) docker     (122)       35 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Eigen
--rw-r--r--   0 runner    (1001) docker     (122)     1777 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Eigenvalues
--rw-r--r--   0 runner    (1001) docker     (122)     1940 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Geometry
--rw-r--r--   0 runner    (1001) docker     (122)      829 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Householder
--rw-r--r--   0 runner    (1001) docker     (122)     2083 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/IterativeLinearSolvers
--rw-r--r--   0 runner    (1001) docker     (122)      894 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Jacobi
--rw-r--r--   0 runner    (1001) docker     (122)     1389 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/KLUSupport
--rw-r--r--   0 runner    (1001) docker     (122)     1268 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/LU
--rw-r--r--   0 runner    (1001) docker     (122)      991 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/MetisSupport
--rw-r--r--   0 runner    (1001) docker     (122)     2451 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/OrderingMethods
--rw-r--r--   0 runner    (1001) docker     (122)     1751 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/PaStiXSupport
--rw-r--r--   0 runner    (1001) docker     (122)     1116 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/PardisoSupport
--rw-r--r--   0 runner    (1001) docker     (122)     1272 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/QR
--rw-r--r--   0 runner    (1001) docker     (122)      900 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/QtAlignedMalloc
--rw-r--r--   0 runner    (1001) docker     (122)     1162 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SPQRSupport
--rw-r--r--   0 runner    (1001) docker     (122)     1584 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SVD
--rw-r--r--   0 runner    (1001) docker     (122)      888 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Sparse
--rw-r--r--   0 runner    (1001) docker     (122)     1235 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseCholesky
--rw-r--r--   0 runner    (1001) docker     (122)     2240 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseCore
--rw-r--r--   0 runner    (1001) docker     (122)     1814 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseLU
--rw-r--r--   0 runner    (1001) docker     (122)     1195 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseQR
--rw-r--r--   0 runner    (1001) docker     (122)      797 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/StdDeque
--rw-r--r--   0 runner    (1001) docker     (122)      726 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/StdList
--rw-r--r--   0 runner    (1001) docker     (122)      803 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/StdVector
--rw-r--r--   0 runner    (1001) docker     (122)     2243 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SuperLUSupport
--rw-r--r--   0 runner    (1001) docker     (122)     1382 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/UmfPackSupport
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.178813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.186813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/
--rw-r--r--   0 runner    (1001) docker     (122)    24934 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/LDLT.h
--rw-r--r--   0 runner    (1001) docker     (122)    18760 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/LLT.h
--rw-r--r--   0 runner    (1001) docker     (122)     3974 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/LLT_LAPACKE.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.186813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/CholmodSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    25441 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/CholmodSupport/CholmodSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.198814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/
--rw-r--r--   0 runner    (1001) docker     (122)    19214 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ArithmeticSequence.h
--rw-r--r--   0 runner    (1001) docker     (122)    16782 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Array.h
--rw-r--r--   0 runner    (1001) docker     (122)     8217 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ArrayBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     7018 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ArrayWrapper.h
--rw-r--r--   0 runner    (1001) docker     (122)     2738 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Assign.h
--rw-r--r--   0 runner    (1001) docker     (122)    41673 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/AssignEvaluator.h
--rwxr-xr-x   0 runner    (1001) docker     (122)    12488 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Assign_MKL.h
--rw-r--r--   0 runner    (1001) docker     (122)    14075 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/BandMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    18648 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Block.h
--rw-r--r--   0 runner    (1001) docker     (122)     4429 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/BooleanRedux.h
--rw-r--r--   0 runner    (1001) docker     (122)     5981 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CommaInitializer.h
--rw-r--r--   0 runner    (1001) docker     (122)     6990 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ConditionEstimator.h
--rw-r--r--   0 runner    (1001) docker     (122)    63841 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CoreEvaluators.h
--rw-r--r--   0 runner    (1001) docker     (122)     4745 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CoreIterators.h
--rw-r--r--   0 runner    (1001) docker     (122)     7909 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseBinaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)    36282 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseNullaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)     8256 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseTernaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)     3937 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)     5551 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryView.h
--rw-r--r--   0 runner    (1001) docker     (122)    31529 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DenseBase.h
--rw-r--r--   0 runner    (1001) docker     (122)    24484 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DenseCoeffsBase.h
--rw-r--r--   0 runner    (1001) docker     (122)    25360 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DenseStorage.h
--rw-r--r--   0 runner    (1001) docker     (122)     9870 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Diagonal.h
--rw-r--r--   0 runner    (1001) docker     (122)    14670 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DiagonalMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)      988 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DiagonalProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)    11654 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Dot.h
--rw-r--r--   0 runner    (1001) docker     (122)     5841 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/EigenBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     4909 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ForceAlignedAccess.h
--rw-r--r--   0 runner    (1001) docker     (122)     5759 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Fuzzy.h
--rw-r--r--   0 runner    (1001) docker     (122)    21679 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/GeneralProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)    38812 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/GenericPacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)    11543 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/GlobalFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)     8238 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/IO.h
--rw-r--r--   0 runner    (1001) docker     (122)     9620 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/IndexedView.h
--rw-r--r--   0 runner    (1001) docker     (122)     3503 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Inverse.h
--rw-r--r--   0 runner    (1001) docker     (122)     7256 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Map.h
--rw-r--r--   0 runner    (1001) docker     (122)    11281 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MapBase.h
--rw-r--r--   0 runner    (1001) docker     (122)    60784 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)     7156 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MathFunctionsImpl.h
--rw-r--r--   0 runner    (1001) docker     (122)    24343 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Matrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    23856 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MatrixBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     2520 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/NestByValue.h
--rw-r--r--   0 runner    (1001) docker     (122)     3620 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/NoAlias.h
--rw-r--r--   0 runner    (1001) docker     (122)    12884 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/NumTraits.h
--rw-r--r--   0 runner    (1001) docker     (122)     9207 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/PartialReduxEvaluator.h
--rw-r--r--   0 runner    (1001) docker     (122)    20748 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/PermutationMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    49193 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/PlainObjectBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     7336 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Product.h
--rw-r--r--   0 runner    (1001) docker     (122)    53832 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ProductEvaluators.h
--rw-r--r--   0 runner    (1001) docker     (122)     7756 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Random.h
--rw-r--r--   0 runner    (1001) docker     (122)    19195 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Redux.h
--rw-r--r--   0 runner    (1001) docker     (122)    17821 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Ref.h
--rw-r--r--   0 runner    (1001) docker     (122)     5656 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Replicate.h
--rw-r--r--   0 runner    (1001) docker     (122)    17033 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Reshaped.h
--rw-r--r--   0 runner    (1001) docker     (122)     4284 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ReturnByValue.h
--rw-r--r--   0 runner    (1001) docker     (122)     7522 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Reverse.h
--rw-r--r--   0 runner    (1001) docker     (122)     6143 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Select.h
--rw-r--r--   0 runner    (1001) docker     (122)    14999 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SelfAdjointView.h
--rw-r--r--   0 runner    (1001) docker     (122)     1697 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SelfCwiseBinaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)     6837 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Solve.h
--rw-r--r--   0 runner    (1001) docker     (122)     9368 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SolveTriangular.h
--rw-r--r--   0 runner    (1001) docker     (122)     6170 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SolverBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     8700 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/StableNorm.h
--rw-r--r--   0 runner    (1001) docker     (122)    21641 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/StlIterators.h
--rw-r--r--   0 runner    (1001) docker     (122)     4212 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Stride.h
--rw-r--r--   0 runner    (1001) docker     (122)     2765 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Swap.h
--rw-r--r--   0 runner    (1001) docker     (122)    17606 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Transpose.h
--rw-r--r--   0 runner    (1001) docker     (122)    13567 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Transpositions.h
--rw-r--r--   0 runner    (1001) docker     (122)    38277 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/TriangularMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)     3488 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/VectorBlock.h
--rw-r--r--   0 runner    (1001) docker     (122)    35168 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/VectorwiseOp.h
--rw-r--r--   0 runner    (1001) docker     (122)    11997 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Visitor.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.174813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.198814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/
--rw-r--r--   0 runner    (1001) docker     (122)    15223 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)     8102 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)    64608 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)     2564 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.198814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/
--rw-r--r--   0 runner    (1001) docker     (122)    17160 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)    13344 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)    87891 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)     2134 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.198814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/
--rw-r--r--   0 runner    (1001) docker     (122)    16540 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)     2323 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)   119355 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)     9490 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductCommon.h
--rw-r--r--   0 runner    (1001) docker     (122)    24820 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductMMA.h
--rwxr-xr-x   0 runner    (1001) docker     (122)   102394 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/PacketMath.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.198814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/CUDA/
--rw-r--r--   0 runner    (1001) docker     (122)    17317 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/CUDA/Complex.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/
--rw-r--r--   0 runner    (1001) docker     (122)    26903 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/BFloat16.h
--rw-r--r--   0 runner    (1001) docker     (122)     5251 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/ConjHelper.h
--rw-r--r--   0 runner    (1001) docker     (122)    67696 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)     3770 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctionsFwd.h
--rw-r--r--   0 runner    (1001) docker     (122)    35534 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/Half.h
--rw-r--r--   0 runner    (1001) docker     (122)     1746 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/Settings.h
--rw-r--r--   0 runner    (1001) docker     (122)     3746 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/
--rw-r--r--   0 runner    (1001) docker     (122)     2695 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)    57047 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)     2256 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.174813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/HIP/
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/HIP/hcc/
--rw-r--r--   0 runner    (1001) docker     (122)      691 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/HIP/hcc/math_constants.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/
--rw-r--r--   0 runner    (1001) docker     (122)    17541 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)    16159 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)    33615 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/PacketMath.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/
--rw-r--r--   0 runner    (1001) docker     (122)    22503 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)     6815 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/GeneralBlockPanelKernel.h
--rw-r--r--   0 runner    (1001) docker     (122)     3083 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)   189525 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)    51286 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/
--rw-r--r--   0 runner    (1001) docker     (122)    14251 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)     6765 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/MathFunctions.h
--rwxr-xr-x   0 runner    (1001) docker     (122)    64465 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)     3650 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.202813 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/
--rw-r--r--   0 runner    (1001) docker     (122)     1194 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)    21200 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)     1351 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.206814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/
--rw-r--r--   0 runner    (1001) docker     (122)     7428 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/InteropHeaders.h
--rw-r--r--   0 runner    (1001) docker     (122)    12539 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/MathFunctions.h
--rw-r--r--   0 runner    (1001) docker     (122)    27786 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/PacketMath.h
--rw-r--r--   0 runner    (1001) docker     (122)    21856 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/SyclMemoryModel.h
--rw-r--r--   0 runner    (1001) docker     (122)     2626 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/TypeCasting.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.206814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/
--rw-r--r--   0 runner    (1001) docker     (122)    16728 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/Complex.h
--rw-r--r--   0 runner    (1001) docker     (122)     8024 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/MathFunctions.h
--rwxr-xr-x   0 runner    (1001) docker     (122)    36894 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/PacketMath.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.206814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/
--rw-r--r--   0 runner    (1001) docker     (122)     6686 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/AssignmentFunctors.h
--rw-r--r--   0 runner    (1001) docker     (122)    20921 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/BinaryFunctors.h
--rw-r--r--   0 runner    (1001) docker     (122)     8334 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/NullaryFunctors.h
--rw-r--r--   0 runner    (1001) docker     (122)     4998 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/StlFunctors.h
--rw-r--r--   0 runner    (1001) docker     (122)      607 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/TernaryFunctors.h
--rw-r--r--   0 runner    (1001) docker     (122)    40146 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/UnaryFunctors.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.210814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/
--rw-r--r--   0 runner    (1001) docker     (122)   108448 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralBlockPanelKernel.h
--rw-r--r--   0 runner    (1001) docker     (122)    20104 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    15948 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular.h
--rw-r--r--   0 runner    (1001) docker     (122)     6936 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)     5106 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)    21724 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector.h
--rw-r--r--   0 runner    (1001) docker     (122)     6368 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)     5582 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/Parallelizer.h
--rw-r--r--   0 runner    (1001) docker     (122)    21354 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    11570 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)     9958 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector.h
--rw-r--r--   0 runner    (1001) docker     (122)     5209 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)     6164 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)     4126 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointRank2Update.h
--rw-r--r--   0 runner    (1001) docker     (122)    20987 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    13867 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)    14722 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector.h
--rw-r--r--   0 runner    (1001) docker     (122)    10571 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)    14678 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)     6707 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix_BLAS.h
--rw-r--r--   0 runner    (1001) docker     (122)     5882 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverVector.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.210814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/
--rwxr-xr-x   0 runner    (1001) docker     (122)    23156 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/BlasUtil.h
--rw-r--r--   0 runner    (1001) docker     (122)    19876 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ConfigureVectorization.h
--rw-r--r--   0 runner    (1001) docker     (122)    21931 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Constants.h
--rwxr-xr-x   0 runner    (1001) docker     (122)     4892 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/DisableStupidWarnings.h
--rw-r--r--   0 runner    (1001) docker     (122)    15555 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ForwardDeclarations.h
--rw-r--r--   0 runner    (1001) docker     (122)     6696 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/IndexedViewHelper.h
--rw-r--r--   0 runner    (1001) docker     (122)    10949 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/IntegralConstant.h
--rwxr-xr-x   0 runner    (1001) docker     (122)     4268 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/MKL_support.h
--rw-r--r--   0 runner    (1001) docker     (122)    52909 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Macros.h
--rw-r--r--   0 runner    (1001) docker     (122)    46661 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Memory.h
--rwxr-xr-x   0 runner    (1001) docker     (122)    29336 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Meta.h
--rw-r--r--   0 runner    (1001) docker     (122)       85 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/NonMPL2.h
--rw-r--r--   0 runner    (1001) docker     (122)     1024 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ReenableStupidWarnings.h
--rw-r--r--   0 runner    (1001) docker     (122)     1432 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ReshapedHelper.h
--rw-r--r--   0 runner    (1001) docker     (122)    10676 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/StaticAssert.h
--rw-r--r--   0 runner    (1001) docker     (122)    12003 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/SymbolicIndex.h
--rw-r--r--   0 runner    (1001) docker     (122)    35762 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/XprHelper.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.210814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/
--rw-r--r--   0 runner    (1001) docker     (122)    12559 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexEigenSolver.h
--rw-r--r--   0 runner    (1001) docker     (122)    17274 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur.h
--rw-r--r--   0 runner    (1001) docker     (122)     4178 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur_LAPACKE.h
--rw-r--r--   0 runner    (1001) docker     (122)    22970 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/EigenSolver.h
--rw-r--r--   0 runner    (1001) docker     (122)    17176 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedEigenSolver.h
--rw-r--r--   0 runner    (1001) docker     (122)     9716 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedSelfAdjointEigenSolver.h
--rw-r--r--   0 runner    (1001) docker     (122)    14349 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/HessenbergDecomposition.h
--rw-r--r--   0 runner    (1001) docker     (122)     5575 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/MatrixBaseEigenvalues.h
--rw-r--r--   0 runner    (1001) docker     (122)    23640 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/RealQZ.h
--rw-r--r--   0 runner    (1001) docker     (122)    21078 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur.h
--rw-r--r--   0 runner    (1001) docker     (122)     3650 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur_LAPACKE.h
--rw-r--r--   0 runner    (1001) docker     (122)    35182 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver.h
--rw-r--r--   0 runner    (1001) docker     (122)     4104 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver_LAPACKE.h
--rw-r--r--   0 runner    (1001) docker     (122)    22764 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/Tridiagonalization.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.214814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/
--rw-r--r--   0 runner    (1001) docker     (122)    18939 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/AlignedBox.h
--rw-r--r--   0 runner    (1001) docker     (122)     8403 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/AngleAxis.h
--rw-r--r--   0 runner    (1001) docker     (122)     3624 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/EulerAngles.h
--rw-r--r--   0 runner    (1001) docker     (122)    20726 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Homogeneous.h
--rw-r--r--   0 runner    (1001) docker     (122)    11962 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Hyperplane.h
--rw-r--r--   0 runner    (1001) docker     (122)     8955 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/OrthoMethods.h
--rw-r--r--   0 runner    (1001) docker     (122)     9812 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/ParametrizedLine.h
--rw-r--r--   0 runner    (1001) docker     (122)    34367 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Quaternion.h
--rw-r--r--   0 runner    (1001) docker     (122)     6862 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Rotation2D.h
--rw-r--r--   0 runner    (1001) docker     (122)     8063 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/RotationBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     6724 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Scaling.h
--rw-r--r--   0 runner    (1001) docker     (122)    61930 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Transform.h
--rw-r--r--   0 runner    (1001) docker     (122)     7664 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Translation.h
--rw-r--r--   0 runner    (1001) docker     (122)     6190 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Umeyama.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.214814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/arch/
--rw-r--r--   0 runner    (1001) docker     (122)     5945 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/arch/Geometry_SIMD.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.214814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/
--rw-r--r--   0 runner    (1001) docker     (122)     4784 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/BlockHouseholder.h
--rw-r--r--   0 runner    (1001) docker     (122)     5365 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/Householder.h
--rw-r--r--   0 runner    (1001) docker     (122)    23611 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/HouseholderSequence.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.214814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/
--rw-r--r--   0 runner    (1001) docker     (122)     6771 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BasicPreconditioners.h
--rw-r--r--   0 runner    (1001) docker     (122)     6850 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BiCGSTAB.h
--rw-r--r--   0 runner    (1001) docker     (122)     8887 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/ConjugateGradient.h
--rw-r--r--   0 runner    (1001) docker     (122)    15036 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteCholesky.h
--rw-r--r--   0 runner    (1001) docker     (122)    14940 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteLUT.h
--rw-r--r--   0 runner    (1001) docker     (122)    13379 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     7349 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/LeastSquareConjugateGradient.h
--rw-r--r--   0 runner    (1001) docker     (122)     4212 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/SolveWithGuess.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.214814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Jacobi/
--rw-r--r--   0 runner    (1001) docker     (122)    16383 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Jacobi/Jacobi.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.214814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/KLUSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    11555 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/KLUSupport/KLUSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/
--rw-r--r--   0 runner    (1001) docker     (122)     3439 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/Determinant.h
--rw-r--r--   0 runner    (1001) docker     (122)    32383 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/FullPivLU.h
--rw-r--r--   0 runner    (1001) docker     (122)    15727 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/InverseImpl.h
--rw-r--r--   0 runner    (1001) docker     (122)    22069 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/PartialPivLU.h
--rw-r--r--   0 runner    (1001) docker     (122)     3555 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/PartialPivLU_LAPACKE.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/arch/
--rw-r--r--   0 runner    (1001) docker     (122)    13693 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/arch/InverseSize4.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/MetisSupport/
--rw-r--r--   0 runner    (1001) docker     (122)     4588 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/MetisSupport/MetisSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/
--rw-r--r--   0 runner    (1001) docker     (122)    16105 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/Amd.h
--rw-r--r--   0 runner    (1001) docker     (122)    61681 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/Eigen_Colamd.h
--rw-r--r--   0 runner    (1001) docker     (122)     5248 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/Ordering.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/PaStiXSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    22249 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/PaStiXSupport/PaStiXSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/PardisoSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    20092 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/PardisoSupport/PardisoSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/
--rw-r--r--   0 runner    (1001) docker     (122)    25498 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR.h
--rw-r--r--   0 runner    (1001) docker     (122)     4662 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR_LAPACKE.h
--rw-r--r--   0 runner    (1001) docker     (122)    23429 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/CompleteOrthogonalDecomposition.h
--rw-r--r--   0 runner    (1001) docker     (122)    26768 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/FullPivHouseholderQR.h
--rw-r--r--   0 runner    (1001) docker     (122)    14641 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/HouseholderQR.h
--rw-r--r--   0 runner    (1001) docker     (122)     2993 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/HouseholderQR_LAPACKE.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SPQRSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    11826 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SPQRSupport/SuiteSparseQRSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/
--rw-r--r--   0 runner    (1001) docker     (122)    54214 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/BDCSVD.h
--rw-r--r--   0 runner    (1001) docker     (122)    32988 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD.h
--rw-r--r--   0 runner    (1001) docker     (122)     5099 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD_LAPACKE.h
--rw-r--r--   0 runner    (1001) docker     (122)    14743 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/SVDBase.h
--rw-r--r--   0 runner    (1001) docker     (122)    15957 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/UpperBidiagonalization.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.218814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCholesky/
--rw-r--r--   0 runner    (1001) docker     (122)    24216 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky.h
--rw-r--r--   0 runner    (1001) docker     (122)     5830 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky_impl.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.222814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/
--rw-r--r--   0 runner    (1001) docker     (122)    10670 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/AmbiVector.h
--rw-r--r--   0 runner    (1001) docker     (122)     8743 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/CompressedStorage.h
--rw-r--r--   0 runner    (1001) docker     (122)    13166 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/ConservativeSparseSparseProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)     2191 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/MappedSparseMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    11368 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseAssign.h
--rw-r--r--   0 runner    (1001) docker     (122)    24360 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseBlock.h
--rw-r--r--   0 runner    (1001) docker     (122)     6485 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseColEtree.h
--rw-r--r--   0 runner    (1001) docker     (122)    13606 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseCompressedBase.h
--rw-r--r--   0 runner    (1001) docker     (122)    25524 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseBinaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)     4757 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseUnaryOp.h
--rw-r--r--   0 runner    (1001) docker     (122)    13256 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseDenseProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)     5808 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseDiagonalProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)     3080 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseDot.h
--rw-r--r--   0 runner    (1001) docker     (122)     1107 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseFuzzy.h
--rw-r--r--   0 runner    (1001) docker     (122)    12589 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseMap.h
--rw-r--r--   0 runner    (1001) docker     (122)    57475 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)    17451 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrixBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     7329 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparsePermutation.h
--rw-r--r--   0 runner    (1001) docker     (122)     7593 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseProduct.h
--rw-r--r--   0 runner    (1001) docker     (122)     1699 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseRedux.h
--rw-r--r--   0 runner    (1001) docker     (122)    15600 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseRef.h
--rw-r--r--   0 runner    (1001) docker     (122)    25889 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseSelfAdjointView.h
--rw-r--r--   0 runner    (1001) docker     (122)     4424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseSolverBase.h
--rw-r--r--   0 runner    (1001) docker     (122)     8704 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseSparseProductWithPruning.h
--rw-r--r--   0 runner    (1001) docker     (122)     3175 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseTranspose.h
--rw-r--r--   0 runner    (1001) docker     (122)     6437 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseTriangularView.h
--rw-r--r--   0 runner    (1001) docker     (122)     6827 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseUtil.h
--rw-r--r--   0 runner    (1001) docker     (122)    14832 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseVector.h
--rw-r--r--   0 runner    (1001) docker     (122)     8127 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseView.h
--rw-r--r--   0 runner    (1001) docker     (122)     9657 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/TriangularSolver.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.226814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/
--rw-r--r--   0 runner    (1001) docker     (122)    33316 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU.h
--rw-r--r--   0 runner    (1001) docker     (122)     4303 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLUImpl.h
--rw-r--r--   0 runner    (1001) docker     (122)     7602 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Memory.h
--rw-r--r--   0 runner    (1001) docker     (122)     4974 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Structs.h
--rw-r--r--   0 runner    (1001) docker     (122)    12837 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_SupernodalMatrix.h
--rw-r--r--   0 runner    (1001) docker     (122)     2049 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Utils.h
--rw-r--r--   0 runner    (1001) docker     (122)     6712 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_bmod.h
--rw-r--r--   0 runner    (1001) docker     (122)     6584 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_dfs.h
--rw-r--r--   0 runner    (1001) docker     (122)     3681 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_copy_to_ucol.h
--rw-r--r--   0 runner    (1001) docker     (122)    10217 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_gemm_kernel.h
--rw-r--r--   0 runner    (1001) docker     (122)     4181 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_heap_relax_snode.h
--rw-r--r--   0 runner    (1001) docker     (122)     5723 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_kernel_bmod.h
--rw-r--r--   0 runner    (1001) docker     (122)     8485 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_bmod.h
--rw-r--r--   0 runner    (1001) docker     (122)     9028 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_dfs.h
--rw-r--r--   0 runner    (1001) docker     (122)     4979 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pivotL.h
--rw-r--r--   0 runner    (1001) docker     (122)     4545 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pruneL.h
--rw-r--r--   0 runner    (1001) docker     (122)     2889 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_relax_snode.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.226814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseQR/
--rw-r--r--   0 runner    (1001) docker     (122)    29167 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseQR/SparseQR.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.226814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/
--rw-r--r--   0 runner    (1001) docker     (122)     4730 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/StdDeque.h
--rw-r--r--   0 runner    (1001) docker     (122)     4155 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/StdList.h
--rw-r--r--   0 runner    (1001) docker     (122)     5338 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/StdVector.h
--rw-r--r--   0 runner    (1001) docker     (122)     2809 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/details.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.226814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SuperLUSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    34324 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SuperLUSupport/SuperLUSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.226814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/UmfPackSupport/
--rw-r--r--   0 runner    (1001) docker     (122)    24456 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/UmfPackSupport/UmfPackSupport.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.230814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/
--rw-r--r--   0 runner    (1001) docker     (122)     2913 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/Image.h
--rw-r--r--   0 runner    (1001) docker     (122)     2742 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/Kernel.h
--rw-r--r--   0 runner    (1001) docker     (122)     1748 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/RealSvd2x2.h
--rw-r--r--   0 runner    (1001) docker     (122)    30560 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/blas.h
--rw-r--r--   0 runner    (1001) docker     (122)     7834 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/lapack.h
--rwxr-xr-x   0 runner    (1001) docker     (122)  1058369 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/lapacke.h
--rw-r--r--   0 runner    (1001) docker     (122)      474 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/lapacke_mangling.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.230814 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/
--rw-r--r--   0 runner    (1001) docker     (122)    14060 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseBinaryOps.h
--rw-r--r--   0 runner    (1001) docker     (122)    21431 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseUnaryOps.h
--rw-r--r--   0 runner    (1001) docker     (122)    59020 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/BlockMethods.h
--rw-r--r--   0 runner    (1001) docker     (122)     4828 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseBinaryOps.h
--rw-r--r--   0 runner    (1001) docker     (122)     6089 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseUnaryOps.h
--rw-r--r--   0 runner    (1001) docker     (122)    12283 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/IndexedViewMethods.h
--rw-r--r--   0 runner    (1001) docker     (122)     6387 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseBinaryOps.h
--rw-r--r--   0 runner    (1001) docker     (122)     3350 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseUnaryOps.h
--rw-r--r--   0 runner    (1001) docker     (122)     6915 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/ReshapedMethods.h
--rw-r--r--   0 runner    (1001) docker     (122)    47533 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/fknm.cpp
--rw-r--r--   0 runner    (1001) docker     (122)     1631 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/fknm.h
--rw-r--r--   0 runner    (1001) docker     (122)     8986 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/frne.c
--rw-r--r--   0 runner    (1001) docker     (122)     3220 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/frne.h
--rw-r--r--   0 runner    (1001) docker     (122)    18590 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/ik.cpp
--rw-r--r--   0 runner    (1001) docker     (122)     1780 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/ik.h
--rw-r--r--   0 runner    (1001) docker     (122)     8905 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/linalg.cpp
--rw-r--r--   0 runner    (1001) docker     (122)     1862 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/linalg.h
--rw-r--r--   0 runner    (1001) docker     (122)     9598 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/methods.cpp
--rw-r--r--   0 runner    (1001) docker     (122)      767 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/methods.h
--rw-r--r--   0 runner    (1001) docker     (122)    11495 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/ne.c
--rw-r--r--   0 runner    (1001) docker     (122)      660 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/structs.cpp
--rw-r--r--   0 runner    (1001) docker     (122)     1468 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/structs.h
--rw-r--r--   0 runner    (1001) docker     (122)     3092 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/vmath.c
--rw-r--r--   0 runner    (1001) docker     (122)      776 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/core/vmath.h
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.234814 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/
--rw-r--r--   0 runner    (1001) docker     (122)      761 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/RRMC.py
--rw-r--r--   0 runner    (1001) docker     (122)      572 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/RRMC_swift.py
--rw-r--r--   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     2476 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/baur.py
--rw-r--r--   0 runner    (1001) docker     (122)     1647 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/branched_robot.py
--rw-r--r--   0 runner    (1001) docker     (122)     2169 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/eigdemo.py
--rw-r--r--   0 runner    (1001) docker     (122)     6336 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/fetch_vision.py
--rw-r--r--   0 runner    (1001) docker     (122)     2728 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/holistic_mm_non_holonomic.py
--rw-r--r--   0 runner    (1001) docker     (122)     2732 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/holistic_mm_omni.py
--rw-r--r--   0 runner    (1001) docker     (122)     3357 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/icra2021.py
--rw-r--r--   0 runner    (1001) docker     (122)     6307 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/ik_exp.py
--rw-r--r--   0 runner    (1001) docker     (122)     2512 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/ik_speed.py
--rw-r--r--   0 runner    (1001) docker     (122)     1029 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/mexican-wave.py
--rw-r--r--   0 runner    (1001) docker     (122)     2524 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/mmc.py
--rw-r--r--   0 runner    (1001) docker     (122)     2792 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/mobile.py
--rw-r--r--   0 runner    (1001) docker     (122)     3705 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/neo.py
--rw-r--r--   0 runner    (1001) docker     (122)     1724 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/park.py
--rw-r--r--   0 runner    (1001) docker     (122)      502 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/plot.py
--rw-r--r--   0 runner    (1001) docker     (122)      133 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/plot_swift.py
--rw-r--r--   0 runner    (1001) docker     (122)      424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/puma_fdyn.py
--rw-r--r--   0 runner    (1001) docker     (122)     1323 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/puma_jtraj.py
--rw-r--r--   0 runner    (1001) docker     (122)      848 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/puma_swift.py
--rw-r--r--   0 runner    (1001) docker     (122)     1103 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/readme.py
--rw-r--r--   0 runner    (1001) docker     (122)     1710 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/robots.py
--rw-r--r--   0 runner    (1001) docker     (122)     3308 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/swift_recording.py
--rw-r--r--   0 runner    (1001) docker     (122)      251 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/teach.py
--rw-r--r--   0 runner    (1001) docker     (122)     1544 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/teach_swift.py
--rw-r--r--   0 runner    (1001) docker     (122)      220 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/test.py
--rw-r--r--   0 runner    (1001) docker     (122)     5397 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/tripleangledemo.py
--rw-r--r--   0 runner    (1001) docker     (122)     3215 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/twistdemo.py
--rw-r--r--   0 runner    (1001) docker     (122)      766 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/examples/vehicle1.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.238814 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/
--rw-r--r--   0 runner    (1001) docker     (122)    15319 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/Animations.py
--rw-r--r--   0 runner    (1001) docker     (122)    14467 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/Bug2.py
--rw-r--r--   0 runner    (1001) docker     (122)     5462 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/CurvaturePolyPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    12208 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/DistanceTransformPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    18533 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/DstarPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    13931 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/DubinsPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    48281 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/EKF.py
--rw-r--r--   0 runner    (1001) docker     (122)    13686 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/LatticePlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    17762 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/OccGrid.py
--rw-r--r--   0 runner    (1001) docker     (122)    10311 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/PRMPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    16652 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/ParticleFilter.py
--rw-r--r--   0 runner    (1001) docker     (122)    34266 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/PlannerBase.py
--rw-r--r--   0 runner    (1001) docker     (122)    18762 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/PoseGraph.py
--rw-r--r--   0 runner    (1001) docker     (122)     9781 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/QuinticPolyPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    10885 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/RRTPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    15631 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/ReedsSheppPlanner.py
--rw-r--r--   0 runner    (1001) docker     (122)    37534 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/Vehicle.py
--rw-r--r--   0 runner    (1001) docker     (122)     5589 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     8835 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/drivers.py
--rw-r--r--   0 runner    (1001) docker     (122)     5071 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/landmarkmap.py
--rw-r--r--   0 runner    (1001) docker     (122)    23924 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/sensors.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.238814 roboticstoolbox-python-1.0.3/roboticstoolbox/models/
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.242814 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/
--rw-r--r--   0 runner    (1001) docker     (122)     2941 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/AL5D.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     2134 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Ball.py
--rw-r--r--   0 runner    (1001) docker     (122)     2855 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Baxter.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     1562 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Cobra600.py
--rw-r--r--   0 runner    (1001) docker     (122)     2110 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Coil.py
--rw-r--r--   0 runner    (1001) docker     (122)     2133 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Hyper.py
--rw-r--r--   0 runner    (1001) docker     (122)     2181 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Hyper3d.py
--rw-r--r--   0 runner    (1001) docker     (122)     4452 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/IRB140.py
--rw-r--r--   0 runner    (1001) docker     (122)     2742 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Jaco.py
--rw-r--r--   0 runner    (1001) docker     (122)     2943 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/KR5.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     2402 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/LWR4.py
--rw-r--r--   0 runner    (1001) docker     (122)     2736 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Mico.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     2345 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Orion5.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     2161 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/P8.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     4772 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Panda.py
--rw-r--r--   0 runner    (1001) docker     (122)     1673 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Planar2.py
--rw-r--r--   0 runner    (1001) docker     (122)     1085 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Planar3.py
--rwxr-xr-x   0 runner    (1001) docker     (122)    11242 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Puma560.py
--rw-r--r--   0 runner    (1001) docker     (122)     2085 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Sawyer.py
--rwxr-xr-x   0 runner    (1001) docker     (122)     3909 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Stanford.py
--rw-r--r--   0 runner    (1001) docker     (122)     3353 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/TwoLink.py
--rw-r--r--   0 runner    (1001) docker     (122)     2513 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/UR10.py
--rw-r--r--   0 runner    (1001) docker     (122)     2484 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/UR3.py
--rw-r--r--   0 runner    (1001) docker     (122)     2535 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/UR5.py
--rw-r--r--   0 runner    (1001) docker     (122)      571 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Uprighttl.py
--rw-r--r--   0 runner    (1001) docker     (122)     1540 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.242814 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/
--rw-r--r--   0 runner    (1001) docker     (122)     2864 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Frankie.py
--rw-r--r--   0 runner    (1001) docker     (122)     1540 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/GenericSeven.py
--rw-r--r--   0 runner    (1001) docker     (122)     2232 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Omni.py
--rw-r--r--   0 runner    (1001) docker     (122)     1944 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Panda.py
--rw-r--r--   0 runner    (1001) docker     (122)     1207 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Planar2.py
--rw-r--r--   0 runner    (1001) docker     (122)     1720 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Planar_Y.py
--rw-r--r--   0 runner    (1001) docker     (122)     2006 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Puma560.py
--rw-r--r--   0 runner    (1001) docker     (122)     2559 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/XYPanda.py
--rw-r--r--   0 runner    (1001) docker     (122)      583 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.246814 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/
--rw-r--r--   0 runner    (1001) docker     (122)     1365 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/AL5D.py
--rw-r--r--   0 runner    (1001) docker     (122)     1762 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Fetch.py
--rw-r--r--   0 runner    (1001) docker     (122)     1738 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/FetchCamera.py
--rw-r--r--   0 runner    (1001) docker     (122)     1960 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Frankie.py
--rw-r--r--   0 runner    (1001) docker     (122)     2490 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/FrankieOmni.py
--rw-r--r--   0 runner    (1001) docker     (122)     1596 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/KinovaGen3.py
--rw-r--r--   0 runner    (1001) docker     (122)     1586 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/LBR.py
--rw-r--r--   0 runner    (1001) docker     (122)     1804 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Mico.py
--rw-r--r--   0 runner    (1001) docker     (122)     1482 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/PR2.py
--rw-r--r--   0 runner    (1001) docker     (122)     1737 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Panda.py
--rw-r--r--   0 runner    (1001) docker     (122)     3028 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Puma560.py
--rw-r--r--   0 runner    (1001) docker     (122)     1349 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/UR10.py
--rw-r--r--   0 runner    (1001) docker     (122)     1342 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/UR3.py
--rw-r--r--   0 runner    (1001) docker     (122)     1960 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/UR5.py
--rw-r--r--   0 runner    (1001) docker     (122)     2752 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Valkyrie.py
--rw-r--r--   0 runner    (1001) docker     (122)     3248 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/YuMi.py
--rw-r--r--   0 runner    (1001) docker     (122)     1682 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     1421 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/px100.py
--rw-r--r--   0 runner    (1001) docker     (122)     1424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/px150.py
--rw-r--r--   0 runner    (1001) docker     (122)     1424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/rx150.py
--rw-r--r--   0 runner    (1001) docker     (122)     1425 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/rx200.py
--rw-r--r--   0 runner    (1001) docker     (122)     1424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/vx300.py
--rw-r--r--   0 runner    (1001) docker     (122)     1438 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/vx300s.py
--rw-r--r--   0 runner    (1001) docker     (122)     1424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/wx200.py
--rw-r--r--   0 runner    (1001) docker     (122)     1424 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/wx250.py
--rw-r--r--   0 runner    (1001) docker     (122)     1438 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/wx250s.py
--rw-r--r--   0 runner    (1001) docker     (122)      222 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     4146 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/models/list.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.246814 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/
--rw-r--r--   0 runner    (1001) docker     (122)    15948 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/DHFactor.py
--rw-r--r--   0 runner    (1001) docker     (122)    28403 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/DHLink.py
--rw-r--r--   0 runner    (1001) docker     (122)    85052 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/DHRobot.py
--rw-r--r--   0 runner    (1001) docker     (122)    55831 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/Dynamics.py
--rw-r--r--   0 runner    (1001) docker     (122)      525 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ELink.py
--rw-r--r--   0 runner    (1001) docker     (122)   105812 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ERobot.py
--rw-r--r--   0 runner    (1001) docker     (122)    25264 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ET.py
--rw-r--r--   0 runner    (1001) docker     (122)    89723 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ETS.py
--rw-r--r--   0 runner    (1001) docker     (122)      180 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ETSRobot.py
--rw-r--r--   0 runner    (1001) docker     (122)     5300 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/Gripper.py
--rw-r--r--   0 runner    (1001) docker     (122)    35048 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/IK.py
--rw-r--r--   0 runner    (1001) docker     (122)    17336 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/KinematicCache.py
--rw-r--r--   0 runner    (1001) docker     (122)    46622 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/Link.py
--rw-r--r--   0 runner    (1001) docker     (122)     5900 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/PoERobot.py
--rw-r--r--   0 runner    (1001) docker     (122)    72716 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/Robot.py
--rw-r--r--   0 runner    (1001) docker     (122)     1200 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     2670 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ikine_evaluate.py
--rw-r--r--   0 runner    (1001) docker     (122)     2145 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ikine_evaluate2.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/
--rw-r--r--   0 runner    (1001) docker     (122)    11529 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/DHFactor.py
--rw-r--r--   0 runner    (1001) docker     (122)     1201 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/Ticker.py
--rw-r--r--   0 runner    (1001) docker     (122)     1168 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     4873 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/data.py
--rw-r--r--   0 runner    (1001) docker     (122)     1399 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/jsingu.py
--rw-r--r--   0 runner    (1001) docker     (122)     1507 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/null.py
--rw-r--r--   0 runner    (1001) docker     (122)     2508 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/numerical.py
--rw-r--r--   0 runner    (1001) docker     (122)     2571 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/p_servo.py
--rw-r--r--   0 runner    (1001) docker     (122)      149 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/params.py
--rw-r--r--   0 runner    (1001) docker     (122)     2865 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/plot.py
--rw-r--r--   0 runner    (1001) docker     (122)    30556 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/trajectory.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/
--rw-r--r--   0 runner    (1001) docker     (122)      574 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)    59882 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/urdf.py
--rw-r--r--   0 runner    (1001) docker     (122)     1483 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/utils.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/
--rw-r--r--   0 runner    (1001) docker     (122)    37597 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/__init__.py
--rw-r--r--   0 runner    (1001) docker     (122)     4713 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/cli.py
--rw-r--r--   0 runner    (1001) docker     (122)     2751 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/color.py
--rw-r--r--   0 runner    (1001) docker     (122)     5367 2022-12-07 08:20:09.000000 roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/xmlutils.py
-drwxr-xr-x   0 runner    (1001) docker     (122)        0 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/
--rw-r--r--   0 runner    (1001) docker     (122)    19118 2022-12-07 08:20:22.000000 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (122)    26405 2022-12-07 08:20:22.000000 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (122)        1 2022-12-07 08:20:22.000000 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (122)      182 2022-12-07 08:20:22.000000 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/entry_points.txt
--rw-r--r--   0 runner    (1001) docker     (122)      259 2022-12-07 08:20:22.000000 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/requires.txt
--rw-r--r--   0 runner    (1001) docker     (122)       16 2022-12-07 08:20:22.000000 roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/top_level.txt
--rw-r--r--   0 runner    (1001) docker     (122)       38 2022-12-07 08:20:22.250814 roboticstoolbox-python-1.0.3/setup.cfg
--rw-r--r--   0 runner    (1001) docker     (122)     1134 2022-12-07 08:20:11.000000 roboticstoolbox-python-1.0.3/setup.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.660790 roboticstoolbox-python-1.1.0/
+-rw-r--r--   0 runner    (1001) docker     (123)     1062 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (123)    18903 2023-05-14 06:46:54.660790 roboticstoolbox-python-1.1.0/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (123)    16486 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/README.md
+-rw-r--r--   0 runner    (1001) docker     (123)     4356 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/pyproject.toml
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.568786 roboticstoolbox-python-1.1.0/roboticstoolbox/
+-rw-r--r--   0 runner    (1001) docker     (123)     1864 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.572786 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/
+-rw-r--r--   0 runner    (1001) docker     (123)     2463 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/Connector.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.572786 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/
+-rw-r--r--   0 runner    (1001) docker     (123)     5539 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/EllipsePlot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18326 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/PyPlot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10941 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/PyPlot2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7531 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/RobotPlot.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3526 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/RobotPlot2.py
+-rw-r--r--   0 runner    (1001) docker     (123)      161 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.572786 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/swift/
+-rw-r--r--   0 runner    (1001) docker     (123)      388 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/backends/swift/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.572786 roboticstoolbox-python-1.1.0/roboticstoolbox/bin/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/bin/__init__.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     7761 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/bin/rtbtool.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.572786 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/
+-rw-r--r--   0 runner    (1001) docker     (123)      160 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    41249 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/arm.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13588 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/mobile.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4407 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/quad_model.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5260 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/spatial.py
+-rw-r--r--   0 runner    (1001) docker     (123)    31034 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/uav.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.572786 roboticstoolbox-python-1.1.0/roboticstoolbox/core/
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.580787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/
+-rw-r--r--   0 runner    (1001) docker     (123)     1161 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Cholesky
+-rw-r--r--   0 runner    (1001) docker     (123)     1900 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/CholmodSupport
+-rw-r--r--   0 runner    (1001) docker     (123)    12799 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Core
+-rw-r--r--   0 runner    (1001) docker     (123)      122 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Dense
+-rw-r--r--   0 runner    (1001) docker     (123)       35 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Eigen
+-rw-r--r--   0 runner    (1001) docker     (123)     1777 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Eigenvalues
+-rw-r--r--   0 runner    (1001) docker     (123)     1940 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Geometry
+-rw-r--r--   0 runner    (1001) docker     (123)      829 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Householder
+-rw-r--r--   0 runner    (1001) docker     (123)     2083 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/IterativeLinearSolvers
+-rw-r--r--   0 runner    (1001) docker     (123)      894 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Jacobi
+-rw-r--r--   0 runner    (1001) docker     (123)     1389 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/KLUSupport
+-rw-r--r--   0 runner    (1001) docker     (123)     1268 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/LU
+-rw-r--r--   0 runner    (1001) docker     (123)      991 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/MetisSupport
+-rw-r--r--   0 runner    (1001) docker     (123)     2451 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/OrderingMethods
+-rw-r--r--   0 runner    (1001) docker     (123)     1751 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/PaStiXSupport
+-rw-r--r--   0 runner    (1001) docker     (123)     1116 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/PardisoSupport
+-rw-r--r--   0 runner    (1001) docker     (123)     1272 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/QR
+-rw-r--r--   0 runner    (1001) docker     (123)      900 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/QtAlignedMalloc
+-rw-r--r--   0 runner    (1001) docker     (123)     1162 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SPQRSupport
+-rw-r--r--   0 runner    (1001) docker     (123)     1584 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SVD
+-rw-r--r--   0 runner    (1001) docker     (123)      888 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Sparse
+-rw-r--r--   0 runner    (1001) docker     (123)     1235 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseCholesky
+-rw-r--r--   0 runner    (1001) docker     (123)     2240 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseCore
+-rw-r--r--   0 runner    (1001) docker     (123)     1814 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseLU
+-rw-r--r--   0 runner    (1001) docker     (123)     1195 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseQR
+-rw-r--r--   0 runner    (1001) docker     (123)      797 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/StdDeque
+-rw-r--r--   0 runner    (1001) docker     (123)      726 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/StdList
+-rw-r--r--   0 runner    (1001) docker     (123)      803 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/StdVector
+-rw-r--r--   0 runner    (1001) docker     (123)     2243 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SuperLUSupport
+-rw-r--r--   0 runner    (1001) docker     (123)     1382 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/UmfPackSupport
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.568786 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.580787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/
+-rw-r--r--   0 runner    (1001) docker     (123)    24934 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/LDLT.h
+-rw-r--r--   0 runner    (1001) docker     (123)    18760 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/LLT.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3974 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/LLT_LAPACKE.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.580787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/CholmodSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    25441 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/CholmodSupport/CholmodSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.592787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/
+-rw-r--r--   0 runner    (1001) docker     (123)    19214 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ArithmeticSequence.h
+-rw-r--r--   0 runner    (1001) docker     (123)    16782 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Array.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8217 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ArrayBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7018 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ArrayWrapper.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2738 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Assign.h
+-rw-r--r--   0 runner    (1001) docker     (123)    41673 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/AssignEvaluator.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)    12488 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Assign_MKL.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14075 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/BandMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    18648 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Block.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4429 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/BooleanRedux.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5981 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CommaInitializer.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6990 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ConditionEstimator.h
+-rw-r--r--   0 runner    (1001) docker     (123)    63841 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CoreEvaluators.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4745 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CoreIterators.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7909 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseBinaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)    36282 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseNullaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8256 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseTernaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3937 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5551 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryView.h
+-rw-r--r--   0 runner    (1001) docker     (123)    31529 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DenseBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)    24484 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DenseCoeffsBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)    25360 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DenseStorage.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9870 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Diagonal.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14670 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DiagonalMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)      988 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DiagonalProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11654 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Dot.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5841 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/EigenBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4909 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ForceAlignedAccess.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5759 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Fuzzy.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21679 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/GeneralProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)    38812 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/GenericPacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11543 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/GlobalFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8238 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/IO.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9620 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/IndexedView.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3503 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Inverse.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7256 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Map.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11281 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MapBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)    60784 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7156 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MathFunctionsImpl.h
+-rw-r--r--   0 runner    (1001) docker     (123)    24343 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Matrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    23856 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MatrixBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2520 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/NestByValue.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3620 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/NoAlias.h
+-rw-r--r--   0 runner    (1001) docker     (123)    12884 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/NumTraits.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9207 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/PartialReduxEvaluator.h
+-rw-r--r--   0 runner    (1001) docker     (123)    20748 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/PermutationMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    49193 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/PlainObjectBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7336 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Product.h
+-rw-r--r--   0 runner    (1001) docker     (123)    53832 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ProductEvaluators.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7756 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Random.h
+-rw-r--r--   0 runner    (1001) docker     (123)    19195 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Redux.h
+-rw-r--r--   0 runner    (1001) docker     (123)    17821 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Ref.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5656 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Replicate.h
+-rw-r--r--   0 runner    (1001) docker     (123)    17033 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Reshaped.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4284 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ReturnByValue.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7522 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Reverse.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6143 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Select.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14999 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SelfAdjointView.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1697 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SelfCwiseBinaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6837 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Solve.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9368 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SolveTriangular.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6170 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SolverBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8700 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/StableNorm.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21641 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/StlIterators.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4212 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Stride.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2765 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Swap.h
+-rw-r--r--   0 runner    (1001) docker     (123)    17606 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Transpose.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13567 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Transpositions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    38277 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/TriangularMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3488 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/VectorBlock.h
+-rw-r--r--   0 runner    (1001) docker     (123)    35168 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/VectorwiseOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11997 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Visitor.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.564786 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.592787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/
+-rw-r--r--   0 runner    (1001) docker     (123)    15223 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8102 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    64608 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2564 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.592787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/
+-rw-r--r--   0 runner    (1001) docker     (123)    17160 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13344 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    87891 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2134 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.592787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/
+-rw-r--r--   0 runner    (1001) docker     (123)    16540 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2323 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)   119355 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9490 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductCommon.h
+-rw-r--r--   0 runner    (1001) docker     (123)    24820 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductMMA.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)   102394 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/PacketMath.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.592787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/CUDA/
+-rw-r--r--   0 runner    (1001) docker     (123)    17317 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/CUDA/Complex.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.596787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/
+-rw-r--r--   0 runner    (1001) docker     (123)    26903 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/BFloat16.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5251 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/ConjHelper.h
+-rw-r--r--   0 runner    (1001) docker     (123)    67696 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3770 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctionsFwd.h
+-rw-r--r--   0 runner    (1001) docker     (123)    35534 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/Half.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1746 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/Settings.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3746 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.596787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/
+-rw-r--r--   0 runner    (1001) docker     (123)     2695 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    57047 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2256 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.564786 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/HIP/
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.596787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/HIP/hcc/
+-rw-r--r--   0 runner    (1001) docker     (123)      691 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/HIP/hcc/math_constants.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.596787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/
+-rw-r--r--   0 runner    (1001) docker     (123)    17541 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)    16159 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    33615 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/PacketMath.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.596787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/
+-rw-r--r--   0 runner    (1001) docker     (123)    22503 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6815 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/GeneralBlockPanelKernel.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3083 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)   189525 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)    51286 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.600787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/
+-rw-r--r--   0 runner    (1001) docker     (123)    14251 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6765 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/MathFunctions.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)    64465 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3650 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.600787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/
+-rw-r--r--   0 runner    (1001) docker     (123)     1194 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21200 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1351 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.600787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/
+-rw-r--r--   0 runner    (1001) docker     (123)     7428 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/InteropHeaders.h
+-rw-r--r--   0 runner    (1001) docker     (123)    12539 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/MathFunctions.h
+-rw-r--r--   0 runner    (1001) docker     (123)    27786 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/PacketMath.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21856 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/SyclMemoryModel.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2626 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/TypeCasting.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.600787 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/
+-rw-r--r--   0 runner    (1001) docker     (123)    16728 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/Complex.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8024 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/MathFunctions.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)    36894 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/PacketMath.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.604788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/
+-rw-r--r--   0 runner    (1001) docker     (123)     6686 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/AssignmentFunctors.h
+-rw-r--r--   0 runner    (1001) docker     (123)    20921 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/BinaryFunctors.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8334 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/NullaryFunctors.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4998 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/StlFunctors.h
+-rw-r--r--   0 runner    (1001) docker     (123)      607 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/TernaryFunctors.h
+-rw-r--r--   0 runner    (1001) docker     (123)    40146 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/UnaryFunctors.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.604788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/
+-rw-r--r--   0 runner    (1001) docker     (123)   108448 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralBlockPanelKernel.h
+-rw-r--r--   0 runner    (1001) docker     (123)    20104 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    15948 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6936 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5106 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21724 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6368 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5582 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/Parallelizer.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21354 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11570 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9958 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5209 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6164 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4126 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointRank2Update.h
+-rw-r--r--   0 runner    (1001) docker     (123)    20987 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13867 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14722 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector.h
+-rw-r--r--   0 runner    (1001) docker     (123)    10571 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14678 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6707 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix_BLAS.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5882 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverVector.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.608788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/
+-rwxr-xr-x   0 runner    (1001) docker     (123)    23156 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/BlasUtil.h
+-rw-r--r--   0 runner    (1001) docker     (123)    19876 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ConfigureVectorization.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21931 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Constants.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)     4892 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/DisableStupidWarnings.h
+-rw-r--r--   0 runner    (1001) docker     (123)    15555 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ForwardDeclarations.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6696 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/IndexedViewHelper.h
+-rw-r--r--   0 runner    (1001) docker     (123)    10949 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/IntegralConstant.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)     4268 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/MKL_support.h
+-rw-r--r--   0 runner    (1001) docker     (123)    52909 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Macros.h
+-rw-r--r--   0 runner    (1001) docker     (123)    46661 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Memory.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)    29336 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Meta.h
+-rw-r--r--   0 runner    (1001) docker     (123)       85 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/NonMPL2.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1024 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ReenableStupidWarnings.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1432 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ReshapedHelper.h
+-rw-r--r--   0 runner    (1001) docker     (123)    10676 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/StaticAssert.h
+-rw-r--r--   0 runner    (1001) docker     (123)    12003 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/SymbolicIndex.h
+-rw-r--r--   0 runner    (1001) docker     (123)    35762 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/XprHelper.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.608788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/
+-rw-r--r--   0 runner    (1001) docker     (123)    12559 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexEigenSolver.h
+-rw-r--r--   0 runner    (1001) docker     (123)    17274 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4178 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur_LAPACKE.h
+-rw-r--r--   0 runner    (1001) docker     (123)    22970 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/EigenSolver.h
+-rw-r--r--   0 runner    (1001) docker     (123)    17176 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedEigenSolver.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9716 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedSelfAdjointEigenSolver.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14349 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/HessenbergDecomposition.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5575 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/MatrixBaseEigenvalues.h
+-rw-r--r--   0 runner    (1001) docker     (123)    23640 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/RealQZ.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21078 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3650 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur_LAPACKE.h
+-rw-r--r--   0 runner    (1001) docker     (123)    35182 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4104 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver_LAPACKE.h
+-rw-r--r--   0 runner    (1001) docker     (123)    22764 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/Tridiagonalization.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.612788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/
+-rw-r--r--   0 runner    (1001) docker     (123)    18939 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/AlignedBox.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8403 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/AngleAxis.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3624 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/EulerAngles.h
+-rw-r--r--   0 runner    (1001) docker     (123)    20726 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Homogeneous.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11962 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Hyperplane.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8955 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/OrthoMethods.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9812 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/ParametrizedLine.h
+-rw-r--r--   0 runner    (1001) docker     (123)    34367 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Quaternion.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6862 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Rotation2D.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8063 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/RotationBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6724 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Scaling.h
+-rw-r--r--   0 runner    (1001) docker     (123)    61930 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Transform.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7664 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Translation.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6190 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Umeyama.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.612788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/arch/
+-rw-r--r--   0 runner    (1001) docker     (123)     5945 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/arch/Geometry_SIMD.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.612788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/
+-rw-r--r--   0 runner    (1001) docker     (123)     4784 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/BlockHouseholder.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5365 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/Householder.h
+-rw-r--r--   0 runner    (1001) docker     (123)    23611 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/HouseholderSequence.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.612788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/
+-rw-r--r--   0 runner    (1001) docker     (123)     6771 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BasicPreconditioners.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6850 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BiCGSTAB.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8887 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/ConjugateGradient.h
+-rw-r--r--   0 runner    (1001) docker     (123)    15036 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteCholesky.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14940 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteLUT.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13379 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7349 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/LeastSquareConjugateGradient.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4212 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/SolveWithGuess.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.612788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Jacobi/
+-rw-r--r--   0 runner    (1001) docker     (123)    16383 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Jacobi/Jacobi.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.612788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/KLUSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    11555 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/KLUSupport/KLUSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/
+-rw-r--r--   0 runner    (1001) docker     (123)     3439 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/Determinant.h
+-rw-r--r--   0 runner    (1001) docker     (123)    32383 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/FullPivLU.h
+-rw-r--r--   0 runner    (1001) docker     (123)    15727 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/InverseImpl.h
+-rw-r--r--   0 runner    (1001) docker     (123)    22069 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/PartialPivLU.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3555 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/PartialPivLU_LAPACKE.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/arch/
+-rw-r--r--   0 runner    (1001) docker     (123)    13693 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/arch/InverseSize4.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/MetisSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)     4588 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/MetisSupport/MetisSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/
+-rw-r--r--   0 runner    (1001) docker     (123)    16105 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/Amd.h
+-rw-r--r--   0 runner    (1001) docker     (123)    61681 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/Eigen_Colamd.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5248 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/Ordering.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/PaStiXSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    22249 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/PaStiXSupport/PaStiXSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/PardisoSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    20092 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/PardisoSupport/PardisoSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/
+-rw-r--r--   0 runner    (1001) docker     (123)    25498 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4662 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR_LAPACKE.h
+-rw-r--r--   0 runner    (1001) docker     (123)    23429 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/CompleteOrthogonalDecomposition.h
+-rw-r--r--   0 runner    (1001) docker     (123)    26768 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/FullPivHouseholderQR.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14641 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/HouseholderQR.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2993 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/HouseholderQR_LAPACKE.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SPQRSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    11826 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SPQRSupport/SuiteSparseQRSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/
+-rw-r--r--   0 runner    (1001) docker     (123)    54214 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/BDCSVD.h
+-rw-r--r--   0 runner    (1001) docker     (123)    32988 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5099 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD_LAPACKE.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14743 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/SVDBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)    15957 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/UpperBidiagonalization.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.616788 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCholesky/
+-rw-r--r--   0 runner    (1001) docker     (123)    24216 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5830 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky_impl.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.624789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/
+-rw-r--r--   0 runner    (1001) docker     (123)    10670 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/AmbiVector.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8743 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/CompressedStorage.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13166 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/ConservativeSparseSparseProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2191 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/MappedSparseMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11368 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseAssign.h
+-rw-r--r--   0 runner    (1001) docker     (123)    24360 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseBlock.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6485 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseColEtree.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13606 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseCompressedBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)    25524 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseBinaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4757 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseUnaryOp.h
+-rw-r--r--   0 runner    (1001) docker     (123)    13256 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseDenseProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5808 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseDiagonalProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3080 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseDot.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1107 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseFuzzy.h
+-rw-r--r--   0 runner    (1001) docker     (123)    12589 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseMap.h
+-rw-r--r--   0 runner    (1001) docker     (123)    57475 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)    17451 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrixBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7329 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparsePermutation.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7593 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseProduct.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1699 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseRedux.h
+-rw-r--r--   0 runner    (1001) docker     (123)    15600 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseRef.h
+-rw-r--r--   0 runner    (1001) docker     (123)    25889 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseSelfAdjointView.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4424 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseSolverBase.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8704 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseSparseProductWithPruning.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3175 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseTranspose.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6437 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseTriangularView.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6827 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseUtil.h
+-rw-r--r--   0 runner    (1001) docker     (123)    14832 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseVector.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8127 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseView.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9657 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/TriangularSolver.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.624789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/
+-rw-r--r--   0 runner    (1001) docker     (123)    33316 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4303 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLUImpl.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7602 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Memory.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4974 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Structs.h
+-rw-r--r--   0 runner    (1001) docker     (123)    12837 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_SupernodalMatrix.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2049 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Utils.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6712 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_bmod.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6584 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_dfs.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3681 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_copy_to_ucol.h
+-rw-r--r--   0 runner    (1001) docker     (123)    10217 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_gemm_kernel.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4181 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_heap_relax_snode.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5723 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_kernel_bmod.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8485 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_bmod.h
+-rw-r--r--   0 runner    (1001) docker     (123)     9028 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_dfs.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4979 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pivotL.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4545 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pruneL.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2889 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_relax_snode.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.624789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseQR/
+-rw-r--r--   0 runner    (1001) docker     (123)    29167 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseQR/SparseQR.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.624789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)     4730 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/StdDeque.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4155 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/StdList.h
+-rw-r--r--   0 runner    (1001) docker     (123)     5338 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/StdVector.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2809 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/details.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.628789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SuperLUSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    34324 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SuperLUSupport/SuperLUSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.628789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/UmfPackSupport/
+-rw-r--r--   0 runner    (1001) docker     (123)    24456 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/UmfPackSupport/UmfPackSupport.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.628789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/
+-rw-r--r--   0 runner    (1001) docker     (123)     2913 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/Image.h
+-rw-r--r--   0 runner    (1001) docker     (123)     2742 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/Kernel.h
+-rw-r--r--   0 runner    (1001) docker     (123)     1748 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/RealSvd2x2.h
+-rw-r--r--   0 runner    (1001) docker     (123)    30560 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/blas.h
+-rw-r--r--   0 runner    (1001) docker     (123)     7834 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/lapack.h
+-rwxr-xr-x   0 runner    (1001) docker     (123)  1058369 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/lapacke.h
+-rw-r--r--   0 runner    (1001) docker     (123)      474 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/lapacke_mangling.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.632789 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/
+-rw-r--r--   0 runner    (1001) docker     (123)    14060 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseBinaryOps.h
+-rw-r--r--   0 runner    (1001) docker     (123)    21431 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseUnaryOps.h
+-rw-r--r--   0 runner    (1001) docker     (123)    59020 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/BlockMethods.h
+-rw-r--r--   0 runner    (1001) docker     (123)     4828 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseBinaryOps.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6089 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseUnaryOps.h
+-rw-r--r--   0 runner    (1001) docker     (123)    12283 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/IndexedViewMethods.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6387 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseBinaryOps.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3350 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseUnaryOps.h
+-rw-r--r--   0 runner    (1001) docker     (123)     6915 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/ReshapedMethods.h
+-rw-r--r--   0 runner    (1001) docker     (123)    43461 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/fknm.cpp
+-rw-r--r--   0 runner    (1001) docker     (123)     1778 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/fknm.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8986 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/frne.c
+-rw-r--r--   0 runner    (1001) docker     (123)     3220 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/frne.h
+-rw-r--r--   0 runner    (1001) docker     (123)    18728 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/ik.cpp
+-rw-r--r--   0 runner    (1001) docker     (123)     1780 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/ik.h
+-rw-r--r--   0 runner    (1001) docker     (123)     8905 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/linalg.cpp
+-rw-r--r--   0 runner    (1001) docker     (123)     1862 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/linalg.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11510 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/methods.cpp
+-rw-r--r--   0 runner    (1001) docker     (123)      767 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/methods.h
+-rw-r--r--   0 runner    (1001) docker     (123)    11495 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/ne.c
+-rw-r--r--   0 runner    (1001) docker     (123)      660 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/structs.cpp
+-rw-r--r--   0 runner    (1001) docker     (123)     1550 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/structs.h
+-rw-r--r--   0 runner    (1001) docker     (123)     3092 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/vmath.c
+-rw-r--r--   0 runner    (1001) docker     (123)      776 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/core/vmath.h
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.636789 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/
+-rw-r--r--   0 runner    (1001) docker     (123)      761 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/RRMC.py
+-rw-r--r--   0 runner    (1001) docker     (123)      572 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/RRMC_swift.py
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2476 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/baur.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1647 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/branched_robot.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2446 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/eigdemo.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6336 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/fetch_vision.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2728 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/holistic_mm_non_holonomic.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2732 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/holistic_mm_omni.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3357 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/icra2021.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6307 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ik_exp.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2512 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ik_speed.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2670 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ikine_evaluate.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2145 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ikine_evaluate2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1029 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/mexican-wave.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2524 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/mmc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2792 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/mobile.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3705 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/neo.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1724 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/park.py
+-rw-r--r--   0 runner    (1001) docker     (123)      502 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/plot.py
+-rw-r--r--   0 runner    (1001) docker     (123)      133 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/plot_swift.py
+-rw-r--r--   0 runner    (1001) docker     (123)      478 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/puma_fdyn.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1323 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/puma_jtraj.py
+-rw-r--r--   0 runner    (1001) docker     (123)      848 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/puma_swift.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1103 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/readme.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1710 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/robots.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3308 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/swift_recording.py
+-rw-r--r--   0 runner    (1001) docker     (123)      251 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/teach.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1544 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/teach_swift.py
+-rw-r--r--   0 runner    (1001) docker     (123)      426 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/test.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5397 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/tripleangledemo.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3215 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/twistdemo.py
+-rw-r--r--   0 runner    (1001) docker     (123)      766 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/examples/vehicle1.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.640789 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/
+-rw-r--r--   0 runner    (1001) docker     (123)    15450 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/Animations.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14510 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/Bug2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5462 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/CurvaturePolyPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12236 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/DistanceTransformPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    19218 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/DstarPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14088 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/DubinsPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    52492 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/EKF.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13825 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/LatticePlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17934 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/OccGrid.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10665 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/PRMPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22378 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/ParticleFilter.py
+-rw-r--r--   0 runner    (1001) docker     (123)    34471 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/PlannerBase.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17075 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/PoseGraph.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10359 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/QuinticPolyPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11746 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/RRTPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16612 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/ReedsSheppPlanner.py
+-rw-r--r--   0 runner    (1001) docker     (123)    43135 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/Vehicle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5627 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8943 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/drivers.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5091 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/landmarkmap.py
+-rw-r--r--   0 runner    (1001) docker     (123)    23859 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/sensors.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.640789 roboticstoolbox-python-1.1.0/roboticstoolbox/models/
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.644790 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/
+-rw-r--r--   0 runner    (1001) docker     (123)     2941 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/AL5D.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     2134 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Ball.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2855 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Baxter.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     1562 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Cobra600.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2110 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Coil.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2133 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Hyper.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2181 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Hyper3d.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4452 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/IRB140.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2742 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Jaco.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2943 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/KR5.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     2402 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/LWR4.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2736 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Mico.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     2345 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Orion5.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     2161 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/P8.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     4772 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Panda.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1673 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Planar2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1085 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Planar3.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)    11242 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Puma560.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2085 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Sawyer.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     3909 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Stanford.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3353 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/TwoLink.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2513 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/UR10.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2484 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/UR3.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2535 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/UR5.py
+-rw-r--r--   0 runner    (1001) docker     (123)      571 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Uprighttl.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1540 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.644790 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/
+-rw-r--r--   0 runner    (1001) docker     (123)     2861 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Frankie.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1537 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/GenericSeven.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2229 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Omni.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1941 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Panda.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1210 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Planar2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1717 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Planar_Y.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2004 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Puma560.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2556 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/XYPanda.py
+-rw-r--r--   0 runner    (1001) docker     (123)      583 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.648790 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/
+-rw-r--r--   0 runner    (1001) docker     (123)     1364 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/AL5D.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1760 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Fetch.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1736 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/FetchCamera.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1957 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Frankie.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2487 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/FrankieOmni.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1593 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/KinovaGen3.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1583 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/LBR.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1801 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Mico.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1519 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/PR2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1725 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Panda.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3052 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Puma560.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1346 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/UR10.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1339 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/UR3.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1957 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/UR5.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2749 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Valkyrie.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3245 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/YuMi.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1682 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1435 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/px100.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1438 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/px150.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1438 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/rx150.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1438 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/rx200.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1438 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/vx300.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1449 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/vx300s.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     1438 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/wx200.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1438 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/wx250.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1449 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/wx250s.py
+-rw-r--r--   0 runner    (1001) docker     (123)      222 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4146 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/models/list.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.652790 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/
+-rw-r--r--   0 runner    (1001) docker     (123)    89944 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/BaseRobot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16031 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/DHFactor.py
+-rw-r--r--   0 runner    (1001) docker     (123)    28433 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/DHLink.py
+-rw-r--r--   0 runner    (1001) docker     (123)    86411 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/DHRobot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    50606 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/Dynamics.py
+-rw-r--r--   0 runner    (1001) docker     (123)      525 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ELink.py
+-rw-r--r--   0 runner    (1001) docker     (123)      567 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ERobot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    27949 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ET.py
+-rw-r--r--   0 runner    (1001) docker     (123)   110367 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ETS.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7241 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/Gripper.py
+-rw-r--r--   0 runner    (1001) docker     (123)    44773 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/IK.py
+-rw-r--r--   0 runner    (1001) docker     (123)    46629 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/Link.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5201 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/PoERobot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    66239 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/Robot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    61150 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/RobotKinematics.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2439 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/RobotProto.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1223 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/robot/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.652790 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/
+-rw-r--r--   0 runner    (1001) docker     (123)    11529 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/DHFactor.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1201 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/Ticker.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1335 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4886 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/data.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1399 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/jsingu.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1507 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/null.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2508 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/numerical.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2764 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/p_servo.py
+-rw-r--r--   0 runner    (1001) docker     (123)      149 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/params.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2895 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/plot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    34205 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/trajectory.py
+-rw-r--r--   0 runner    (1001) docker     (123)      243 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/types.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.652790 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/
+-rw-r--r--   0 runner    (1001) docker     (123)      574 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    59882 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/urdf.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1483 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/utils.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.652790 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/
+-rw-r--r--   0 runner    (1001) docker     (123)    37597 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4713 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/cli.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2751 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/color.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5367 2023-05-14 06:46:40.000000 roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/xmlutils.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.656790 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (123)    18903 2023-05-14 06:46:54.000000 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (123)    26690 2023-05-14 06:46:54.000000 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (123)        1 2023-05-14 06:46:54.000000 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (123)      225 2023-05-14 06:46:54.000000 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/entry_points.txt
+-rw-r--r--   0 runner    (1001) docker     (123)      351 2023-05-14 06:46:54.000000 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/requires.txt
+-rw-r--r--   0 runner    (1001) docker     (123)       16 2023-05-14 06:46:54.000000 roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/top_level.txt
+-rw-r--r--   0 runner    (1001) docker     (123)       38 2023-05-14 06:46:54.660790 roboticstoolbox-python-1.1.0/setup.cfg
+-rw-r--r--   0 runner    (1001) docker     (123)     1074 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/setup.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-14 06:46:54.660790 roboticstoolbox-python-1.1.0/tests/
+-rw-r--r--   0 runner    (1001) docker     (123)    18692 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_BaseRobot.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     1816 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_CustomXacro.py
+-rw-r--r--   0 runner    (1001) docker     (123)    47963 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_DHRobot.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9005 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_ELink.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7658 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_ERobot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11833 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_ET.py
+-rw-r--r--   0 runner    (1001) docker     (123)   160085 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_ETS.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13366 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_ETS2.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3870 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_Gripper.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18588 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_IK.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5298 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_Link.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1059 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_PyPlot.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1058 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_PyPlot2.py
+-rw-r--r--   0 runner    (1001) docker     (123)    47186 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_Robot.py
+-rw-r--r--   0 runner    (1001) docker     (123)      352 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_Ticker.py
+-rw-r--r--   0 runner    (1001) docker     (123)    36283 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_VPython.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12516 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_blocks.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2492 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_fknm.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12212 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_jacob.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14492 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_mobile.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5485 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_mobile_planner.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2668 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_models.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2852 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)    20275 2023-05-14 06:46:41.000000 roboticstoolbox-python-1.1.0/tests/test_trajectory.py
```

### Comparing `roboticstoolbox-python-1.0.3/LICENSE` & `roboticstoolbox-python-1.1.0/LICENSE`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/PKG-INFO` & `roboticstoolbox-python-1.1.0/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 00000000: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
 00000010: 3a20 322e 310a 4e61 6d65 3a20 726f 626f  : 2.1.Name: robo
 00000020: 7469 6373 746f 6f6c 626f 782d 7079 7468  ticstoolbox-pyth
-00000030: 6f6e 0a56 6572 7369 6f6e 3a20 312e 302e  on.Version: 1.0.
-00000040: 330a 5375 6d6d 6172 793a 2041 2050 7974  3.Summary: A Pyt
+00000030: 6f6e 0a56 6572 7369 6f6e 3a20 312e 312e  on.Version: 1.1.
+00000040: 300a 5375 6d6d 6172 793a 2041 2050 7974  0.Summary: A Pyt
 00000050: 686f 6e20 6c69 6272 6172 7920 666f 7220  hon library for 
 00000060: 726f 626f 7469 6373 2065 6475 6361 7469  robotics educati
 00000070: 6f6e 2061 6e64 2072 6573 6561 7263 680a  on and research.
 00000080: 4175 7468 6f72 2d65 6d61 696c 3a20 4a65  Author-email: Je
 00000090: 7373 6520 4861 7669 6c61 6e64 203c 6a2e  sse Haviland <j.
 000000a0: 6861 7669 6c61 6e64 4071 7574 2e65 6475  haviland@qut.edu
 000000b0: 2e61 753e 2c20 5065 7465 7220 436f 726b  .au>, Peter Cork
@@ -201,995 +201,982 @@
 00000c80: 612d 666f 7267 652f 726f 626f 7469 6373  a-forge/robotics
 00000c90: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
 00000ca0: 215b 5079 5049 202d 2050 7974 686f 6e20  ![PyPI - Python 
 00000cb0: 5665 7273 696f 6e5d 2868 7474 7073 3a2f  Version](https:/
 00000cc0: 2f69 6d67 2e73 6869 656c 6473 2e69 6f2f  /img.shields.io/
 00000cd0: 7079 7069 2f70 7976 6572 7369 6f6e 732f  pypi/pyversions/
 00000ce0: 726f 626f 7469 6373 746f 6f6c 626f 782d  roboticstoolbox-
-00000cf0: 7079 7468 6f6e 2e73 7667 290a 5b21 5b4c  python.svg).[![L
-00000d00: 6963 656e 7365 3a20 4d49 545d 2868 7474  icense: MIT](htt
-00000d10: 7073 3a2f 2f69 6d67 2e73 6869 656c 6473  ps://img.shields
-00000d20: 2e69 6f2f 6261 6467 652f 4c69 6365 6e73  .io/badge/Licens
-00000d30: 652d 4d49 542d 7965 6c6c 6f77 2e73 7667  e-MIT-yellow.svg
-00000d40: 295d 2868 7474 7073 3a2f 2f6f 7065 6e73  )](https://opens
-00000d50: 6f75 7263 652e 6f72 672f 6c69 6365 6e73  ource.org/licens
-00000d60: 6573 2f4d 4954 290a 0a5b 215b 4275 696c  es/MIT)..[![Buil
-00000d70: 6420 5374 6174 7573 5d28 6874 7470 733a  d Status](https:
-00000d80: 2f2f 6769 7468 7562 2e63 6f6d 2f70 6574  //github.com/pet
-00000d90: 6572 636f 726b 652f 726f 626f 7469 6373  ercorke/robotics
-00000da0: 2d74 6f6f 6c62 6f78 2d70 7974 686f 6e2f  -toolbox-python/
-00000db0: 776f 726b 666c 6f77 732f 6275 696c 642f  workflows/build/
-00000dc0: 6261 6467 652e 7376 673f 6272 616e 6368  badge.svg?branch
-00000dd0: 3d6d 6173 7465 7229 5d28 6874 7470 733a  =master)](https:
-00000de0: 2f2f 6769 7468 7562 2e63 6f6d 2f70 6574  //github.com/pet
-00000df0: 6572 636f 726b 652f 726f 626f 7469 6373  ercorke/robotics
-00000e00: 2d74 6f6f 6c62 6f78 2d70 7974 686f 6e2f  -toolbox-python/
-00000e10: 6163 7469 6f6e 733f 7175 6572 793d 776f  actions?query=wo
-00000e20: 726b 666c 6f77 2533 4162 7569 6c64 290a  rkflow%3Abuild).
-00000e30: 5b21 5b43 6f76 6572 6167 655d 2868 7474  [![Coverage](htt
-00000e40: 7073 3a2f 2f63 6f64 6563 6f76 2e69 6f2f  ps://codecov.io/
-00000e50: 6768 2f70 6574 6572 636f 726b 652f 726f  gh/petercorke/ro
-00000e60: 626f 7469 6373 2d74 6f6f 6c62 6f78 2d70  botics-toolbox-p
-00000e70: 7974 686f 6e2f 6272 616e 6368 2f6d 6173  ython/branch/mas
-00000e80: 7465 722f 6772 6170 682f 6261 6467 652e  ter/graph/badge.
-00000e90: 7376 6729 5d28 6874 7470 733a 2f2f 636f  svg)](https://co
-00000ea0: 6465 636f 762e 696f 2f67 682f 7065 7465  decov.io/gh/pete
-00000eb0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00000ec0: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
-00000ed0: 5b21 5b4c 616e 6775 6167 6520 6772 6164  [![Language grad
-00000ee0: 653a 2050 7974 686f 6e5d 2868 7474 7073  e: Python](https
-00000ef0: 3a2f 2f69 6d67 2e73 6869 656c 6473 2e69  ://img.shields.i
-00000f00: 6f2f 6c67 746d 2f67 7261 6465 2f70 7974  o/lgtm/grade/pyt
-00000f10: 686f 6e2f 672f 7065 7465 7263 6f72 6b65  hon/g/petercorke
-00000f20: 2f72 6f62 6f74 6963 732d 746f 6f6c 626f  /robotics-toolbo
-00000f30: 782d 7079 7468 6f6e 2e73 7667 3f6c 6f67  x-python.svg?log
-00000f40: 6f3d 6c67 746d 266c 6f67 6f57 6964 7468  o=lgtm&logoWidth
-00000f50: 3d31 3829 5d28 6874 7470 733a 2f2f 6c67  =18)](https://lg
-00000f60: 746d 2e63 6f6d 2f70 726f 6a65 6374 732f  tm.com/projects/
-00000f70: 672f 7065 7465 7263 6f72 6b65 2f72 6f62  g/petercorke/rob
-00000f80: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00000f90: 7468 6f6e 2f63 6f6e 7465 7874 3a70 7974  thon/context:pyt
-00000fa0: 686f 6e29 0a5b 215b 5079 5049 202d 2044  hon).[![PyPI - D
-00000fb0: 6f77 6e6c 6f61 6473 5d28 6874 7470 733a  ownloads](https:
-00000fc0: 2f2f 696d 672e 7368 6965 6c64 732e 696f  //img.shields.io
-00000fd0: 2f70 7970 692f 6477 2f72 6f62 6f74 6963  /pypi/dw/robotic
-00000fe0: 7374 6f6f 6c62 6f78 2d70 7974 686f 6e29  stoolbox-python)
-00000ff0: 5d28 6874 7470 733a 2f2f 7079 7069 7374  ](https://pypist
-00001000: 6174 732e 6f72 672f 7061 636b 6167 6573  ats.org/packages
-00001010: 2f72 6f62 6f74 6963 7374 6f6f 6c62 6f78  /roboticstoolbox
-00001020: 2d70 7974 686f 6e29 0a0a 3c74 6162 6c65  -python)..<table
-00001030: 2073 7479 6c65 3d22 626f 7264 6572 3a30   style="border:0
-00001040: 7078 223e 0a3c 7472 2073 7479 6c65 3d22  px">.<tr style="
-00001050: 626f 7264 6572 3a30 7078 223e 0a3c 7464  border:0px">.<td
-00001060: 2073 7479 6c65 3d22 626f 7264 6572 3a30   style="border:0
-00001070: 7078 223e 0a3c 696d 6720 7372 633d 2268  px">.<img src="h
-00001080: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00001090: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-000010a0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-000010b0: 7468 6f6e 2f72 6177 2f6d 6173 7465 722f  thon/raw/master/
-000010c0: 646f 6373 2f66 6967 732f 526f 6254 6f6f  docs/figs/RobToo
-000010d0: 6c42 6f78 5f52 6f75 6e64 4c6f 676f 422e  lBox_RoundLogoB.
-000010e0: 706e 6722 2077 6964 7468 3d22 3230 3022  png" width="200"
-000010f0: 3e3c 2f74 643e 0a3c 7464 2073 7479 6c65  ></td>.<td style
-00001100: 3d22 626f 7264 6572 3a30 7078 223e 0a41  ="border:0px">.A
-00001110: 2050 7974 686f 6e20 696d 706c 656d 656e   Python implemen
-00001120: 7461 7469 6f6e 206f 6620 7468 6520 3c61  tation of the <a
-00001130: 2068 7265 663d 2268 7474 7073 3a2f 2f67   href="https://g
-00001140: 6974 6875 622e 636f 6d2f 7065 7465 7263  ithub.com/peterc
-00001150: 6f72 6b65 2f72 6f62 6f74 6963 732d 746f  orke/robotics-to
-00001160: 6f6c 626f 782d 6d61 746c 6162 223e 526f  olbox-matlab">Ro
-00001170: 626f 7469 6373 2054 6f6f 6c62 6f78 2066  botics Toolbox f
-00001180: 6f72 204d 4154 4c41 423c 7375 703e 2672  or MATLAB<sup>&r
-00001190: 6567 3b3c 2f73 7570 3e3c 2f61 3e0a 3c75  eg;</sup></a>.<u
-000011a0: 6c3e 0a3c 6c69 3e3c 6120 6872 6566 3d22  l>.<li><a href="
-000011b0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-000011c0: 6f6d 2f70 6574 6572 636f 726b 652f 726f  om/petercorke/ro
-000011d0: 626f 7469 6373 2d74 6f6f 6c62 6f78 2d70  botics-toolbox-p
-000011e0: 7974 686f 6e22 3e47 6974 4875 6220 7265  ython">GitHub re
-000011f0: 706f 7369 746f 7279 203c 2f61 3e3c 2f6c  pository </a></l
-00001200: 693e 0a3c 6c69 3e3c 6120 6872 6566 3d22  i>.<li><a href="
-00001210: 6874 7470 733a 2f2f 7065 7465 7263 6f72  https://petercor
-00001220: 6b65 2e67 6974 6875 622e 696f 2f72 6f62  ke.github.io/rob
-00001230: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00001240: 7468 6f6e 223e 446f 6375 6d65 6e74 6174  thon">Documentat
-00001250: 696f 6e3c 2f61 3e3c 2f6c 693e 0a3c 6c69  ion</a></li>.<li
-00001260: 3e3c 6120 6872 6566 3d22 2336 223e 4943  ><a href="#6">IC
-00001270: 5241 2050 6170 6572 3c2f 613e 3c2f 6c69  RA Paper</a></li
-00001280: 3e0a 3c6c 693e 3c61 2068 7265 663d 2268  >.<li><a href="h
-00001290: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-000012a0: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-000012b0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-000012c0: 7468 6f6e 2f77 696b 6922 3e57 696b 6920  thon/wiki">Wiki 
-000012d0: 2865 7861 6d70 6c65 7320 616e 6420 6465  (examples and de
-000012e0: 7461 696c 7329 3c2f 613e 3c2f 6c69 3e0a  tails)</a></li>.
-000012f0: 3c2f 756c 3e0a 3c2f 7464 3e0a 3c2f 7472  </ul>.</td>.</tr
-00001300: 3e0a 3c2f 7461 626c 653e 0a0a 3c21 2d2d  >.</table>..<!--
-00001310: 203c 6272 3e20 2d2d 3e0a 0a23 2320 436f   <br> -->..## Co
-00001320: 6e74 656e 7473 0a0a 2d20 5b53 796e 6f70  ntents..- [Synop
-00001330: 7369 735d 2823 3129 0a2d 205b 4765 7474  sis](#1).- [Gett
-00001340: 696e 6720 676f 696e 675d 2823 3229 0a2d  ing going](#2).-
-00001350: 205b 5475 746f 7269 616c 735d 2823 3329   [Tutorials](#3)
-00001360: 0a2d 205b 436f 6465 2045 7861 6d70 6c65  .- [Code Example
-00001370: 735d 2823 3429 0a2d 205b 546f 6f6c 626f  s](#4).- [Toolbo
-00001380: 7820 5265 7365 6172 6368 2041 7070 6c69  x Research Appli
-00001390: 6361 7469 6f6e 735d 2823 3529 0a2d 205b  cations](#5).- [
-000013a0: 546f 6f6c 626f 7820 4943 5241 2050 6170  Toolbox ICRA Pap
-000013b0: 6572 2061 6e64 2043 6974 6174 696f 6e20  er and Citation 
-000013c0: 496e 666f 5d28 2336 290a 2d20 5b55 7369  Info](#6).- [Usi
-000013d0: 6e67 2074 6865 2054 6f6f 6c62 6f78 2069  ng the Toolbox i
-000013e0: 6e20 796f 7572 204f 7065 6e20 536f 7572  n your Open Sour
-000013f0: 6365 2043 6f64 653f 5d28 2337 290a 2d20  ce Code?](#7).- 
-00001400: 5b43 6f6d 6d6f 6e20 4973 7375 6573 2061  [Common Issues a
-00001410: 6e64 2053 6f6c 7574 696f 6e73 5d28 2338  nd Solutions](#8
-00001420: 290a 0a3c 6272 3e0a 0a3c 6120 6964 3d27  )..<br>..<a id='
-00001430: 3127 3e3c 2f61 3e0a 0a23 2320 5379 6e6f  1'></a>..## Syno
-00001440: 7073 6973 0a0a 5468 6973 2074 6f6f 6c62  psis..This toolb
-00001450: 6f78 2062 7269 6e67 7320 726f 626f 7469  ox brings roboti
-00001460: 6373 2d73 7065 6369 6669 6320 6675 6e63  cs-specific func
-00001470: 7469 6f6e 616c 6974 7920 746f 2050 7974  tionality to Pyt
-00001480: 686f 6e2c 2061 6e64 206c 6576 6572 6167  hon, and leverag
-00001490: 6573 0a50 7974 686f 6e27 7320 6164 7661  es.Python's adva
-000014a0: 6e74 6167 6573 206f 6620 706f 7274 6162  ntages of portab
-000014b0: 696c 6974 792c 2075 6269 7175 6974 7920  ility, ubiquity 
-000014c0: 616e 6420 7375 7070 6f72 742c 2061 6e64  and support, and
-000014d0: 2074 6865 2063 6170 6162 696c 6974 7920   the capability 
-000014e0: 6f66 0a74 6865 206f 7065 6e2d 736f 7572  of.the open-sour
-000014f0: 6365 2065 636f 7379 7374 656d 2066 6f72  ce ecosystem for
-00001500: 206c 696e 6561 7220 616c 6765 6272 6120   linear algebra 
-00001510: 286e 756d 7079 2c20 7363 6970 7929 2c20  (numpy, scipy), 
-00001520: 6772 6170 6869 6373 0a28 6d61 7470 6c6f  graphics.(matplo
-00001530: 746c 6962 2c20 7468 7265 652e 6a73 2c20  tlib, three.js, 
-00001540: 5765 6247 4c29 2c20 696e 7465 7261 6374  WebGL), interact
-00001550: 6976 6520 6465 7665 6c6f 706d 656e 7420  ive development 
-00001560: 286a 7570 7974 6572 2c20 6a75 7079 7465  (jupyter, jupyte
-00001570: 726c 6162 2c0a 6d79 6269 6e64 6572 2e6f  rlab,.mybinder.o
-00001580: 7267 292c 2061 6e64 2064 6f63 756d 656e  rg), and documen
-00001590: 7461 7469 6f6e 2028 7370 6869 6e78 292e  tation (sphinx).
-000015a0: 0a0a 5468 6520 546f 6f6c 626f 7820 7072  ..The Toolbox pr
-000015b0: 6f76 6964 6573 2074 6f6f 6c73 2066 6f72  ovides tools for
-000015c0: 2072 6570 7265 7365 6e74 696e 6720 7468   representing th
-000015d0: 6520 6b69 6e65 6d61 7469 6373 2061 6e64  e kinematics and
-000015e0: 2064 796e 616d 6963 7320 6f66 0a73 6572   dynamics of.ser
-000015f0: 6961 6c2d 6c69 6e6b 206d 616e 6970 756c  ial-link manipul
-00001600: 6174 6f72 7320 2d20 796f 7520 6361 6e20  ators - you can 
-00001610: 6561 7369 6c79 2063 7265 6174 6520 796f  easily create yo
-00001620: 7572 206f 776e 2069 6e20 4465 6e61 7669  ur own in Denavi
-00001630: 742d 4861 7274 656e 6265 7267 0a66 6f72  t-Hartenberg.for
-00001640: 6d2c 2069 6d70 6f72 7420 6120 5552 4446  m, import a URDF
-00001650: 2066 696c 652c 206f 7220 7573 6520 6f76   file, or use ov
-00001660: 6572 2033 3020 7375 7070 6c69 6564 206d  er 30 supplied m
-00001670: 6f64 656c 7320 666f 7220 7765 6c6c 2d6b  odels for well-k
-00001680: 6e6f 776e 0a63 6f6e 7465 6d70 6f72 6172  nown.contemporar
-00001690: 7920 726f 626f 7473 2066 726f 6d20 4672  y robots from Fr
-000016a0: 616e 6b61 2d45 6d69 6b61 2c20 4b69 6e6f  anka-Emika, Kino
-000016b0: 7661 2c20 556e 6976 6572 7361 6c20 526f  va, Universal Ro
-000016c0: 626f 7469 6373 2c20 5265 7468 696e 6b20  botics, Rethink 
-000016d0: 6173 0a77 656c 6c20 6173 2063 6c61 7373  as.well as class
-000016e0: 6963 616c 2072 6f62 6f74 7320 7375 6368  ical robots such
-000016f0: 2061 7320 7468 6520 5075 6d61 2035 3630   as the Puma 560
-00001700: 2061 6e64 2074 6865 2053 7461 6e66 6f72   and the Stanfor
-00001710: 6420 6172 6d2e 0a0a 5468 6520 546f 6f6c  d arm...The Tool
-00001720: 626f 7820 636f 6e74 6169 6e73 2066 6173  box contains fas
-00001730: 7420 696d 706c 656d 656e 7461 7469 6f6e  t implementation
-00001740: 7320 6f66 206b 696e 656d 6174 6963 206f  s of kinematic o
-00001750: 7065 7261 7469 6f6e 732e 2054 6865 2066  perations. The f
-00001760: 6f72 7761 7264 0a6b 696e 656d 6174 6963  orward.kinematic
-00001770: 7320 616e 6420 7468 6520 6d61 6e69 7075  s and the manipu
-00001780: 6c61 746f 7220 4a61 636f 6269 616e 2063  lator Jacobian c
-00001790: 616e 2062 6520 636f 6d70 7574 6564 2069  an be computed i
-000017a0: 6e20 6c65 7373 2074 6861 6e20 3120 6d69  n less than 1 mi
-000017b0: 6372 6f73 6563 6f6e 640a 7768 696c 6520  crosecond.while 
-000017c0: 6e75 6d65 7269 6361 6c20 696e 7665 7273  numerical invers
-000017d0: 6520 6b69 6e65 6d61 7469 6373 2063 616e  e kinematics can
-000017e0: 2062 6520 736f 6c76 6564 2069 6e20 6173   be solved in as
-000017f0: 206c 6974 746c 6520 6173 2034 206d 6963   little as 4 mic
-00001800: 726f 7365 636f 6e64 732e 0a0a 5468 6520  roseconds...The 
-00001810: 746f 6f6c 626f 7820 616c 736f 2073 7570  toolbox also sup
-00001820: 706f 7274 7320 6d6f 6269 6c65 2072 6f62  ports mobile rob
-00001830: 6f74 7320 7769 7468 2066 756e 6374 696f  ots with functio
-00001840: 6e73 2066 6f72 2072 6f62 6f74 206d 6f74  ns for robot mot
-00001850: 696f 6e20 6d6f 6465 6c73 0a28 756e 6963  ion models.(unic
-00001860: 7963 6c65 2c20 6269 6379 636c 6529 2c20  ycle, bicycle), 
-00001870: 7061 7468 2070 6c61 6e6e 696e 6720 616c  path planning al
-00001880: 676f 7269 7468 6d73 2028 6275 672c 2064  gorithms (bug, d
-00001890: 6973 7461 6e63 6520 7472 616e 7366 6f72  istance transfor
-000018a0: 6d2c 2044 5c2a 2c0a 5052 4d29 2c20 6b69  m, D\*,.PRM), ki
-000018b0: 6e6f 6479 6e61 6d69 6320 706c 616e 6e69  nodynamic planni
-000018c0: 6e67 2028 6c61 7474 6963 652c 2052 5254  ng (lattice, RRT
-000018d0: 292c 206c 6f63 616c 697a 6174 696f 6e20  ), localization 
-000018e0: 2845 4b46 2c20 7061 7274 6963 6c65 2066  (EKF, particle f
-000018f0: 696c 7465 7229 2c0a 6d61 7020 6275 696c  ilter),.map buil
-00001900: 6469 6e67 2028 454b 4629 2061 6e64 2073  ding (EKF) and s
-00001910: 696d 756c 7461 6e65 6f75 7320 6c6f 6361  imultaneous loca
-00001920: 6c69 7a61 7469 6f6e 2061 6e64 206d 6170  lization and map
-00001930: 7069 6e67 2028 454b 4629 2e0a 0a54 6865  ping (EKF)...The
-00001940: 2054 6f6f 6c62 6f78 2070 726f 7669 6465   Toolbox provide
-00001950: 733a 0a0a 2d20 636f 6465 2074 6861 7420  s:..- code that 
-00001960: 6973 206d 6174 7572 6520 616e 6420 7072  is mature and pr
-00001970: 6f76 6964 6573 2061 2070 6f69 6e74 206f  ovides a point o
-00001980: 6620 636f 6d70 6172 6973 6f6e 2066 6f72  f comparison for
-00001990: 206f 7468 6572 0a20 2069 6d70 6c65 6d65   other.  impleme
-000019a0: 6e74 6174 696f 6e73 206f 6620 7468 6520  ntations of the 
-000019b0: 7361 6d65 2061 6c67 6f72 6974 686d 733b  same algorithms;
-000019c0: 0a2d 2072 6f75 7469 6e65 7320 7768 6963  .- routines whic
-000019d0: 6820 6172 6520 6765 6e65 7261 6c6c 7920  h are generally 
-000019e0: 7772 6974 7465 6e20 696e 2061 2073 7472  written in a str
-000019f0: 6169 6768 7466 6f72 7761 7264 206d 616e  aightforward man
-00001a00: 6e65 7220 7768 6963 680a 2020 616c 6c6f  ner which.  allo
-00001a10: 7773 2066 6f72 2065 6173 7920 756e 6465  ws for easy unde
-00001a20: 7273 7461 6e64 696e 672c 2070 6572 6861  rstanding, perha
-00001a30: 7073 2061 7420 7468 6520 6578 7065 6e73  ps at the expens
-00001a40: 6520 6f66 2063 6f6d 7075 7461 7469 6f6e  e of computation
-00001a50: 616c 0a20 2065 6666 6963 6965 6e63 793b  al.  efficiency;
-00001a60: 0a2d 2073 6f75 7263 6520 636f 6465 2077  .- source code w
-00001a70: 6869 6368 2063 616e 2062 6520 7265 6164  hich can be read
-00001a80: 2066 6f72 206c 6561 726e 696e 6720 616e   for learning an
-00001a90: 6420 7465 6163 6869 6e67 3b0a 2d20 6261  d teaching;.- ba
-00001aa0: 636b 7761 7264 2063 6f6d 7061 7461 6269  ckward compatabi
-00001ab0: 6c69 7479 2077 6974 6820 7468 6520 526f  lity with the Ro
-00001ac0: 626f 7469 6373 2054 6f6f 6c62 6f78 2066  botics Toolbox f
-00001ad0: 6f72 204d 4154 4c41 420a 0a54 6865 2054  or MATLAB..The T
-00001ae0: 6f6f 6c62 6f78 206c 6576 6572 6167 6573  oolbox leverages
-00001af0: 2074 6865 205b 5370 6174 6961 6c20 4d61   the [Spatial Ma
-00001b00: 7468 7320 546f 6f6c 626f 7820 666f 7220  ths Toolbox for 
-00001b10: 5079 7468 6f6e 5d28 6874 7470 733a 2f2f  Python](https://
-00001b20: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
-00001b30: 636f 726b 652f 7370 6174 6961 6c6d 6174  corke/spatialmat
-00001b40: 682d 7079 7468 6f6e 2920 746f 0a70 726f  h-python) to.pro
-00001b50: 7669 6465 2073 7570 706f 7274 2066 6f72  vide support for
-00001b60: 2064 6174 6120 7479 7065 7320 7375 6368   data types such
-00001b70: 2061 7320 534f 286e 2920 616e 6420 5345   as SO(n) and SE
-00001b80: 286e 2920 6d61 7472 6963 6573 2c20 7175  (n) matrices, qu
-00001b90: 6174 6572 6e69 6f6e 732c 2074 7769 7374  aternions, twist
-00001ba0: 7320 616e 6420 7370 6174 6961 6c20 7665  s and spatial ve
-00001bb0: 6374 6f72 732e 0a0a 3c62 723e 0a0a 3c61  ctors...<br>..<a
-00001bc0: 2069 643d 2732 273e 3c2f 613e 0a0a 2323   id='2'></a>..##
-00001bd0: 2047 6574 7469 6e67 2067 6f69 6e67 0a0a   Getting going..
-00001be0: 596f 7520 7769 6c6c 206e 6565 6420 5079  You will need Py
-00001bf0: 7468 6f6e 203e 3d20 332e 360a 0a23 2323  thon >= 3.6..###
-00001c00: 2055 7369 6e67 2070 6970 0a0a 496e 7374   Using pip..Inst
-00001c10: 616c 6c20 6120 736e 6170 7368 6f74 2066  all a snapshot f
-00001c20: 726f 6d20 5079 5049 0a0a 6060 6073 6865  rom PyPI..```she
-00001c30: 6c6c 2073 6372 6970 740a 7069 7033 2069  ll script.pip3 i
-00001c40: 6e73 7461 6c6c 2072 6f62 6f74 6963 7374  nstall roboticst
-00001c50: 6f6f 6c62 6f78 2d70 7974 686f 6e0a 6060  oolbox-python.``
-00001c60: 600a 0a41 7661 696c 6162 6c65 206f 7074  `..Available opt
-00001c70: 696f 6e73 2061 7265 3a0a 0a2d 2060 636f  ions are:..- `co
-00001c80: 6c6c 6973 696f 6e60 2069 6e73 7461 6c6c  llision` install
-00001c90: 2063 6f6c 6c69 7369 6f6e 2063 6865 636b   collision check
-00001ca0: 696e 6720 7769 7468 205b 7079 6275 6c6c  ing with [pybull
-00001cb0: 6574 5d28 6874 7470 733a 2f2f 7079 6275  et](https://pybu
-00001cc0: 6c6c 6574 2e6f 7267 290a 0a50 7574 2074  llet.org)..Put t
-00001cd0: 6865 206f 7074 696f 6e73 2069 6e20 6120  he options in a 
-00001ce0: 636f 6d6d 6120 7365 7061 7261 7465 6420  comma separated 
-00001cf0: 6c69 7374 206c 696b 650a 0a60 6060 7368  list like..```sh
-00001d00: 656c 6c20 7363 7269 7074 0a70 6970 3320  ell script.pip3 
-00001d10: 696e 7374 616c 6c20 726f 626f 7469 6373  install robotics
-00001d20: 746f 6f6c 626f 782d 7079 7468 6f6e 5b6f  toolbox-python[o
-00001d30: 7074 696f 6e6c 6973 745d 0a60 6060 0a0a  ptionlist].```..
-00001d40: 5b53 7769 6674 5d28 6874 7470 733a 2f2f  [Swift](https://
-00001d50: 6769 7468 7562 2e63 6f6d 2f6a 6861 766c  github.com/jhavl
-00001d60: 2f73 7769 6674 292c 2061 2077 6562 2d62  /swift), a web-b
-00001d70: 6173 6564 2076 6973 7561 6c69 7a65 722c  ased visualizer,
-00001d80: 2069 730a 696e 7374 616c 6c65 6420 6173   is.installed as
-00001d90: 2070 6172 7420 6f66 2052 6f62 6f74 6963   part of Robotic
-00001da0: 7320 546f 6f6c 626f 782e 0a0a 2323 2320  s Toolbox...### 
-00001db0: 4672 6f6d 2047 6974 4875 620a 0a54 6f20  From GitHub..To 
-00001dc0: 696e 7374 616c 6c20 7468 6520 626c 6565  install the blee
-00001dd0: 6469 6e67 2d65 6467 6520 7665 7273 696f  ding-edge versio
-00001de0: 6e20 6672 6f6d 2047 6974 4875 620a 0a60  n from GitHub..`
-00001df0: 6060 7368 656c 6c20 7363 7269 7074 0a67  ``shell script.g
-00001e00: 6974 2063 6c6f 6e65 2068 7474 7073 3a2f  it clone https:/
-00001e10: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-00001e20: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00001e30: 746f 6f6c 626f 782d 7079 7468 6f6e 2e67  toolbox-python.g
-00001e40: 6974 0a63 6420 726f 626f 7469 6373 2d74  it.cd robotics-t
-00001e50: 6f6f 6c62 6f78 2d70 7974 686f 6e0a 7069  oolbox-python.pi
-00001e60: 7033 2069 6e73 7461 6c6c 202d 6520 2e0a  p3 install -e ..
-00001e70: 6060 600a 0a3c 6272 3e0a 0a3c 6120 6964  ```..<br>..<a id
-00001e80: 3d27 3327 3e3c 2f61 3e0a 0a23 2320 5475  ='3'></a>..## Tu
-00001e90: 746f 7269 616c 730a 0a3c 7461 626c 6520  torials..<table 
-00001ea0: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00001eb0: 7822 3e0a 3c74 7220 7374 796c 653d 2262  x">.<tr style="b
-00001ec0: 6f72 6465 723a 3070 7822 3e0a 3c74 6420  order:0px">.<td 
-00001ed0: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00001ee0: 7822 3e3c 6120 6872 6566 3d22 6874 7470  x"><a href="http
-00001ef0: 733a 2f2f 6269 742e 6c79 2f33 616b 3547  s://bit.ly/3ak5G
-00001f00: 4469 223e 3c69 6d67 2073 7263 3d22 6874  Di"><img src="ht
-00001f10: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00001f20: 2f6a 6861 766c 2f64 6b74 2f72 6177 2f6d  /jhavl/dkt/raw/m
-00001f30: 6169 6e2f 696d 672f 6172 7469 636c 6531  ain/img/article1
-00001f40: 2e70 6e67 2220 7769 6474 683d 2234 3030  .png" width="400
-00001f50: 223e 3c2f 613e 3c2f 7464 3e0a 3c74 6420  "></a></td>.<td 
-00001f60: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00001f70: 7822 3e3c 6120 6872 6566 3d22 6874 7470  x"><a href="http
-00001f80: 733a 2f2f 6269 742e 6c79 2f33 616b 3547  s://bit.ly/3ak5G
-00001f90: 4469 223e 3c69 6d67 2073 7263 3d22 6874  Di"><img src="ht
-00001fa0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00001fb0: 2f6a 6861 766c 2f64 6b74 2f72 6177 2f6d  /jhavl/dkt/raw/m
-00001fc0: 6169 6e2f 696d 672f 6172 7469 636c 6532  ain/img/article2
-00001fd0: 2e70 6e67 2220 7769 6474 683d 2234 3030  .png" width="400
-00001fe0: 223e 3c2f 613e 3c2f 7464 3e0a 3c74 6420  "></a></td>.<td 
-00001ff0: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00002000: 7822 3e0a 446f 2079 6f75 2077 616e 7420  x">.Do you want 
-00002010: 746f 206c 6561 726e 2061 626f 7574 206d  to learn about m
-00002020: 616e 6970 756c 6174 6f72 206b 696e 656d  anipulator kinem
-00002030: 6174 6963 732c 2064 6966 6665 7265 6e74  atics, different
-00002040: 6961 6c20 6b69 6e65 6d61 7469 6373 2c20  ial kinematics, 
-00002050: 696e 7665 7273 652d 6b69 6e65 6d61 7469  inverse-kinemati
-00002060: 6373 2061 6e64 206d 6f74 696f 6e20 636f  cs and motion co
-00002070: 6e74 726f 6c3f 2048 6176 6520 6120 6c6f  ntrol? Have a lo
-00002080: 6f6b 2061 7420 6f75 720a 3c61 2068 7265  ok at our.<a hre
-00002090: 663d 2268 7474 7073 3a2f 2f62 6974 2e6c  f="https://bit.l
-000020a0: 792f 3361 6b35 4744 6922 3e74 7574 6f72  y/3ak5GDi">tutor
-000020b0: 6961 6c3c 2f61 3e2e 0a54 6869 7320 7475  ial</a>..This tu
-000020c0: 746f 7269 616c 2063 6f6d 6573 2077 6974  torial comes wit
-000020d0: 6820 7477 6f20 6172 7469 636c 6573 2074  h two articles t
-000020e0: 6f20 636f 7665 7220 7468 6520 7468 656f  o cover the theo
-000020f0: 7279 2061 6e64 2031 3220 4a75 7079 7465  ry and 12 Jupyte
-00002100: 7220 4e6f 7465 626f 6f6b 7320 7072 6f76  r Notebooks prov
-00002110: 6964 696e 6720 6675 6c6c 2063 6f64 6520  iding full code 
-00002120: 696d 706c 656d 656e 7461 7469 6f6e 7320  implementations 
-00002130: 616e 6420 6578 616d 706c 6573 2e20 4d6f  and examples. Mo
-00002140: 7374 206f 6620 7468 6520 4e6f 7465 626f  st of the Notebo
-00002150: 6f6b 7320 6172 6520 616c 736f 2047 6f6f  oks are also Goo
-00002160: 676c 6520 436f 6c61 6220 636f 6d70 6174  gle Colab compat
-00002170: 6962 6c65 2061 6c6c 6f77 696e 6720 7468  ible allowing th
-00002180: 656d 2074 6f20 7275 6e20 6f6e 6c69 6e65  em to run online
-00002190: 2e0a 3c2f 7464 3e0a 3c2f 7472 3e0a 3c2f  ..</td>.</tr>.</
-000021a0: 7461 626c 653e 0a0a 3c62 723e 0a0a 3c61  table>..<br>..<a
-000021b0: 2069 643d 2734 273e 3c2f 613e 0a0a 2323   id='4'></a>..##
-000021c0: 2043 6f64 6520 4578 616d 706c 6573 0a0a   Code Examples..
-000021d0: 5765 2077 696c 6c20 6c6f 6164 2061 206d  We will load a m
-000021e0: 6f64 656c 206f 6620 7468 6520 4672 616e  odel of the Fran
-000021f0: 6b61 2d45 6d69 6b61 2050 616e 6461 2072  ka-Emika Panda r
-00002200: 6f62 6f74 2064 6566 696e 6564 2062 7920  obot defined by 
-00002210: 6120 5552 4446 2066 696c 650a 0a60 6060  a URDF file..```
-00002220: 7079 7468 6f6e 0a69 6d70 6f72 7420 726f  python.import ro
-00002230: 626f 7469 6373 746f 6f6c 626f 7820 6173  boticstoolbox as
-00002240: 2072 7462 0a72 6f62 6f74 203d 2072 7462   rtb.robot = rtb
-00002250: 2e6d 6f64 656c 732e 5061 6e64 6128 290a  .models.Panda().
-00002260: 7072 696e 7428 726f 626f 7429 0a0a 0945  print(robot)...E
-00002270: 526f 626f 743a 2070 616e 6461 2028 6279  Robot: panda (by
-00002280: 2046 7261 6e6b 6120 456d 696b 6129 2c20   Franka Emika), 
-00002290: 3720 6a6f 696e 7473 2028 5252 5252 5252  7 joints (RRRRRR
-000022a0: 5229 2c20 3120 6772 6970 7065 722c 2067  R), 1 gripper, g
-000022b0: 656f 6d65 7472 792c 2063 6f6c 6c69 7369  eometry, collisi
-000022c0: 6f6e 0a09 e294 8ce2 9480 e294 80e2 9480  on..............
-000022d0: e294 80e2 9480 e294 ace2 9480 e294 80e2  ................
-000022e0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-000022f0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002300: e294 80e2 94ac e294 80e2 9480 e294 80e2  ................
-00002310: 9480 e294 80e2 9480 e294 80e2 94ac e294  ................
-00002320: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002330: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002340: 9480 e294 80e2 94ac e294 80e2 9480 e294  ................
-00002350: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002360: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002370: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002380: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002390: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000023a0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-000023b0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000023c0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000023d0: 9480 e294 80e2 9480 e294 900a 09e2 9482  ................
-000023e0: 6c69 6e6b 20e2 9482 2020 2020 206c 696e  link ...     lin
-000023f0: 6b20 2020 2020 e294 8220 6a6f 696e 7420  k     ... joint 
-00002400: e294 8220 2020 7061 7265 6e74 2020 2020  ...   parent    
-00002410: e294 8220 2020 2020 2020 2020 2020 2020  ...             
-00002420: 2045 5453 3a20 7061 7265 6e74 2074 6f20   ETS: parent to 
-00002430: 6c69 6e6b 2020 2020 2020 2020 2020 2020  link            
-00002440: 2020 20e2 9482 0a09 e294 9ce2 9480 e294     .............
-00002450: 80e2 9480 e294 80e2 9480 e294 bce2 9480  ................
-00002460: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002470: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002480: 80e2 9480 e294 80e2 94bc e294 80e2 9480  ................
-00002490: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000024a0: 94bc e294 80e2 9480 e294 80e2 9480 e294  ................
-000024b0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000024c0: e294 80e2 9480 e294 80e2 94bc e294 80e2  ................
-000024d0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-000024e0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000024f0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002500: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002510: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002520: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002530: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002540: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002550: e294 80e2 9480 e294 80e2 9480 e294 a40a  ................
-00002560: 09e2 9482 2020 2030 20e2 9482 2070 616e  ....   0 ... pan
-00002570: 6461 5f6c 696e 6b30 2020 e294 8220 2020  da_link0  ...   
-00002580: 2020 2020 e294 8220 4241 5345 2020 2020      ... BASE    
-00002590: 2020 2020 e294 8220 2020 2020 2020 2020      ...         
-000025a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000025b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000025c0: 2020 2020 2020 20e2 9482 0a09 e294 8220         ........ 
-000025d0: 2020 3120 e294 8220 7061 6e64 615f 6c69    1 ... panda_li
-000025e0: 6e6b 3120 20e2 9482 2020 2020 2030 20e2  nk1  ...     0 .
-000025f0: 9482 2070 616e 6461 5f6c 696e 6b30 20e2  .. panda_link0 .
-00002600: 9482 2053 4533 2830 2c20 302c 2030 2e33  .. SE3(0, 0, 0.3
-00002610: 3333 2920 e28a 9520 527a 2871 3029 2020  33) ... Rz(q0)  
-00002620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002630: 2020 2020 e294 820a 09e2 9482 2020 2032      ........   2
-00002640: 20e2 9482 2070 616e 6461 5f6c 696e 6b32   ... panda_link2
-00002650: 2020 e294 8220 2020 2020 3120 e294 8220    ...     1 ... 
-00002660: 7061 6e64 615f 6c69 6e6b 3120 e294 8220  panda_link1 ... 
-00002670: 5345 3328 2d39 30c2 b02c 202d 30c2 b02c  SE3(-90.., -0..,
-00002680: 2030 c2b0 2920 e28a 9520 527a 2871 3129   0..) ... Rz(q1)
-00002690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000026a0: 2020 2020 e294 820a 09e2 9482 2020 2033      ........   3
-000026b0: 20e2 9482 2070 616e 6461 5f6c 696e 6b33   ... panda_link3
-000026c0: 2020 e294 8220 2020 2020 3220 e294 8220    ...     2 ... 
-000026d0: 7061 6e64 615f 6c69 6e6b 3220 e294 8220  panda_link2 ... 
-000026e0: 5345 3328 302c 202d 302e 3331 362c 2030  SE3(0, -0.316, 0
-000026f0: 3b20 3930 c2b0 2c20 2d30 c2b0 2c20 30c2  ; 90.., -0.., 0.
-00002700: b029 20e2 8a95 2052 7a28 7132 2920 2020  .) ... Rz(q2)   
-00002710: 2020 2020 e294 820a 09e2 9482 2020 2034      ........   4
-00002720: 20e2 9482 2070 616e 6461 5f6c 696e 6b34   ... panda_link4
-00002730: 2020 e294 8220 2020 2020 3320 e294 8220    ...     3 ... 
-00002740: 7061 6e64 615f 6c69 6e6b 3320 e294 8220  panda_link3 ... 
-00002750: 5345 3328 302e 3038 3235 2c20 302c 2030  SE3(0.0825, 0, 0
-00002760: 3b20 3930 c2b0 2c20 2d30 c2b0 2c20 30c2  ; 90.., -0.., 0.
-00002770: b029 20e2 8a95 2052 7a28 7133 2920 2020  .) ... Rz(q3)   
-00002780: 2020 2020 e294 820a 09e2 9482 2020 2035      ........   5
-00002790: 20e2 9482 2070 616e 6461 5f6c 696e 6b35   ... panda_link5
-000027a0: 2020 e294 8220 2020 2020 3420 e294 8220    ...     4 ... 
-000027b0: 7061 6e64 615f 6c69 6e6b 3420 e294 8220  panda_link4 ... 
-000027c0: 5345 3328 2d30 2e30 3832 352c 2030 2e33  SE3(-0.0825, 0.3
-000027d0: 3834 2c20 303b 202d 3930 c2b0 2c20 2d30  84, 0; -90.., -0
-000027e0: c2b0 2c20 30c2 b029 20e2 8a95 2052 7a28  .., 0..) ... Rz(
-000027f0: 7134 2920 e294 820a 09e2 9482 2020 2036  q4) ........   6
-00002800: 20e2 9482 2070 616e 6461 5f6c 696e 6b36   ... panda_link6
-00002810: 2020 e294 8220 2020 2020 3520 e294 8220    ...     5 ... 
-00002820: 7061 6e64 615f 6c69 6e6b 3520 e294 8220  panda_link5 ... 
-00002830: 5345 3328 3930 c2b0 2c20 2d30 c2b0 2c20  SE3(90.., -0.., 
-00002840: 30c2 b029 20e2 8a95 2052 7a28 7135 2920  0..) ... Rz(q5) 
+00000cf0: 7079 7468 6f6e 2e73 7667 290a 0a5b 215b  python.svg)..[![
+00000d00: 4275 696c 6420 5374 6174 7573 5d28 6874  Build Status](ht
+00000d10: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00000d20: 2f70 6574 6572 636f 726b 652f 726f 626f  /petercorke/robo
+00000d30: 7469 6373 2d74 6f6f 6c62 6f78 2d70 7974  tics-toolbox-pyt
+00000d40: 686f 6e2f 776f 726b 666c 6f77 732f 5465  hon/workflows/Te
+00000d50: 7374 2f62 6164 6765 2e73 7667 3f62 7261  st/badge.svg?bra
+00000d60: 6e63 683d 6d61 7374 6572 295d 2868 7474  nch=master)](htt
+00000d70: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00000d80: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
+00000d90: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
+00000da0: 6f6e 2f61 6374 696f 6e73 3f71 7565 7279  on/actions?query
+00000db0: 3d77 6f72 6b66 6c6f 7725 3341 5465 7374  =workflow%3ATest
+00000dc0: 290a 5b21 5b43 6f76 6572 6167 655d 2868  ).[![Coverage](h
+00000dd0: 7474 7073 3a2f 2f63 6f64 6563 6f76 2e69  ttps://codecov.i
+00000de0: 6f2f 6768 2f70 6574 6572 636f 726b 652f  o/gh/petercorke/
+00000df0: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00000e00: 2d70 7974 686f 6e2f 6272 616e 6368 2f6d  -python/branch/m
+00000e10: 6173 7465 722f 6772 6170 682f 6261 6467  aster/graph/badg
+00000e20: 652e 7376 6729 5d28 6874 7470 733a 2f2f  e.svg)](https://
+00000e30: 636f 6465 636f 762e 696f 2f67 682f 7065  codecov.io/gh/pe
+00000e40: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
+00000e50: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
+00000e60: 290a 5b21 5b50 7950 4920 2d20 446f 776e  ).[![PyPI - Down
+00000e70: 6c6f 6164 735d 2868 7474 7073 3a2f 2f69  loads](https://i
+00000e80: 6d67 2e73 6869 656c 6473 2e69 6f2f 7079  mg.shields.io/py
+00000e90: 7069 2f64 772f 726f 626f 7469 6373 746f  pi/dw/roboticsto
+00000ea0: 6f6c 626f 782d 7079 7468 6f6e 295d 2868  olbox-python)](h
+00000eb0: 7474 7073 3a2f 2f70 7970 6973 7461 7473  ttps://pypistats
+00000ec0: 2e6f 7267 2f70 6163 6b61 6765 732f 726f  .org/packages/ro
+00000ed0: 626f 7469 6373 746f 6f6c 626f 782d 7079  boticstoolbox-py
+00000ee0: 7468 6f6e 290a 5b21 5b4c 6963 656e 7365  thon).[![License
+00000ef0: 3a20 4d49 545d 2868 7474 7073 3a2f 2f69  : MIT](https://i
+00000f00: 6d67 2e73 6869 656c 6473 2e69 6f2f 6261  mg.shields.io/ba
+00000f10: 6467 652f 4c69 6365 6e73 652d 4d49 542d  dge/License-MIT-
+00000f20: 7965 6c6c 6f77 2e73 7667 295d 2868 7474  yellow.svg)](htt
+00000f30: 7073 3a2f 2f6f 7065 6e73 6f75 7263 652e  ps://opensource.
+00000f40: 6f72 672f 6c69 6365 6e73 6573 2f4d 4954  org/licenses/MIT
+00000f50: 290a 0a3c 7461 626c 6520 7374 796c 653d  )..<table style=
+00000f60: 2262 6f72 6465 723a 3070 7822 3e0a 3c74  "border:0px">.<t
+00000f70: 7220 7374 796c 653d 2262 6f72 6465 723a  r style="border:
+00000f80: 3070 7822 3e0a 3c74 6420 7374 796c 653d  0px">.<td style=
+00000f90: 2262 6f72 6465 723a 3070 7822 3e0a 3c69  "border:0px">.<i
+00000fa0: 6d67 2073 7263 3d22 6874 7470 733a 2f2f  mg src="https://
+00000fb0: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
+00000fc0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+00000fd0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 7261  oolbox-python/ra
+00000fe0: 772f 6d61 7374 6572 2f64 6f63 732f 6669  w/master/docs/fi
+00000ff0: 6773 2f52 6f62 546f 6f6c 426f 785f 526f  gs/RobToolBox_Ro
+00001000: 756e 644c 6f67 6f42 2e70 6e67 2220 7769  undLogoB.png" wi
+00001010: 6474 683d 2232 3030 223e 3c2f 7464 3e0a  dth="200"></td>.
+00001020: 3c74 6420 7374 796c 653d 2262 6f72 6465  <td style="borde
+00001030: 723a 3070 7822 3e0a 4120 5079 7468 6f6e  r:0px">.A Python
+00001040: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+00001050: 6f66 2074 6865 203c 6120 6872 6566 3d22  of the <a href="
+00001060: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00001070: 6f6d 2f70 6574 6572 636f 726b 652f 726f  om/petercorke/ro
+00001080: 626f 7469 6373 2d74 6f6f 6c62 6f78 2d6d  botics-toolbox-m
+00001090: 6174 6c61 6222 3e52 6f62 6f74 6963 7320  atlab">Robotics 
+000010a0: 546f 6f6c 626f 7820 666f 7220 4d41 544c  Toolbox for MATL
+000010b0: 4142 3c73 7570 3e26 7265 673b 3c2f 7375  AB<sup>&reg;</su
+000010c0: 703e 3c2f 613e 0a3c 756c 3e0a 3c6c 693e  p></a>.<ul>.<li>
+000010d0: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
+000010e0: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
+000010f0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
+00001100: 746f 6f6c 626f 782d 7079 7468 6f6e 223e  toolbox-python">
+00001110: 4769 7448 7562 2072 6570 6f73 6974 6f72  GitHub repositor
+00001120: 7920 3c2f 613e 3c2f 6c69 3e0a 3c6c 693e  y </a></li>.<li>
+00001130: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
+00001140: 2f70 6574 6572 636f 726b 652e 6769 7468  /petercorke.gith
+00001150: 7562 2e69 6f2f 726f 626f 7469 6373 2d74  ub.io/robotics-t
+00001160: 6f6f 6c62 6f78 2d70 7974 686f 6e22 3e44  oolbox-python">D
+00001170: 6f63 756d 656e 7461 7469 6f6e 3c2f 613e  ocumentation</a>
+00001180: 3c2f 6c69 3e0a 3c6c 693e 3c61 2068 7265  </li>.<li><a hre
+00001190: 663d 2223 3622 3e49 4352 4120 5061 7065  f="#6">ICRA Pape
+000011a0: 723c 2f61 3e3c 2f6c 693e 0a3c 6c69 3e3c  r</a></li>.<li><
+000011b0: 6120 6872 6566 3d22 6874 7470 733a 2f2f  a href="https://
+000011c0: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
+000011d0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+000011e0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 7769  oolbox-python/wi
+000011f0: 6b69 223e 5769 6b69 2028 6578 616d 706c  ki">Wiki (exampl
+00001200: 6573 2061 6e64 2064 6574 6169 6c73 293c  es and details)<
+00001210: 2f61 3e3c 2f6c 693e 0a3c 2f75 6c3e 0a3c  /a></li>.</ul>.<
+00001220: 2f74 643e 0a3c 2f74 723e 0a3c 2f74 6162  /td>.</tr>.</tab
+00001230: 6c65 3e0a 0a3c 212d 2d20 3c62 723e 202d  le>..<!-- <br> -
+00001240: 2d3e 0a0a 2323 2043 6f6e 7465 6e74 730a  ->..## Contents.
+00001250: 0a2d 205b 5379 6e6f 7073 6973 5d28 2331  .- [Synopsis](#1
+00001260: 290a 2d20 5b47 6574 7469 6e67 2067 6f69  ).- [Getting goi
+00001270: 6e67 5d28 2332 290a 2d20 5b54 7574 6f72  ng](#2).- [Tutor
+00001280: 6961 6c73 5d28 2333 290a 2d20 5b43 6f64  ials](#3).- [Cod
+00001290: 6520 4578 616d 706c 6573 5d28 2334 290a  e Examples](#4).
+000012a0: 2d20 5b54 6f6f 6c62 6f78 2052 6573 6561  - [Toolbox Resea
+000012b0: 7263 6820 4170 706c 6963 6174 696f 6e73  rch Applications
+000012c0: 5d28 2335 290a 2d20 5b54 6f6f 6c62 6f78  ](#5).- [Toolbox
+000012d0: 2049 4352 4120 5061 7065 7220 616e 6420   ICRA Paper and 
+000012e0: 4369 7461 7469 6f6e 2049 6e66 6f5d 2823  Citation Info](#
+000012f0: 3629 0a2d 205b 5573 696e 6720 7468 6520  6).- [Using the 
+00001300: 546f 6f6c 626f 7820 696e 2079 6f75 7220  Toolbox in your 
+00001310: 4f70 656e 2053 6f75 7263 6520 436f 6465  Open Source Code
+00001320: 3f5d 2823 3729 0a2d 205b 436f 6d6d 6f6e  ?](#7).- [Common
+00001330: 2049 7373 7565 7320 616e 6420 536f 6c75   Issues and Solu
+00001340: 7469 6f6e 735d 2823 3829 0a0a 3c62 723e  tions](#8)..<br>
+00001350: 0a0a 3c61 2069 643d 2731 273e 3c2f 613e  ..<a id='1'></a>
+00001360: 0a0a 2323 2053 796e 6f70 7369 730a 0a54  ..## Synopsis..T
+00001370: 6869 7320 746f 6f6c 626f 7820 6272 696e  his toolbox brin
+00001380: 6773 2072 6f62 6f74 6963 732d 7370 6563  gs robotics-spec
+00001390: 6966 6963 2066 756e 6374 696f 6e61 6c69  ific functionali
+000013a0: 7479 2074 6f20 5079 7468 6f6e 2c20 616e  ty to Python, an
+000013b0: 6420 6c65 7665 7261 6765 730a 5079 7468  d leverages.Pyth
+000013c0: 6f6e 2773 2061 6476 616e 7461 6765 7320  on's advantages 
+000013d0: 6f66 2070 6f72 7461 6269 6c69 7479 2c20  of portability, 
+000013e0: 7562 6971 7569 7479 2061 6e64 2073 7570  ubiquity and sup
+000013f0: 706f 7274 2c20 616e 6420 7468 6520 6361  port, and the ca
+00001400: 7061 6269 6c69 7479 206f 660a 7468 6520  pability of.the 
+00001410: 6f70 656e 2d73 6f75 7263 6520 6563 6f73  open-source ecos
+00001420: 7973 7465 6d20 666f 7220 6c69 6e65 6172  ystem for linear
+00001430: 2061 6c67 6562 7261 2028 6e75 6d70 792c   algebra (numpy,
+00001440: 2073 6369 7079 292c 2067 7261 7068 6963   scipy), graphic
+00001450: 730a 286d 6174 706c 6f74 6c69 622c 2074  s.(matplotlib, t
+00001460: 6872 6565 2e6a 732c 2057 6562 474c 292c  hree.js, WebGL),
+00001470: 2069 6e74 6572 6163 7469 7665 2064 6576   interactive dev
+00001480: 656c 6f70 6d65 6e74 2028 6a75 7079 7465  elopment (jupyte
+00001490: 722c 206a 7570 7974 6572 6c61 622c 0a6d  r, jupyterlab,.m
+000014a0: 7962 696e 6465 722e 6f72 6729 2c20 616e  ybinder.org), an
+000014b0: 6420 646f 6375 6d65 6e74 6174 696f 6e20  d documentation 
+000014c0: 2873 7068 696e 7829 2e0a 0a54 6865 2054  (sphinx)...The T
+000014d0: 6f6f 6c62 6f78 2070 726f 7669 6465 7320  oolbox provides 
+000014e0: 746f 6f6c 7320 666f 7220 7265 7072 6573  tools for repres
+000014f0: 656e 7469 6e67 2074 6865 206b 696e 656d  enting the kinem
+00001500: 6174 6963 7320 616e 6420 6479 6e61 6d69  atics and dynami
+00001510: 6373 206f 660a 7365 7269 616c 2d6c 696e  cs of.serial-lin
+00001520: 6b20 6d61 6e69 7075 6c61 746f 7273 202d  k manipulators -
+00001530: 2079 6f75 2063 616e 2065 6173 696c 7920   you can easily 
+00001540: 6372 6561 7465 2079 6f75 7220 6f77 6e20  create your own 
+00001550: 696e 2044 656e 6176 6974 2d48 6172 7465  in Denavit-Harte
+00001560: 6e62 6572 670a 666f 726d 2c20 696d 706f  nberg.form, impo
+00001570: 7274 2061 2055 5244 4620 6669 6c65 2c20  rt a URDF file, 
+00001580: 6f72 2075 7365 206f 7665 7220 3330 2073  or use over 30 s
+00001590: 7570 706c 6965 6420 6d6f 6465 6c73 2066  upplied models f
+000015a0: 6f72 2077 656c 6c2d 6b6e 6f77 6e0a 636f  or well-known.co
+000015b0: 6e74 656d 706f 7261 7279 2072 6f62 6f74  ntemporary robot
+000015c0: 7320 6672 6f6d 2046 7261 6e6b 612d 456d  s from Franka-Em
+000015d0: 696b 612c 204b 696e 6f76 612c 2055 6e69  ika, Kinova, Uni
+000015e0: 7665 7273 616c 2052 6f62 6f74 6963 732c  versal Robotics,
+000015f0: 2052 6574 6869 6e6b 2061 730a 7765 6c6c   Rethink as.well
+00001600: 2061 7320 636c 6173 7369 6361 6c20 726f   as classical ro
+00001610: 626f 7473 2073 7563 6820 6173 2074 6865  bots such as the
+00001620: 2050 756d 6120 3536 3020 616e 6420 7468   Puma 560 and th
+00001630: 6520 5374 616e 666f 7264 2061 726d 2e0a  e Stanford arm..
+00001640: 0a54 6865 2054 6f6f 6c62 6f78 2063 6f6e  .The Toolbox con
+00001650: 7461 696e 7320 6661 7374 2069 6d70 6c65  tains fast imple
+00001660: 6d65 6e74 6174 696f 6e73 206f 6620 6b69  mentations of ki
+00001670: 6e65 6d61 7469 6320 6f70 6572 6174 696f  nematic operatio
+00001680: 6e73 2e20 5468 6520 666f 7277 6172 640a  ns. The forward.
+00001690: 6b69 6e65 6d61 7469 6373 2061 6e64 2074  kinematics and t
+000016a0: 6865 206d 616e 6970 756c 6174 6f72 204a  he manipulator J
+000016b0: 6163 6f62 6961 6e20 6361 6e20 6265 2063  acobian can be c
+000016c0: 6f6d 7075 7465 6420 696e 206c 6573 7320  omputed in less 
+000016d0: 7468 616e 2031 206d 6963 726f 7365 636f  than 1 microseco
+000016e0: 6e64 0a77 6869 6c65 206e 756d 6572 6963  nd.while numeric
+000016f0: 616c 2069 6e76 6572 7365 206b 696e 656d  al inverse kinem
+00001700: 6174 6963 7320 6361 6e20 6265 2073 6f6c  atics can be sol
+00001710: 7665 6420 696e 2061 7320 6c69 7474 6c65  ved in as little
+00001720: 2061 7320 3420 6d69 6372 6f73 6563 6f6e   as 4 microsecon
+00001730: 6473 2e0a 0a54 6865 2074 6f6f 6c62 6f78  ds...The toolbox
+00001740: 2061 6c73 6f20 7375 7070 6f72 7473 206d   also supports m
+00001750: 6f62 696c 6520 726f 626f 7473 2077 6974  obile robots wit
+00001760: 6820 6675 6e63 7469 6f6e 7320 666f 7220  h functions for 
+00001770: 726f 626f 7420 6d6f 7469 6f6e 206d 6f64  robot motion mod
+00001780: 656c 730a 2875 6e69 6379 636c 652c 2062  els.(unicycle, b
+00001790: 6963 7963 6c65 292c 2070 6174 6820 706c  icycle), path pl
+000017a0: 616e 6e69 6e67 2061 6c67 6f72 6974 686d  anning algorithm
+000017b0: 7320 2862 7567 2c20 6469 7374 616e 6365  s (bug, distance
+000017c0: 2074 7261 6e73 666f 726d 2c20 445c 2a2c   transform, D\*,
+000017d0: 0a50 524d 292c 206b 696e 6f64 796e 616d  .PRM), kinodynam
+000017e0: 6963 2070 6c61 6e6e 696e 6720 286c 6174  ic planning (lat
+000017f0: 7469 6365 2c20 5252 5429 2c20 6c6f 6361  tice, RRT), loca
+00001800: 6c69 7a61 7469 6f6e 2028 454b 462c 2070  lization (EKF, p
+00001810: 6172 7469 636c 6520 6669 6c74 6572 292c  article filter),
+00001820: 0a6d 6170 2062 7569 6c64 696e 6720 2845  .map building (E
+00001830: 4b46 2920 616e 6420 7369 6d75 6c74 616e  KF) and simultan
+00001840: 656f 7573 206c 6f63 616c 697a 6174 696f  eous localizatio
+00001850: 6e20 616e 6420 6d61 7070 696e 6720 2845  n and mapping (E
+00001860: 4b46 292e 0a0a 5468 6520 546f 6f6c 626f  KF)...The Toolbo
+00001870: 7820 7072 6f76 6964 6573 3a0a 0a2d 2063  x provides:..- c
+00001880: 6f64 6520 7468 6174 2069 7320 6d61 7475  ode that is matu
+00001890: 7265 2061 6e64 2070 726f 7669 6465 7320  re and provides 
+000018a0: 6120 706f 696e 7420 6f66 2063 6f6d 7061  a point of compa
+000018b0: 7269 736f 6e20 666f 7220 6f74 6865 720a  rison for other.
+000018c0: 2020 696d 706c 656d 656e 7461 7469 6f6e    implementation
+000018d0: 7320 6f66 2074 6865 2073 616d 6520 616c  s of the same al
+000018e0: 676f 7269 7468 6d73 3b0a 2d20 726f 7574  gorithms;.- rout
+000018f0: 696e 6573 2077 6869 6368 2061 7265 2067  ines which are g
+00001900: 656e 6572 616c 6c79 2077 7269 7474 656e  enerally written
+00001910: 2069 6e20 6120 7374 7261 6967 6874 666f   in a straightfo
+00001920: 7277 6172 6420 6d61 6e6e 6572 2077 6869  rward manner whi
+00001930: 6368 0a20 2061 6c6c 6f77 7320 666f 7220  ch.  allows for 
+00001940: 6561 7379 2075 6e64 6572 7374 616e 6469  easy understandi
+00001950: 6e67 2c20 7065 7268 6170 7320 6174 2074  ng, perhaps at t
+00001960: 6865 2065 7870 656e 7365 206f 6620 636f  he expense of co
+00001970: 6d70 7574 6174 696f 6e61 6c0a 2020 6566  mputational.  ef
+00001980: 6669 6369 656e 6379 3b0a 2d20 736f 7572  ficiency;.- sour
+00001990: 6365 2063 6f64 6520 7768 6963 6820 6361  ce code which ca
+000019a0: 6e20 6265 2072 6561 6420 666f 7220 6c65  n be read for le
+000019b0: 6172 6e69 6e67 2061 6e64 2074 6561 6368  arning and teach
+000019c0: 696e 673b 0a2d 2062 6163 6b77 6172 6420  ing;.- backward 
+000019d0: 636f 6d70 6174 6162 696c 6974 7920 7769  compatability wi
+000019e0: 7468 2074 6865 2052 6f62 6f74 6963 7320  th the Robotics 
+000019f0: 546f 6f6c 626f 7820 666f 7220 4d41 544c  Toolbox for MATL
+00001a00: 4142 0a0a 5468 6520 546f 6f6c 626f 7820  AB..The Toolbox 
+00001a10: 6c65 7665 7261 6765 7320 7468 6520 5b53  leverages the [S
+00001a20: 7061 7469 616c 204d 6174 6873 2054 6f6f  patial Maths Too
+00001a30: 6c62 6f78 2066 6f72 2050 7974 686f 6e5d  lbox for Python]
+00001a40: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00001a50: 636f 6d2f 7065 7465 7263 6f72 6b65 2f73  com/petercorke/s
+00001a60: 7061 7469 616c 6d61 7468 2d70 7974 686f  patialmath-pytho
+00001a70: 6e29 2074 6f0a 7072 6f76 6964 6520 7375  n) to.provide su
+00001a80: 7070 6f72 7420 666f 7220 6461 7461 2074  pport for data t
+00001a90: 7970 6573 2073 7563 6820 6173 2053 4f28  ypes such as SO(
+00001aa0: 6e29 2061 6e64 2053 4528 6e29 206d 6174  n) and SE(n) mat
+00001ab0: 7269 6365 732c 2071 7561 7465 726e 696f  rices, quaternio
+00001ac0: 6e73 2c20 7477 6973 7473 2061 6e64 2073  ns, twists and s
+00001ad0: 7061 7469 616c 2076 6563 746f 7273 2e0a  patial vectors..
+00001ae0: 0a3c 6272 3e0a 0a3c 6120 6964 3d27 3227  .<br>..<a id='2'
+00001af0: 3e3c 2f61 3e0a 0a23 2320 4765 7474 696e  ></a>..## Gettin
+00001b00: 6720 676f 696e 670a 0a59 6f75 2077 696c  g going..You wil
+00001b10: 6c20 6e65 6564 2050 7974 686f 6e20 3e3d  l need Python >=
+00001b20: 2033 2e36 0a0a 2323 2320 5573 696e 6720   3.6..### Using 
+00001b30: 7069 700a 0a49 6e73 7461 6c6c 2061 2073  pip..Install a s
+00001b40: 6e61 7073 686f 7420 6672 6f6d 2050 7950  napshot from PyP
+00001b50: 490a 0a60 6060 7368 656c 6c20 7363 7269  I..```shell scri
+00001b60: 7074 0a70 6970 3320 696e 7374 616c 6c20  pt.pip3 install 
+00001b70: 726f 626f 7469 6373 746f 6f6c 626f 782d  roboticstoolbox-
+00001b80: 7079 7468 6f6e 0a60 6060 0a0a 4176 6169  python.```..Avai
+00001b90: 6c61 626c 6520 6f70 7469 6f6e 7320 6172  lable options ar
+00001ba0: 653a 0a0a 2d20 6063 6f6c 6c69 7369 6f6e  e:..- `collision
+00001bb0: 6020 696e 7374 616c 6c20 636f 6c6c 6973  ` install collis
+00001bc0: 696f 6e20 6368 6563 6b69 6e67 2077 6974  ion checking wit
+00001bd0: 6820 5b70 7962 756c 6c65 745d 2868 7474  h [pybullet](htt
+00001be0: 7073 3a2f 2f70 7962 756c 6c65 742e 6f72  ps://pybullet.or
+00001bf0: 6729 0a0a 5075 7420 7468 6520 6f70 7469  g)..Put the opti
+00001c00: 6f6e 7320 696e 2061 2063 6f6d 6d61 2073  ons in a comma s
+00001c10: 6570 6172 6174 6564 206c 6973 7420 6c69  eparated list li
+00001c20: 6b65 0a0a 6060 6073 6865 6c6c 2073 6372  ke..```shell scr
+00001c30: 6970 740a 7069 7033 2069 6e73 7461 6c6c  ipt.pip3 install
+00001c40: 2072 6f62 6f74 6963 7374 6f6f 6c62 6f78   roboticstoolbox
+00001c50: 2d70 7974 686f 6e5b 6f70 7469 6f6e 6c69  -python[optionli
+00001c60: 7374 5d0a 6060 600a 0a5b 5377 6966 745d  st].```..[Swift]
+00001c70: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00001c80: 636f 6d2f 6a68 6176 6c2f 7377 6966 7429  com/jhavl/swift)
+00001c90: 2c20 6120 7765 622d 6261 7365 6420 7669  , a web-based vi
+00001ca0: 7375 616c 697a 6572 2c20 6973 0a69 6e73  sualizer, is.ins
+00001cb0: 7461 6c6c 6564 2061 7320 7061 7274 206f  talled as part o
+00001cc0: 6620 526f 626f 7469 6373 2054 6f6f 6c62  f Robotics Toolb
+00001cd0: 6f78 2e0a 0a23 2323 2046 726f 6d20 4769  ox...### From Gi
+00001ce0: 7448 7562 0a0a 546f 2069 6e73 7461 6c6c  tHub..To install
+00001cf0: 2074 6865 2062 6c65 6564 696e 672d 6564   the bleeding-ed
+00001d00: 6765 2076 6572 7369 6f6e 2066 726f 6d20  ge version from 
+00001d10: 4769 7448 7562 0a0a 6060 6073 6865 6c6c  GitHub..```shell
+00001d20: 2073 6372 6970 740a 6769 7420 636c 6f6e   script.git clon
+00001d30: 6520 6874 7470 733a 2f2f 6769 7468 7562  e https://github
+00001d40: 2e63 6f6d 2f70 6574 6572 636f 726b 652f  .com/petercorke/
+00001d50: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00001d60: 2d70 7974 686f 6e2e 6769 740a 6364 2072  -python.git.cd r
+00001d70: 6f62 6f74 6963 732d 746f 6f6c 626f 782d  obotics-toolbox-
+00001d80: 7079 7468 6f6e 0a70 6970 3320 696e 7374  python.pip3 inst
+00001d90: 616c 6c20 2d65 202e 0a60 6060 0a0a 3c62  all -e ..```..<b
+00001da0: 723e 0a0a 3c61 2069 643d 2733 273e 3c2f  r>..<a id='3'></
+00001db0: 613e 0a0a 2323 2054 7574 6f72 6961 6c73  a>..## Tutorials
+00001dc0: 0a0a 3c74 6162 6c65 2073 7479 6c65 3d22  ..<table style="
+00001dd0: 626f 7264 6572 3a30 7078 223e 0a3c 7472  border:0px">.<tr
+00001de0: 2073 7479 6c65 3d22 626f 7264 6572 3a30   style="border:0
+00001df0: 7078 223e 0a3c 7464 2073 7479 6c65 3d22  px">.<td style="
+00001e00: 626f 7264 6572 3a30 7078 223e 3c61 2068  border:0px"><a h
+00001e10: 7265 663d 2268 7474 7073 3a2f 2f62 6974  ref="https://bit
+00001e20: 2e6c 792f 3361 6b35 4744 6922 3e3c 696d  .ly/3ak5GDi"><im
+00001e30: 6720 7372 633d 2268 7474 7073 3a2f 2f67  g src="https://g
+00001e40: 6974 6875 622e 636f 6d2f 6a68 6176 6c2f  ithub.com/jhavl/
+00001e50: 646b 742f 7261 772f 6d61 696e 2f69 6d67  dkt/raw/main/img
+00001e60: 2f61 7274 6963 6c65 312e 706e 6722 2077  /article1.png" w
+00001e70: 6964 7468 3d22 3430 3022 3e3c 2f61 3e3c  idth="400"></a><
+00001e80: 2f74 643e 0a3c 7464 2073 7479 6c65 3d22  /td>.<td style="
+00001e90: 626f 7264 6572 3a30 7078 223e 3c61 2068  border:0px"><a h
+00001ea0: 7265 663d 2268 7474 7073 3a2f 2f62 6974  ref="https://bit
+00001eb0: 2e6c 792f 3361 6b35 4744 6922 3e3c 696d  .ly/3ak5GDi"><im
+00001ec0: 6720 7372 633d 2268 7474 7073 3a2f 2f67  g src="https://g
+00001ed0: 6974 6875 622e 636f 6d2f 6a68 6176 6c2f  ithub.com/jhavl/
+00001ee0: 646b 742f 7261 772f 6d61 696e 2f69 6d67  dkt/raw/main/img
+00001ef0: 2f61 7274 6963 6c65 322e 706e 6722 2077  /article2.png" w
+00001f00: 6964 7468 3d22 3430 3022 3e3c 2f61 3e3c  idth="400"></a><
+00001f10: 2f74 643e 0a3c 7464 2073 7479 6c65 3d22  /td>.<td style="
+00001f20: 626f 7264 6572 3a30 7078 223e 0a44 6f20  border:0px">.Do 
+00001f30: 796f 7520 7761 6e74 2074 6f20 6c65 6172  you want to lear
+00001f40: 6e20 6162 6f75 7420 6d61 6e69 7075 6c61  n about manipula
+00001f50: 746f 7220 6b69 6e65 6d61 7469 6373 2c20  tor kinematics, 
+00001f60: 6469 6666 6572 656e 7469 616c 206b 696e  differential kin
+00001f70: 656d 6174 6963 732c 2069 6e76 6572 7365  ematics, inverse
+00001f80: 2d6b 696e 656d 6174 6963 7320 616e 6420  -kinematics and 
+00001f90: 6d6f 7469 6f6e 2063 6f6e 7472 6f6c 3f20  motion control? 
+00001fa0: 4861 7665 2061 206c 6f6f 6b20 6174 206f  Have a look at o
+00001fb0: 7572 0a3c 6120 6872 6566 3d22 6874 7470  ur.<a href="http
+00001fc0: 733a 2f2f 6269 742e 6c79 2f33 616b 3547  s://bit.ly/3ak5G
+00001fd0: 4469 223e 7475 746f 7269 616c 3c2f 613e  Di">tutorial</a>
+00001fe0: 2e0a 5468 6973 2074 7574 6f72 6961 6c20  ..This tutorial 
+00001ff0: 636f 6d65 7320 7769 7468 2074 776f 2061  comes with two a
+00002000: 7274 6963 6c65 7320 746f 2063 6f76 6572  rticles to cover
+00002010: 2074 6865 2074 6865 6f72 7920 616e 6420   the theory and 
+00002020: 3132 204a 7570 7974 6572 204e 6f74 6562  12 Jupyter Noteb
+00002030: 6f6f 6b73 2070 726f 7669 6469 6e67 2066  ooks providing f
+00002040: 756c 6c20 636f 6465 2069 6d70 6c65 6d65  ull code impleme
+00002050: 6e74 6174 696f 6e73 2061 6e64 2065 7861  ntations and exa
+00002060: 6d70 6c65 732e 204d 6f73 7420 6f66 2074  mples. Most of t
+00002070: 6865 204e 6f74 6562 6f6f 6b73 2061 7265  he Notebooks are
+00002080: 2061 6c73 6f20 476f 6f67 6c65 2043 6f6c   also Google Col
+00002090: 6162 2063 6f6d 7061 7469 626c 6520 616c  ab compatible al
+000020a0: 6c6f 7769 6e67 2074 6865 6d20 746f 2072  lowing them to r
+000020b0: 756e 206f 6e6c 696e 652e 0a3c 2f74 643e  un online..</td>
+000020c0: 0a3c 2f74 723e 0a3c 2f74 6162 6c65 3e0a  .</tr>.</table>.
+000020d0: 0a3c 6272 3e0a 0a3c 6120 6964 3d27 3427  .<br>..<a id='4'
+000020e0: 3e3c 2f61 3e0a 0a23 2320 436f 6465 2045  ></a>..## Code E
+000020f0: 7861 6d70 6c65 730a 0a57 6520 7769 6c6c  xamples..We will
+00002100: 206c 6f61 6420 6120 6d6f 6465 6c20 6f66   load a model of
+00002110: 2074 6865 2046 7261 6e6b 612d 456d 696b   the Franka-Emik
+00002120: 6120 5061 6e64 6120 726f 626f 7420 6465  a Panda robot de
+00002130: 6669 6e65 6420 6279 2061 2055 5244 4620  fined by a URDF 
+00002140: 6669 6c65 0a0a 6060 6070 7974 686f 6e0a  file..```python.
+00002150: 696d 706f 7274 2072 6f62 6f74 6963 7374  import roboticst
+00002160: 6f6f 6c62 6f78 2061 7320 7274 620a 726f  oolbox as rtb.ro
+00002170: 626f 7420 3d20 7274 622e 6d6f 6465 6c73  bot = rtb.models
+00002180: 2e50 616e 6461 2829 0a70 7269 6e74 2872  .Panda().print(r
+00002190: 6f62 6f74 290a 0a09 4552 6f62 6f74 3a20  obot)...ERobot: 
+000021a0: 7061 6e64 6120 2862 7920 4672 616e 6b61  panda (by Franka
+000021b0: 2045 6d69 6b61 292c 2037 206a 6f69 6e74   Emika), 7 joint
+000021c0: 7320 2852 5252 5252 5252 292c 2031 2067  s (RRRRRRR), 1 g
+000021d0: 7269 7070 6572 2c20 6765 6f6d 6574 7279  ripper, geometry
+000021e0: 2c20 636f 6c6c 6973 696f 6e0a 09e2 948c  , collision.....
+000021f0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002200: 94ac e294 80e2 9480 e294 80e2 9480 e294  ................
+00002210: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002220: e294 80e2 9480 e294 80e2 9480 e294 ace2  ................
+00002230: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002240: 80e2 9480 e294 ace2 9480 e294 80e2 9480  ................
+00002250: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002260: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002270: ace2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002280: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002290: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000022a0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000022b0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000022c0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000022d0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000022e0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000022f0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002300: 80e2 9490 0a09 e294 826c 696e 6b20 e294  .........link ..
+00002310: 8220 2020 2020 6c69 6e6b 2020 2020 20e2  .     link     .
+00002320: 9482 206a 6f69 6e74 20e2 9482 2020 2070  .. joint ...   p
+00002330: 6172 656e 7420 2020 20e2 9482 2020 2020  arent    ...    
+00002340: 2020 2020 2020 2020 2020 4554 533a 2070            ETS: p
+00002350: 6172 656e 7420 746f 206c 696e 6b20 2020  arent to link   
+00002360: 2020 2020 2020 2020 2020 2020 e294 820a              ....
+00002370: 09e2 949c e294 80e2 9480 e294 80e2 9480  ................
+00002380: e294 80e2 94bc e294 80e2 9480 e294 80e2  ................
+00002390: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000023a0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000023b0: e294 bce2 9480 e294 80e2 9480 e294 80e2  ................
+000023c0: 9480 e294 80e2 9480 e294 bce2 9480 e294  ................
+000023d0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000023e0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000023f0: 9480 e294 bce2 9480 e294 80e2 9480 e294  ................
+00002400: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002410: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002420: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002430: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002440: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002450: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002460: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002470: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002480: 9480 e294 80e2 94a4 0a09 e294 8220 2020  .............   
+00002490: 3020 e294 8220 7061 6e64 615f 6c69 6e6b  0 ... panda_link
+000024a0: 3020 20e2 9482 2020 2020 2020 20e2 9482  0  ...       ...
+000024b0: 2042 4153 4520 2020 2020 2020 20e2 9482   BASE        ...
+000024c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024f0: e294 820a 09e2 9482 2020 2031 20e2 9482  ........   1 ...
+00002500: 2070 616e 6461 5f6c 696e 6b31 2020 e294   panda_link1  ..
+00002510: 8220 2020 2020 3020 e294 8220 7061 6e64  .     0 ... pand
+00002520: 615f 6c69 6e6b 3020 e294 8220 5345 3328  a_link0 ... SE3(
+00002530: 302c 2030 2c20 302e 3333 3329 20e2 8a95  0, 0, 0.333) ...
+00002540: 2052 7a28 7130 2920 2020 2020 2020 2020   Rz(q0)         
+00002550: 2020 2020 2020 2020 2020 2020 20e2 9482               ...
+00002560: 0a09 e294 8220 2020 3220 e294 8220 7061  .....   2 ... pa
+00002570: 6e64 615f 6c69 6e6b 3220 20e2 9482 2020  nda_link2  ...  
+00002580: 2020 2031 20e2 9482 2070 616e 6461 5f6c     1 ... panda_l
+00002590: 696e 6b31 20e2 9482 2053 4533 282d 3930  ink1 ... SE3(-90
+000025a0: c2b0 2c20 2d30 c2b0 2c20 30c2 b029 20e2  .., -0.., 0..) .
+000025b0: 8a95 2052 7a28 7131 2920 2020 2020 2020  .. Rz(q1)       
+000025c0: 2020 2020 2020 2020 2020 2020 20e2 9482               ...
+000025d0: 0a09 e294 8220 2020 3320 e294 8220 7061  .....   3 ... pa
+000025e0: 6e64 615f 6c69 6e6b 3320 20e2 9482 2020  nda_link3  ...  
+000025f0: 2020 2032 20e2 9482 2070 616e 6461 5f6c     2 ... panda_l
+00002600: 696e 6b32 20e2 9482 2053 4533 2830 2c20  ink2 ... SE3(0, 
+00002610: 2d30 2e33 3136 2c20 303b 2039 30c2 b02c  -0.316, 0; 90..,
+00002620: 202d 30c2 b02c 2030 c2b0 2920 e28a 9520   -0.., 0..) ... 
+00002630: 527a 2871 3229 2020 2020 2020 20e2 9482  Rz(q2)       ...
+00002640: 0a09 e294 8220 2020 3420 e294 8220 7061  .....   4 ... pa
+00002650: 6e64 615f 6c69 6e6b 3420 20e2 9482 2020  nda_link4  ...  
+00002660: 2020 2033 20e2 9482 2070 616e 6461 5f6c     3 ... panda_l
+00002670: 696e 6b33 20e2 9482 2053 4533 2830 2e30  ink3 ... SE3(0.0
+00002680: 3832 352c 2030 2c20 303b 2039 30c2 b02c  825, 0, 0; 90..,
+00002690: 202d 30c2 b02c 2030 c2b0 2920 e28a 9520   -0.., 0..) ... 
+000026a0: 527a 2871 3329 2020 2020 2020 20e2 9482  Rz(q3)       ...
+000026b0: 0a09 e294 8220 2020 3520 e294 8220 7061  .....   5 ... pa
+000026c0: 6e64 615f 6c69 6e6b 3520 20e2 9482 2020  nda_link5  ...  
+000026d0: 2020 2034 20e2 9482 2070 616e 6461 5f6c     4 ... panda_l
+000026e0: 696e 6b34 20e2 9482 2053 4533 282d 302e  ink4 ... SE3(-0.
+000026f0: 3038 3235 2c20 302e 3338 342c 2030 3b20  0825, 0.384, 0; 
+00002700: 2d39 30c2 b02c 202d 30c2 b02c 2030 c2b0  -90.., -0.., 0..
+00002710: 2920 e28a 9520 527a 2871 3429 20e2 9482  ) ... Rz(q4) ...
+00002720: 0a09 e294 8220 2020 3620 e294 8220 7061  .....   6 ... pa
+00002730: 6e64 615f 6c69 6e6b 3620 20e2 9482 2020  nda_link6  ...  
+00002740: 2020 2035 20e2 9482 2070 616e 6461 5f6c     5 ... panda_l
+00002750: 696e 6b35 20e2 9482 2053 4533 2839 30c2  ink5 ... SE3(90.
+00002760: b02c 202d 30c2 b02c 2030 c2b0 2920 e28a  ., -0.., 0..) ..
+00002770: 9520 527a 2871 3529 2020 2020 2020 2020  . Rz(q5)        
+00002780: 2020 2020 2020 2020 2020 2020 20e2 9482               ...
+00002790: 0a09 e294 8220 2020 3720 e294 8220 7061  .....   7 ... pa
+000027a0: 6e64 615f 6c69 6e6b 3720 20e2 9482 2020  nda_link7  ...  
+000027b0: 2020 2036 20e2 9482 2070 616e 6461 5f6c     6 ... panda_l
+000027c0: 696e 6b36 20e2 9482 2053 4533 2830 2e30  ink6 ... SE3(0.0
+000027d0: 3838 2c20 302c 2030 3b20 3930 c2b0 2c20  88, 0, 0; 90.., 
+000027e0: 2d30 c2b0 2c20 30c2 b029 20e2 8a95 2052  -0.., 0..) ... R
+000027f0: 7a28 7136 2920 2020 2020 2020 20e2 9482  z(q6)        ...
+00002800: 0a09 e294 8220 2020 3820 e294 8220 4070  .....   8 ... @p
+00002810: 616e 6461 5f6c 696e 6b38 20e2 9482 2020  anda_link8 ...  
+00002820: 2020 2020 20e2 9482 2070 616e 6461 5f6c       ... panda_l
+00002830: 696e 6b37 20e2 9482 2053 4533 2830 2c20  ink7 ... SE3(0, 
+00002840: 302c 2030 2e31 3037 2920 2020 2020 2020  0, 0.107)       
 00002850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002860: 2020 2020 e294 820a 09e2 9482 2020 2037      ........   7
-00002870: 20e2 9482 2070 616e 6461 5f6c 696e 6b37   ... panda_link7
-00002880: 2020 e294 8220 2020 2020 3620 e294 8220    ...     6 ... 
-00002890: 7061 6e64 615f 6c69 6e6b 3620 e294 8220  panda_link6 ... 
-000028a0: 5345 3328 302e 3038 382c 2030 2c20 303b  SE3(0.088, 0, 0;
-000028b0: 2039 30c2 b02c 202d 30c2 b02c 2030 c2b0   90.., -0.., 0..
-000028c0: 2920 e28a 9520 527a 2871 3629 2020 2020  ) ... Rz(q6)    
-000028d0: 2020 2020 e294 820a 09e2 9482 2020 2038      ........   8
-000028e0: 20e2 9482 2040 7061 6e64 615f 6c69 6e6b   ... @panda_link
-000028f0: 3820 e294 8220 2020 2020 2020 e294 8220  8 ...       ... 
-00002900: 7061 6e64 615f 6c69 6e6b 3720 e294 8220  panda_link7 ... 
-00002910: 5345 3328 302c 2030 2c20 302e 3130 3729  SE3(0, 0, 0.107)
-00002920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002930: 2020 2020 2020 2020 2020 2020 2020 20e2                 .
-00002940: 9482 0a09 e294 94e2 9480 e294 80e2 9480  ................
-00002950: e294 80e2 9480 e294 b4e2 9480 e294 80e2  ................
-00002960: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002970: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002980: e294 80e2 94b4 e294 80e2 9480 e294 80e2  ................
-00002990: 9480 e294 80e2 9480 e294 80e2 94b4 e294  ................
-000029a0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000029b0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000029c0: 9480 e294 80e2 94b4 e294 80e2 9480 e294  ................
-000029d0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000029e0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000029f0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002a00: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002a10: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002a20: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002a30: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002a40: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002a50: 9480 e294 80e2 9480 e294 980a 0a09 e294  ................
-00002a60: 8ce2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002a70: e294 ace2 9480 e294 80e2 9480 e294 80e2  ................
-00002a80: 9480 e294 ace2 9480 e294 80e2 9480 e294  ................
-00002a90: 80e2 9480 e294 80e2 9480 e294 80e2 94ac  ................
-00002aa0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002ab0: 94ac e294 80e2 9480 e294 80e2 9480 e294  ................
-00002ac0: 80e2 9480 e294 80e2 94ac e294 80e2 9480  ................
-00002ad0: e294 80e2 9480 e294 80e2 94ac e294 80e2  ................
-00002ae0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002af0: 80e2 94ac e294 80e2 9480 e294 80e2 9480  ................
-00002b00: e294 80e2 9480 e294 900a 09e2 9482 6e61  ..............na
-00002b10: 6d65 20e2 9482 2071 3020 20e2 9482 2071  me ... q0  ... q
-00002b20: 3120 2020 2020 e294 8220 7132 2020 e294  1     ... q2  ..
-00002b30: 8220 7133 2020 2020 e294 8220 7134 2020  . q3    ... q4  
-00002b40: e294 8220 7135 2020 2020 e294 8220 7136  ... q5    ... q6
-00002b50: 2020 20e2 9482 0a09 e294 9ce2 9480 e294     .............
-00002b60: 80e2 9480 e294 80e2 9480 e294 bce2 9480  ................
-00002b70: e294 80e2 9480 e294 80e2 9480 e294 bce2  ................
-00002b80: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002b90: 80e2 9480 e294 80e2 94bc e294 80e2 9480  ................
-00002ba0: e294 80e2 9480 e294 80e2 94bc e294 80e2  ................
-00002bb0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002bc0: 80e2 94bc e294 80e2 9480 e294 80e2 9480  ................
-00002bd0: e294 80e2 94bc e294 80e2 9480 e294 80e2  ................
-00002be0: 9480 e294 80e2 9480 e294 80e2 94bc e294  ................
-00002bf0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002c00: e294 a40a 09e2 9482 2020 7172 20e2 9482  ........  qr ...
-00002c10: 2020 30c2 b020 e294 8220 2d31 372e 32c2    0.. ... -17.2.
-00002c20: b020 e294 8220 2030 c2b0 20e2 9482 202d  . ...  0.. ... -
-00002c30: 3132 36c2 b020 e294 8220 2030 c2b0 20e2  126.. ...  0.. .
-00002c40: 9482 2020 3131 35c2 b020 e294 8220 2034  ..  115.. ...  4
-00002c50: 35c2 b020 e294 820a 09e2 9482 2020 717a  5.. ........  qz
-00002c60: 20e2 9482 2020 30c2 b020 e294 8220 2030   ...  0.. ...  0
-00002c70: c2b0 2020 2020 e294 8220 2030 c2b0 20e2  ..    ...  0.. .
-00002c80: 9482 2020 30c2 b020 2020 e294 8220 2030  ..  0..   ...  0
-00002c90: c2b0 20e2 9482 2020 30c2 b020 2020 e294  .. ...  0..   ..
-00002ca0: 8220 2030 c2b0 2020 e294 820a 09e2 9494  .  0..  ........
-00002cb0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002cc0: 94b4 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002cd0: 80e2 94b4 e294 80e2 9480 e294 80e2 9480  ................
-00002ce0: e294 80e2 9480 e294 80e2 9480 e294 b4e2  ................
-00002cf0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002d00: b4e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002d10: e294 80e2 9480 e294 b4e2 9480 e294 80e2  ................
-00002d20: 9480 e294 80e2 9480 e294 b4e2 9480 e294  ................
-00002d30: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002d40: e294 b4e2 9480 e294 80e2 9480 e294 80e2  ................
-00002d50: 9480 e294 80e2 9498 0a60 6060 0a0a 5468  .........```..Th
-00002d60: 6520 7379 6d62 6f6c 2060 4060 2069 6e64  e symbol `@` ind
-00002d70: 6963 6174 6573 2074 6865 206c 696e 6b20  icates the link 
-00002d80: 6173 2061 6e20 656e 642d 6566 6665 6374  as an end-effect
-00002d90: 6f72 2c20 6120 6c65 6166 206e 6f64 6520  or, a leaf node 
-00002da0: 696e 2074 6865 2072 6967 6964 2d62 6f64  in the rigid-bod
-00002db0: 790a 7472 6565 2028 5079 7468 6f6e 2070  y.tree (Python p
-00002dc0: 726f 6d70 7473 2061 7265 206e 6f74 2073  rompts are not s
-00002dd0: 686f 776e 2074 6f20 6d61 6b65 2069 7420  hown to make it 
-00002de0: 6561 7379 2074 6f20 636f 7079 2b70 6173  easy to copy+pas
-00002df0: 7465 2074 6865 2063 6f64 652c 2063 6f6e  te the code, con
-00002e00: 736f 6c65 206f 7574 7075 7420 6973 2069  sole output is i
-00002e10: 6e64 656e 7465 6429 2e0a 5765 2077 696c  ndented)..We wil
-00002e20: 6c20 636f 6d70 7574 6520 7468 6520 666f  l compute the fo
-00002e30: 7277 6172 6420 6b69 6e65 6d61 7469 6373  rward kinematics
-00002e40: 206e 6578 740a 0a60 6060 0a54 6520 3d20   next..```.Te = 
-00002e50: 726f 626f 742e 666b 696e 6528 726f 626f  robot.fkine(robo
-00002e60: 742e 7172 2920 2023 2066 6f72 7761 7264  t.qr)  # forward
-00002e70: 206b 696e 656d 6174 6963 730a 7072 696e   kinematics.prin
-00002e80: 7428 5465 290a 0a09 302e 3939 3520 2020  t(Te)...0.995   
-00002e90: 2020 3020 2020 2020 2020 2020 302e 3039    0         0.09
-00002ea0: 3938 3320 2020 302e 3438 340a 0930 2020  983   0.484..0  
-00002eb0: 2020 2020 2020 2d31 2020 2020 2020 2020        -1        
-00002ec0: 2030 2020 2020 2020 2020 2030 0a09 302e   0         0..0.
-00002ed0: 3039 3938 3320 2020 3020 2020 2020 2020  09983   0       
-00002ee0: 202d 302e 3939 3520 2020 2020 302e 3431   -0.995     0.41
-00002ef0: 3236 0a09 3020 2020 2020 2020 2020 3020  26..0         0 
-00002f00: 2020 2020 2020 2020 3020 2020 2020 2020          0       
-00002f10: 2020 310a 6060 600a 0a57 6520 6361 6e20    1.```..We can 
-00002f20: 736f 6c76 6520 696e 7665 7273 6520 6b69  solve inverse ki
-00002f30: 6e65 6d61 7469 6373 2076 6572 7920 6561  nematics very ea
-00002f40: 7369 6c79 2e20 5765 2066 6972 7374 2063  sily. We first c
-00002f50: 686f 6f73 6520 616e 2053 4528 3329 2070  hoose an SE(3) p
-00002f60: 6f73 650a 6465 6669 6e65 6420 696e 2074  ose.defined in t
-00002f70: 6572 6d73 206f 6620 706f 7369 7469 6f6e  erms of position
-00002f80: 2061 6e64 206f 7269 656e 7461 7469 6f6e   and orientation
-00002f90: 2028 656e 642d 6566 6665 6374 6f72 207a   (end-effector z
-00002fa0: 2d61 7869 7320 646f 776e 2028 413d 2d5a  -axis down (A=-Z
-00002fb0: 2920 616e 6420 6669 6e67 6572 0a6f 7269  ) and finger.ori
-00002fc0: 656e 7461 7469 6f6e 2070 6172 616c 6c65  entation paralle
-00002fd0: 6c20 746f 2079 2d61 7869 7320 284f 3d2b  l to y-axis (O=+
-00002fe0: 5929 292e 0a0a 6060 6070 7974 686f 6e0a  Y))...```python.
-00002ff0: 6672 6f6d 2073 7061 7469 616c 6d61 7468  from spatialmath
-00003000: 2069 6d70 6f72 7420 5345 330a 0a54 6570   import SE3..Tep
-00003010: 203d 2053 4533 2e54 7261 6e73 2830 2e36   = SE3.Trans(0.6
-00003020: 2c20 2d30 2e33 2c20 302e 3129 202a 2053  , -0.3, 0.1) * S
-00003030: 4533 2e4f 4128 5b30 2c20 312c 2030 5d2c  E3.OA([0, 1, 0],
-00003040: 205b 302c 2030 2c20 2d31 5d29 0a73 6f6c   [0, 0, -1]).sol
-00003050: 203d 2072 6f62 6f74 2e69 6b5f 6c6d 5f63   = robot.ik_lm_c
-00003060: 6861 6e28 5465 7029 2020 2020 2020 2020  han(Tep)        
-00003070: 2023 2073 6f6c 7665 2049 4b0a 7072 696e   # solve IK.prin
-00003080: 7428 736f 6c29 0a0a 0928 6172 7261 7928  t(sol)...(array(
-00003090: 5b20 302e 3230 3539 3238 3135 2c20 2030  [ 0.20592815,  0
-000030a0: 2e38 3636 3039 3438 312c 202d 302e 3739  .86609481, -0.79
-000030b0: 3437 3332 3036 2c20 2d31 2e36 3832 3534  473206, -1.68254
-000030c0: 3739 342c 2020 302e 3734 3837 3239 3135  794,  0.74872915
-000030d0: 2c0a 0909 0932 2e32 3137 3634 3734 362c  ,....2.21764746,
-000030e0: 202d 302e 3130 3235 3536 3036 5d29 2c20   -0.10255606]), 
-000030f0: 312c 2031 3134 2c20 372c 2032 2e38 3930  1, 114, 7, 2.890
-00003100: 3136 3430 3537 3233 3032 3238 652d 3037  164057230228e-07
-00003110: 290a 0a71 5f70 6963 6b75 7020 3d20 736f  )..q_pickup = so
-00003120: 6c5b 305d 0a70 7269 6e74 2872 6f62 6f74  l[0].print(robot
-00003130: 2e66 6b69 6e65 2871 5f70 6963 6b75 7029  .fkine(q_pickup)
-00003140: 2920 2020 2023 2046 4b20 7368 6f77 7320  )    # FK shows 
-00003150: 7468 6174 2064 6573 6972 6564 2065 6e64  that desired end
-00003160: 2d65 6666 6563 746f 7220 706f 7365 2077  -effector pose w
-00003170: 6173 2061 6368 6965 7665 640a 0a09 2031  as achieved... 1
-00003180: 2020 2020 2020 2020 202d 382e 3931 3365           -8.913e
-00003190: 2d30 3520 202d 302e 3030 3033 3333 3420  -05  -0.0003334 
-000031a0: 2030 2e35 3939 360a 092d 382e 3932 3965   0.5996..-8.929e
-000031b0: 2d30 3520 2d31 2020 2020 2020 2020 2020  -05 -1          
-000031c0: 2d30 2e30 3030 3439 3132 202d 302e 3239  -0.0004912 -0.29
-000031d0: 3938 0a09 2d30 2e30 3030 3333 3334 2020  98..-0.0003334  
-000031e0: 302e 3030 3034 3931 3220 202d 3120 2020  0.0004912  -1   
-000031f0: 2020 2020 2020 2030 2e31 3030 310a 0920         0.1001.. 
-00003200: 3020 2020 2020 2020 2020 2030 2020 2020  0          0    
-00003210: 2020 2020 2020 2030 2020 2020 2020 2020         0        
-00003220: 2020 310a 6060 600a 0a57 6520 6361 6e20    1.```..We can 
-00003230: 616e 696d 6174 6520 6120 7061 7468 2066  animate a path f
-00003240: 726f 6d20 7468 6520 7265 6164 7920 706f  rom the ready po
-00003250: 7365 2060 7172 6020 636f 6e66 6967 7572  se `qr` configur
-00003260: 6174 696f 6e20 746f 2074 6869 7320 7069  ation to this pi
-00003270: 636b 7570 2063 6f6e 6669 6775 7261 7469  ckup configurati
-00003280: 6f6e 0a0a 6060 6070 7974 686f 6e0a 7174  on..```python.qt
-00003290: 203d 2072 7462 2e6a 7472 616a 2872 6f62   = rtb.jtraj(rob
-000032a0: 6f74 2e71 722c 2071 5f70 6963 6b75 702c  ot.qr, q_pickup,
-000032b0: 2035 3029 0a72 6f62 6f74 2e70 6c6f 7428   50).robot.plot(
-000032c0: 7174 2e71 2c20 6261 636b 656e 643d 2770  qt.q, backend='p
-000032d0: 7970 6c6f 7427 2c20 6d6f 7669 653d 2770  yplot', movie='p
-000032e0: 616e 6461 312e 6769 6627 290a 6060 600a  anda1.gif').```.
-000032f0: 0a3c 7020 616c 6967 6e3d 2263 656e 7465  .<p align="cente
-00003300: 7222 3e0a 093c 696d 6720 7372 633d 222e  r">..<img src=".
-00003310: 2f64 6f63 732f 6669 6773 2f70 616e 6461  /docs/figs/panda
-00003320: 312e 6769 6622 3e0a 3c2f 703e 0a0a 7768  1.gif">.</p>..wh
-00003330: 6572 6520 7765 2068 6176 6520 7370 6563  ere we have spec
-00003340: 6966 6965 6420 7468 6520 6d61 7470 6c6f  ified the matplo
-00003350: 746c 6962 2060 7079 706c 6f74 6020 6261  tlib `pyplot` ba
-00003360: 636b 656e 642e 2042 6c75 6520 6172 726f  ckend. Blue arro
-00003370: 7773 2073 686f 7720 7468 6520 6a6f 696e  ws show the join
-00003380: 7420 6178 6573 2061 6e64 2074 6865 2063  t axes and the c
-00003390: 6f6c 6f75 7265 6420 6672 616d 6520 7368  oloured frame sh
-000033a0: 6f77 7320 7468 6520 656e 642d 6566 6665  ows the end-effe
-000033b0: 6374 6f72 2070 6f73 652e 0a0a 5765 2063  ctor pose...We c
-000033c0: 616e 2061 6c73 6f20 706c 6f74 2074 6865  an also plot the
-000033d0: 2074 7261 6a65 6374 6f72 7920 696e 2074   trajectory in t
-000033e0: 6865 2053 7769 6674 2073 696d 756c 6174  he Swift simulat
-000033f0: 6f72 2028 6120 6272 6f77 7365 722d 6261  or (a browser-ba
-00003400: 7365 6420 3364 2d73 696d 756c 6174 696f  sed 3d-simulatio
-00003410: 6e20 656e 7669 726f 6e6d 656e 7420 6275  n environment bu
-00003420: 696c 7420 746f 2077 6f72 6b20 7769 7468  ilt to work with
-00003430: 2074 6865 2054 6f6f 6c62 6f78 290a 0a60   the Toolbox)..`
-00003440: 6060 7079 7468 6f6e 0a72 6f62 6f74 2e70  ``python.robot.p
-00003450: 6c6f 7428 7174 2e71 290a 6060 600a 0a3c  lot(qt.q).```..<
-00003460: 7020 616c 6967 6e3d 2263 656e 7465 7222  p align="center"
-00003470: 3e0a 093c 696d 6720 7372 633d 222e 2f64  >..<img src="./d
-00003480: 6f63 732f 6669 6773 2f70 616e 6461 322e  ocs/figs/panda2.
-00003490: 6769 6622 3e0a 3c2f 703e 0a0a 5765 2063  gif">.</p>..We c
-000034a0: 616e 2061 6c73 6f20 6578 7065 7269 6d65  an also experime
-000034b0: 6e74 2077 6974 6820 7665 6c6f 6369 7479  nt with velocity
-000034c0: 2063 6f6e 7472 6f6c 6c65 7273 2069 6e20   controllers in 
-000034d0: 5377 6966 742e 2048 6572 6520 6973 2061  Swift. Here is a
-000034e0: 2072 6573 6f6c 7665 642d 7261 7465 206d   resolved-rate m
-000034f0: 6f74 696f 6e20 636f 6e74 726f 6c20 6578  otion control ex
-00003500: 616d 706c 650a 0a60 6060 7079 7468 6f6e  ample..```python
-00003510: 0a69 6d70 6f72 7420 7377 6966 740a 696d  .import swift.im
-00003520: 706f 7274 2072 6f62 6f74 6963 7374 6f6f  port roboticstoo
-00003530: 6c62 6f78 2061 7320 7270 0a69 6d70 6f72  lbox as rp.impor
-00003540: 7420 7370 6174 6961 6c6d 6174 6820 6173  t spatialmath as
-00003550: 2073 6d0a 696d 706f 7274 206e 756d 7079   sm.import numpy
-00003560: 2061 7320 6e70 0a0a 656e 7620 3d20 7377   as np..env = sw
-00003570: 6966 742e 5377 6966 7428 290a 656e 762e  ift.Swift().env.
-00003580: 6c61 756e 6368 2872 6561 6c74 696d 653d  launch(realtime=
-00003590: 5472 7565 290a 0a70 616e 6461 203d 2072  True)..panda = r
-000035a0: 702e 6d6f 6465 6c73 2e50 616e 6461 2829  p.models.Panda()
-000035b0: 0a70 616e 6461 2e71 203d 2070 616e 6461  .panda.q = panda
-000035c0: 2e71 720a 0a54 6570 203d 2070 616e 6461  .qr..Tep = panda
-000035d0: 2e66 6b69 6e65 2870 616e 6461 2e71 2920  .fkine(panda.q) 
-000035e0: 2a20 736d 2e53 4533 2e54 7261 6e73 2830  * sm.SE3.Trans(0
-000035f0: 2e32 2c20 302e 322c 2030 2e34 3529 0a0a  .2, 0.2, 0.45)..
-00003600: 6172 7269 7665 6420 3d20 4661 6c73 650a  arrived = False.
-00003610: 656e 762e 6164 6428 7061 6e64 6129 0a0a  env.add(panda)..
-00003620: 6474 203d 2030 2e30 350a 0a77 6869 6c65  dt = 0.05..while
-00003630: 206e 6f74 2061 7272 6976 6564 3a0a 0a20   not arrived:.. 
-00003640: 2020 2076 2c20 6172 7269 7665 6420 3d20     v, arrived = 
-00003650: 7270 2e70 5f73 6572 766f 2870 616e 6461  rp.p_servo(panda
-00003660: 2e66 6b69 6e65 2870 616e 6461 2e71 292c  .fkine(panda.q),
-00003670: 2054 6570 2c20 3129 0a20 2020 2070 616e   Tep, 1).    pan
-00003680: 6461 2e71 6420 3d20 6e70 2e6c 696e 616c  da.qd = np.linal
-00003690: 672e 7069 6e76 2870 616e 6461 2e6a 6163  g.pinv(panda.jac
-000036a0: 6f62 6528 7061 6e64 612e 7129 2920 4020  obe(panda.q)) @ 
-000036b0: 760a 2020 2020 656e 762e 7374 6570 2864  v.    env.step(d
-000036c0: 7429 0a0a 2320 556e 636f 6d6d 656e 7420  t)..# Uncomment 
-000036d0: 746f 2073 746f 7020 7468 6520 6272 6f77  to stop the brow
-000036e0: 7365 7220 7461 6220 6672 6f6d 2063 6c6f  ser tab from clo
-000036f0: 7369 6e67 0a23 2065 6e76 2e68 6f6c 6428  sing.# env.hold(
-00003700: 290a 6060 600a 0a3c 7020 616c 6967 6e3d  ).```..<p align=
-00003710: 2263 656e 7465 7222 3e0a 093c 696d 6720  "center">..<img 
-00003720: 7372 633d 222e 2f64 6f63 732f 6669 6773  src="./docs/figs
-00003730: 2f70 616e 6461 332e 6769 6622 3e0a 3c2f  /panda3.gif">.</
-00003740: 703e 0a0a 2323 2320 5275 6e20 736f 6d65  p>..### Run some
-00003750: 2065 7861 6d70 6c65 730a 0a54 6865 205b   examples..The [
-00003760: 606e 6f74 6562 6f6f 6b73 605d 2868 7474  `notebooks`](htt
-00003770: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00003780: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
-00003790: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
-000037a0: 6f6e 2f74 7265 652f 6d61 7374 6572 2f6e  on/tree/master/n
-000037b0: 6f74 6562 6f6f 6b73 2920 666f 6c64 6572  otebooks) folder
-000037c0: 2063 6f6e 7461 696e 7320 736f 6d65 2074   contains some t
-000037d0: 7574 6f72 6961 6c20 4a75 7079 7465 7220  utorial Jupyter 
-000037e0: 6e6f 7465 626f 6f6b 7320 7768 6963 6820  notebooks which 
-000037f0: 796f 7520 6361 6e20 6272 6f77 7365 206f  you can browse o
-00003800: 6e20 4769 7448 7562 2e20 4164 6469 7469  n GitHub. Additi
-00003810: 6f6e 616c 6c79 2c20 6861 7665 2061 206c  onally, have a l
-00003820: 6f6f 6b20 696e 2074 6865 205b 6065 7861  ook in the [`exa
-00003830: 6d70 6c65 7360 5d28 6874 7470 733a 2f2f  mples`](https://
-00003840: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
-00003850: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
-00003860: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 7472  oolbox-python/tr
-00003870: 6565 2f6d 6173 7465 722f 726f 626f 7469  ee/master/roboti
-00003880: 6373 746f 6f6c 626f 782f 6578 616d 706c  cstoolbox/exampl
-00003890: 6573 2920 666f 6c64 6572 2066 6f72 206d  es) folder for m
-000038a0: 616e 7920 7265 6164 7920 746f 2072 756e  any ready to run
-000038b0: 2065 7861 6d70 6c65 732e 0a0a 3c62 723e   examples...<br>
-000038c0: 0a0a 3c61 2069 643d 2735 273e 3c2f 613e  ..<a id='5'></a>
-000038d0: 0a0a 2323 2054 6f6f 6c62 6f78 2052 6573  ..## Toolbox Res
-000038e0: 6561 7263 6820 4170 706c 6963 6174 696f  earch Applicatio
-000038f0: 6e73 0a0a 5468 6520 746f 6f6c 626f 7820  ns..The toolbox 
-00003900: 6973 2069 6e63 7265 6469 626c 7920 7573  is incredibly us
-00003910: 6566 756c 2066 6f72 2064 6576 656c 6f70  eful for develop
-00003920: 696e 6720 616e 6420 7072 6f74 6f74 7970  ing and prototyp
-00003930: 696e 6720 616c 676f 7269 7468 6d73 2066  ing algorithms f
-00003940: 6f72 2072 6573 6561 7263 682c 2074 6861  or research, tha
-00003950: 6e6b 7320 746f 2074 6865 2065 7868 6175  nks to the exhau
-00003960: 7374 6976 6520 7365 7420 6f66 2077 656c  stive set of wel
-00003970: 6c20 646f 6375 6d65 6e74 6564 2061 6e64  l documented and
-00003980: 206d 6174 7572 6520 726f 626f 7469 6320   mature robotic 
-00003990: 6675 6e63 7469 6f6e 7320 6578 706f 7365  functions expose
-000039a0: 6420 7468 726f 7567 6820 636c 6561 6e20  d through clean 
-000039b0: 616e 6420 7061 696e 6c65 7373 2041 5049  and painless API
-000039c0: 732e 2041 6464 6974 696f 6e61 6c6c 792c  s. Additionally,
-000039d0: 2074 6865 2065 6173 6520 6174 2077 6869   the ease at whi
-000039e0: 6368 2061 2075 7365 7220 6361 6e20 7669  ch a user can vi
-000039f0: 7375 616c 697a 6520 7468 6569 7220 616c  sualize their al
-00003a00: 676f 7269 7468 6d20 7375 7070 6f72 7473  gorithm supports
-00003a10: 2061 2072 6170 6964 2070 726f 746f 7479   a rapid prototy
-00003a20: 7069 6e67 2070 6172 6164 6967 6d2e 0a0a  ping paradigm...
-00003a30: 2323 2320 5075 626c 6963 6174 696f 6e20  ### Publication 
-00003a40: 4c69 7374 0a0a 4a2e 2048 6176 696c 616e  List..J. Havilan
-00003a50: 642c 204e 2e20 53c3 bc6e 6465 7268 6175  d, N. S..nderhau
-00003a60: 6620 616e 6420 502e 2043 6f72 6b65 2c20  f and P. Corke, 
-00003a70: 222a 2a41 2048 6f6c 6973 7469 6320 4170  "**A Holistic Ap
-00003a80: 7072 6f61 6368 2074 6f20 5265 6163 7469  proach to Reacti
-00003a90: 7665 204d 6f62 696c 6520 4d61 6e69 7075  ve Mobile Manipu
-00003aa0: 6c61 7469 6f6e 2a2a 2c22 2069 6e20 5f49  lation**," in _I
-00003ab0: 4545 4520 526f 626f 7469 6373 2061 6e64  EEE Robotics and
-00003ac0: 2041 7574 6f6d 6174 696f 6e20 4c65 7474   Automation Lett
-00003ad0: 6572 735f 2c20 646f 693a 2031 302e 3131  ers_, doi: 10.11
-00003ae0: 3039 2f4c 5241 2e32 3032 322e 3331 3436  09/LRA.2022.3146
-00003af0: 3535 342e 2049 6e20 7468 6520 7669 6465  554. In the vide
-00003b00: 6f2c 2074 6865 2072 6f62 6f74 2069 7320  o, the robot is 
-00003b10: 636f 6e74 726f 6c6c 6564 2075 7369 6e67  controlled using
-00003b20: 2074 6865 2052 6f62 6f74 6963 7320 746f   the Robotics to
-00003b30: 6f6c 626f 7820 666f 7220 5079 7468 6f6e  olbox for Python
-00003b40: 2061 6e64 2066 6561 7475 7265 7320 6120   and features a 
-00003b50: 7265 636f 7264 696e 6720 6672 6f6d 2074  recording from t
-00003b60: 6865 205b 5377 6966 745d 2868 7474 7073  he [Swift](https
-00003b70: 3a2f 2f67 6974 6875 622e 636f 6d2f 6a68  ://github.com/jh
-00003b80: 6176 6c2f 7377 6966 7429 2053 696d 756c  avl/swift) Simul
-00003b90: 6174 6f72 2e0a 0a5b 5b41 7278 6976 2050  ator...[[Arxiv P
-00003ba0: 6170 6572 5d28 6874 7470 733a 2f2f 6172  aper](https://ar
-00003bb0: 7869 762e 6f72 672f 6162 732f 3231 3039  xiv.org/abs/2109
-00003bc0: 2e30 3437 3439 295d 205b 5b49 4545 4520  .04749)] [[IEEE 
-00003bd0: 5870 6c6f 7265 5d28 6874 7470 733a 2f2f  Xplore](https://
-00003be0: 6965 6565 7870 6c6f 7265 2e69 6565 652e  ieeexplore.ieee.
-00003bf0: 6f72 672f 6162 7374 7261 6374 2f64 6f63  org/abstract/doc
-00003c00: 756d 656e 742f 3936 3935 3239 3829 5d20  ument/9695298)] 
-00003c10: 5b5b 5072 6f6a 6563 7420 5765 6273 6974  [[Project Websit
-00003c20: 655d 2868 7474 7073 3a2f 2f6a 6861 766c  e](https://jhavl
-00003c30: 2e67 6974 6875 622e 696f 2f68 6f6c 6973  .github.io/holis
-00003c40: 7469 632f 295d 205b 5b56 6964 656f 5d28  tic/)] [[Video](
-00003c50: 6874 7470 733a 2f2f 796f 7574 752e 6265  https://youtu.be
-00003c60: 2f2d 4458 4251 5065 4c49 5634 295d 205b  /-DXBQPeLIV4)] [
-00003c70: 5b43 6f64 6520 4578 616d 706c 655d 2868  [Code Example](h
-00003c80: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00003c90: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-00003ca0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00003cb0: 7468 6f6e 2f62 6c6f 622f 6d61 7374 6572  thon/blob/master
-00003cc0: 2f72 6f62 6f74 6963 7374 6f6f 6c62 6f78  /roboticstoolbox
-00003cd0: 2f65 7861 6d70 6c65 732f 686f 6c69 7374  /examples/holist
-00003ce0: 6963 5f6d 6d5f 6e6f 6e5f 686f 6c6f 6e6f  ic_mm_non_holono
-00003cf0: 6d69 632e 7079 295d 0a0a 3c70 3e0a 2020  mic.py)]..<p>.  
-00003d00: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
-00003d10: 2f79 6f75 7475 2e62 652f 2d44 5842 5150  /youtu.be/-DXBQP
-00003d20: 654c 4956 3422 3e0a 2020 2020 3c69 6d67  eLIV4">.    <img
-00003d30: 2073 7263 3d22 6874 7470 733a 2f2f 6769   src="https://gi
-00003d40: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
-00003d50: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
-00003d60: 6c62 6f78 2d70 7974 686f 6e2f 7261 772f  lbox-python/raw/
-00003d70: 6d61 7374 6572 2f64 6f63 732f 6669 6773  master/docs/figs
-00003d80: 2f68 6f6c 6973 7469 635f 796f 7574 7562  /holistic_youtub
-00003d90: 652e 706e 6722 2077 6964 7468 3d22 3536  e.png" width="56
-00003da0: 3022 3e0a 2020 3c2f 613e 0a3c 2f70 3e0a  0">.  </a>.</p>.
-00003db0: 0a4a 2e20 4861 7669 6c61 6e64 2061 6e64  .J. Haviland and
-00003dc0: 2050 2e20 436f 726b 652c 2022 2a2a 4e45   P. Corke, "**NE
-00003dd0: 4f3a 2041 204e 6f76 656c 2045 7870 6564  O: A Novel Exped
-00003de0: 6974 696f 7573 204f 7074 696d 6973 6174  itious Optimisat
-00003df0: 696f 6e20 416c 676f 7269 7468 6d20 666f  ion Algorithm fo
-00003e00: 7220 5265 6163 7469 7665 204d 6f74 696f  r Reactive Motio
-00003e10: 6e20 436f 6e74 726f 6c20 6f66 204d 616e  n Control of Man
-00003e20: 6970 756c 6174 6f72 732a 2a2c 2220 696e  ipulators**," in
-00003e30: 205f 4945 4545 2052 6f62 6f74 6963 7320   _IEEE Robotics 
-00003e40: 616e 6420 4175 746f 6d61 7469 6f6e 204c  and Automation L
-00003e50: 6574 7465 7273 5f2c 2064 6f69 3a20 3130  etters_, doi: 10
-00003e60: 2e31 3130 392f 4c52 412e 3230 3231 2e33  .1109/LRA.2021.3
-00003e70: 3035 3630 3630 2e20 496e 2074 6865 2076  056060. In the v
-00003e80: 6964 656f 2c20 7468 6520 726f 626f 7420  ideo, the robot 
-00003e90: 6973 2063 6f6e 7472 6f6c 6c65 6420 7573  is controlled us
-00003ea0: 696e 6720 7468 6520 526f 626f 7469 6373  ing the Robotics
-00003eb0: 2074 6f6f 6c62 6f78 2066 6f72 2050 7974   toolbox for Pyt
-00003ec0: 686f 6e20 616e 6420 6665 6174 7572 6573  hon and features
-00003ed0: 2061 2072 6563 6f72 6469 6e67 2066 726f   a recording fro
-00003ee0: 6d20 7468 6520 5b53 7769 6674 5d28 6874  m the [Swift](ht
-00003ef0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00003f00: 2f6a 6861 766c 2f73 7769 6674 2920 5369  /jhavl/swift) Si
-00003f10: 6d75 6c61 746f 722e 0a0a 5b5b 4172 7869  mulator...[[Arxi
-00003f20: 7620 5061 7065 725d 2868 7474 7073 3a2f  v Paper](https:/
-00003f30: 2f61 7278 6976 2e6f 7267 2f61 6273 2f32  /arxiv.org/abs/2
-00003f40: 3031 302e 3038 3638 3629 5d20 5b5b 4945  010.08686)] [[IE
-00003f50: 4545 2058 706c 6f72 655d 2868 7474 7073  EE Xplore](https
-00003f60: 3a2f 2f69 6565 6578 706c 6f72 652e 6965  ://ieeexplore.ie
-00003f70: 6565 2e6f 7267 2f64 6f63 756d 656e 742f  ee.org/document/
-00003f80: 3933 3433 3731 3829 5d20 5b5b 5072 6f6a  9343718)] [[Proj
-00003f90: 6563 7420 5765 6273 6974 655d 2868 7474  ect Website](htt
-00003fa0: 7073 3a2f 2f6a 6861 766c 2e67 6974 6875  ps://jhavl.githu
-00003fb0: 622e 696f 2f6e 656f 2f29 5d20 5b5b 5669  b.io/neo/)] [[Vi
-00003fc0: 6465 6f5d 2868 7474 7073 3a2f 2f79 6f75  deo](https://you
-00003fd0: 7475 2e62 652f 6a53 4c50 4a42 7238 5154  tu.be/jSLPJBr8QT
-00003fe0: 5929 5d20 5b5b 436f 6465 2045 7861 6d70  Y)] [[Code Examp
-00003ff0: 6c65 5d28 6874 7470 733a 2f2f 6769 7468  le](https://gith
-00004000: 7562 2e63 6f6d 2f70 6574 6572 636f 726b  ub.com/petercork
-00004010: 652f 726f 626f 7469 6373 2d74 6f6f 6c62  e/robotics-toolb
-00004020: 6f78 2d70 7974 686f 6e2f 626c 6f62 2f6d  ox-python/blob/m
-00004030: 6173 7465 722f 726f 626f 7469 6373 746f  aster/roboticsto
-00004040: 6f6c 626f 782f 6578 616d 706c 6573 2f6e  olbox/examples/n
-00004050: 656f 2e70 7929 5d0a 0a3c 703e 0a20 203c  eo.py)]..<p>.  <
-00004060: 6120 6872 6566 3d22 6874 7470 733a 2f2f  a href="https://
-00004070: 796f 7574 752e 6265 2f6a 534c 504a 4272  youtu.be/jSLPJBr
-00004080: 3851 5459 223e 0a20 2020 203c 696d 6720  8QTY">.    <img 
-00004090: 7372 633d 2268 7474 7073 3a2f 2f67 6974  src="https://git
-000040a0: 6875 622e 636f 6d2f 7065 7465 7263 6f72  hub.com/petercor
-000040b0: 6b65 2f72 6f62 6f74 6963 732d 746f 6f6c  ke/robotics-tool
-000040c0: 626f 782d 7079 7468 6f6e 2f72 6177 2f6d  box-python/raw/m
-000040d0: 6173 7465 722f 646f 6373 2f66 6967 732f  aster/docs/figs/
-000040e0: 6e65 6f5f 796f 7574 7562 652e 706e 6722  neo_youtube.png"
-000040f0: 2077 6964 7468 3d22 3536 3022 3e0a 2020   width="560">.  
-00004100: 3c2f 613e 0a3c 2f70 3e0a 0a2a 2a41 2050  </a>.</p>..**A P
-00004110: 7572 656c 792d 5265 6163 7469 7665 204d  urely-Reactive M
-00004120: 616e 6970 756c 6162 696c 6974 792d 4d61  anipulability-Ma
-00004130: 7869 6d69 7369 6e67 204d 6f74 696f 6e20  ximising Motion 
-00004140: 436f 6e74 726f 6c6c 6572 2a2a 2c20 4a2e  Controller**, J.
-00004150: 2048 6176 696c 616e 6420 616e 6420 502e   Haviland and P.
-00004160: 2043 6f72 6b65 2e20 496e 2074 6865 2076   Corke. In the v
-00004170: 6964 656f 2c20 7468 6520 726f 626f 7420  ideo, the robot 
-00004180: 6973 2063 6f6e 7472 6f6c 6c65 6420 7573  is controlled us
-00004190: 696e 6720 7468 6520 526f 626f 7469 6373  ing the Robotics
-000041a0: 2074 6f6f 6c62 6f78 2066 6f72 2050 7974   toolbox for Pyt
-000041b0: 686f 6e2e 0a0a 5b5b 5061 7065 725d 2868  hon...[[Paper](h
-000041c0: 7474 7073 3a2f 2f61 7278 6976 2e6f 7267  ttps://arxiv.org
-000041d0: 2f61 6273 2f32 3030 322e 3131 3930 3129  /abs/2002.11901)
-000041e0: 5d20 5b5b 5072 6f6a 6563 7420 5765 6273  ] [[Project Webs
-000041f0: 6974 655d 2868 7474 7073 3a2f 2f6a 6861  ite](https://jha
-00004200: 766c 2e67 6974 6875 622e 696f 2f6d 6d63  vl.github.io/mmc
-00004210: 2f29 5d20 5b5b 5669 6465 6f5d 2868 7474  /)] [[Video](htt
-00004220: 7073 3a2f 2f79 6f75 7475 2e62 652f 5675  ps://youtu.be/Vu
-00004230: 5f72 6350 6c61 4144 4929 5d20 5b5b 436f  _rcPlaADI)] [[Co
-00004240: 6465 2045 7861 6d70 6c65 5d28 6874 7470  de Example](http
-00004250: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f70  s://github.com/p
-00004260: 6574 6572 636f 726b 652f 726f 626f 7469  etercorke/roboti
-00004270: 6373 2d74 6f6f 6c62 6f78 2d70 7974 686f  cs-toolbox-pytho
-00004280: 6e2f 626c 6f62 2f6d 6173 7465 722f 726f  n/blob/master/ro
-00004290: 626f 7469 6373 746f 6f6c 626f 782f 6578  boticstoolbox/ex
-000042a0: 616d 706c 6573 2f6d 6d63 2e70 7929 5d0a  amples/mmc.py)].
-000042b0: 0a3c 703e 0a20 203c 6120 6872 6566 3d22  .<p>.  <a href="
-000042c0: 6874 7470 733a 2f2f 796f 7574 752e 6265  https://youtu.be
-000042d0: 2f56 755f 7263 506c 6141 4449 223e 0a20  /Vu_rcPlaADI">. 
-000042e0: 2020 203c 696d 6720 7372 633d 2268 7474     <img src="htt
-000042f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00004300: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
-00004310: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
-00004320: 6f6e 2f72 6177 2f6d 6173 7465 722f 646f  on/raw/master/do
-00004330: 6373 2f66 6967 732f 6d6d 635f 796f 7574  cs/figs/mmc_yout
-00004340: 7562 652e 706e 6722 2077 6964 7468 3d22  ube.png" width="
-00004350: 3536 3022 3e0a 2020 3c2f 613e 0a3c 2f70  560">.  </a>.</p
-00004360: 3e0a 0a3c 6272 3e0a 0a3c 6272 3e0a 0a3c  >..<br>..<br>..<
-00004370: 6120 6964 3d27 3627 3e3c 2f61 3e0a 0a23  a id='6'></a>..#
-00004380: 2320 546f 6f6c 626f 7820 4943 5241 2050  # Toolbox ICRA P
-00004390: 6170 6572 2061 6e64 2043 6974 6174 696f  aper and Citatio
-000043a0: 6e20 496e 666f 0a0a 4368 6563 6b20 6f75  n Info..Check ou
-000043b0: 7420 6f75 7220 4943 5241 2032 3032 3120  t our ICRA 2021 
-000043c0: 7061 7065 7220 6f6e 205b 4945 4545 2058  paper on [IEEE X
-000043d0: 706c 6f72 655d 2868 7474 7073 3a2f 2f69  plore](https://i
-000043e0: 6565 6578 706c 6f72 652e 6965 6565 2e6f  eeexplore.ieee.o
-000043f0: 7267 2f64 6f63 756d 656e 742f 3935 3631  rg/document/9561
-00004400: 3336 3629 206f 7220 6765 7420 7468 6520  366) or get the 
-00004410: 5044 4620 6672 6f6d 205b 5065 7465 7227  PDF from [Peter'
-00004420: 7320 7765 6273 6974 655d 2868 7474 7073  s website](https
-00004430: 3a2f 2f62 6974 2e6c 792f 3343 6863 794e  ://bit.ly/3ChcyN
-00004440: 7029 2e0a 0a49 6620 7468 6520 746f 6f6c  p)...If the tool
-00004450: 626f 7820 6865 6c70 6564 2079 6f75 2069  box helped you i
-00004460: 6e20 796f 7572 2072 6573 6561 7263 682c  n your research,
-00004470: 2070 6c65 6173 6520 6369 7465 0a0a 6060   please cite..``
-00004480: 600a 4069 6e70 726f 6365 6564 696e 6773  `.@inproceedings
-00004490: 7b72 7462 2c0a 2020 7469 746c 653d 7b4e  {rtb,.  title={N
-000044a0: 6f74 2079 6f75 7220 6772 616e 646d 6f74  ot your grandmot
-000044b0: 6865 72e2 8099 7320 746f 6f6c 626f 782d  her...s toolbox-
-000044c0: 2d74 6865 2052 6f62 6f74 6963 7320 546f  -the Robotics To
-000044d0: 6f6c 626f 7820 7265 696e 7665 6e74 6564  olbox reinvented
-000044e0: 2066 6f72 2050 7974 686f 6e7d 2c0a 2020   for Python},.  
-000044f0: 6175 7468 6f72 3d7b 436f 726b 652c 2050  author={Corke, P
-00004500: 6574 6572 2061 6e64 2048 6176 696c 616e  eter and Havilan
-00004510: 642c 204a 6573 7365 7d2c 0a20 2062 6f6f  d, Jesse},.  boo
-00004520: 6b74 6974 6c65 3d7b 3230 3231 2049 4545  ktitle={2021 IEE
-00004530: 4520 496e 7465 726e 6174 696f 6e61 6c20  E International 
-00004540: 436f 6e66 6572 656e 6365 206f 6e20 526f  Conference on Ro
-00004550: 626f 7469 6373 2061 6e64 2041 7574 6f6d  botics and Autom
-00004560: 6174 696f 6e20 2849 4352 4129 7d2c 0a20  ation (ICRA)},. 
-00004570: 2070 6167 6573 3d7b 3131 3335 372d 2d31   pages={11357--1
-00004580: 3133 3633 7d2c 0a20 2079 6561 723d 7b32  1363},.  year={2
-00004590: 3032 317d 2c0a 2020 6f72 6761 6e69 7a61  021},.  organiza
-000045a0: 7469 6f6e 3d7b 4945 4545 7d0a 7d0a 6060  tion={IEEE}.}.``
-000045b0: 600a 0a3c 6272 3e0a 0a3c 6120 6964 3d27  `..<br>..<a id='
-000045c0: 3727 3e3c 2f61 3e0a 0a23 2320 5573 696e  7'></a>..## Usin
-000045d0: 6720 7468 6520 546f 6f6c 626f 7820 696e  g the Toolbox in
-000045e0: 2079 6f75 7220 4f70 656e 2053 6f75 7263   your Open Sourc
-000045f0: 6520 436f 6465 3f0a 0a49 6620 796f 7520  e Code?..If you 
-00004600: 6172 6520 7573 696e 6720 7468 6520 546f  are using the To
-00004610: 6f6c 626f 7820 696e 2079 6f75 7220 6f70  olbox in your op
-00004620: 656e 2073 6f75 7263 6520 636f 6465 2c20  en source code, 
-00004630: 6665 656c 2066 7265 6520 746f 2061 6464  feel free to add
-00004640: 206f 7572 2062 6164 6765 2074 6f20 796f   our badge to yo
-00004650: 7572 2072 6561 646d 6521 0a0a 466f 7220  ur readme!..For 
-00004660: 7468 6520 706f 7765 7265 6420 6279 2072  the powered by r
-00004670: 6f62 6f74 6963 7320 746f 6f6c 626f 7820  obotics toolbox 
-00004680: 6261 6467 650a 0a5b 215b 506f 7765 7265  badge..[![Powere
-00004690: 6420 6279 2074 6865 2052 6f62 6f74 6963  d by the Robotic
-000046a0: 7320 546f 6f6c 626f 785d 2868 7474 7073  s Toolbox](https
-000046b0: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
-000046c0: 7263 6f6e 7465 6e74 2e63 6f6d 2f70 6574  rcontent.com/pet
-000046d0: 6572 636f 726b 652f 726f 626f 7469 6373  ercorke/robotics
-000046e0: 2d74 6f6f 6c62 6f78 2d70 7974 686f 6e2f  -toolbox-python/
-000046f0: 6d61 7374 6572 2f2e 6769 7468 7562 2f73  master/.github/s
-00004700: 7667 2f72 7462 5f70 6f77 6572 6564 2e6d  vg/rtb_powered.m
-00004710: 696e 2e73 7667 295d 2868 7474 7073 3a2f  in.svg)](https:/
-00004720: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-00004730: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00004740: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
-00004750: 0a63 6f70 7920 7468 6520 666f 6c6c 6f77  .copy the follow
-00004760: 696e 670a 0a60 6060 0a5b 215b 506f 7765  ing..```.[![Powe
-00004770: 7265 6420 6279 2074 6865 2052 6f62 6f74  red by the Robot
-00004780: 6963 7320 546f 6f6c 626f 785d 2868 7474  ics Toolbox](htt
-00004790: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
-000047a0: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f70  sercontent.com/p
-000047b0: 6574 6572 636f 726b 652f 726f 626f 7469  etercorke/roboti
-000047c0: 6373 2d74 6f6f 6c62 6f78 2d70 7974 686f  cs-toolbox-pytho
-000047d0: 6e2f 6d61 7374 6572 2f2e 6769 7468 7562  n/master/.github
-000047e0: 2f73 7667 2f72 7462 5f70 6f77 6572 6564  /svg/rtb_powered
-000047f0: 2e6d 696e 2e73 7667 295d 2868 7474 7073  .min.svg)](https
-00004800: 3a2f 2f67 6974 6875 622e 636f 6d2f 7065  ://github.com/pe
-00004810: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
-00004820: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
-00004830: 290a 6060 600a 0a46 6f72 2074 6865 2070  ).```..For the p
-00004840: 6f77 6572 6564 2062 7920 7079 7468 6f6e  owered by python
-00004850: 2072 6f62 6f74 6963 7320 6261 6467 650a   robotics badge.
-00004860: 0a5b 215b 506f 7765 7265 6420 6279 2050  .[![Powered by P
-00004870: 7974 686f 6e20 526f 626f 7469 6373 5d28  ython Robotics](
-00004880: 6874 7470 733a 2f2f 7261 772e 6769 7468  https://raw.gith
-00004890: 7562 7573 6572 636f 6e74 656e 742e 636f  ubusercontent.co
-000048a0: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-000048b0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-000048c0: 7468 6f6e 2f6d 6173 7465 722f 2e67 6974  thon/master/.git
-000048d0: 6875 622f 7376 672f 7072 5f70 6f77 6572  hub/svg/pr_power
-000048e0: 6564 2e6d 696e 2e73 7667 295d 2868 7474  ed.min.svg)](htt
-000048f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00004900: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
-00004910: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
-00004920: 6f6e 290a 0a63 6f70 7920 7468 6520 666f  on)..copy the fo
-00004930: 6c6c 6f77 696e 670a 0a60 6060 0a5b 215b  llowing..```.[![
-00004940: 506f 7765 7265 6420 6279 2050 7974 686f  Powered by Pytho
-00004950: 6e20 526f 626f 7469 6373 5d28 6874 7470  n Robotics](http
-00004960: 733a 2f2f 7261 772e 6769 7468 7562 7573  s://raw.githubus
-00004970: 6572 636f 6e74 656e 742e 636f 6d2f 7065  ercontent.com/pe
-00004980: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
-00004990: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
-000049a0: 2f6d 6173 7465 722f 2e67 6974 6875 622f  /master/.github/
-000049b0: 7376 672f 7072 5f70 6f77 6572 6564 2e6d  svg/pr_powered.m
-000049c0: 696e 2e73 7667 295d 2868 7474 7073 3a2f  in.svg)](https:/
-000049d0: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-000049e0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-000049f0: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
-00004a00: 6060 600a 0a3c 6272 3e0a 0a3c 6120 6964  ```..<br>..<a id
-00004a10: 3d27 3827 3e3c 2f61 3e0a 0a23 2320 436f  ='8'></a>..## Co
-00004a20: 6d6d 6f6e 2049 7373 7565 7320 616e 6420  mmon Issues and 
-00004a30: 536f 6c75 7469 6f6e 730a 0a53 6565 2074  Solutions..See t
-00004a40: 6865 2063 6f6d 6d6f 6e20 6973 7375 6573  he common issues
-00004a50: 2077 6974 6820 6669 7865 7320 5b68 6572   with fixes [her
-00004a60: 655d 2868 7474 7073 3a2f 2f67 6974 6875  e](https://githu
-00004a70: 622e 636f 6d2f 7065 7465 7263 6f72 6b65  b.com/petercorke
-00004a80: 2f72 6f62 6f74 6963 732d 746f 6f6c 626f  /robotics-toolbo
-00004a90: 782d 7079 7468 6f6e 2f77 696b 692f 436f  x-python/wiki/Co
-00004aa0: 6d6d 6f6e 2d49 7373 7565 7329 2e0a       mmon-Issues)..
+00002860: 2020 2020 2020 2020 e294 820a 09e2 9494          ........
+00002870: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002880: 94b4 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002890: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000028a0: e294 80e2 9480 e294 80e2 9480 e294 b4e2  ................
+000028b0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000028c0: 80e2 9480 e294 b4e2 9480 e294 80e2 9480  ................
+000028d0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000028e0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000028f0: b4e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002900: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002910: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002920: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002930: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002940: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002950: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002960: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002970: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002980: 80e2 9498 0a0a 09e2 948c e294 80e2 9480  ................
+00002990: e294 80e2 9480 e294 80e2 94ac e294 80e2  ................
+000029a0: 9480 e294 80e2 9480 e294 80e2 94ac e294  ................
+000029b0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000029c0: e294 80e2 9480 e294 ace2 9480 e294 80e2  ................
+000029d0: 9480 e294 80e2 9480 e294 ace2 9480 e294  ................
+000029e0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000029f0: e294 ace2 9480 e294 80e2 9480 e294 80e2  ................
+00002a00: 9480 e294 ace2 9480 e294 80e2 9480 e294  ................
+00002a10: 80e2 9480 e294 80e2 9480 e294 ace2 9480  ................
+00002a20: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002a30: 9490 0a09 e294 826e 616d 6520 e294 8220  .......name ... 
+00002a40: 7130 2020 e294 8220 7131 2020 2020 20e2  q0  ... q1     .
+00002a50: 9482 2071 3220 20e2 9482 2071 3320 2020  .. q2  ... q3   
+00002a60: 20e2 9482 2071 3420 20e2 9482 2071 3520   ... q4  ... q5 
+00002a70: 2020 20e2 9482 2071 3620 2020 e294 820a     ... q6   ....
+00002a80: 09e2 949c e294 80e2 9480 e294 80e2 9480  ................
+00002a90: e294 80e2 94bc e294 80e2 9480 e294 80e2  ................
+00002aa0: 9480 e294 80e2 94bc e294 80e2 9480 e294  ................
+00002ab0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002ac0: e294 bce2 9480 e294 80e2 9480 e294 80e2  ................
+00002ad0: 9480 e294 bce2 9480 e294 80e2 9480 e294  ................
+00002ae0: 80e2 9480 e294 80e2 9480 e294 bce2 9480  ................
+00002af0: e294 80e2 9480 e294 80e2 9480 e294 bce2  ................
+00002b00: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002b10: 80e2 9480 e294 bce2 9480 e294 80e2 9480  ................
+00002b20: e294 80e2 9480 e294 80e2 94a4 0a09 e294  ................
+00002b30: 8220 2071 7220 e294 8220 2030 c2b0 20e2  .  qr ...  0.. .
+00002b40: 9482 202d 3137 2e32 c2b0 20e2 9482 2020  .. -17.2.. ...  
+00002b50: 30c2 b020 e294 8220 2d31 3236 c2b0 20e2  0.. ... -126.. .
+00002b60: 9482 2020 30c2 b020 e294 8220 2031 3135  ..  0.. ...  115
+00002b70: c2b0 20e2 9482 2020 3435 c2b0 20e2 9482  .. ...  45.. ...
+00002b80: 0a09 e294 8220 2071 7a20 e294 8220 2030  .....  qz ...  0
+00002b90: c2b0 20e2 9482 2020 30c2 b020 2020 20e2  .. ...  0..    .
+00002ba0: 9482 2020 30c2 b020 e294 8220 2030 c2b0  ..  0.. ...  0..
+00002bb0: 2020 20e2 9482 2020 30c2 b020 e294 8220     ...  0.. ... 
+00002bc0: 2030 c2b0 2020 20e2 9482 2020 30c2 b020   0..   ...  0.. 
+00002bd0: 20e2 9482 0a09 e294 94e2 9480 e294 80e2   ...............
+00002be0: 9480 e294 80e2 9480 e294 b4e2 9480 e294  ................
+00002bf0: 80e2 9480 e294 80e2 9480 e294 b4e2 9480  ................
+00002c00: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002c10: 9480 e294 80e2 94b4 e294 80e2 9480 e294  ................
+00002c20: 80e2 9480 e294 80e2 94b4 e294 80e2 9480  ................
+00002c30: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002c40: 94b4 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002c50: 80e2 94b4 e294 80e2 9480 e294 80e2 9480  ................
+00002c60: e294 80e2 9480 e294 80e2 94b4 e294 80e2  ................
+00002c70: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002c80: 980a 6060 600a 0a54 6865 2073 796d 626f  ..```..The symbo
+00002c90: 6c20 6040 6020 696e 6469 6361 7465 7320  l `@` indicates 
+00002ca0: 7468 6520 6c69 6e6b 2061 7320 616e 2065  the link as an e
+00002cb0: 6e64 2d65 6666 6563 746f 722c 2061 206c  nd-effector, a l
+00002cc0: 6561 6620 6e6f 6465 2069 6e20 7468 6520  eaf node in the 
+00002cd0: 7269 6769 642d 626f 6479 0a74 7265 6520  rigid-body.tree 
+00002ce0: 2850 7974 686f 6e20 7072 6f6d 7074 7320  (Python prompts 
+00002cf0: 6172 6520 6e6f 7420 7368 6f77 6e20 746f  are not shown to
+00002d00: 206d 616b 6520 6974 2065 6173 7920 746f   make it easy to
+00002d10: 2063 6f70 792b 7061 7374 6520 7468 6520   copy+paste the 
+00002d20: 636f 6465 2c20 636f 6e73 6f6c 6520 6f75  code, console ou
+00002d30: 7470 7574 2069 7320 696e 6465 6e74 6564  tput is indented
+00002d40: 292e 0a57 6520 7769 6c6c 2063 6f6d 7075  )..We will compu
+00002d50: 7465 2074 6865 2066 6f72 7761 7264 206b  te the forward k
+00002d60: 696e 656d 6174 6963 7320 6e65 7874 0a0a  inematics next..
+00002d70: 6060 600a 5465 203d 2072 6f62 6f74 2e66  ```.Te = robot.f
+00002d80: 6b69 6e65 2872 6f62 6f74 2e71 7229 2020  kine(robot.qr)  
+00002d90: 2320 666f 7277 6172 6420 6b69 6e65 6d61  # forward kinema
+00002da0: 7469 6373 0a70 7269 6e74 2854 6529 0a0a  tics.print(Te)..
+00002db0: 0930 2e39 3935 2020 2020 2030 2020 2020  .0.995     0    
+00002dc0: 2020 2020 2030 2e30 3939 3833 2020 2030       0.09983   0
+00002dd0: 2e34 3834 0a09 3020 2020 2020 2020 202d  .484..0        -
+00002de0: 3120 2020 2020 2020 2020 3020 2020 2020  1         0     
+00002df0: 2020 2020 300a 0930 2e30 3939 3833 2020      0..0.09983  
+00002e00: 2030 2020 2020 2020 2020 2d30 2e39 3935   0        -0.995
+00002e10: 2020 2020 2030 2e34 3132 360a 0930 2020       0.4126..0  
+00002e20: 2020 2020 2020 2030 2020 2020 2020 2020         0        
+00002e30: 2030 2020 2020 2020 2020 2031 0a60 6060   0         1.```
+00002e40: 0a0a 5765 2063 616e 2073 6f6c 7665 2069  ..We can solve i
+00002e50: 6e76 6572 7365 206b 696e 656d 6174 6963  nverse kinematic
+00002e60: 7320 7665 7279 2065 6173 696c 792e 2057  s very easily. W
+00002e70: 6520 6669 7273 7420 6368 6f6f 7365 2061  e first choose a
+00002e80: 6e20 5345 2833 2920 706f 7365 0a64 6566  n SE(3) pose.def
+00002e90: 696e 6564 2069 6e20 7465 726d 7320 6f66  ined in terms of
+00002ea0: 2070 6f73 6974 696f 6e20 616e 6420 6f72   position and or
+00002eb0: 6965 6e74 6174 696f 6e20 2865 6e64 2d65  ientation (end-e
+00002ec0: 6666 6563 746f 7220 7a2d 6178 6973 2064  ffector z-axis d
+00002ed0: 6f77 6e20 2841 3d2d 5a29 2061 6e64 2066  own (A=-Z) and f
+00002ee0: 696e 6765 720a 6f72 6965 6e74 6174 696f  inger.orientatio
+00002ef0: 6e20 7061 7261 6c6c 656c 2074 6f20 792d  n parallel to y-
+00002f00: 6178 6973 2028 4f3d 2b59 2929 2e0a 0a60  axis (O=+Y))...`
+00002f10: 6060 7079 7468 6f6e 0a66 726f 6d20 7370  ``python.from sp
+00002f20: 6174 6961 6c6d 6174 6820 696d 706f 7274  atialmath import
+00002f30: 2053 4533 0a0a 5465 7020 3d20 5345 332e   SE3..Tep = SE3.
+00002f40: 5472 616e 7328 302e 362c 202d 302e 332c  Trans(0.6, -0.3,
+00002f50: 2030 2e31 2920 2a20 5345 332e 4f41 285b   0.1) * SE3.OA([
+00002f60: 302c 2031 2c20 305d 2c20 5b30 2c20 302c  0, 1, 0], [0, 0,
+00002f70: 202d 315d 290a 736f 6c20 3d20 726f 626f   -1]).sol = robo
+00002f80: 742e 696b 5f6c 6d5f 6368 616e 2854 6570  t.ik_lm_chan(Tep
+00002f90: 2920 2020 2020 2020 2020 2320 736f 6c76  )         # solv
+00002fa0: 6520 494b 0a70 7269 6e74 2873 6f6c 290a  e IK.print(sol).
+00002fb0: 0a09 2861 7272 6179 285b 2030 2e32 3035  ..(array([ 0.205
+00002fc0: 3932 3831 352c 2020 302e 3836 3630 3934  92815,  0.866094
+00002fd0: 3831 2c20 2d30 2e37 3934 3733 3230 362c  81, -0.79473206,
+00002fe0: 202d 312e 3638 3235 3437 3934 2c20 2030   -1.68254794,  0
+00002ff0: 2e37 3438 3732 3931 352c 0a09 0909 322e  .74872915,....2.
+00003000: 3231 3736 3437 3436 2c20 2d30 2e31 3032  21764746, -0.102
+00003010: 3535 3630 365d 292c 2031 2c20 3131 342c  55606]), 1, 114,
+00003020: 2037 2c20 322e 3839 3031 3634 3035 3732   7, 2.8901640572
+00003030: 3330 3232 3865 2d30 3729 0a0a 715f 7069  30228e-07)..q_pi
+00003040: 636b 7570 203d 2073 6f6c 5b30 5d0a 7072  ckup = sol[0].pr
+00003050: 696e 7428 726f 626f 742e 666b 696e 6528  int(robot.fkine(
+00003060: 715f 7069 636b 7570 2929 2020 2020 2320  q_pickup))    # 
+00003070: 464b 2073 686f 7773 2074 6861 7420 6465  FK shows that de
+00003080: 7369 7265 6420 656e 642d 6566 6665 6374  sired end-effect
+00003090: 6f72 2070 6f73 6520 7761 7320 6163 6869  or pose was achi
+000030a0: 6576 6564 0a0a 0920 3120 2020 2020 2020  eved... 1       
+000030b0: 2020 2d38 2e39 3133 652d 3035 2020 2d30    -8.913e-05  -0
+000030c0: 2e30 3030 3333 3334 2020 302e 3539 3936  .0003334  0.5996
+000030d0: 0a09 2d38 2e39 3239 652d 3035 202d 3120  ..-8.929e-05 -1 
+000030e0: 2020 2020 2020 2020 202d 302e 3030 3034           -0.0004
+000030f0: 3931 3220 2d30 2e32 3939 380a 092d 302e  912 -0.2998..-0.
+00003100: 3030 3033 3333 3420 2030 2e30 3030 3439  0003334  0.00049
+00003110: 3132 2020 2d31 2020 2020 2020 2020 2020  12  -1          
+00003120: 302e 3130 3031 0a09 2030 2020 2020 2020  0.1001.. 0      
+00003130: 2020 2020 3020 2020 2020 2020 2020 2020      0           
+00003140: 3020 2020 2020 2020 2020 2031 0a60 6060  0          1.```
+00003150: 0a0a 5765 2063 616e 2061 6e69 6d61 7465  ..We can animate
+00003160: 2061 2070 6174 6820 6672 6f6d 2074 6865   a path from the
+00003170: 2072 6561 6479 2070 6f73 6520 6071 7260   ready pose `qr`
+00003180: 2063 6f6e 6669 6775 7261 7469 6f6e 2074   configuration t
+00003190: 6f20 7468 6973 2070 6963 6b75 7020 636f  o this pickup co
+000031a0: 6e66 6967 7572 6174 696f 6e0a 0a60 6060  nfiguration..```
+000031b0: 7079 7468 6f6e 0a71 7420 3d20 7274 622e  python.qt = rtb.
+000031c0: 6a74 7261 6a28 726f 626f 742e 7172 2c20  jtraj(robot.qr, 
+000031d0: 715f 7069 636b 7570 2c20 3530 290a 726f  q_pickup, 50).ro
+000031e0: 626f 742e 706c 6f74 2871 742e 712c 2062  bot.plot(qt.q, b
+000031f0: 6163 6b65 6e64 3d27 7079 706c 6f74 272c  ackend='pyplot',
+00003200: 206d 6f76 6965 3d27 7061 6e64 6131 2e67   movie='panda1.g
+00003210: 6966 2729 0a60 6060 0a0a 3c70 2061 6c69  if').```..<p ali
+00003220: 676e 3d22 6365 6e74 6572 223e 0a09 3c69  gn="center">..<i
+00003230: 6d67 2073 7263 3d22 2e2f 646f 6373 2f66  mg src="./docs/f
+00003240: 6967 732f 7061 6e64 6131 2e67 6966 223e  igs/panda1.gif">
+00003250: 0a3c 2f70 3e0a 0a77 6865 7265 2077 6520  .</p>..where we 
+00003260: 6861 7665 2073 7065 6369 6669 6564 2074  have specified t
+00003270: 6865 206d 6174 706c 6f74 6c69 6220 6070  he matplotlib `p
+00003280: 7970 6c6f 7460 2062 6163 6b65 6e64 2e20  yplot` backend. 
+00003290: 426c 7565 2061 7272 6f77 7320 7368 6f77  Blue arrows show
+000032a0: 2074 6865 206a 6f69 6e74 2061 7865 7320   the joint axes 
+000032b0: 616e 6420 7468 6520 636f 6c6f 7572 6564  and the coloured
+000032c0: 2066 7261 6d65 2073 686f 7773 2074 6865   frame shows the
+000032d0: 2065 6e64 2d65 6666 6563 746f 7220 706f   end-effector po
+000032e0: 7365 2e0a 0a57 6520 6361 6e20 616c 736f  se...We can also
+000032f0: 2070 6c6f 7420 7468 6520 7472 616a 6563   plot the trajec
+00003300: 746f 7279 2069 6e20 7468 6520 5377 6966  tory in the Swif
+00003310: 7420 7369 6d75 6c61 746f 7220 2861 2062  t simulator (a b
+00003320: 726f 7773 6572 2d62 6173 6564 2033 642d  rowser-based 3d-
+00003330: 7369 6d75 6c61 7469 6f6e 2065 6e76 6972  simulation envir
+00003340: 6f6e 6d65 6e74 2062 7569 6c74 2074 6f20  onment built to 
+00003350: 776f 726b 2077 6974 6820 7468 6520 546f  work with the To
+00003360: 6f6c 626f 7829 0a0a 6060 6070 7974 686f  olbox)..```pytho
+00003370: 6e0a 726f 626f 742e 706c 6f74 2871 742e  n.robot.plot(qt.
+00003380: 7129 0a60 6060 0a0a 3c70 2061 6c69 676e  q).```..<p align
+00003390: 3d22 6365 6e74 6572 223e 0a09 3c69 6d67  ="center">..<img
+000033a0: 2073 7263 3d22 2e2f 646f 6373 2f66 6967   src="./docs/fig
+000033b0: 732f 7061 6e64 6132 2e67 6966 223e 0a3c  s/panda2.gif">.<
+000033c0: 2f70 3e0a 0a57 6520 6361 6e20 616c 736f  /p>..We can also
+000033d0: 2065 7870 6572 696d 656e 7420 7769 7468   experiment with
+000033e0: 2076 656c 6f63 6974 7920 636f 6e74 726f   velocity contro
+000033f0: 6c6c 6572 7320 696e 2053 7769 6674 2e20  llers in Swift. 
+00003400: 4865 7265 2069 7320 6120 7265 736f 6c76  Here is a resolv
+00003410: 6564 2d72 6174 6520 6d6f 7469 6f6e 2063  ed-rate motion c
+00003420: 6f6e 7472 6f6c 2065 7861 6d70 6c65 0a0a  ontrol example..
+00003430: 6060 6070 7974 686f 6e0a 696d 706f 7274  ```python.import
+00003440: 2073 7769 6674 0a69 6d70 6f72 7420 726f   swift.import ro
+00003450: 626f 7469 6373 746f 6f6c 626f 7820 6173  boticstoolbox as
+00003460: 2072 700a 696d 706f 7274 2073 7061 7469   rp.import spati
+00003470: 616c 6d61 7468 2061 7320 736d 0a69 6d70  almath as sm.imp
+00003480: 6f72 7420 6e75 6d70 7920 6173 206e 700a  ort numpy as np.
+00003490: 0a65 6e76 203d 2073 7769 6674 2e53 7769  .env = swift.Swi
+000034a0: 6674 2829 0a65 6e76 2e6c 6175 6e63 6828  ft().env.launch(
+000034b0: 7265 616c 7469 6d65 3d54 7275 6529 0a0a  realtime=True)..
+000034c0: 7061 6e64 6120 3d20 7270 2e6d 6f64 656c  panda = rp.model
+000034d0: 732e 5061 6e64 6128 290a 7061 6e64 612e  s.Panda().panda.
+000034e0: 7120 3d20 7061 6e64 612e 7172 0a0a 5465  q = panda.qr..Te
+000034f0: 7020 3d20 7061 6e64 612e 666b 696e 6528  p = panda.fkine(
+00003500: 7061 6e64 612e 7129 202a 2073 6d2e 5345  panda.q) * sm.SE
+00003510: 332e 5472 616e 7328 302e 322c 2030 2e32  3.Trans(0.2, 0.2
+00003520: 2c20 302e 3435 290a 0a61 7272 6976 6564  , 0.45)..arrived
+00003530: 203d 2046 616c 7365 0a65 6e76 2e61 6464   = False.env.add
+00003540: 2870 616e 6461 290a 0a64 7420 3d20 302e  (panda)..dt = 0.
+00003550: 3035 0a0a 7768 696c 6520 6e6f 7420 6172  05..while not ar
+00003560: 7269 7665 643a 0a0a 2020 2020 762c 2061  rived:..    v, a
+00003570: 7272 6976 6564 203d 2072 702e 705f 7365  rrived = rp.p_se
+00003580: 7276 6f28 7061 6e64 612e 666b 696e 6528  rvo(panda.fkine(
+00003590: 7061 6e64 612e 7129 2c20 5465 702c 2031  panda.q), Tep, 1
+000035a0: 290a 2020 2020 7061 6e64 612e 7164 203d  ).    panda.qd =
+000035b0: 206e 702e 6c69 6e61 6c67 2e70 696e 7628   np.linalg.pinv(
+000035c0: 7061 6e64 612e 6a61 636f 6265 2870 616e  panda.jacobe(pan
+000035d0: 6461 2e71 2929 2040 2076 0a20 2020 2065  da.q)) @ v.    e
+000035e0: 6e76 2e73 7465 7028 6474 290a 0a23 2055  nv.step(dt)..# U
+000035f0: 6e63 6f6d 6d65 6e74 2074 6f20 7374 6f70  ncomment to stop
+00003600: 2074 6865 2062 726f 7773 6572 2074 6162   the browser tab
+00003610: 2066 726f 6d20 636c 6f73 696e 670a 2320   from closing.# 
+00003620: 656e 762e 686f 6c64 2829 0a60 6060 0a0a  env.hold().```..
+00003630: 3c70 2061 6c69 676e 3d22 6365 6e74 6572  <p align="center
+00003640: 223e 0a09 3c69 6d67 2073 7263 3d22 2e2f  ">..<img src="./
+00003650: 646f 6373 2f66 6967 732f 7061 6e64 6133  docs/figs/panda3
+00003660: 2e67 6966 223e 0a3c 2f70 3e0a 0a23 2323  .gif">.</p>..###
+00003670: 2052 756e 2073 6f6d 6520 6578 616d 706c   Run some exampl
+00003680: 6573 0a0a 5468 6520 5b60 6e6f 7465 626f  es..The [`notebo
+00003690: 6f6b 7360 5d28 6874 7470 733a 2f2f 6769  oks`](https://gi
+000036a0: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
+000036b0: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
+000036c0: 6c62 6f78 2d70 7974 686f 6e2f 7472 6565  lbox-python/tree
+000036d0: 2f6d 6173 7465 722f 6e6f 7465 626f 6f6b  /master/notebook
+000036e0: 7329 2066 6f6c 6465 7220 636f 6e74 6169  s) folder contai
+000036f0: 6e73 2073 6f6d 6520 7475 746f 7269 616c  ns some tutorial
+00003700: 204a 7570 7974 6572 206e 6f74 6562 6f6f   Jupyter noteboo
+00003710: 6b73 2077 6869 6368 2079 6f75 2063 616e  ks which you can
+00003720: 2062 726f 7773 6520 6f6e 2047 6974 4875   browse on GitHu
+00003730: 622e 2041 6464 6974 696f 6e61 6c6c 792c  b. Additionally,
+00003740: 2068 6176 6520 6120 6c6f 6f6b 2069 6e20   have a look in 
+00003750: 7468 6520 5b60 6578 616d 706c 6573 605d  the [`examples`]
+00003760: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00003770: 636f 6d2f 7065 7465 7263 6f72 6b65 2f72  com/petercorke/r
+00003780: 6f62 6f74 6963 732d 746f 6f6c 626f 782d  obotics-toolbox-
+00003790: 7079 7468 6f6e 2f74 7265 652f 6d61 7374  python/tree/mast
+000037a0: 6572 2f72 6f62 6f74 6963 7374 6f6f 6c62  er/roboticstoolb
+000037b0: 6f78 2f65 7861 6d70 6c65 7329 2066 6f6c  ox/examples) fol
+000037c0: 6465 7220 666f 7220 6d61 6e79 2072 6561  der for many rea
+000037d0: 6479 2074 6f20 7275 6e20 6578 616d 706c  dy to run exampl
+000037e0: 6573 2e0a 0a3c 6272 3e0a 0a3c 6120 6964  es...<br>..<a id
+000037f0: 3d27 3527 3e3c 2f61 3e0a 0a23 2320 546f  ='5'></a>..## To
+00003800: 6f6c 626f 7820 5265 7365 6172 6368 2041  olbox Research A
+00003810: 7070 6c69 6361 7469 6f6e 730a 0a54 6865  pplications..The
+00003820: 2074 6f6f 6c62 6f78 2069 7320 696e 6372   toolbox is incr
+00003830: 6564 6962 6c79 2075 7365 6675 6c20 666f  edibly useful fo
+00003840: 7220 6465 7665 6c6f 7069 6e67 2061 6e64  r developing and
+00003850: 2070 726f 746f 7479 7069 6e67 2061 6c67   prototyping alg
+00003860: 6f72 6974 686d 7320 666f 7220 7265 7365  orithms for rese
+00003870: 6172 6368 2c20 7468 616e 6b73 2074 6f20  arch, thanks to 
+00003880: 7468 6520 6578 6861 7573 7469 7665 2073  the exhaustive s
+00003890: 6574 206f 6620 7765 6c6c 2064 6f63 756d  et of well docum
+000038a0: 656e 7465 6420 616e 6420 6d61 7475 7265  ented and mature
+000038b0: 2072 6f62 6f74 6963 2066 756e 6374 696f   robotic functio
+000038c0: 6e73 2065 7870 6f73 6564 2074 6872 6f75  ns exposed throu
+000038d0: 6768 2063 6c65 616e 2061 6e64 2070 6169  gh clean and pai
+000038e0: 6e6c 6573 7320 4150 4973 2e20 4164 6469  nless APIs. Addi
+000038f0: 7469 6f6e 616c 6c79 2c20 7468 6520 6561  tionally, the ea
+00003900: 7365 2061 7420 7768 6963 6820 6120 7573  se at which a us
+00003910: 6572 2063 616e 2076 6973 7561 6c69 7a65  er can visualize
+00003920: 2074 6865 6972 2061 6c67 6f72 6974 686d   their algorithm
+00003930: 2073 7570 706f 7274 7320 6120 7261 7069   supports a rapi
+00003940: 6420 7072 6f74 6f74 7970 696e 6720 7061  d prototyping pa
+00003950: 7261 6469 676d 2e0a 0a23 2323 2050 7562  radigm...### Pub
+00003960: 6c69 6361 7469 6f6e 204c 6973 740a 0a4a  lication List..J
+00003970: 2e20 4861 7669 6c61 6e64 2c20 4e2e 2053  . Haviland, N. S
+00003980: c3bc 6e64 6572 6861 7566 2061 6e64 2050  ..nderhauf and P
+00003990: 2e20 436f 726b 652c 2022 2a2a 4120 486f  . Corke, "**A Ho
+000039a0: 6c69 7374 6963 2041 7070 726f 6163 6820  listic Approach 
+000039b0: 746f 2052 6561 6374 6976 6520 4d6f 6269  to Reactive Mobi
+000039c0: 6c65 204d 616e 6970 756c 6174 696f 6e2a  le Manipulation*
+000039d0: 2a2c 2220 696e 205f 4945 4545 2052 6f62  *," in _IEEE Rob
+000039e0: 6f74 6963 7320 616e 6420 4175 746f 6d61  otics and Automa
+000039f0: 7469 6f6e 204c 6574 7465 7273 5f2c 2064  tion Letters_, d
+00003a00: 6f69 3a20 3130 2e31 3130 392f 4c52 412e  oi: 10.1109/LRA.
+00003a10: 3230 3232 2e33 3134 3635 3534 2e20 496e  2022.3146554. In
+00003a20: 2074 6865 2076 6964 656f 2c20 7468 6520   the video, the 
+00003a30: 726f 626f 7420 6973 2063 6f6e 7472 6f6c  robot is control
+00003a40: 6c65 6420 7573 696e 6720 7468 6520 526f  led using the Ro
+00003a50: 626f 7469 6373 2074 6f6f 6c62 6f78 2066  botics toolbox f
+00003a60: 6f72 2050 7974 686f 6e20 616e 6420 6665  or Python and fe
+00003a70: 6174 7572 6573 2061 2072 6563 6f72 6469  atures a recordi
+00003a80: 6e67 2066 726f 6d20 7468 6520 5b53 7769  ng from the [Swi
+00003a90: 6674 5d28 6874 7470 733a 2f2f 6769 7468  ft](https://gith
+00003aa0: 7562 2e63 6f6d 2f6a 6861 766c 2f73 7769  ub.com/jhavl/swi
+00003ab0: 6674 2920 5369 6d75 6c61 746f 722e 0a0a  ft) Simulator...
+00003ac0: 5b5b 4172 7869 7620 5061 7065 725d 2868  [[Arxiv Paper](h
+00003ad0: 7474 7073 3a2f 2f61 7278 6976 2e6f 7267  ttps://arxiv.org
+00003ae0: 2f61 6273 2f32 3130 392e 3034 3734 3929  /abs/2109.04749)
+00003af0: 5d20 5b5b 4945 4545 2058 706c 6f72 655d  ] [[IEEE Xplore]
+00003b00: 2868 7474 7073 3a2f 2f69 6565 6578 706c  (https://ieeexpl
+00003b10: 6f72 652e 6965 6565 2e6f 7267 2f61 6273  ore.ieee.org/abs
+00003b20: 7472 6163 742f 646f 6375 6d65 6e74 2f39  tract/document/9
+00003b30: 3639 3532 3938 295d 205b 5b50 726f 6a65  695298)] [[Proje
+00003b40: 6374 2057 6562 7369 7465 5d28 6874 7470  ct Website](http
+00003b50: 733a 2f2f 6a68 6176 6c2e 6769 7468 7562  s://jhavl.github
+00003b60: 2e69 6f2f 686f 6c69 7374 6963 2f29 5d20  .io/holistic/)] 
+00003b70: 5b5b 5669 6465 6f5d 2868 7474 7073 3a2f  [[Video](https:/
+00003b80: 2f79 6f75 7475 2e62 652f 2d44 5842 5150  /youtu.be/-DXBQP
+00003b90: 654c 4956 3429 5d20 5b5b 436f 6465 2045  eLIV4)] [[Code E
+00003ba0: 7861 6d70 6c65 5d28 6874 7470 733a 2f2f  xample](https://
+00003bb0: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
+00003bc0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+00003bd0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 626c  oolbox-python/bl
+00003be0: 6f62 2f6d 6173 7465 722f 726f 626f 7469  ob/master/roboti
+00003bf0: 6373 746f 6f6c 626f 782f 6578 616d 706c  cstoolbox/exampl
+00003c00: 6573 2f68 6f6c 6973 7469 635f 6d6d 5f6e  es/holistic_mm_n
+00003c10: 6f6e 5f68 6f6c 6f6e 6f6d 6963 2e70 7929  on_holonomic.py)
+00003c20: 5d0a 0a3c 703e 0a20 203c 6120 6872 6566  ]..<p>.  <a href
+00003c30: 3d22 6874 7470 733a 2f2f 796f 7574 752e  ="https://youtu.
+00003c40: 6265 2f2d 4458 4251 5065 4c49 5634 223e  be/-DXBQPeLIV4">
+00003c50: 0a20 2020 203c 696d 6720 7372 633d 2268  .    <img src="h
+00003c60: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00003c70: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
+00003c80: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
+00003c90: 7468 6f6e 2f72 6177 2f6d 6173 7465 722f  thon/raw/master/
+00003ca0: 646f 6373 2f66 6967 732f 686f 6c69 7374  docs/figs/holist
+00003cb0: 6963 5f79 6f75 7475 6265 2e70 6e67 2220  ic_youtube.png" 
+00003cc0: 7769 6474 683d 2235 3630 223e 0a20 203c  width="560">.  <
+00003cd0: 2f61 3e0a 3c2f 703e 0a0a 4a2e 2048 6176  /a>.</p>..J. Hav
+00003ce0: 696c 616e 6420 616e 6420 502e 2043 6f72  iland and P. Cor
+00003cf0: 6b65 2c20 222a 2a4e 454f 3a20 4120 4e6f  ke, "**NEO: A No
+00003d00: 7665 6c20 4578 7065 6469 7469 6f75 7320  vel Expeditious 
+00003d10: 4f70 7469 6d69 7361 7469 6f6e 2041 6c67  Optimisation Alg
+00003d20: 6f72 6974 686d 2066 6f72 2052 6561 6374  orithm for React
+00003d30: 6976 6520 4d6f 7469 6f6e 2043 6f6e 7472  ive Motion Contr
+00003d40: 6f6c 206f 6620 4d61 6e69 7075 6c61 746f  ol of Manipulato
+00003d50: 7273 2a2a 2c22 2069 6e20 5f49 4545 4520  rs**," in _IEEE 
+00003d60: 526f 626f 7469 6373 2061 6e64 2041 7574  Robotics and Aut
+00003d70: 6f6d 6174 696f 6e20 4c65 7474 6572 735f  omation Letters_
+00003d80: 2c20 646f 693a 2031 302e 3131 3039 2f4c  , doi: 10.1109/L
+00003d90: 5241 2e32 3032 312e 3330 3536 3036 302e  RA.2021.3056060.
+00003da0: 2049 6e20 7468 6520 7669 6465 6f2c 2074   In the video, t
+00003db0: 6865 2072 6f62 6f74 2069 7320 636f 6e74  he robot is cont
+00003dc0: 726f 6c6c 6564 2075 7369 6e67 2074 6865  rolled using the
+00003dd0: 2052 6f62 6f74 6963 7320 746f 6f6c 626f   Robotics toolbo
+00003de0: 7820 666f 7220 5079 7468 6f6e 2061 6e64  x for Python and
+00003df0: 2066 6561 7475 7265 7320 6120 7265 636f   features a reco
+00003e00: 7264 696e 6720 6672 6f6d 2074 6865 205b  rding from the [
+00003e10: 5377 6966 745d 2868 7474 7073 3a2f 2f67  Swift](https://g
+00003e20: 6974 6875 622e 636f 6d2f 6a68 6176 6c2f  ithub.com/jhavl/
+00003e30: 7377 6966 7429 2053 696d 756c 6174 6f72  swift) Simulator
+00003e40: 2e0a 0a5b 5b41 7278 6976 2050 6170 6572  ...[[Arxiv Paper
+00003e50: 5d28 6874 7470 733a 2f2f 6172 7869 762e  ](https://arxiv.
+00003e60: 6f72 672f 6162 732f 3230 3130 2e30 3836  org/abs/2010.086
+00003e70: 3836 295d 205b 5b49 4545 4520 5870 6c6f  86)] [[IEEE Xplo
+00003e80: 7265 5d28 6874 7470 733a 2f2f 6965 6565  re](https://ieee
+00003e90: 7870 6c6f 7265 2e69 6565 652e 6f72 672f  xplore.ieee.org/
+00003ea0: 646f 6375 6d65 6e74 2f39 3334 3337 3138  document/9343718
+00003eb0: 295d 205b 5b50 726f 6a65 6374 2057 6562  )] [[Project Web
+00003ec0: 7369 7465 5d28 6874 7470 733a 2f2f 6a68  site](https://jh
+00003ed0: 6176 6c2e 6769 7468 7562 2e69 6f2f 6e65  avl.github.io/ne
+00003ee0: 6f2f 295d 205b 5b56 6964 656f 5d28 6874  o/)] [[Video](ht
+00003ef0: 7470 733a 2f2f 796f 7574 752e 6265 2f6a  tps://youtu.be/j
+00003f00: 534c 504a 4272 3851 5459 295d 205b 5b43  SLPJBr8QTY)] [[C
+00003f10: 6f64 6520 4578 616d 706c 655d 2868 7474  ode Example](htt
+00003f20: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00003f30: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
+00003f40: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
+00003f50: 6f6e 2f62 6c6f 622f 6d61 7374 6572 2f72  on/blob/master/r
+00003f60: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2f65  oboticstoolbox/e
+00003f70: 7861 6d70 6c65 732f 6e65 6f2e 7079 295d  xamples/neo.py)]
+00003f80: 0a0a 3c70 3e0a 2020 3c61 2068 7265 663d  ..<p>.  <a href=
+00003f90: 2268 7474 7073 3a2f 2f79 6f75 7475 2e62  "https://youtu.b
+00003fa0: 652f 6a53 4c50 4a42 7238 5154 5922 3e0a  e/jSLPJBr8QTY">.
+00003fb0: 2020 2020 3c69 6d67 2073 7263 3d22 6874      <img src="ht
+00003fc0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00003fd0: 2f70 6574 6572 636f 726b 652f 726f 626f  /petercorke/robo
+00003fe0: 7469 6373 2d74 6f6f 6c62 6f78 2d70 7974  tics-toolbox-pyt
+00003ff0: 686f 6e2f 7261 772f 6d61 7374 6572 2f64  hon/raw/master/d
+00004000: 6f63 732f 6669 6773 2f6e 656f 5f79 6f75  ocs/figs/neo_you
+00004010: 7475 6265 2e70 6e67 2220 7769 6474 683d  tube.png" width=
+00004020: 2235 3630 223e 0a20 203c 2f61 3e0a 3c2f  "560">.  </a>.</
+00004030: 703e 0a0a 2a2a 4120 5075 7265 6c79 2d52  p>..**A Purely-R
+00004040: 6561 6374 6976 6520 4d61 6e69 7075 6c61  eactive Manipula
+00004050: 6269 6c69 7479 2d4d 6178 696d 6973 696e  bility-Maximisin
+00004060: 6720 4d6f 7469 6f6e 2043 6f6e 7472 6f6c  g Motion Control
+00004070: 6c65 722a 2a2c 204a 2e20 4861 7669 6c61  ler**, J. Havila
+00004080: 6e64 2061 6e64 2050 2e20 436f 726b 652e  nd and P. Corke.
+00004090: 2049 6e20 7468 6520 7669 6465 6f2c 2074   In the video, t
+000040a0: 6865 2072 6f62 6f74 2069 7320 636f 6e74  he robot is cont
+000040b0: 726f 6c6c 6564 2075 7369 6e67 2074 6865  rolled using the
+000040c0: 2052 6f62 6f74 6963 7320 746f 6f6c 626f   Robotics toolbo
+000040d0: 7820 666f 7220 5079 7468 6f6e 2e0a 0a5b  x for Python...[
+000040e0: 5b50 6170 6572 5d28 6874 7470 733a 2f2f  [Paper](https://
+000040f0: 6172 7869 762e 6f72 672f 6162 732f 3230  arxiv.org/abs/20
+00004100: 3032 2e31 3139 3031 295d 205b 5b50 726f  02.11901)] [[Pro
+00004110: 6a65 6374 2057 6562 7369 7465 5d28 6874  ject Website](ht
+00004120: 7470 733a 2f2f 6a68 6176 6c2e 6769 7468  tps://jhavl.gith
+00004130: 7562 2e69 6f2f 6d6d 632f 295d 205b 5b56  ub.io/mmc/)] [[V
+00004140: 6964 656f 5d28 6874 7470 733a 2f2f 796f  ideo](https://yo
+00004150: 7574 752e 6265 2f56 755f 7263 506c 6141  utu.be/Vu_rcPlaA
+00004160: 4449 295d 205b 5b43 6f64 6520 4578 616d  DI)] [[Code Exam
+00004170: 706c 655d 2868 7474 7073 3a2f 2f67 6974  ple](https://git
+00004180: 6875 622e 636f 6d2f 7065 7465 7263 6f72  hub.com/petercor
+00004190: 6b65 2f72 6f62 6f74 6963 732d 746f 6f6c  ke/robotics-tool
+000041a0: 626f 782d 7079 7468 6f6e 2f62 6c6f 622f  box-python/blob/
+000041b0: 6d61 7374 6572 2f72 6f62 6f74 6963 7374  master/roboticst
+000041c0: 6f6f 6c62 6f78 2f65 7861 6d70 6c65 732f  oolbox/examples/
+000041d0: 6d6d 632e 7079 295d 0a0a 3c70 3e0a 2020  mmc.py)]..<p>.  
+000041e0: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
+000041f0: 2f79 6f75 7475 2e62 652f 5675 5f72 6350  /youtu.be/Vu_rcP
+00004200: 6c61 4144 4922 3e0a 2020 2020 3c69 6d67  laADI">.    <img
+00004210: 2073 7263 3d22 6874 7470 733a 2f2f 6769   src="https://gi
+00004220: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
+00004230: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
+00004240: 6c62 6f78 2d70 7974 686f 6e2f 7261 772f  lbox-python/raw/
+00004250: 6d61 7374 6572 2f64 6f63 732f 6669 6773  master/docs/figs
+00004260: 2f6d 6d63 5f79 6f75 7475 6265 2e70 6e67  /mmc_youtube.png
+00004270: 2220 7769 6474 683d 2235 3630 223e 0a20  " width="560">. 
+00004280: 203c 2f61 3e0a 3c2f 703e 0a0a 3c62 723e   </a>.</p>..<br>
+00004290: 0a0a 3c62 723e 0a0a 3c61 2069 643d 2736  ..<br>..<a id='6
+000042a0: 273e 3c2f 613e 0a0a 2323 2054 6f6f 6c62  '></a>..## Toolb
+000042b0: 6f78 2049 4352 4120 5061 7065 7220 616e  ox ICRA Paper an
+000042c0: 6420 4369 7461 7469 6f6e 2049 6e66 6f0a  d Citation Info.
+000042d0: 0a43 6865 636b 206f 7574 206f 7572 2049  .Check out our I
+000042e0: 4352 4120 3230 3231 2070 6170 6572 206f  CRA 2021 paper o
+000042f0: 6e20 5b49 4545 4520 5870 6c6f 7265 5d28  n [IEEE Xplore](
+00004300: 6874 7470 733a 2f2f 6965 6565 7870 6c6f  https://ieeexplo
+00004310: 7265 2e69 6565 652e 6f72 672f 646f 6375  re.ieee.org/docu
+00004320: 6d65 6e74 2f39 3536 3133 3636 2920 6f72  ment/9561366) or
+00004330: 2067 6574 2074 6865 2050 4446 2066 726f   get the PDF fro
+00004340: 6d20 5b50 6574 6572 2773 2077 6562 7369  m [Peter's websi
+00004350: 7465 5d28 6874 7470 733a 2f2f 6269 742e  te](https://bit.
+00004360: 6c79 2f33 4368 6379 4e70 292e 0a0a 4966  ly/3ChcyNp)...If
+00004370: 2074 6865 2074 6f6f 6c62 6f78 2068 656c   the toolbox hel
+00004380: 7065 6420 796f 7520 696e 2079 6f75 7220  ped you in your 
+00004390: 7265 7365 6172 6368 2c20 706c 6561 7365  research, please
+000043a0: 2063 6974 650a 0a60 6060 0a40 696e 7072   cite..```.@inpr
+000043b0: 6f63 6565 6469 6e67 737b 7274 622c 0a20  oceedings{rtb,. 
+000043c0: 2074 6974 6c65 3d7b 4e6f 7420 796f 7572   title={Not your
+000043d0: 2067 7261 6e64 6d6f 7468 6572 e280 9973   grandmother...s
+000043e0: 2074 6f6f 6c62 6f78 2d2d 7468 6520 526f   toolbox--the Ro
+000043f0: 626f 7469 6373 2054 6f6f 6c62 6f78 2072  botics Toolbox r
+00004400: 6569 6e76 656e 7465 6420 666f 7220 5079  einvented for Py
+00004410: 7468 6f6e 7d2c 0a20 2061 7574 686f 723d  thon},.  author=
+00004420: 7b43 6f72 6b65 2c20 5065 7465 7220 616e  {Corke, Peter an
+00004430: 6420 4861 7669 6c61 6e64 2c20 4a65 7373  d Haviland, Jess
+00004440: 657d 2c0a 2020 626f 6f6b 7469 746c 653d  e},.  booktitle=
+00004450: 7b32 3032 3120 4945 4545 2049 6e74 6572  {2021 IEEE Inter
+00004460: 6e61 7469 6f6e 616c 2043 6f6e 6665 7265  national Confere
+00004470: 6e63 6520 6f6e 2052 6f62 6f74 6963 7320  nce on Robotics 
+00004480: 616e 6420 4175 746f 6d61 7469 6f6e 2028  and Automation (
+00004490: 4943 5241 297d 2c0a 2020 7061 6765 733d  ICRA)},.  pages=
+000044a0: 7b31 3133 3537 2d2d 3131 3336 337d 2c0a  {11357--11363},.
+000044b0: 2020 7965 6172 3d7b 3230 3231 7d2c 0a20    year={2021},. 
+000044c0: 206f 7267 616e 697a 6174 696f 6e3d 7b49   organization={I
+000044d0: 4545 457d 0a7d 0a60 6060 0a0a 3c62 723e  EEE}.}.```..<br>
+000044e0: 0a0a 3c61 2069 643d 2737 273e 3c2f 613e  ..<a id='7'></a>
+000044f0: 0a0a 2323 2055 7369 6e67 2074 6865 2054  ..## Using the T
+00004500: 6f6f 6c62 6f78 2069 6e20 796f 7572 204f  oolbox in your O
+00004510: 7065 6e20 536f 7572 6365 2043 6f64 653f  pen Source Code?
+00004520: 0a0a 4966 2079 6f75 2061 7265 2075 7369  ..If you are usi
+00004530: 6e67 2074 6865 2054 6f6f 6c62 6f78 2069  ng the Toolbox i
+00004540: 6e20 796f 7572 206f 7065 6e20 736f 7572  n your open sour
+00004550: 6365 2063 6f64 652c 2066 6565 6c20 6672  ce code, feel fr
+00004560: 6565 2074 6f20 6164 6420 6f75 7220 6261  ee to add our ba
+00004570: 6467 6520 746f 2079 6f75 7220 7265 6164  dge to your read
+00004580: 6d65 210a 0a46 6f72 2074 6865 2070 6f77  me!..For the pow
+00004590: 6572 6564 2062 7920 726f 626f 7469 6373  ered by robotics
+000045a0: 2074 6f6f 6c62 6f78 2062 6164 6765 0a0a   toolbox badge..
+000045b0: 5b21 5b50 6f77 6572 6564 2062 7920 7468  [![Powered by th
+000045c0: 6520 526f 626f 7469 6373 2054 6f6f 6c62  e Robotics Toolb
+000045d0: 6f78 5d28 6874 7470 733a 2f2f 7261 772e  ox](https://raw.
+000045e0: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
+000045f0: 742e 636f 6d2f 7065 7465 7263 6f72 6b65  t.com/petercorke
+00004600: 2f72 6f62 6f74 6963 732d 746f 6f6c 626f  /robotics-toolbo
+00004610: 782d 7079 7468 6f6e 2f6d 6173 7465 722f  x-python/master/
+00004620: 2e67 6974 6875 622f 7376 672f 7274 625f  .github/svg/rtb_
+00004630: 706f 7765 7265 642e 6d69 6e2e 7376 6729  powered.min.svg)
+00004640: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00004650: 2e63 6f6d 2f70 6574 6572 636f 726b 652f  .com/petercorke/
+00004660: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00004670: 2d70 7974 686f 6e29 0a0a 636f 7079 2074  -python)..copy t
+00004680: 6865 2066 6f6c 6c6f 7769 6e67 0a0a 6060  he following..``
+00004690: 600a 5b21 5b50 6f77 6572 6564 2062 7920  `.[![Powered by 
+000046a0: 7468 6520 526f 626f 7469 6373 2054 6f6f  the Robotics Too
+000046b0: 6c62 6f78 5d28 6874 7470 733a 2f2f 7261  lbox](https://ra
+000046c0: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
+000046d0: 656e 742e 636f 6d2f 7065 7465 7263 6f72  ent.com/petercor
+000046e0: 6b65 2f72 6f62 6f74 6963 732d 746f 6f6c  ke/robotics-tool
+000046f0: 626f 782d 7079 7468 6f6e 2f6d 6173 7465  box-python/maste
+00004700: 722f 2e67 6974 6875 622f 7376 672f 7274  r/.github/svg/rt
+00004710: 625f 706f 7765 7265 642e 6d69 6e2e 7376  b_powered.min.sv
+00004720: 6729 5d28 6874 7470 733a 2f2f 6769 7468  g)](https://gith
+00004730: 7562 2e63 6f6d 2f70 6574 6572 636f 726b  ub.com/petercork
+00004740: 652f 726f 626f 7469 6373 2d74 6f6f 6c62  e/robotics-toolb
+00004750: 6f78 2d70 7974 686f 6e29 0a60 6060 0a0a  ox-python).```..
+00004760: 466f 7220 7468 6520 706f 7765 7265 6420  For the powered 
+00004770: 6279 2070 7974 686f 6e20 726f 626f 7469  by python roboti
+00004780: 6373 2062 6164 6765 0a0a 5b21 5b50 6f77  cs badge..[![Pow
+00004790: 6572 6564 2062 7920 5079 7468 6f6e 2052  ered by Python R
+000047a0: 6f62 6f74 6963 735d 2868 7474 7073 3a2f  obotics](https:/
+000047b0: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
+000047c0: 6f6e 7465 6e74 2e63 6f6d 2f70 6574 6572  ontent.com/peter
+000047d0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+000047e0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 6d61  oolbox-python/ma
+000047f0: 7374 6572 2f2e 6769 7468 7562 2f73 7667  ster/.github/svg
+00004800: 2f70 725f 706f 7765 7265 642e 6d69 6e2e  /pr_powered.min.
+00004810: 7376 6729 5d28 6874 7470 733a 2f2f 6769  svg)](https://gi
+00004820: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
+00004830: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
+00004840: 6c62 6f78 2d70 7974 686f 6e29 0a0a 636f  lbox-python)..co
+00004850: 7079 2074 6865 2066 6f6c 6c6f 7769 6e67  py the following
+00004860: 0a0a 6060 600a 5b21 5b50 6f77 6572 6564  ..```.[![Powered
+00004870: 2062 7920 5079 7468 6f6e 2052 6f62 6f74   by Python Robot
+00004880: 6963 735d 2868 7474 7073 3a2f 2f72 6177  ics](https://raw
+00004890: 2e67 6974 6875 6275 7365 7263 6f6e 7465  .githubuserconte
+000048a0: 6e74 2e63 6f6d 2f70 6574 6572 636f 726b  nt.com/petercork
+000048b0: 652f 726f 626f 7469 6373 2d74 6f6f 6c62  e/robotics-toolb
+000048c0: 6f78 2d70 7974 686f 6e2f 6d61 7374 6572  ox-python/master
+000048d0: 2f2e 6769 7468 7562 2f73 7667 2f70 725f  /.github/svg/pr_
+000048e0: 706f 7765 7265 642e 6d69 6e2e 7376 6729  powered.min.svg)
+000048f0: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00004900: 2e63 6f6d 2f70 6574 6572 636f 726b 652f  .com/petercorke/
+00004910: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00004920: 2d70 7974 686f 6e29 0a60 6060 0a0a 3c62  -python).```..<b
+00004930: 723e 0a0a 3c61 2069 643d 2738 273e 3c2f  r>..<a id='8'></
+00004940: 613e 0a0a 2323 2043 6f6d 6d6f 6e20 4973  a>..## Common Is
+00004950: 7375 6573 2061 6e64 2053 6f6c 7574 696f  sues and Solutio
+00004960: 6e73 0a0a 5365 6520 7468 6520 636f 6d6d  ns..See the comm
+00004970: 6f6e 2069 7373 7565 7320 7769 7468 2066  on issues with f
+00004980: 6978 6573 205b 6865 7265 5d28 6874 7470  ixes [here](http
+00004990: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f70  s://github.com/p
+000049a0: 6574 6572 636f 726b 652f 726f 626f 7469  etercorke/roboti
+000049b0: 6373 2d74 6f6f 6c62 6f78 2d70 7974 686f  cs-toolbox-pytho
+000049c0: 6e2f 7769 6b69 2f43 6f6d 6d6f 6e2d 4973  n/wiki/Common-Is
+000049d0: 7375 6573 292e 0a                        sues)..
```

### Comparing `roboticstoolbox-python-1.0.3/README.md` & `roboticstoolbox-python-1.1.0/README.md`

 * *Files 1% similar despite different names*

```diff
@@ -3,20 +3,19 @@
 [![A Python Robotics Package](https://raw.githubusercontent.com/petercorke/robotics-toolbox-python/master/.github/svg/py_collection.min.svg)](https://github.com/petercorke/robotics-toolbox-python)
 [![Powered by Spatial Maths](https://raw.githubusercontent.com/petercorke/spatialmath-python/master/.github/svg/sm_powered.min.svg)](https://github.com/petercorke/spatialmath-python)
 [![QUT Centre for Robotics Open Source](https://github.com/qcr/qcr.github.io/raw/master/misc/badge.svg)](https://qcr.github.io)
 
 [![PyPI version](https://badge.fury.io/py/roboticstoolbox-python.svg)](https://badge.fury.io/py/roboticstoolbox-python)
 [![Anaconda version](https://anaconda.org/conda-forge/roboticstoolbox-python/badges/version.svg)](https://anaconda.org/conda-forge/roboticstoolbox-python)
 ![PyPI - Python Version](https://img.shields.io/pypi/pyversions/roboticstoolbox-python.svg)
-[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
 
-[![Build Status](https://github.com/petercorke/robotics-toolbox-python/workflows/build/badge.svg?branch=master)](https://github.com/petercorke/robotics-toolbox-python/actions?query=workflow%3Abuild)
+[![Build Status](https://github.com/petercorke/robotics-toolbox-python/workflows/Test/badge.svg?branch=master)](https://github.com/petercorke/robotics-toolbox-python/actions?query=workflow%3ATest)
 [![Coverage](https://codecov.io/gh/petercorke/robotics-toolbox-python/branch/master/graph/badge.svg)](https://codecov.io/gh/petercorke/robotics-toolbox-python)
-[![Language grade: Python](https://img.shields.io/lgtm/grade/python/g/petercorke/robotics-toolbox-python.svg?logo=lgtm&logoWidth=18)](https://lgtm.com/projects/g/petercorke/robotics-toolbox-python/context:python)
 [![PyPI - Downloads](https://img.shields.io/pypi/dw/roboticstoolbox-python)](https://pypistats.org/packages/roboticstoolbox-python)
+[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
 
 <table style="border:0px">
 <tr style="border:0px">
 <td style="border:0px">
 <img src="https://github.com/petercorke/robotics-toolbox-python/raw/master/docs/figs/RobToolBox_RoundLogoB.png" width="200"></td>
 <td style="border:0px">
 A Python implementation of the <a href="https://github.com/petercorke/robotics-toolbox-matlab">Robotics Toolbox for MATLAB<sup>&reg;</sup></a>
```

#### html2text {}

```diff
@@ -6,26 +6,23 @@
 github.com/petercorke/spatialmath-python) [![QUT Centre for Robotics Open
 Source](https://github.com/qcr/qcr.github.io/raw/master/misc/badge.svg)](https:
 //qcr.github.io) [![PyPI version](https://badge.fury.io/py/roboticstoolbox-
 python.svg)](https://badge.fury.io/py/roboticstoolbox-python) [![Anaconda
 version](https://anaconda.org/conda-forge/roboticstoolbox-python/badges/
 version.svg)](https://anaconda.org/conda-forge/roboticstoolbox-python) ![PyPI -
 Python Version](https://img.shields.io/pypi/pyversions/roboticstoolbox-
-python.svg) [![License: MIT](https://img.shields.io/badge/License-MIT-
-yellow.svg)](https://opensource.org/licenses/MIT) [![Build Status](https://
-github.com/petercorke/robotics-toolbox-python/workflows/build/
-badge.svg?branch=master)](https://github.com/petercorke/robotics-toolbox-
-python/actions?query=workflow%3Abuild) [![Coverage](https://codecov.io/gh/
-petercorke/robotics-toolbox-python/branch/master/graph/badge.svg)](https://
-codecov.io/gh/petercorke/robotics-toolbox-python) [![Language grade: Python]
-(https://img.shields.io/lgtm/grade/python/g/petercorke/robotics-toolbox-
-python.svg?logo=lgtm&logoWidth=18)](https://lgtm.com/projects/g/petercorke/
-robotics-toolbox-python/context:python) [![PyPI - Downloads](https://
-img.shields.io/pypi/dw/roboticstoolbox-python)](https://pypistats.org/packages/
-roboticstoolbox-python)
+python.svg) [![Build Status](https://github.com/petercorke/robotics-toolbox-
+python/workflows/Test/badge.svg?branch=master)](https://github.com/petercorke/
+robotics-toolbox-python/actions?query=workflow%3ATest) [![Coverage](https://
+codecov.io/gh/petercorke/robotics-toolbox-python/branch/master/graph/
+badge.svg)](https://codecov.io/gh/petercorke/robotics-toolbox-python) [![PyPI -
+Downloads](https://img.shields.io/pypi/dw/roboticstoolbox-python)](https://
+pypistats.org/packages/roboticstoolbox-python) [![License: MIT](https://
+img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/
+MIT)
 [https://github.com/       A Python implementation of the Robotics_Toolbox_for_MATLAB
 petercorke/robotics-           * GitHub_repository
 toolbox-python/raw/master/     * Documentation
 docs/figs/                     * ICRA_Paper
 RobToolBox_RoundLogoB.png]     * Wiki_(examples_and_details)
  ## Contents - [Synopsis](#1) - [Getting going](#2) - [Tutorials](#3) - [Code
 Examples](#4) - [Toolbox Research Applications](#5) - [Toolbox ICRA Paper and
```

### Comparing `roboticstoolbox-python-1.0.3/pyproject.toml` & `roboticstoolbox-python-1.1.0/pyproject.toml`

 * *Files 13% similar despite different names*

```diff
@@ -1,138 +1,146 @@
 [project]
 
 name = "roboticstoolbox-python"
 
 description = "A Python library for robotics education and research"
 
-version = "1.0.3"
+version = "1.1.0"
 
 authors = [
     { name = "Jesse Haviland", email = "j.haviland@qut.edu.au" },
     { name = "Peter Corke", email = "rvc@petercorke.com" },
 ]
 
 dependencies = [
     "numpy>=1.17.4",
-    "spatialmath-python~=1.0.0",
-    "spatialgeometry~=1.0.0",
+    "spatialmath-python>=1.1.5",
+    "spatialgeometry>=1.0.0",
     "pgraph-python",
     "scipy",
     "matplotlib",
     "ansitable",
-    "swift-sim~=1.0.0",
+    "swift-sim>=1.0.0",
     "rtb-data",
     "progress",
+    "typing_extensions",
 ]
 
-license = {file = "LICENSE"}
+license = { file = "LICENSE" }
 
 readme = "README.md"
 
 requires-python = ">=3.7"
 
-keywords = ["python", "robotics", "robotics-toolbox", "kinematics", "dynamics", "motion-planning", "trajectory-generation", "jacobian", "hessian", "control", "simulation", "robot-manipulator", "mobile-robot"]
+keywords = [
+    "python",
+    "robotics",
+    "robotics-toolbox",
+    "kinematics",
+    "dynamics",
+    "motion-planning",
+    "trajectory-generation",
+    "jacobian",
+    "hessian",
+    "control",
+    "simulation",
+    "robot-manipulator",
+    "mobile-robot",
+]
 
 classifiers = [
-        "Development Status :: 5 - Production/Stable",
-        # Indicate who your project is intended for
-        "Intended Audience :: Developers",
-        # Pick your license as you wish (should match "license" above)
-        "License :: OSI Approved :: MIT License",
-        # Specify the Python versions you support here.
-        "Programming Language :: Python :: 3.7",
-        "Programming Language :: Python :: 3.8",
-        "Programming Language :: Python :: 3.9",
-        "Programming Language :: Python :: 3.10",
-        "Programming Language :: Python :: 3.11",
+    "Development Status :: 5 - Production/Stable",
+    # Indicate who your project is intended for
+    "Intended Audience :: Developers",
+    # Pick your license as you wish (should match "license" above)
+    "License :: OSI Approved :: MIT License",
+    # Specify the Python versions you support here.
+    "Programming Language :: Python :: 3.7",
+    "Programming Language :: Python :: 3.8",
+    "Programming Language :: Python :: 3.9",
+    "Programming Language :: Python :: 3.10",
+    "Programming Language :: Python :: 3.11",
 ]
 
 
 [project.urls]
 homepage = "https://github.com/petercorke/robotics-toolbox-python"
 documentation = "https://petercorke.github.io/robotics-toolbox-python/"
 repository = "https://github.com/petercorke/robotics-toolbox-python"
 
 
-
 [project.optional-dependencies]
 
-collision = [
-    "pybullet"
-]
+collision = ["pybullet"]
 
 dev = [
     "black",
     "pytest",
     "pytest-cov",
     "flake8",
     "pyyaml",
     "sympy",
+    "qpsolvers",
+    "quadprog",
+    "pybullet",
+    "bdsim",
 ]
 
 docs = [
     "sphinx",
     "sphinx_rtd_theme",
-    "sphinx-autorun", 
+    "sphinx-autorun",
+    "sphinx_autodoc_typehints",
+    "sphinx-favicon"
 ]
 
 
-
 [project.scripts]
 
 eigdemo = "roboticstoolbox.examples.eigdemo:main"
 tripleangledemo = "roboticstoolbox.examples.tripleangledemo:main"
 twistdemo = "roboticstoolbox.examples.twistdemo:main"
-
-
-
-# [project.entry-points]
-
-
-
+rtbtool = "roboticstoolbox.bin.rtbtool:main"
 
 
 [build-system]
 
-requires = [
-    "setuptools",
-    "oldest-supported-numpy"
-]
+requires = ["setuptools", "oldest-supported-numpy"]
 build-backend = "setuptools.build_meta"
 
 
-
 [tool.setuptools]
 
 packages = [
     "roboticstoolbox",
     "roboticstoolbox.backends",
     "roboticstoolbox.backends.PyPlot",
     "roboticstoolbox.backends.swift",
-    "roboticstoolbox.backends.VPython",
     "roboticstoolbox.bin",
     "roboticstoolbox.blocks",
     "roboticstoolbox.examples",
+    "roboticstoolbox.bin",
     "roboticstoolbox.robot",
     "roboticstoolbox.mobile",
     "roboticstoolbox.models",
     "roboticstoolbox.models.DH",
     "roboticstoolbox.models.ETS",
     "roboticstoolbox.models.URDF",
     "roboticstoolbox.tools",
     "roboticstoolbox.tools.urdf",
     "roboticstoolbox.tools.xacro",
 ]
 
 
-
 [tool.black]
 
 line-length = 88
 target_version = ['py37']
+args = '--experimental-string-processing'
+
 include = '\.pyi?$'
 exclude = '''
 
 (
   /(
       \.eggs         # exclude a few common directories in the
     | \.git          # root of the project
@@ -147,17 +155,17 @@
     | dist
     | docs
   )/
 )
 '''
 
 
-
 [tool.flake8]
 
+ignore = ['F821', 'W503', 'E741']
 max-line-length = 88
 extend-ignore = 'E203'
 
 
 [tool.cibuildwheel]
 
 # Will cause the wheel to be installed with `pip install <wheel_file>[dev,collision]`
@@ -188,8 +196,9 @@
 
 [tool.cibuildwheel.windows]
 
 # On an Windows Intel runner build wheels
 archs = ["AMD64", "x86"]
 
 
-
+[tool.coverage.run]
+omit = ["roboticstoolbox/examples/*", "test_*.py"]
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/__init__.py`

 * *Files 21% similar despite different names*

```diff
@@ -9,41 +9,42 @@
 
 __all__ = [
     # Aliased
     "models",
     "backends",
     # robot
     "Robot",
+    "Robot2",
     "SerialLink",
     "DHRobot",
     "Link",
     "DHLink",
     "RevoluteDH",
     "PrismaticDH",
     "RevoluteMDH",
     "PrismaticMDH",
     "PoERobot",
     "PoELink",
     "PoEPrismatic",
     "PoERevolute",
-    "ERobot",
     "ELink",
     "ELink2",
     "Link",
     "Link2",
     "ERobot",
     "ERobot2",
     "ETS",
     "ETS2",
     "Gripper",
     "ET",
     "ET2",
     # tools
     "null",
     "angle_axis",
+    "angle_axis_python",
     "p_servo",
     "Ticker",
     "quintic",
     "quintic_func",
     "jtraj",
     "ctraj",
     "trapezoidal",
@@ -90,7 +91,13 @@
     "BinaryOccupancyGrid",
     "OccupancyGrid",
     "PlannerBase",
     "RRTPlanner",
     "EKF",
     "ParticleFilter",
 ]
+
+try:
+    import importlib.metadata
+    __version__ = importlib.metadata.version("roboticstoolbox-python")
+except:
+    pass
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/backends/Connector.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/backends/Connector.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/EllipsePlot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/EllipsePlot.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 #!/usr/bin/env python
 """
 @author Jesse Haviland
 """
 
 import numpy as np
+
 # import scipy as sp
 from spatialmath import base
 import matplotlib.pyplot as plt
 
 
 class ShapePlot:
     def __init__(self, shape, wireframe=True, **kwargs):
-
         self.shape = shape  # reference to the spatialgeom shape
         self.wireframe = wireframe
         self.args = kwargs
         self.mpl = None
 
     def plot(self):
         if ax is None:
@@ -48,27 +48,26 @@
             pass
 
     def make(self):
         pass
 
 
 class EllipsePlot:
-    def __init__(self, robot, q, etype, opt="trans", centre=[0, 0, 0], scale=1):
-
+    def __init__(self, robot, q, etype, opt="trans", centre=[0, 0, 0], scale=1.0):
         super(EllipsePlot, self).__init__()
 
         try:
             centre = base.getvector(centre, 3)
         except ValueError:
             centre = base.getvector(centre, 2)
             centre = np.array([centre[0], centre[1], 0])
         except TypeError:
             if centre != "ee":
                 raise ValueError(
-                    "Centre must be a three vector or 'ee' meaning" "end-effector"
+                    "Centre must be a three vector or 'ee' meaningend-effector"
                 )
 
         self.ell = None
         self.robot = robot
         self.opt = opt
         self.centre = centre
         self.ax = None
@@ -86,15 +85,19 @@
             self.vell = False
             self.name = "Force Ellipse"
 
     def draw(self):
         self.make_ellipsoid()
 
         if self.ell is not None:
-            self.ax.collections.remove(self.ell)
+            self.ell.remove()
+            # print(type(self.ell))
+            # print(type(self.ax))
+            # assert True == False
+            # self.ax.collections.remove(self.ell)
 
         self.ell = self.ax.plot_wireframe(
             self.x, self.y, self.z, rstride=6, cstride=6, color="#2980b9", alpha=0.2
         )
 
     def draw2(self):
         self.make_ellipsoid2()
@@ -176,33 +179,25 @@
         """
 
         if self.opt == "trans":
             J = self.robot.jacob0(self.q)[:2, :]
             A = J @ J.T
         elif self.opt == "rot":
             raise ValueError(
-                "Can not do rotational ellipse for a 2d robot plot." " Set opt='trans'"
+                "Can not do rotational ellipse for a 2d robot plot. Set opt='trans'"
             )
 
-        # if not self.vell:
-        #     # Do the extra step for the force ellipse
-        #     try:
-        #         A = np.linalg.inv(A)
-        #     except:
-        #         A = np.zeros((2,2))
+        # velocity ellipsoid is E = A^-1
+        # force ellipsoid is E = A
+        #
+        # rather than compute the inverse we can have base.ellipse()  do it for us
+        # using the inverted argument. For the velocity ellipse we already have the 
+        # inverse of E, it is A, so we set inverted=True.
 
         if isinstance(self.centre, str) and self.centre == "ee":
             centre = self.robot.fkine(self.q).A[:3, -1]
         else:
             centre = self.centre
 
-        # points on unit circle
-        # theta = np.linspace(0.0, 2.0 * np.pi, 50)
-        # y = np.array([np.cos(theta), np.sin(theta)])
-        # RVC2 p 602
-        # x = sp.linalg.sqrtm(A) @ y
-
-        x, y = base.ellipse(A, inverted=True, centre=centre[:2], scale=self.scale)
+        x, y = base.ellipse(A, inverted=self.vell, centre=centre[:2], scale=self.scale)
         self.x = x
         self.y = y
-        # = x[0,:] * self.scale + centre[0]
-        # self.y = x[1,:] * self.scale + centre[1]
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/PyPlot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/PyPlot.py`

 * *Files 2% similar despite different names*

```diff
@@ -16,14 +16,15 @@
 
 _mpl = False
 _pil = None
 
 try:
     import matplotlib
     import matplotlib.pyplot as plt
+
     # from mpl_toolkits.mplot3d import Axes3D
     from matplotlib.widgets import Slider
 
     matplotlib.rcParams["pdf.fonttype"] = 42
     matplotlib.rcParams["ps.fonttype"] = 42
     plt.style.use("ggplot")
     matplotlib.rcParams["font.size"] = 7
@@ -73,18 +74,26 @@
         if not _mpl:  # pragma nocover
             raise ImportError(
                 "\n\nYou do not have matplotlib installed, do:\n"
                 "pip install matplotlib\n\n"
             )
 
     def __repr__(self):
-        s = f"PyPlot3D backend, t = {self.sim_time}, scene:"
+        s = ""
         for robot in self.robots:
-            s += f"\n  {robot.robot.name}"
-        return s
+            s += f"  robot: {robot.name}\n"
+        for ellipse in self.ellipses:
+            s += f"  ellipse: {ellipse}\n"
+        for shape in self.shapes:
+            s += f"  shape: {shape}\n"
+
+        if s == "":
+            return f"PyPlot3D backend, t = {self.sim_time}, empty scene"
+        else:
+            return f"PyPlot3D backend, t = {self.sim_time}, scene:\n" + s
 
     def launch(self, name=None, fig=None, limits=None, **kwargs):
         """
         Launch a graphical interface
 
         ```env = launch()``` creates a blank 3D matplotlib figure and returns
         a reference to the backend.
@@ -185,15 +194,15 @@
             elif robot.control_mode == "v":
                 for i in range(robot.n):
                     robot.q[i] += robot.qd[i] * (dt)
             elif robot.control_mode == "a":  # pragma: no cover
                 pass
             else:  # pragma: no cover
                 raise ValueError(
-                    "Invalid robot.control_type. " "Must be one of 'p', 'v', or 'a'"
+                    "Invalid robot.control_type. Must be one of 'p', 'v', or 'a'"
                 )
 
         # plt.ioff()
 
         # update all ellipses
         for ellipse in self.ellipses:
             ellipse.draw()
@@ -307,15 +316,19 @@
             - Adds the robot object to a list of robots which will be updated
               when the ``step()`` method is called.
 
         """
 
         super().add()
 
-        if isinstance(ob, rp.DHRobot) or isinstance(ob, rp.ERobot):
+        if (
+            isinstance(ob, rp.DHRobot)
+            or isinstance(ob, rp.ERobot)
+            or isinstance(ob, rp.Robot)
+        ):
             self.robots.append(
                 RobotPlot(
                     ob,
                     self,
                     readonly,
                     display,
                     jointaxes,
@@ -341,14 +354,15 @@
             self.shapes[-1].draw(ax=self.ax)
             id = len(self.shapes)
 
         plt.draw()  # matplotlib refresh
         plt.show(block=False)
 
         self._set_axes_equal()
+
         return id
 
     def remove(self, id):
         """
         Remove a robot or shape from the graphical scene
 
         :param id: The id of the robot to remove. Can be either the DHLink or
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/PyPlot2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/PyPlot2.py`

 * *Files 4% similar despite different names*

```diff
@@ -43,31 +43,38 @@
         if not _mpl:  # pragma nocover
             raise ImportError(
                 "\n\nYou do not have matplotlib installed, do:\n"
                 "pip install matplotlib\n\n"
             )
 
     def __repr__(self):
-        s = f"PyPlot2D backend, t = {self.sim_time}, scene:"
+        s = ""
         for robot in self.robots:
-            s += f"\n  {robot.name}"
-        return s
+            s += f"  robot: {robot.name}\n"
+        for ellipse in self.ellipses:
+            s += f"  ellipse: {ellipse}\n"
+
+        if s == "":
+            return f"PyPlot2D backend, t = {self.sim_time}, empty scene"
+        else:
+            return f"PyPlot2D backend, t = {self.sim_time}, scene:\n" + s
 
     def launch(self, name=None, limits=None, **kwargs):
         """
         env = launch() launchs a blank 2D matplotlib figure
 
         """
 
         super().launch()
 
         labels = ["X", "Y"]
 
-        if name is not None:
-            self.fig = plt.figure(name)
+        if name is not None and not _isnotebook():
+            # jupyter does weird stuff when figures have the same name
+            self.fig = plt.figure()
         else:
             self.fig = plt.figure()
 
         # Create a 2D axes
         self.ax = self.fig.add_subplot(1, 1, 1)
         self.ax.set_facecolor("white")
         plt.get_current_fig_manager().set_window_title(
@@ -168,15 +175,15 @@
         be of an appropriate class. This adds a robot object to a list of
         robots which will act upon the step() method being called.
 
         """
 
         super().add()
 
-        if isinstance(ob, rp.ERobot2):
+        if isinstance(ob, rp.Robot2):
             self.robots.append(RobotPlot2(ob, self, readonly, display, eeframe, name))
             self.robots[len(self.robots) - 1].draw()
 
         elif isinstance(ob, EllipsePlot):
             ob.ax = self.ax
             self.ellipses.append(ob)
             self.ellipses[len(self.ellipses) - 1].draw2()
@@ -224,15 +231,15 @@
 
             elif robot.control_type == "a":  # pragma: no cover
                 pass
 
             else:  # pragma: no cover
                 # Should be impossible to reach
                 raise ValueError(
-                    "Invalid robot.control_type. " "Must be one of 'p', 'v', or 'a'"
+                    "Invalid robot.control_type. Must be one of 'p', 'v', or 'a'"
                 )
 
     def _update_robots(self):
         pass
 
     def _draw_robots(self):
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/RobotPlot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/RobotPlot.py`

 * *Files 8% similar despite different names*

```diff
@@ -18,15 +18,14 @@
         jointaxes=True,
         jointlabels=False,
         eeframe=True,
         shadow=True,
         name=True,
         options=None,
     ):
-
         super(RobotPlot, self).__init__()
 
         # Readonly - True for this robot is for displaying only
         self.readonly = readonly
 
         # To show to robot in the plot or not
         # If not displayed, the robot is still simulated
@@ -125,15 +124,15 @@
             len = self.options["eelength"]
             Tjx = SE3([len, 0, 0])
             Tjy = SE3([0, len, 0])
             Tjz = SE3([0, 0, len])
 
             # add new ee coordinate frame
             for link in self.robot.ee_links:
-                Te = T[link.number]
+                Te = T[link.number] * self.robot.tool
 
                 # ee axes arrows
                 Tex = Te * Tjx
                 Tey = Te * Tjy
                 Tez = Te * Tjz
 
                 xaxis = self._plot_quiver(Te.t, Tex.t, self.options["eex"])
@@ -152,19 +151,23 @@
             # del self.joints
             self.joints = []
 
         # add new joint axes
         if self.jointaxes:
             # Plot joint z coordinates
             for link in self.robot:
-
                 direction = None
                 if isinstance(self.robot, rp.DHRobot):
                     # should test MDH I think
-                    Tj = T[link.number - 1]
+
+                    if self.robot.mdh:
+                        Tj = T[link.number]
+                    else:
+                        Tj = T[link.number - 1]
+
                     R = Tj.R
                     direction = R[:, 2]  # z direction
                 elif link.isjoint:
                     Tj = T[link.number]
                     R = Tj.R
                     if link.v.axis[1] == "z":
                         direction = R[:, 2]  # z direction
@@ -174,15 +177,14 @@
                         direction = R[:, 0]  #  direction
 
                 if direction is not None:
                     arrow = self._plot_quiver2(Tj.t, direction, link.jindex)
                     self.joints.extend(arrow)
 
     def init(self):
-
         self.drawn = True
 
         if self.env.limits is None:
             limits = np.r_[-1, 1, -1, 1, -1, 1] * self.robot.reach
             # TODO: need to select between full autoscaling, user set bounds,
             #   bounds from robot.reach.  Currently only 2 options
             # self.ax.set_xlim3d([limits[0], limits[1]])
@@ -199,15 +201,14 @@
         if self.showname:
             self.name = self.ax.text(Tb.t[0], Tb.t[1], 0.05, self.robot.name)
 
         # Initialize the robot links
         self.links = []
         self.sh_links = []
         for i in range(len(self.segments)):
-
             # Plot the shadow of the robot links, draw first so robot is always
             # in front
             if self.shadow:
                 (shadow,) = self.ax.plot([0], [0], zorder=1, **self.options["shadow"])
                 self.sh_links.append(shadow)
 
             (line,) = self.ax.plot([0], [0], [0], **self.options["robot"])
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/backends/PyPlot/RobotPlot2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/backends/PyPlot/RobotPlot2.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/arm.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/arm.py`

 * *Files 23% similar despite different names*

```diff
@@ -1,13 +1,14 @@
 import numpy as np
 from math import sin, cos, pi
 
 # import matplotlib.pyplot as plt
 import time
-from spatialmath import base, SE3
+from spatialmath import SE3
+import spatialmath.base as smb
 
 from bdsim.components import TransferBlock, FunctionBlock, SourceBlock
 from bdsim.graphics import GraphicsBlock
 
 from roboticstoolbox import quintic_func, trapezoidal_func
 
 """
@@ -15,923 +16,1485 @@
 - have inputs and outputs
 - are a subclass of ``FunctionBlock`` |rarr| ``Block`` for kinematics and have no states
 - are a subclass of ``TransferBlock`` |rarr| ``Block`` for dynamics and have states
 
 """
 # The constructor of each class ``MyClass`` with a ``@block`` decorator becomes a method ``MYCLASS()`` of the BlockDiagram instance.
 
+
 # ------------------------------------------------------------------------ #
 class FKine(FunctionBlock):
-    """
+    r"""
     :blockname:`FKINE`
 
-    .. table::
-       :align: left
+    Robot arm forward kinematics.
+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`
+        *   - Output
+            - 0
+            - SE3
+            - :math:`\mathbf{T}`
+
+    Compute the end-effector pose as an SE(3) object as a function of the input joint
+    configuration.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray    | SE3     |         |
-    +------------+---------+---------+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.fkine`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('q',)
-    outlabels = ('T',)
+    inlabels = ("q",)
+    outlabels = ("T",)
 
     def __init__(self, robot=None, args={}, **blockargs):
         """
         :param ``*inputs``: Optional incoming connections
         :type ``*inputs``: Block or Plug
         :param robot: Robot model, defaults to None
         :type robot: Robot subclass, optional
         :param args: Options for fkine, defaults to {}
         :type args: dict, optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a FORWARD_KINEMATICS block
-        :rtype: Foward_Kinematics instance
-
-        Robot arm forward kinematic model.
-
-        **Block ports**
-
-            :input q: Joint configuration vector as an ndarray.
-
-            :output T: End-effector pose as an SE(3) object
         """
         if robot is None:
-            raise ValueError('robot is not defined')
+            raise ValueError("robot is not defined")
 
         super().__init__(**blockargs)
-        self.type = "forward-kinematics"
+        # self.type = "forward-kinematics"
 
         self.robot = robot
         self.args = args
 
         self.inport_names(("q",))
         self.outport_names(("T",))
 
-    def output(self, t=None):
-        q = self.inputs[0]
-        return [self.robot.fkine(self.inputs[0], **self.args)]
+    def output(self, t, inports, x):
+        q = inports[0]
+        return [self.robot.fkine(q, **self.args)]
+
+
+# ------------------------------------------------------------------------ #
 
 
 class IKine(FunctionBlock):
-    """
+    r"""
     :blockname:`IKINE`
 
-    .. table::
-       :align: left
+    Robot arm inverse kinematics.
+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - SE3
+            - :math:`\mathbf{T}`
+        *   - Output
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`
+
+    Compute joint configuration required to achieve end-effector pose input as
+    an SE(3) object.
+
+    :note: The solution may not exist and is not unique.  The solution will depend
+        on the initial joint configuration ``q0``.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | SE3        | ndarray |         |
-    +------------+---------+---------+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.ik_LM`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('T',)
-    outlabels = ('q',)
+    inlabels = ("T",)
+    outlabels = ("q",)
 
     def __init__(
-        self, robot=None, q0=None, useprevious=True, ik=None, **blockargs
+        self,
+        robot=None,
+        q0=None,
+        useprevious=True,
+        ik=None,
+        args={},
+        seed=None,
+        **blockargs,
     ):
         """
         :param robot: Robot model, defaults to None
         :type robot: Robot subclass, optional
         :param q0: Initial joint angles, defaults to None
         :type q0: array_like(n), optional
         :param useprevious: Use previous IK solution as q0, defaults to True
         :type useprevious: bool, optional
-        :param ik: Specify an IK function, defaults to 'ikine_LM'
-        :type ik: callable f(T)
+        :param ik: Specify an IK function, defaults to ``Robot.ikine_LM``
+        :type ik: callable
+        :param args: Options passed to IK function
+        :type args: dict
+        :param seed: random seed for solution
+        :type seed: int
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: an INVERSE_KINEMATICS block
-        :rtype: Inverse_Kinematics instance
-
-        Robot arm inverse kinematic model.
-
-        The block has one input port:
-
-            1. End-effector pose as an SE(3) object
-
-        and one output port:
-
-            1. Joint configuration vector as an ndarray.
-
-
         """
         if robot is None:
-            raise ValueError('robot is not defined')
+            raise ValueError("robot is not defined")
 
         super().__init__(**blockargs)
-        self.type = "inverse-kinematics"
+        # self.type = "inverse-kinematics"
 
         self.robot = robot
         self.q0 = q0
         self.qprev = q0
         self.useprevious = useprevious
-        self.ik = None
+        if ik is None:
+            ik = robot.ikine_LM
+        self.ik = ik
+        self.args = args
+        self.seed = 0
 
         self.inport_names(("T",))
         self.outport_names(("q",))
 
     def start(self):
         super().start()
         if self.useprevious:
             self.qprev = self.q0
 
-    def output(self, t=None):
+    def output(self, t, inports, x):
         if self.useprevious:
             q0 = self.qprev
         else:
             q0 = self.q0
 
-        if self.ik is None:
-            sol = self.robot.ikine_LM(self.inputs[0], q0=q0)
-        else:
-            sol = self.ik(self.inputs[0])
+        sol = self.ik(inports[0], q0=q0, seed=self.seed, **self.args)
 
         if not sol.success:
-            raise RuntimeError("inverse kinematic failure for pose", self.inputs[0])
+            raise RuntimeError("inverse kinematic failure for pose", inports[0])
 
         if self.useprevious:
             self.qprev = sol.q
 
         return [sol.q]
 
 
 # ------------------------------------------------------------------------ #
 
+
 class Jacobian(FunctionBlock):
-    """
+    r"""
     :blockname:`JACOBIAN`
 
-    .. table::
-       :align: left
+    Robot arm Jacobian matrix.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray |         |
-    +------------+---------+---------+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`
+        *   - Output
+            - 0
+            - ndarray(N,N)
+            - :math:`\mathbf{J}`
+
+    Compute the Jacobian matrix as a function of the input joint configuration.  The
+    Jacobian can be computed in the world or end-effector frame, for spatial or
+    analytical velocity, and its inverse, damped inverse or transpose can be returned.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.jacob0`
+        :meth:`~roboticstoolbox.robot.Robot.Robot.jacobe`
+        :meth:`~roboticstoolbox.robot.Robot.Robot.jacob0_analytical`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('q',)
-    outlabels = ('J',)
+    inlabels = ("q",)
+    outlabels = ("J",)
 
     def __init__(
         self,
         robot,
         frame="0",
+        representation=None,
         inverse=False,
         pinv=False,
+        damping=None,
         transpose=False,
-        **blockargs
+        **blockargs,
     ):
         """
         :param robot: Robot model
         :type robot: Robot subclass
-        :param frame: Frame to compute Jacobian for, one of: '0' [default], 'e'
+        :param frame: Frame to compute Jacobian for, one of: "0" [default], "e"
         :type frame: str, optional
+        :param representation: representation for analytical Jacobian
+        :type representation: str, optional
         :param inverse: output inverse of Jacobian, defaults to False
         :type inverse: bool, optional
         :param pinv: output pseudo-inverse of Jacobian, defaults to False
         :type pinv: bool, optional
+        :param damping: damping term for inverse, defaults to None
+        :type damping: float or array_like(N)
         :param transpose: output transpose of Jacobian, defaults to False
         :type transpose: bool, optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a JACOBIAN block
-        :rtype: Jacobian instance
-
-        Robot arm Jacobian.
-
-        The block has one input port:
 
-            1. Joint configuration vector as an ndarray.
+        If an inverse is requested and ``damping`` is not None it is added to the
+        diagonal of the Jacobian prior to the inversion.  If a scalar is provided it is
+        added to each element of the diagonal, otherwise an N-vector is assumed.
 
-        and one output port:
-
-            1. Jacobian matrix as an ndarray(6,n)
-
-        .. notes::
+        .. note::
             - Only one of ``inverse`` or ``pinv`` can be True
             - ``inverse`` or ``pinv`` can be used in conjunction with ``transpose``
             - ``inverse`` requires that the Jacobian is square
             - If ``inverse`` is True and the Jacobian is singular a runtime
               error will occur.
         """
         if robot is None:
-            raise ValueError('robot is not defined')
-            
+            raise ValueError("robot is not defined")
+
         super().__init__(**blockargs)
 
         self.robot = robot
 
         if frame in (0, "0"):
-            self.jfunc = robot.jacob0
+            if representation is None:
+                self.jfunc = robot.jacob0
+            else:
+                self.jfunc = lambda q: robot.jacob0_analytical(
+                    q, representation=representation
+                )
         elif frame == "e":
-            self.jfunc = robot.jacobe
+            if representation is None:
+                self.jfunc = robot.jacobe
+            else:
+                raise ValueError("cannot compute analytical Jacobian in EE frame")
         else:
             raise ValueError("unknown frame")
 
         if inverse and robot.n != 6:
             raise ValueError("cannot invert a non square Jacobian")
         if inverse and pinv:
             raise ValueError("can only set one of inverse and pinv")
         self.inverse = inverse
         self.pinv = pinv
+        self.damping = damping
         self.transpose = transpose
+        self.representation = representation
 
         self.inport_names(("q",))
         self.outport_names(("J",))
 
-    def output(self, t=None):
-        J = self.jfunc(self.inputs[0])
+    def output(self, t, inports, x):
+        q = inports[0]
+
+        J = self.jfunc(q)
+
+        # add damping term if given
+        if (self.inverse or self.pinv) and self.damping is not None:
+            D = np.zeros(J.shape)
+            np.fill_diagonal(D, self.damping)
+            J = J + D
+
+        # optionally invert the Jacobian
         if self.inverse:
             J = np.linalg.inv(J)
         if self.pinv:
             J = np.linalg.pinv(J)
+
+        # optionally transpose the Jacobian
         if self.transpose:
             J = J.T
         return [J]
 
 
-class Tr2Delta(FunctionBlock):
-    """
-    :blockname:`TR2DELTA`
+# ------------------------------------------------------------------------ #
 
-    .. table::
-       :align: left
 
-    +------------+------------+---------+
-    | inputs     | outputs    |  states |
-    +------------+------------+---------+
-    | 2          | 1          | 0       |
-    +------------+------------+---------+
-    | SE3, SE3   | ndarray(6) |         |
-    +------------+------------+---------+
+class ArmPlot(GraphicsBlock):
+    r"""
+    :blockname:`ARMPLOT`
+
+    Plot robot arm.
+
+    :inputs: 1 [ndarray(N)]
+    :outputs: 0
+    :states: 0
+
+    :inputs: 1
+    :outputs: 0
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`, joint configuration
+        *   - Output
+
+    Create a robot animation using the robot's ``plot`` method.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.plot`
     """
 
-    nin = 2
-    nout = 1
-    inlabels = ('T1', 'T2')
-    outlabels = ('',)
+    nin = 1
+    nout = 0
+    inlabels = ("q",)
 
-    def __init__(self, **blockargs):
+    def __init__(self, robot=None, q0=None, backend=None, **blockargs):
         """
+        :param robot: Robot model
+        :type robot: Robot subclass
+        :param q0: initial joint angles, defaults to None
+        :type q0: ndarray(N)
+        :param backend: RTB backend name, defaults to 'pyplot'
+        :type backend: str, optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a TR2DELTA block
-        :rtype: Tr2Delta instance
+        """
+        if robot is None:
+            raise ValueError("robot is not defined")
+
+        super().__init__(**blockargs)
+        self.inport_names(("q",))
 
-        Difference between T1 and T2 as a 6-vector
+        if q0 is None:
+            q0 = np.zeros((robot.n,))
+        self.robot = robot
+        self.backend = backend
+        self.q0 = q0
+        self.env = None
 
-        The block has two input port:
+    def start(self, simstate):
+        # create the plot
+        # super().reset()
+        # if state.options.graphics:
+        super().start(simstate)
+        self.fig = self.create_figure(simstate)
+        self.env = self.robot.plot(
+            self.q0, backend=self.backend, fig=self.fig, block=False
+        )
 
-            1. T1 as an SE3.
-            2. T2 as an SE3.
+    def step(self, t, inports):
+        # update the robot plot
+        self.robot.q = inports[0]
+        self.env.step()
+
+        super().step(t, inports)
+
+
+# ======================================================================== #
+
+
+class JTraj(SourceBlock):
+    """
+    :blockname:`JTRAJ`
 
-        and one output port:
+    Joint-space trajectory
+
+    :inputs: 0
+    :outputs: 3
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Output
+            - 0
+            - ndarray
+            - :math:`q(s)`
+        *   - Output
+            - 1
+            - ndarray
+            - :math:`\dot{q}(s)`
+        *   - Output
+            - 2
+            - ndarray
+            - :math:`\ddot{q}(s)`
+
+    Outputs a joint space trajectory where the joint coordinates vary from ``q0`` to
+    ``qf`` over the course of the simulation. A quintic (5th order) polynomial is used
+    with default zero boundary conditions for velocity and acceleration.
+
+    :seealso: :func:`~roboticstoolbox.tools.trajectory.ctraj`
+        :func:`~roboticstoolbox.tools.trajectory.xplot`
+        :func:`~roboticstoolbox.tools.trajectory.jtraj`
+    """
+
+    nin = 0
+    nout = 3
+    outlabels = ("q", "qd", "qdd")
 
-            1. delta as an ndarray(6,n)
+    def __init__(self, q0, qf, qd0=None, qdf=None, T=None, **blockargs):
+        """
 
-        :seealso: :func:`spatialmath.base.tr2delta`
+        :param q0: initial joint coordinate
+        :type q0: array_like(n)
+        :param qf: final joint coordinate
+        :type qf: array_like(n)
+        :param T: time vector or number of steps, defaults to None
+        :type T: array_like or int, optional
+        :param qd0: initial velocity, defaults to None
+        :type qd0: array_like(n), optional
+        :param qdf: final velocity, defaults to None
+        :type qdf: array_like(n), optional
+        :param blockargs: |BlockOptions|
+        :type blockargs: dict
         """
         super().__init__(**blockargs)
+        self.outport_names(
+            (
+                "q",
+                "qd",
+                "qdd",
+            )
+        )
+
+        q0 = smb.getvector(q0)
+        qf = smb.getvector(qf)
+
+        if not len(q0) == len(qf):
+            raise ValueError("q0 and q1 must be same size")
+
+        if qd0 is None:
+            qd0 = np.zeros(q0.shape)
+        else:
+            qd0 = getvector(qd0)
+            if not len(qd0) == len(q0):
+                raise ValueError("qd0 has wrong size")
+        if qdf is None:
+            qdf = np.zeros(q0.shape)
+        else:
+            qd1 = getvector(qdf)
+            if not len(qd1) == len(q0):
+                raise ValueError("qd1 has wrong size")
+
+        self.q0 = q0
+        self.qf = qf
+        self.qd0 = qd0
+        self.qdf = qf
+
+        # call start now, so that output works when called by compile
+        # set T to 1 just for now
+        if T is None:
+            self.T = 1
+        self.T = T
+
+        # valid value, to allow compile to call output() before start()
+        self.start(None)
+
+    def start(self, simstate):
+        if self.T is None:
+            # use simulation tmax
+            self.T = simstate.T
+
+        tscal = self.T
+        self.tscal = tscal
+
+        q0 = self.q0
+        qf = self.qf
+        qd0 = self.qd0
+        qdf = self.qdf
+
+        # compute the polynomial coefficients
+        A = 6 * (qf - q0) - 3 * (qdf + qd0) * tscal
+        B = -15 * (qf - q0) + (8 * qd0 + 7 * qdf) * tscal
+        C = 10 * (qf - q0) - (6 * qd0 + 4 * qdf) * tscal
+        E = qd0 * tscal
+        F = q0
+
+        self.coeffs = np.array([A, B, C, np.zeros(A.shape), E, F])
+        self.dcoeffs = np.array(
+            [np.zeros(A.shape), 5 * A, 4 * B, 3 * C, np.zeros(A.shape), E]
+        )
+        self.ddcoeffs = np.array(
+            [
+                np.zeros(A.shape),
+                np.zeros(A.shape),
+                20 * A,
+                12 * B,
+                6 * C,
+                np.zeros(A.shape),
+            ]
+        )
+
+    def output(self, t, inports, x):
+        tscal = self.tscal
+        ts = t / tscal
+        tt = np.array([ts**5, ts**4, ts**3, ts**2, ts, 1]).T
+
+        qt = tt @ self.coeffs
+
+        # compute  velocity
+        qdt = tt @ self.dcoeffs / tscal
 
-        self.inport_names(("T1", "T2"))
-        self.outport_names(("$\delta$",))
+        # compute  acceleration
+        qddt = tt @ self.ddcoeffs / tscal**2
 
-    def output(self, t=None):
-        return [base.tr2delta(self.inputs[0].A, self.inputs[1].A)]
+        return [qt, qdt, qddt]
 
 
 # ------------------------------------------------------------------------ #
 
 
-class Delta2Tr(FunctionBlock):
-    """
-    :blockname:`DELTA2TR`
+class CTraj(SourceBlock):
+    r"""
+    :blockname:`CTRAJ`
 
-    .. table::
-       :align: left
+    Task space trajectory
 
-    +------------+----------+---------+
-    | inputs     | outputs  |  states |
-    +------------+----------+---------+
-    | 1          | 1        | 0       |
-    +------------+----------+---------+
-    | ndarray(6) | SE3      |         |
-    +------------+----------+---------+
+    :inputs: 0
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Output
+            - 0
+            - SE3
+            - :math:`\mathbf{T}(t)`
+
+    The block outputs a pose that varies smoothly from ``T1`` to ``T2`` over
+    the course of ``T`` seconds.
+
+    If ``T`` is not given it defaults to the simulation time.
+
+    If ``trapezoidal`` is True then a trapezoidal motion profile is used along the path
+    to provide initial acceleration and final deceleration.  Otherwise,
+    motion is at constant velocity.
+
+    :seealso: :meth:`~spatialmath.pose3d.SE3.interp`
+        :func:`~roboticstoolbox.tools.trajectory.ctraj`
+        :func:`~roboticstoolbox.tools.trajectory.xplot`
+        :func:`~roboticstoolbox.tools.trajectory.jtraj`
     """
 
-    nin = 1
+    nin = 0
     nout = 1
-    outlabels = ('T',)
-    inlabels = ('',)
+    outlabels = ("T",)
 
-    def __init__(self, **blockargs):
+    def __init__(self, T1, T2, T, trapezoidal=True, **blockargs):
         """
+        :param T1: initial pose
+        :type T1: SE3
+        :param T2: final pose
+        :type T2: SE3
+        :param T: motion time
+        :type T: float
+        :param trapezoidal: Use LSPB motion profile along the path
+        :type trapezoidal: bool
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a DELTA2TR block
-        :rtype: Delta2Tr instance
-
-        Delta to SE(3)
-
-        The block has one input port:
-
-            1. delta as an ndarray(6,n)
+        """
 
-        and one output port:
+        # TODO
+        # flag to rotate the frame rather than just translate it
+        super().__init__(**blockargs)
 
-            1. T as an SE3
+        self.T1 = T1
+        self.T2 = T2
+        self.T = T
+        self.trapezoidal = trapezoidal
 
-        :seealso: :func:`spatialmath.base.delta2tr`
-        """
-        super().__init__(**blockargs)
+    def start(self, simstate):
+        if self.T is None:
+            self.T = simstate.T
+        if self.trapezoidal:
+            self.trapezoidalfunc = trapezoidal_func(0.0, 1.0, self.T)
 
-        self.inport_names(("$\delta$",))
-        self.outport_names(("T",))
+    def output(self, t, inports, x):
+        if self.trapezoidal:
+            s = self.trapezoidalfunc(t)
+        else:
+            s = np.min(t / self.T, 1.0)
 
-    def output(self, t=None):
-        return [SE3.Delta(self.inputs[0])]
+        return [self.T1.interp(self.T2, s)]
 
 
 # ------------------------------------------------------------------------ #
 
-class Point2Tr(FunctionBlock):
+
+class CirclePath(SourceBlock):
     """
-    :blockname:`POINT2TR`
+    :blockname:`CIRCLEPATH`
 
-    .. table::
-       :align: left
+    Circular motion.
 
-    +------------+----------+---------+
-    | inputs     | outputs  |  states |
-    +------------+----------+---------+
-    | 1          | 1        | 0       |
-    +------------+----------+---------+
-    | ndarray(3) | SE3      |         |
-    +------------+----------+---------+
+    :inputs: 0 or 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Output
+            - 0
+            - ndarray(3) or SE3
+            - :math:`\mathit{p}(t)` or :math:`\mathbf{T}(t)`
+
+    The block outputs the coordinates of a point moving in a circle of
+    radius ``r`` centred at ``centre`` and parallel to the xy-plane.
+
+    By default the output is a 3-vector :math:`(x, y, z)` but if
+    ``pose`` is an ``SE3`` instance the output is a copy of that pose with
+    its translation set to the coordinate of the moving point.  This is the
+    motion of a frame with fixed orientation following a circular path.
     """
 
-    nin = 1
+    nin = 0
     nout = 1
 
-    def __init__(self, T, **blockargs):
+    def __init__(
+        self,
+        radius=1,
+        centre=(0, 0, 0),
+        pose=None,
+        frequency=1,
+        unit="rps",
+        phase=0,
+        **blockargs,
+    ):
         """
-        :param T: the transform
-        :type T: SE3
+        :param radius: radius of circle, defaults to 1
+        :type radius: float
+        :param centre: center of circle, defaults to [0,0,0]
+        :type centre: array_like(3)
+        :param pose: SE3 pose of output, defaults to None
+        :type pose: SE3
+        :param frequency: rotational frequency, defaults to 1
+        :type frequency: float
+        :param unit: unit for frequency, one of: 'rps' [default], 'rad'
+        :type unit: str
+        :param phase: phase
+        :type phase: float
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a POINT2TR block
-        :rtype: Point2Tr instance
+        """
 
-        The block has one input port:
+        # TODO
+        # flag to rotate the frame rather than just translate it
+        super().__init__(**blockargs)
 
-            1. a 3D point as an ndarray(3)
+        if unit == "rps":
+            omega = frequency * 2 * pi
+            phase = phase * 2 * pi
+        elif unit == "rad":
+            omega = frequency
 
-        and one output port:
+            # Redundant assignment, commented for LGTM
+            # phase = phase
+        else:
+            raise ValueError("bad units: rps or rad")
 
-            1. T as an SE3 with its position part replaced by the input
+        self.radius = radius
+        assert len(centre) == 3, "centre must be a 3 vector"
+        self.centre = centre
+        self.pose = pose
+        self.omega = omega
+        self.phase = phase
 
-        :seealso: :func:`spatialmath.base.delta2tr`
-        """
-        super().__init__(**blockargs)
+        self.outport_names(("y",))
 
-        self.inport_names(("t",))
-        self.outport_names(("T",))
-        self.pose = T
+    def output(self, t, inports, x):
+        theta = t * self.omega + self.phase
+        x = self.radius * cos(theta) + self.centre[0]
+        y = self.radius * sin(theta) + self.centre[1]
+        p = (x, y, self.centre[2])
 
-    def output(self, t=None):
-        T = SE3.SO3(self.pose.R, t=self.inputs[0])
-        return [T]
+        if self.pose is not None:
+            pp = SE3.Rt(self.pose.R, p)
+            p = pp
 
+        return [p]
 
-# ------------------------------------------------------------------------ #
 
+class Trapezoidal(SourceBlock):
+    r"""
+    :blockname:`Trapezoidal`
+
+    Trapezoidal scalar trajectory
+
+    :inputs: 0
+    :outputs: 3
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Output
+            - 0
+            - float
+            - :math:`q(t)`
+        *   - Output
+            - 1
+            - float
+            - :math:`\dot{q}(t)`
+        *   - Output
+            - 2
+            - float
+            - :math:`\ddot{q}(t)`
 
-class TR2T(FunctionBlock):
-    """
-    :blockname:`TR2T`
 
-    .. table::
-       :align: left
+    Scalar trapezoidal trajectory that varies from ``q0`` to ``qf`` over the
+    simulation period.
 
-    +------------+----------+---------+
-    | inputs     | outputs  |  states |
-    +------------+----------+---------+
-    | 1          | 3        | 0       |
-    +------------+----------+---------+
-    | SE3        | float    |         |
-    +------------+----------+---------+
+    :seealso: :func:`ctraj`, :func:`qplot`, :func:`~SerialLink.jtraj`
     """
 
-    nin = 1
+    nin = 0
     nout = 3
-    inlabels = ('T',)
-    outlabels = ('x', 'y', 'z')
+    outlabels = ("q", "qd", "qdd")
+
+    # TODO: change name to Trapezoidal, check if used anywhere
 
-    def __init__(self, **blockargs):
+    def __init__(self, q0, qf, V=None, T=None, **blockargs):
         """
-        :param T: the transform
-        :type T: SE3
+        Compute a joint-space trajectory
+
+        :param q0: initial joint coordinate
+        :type q0: float
+        :param qf: final joint coordinate
+        :type qf: float
+        :param T: maximum time, defaults to None
+        :type T: float, optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a POINT2TR block
-        :rtype: Point2Tr instance
 
-        The block has one input port:
+        If ``T`` is given the value ``qf`` is reached at this time.  This can be
+        less or greater than the simulation time.
+        """
+        super().__init__(nout=3, **blockargs)
+        self.T = T
+        self.q0 = q0
+        self.qf = qf
 
-            1. a 3D point as an ndarray(3)
+    def start(self, simstate):
+        if self.T is None:
+            self.T = simstate.T
+        self.trapezoidalfunc = trapezoidal_func(self.q0, self.qf, self.T)
 
-        and one output port:
+    def output(self, t, inports, x):
+        return list(self.trapezoidalfunc(t))
 
-            1. T as an SE3 with its position part replaced by the input
 
-        :seealso: :func:`spatialmath.base.delta2tr`
-        """
-        super().__init__(**blockargs)
+# ------------------------------------------------------------------------ #
 
-        self.inport_names(("T",))
-        self.outport_names(("x", "y", "z"))
 
-    def output(self, t=None):
-        t = self.inputs[0].t
-        return list(t)
+class Traj(FunctionBlock):
+    """
+    :blockname:`TRAJ`
 
+    Vector trajectory
 
-# ------------------------------------------------------------------------ #
+    :inputs: 0 or 1
+    :outputs: 3
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - float
+            - :math:`s \in [0, 1]` distance along trajectory.
+        *   - Output
+            - 0
+            - ndarray
+            - :math:`y(s)`
+        *   - Output
+            - 1
+            - ndarray
+            - :math:`\dot{y}(s)`
+        *   - Output
+            - 2
+            - ndarray
+            - :math:`\ddot{y}(s)`
+
+    Generates a vector trajectory using a trapezoidal or quintic
+    polynomial profile that varies from ``y0`` to ``yf``
 
-class FDyn(TransferBlock):
-    """
-    :blockname:`FDYN`
+    The distance along the trajectory is either:
 
-    .. table::
-       :align: left
+    - a linear function from 0 to ``T`` or maximum simulation time
+    - the value [0, 1] given on inport port.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 3       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray,|         |
-    |            | ndarray,|         |
-    |            | ndarray |         |
-    +------------+---------+---------+
+    :seealso: :func:`spatialmath.base.mtraj`
     """
 
-    nin = 1
+    nin = -1
     nout = 3
-    outlabels = ('q', 'qd', 'qdd')
-    inlabels = ('')
+    outlabels = ("q",)
 
-    def __init__(self, robot, q0=None, **blockargs):
+    # TODO: this needs work, need better description of what this does for
+    # time-based case
+
+    def __init__(self, y0=0, yf=1, T=None, time=False, traj="trapezoidal", **blockargs):
         """
-        :param robot: Robot model
-        :type robot: Robot subclass
-        :param q0: Initial joint configuration
-        :type q0: array_like(n)
+        :param y0: initial value, defaults to 0
+        :type y0: array_like(m), optional
+        :param yf: final value, defaults to 1
+        :type yf: array_like(m), optional
+        :param T: maximum time, defaults to None
+        :type T: float, optional
+        :param time: x is simulation time, defaults to False
+        :type time: bool, optional
+        :param traj: trajectory type, one of: 'trapezoidal' [default], 'quintic'
+        :type traj: str, optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a FORWARD_DYNAMICS block
-        :rtype: Foward_Dynamics instance
+        """
+        self.time = time
+        if time:
+            # function of time in simulation
+            nin = 0
+            blockclass = "source"
+        else:
+            # function of input port
+            nin = 1
+            blockclass = "function"
 
-        Robot arm forward dynamics model.
+        super().__init__(nin=nin, blockclass=blockclass, **blockargs)
 
-        The block has one input port:
+        y0 = smb.getvector(y0)
+        yf = smb.getvector(yf)
+        assert len(y0) == len(yf), "y0 and yf must have same length"
 
-            1. Joint force/torque as an ndarray.
+        self.y0 = y0
+        self.yf = yf
+        self.time = time
+        self.T = T
+        self.traj = traj
 
-        and three output ports:
+        self.outport_names(("y", "yd", "ydd"))
 
-            1. joint configuration
-            2. joint velocity
-            3. joint acceleration
+    def start(self, simstate):
+        # if self.time:
+        #     assert self.x[0] <= 0, "interpolation not defined for t=0"
+        #     assert self.x[-1] >= simstate.T, "interpolation not defined for t=T"
 
+        if self.traj == "trapezoidal":
+            trajfunc = trapezoidal_func
+        elif self.traj == "quintic":
+            trajfunc = quintic_func
 
-        """
-        if robot is None:
-            raise ValueError('robot is not defined')
-            
-        super().__init__(**blockargs)
-        self.type = "forward-dynamics"
+        self.trajfuncs = []
 
-        self.robot = robot
-        self.nstates = robot.n * 2
+        if self.time:
+            # time based
+            if self.T is not None:
+                xmax = self.T
+            else:
+                xmax = simstate.T
+        else:
+            # input based
+            xmax = 1
+        self.xmax = xmax
 
-        # state vector is [q qd]
+        for i in range(len(self.y0)):
+            self.trajfuncs.append(trajfunc(self.y0[i], self.yf[i], xmax))
 
-        self.inport_names(("$\tau$",))
-        self.outport_names(("q", "qd", "qdd"))
+    def output(self, t, inports, x):
+        if not self.time:
+            t = inports[0]
 
-        if q0 is None:
-            q0 = np.zeros((robot.n,))
-        else:
-            q0 = base.getvector(q0, robot.n)
-        self._x0 = np.r_[q0, np.zeros((robot.n,))]
-        self._qdd = None
+        assert t >= 0, "interpolation not defined for x<0"
+        assert t <= self.xmax, "interpolation not defined for x>" + str(self.xmax)
 
-    def output(self, t=None):
-        n = self.robot.n
-        q = self._x[:n]
-        qd = self._x[n:]
-        qdd = self._qdd  # from last deriv
-        return [q, qd, qdd]
+        out = []
+        for i in range(len(self.y0)):
+            out.append(self.trajfuncs[i](t))
 
-    def deriv(self):
-        # return [qd qdd]
-        Q = self.inputs[0]
-        n = self.robot.n
-        assert len(Q) == n, "torque vector wrong size"
+        # we have a list of tuples out[i][j]
+        # i is the timestep, j is y/yd/ydd
+        y = [o[0] for o in out]
+        yd = [o[1] for o in out]
+        ydd = [o[2] for o in out]
+
+        return [np.hstack(y), np.hstack(yd), np.hstack(ydd)]
 
-        q = self._x[:n]
-        qd = self._x[n:]
-        qdd = self.robot.accel(q, qd, Q)
-        self._qdd = qdd
-        return np.r_[qd, qdd]
+
+# ======================================================================== #
 
 
 class IDyn(FunctionBlock):
-    """
+    r"""
     :blockname:`IDYN`
 
-    .. table::
-       :align: left
+    Robot arm forward dynamics model.
+
+    :inputs: 3
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`, joint configuration
+        *   - Input
+            - 1
+            - ndarray(N)
+            - :math:`\dot{\mathit{q}}`, joint velocity
+        *   - Input
+            - 2
+            - ndarray(N)
+            - :math:`\ddot{\mathit{q}}`, joint acceleration
+        *   - Output
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{Q}`, generalized joint force
+
+    Compute the generalized joint torques required to achieve the input joint
+    configuration, velocity and acceleration.  This uses the recursive Newton-Euler
+    (RNE) algorithm.
+
+    .. todo:: end-effector wrench input, base wrench output, payload input
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 3          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray,   | ndarray |         |
-    | ndarray,   |         |         |
-    | ndarray    |         |         |
-    +------------+---------+---------+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.rne`
     """
 
     nin = 3
     nout = 1
-    inlabels = ('q', 'qd', 'qdd')
-    outlabels = ('')
+    inlabels = ("q", "qd", "qdd")
+    outlabels = ""
 
     def __init__(self, robot, gravity=None, **blockargs):
         """
-
         :param robot: Robot model
         :type robot: Robot subclass
         :param gravity: gravitational acceleration
         :type gravity: float
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: an INVERSE_DYNAMICS block
-        :rtype: Inverse_Dynamics instance
-
-        Robot arm forward dynamics model.
-
-        The block has three input port:
-
-            1. Joint configuration vector as an ndarray.
-            2. Joint velocity vector as an ndarray.
-            3. Joint acceleration vector as an ndarray.
-
-        and one output port:
-
-            1. joint torque/force
-
-        .. TODO:: end-effector wrench input, base wrench output, payload input
         """
         if robot is None:
-            raise ValueError('robot is not defined')
+            raise ValueError("robot is not defined")
 
         super().__init__(**blockargs)
-        self.type = "inverse-dynamics"
+        # self.type = "inverse-dynamics"
 
         self.robot = robot
         self.gravity = gravity
 
         # state vector is [q qd]
 
         self.inport_names(("q", "qd", "qdd"))
         self.outport_names(("$\tau$",))
 
-    def output(self, t=None):
-        tau = self.robot.rne(self.inputs[0], self.inputs[1], self.inputs[2], gravity=gravity)
+    def output(self, t, inports, x):
+        tau = self.robot.rne(inports[0], inports[1], inports[2], gravity=self.gravity)
         return [tau]
 
 
+# ------------------------------------------------------------------------ #
+
+
 class Gravload(FunctionBlock):
-    """
+    r"""
     :blockname:`GRAVLOAD`
 
-    .. table::
-       :align: left
+    Robot arm gravity load.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray |         |
-    +------------+---------+---------+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`, joint configuration
+        *   - Output
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{g}`, generalized joint force
+
+    Compute generalized joint forces due to gravity for the input joint
+    configuration.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.gravload`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('q',)
-    outlabels = ('')
+    inlabels = ("q",)
+    outlabels = ""
 
     def __init__(self, robot, gravity=None, **blockargs):
         """
-
         :param robot: Robot model
         :type robot: Robot subclass
         :param gravity: gravitational acceleration
         :type gravity: float
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a GRAVLOAD block
-        :rtype: Gravload instance
-
-        Robot arm gravity torque.
-
-        The block has one input port:
-
-            1. Joint configuration vector as an ndarray.
-
-        and one output port:
-
-            1. joint torque/force due to gravity
-
         """
         if robot is None:
-            raise ValueError('robot is not defined')
-            
+            raise ValueError("robot is not defined")
+
         super().__init__(**blockargs)
-        self.type = "gravload"
+        # self.type = "gravload"
 
-        self.robot = robots
+        self.robot = robot
         self.gravity = gravity
         self.inport_names(("q",))
         self.outport_names(("$\tau$",))
 
-    def output(self, t=None):
-        tau = self.robot.gravload(self.inputs[0], gravity=self.gravity)
+    def output(self, t, inports, x):
+        tau = self.robot.gravload(inports[0], gravity=self.gravity)
         return [tau]
 
+
 class Gravload_X(FunctionBlock):
-    """
+    r"""
     :blockname:`GRAVLOAD_X`
 
-    .. table::
-       :align: left
+    Task-space robot arm gravity wrench.
+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(6)
+            - :math:`\mathit{x}`, end-effector pose
+        *   - Output
+            - 0
+            - ndarray(6)
+            - :math:`\mathit{g}_x`, generalized joint force
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray |         |
-    +------------+---------+---------+
+    Compute end-effector wrench due to gravity for the input end-effector pose.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.gravload_x`
+        :meth:`~roboticstoolbox.robot.Robot.Robot.gravload`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('q',)
-    outlabels = ('w')
+    inlabels = ("q",)
+    outlabels = "w"
 
-    def __init__(self, robot, gravity=None, **blockargs):
+    def __init__(self, robot, representation="rpy/xyz", gravity=None, **blockargs):
         """
-
         :param robot: Robot model
         :type robot: Robot subclass
+        :param representation: task-space representation, defaults to "rpy/xyz"
+        :type representation: str
         :param gravity: gravitational acceleration
         :type gravity: float
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a GRAVLOAD block
-        :rtype: Gravload instance
-
-        Robot arm gravity torque.
-
-        The block has one input port:
-
-            1. Joint configuration vector as an ndarray.
-
-        and one output port:
-
-            1. joint torque/force due to gravity
-
         """
         if robot is None:
-            raise ValueError('robot is not defined')
-            
+            raise ValueError("robot is not defined")
+
         super().__init__(**blockargs)
-        self.type = "gravload-x"
+        # self.type = "gravload-x"
 
-        self.robot = robots
+        self.robot = robot
         self.gravity = gravity
         self.inport_names(("q",))
         self.outport_names(("$\tau$",))
+        self.representation = representation
 
-    def output(self, t=None):
-        q = self.inputs[0]
-        tau = self.robot.gravload(q, gravity=self.gravity)
-        J = self.robot.jacob0(q)
-        if J.shape[0] == J.shape[1]:
-            w = np.linalg.inv(J).T * tau
-        else:
-            w = np.linalg.pinv(J).T * tau
+    def output(self, t, inports, x):
+        q = inports[0]
+        w = self.robot.gravload_x(
+            q, representation=self.representation, gravity=self.gravity
+        )
         return [w]
 
+
+# ------------------------------------------------------------------------ #
+
+
 class Inertia(FunctionBlock):
-    """
+    r"""
     :blockname:`INERTIA`
 
-    .. table::
-       :align: left
+    Robot arm inertia matrix.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray |         |
-    +------------+---------+---------+
+    :inputs: 1 [ndarray(N)]
+    :outputs: 3 [ndarray(N,N)]
+    :states: 0
+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray
+            - :math:`\mathit{q}`, joint configuration
+        *   - Output
+            - 0
+            - ndarray(N,N)
+            - :math:`\mathbf{M}`, mass matrix
+
+    Joint-space inertia matrix (mass matrix) as a function of joint configuration.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.inertia`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('q',)
-    outlabels = ('M')
+    inlabels = ("q",)
+    outlabels = "M"
 
-    def __init__(self, robot, gravity=None, **blockargs):
+    def __init__(self, robot, **blockargs):
         """
-
         :param robot: Robot model
         :type robot: Robot subclass
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: an INERTIA block
-        :rtype: Inertia instance
-
-        Robot arm inertia matrix.
-
-        The block has one input port:
-
-            1. Joint configuration vector as an ndarray.
-
-        and one output port:
-
-            1. Joint-space inertia matrix :math:`\mat{M}(q)`
-
         """
         if robot is None:
-            raise ValueError('robot is not defined')
-            
+            raise ValueError("robot is not defined")
+
         super().__init__(**blockargs)
-        self.type = "inertia"
+        # self.type = "inertia"
 
-        self.robot = robots
+        self.robot = robot
         self.inport_names(("q",))
         self.outport_names(("M",))
 
-    def output(self, t=None):
-        M = self.robot.inertia(self.inputs[0])
+    def output(self, t, inports, x):
+        q = inports[0]
+        M = self.robot.inertia(q)
         return [M]
 
+
+# ------------------------------------------------------------------------ #
+
+
 class Inertia_X(FunctionBlock):
-    """
+    r"""
     :blockname:`INERTIA_X`
 
-    .. table::
-       :align: left
+    Task-space robot arm inertia matrix.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray |         |
-    +------------+---------+---------+
+    :inputs: 1
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(6)
+            - :math:`\mathit{x}`, end-effector pose
+        *   - Output
+            - 0
+            - ndarray(6,6)
+            - :math:`\mathbf{M_x}`, task-space mass matrix
+
+    Task-space inertia matrix as a function of end-effector pose.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.inertia_x`
     """
 
     nin = 1
     nout = 1
-    inlabels = ('q',)
-    outlabels = ('M')
+    inlabels = ("q",)
+    outlabels = "M"
 
-    def __init__(self, robot, representation=None, pinv=False, **blockargs):
+    def __init__(self, robot, representation="rpy/xyz", pinv=False, **blockargs):
         """
-
         :param robot: Robot model
         :type robot: Robot subclass
+        :param representation: task-space representation, defaults to "rpy/xyz"
+        :type representation: str
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: an INERTIA_X block
-        :rtype: Inertia_X instance
-
-        Robot arm task-space inertia matrix.
-
-        The block has one input port:
-
-            1. Joint configuration vector as an ndarray.
-
-        and one output port:
-
-            1. Task-space inertia matrix :math:`\mat{M}_x(q)`
-
         """
         if robot is None:
-            raise ValueError('robot is not defined')
-            
+            raise ValueError("robot is not defined")
+
         super().__init__(**blockargs)
-        self.type = "inertia-x"
+        # self.type = "inertia-x"
 
         self.robot = robot
         self.representation = representation
         self.pinv = pinv
         self.inport_names(("q",))
         self.outport_names(("M",))
 
-    def output(self, t=None):
-        q = self.inputs[0]
+    def output(self, t, inports, x):
+        q = inports[0]
         Mx = self.robot.inertia_x(q, pinv=self.pinv, representation=self.representation)
         return [Mx]
+
+
 # ------------------------------------------------------------------------ #
 
-class FDyn_X(TransferBlock):
-    """
-    :blockname:`FDYN_X`
 
-    .. table::
-       :align: left
+class FDyn(TransferBlock):
+    r"""
+    :blockname:`FDYN`
+
+    Robot arm forward dynamics.
 
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 3       | 0       |
-    +------------+---------+---------+
-    | ndarray    | ndarray,|         |
-    |            | ndarray,|         |
-    |            | ndarray |         |
-    +------------+---------+---------+
+    :inputs: 1
+    :outputs: 3
+    :states: 2N
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{Q}`, generalized joint force
+        *   - Output
+            - 0
+            - ndarray(N)
+            - :math:`\mathit{q}`, joint configuration
+        *   - Output
+            - 1
+            - ndarray(N)
+            - :math:`\dot{\mathit{q}}`, joint velocity
+        *   - Output
+            - 2
+            - ndarray(N)
+            - :math:`\ddot{\mathit{q}}`, joint acceleration
+
+    Compute the manipulator arm forward dynamics in joint space, the joint acceleration
+    for the input configuration and applied joint forces.  The acceleration is
+    integrated to obtain joint velocity and joint configuration.
+
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.fdyn`
     """
 
     nin = 1
-    nout = 5
-    outlabels = ('q', 'qd', 'x', 'xd', 'xdd')
-    inlabels = ('w')
+    nout = 3
+    outlabels = ("q", "qd", "qdd")
+    inlabels = ""
 
-    def __init__(self, robot, q0=None, gravcomp=False, velcomp=False, representation='rpy/xyz', **blockargs):
+    def __init__(self, robot, q0=None, **blockargs):
         """
         :param robot: Robot model
         :type robot: Robot subclass
-        :param end: Link to compute pose of, defaults to end-effector
-        :type end: Link or str
+        :param q0: Initial joint configuration
+        :type q0: array_like(n)
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a FDYN_X block
-        :rtype: FDyn_X instance
+        """
+        if robot is None:
+            raise ValueError("robot is not defined")
 
-        Robot arm forward dynamics model.
+        super().__init__(**blockargs)
+        # self.type = "forward-dynamics"
 
-        The block has one input port:
+        self.robot = robot
+        self.nstates = robot.n * 2
+
+        # state vector is [q qd]
+
+        self.inport_names(("$\tau$",))
+        self.outport_names(("q", "qd", "qdd"))
+
+        if q0 is None:
+            q0 = np.zeros((robot.n,))
+        else:
+            q0 = smb.getvector(q0, robot.n)
+        self._x0 = np.r_[q0, np.zeros((robot.n,))]
+        self._qdd = None
+
+    def output(self, t, inports, x):
+        n = self.robot.n
+        q = x[:n]
+        qd = x[n:]
+        qdd = self._qdd  # from last deriv
+        return [q, qd, qdd]
+
+    def deriv(self, t, inports, x):
+        # return [qd qdd]
+        Q = inports[0]
+        n = self.robot.n
+        assert len(Q) == n, "torque vector wrong size"
+
+        q = x[:n]
+        qd = x[n:]
+        qdd = self.robot.accel(q, qd, Q)
+        self._qdd = qdd
+        return np.r_[qd, qdd]
+
+
+# ------------------------------------------------------------------------ #
+
+
+class FDyn_X(TransferBlock):
+    r"""
+    :blockname:`FDYN_X`
 
-            1. Applied end-effector wrench as an ndarray.
+    Task-space robot arm forward dynamics.
 
-        and three output ports:
+    :inputs: 1
+    :outputs: 3
+    :states: 12
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(6)
+            - :math:`\mathit{\tau}`, end-effector wrench
+        *   - Output
+            - 0
+            - ndarray(6)
+            - :math:`\mathit{x}`, end-effector pose
+        *   - Output
+            - 1
+            - ndarray(6)
+            - :math:`\dot{\mathit{x}}`, end-effector velocity
+        *   - Output
+            - 2
+            - ndarray(6)
+            - :math:`\dot{\mathit{x}}``, end-effector acceleration
+
+    Compute the manipulator arm forward dynamics in task space, the end-effector
+    acceleration for the input end-effector pose and applied end-effector wrench.  The
+    acceleration is integrated to obtain task-space velocity and task-space pose.
 
-            1. task space pose
-            2. task space velocity
-            3. task space acceleration
+    :seealso: :meth:`~roboticstoolbox.robot.Robot.Robot.fdyn_x`
+    """
 
+    nin = 1
+    nout = 5
+    outlabels = ("q", "qd", "x", "xd", "xdd")
+    inlabels = "w"
 
+    def __init__(
+        self,
+        robot,
+        q0=None,
+        gravcomp=False,
+        velcomp=False,
+        representation="rpy/xyz",
+        **blockargs,
+    ):
+        """
+        :param robot: Robot model
+        :type robot: Robot subclass
+        :param q0: Initial joint configuration
+        :type q0: array_like(n)
+        :param gravcomp: perform gravity compensation
+        :type gravcomp: bool
+        :param velcomp: perform velocity term compensation
+        :type velcomp: bool
+        :param representation: task-space representation, defaults to "rpy/xyz"
+        :type representation: str
+    
+        :param blockargs: |BlockOptions|
+        :type blockargs: dict
         """
         if robot is None:
-            raise ValueError('robot is not defined')
-            
+            raise ValueError("robot is not defined")
+
         super().__init__(**blockargs)
-        self.type = "forward-dynamics-x"
+        # self.type = "forward-dynamics-x"
 
         self.robot = robot
         self.nstates = robot.n * 2
         self.gravcomp = gravcomp
         self.velcomp = velcomp
         self.representation = representation
 
@@ -939,655 +1502,71 @@
 
         self.inport_names(("w",))
         self.outport_names(("q", "qd", "x", "xd", "xdd"))
 
         if q0 is None:
             q0 = np.zeros((robot.n,))
         else:
-            q0 = base.getvector(q0, robot.n)
+            q0 = smb.getvector(q0, robot.n)
         # append qd0, assumed to be zero
         self._x0 = np.r_[q0, np.zeros((robot.n,))]
         self._qdd = None
 
-    def output(self, t=None):
+    def output(self, t, inports, x):
         n = self.robot.n
-        q = self._x[:n]
-        qd = self._x[n:]
+        q = x[:n]
+        qd = x[n:]
         qdd = self._qdd  # from last deriv
 
         T = self.robot.fkine(q)
-        x = base.tr2x(T.A)
+        x = smb.tr2x(T.A)
 
         Ja = self.robot.jacob0_analytical(q, self.representation)
         xd = Ja @ qd
         # print(q)
         # print(qd)
         # print(xd)
         # print(Ja)
         # print()
 
         if qdd is None:
             xdd = None
         else:
-            Ja_dot = self.robot.jacob_dot(q, qd, J0=Ja)
+            Ja_dot = self.robot.jacob0_dot(q, qd, J0=Ja)
             xdd = Ja @ qdd + Ja_dot @ qd
 
         return [q, qd, x, xd, xdd]
 
-    def deriv(self):
+    def deriv(self, t, inports, x):
         # return [qd qdd]
 
         # get current joint space state
         n = self.robot.n
-        q = self._x[:n]
-        qd = self._x[n:]
+        q = x[:n]
+        qd = x[n:]
 
         # compute joint forces
-        w = self.inputs[0]
+        w = inports[0]
         assert len(w) == 6, "wrench vector wrong size"
-        Q = self.robot.jacob0_analytical(q, self.representation).T @ w
+        Q = self.robot.jacob0_analytical(q, representation=self.representation).T @ w
 
         if self.gravcomp or self.velcomp:
             if self.velcomp:
                 qd_rne = qd
             else:
                 qd_rne = np.zeros((n,))
             Q_rne = self.robot.rne(q, qd_rne, np.zeros((n,)))
-
-        qdd = self.robot.accel(q, qd, Q + Q_rne)
+            Q += Q_rne
+        qdd = self.robot.accel(q, qd, Q)
 
         self._qdd = qdd
         return np.r_[qd, qdd]
 
 
-# ------------------------------------------------------------------------ #
-
-class ArmPlot(GraphicsBlock):
-    """
-    :blockname:`ARMPLOT`
-
-    .. table::
-       :align: left
-
-    +--------+---------+---------+
-    | inputs | outputs |  states |
-    +--------+---------+---------+
-    | 1      | 0       | 0       |
-    +--------+---------+---------+
-    | ndarray|         |         |
-    +--------+---------+---------+
-    """
-
-    nin = 1
-    nout = 0
-    inlabels = ('q',)
-
-    def __init__(self, robot=None, q0=None, backend=None, **blockargs):
-        """
-        :param robot: Robot model
-        :type robot: Robot subclass
-        :param backend: RTB backend name, defaults to 'pyplot'
-        :type backend: str, optional
-        :param blockargs: |BlockOptions|
-        :type blockargs: dict
-        :return: An ARMPLOT block
-        :rtype: ArmPlot instance
-
-
-        Create a robot animation.
-
-        Notes:
-
-            - Uses RTB ``plot`` method
-
-           Example of vehicle display (animated).  The label at the top is the
-           block name.
-        """
-        if robot is None:
-            raise ValueError('robot is not defined')
-
-        super().__init__(**blockargs)
-        self.inport_names(("q",))
-
-        if q0 is None:
-            q0 = np.zeros((robot.n,))
-        self.robot = robot
-        self.backend = backend
-        self.q0 = q0
-        self.env = None
-        print('ARMPLOT init')
-
-    def start(self, state):
-        # create the plot
-        # super().reset()
-        # if state.options.graphics:
-        print('ARMPLOT init')
-        self.fig = self.create_figure(state)
-        self.env = self.robot.plot(
-            self.q0, backend=self.backend, fig=self.fig, block=False
-        )
-        super().start()
-
-    def step(self, state):
-
-        # update the robot plot
-        self.robot.q = self.inputs[0]
-        self.env.step()
-
-        super().step(state)
-
-# ------------------------------------------------------------------------ #
-
-
-class Traj(FunctionBlock):
-    """
-    :blockname:`TRAJ`
-
-    .. table::
-       :align: left
-
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 0 or 1     | 1       | 0       |
-    +------------+---------+---------+
-    | float      | float   |         |
-    +------------+---------+---------+
-    """
-
-    nin = -1
-    nout = 3
-    outlabels = ('q',)
-
-    def __init__(self, y0=0, yf=1, T=None, time=False, traj="trapezoidal", **blockargs):
-        """
-
-        :param y0: initial value, defaults to 0
-        :type y0: array_like(m), optional
-        :param yf: final value, defaults to 1
-        :type yf: array_like(m), optional
-        :param T: time vector or number of steps, defaults to None
-        :type T: array_like or int, optional
-        :param time: x is simulation time, defaults to False
-        :type time: bool, optional
-        :param traj: trajectory type, one of: 'trapezoidal' [default], 'quintic'
-        :type traj: str, optional
-        :param blockargs: |BlockOptions|
-        :type blockargs: dict
-        :return: TRAJ block
-        :rtype: Traj instance
-
-        Create a trajectory block.
-
-        A block that generates a trajectory using a trapezoidal or quintic
-        polynomial profile.
-
-        """
-        self.time = time
-        if time:
-            nin = 1
-            blockclass = "function"
-        else:
-            nin = 0
-            blockclass = "source"
-            
-        super().__init__(nin=nin, blockclass=blockclass, **blockargs)
-
-        y0 = base.getvector(y0)
-        yf = base.getvector(yf)
-        assert len(y0) == len(yf), "y0 and yf must have same length"
-
-        self.y0 = y0
-        self.yf = yf
-        self.time = time
-        self.T = T
-        self.traj = traj
-
-        self.outport_names(("y", "yd", "ydd"))
-
-    def start(self, **blockargs):
-        if self.time:
-            assert self.x[0] <= 0, "interpolation not defined for t=0"
-            assert self.x[-1] >= self.bd.T, "interpolation not defined for t=T"
-
-        if self.traj == "trapezoidal":
-            trajfunc = trapezoidal_func
-        elif self.traj == "quintic":
-            trajfunc = quintic_func
-
-        self.trajfuncs = []
-        for i in range(len(self.y0)):
-            self.trajfuncs.append(trajfunc(self.y0[i], self.yf[i], self.T))
-
-    def output(self, t=None):
-        if self.time:
-            t = self.inputs[0]
-
-        out = []
-        for i in range(len(self.y0)):
-            out.append(self.trajfuncs[i](t))
-
-        # we have a list of tuples out[i][j]
-        # i is the timestep, j is y/yd/ydd
-        y = [o[0] for o in out]
-        yd = [o[1] for o in out]
-        ydd = [o[2] for o in out]
-
-        return [np.hstack(y), np.hstack(yd), np.hstack(ydd)]
-
-# ------------------------------------------------------------------------ #
-
-class JTraj(SourceBlock):
-    """
-    :blockname:`JTRAJ`
-
-    .. table::
-       :align: left
-
-    +------------+------------+---------+
-    | inputs     | outputs    |  states |
-    +------------+------------+---------+
-    | 0          | 3          | 0       |
-    +------------+------------+---------+
-    |            | ndarray(n) |         |
-    +------------+------------+---------+
-    """
-
-    nin = 0
-    nout = 3
-    outlabels = ('q', 'qd', 'qdd')
-
-    def __init__(self, q0, qf, qd0=None, qdf=None, T=None, **blockargs):
-        """
-        Compute a joint-space trajectory
-
-        :param q0: initial joint coordinate
-        :type q0: array_like(n)
-        :param qf: final joint coordinate
-        :type qf: array_like(n)
-        :param T: time vector or number of steps, defaults to None
-        :type T: array_like or int, optional
-        :param qd0: initial velocity, defaults to None
-        :type qd0: array_like(n), optional
-        :param qdf: final velocity, defaults to None
-        :type qdf: array_like(n), optional
-        :param blockargs: |BlockOptions|
-        :type blockargs: dict
-        :return: TRAJ block
-        :rtype: Traj instance
-
-        - ``tg = jtraj(q0, qf, N)`` is a joint space trajectory where the joint
-        coordinates vary from ``q0`` (M) to ``qf`` (M).  A quintic (5th order)
-        polynomial is used with default zero boundary conditions for velocity and
-        acceleration.  Time is assumed to vary from 0 to 1 in ``N`` steps.
-
-        - ``tg = jtraj(q0, qf, t)`` as above but ``t`` is a uniformly-spaced time
-        vector
-
-        The return value is an object that contains position, velocity and
-        acceleration data.
-
-        Notes:
-
-        - The time vector, if given, scales the velocity and acceleration outputs
-        assuming that the time vector starts at zero and increases
-        linearly.
-
-        :seealso: :func:`ctraj`, :func:`qplot`, :func:`~SerialLink.jtraj`
-        """
-        super().__init__(**blockargs)
-        self.type = "source"
-        self.outport_names(
-            (
-                "q",
-                "qd",
-                "qdd",
-            )
-        )
-
-        q0 = base.getvector(q0)
-        qf = base.getvector(qf)
-
-        if not len(q0) == len(qf):
-            raise ValueError("q0 and q1 must be same size")
-
-        if qd0 is None:
-            qd0 = np.zeros(q0.shape)
-        else:
-            qd0 = getvector(qd0)
-            if not len(qd0) == len(q0):
-                raise ValueError("qd0 has wrong size")
-        if qdf is None:
-            qdf = np.zeros(q0.shape)
-        else:
-            qd1 = getvector(qdf)
-            if not len(qd1) == len(q0):
-                raise ValueError("qd1 has wrong size")
-
-        self.q0 = q0
-        self.qf = qf
-        self.qd0 = qd0
-        self.qdf = qf
-
-        # call start now, so that output works when called by compile
-        # set T to 1 just for now
-        if T is None:
-            self.T = 1
-        self.start()
-        self.T = T
-        
-
-    def start(self, state=None):
-
-        if self.T is None:
-            # use simulation tmax
-            self.T = state.T
-
-        tscal = self.T
-        self.tscal = tscal
-
-        q0 = self.q0
-        qf = self.qf
-        qd0 = self.qd0
-        qdf = self.qdf
-
-        # compute the polynomial coefficients
-        A = 6 * (qf - q0) - 3 * (qdf + qd0) * tscal
-        B = -15 * (qf - q0) + (8 * qd0 + 7 * qdf) * tscal
-        C = 10 * (qf - q0) - (6 * qd0 + 4 * qdf) * tscal
-        E = qd0 * tscal
-        F = q0
-
-        self.coeffs = np.array([A, B, C, np.zeros(A.shape), E, F])
-        self.dcoeffs = np.array(
-            [np.zeros(A.shape), 5 * A, 4 * B, 3 * C, np.zeros(A.shape), E]
-        )
-        self.ddcoeffs = np.array(
-            [
-                np.zeros(A.shape),
-                np.zeros(A.shape),
-                20 * A,
-                12 * B,
-                6 * C,
-                np.zeros(A.shape),
-            ]
-        )
-
-    def output(self, t=None):
-
-        tscal = self.tscal
-        ts = t / tscal
-        tt = np.array([ts ** 5, ts ** 4, ts ** 3, ts ** 2, ts, 1]).T
-
-        qt = tt @ self.coeffs
-
-        # compute  velocity
-        qdt = tt @ self.dcoeffs / tscal
-
-        # compute  acceleration
-        qddt = tt @ self.ddcoeffs / tscal ** 2
-
-        return [qt, qdt, qddt]
-
-# ------------------------------------------------------------------------ #
-
-class LSPB(SourceBlock):
-    """
-    :blockname:`LSPB`
-
-    .. table::
-       :align: left
-
-    +------------+------------+---------+
-    | inputs     | outputs    |  states |
-    +------------+------------+---------+
-    | 0          | 3          | 0       |
-    +------------+------------+---------+
-    |            | float      |         |
-    +------------+------------+---------+
-    """
-
-    nin = 0
-    nout = 3
-    outlabels = ('q', 'qd', 'qdd')
-
-    def __init__(self, q0, qf, V=None, T=None, **blockargs):
-        """
-        Compute a joint-space trajectory
-
-        :param q0: initial joint coordinate
-        :type q0: array_like(n)
-        :param qf: final joint coordinate
-        :type qf: array_like(n)
-        :param T: time vector or number of steps, defaults to None
-        :type T: array_like or int, optional
-        :param blockargs: |BlockOptions|
-        :type blockargs: dict
-        :return: LSPB block
-        :rtype: LSPB instance
-
-        - ``tg = jtraj(q0, qf, N)`` is a joint space trajectory where the joint
-        coordinates vary from ``q0`` (M) to ``qf`` (M).  A quintic (5th order)
-        polynomial is used with default zero boundary conditions for velocity and
-        acceleration.  Time is assumed to vary from 0 to 1 in ``N`` steps.
-
-        - ``tg = jtraj(q0, qf, t)`` as above but ``t`` is a uniformly-spaced time
-        vector
-
-        The return value is an object that contains position, velocity and
-        acceleration data.
-
-        Notes:
-
-        - The time vector, if given, scales the velocity and acceleration outputs
-        assuming that the time vector starts at zero and increases
-        linearly.
-
-        :seealso: :func:`ctraj`, :func:`qplot`, :func:`~SerialLink.jtraj`
-        """
-        super().__init__(nout=3, **blockargs)
-        self.type = "source"
-        self.T = T
-        self.q0 = q0
-        self.qf = qf
-
-    def start(self):
-
-        if self.T is None:
-            self.T = self.bd.state.T
-        self.trapezoidalfunc = trapezoidal_func(self.q0, self.qf, self.T)
-
-    def output(self, t=None):
-        return self.trapezoidalfunc(t)
-
-# ------------------------------------------------------------------------ #
-
-class CTraj(SourceBlock):
-    """
-    :blockname:`CTRAJ`
-
-    .. table::
-       :align: left
-
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 0          | 1       | 0       |
-    +------------+---------+---------+
-    |            | float   |         |
-    +------------+---------+---------+
-    """
-
-    nin = 0
-    nout = 1
-    outlabels = ('T',)
-
-    def __init__(
-        self,
-        T1,
-        T2,
-        T,
-        trapezoidal=True,
-        **blockargs
-    ):
-        """
-        [summary]
-
-        :param T1: initial pose
-        :type T1: SE3
-        :param T2: final pose
-        :type T2: SE3
-        :param T: motion time
-        :type T: float
-        :param trapezoidal: Use LSPB motion profile along the path
-        :type trapezoidal: bool
-        :param blockargs: |BlockOptions|
-        :type blockargs: dict
-        :return: CTRAJ block
-        :rtype: CTraj instance
-
-        Create a Cartesian motion block.
-
-        The block outputs a pose that varies smoothly from ``T1`` to ``T2`` over
-        the course of ``T`` seconds.
-        
-        If ``T`` is not given it defaults to the simulation time.
-
-        If ``trapezoidal`` is True then a trapezoidal motion profile is used along the path
-        to provide initial acceleration and final deceleration.  Otherwise,
-        motion is at constant velocity.
-
-        :seealso: :method:`SE3.interp`
-
-        """
-
-        # TODO
-        # flag to rotate the frame rather than just translate it
-        super().__init__(**blockargs)
-
-        self.T1 = T1
-        self.T2 = T2
-        self.T = T
-
-    def start(self, state):
-        if self.T is None:
-            self.T = self.bd.state.T
-        if self.trapezoidal:
-            self.trapezoidalfunc = trapezoidal_func(self.q0, self.qf, self.T)
-
-    def output(self, t=None):
-        if trapezoidal:
-            s = self.trapezoidalfunc(t)
-        else:
-            s = np.min(t / self.T, 1.0)
-
-        return self.T1.interp(self.T2, s)
-
-
-# ------------------------------------------------------------------------ #
-
-class CirclePath(SourceBlock):
-    """
-    :blockname:`CIRCLEPATH`
-
-    .. table::
-       :align: left
-
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 0 or 1     | 1       | 0       |
-    +------------+---------+---------+
-    | float      | float   |         |
-    +------------+---------+---------+
-    """
-
-    nin = 0
-    nout = 1
-
-    def __init__(
-        self,
-        radius=1,
-        centre=(0, 0, 0),
-        pose=None,
-        frequency=1,
-        unit="rps",
-        phase=0,
-        **blockargs
-    ):
-        """
-
-        :param radius: radius of circle, defaults to 1
-        :type radius: float
-        :param centre: center of circle, defaults to [0,0,0]
-        :type centre: array_like(3)
-        :param pose: SE3 pose of output, defaults to None
-        :type pose: SE3
-        :param frequency: rotational frequency, defaults to 1
-        :type frequency: float
-        :param unit: unit for frequency, one of: 'rps' [default], 'rad'
-        :type unit: str
-        :param phase: phase
-        :type phase: float
-        :param blockargs: |BlockOptions|
-        :type blockargs: dict
-        :return: TRAJ block
-        :rtype: Traj instance
-
-        Create a circular motion block.
-
-        The block outputs the coordinates of a point moving in a circle of
-        radius ``r`` centred at ``centre`` and parallel to the xy-plane.
-
-        By default the output is a 3-vector :math:`(x, y, z)` but if 
-        ``pose`` is an ``SE3`` instance the output is a copy of that pose with
-        its translation set to the coordinate of the moving point.  This is the
-        motion of a frame with fixed orientation following a circular path.
-
-        """
-
-        # TODO
-        # flag to rotate the frame rather than just translate it
-        super().__init__(**blockargs)
-
-        if unit == "rps":
-            omega = frequency * 2 * pi
-            phase = frequency * 2 * pi
-        elif unit == "rad":
-            omega = frequency
-
-            # Redundant assignment, commented for LGTM
-            # phase = phase
-        else:
-            raise ValueError("bad units: rps or rad")
-
-        self.radius = radius
-        assert len(centre) == 3, "centre must be a 3 vector"
-        self.centre = centre
-        self.pose = pose
-        self.omega = omega
-        self.phase = phase
-
-        self.outport_names(("y",))
-
-    def output(self, t=None):
-        theta = t * self.omega + self.phase
-        x = self.radius * cos(theta) + self.centre[0]
-        y = self.radius * sin(theta) + self.centre[1]
-        p = (x, y, self.centre[2])
-
-        if self.pose is not None:
-            pp = SE3.Rt(self.pose.R, p)
-            p = pp
-
-        return [p]
-
 if __name__ == "__main__":
-
-    import pathlib
-    import os.path
+    from pathlib import Path
 
     exec(
         open(
-            os.path.join(pathlib.Path(__file__).parent.absolute(), "test_robots.py")
+            Path(__file__).parent.parent.parent.absolute() / "tests" / "test_blocks.py"
         ).read()
     )
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/mobile.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/mobile.py`

 * *Files 12% similar despite different names*

```diff
@@ -5,412 +5,474 @@
 import matplotlib.pyplot as plt
 from matplotlib.patches import Polygon
 import time
 
 from bdsim.components import TransferBlock
 from bdsim.graphics import GraphicsBlock
 
-from spatialmath import base
 from roboticstoolbox import mobile
 
 # ------------------------------------------------------------------------ #
 class Bicycle(TransferBlock):
-    """
+    r"""
     :blockname:`BICYCLE`
-    
-    .. table::
-       :align: left
-    
-    +------------+------------+---------+
-    | inputs     | outputs    |  states |
-    +------------+------------+---------+
-    | 2          | 1          | 3       |
-    +------------+------------+---------+
-    | float      | ndarray(3) |         | 
-    +------------+------------+---------+
+
+    Vehicle model with Bicycle kinematics.
+
+    :inputs: 2
+    :outputs: 1
+    :states: 3
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - float
+            - :math:`v`, longitudinal velocity
+        *   - Input
+            - 1
+            - float
+            - :math:`\gamma`, steer angle
+        *   - Output
+            - 0
+            - ndarray(3)
+            - :math:`\mathit{q} = (x, y, \theta)`, vehicle configuration
+
+    Bicycle kinematic model with velocity and steering inputs and vehicle configuration
+    as output.
+
+    Various limits are applied to the inputs:
+
+    * velocity limit ``speed_max``
+    * acceleration limit ``accel_max``
+    * steering limit ``steer_max``
+
+    :seealso: :class:`~roboticstoolbox.mobile.Vehicle.Bicycle` :class:`Unicycle` :class:`DiffSteer`
     """
 
     nin = 2
     nout = 1
-    inlabels = ('v', '')
-    outlabels = ('q',)
+    inlabels = ("v", "")
+    outlabels = ("q",)
 
-    def __init__(self, L=1, speed_max=np.inf, accel_max=np.inf, steer_max=0.45 * pi, 
-        x0=None, **blockargs):
+    def __init__(
+        self,
+        L=1,
+        speed_max=np.inf,
+        accel_max=np.inf,
+        steer_max=0.45 * pi,
+        x0=None,
+        **blockargs,
+    ):
         r"""
-        Create a vehicle model with Bicycle kinematics.
-
         :param L: Wheelbase, defaults to 1
         :type L: float, optional
         :param speed_max: Velocity limit, defaults to math.inf
         :type speed_max: float, optional
         :param accel_max: maximum acceleration, defaults to math.inf
         :type accel_max: float, optional
         :param steer_max: maximum steered wheel angle, defaults to math.pi*0.45
         :type steer_max: float, optional
         :param x0: Initial state, defaults to [0,0,0]
         :type x0: array_like(3), optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a BICYCLE block
-        :rtype: Bicycle instance
-
-        
-        Bicycle kinematic model with state/configuration :math:`[x, y, \theta]`.  
-        
-        **Block ports**
-            
-            :input v: Vehicle speed (metres/sec).  The velocity limit ``speed_max``
-                and acceleration limit ``accel_max`` is
-                applied to this input.
-            :input : Steered wheel angle (radians).  The steering limit ``steer_max``
-                is applied to this input.
-            
-            :output q: configuration (x, y, )
-
-        :seealso: :class:`roboticstoolbox.mobile.Bicycle` :class:`Unicycle` :class:`DiffSteer` 
         """
         # TODO: add option to model the effect of steering arms, responds to
         #  gamma dot
-        
+
         super().__init__(nstates=3, **blockargs)
+        self.type = "bicycle"
 
-        self.vehicle = mobile.Bicycle(L=L,
-            steer_max=steer_max, speed_max=speed_max, accel_max=accel_max)
+        self.vehicle = mobile.Bicycle(
+            L=L, steer_max=steer_max, speed_max=speed_max, accel_max=accel_max
+        )
 
         if x0 is None:
             self._x0 = np.zeros((self.nstates,))
         else:
-            assert len(x0) == self.nstates, "x0 is {:d} long, should be {:d}".format(len(x0), self.nstates)
+            assert len(x0) == self.nstates, "x0 is {:d} long, should be {:d}".format(
+                len(x0), self.nstates
+            )
             self._x0 = x0
-            
-        self.inport_names(('v', '$\gamma$'))
-        self.outport_names(('q',))
-        self.state_names(('x', 'y', r'$\theta$'))
-        
-    def output(self, t):
-        return [self._x]  # one output which is ndarray(3)
-    
-    def deriv(self):
-        return self.vehicle.deriv(self._x, self.inputs)
-    
+
+        self.inport_names(("v", "$\gamma$"))
+        self.outport_names(("q",))
+        self.state_names(("x", "y", r"$\theta$"))
+
+    def output(self, t, inports, x):
+        return [x]  # one output which is ndarray(3)
+
+    def deriv(self, t, inports, x):
+        return self.vehicle.deriv(x, inports)
+
+
 # ------------------------------------------------------------------------ #
 class Unicycle(TransferBlock):
     r"""
     :blockname:`UNICYCLE`
-    
-    .. table::
-       :align: left
-    
-    +------------+------------+---------+
-    | inputs     | outputs    |  states |
-    +------------+------------+---------+
-    | 2          | 1          | 3       |
-    +------------+------------+---------+
-    | float      | ndarray(3) |         | 
-    +------------+------------+---------+
+
+    Vehicle model with Unicycle kinematics.
+
+    :inputs: 2
+    :outputs: 1
+    :states: 3
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - float
+            - :math:`v`, longitudinal velocity
+        *   - Input
+            - 1
+            - float
+            - :math:`\omega`, turn rate
+        *   - Output
+            - 0
+            - ndarray(3)
+            - :math:`\mathit{q} = (x, y, \theta)`, vehicle configuration
+
+    Unicycle kinematic model with velocity and steering inputs and vehicle configuration
+    as output.
+
+    Various limits are applied to the inputs:
+
+    * velocity limit ``speed_max``
+    * acceleration limit ``accel_max``
+    * steering limit ``steer_max``
+
+    :seealso: :class:`~roboticstoolbox.mobile.Vehicle.Unicycle` :class:`Bicycle` :class:`DiffSteer`
+
     """
     nin = 2
     nout = 1
-    inlabels = ('v', '')
-    outlabels = ('q',)
+    inlabels = ("v", "")
+    outlabels = ("q",)
 
-    def __init__(self, w=1, speed_max=np.inf, accel_max=np.inf, steer_max=np.inf, 
-        a=0, x0=None, **blockargs):
+    def __init__(
+        self,
+        w=1,
+        speed_max=np.inf,
+        accel_max=np.inf,
+        steer_max=np.inf,
+        # a=0,  implement this, RVC2 p111, change output and deriv
+        x0=None,
+        **blockargs,
+    ):
         r"""
-        Create a vehicle model with Unicycle kinematics.
 
         :param w: vehicle width, defaults to 1
         :type w: float, optional
         :param speed_max: Velocity limit, defaults to math.inf
         :type speed_max: float, optional
         :param accel_max: maximum acceleration, defaults to math.inf
         :type accel_max: float, optional
         :param steer_max: maximum turn rate :math:`\omega`, defaults to math.inf
         :type steer_max: float, optional
         :param x0: Inital state, defaults to [0,0,0]
         :type x0: array_like(3), optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a UNICYCLE block
-        :rtype: Unicycle instance
-
-        Unicycle kinematic model with state/configuration :math:`[x, y, \theta]`.
-
-        **Block ports**
-            
-            :input v: Vehicle speed (metres/sec).  The velocity limit ``speed_max`` and
-                acceleration limit ``accel_max`` is
-                applied to this input.
-            :input : Angular velocity (radians/sec).  The steering limit ``steer_max``
-                is applied to this input.
-            
-            :output q: configuration (x, y, )
-
-        :seealso: :class:`roboticstoolbox.mobile.Unicycle` :class:`Bicycle` :class:`DiffSteer`
-        """        
+        """
         super().__init__(nstates=3, **blockargs)
-        
+        self.type = "unicycle"
+
         if x0 is None:
             self._x0 = np.zeros((self.nstates,))
         else:
-            assert len(x0) == self.nstates, "x0 is {:d} long, should be {:d}".format(len(x0), self.nstates)
+            assert len(x0) == self.nstates, "x0 is {:d} long, should be {:d}".format(
+                len(x0), self.nstates
+            )
             self._x0 = x0
 
-        self.vehicle = mobile.Unicycle(w=w,
-            steer_max=steer_max, speed_max=speed_max, accel_max=accel_max)
+        self.vehicle = mobile.Unicycle(
+            W=w, steer_max=steer_max, speed_max=speed_max, accel_max=accel_max
+        )
 
-        #TODO, add support for origin shift
+        # TODO, add support for origin shift
         #         If ``a`` is non-zero then the planar velocity of that point $x=a$
         # can be controlled by
 
         # .. math::
 
-        #     \begin{pmatrix} v \\ \omega \end{pmatrix} = 
+        #     \begin{pmatrix} v \\ \omega \end{pmatrix} =
         #     \begin{pmatrix}
-        #         \cos \theta & \sin \theta \\ 
+        #         \cos \theta & \sin \theta \\
         #         -\frac{1}{a}\sin \theta & \frac{1}{a}\cos \theta
         #     \end{pmatrix}\begin{pmatrix}
         #         \dot{x} \\ \dot{y}
         #     \end{pmatrix}
-        
-    def output(self, t):
-        return self._x
-    
-    def deriv(self):
-        return self.vehicle.deriv(self._x, self.inputs)
-    
+
+    def output(self, t, inports, x):
+        return [x]
+
+    def deriv(self, t, inports, x):
+        return self.vehicle.deriv(x, inports)
+
+
 # ------------------------------------------------------------------------ #
 class DiffSteer(TransferBlock):
     """
     :blockname:`DIFFSTEER`
-    
-    .. table::
-       :align: left
-    
-    +------------+------------+---------+
-    | inputs     | outputs    |  states |
-    +------------+------------+---------+
-    | 2          | 1          | 3       |
-    +------------+------------+---------+
-    | float      | ndarray(3) |         | 
-    +------------+------------+---------+
+
+    Differential steer vehicle model
+
+    :inputs: 2
+    :outputs: 1
+    :states: 3
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - float
+            - :math:`\omega_L`, left-wheel angular velocity (radians/sec).
+        *   - Input
+            - 1
+            - float
+            - :math:`\omega_R`, right-wheel angular velocity (radians/sec).
+        *   - Output
+            - 0
+            - ndarray(3)
+            - :math:`\mathit{q} = (x, y, \theta)`, vehicle configuration
+
+    Differential steering kinematic model with wheel velocity inputs and vehicle
+    configuration as output.
+
+    Various limits are applied to the inputs:
+
+    * velocity limit ``speed_max``
+    * acceleration limit ``accel_max``
+    * steering limit ``steer_max``
+
+    .. note:: Wheel velocity is defined such that if both are positive the vehicle
+            moves forward.
+
+    :seealso: :class:`~roboticstoolbox.mobile.Vehicle.Diffsteer` :class:`Bicycle` :class:`Unicycle`
     """
 
     nin = 2
     nout = 1
 
-    inlabels = ('L', 'R')
-    outlabels = ('q',)
+    inlabels = ("L", "R")
+    outlabels = ("q",)
 
-    def __init__(self, w=1, R=1, speed_max=np.inf, accel_max=np.inf, steer_max=None, 
-        a=0, x0=None, **blockargs):
+    def __init__(
+        self,
+        w=1,
+        R=1,
+        speed_max=np.inf,
+        accel_max=np.inf,
+        steer_max=None,
+        a=0,
+        x0=None,
+        **blockargs,
+    ):
         r"""
-        Create a differential steer vehicle model
-
         :param w: vehicle width, defaults to 1
         :type w: float, optional
         :param R: Wheel radius, defaults to 1
         :type R: float, optional
         :param speed_max: Velocity limit, defaults to 1
         :type speed_max: float, optional
         :param accel_max: maximum acceleration, defaults to math.inf
         :type accel_max: float, optional
         :param steer_max: maximum steering rate, defaults to 1
         :type steer_max: float, optional
         :param x0: Inital state, defaults to None
         :type x0: array_like, optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a DIFFSTEER block
-        :rtype: DiffSteer instance
-        
-        Unicycle kinematic model with state :math:`[x, y, \theta]`, with
-        inputs given as wheel angular velocity.
-
-        **Block ports**
-
-            :input L: Left-wheel angular velocity (radians/sec).
-            :input R: Right-wheel angular velocity (radians/sec).
-              
-            :output q: configuration (x, y, )
-
-        The resulting forward velocity and turning rate from L and R have
-        the velocity limit ``speed_max`` and acceleration limit ``accel_max``
-        applied, as well as the turning rate limit ``steer_max``.
-
-        .. note:: Wheel velocity is defined such that if both are positive the vehicle
-              moves forward.
-
-        :seealso: :class:`roboticstoolbox.mobile.Unicycle` :class:`Bicycle` :class:`Unicycle`
         """
         super().__init__(nstates=3, **blockargs)
-        self.type = 'diffsteer'
+        self.type = "diffsteer"
         self.R = R
-        
+
         if x0 is None:
             self._x0 = np.zeros((slef.nstates,))
         else:
-            assert len(x0) == self.nstates, "x0 is {:d} long, should be {:d}".format(len(x0), self.nstates)
+            assert len(x0) == self.nstates, "x0 is {:d} long, should be {:d}".format(
+                len(x0), self.nstates
+            )
             self._x0 = x0
 
-        self.vehicle = mobile.Unicycle(w=w,
-            steer_max=steer_max, speed_max=speed_max, accel_max=accel_max)
+        self.vehicle = mobile.DiffSteer(
+            W=w, steer_max=steer_max, speed_max=speed_max, accel_max=accel_max
+        )
+
+    def output(self, t, inports, x):
+        return [x]
+
+    def deriv(self, t, inports, x):
+        return self.vehicle.deriv(x, inports)
 
-    def output(self, t):
-        return self._x
-    
-    def deriv(self):
-        # compute (v, omega) from left/right wheel speeds
-        v = self.R * (self.inputs[0] + self.inputs[1]) / 2
-        omega = (self.inputs[1] + self.inputs[0]) / self.W
-        return self.vehicle.deriv(self._x, (v, omega))
 
 # ------------------------------------------------------------------------ #
 
+
 class VehiclePlot(GraphicsBlock):
-    """
+    r"""
     :blockname:`VEHICLEPLOT`
-    
-    .. table::
-       :align: left
-    
-    +--------+---------+---------+
-    | inputs | outputs |  states |
-    +--------+---------+---------+
-    | 1      | 0       | 0       |
-    +--------+---------+---------+
-    | ndarray|         |         | 
-    +--------+---------+---------+
+
+    Vehicle animation
+
+    :inputs: 1
+    :outputs: 0
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - float
+            - :math:`\mathit{q} = (x, y, \theta)`, vehicle configuration
+
+    Create a vehicle animation similar to the figure below.
+
+    .. figure:: ../figs/rvc4_4.gif
+        :width: 500px
+        :alt: example of generated graphic
+
+        Example of vehicle display (animated).  The label at the top is the
+        block name.
     """
 
     nin = 1
     nout = 0
 
-    inlabels = ('q',)
+    inlabels = ("q",)
 
     # TODO add ability to render an image instead of an outline
-    
-    def __init__(self, animation=None, path=None, labels=['X', 'Y'], square=True, init=None, scale=True, **blockargs):
-        """
-        Create a vehicle animation
 
+    def __init__(
+        self,
+        animation=None,
+        path=None,
+        labels=["X", "Y"],
+        square=True,
+        init=None,
+        scale="auto",
+        polyargs={},
+        **blockargs,
+    ):
+        """
         :param animation: Graphical animation of vehicle, defaults to None
         :type animation: VehicleAnimation subclass, optional
         :param path: linestyle to plot path taken by vehicle, defaults to None
         :type path: str or dict, optional
         :param labels: axis labels (xlabel, ylabel), defaults to ["X","Y"]
         :type labels: array_like(2) or list
         :param square: Set aspect ratio to 1, defaults to True
         :type square: bool, optional
         :param init: function to initialize graphics, defaults to None
         :type init: callable, optional
         :param scale: scale of plot, defaults to "auto"
         :type scale: list or str, optional
+        :param polyargs: arguments passed to :meth:`Animation.Polygon`
+        :type polyargs: dict
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: A VEHICLEPLOT block
-        :rtype: VehiclePlot instance
 
-        Create a vehicle animation similar to the figure below.
+        .. note::
 
-        **Block ports**
-
-            :input q: configuration (x, y, )
-        
-        Notes:
-            
             - The ``init`` function is called after the axes are initialized
               and can be used to draw application specific detail on the
               plot. In the example below, this is the dot and star.
             - A dynamic trail, showing path to date can be animated if
               the option ``path`` is set to a linestyle.
-        
-        .. figure:: ../../figs/rvc4_4.gif
-           :width: 500px
-           :alt: example of generated graphic
-
-           Example of vehicle display (animated).  The label at the top is the
-           block name.
         """
         super().__init__(**blockargs)
         self.xdata = []
         self.ydata = []
-        self.type = 'vehicleplot'
+        # self.type = "vehicleplot"
         if init is not None:
-            assert callable(init), 'graphics init function must be callable'
+            assert callable(init), "graphics init function must be callable"
         self.init = init
         self.square = square
 
         self.pathstyle = path
-        
-        if scale != 'auto':
+
+        if scale != "auto":
             if len(scale) == 2:
                 scale = scale * 2
         self.scale = scale
         self.labels = labels
-        
+
         if animation is None:
-            animation = mobile.VehiclePolygon()
+            animation = mobile.VehiclePolygon(**polyargs)
         elif not isinstance(animation, mobile.VehicleAnimationBase):
-            raise TypeError('animation object must be VehicleAnimationBase subclass')
+            raise TypeError("animation object must be VehicleAnimationBase subclass")
 
         self.animation = animation
 
-        
-    def start(self, state=None):
+    def start(self, simstate):
+        super().start(simstate)
+
         # create the plot
         # super().reset()
         # create the figures
-        self.fig = self.create_figure(state)
+        self.fig = self.create_figure(simstate)
         self.ax = self.fig.add_subplot(111)
-        
+
         if self.square:
-            self.ax.set_aspect('equal')
-        print('done')
+            self.ax.set_aspect("equal")
+        print("done")
 
         self.ax.grid(True)
         self.ax.set_xlabel(self.labels[0])
         self.ax.set_ylabel(self.labels[1])
         self.ax.set_title(self.name)
-        if self.scale != 'auto':
+        if self.scale != "auto":
             self.ax.set_xlim(*self.scale[0:2])
             self.ax.set_ylim(*self.scale[2:4])
         if self.init is not None:
             self.init(self.ax)
 
         if isinstance(self.pathstyle, str):
-            self.line, = plt.plot(0, 0, self.pathstyle)
+            (self.line,) = plt.plot(0, 0, self.pathstyle)
         elif isinstance(self.pathstyle, dict):
-            self.line, = plt.plot(0, 0, **self.pathstyle)
+            (self.line,) = plt.plot(0, 0, **self.pathstyle)
 
         self.animation.add()
-            
-        plt.draw()
-        plt.show(block=False)
-
-        super().start()
-        
-    def step(self, state=None, **kwargs):
+
+        # plt.draw()
+        # plt.show(block=False)
+
+    def step(self, t, inports):
         # inputs are set
-        xyt = self.inputs[0]
+        xyt = inports[0]
 
         # update the path line
         self.xdata.append(xyt[0])
         self.ydata.append(xyt[1])
-        #plt.figure(self.fig.number)
+        # plt.figure(self.fig.number)
         if self.pathstyle is not None:
             self.line.set_data(self.xdata, self.ydata)
 
         # update the vehicle pose
         self.animation.update(xyt)
-    
-        if self.scale == 'auto':
+
+        if isinstance(self.scale, str) and self.scale == "auto":
             self.ax.relim()
             self.ax.autoscale_view()
-        super().step(state=state)
-        
-    def done(self, block=False, **kwargs):
-        if self.bd.options.graphics:
-            plt.show(block=block)
-            
-            super().done()
+        super().step(t, inports)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/blocks/uav.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/blocks/uav.py`

 * *Files 16% similar despite different names*

```diff
@@ -5,173 +5,184 @@
 import time
 
 from bdsim.components import TransferBlock, FunctionBlock
 from bdsim.graphics import GraphicsBlock
 
 
 class MultiRotor(TransferBlock):
-    """
+    r"""
     :blockname:`MULTIROTOR`
-    
-    .. table::
-       :align: left
-    
-    +------------+---------+---------+
-    | inputs     | outputs |  states |
-    +------------+---------+---------+
-    | 1          | 1       | 16      |
-    +------------+---------+---------+
-    | ndarray(4) | dict    |         | 
-    +------------+---------+---------+
+
+    Dynamic model of a multi-rotor flying robot.
+
+    :inputs: 1
+    :outputs: 1
+    :states: 16
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - ndarray(N)
+            - :math:`\varpi`, rotor velocities in (radians/sec)
+        *   - Output
+            - 0
+            - dict
+            - :math:`\mathit{x}`, vehicle state
+
+    Dynamic model of a multi-rotor flying robot that includes rotor flapping.  The
+    vehicle state is a dict containing the following items:
+
+        - ``x`` pose in the world frame as :math:`[x, y, z, \theta_Y, \theta_P, \theta_R]`
+        - ``trans`` position and velocity in the world frame as 
+          :math:`[x, y, z, \dot{x}, \dot{y}, \dot{z}]`
+        - ``rot`` orientation and angular rate in the world frame as 
+          :math:`[\theta_Y, \theta_P, \theta_R, \dot{\theta_Y}, \dot{\theta_P}, \dot{\theta_R}]`
+        - ``vb`` translational velocity in the body frame as
+          :math:`[\dot{x}, \dot{y}, \dot{z}]`
+        - ``w`` angular rates in the body frame as
+           :math:`[\dot{\theta_Y}, \dot{\theta_P}, \dot{\theta_R}]`
+        - ``a1s`` longitudinal flapping angles (radians)
+        - ``b1s`` lateral flapping angles (radians)
+        - ``X`` full state vector as 
+          :math:`[x, y, z, \theta_Y, \theta_P, \theta_R, \dot{x}, \dot{y}, \dot{z}, \dot{\theta_Y}, \dot{\theta_P}, \dot{\theta_R}]`
+
+    The dynamic model is a dict with the following key/value pairs.
+
+    ===========   ==========================================
+    key           description
+    ===========   ==========================================
+    ``nrotors``   Number of rotors (even integer)
+    ``J``         Flyer rotational inertia matrix (3x3)
+    ``h``         Height of rotors above CoG
+    ``d``         Length of flyer arms
+    ``nb``        Number of blades per rotor
+    ``r``         Rotor radius
+    ``c``         Blade chord
+    ``e``         Flapping hinge offset
+    ``Mb``        Rotor blade mass
+    ``Mc``        Estimated hub clamp mass
+    ``ec``        Blade root clamp displacement
+    ``Ib``        Rotor blade rotational inertia
+    ``Ic``        Estimated root clamp inertia
+    ``mb``        Static blade moment
+    ``Ir``        Total rotor inertia
+    ``Ct``        Non-dim. thrust coefficient
+    ``Cq``        Non-dim. torque coefficient
+    ``sigma``     Rotor solidity ratio
+    ``thetat``    Blade tip angle
+    ``theta0``    Blade root angle
+    ``theta1``    Blade twist angle
+    ``theta75``   3/4 blade angle
+    ``thetai``    Blade ideal root approximation
+    ``a``         Lift slope gradient
+    ``A``         Rotor disc area
+    ``gamma``     Lock number
+    ===========   ==========================================
+
+    .. note::
+        - Based on MATLAB code developed by Pauline Pounds 2004.
+        - SI units are used.
+        - Rotor velocity is defined looking down, clockwise from the front rotor
+          which lies on the x-axis.
+
+    :References:
+        - Design, Construction and Control of a Large Quadrotor micro air vehicle.
+          P.Pounds, `PhD thesis <https://openresearch-repository.anu.edu.au/handle/1885/146543>`_
+          Australian National University, 2007.
+        - Robotics, Vision & Control by Peter Corke, sec 4.2 in all editions
+
+    :seealso: :class:`MultiRotorMixer` :class:`MultiRotorPlot`
     """
+
     nin = 1
     nout = 1
 
-
-	# Flyer2dynamics lovingly coded by Paul Pounds, first coded 12/4/04
-	# A simulation of idealised X-4 Flyer II flight dynamics.
-	# version 2.0 2005 modified to be compatible with latest version of Matlab
-	# version 3.0 2006 fixed rotation matrix problem
-	# version 4.0 4/2/10, fixed rotor flapping rotation matrix bug, mirroring
-	# version 5.0 8/8/11, simplified and restructured
-	# version 6.0 25/10/13, fixed rotation matrix/inverse wronskian definitions, flapping cross-product bug
-	# 
-	# New in version 2:
-	#   - Generalised rotor thrust model
-	#   - Rotor flapping model
-	#   - Frame aerodynamic drag model
-	#   - Frame aerodynamic surfaces model
-	#   - Internal motor model
-	#   - Much coolage
-	# 
-	# Version 1.3
-	#   - Rigid body dynamic model
-	#   - Rotor gyroscopic model
-	#   - External motor model
-	# 
-	# ARGUMENTS
-	#   u       Reference inputs                1x4
-	#   tele    Enable telemetry (1 or 0)       1x1
-	#   crash   Enable crash detection (1 or 0) 1x1
-	#   init    Initial conditions              1x12
-	# 
-	# INPUTS
-	#   u = [N S E W]
-	#   NSEW motor commands                     1x4
-	# 
-	# CONTINUOUS STATES
-	#   z      Position                         3x1   (x,y,z)
-	#   v      Velocity                         3x1   (xd,yd,zd)
-	#   n      Attitude                         3x1   (Y,P,R)
-	#   o      Angular velocity                 3x1   (wx,wy,wz)
-	#   w      Rotor angular velocity           4x1
-	# 
-	# Notes: z-axis downward so altitude is -z(3)
-	# 
-	# CONTINUOUS STATE MATRIX MAPPING
-	#   x = [z1 z2 z3 n1 n2 n3 z1 z2 z3 o1 o2 o3 w1 w2 w3 w4]
-	# 
-	# 
-	# CONTINUOUS STATE EQUATIONS
-	#   z` = v
-	#   v` = g*e3 - (1/m)*T*R*e3
-	#   I*o` = -o X I*o + G + torq
-	#   R = f(n)
-	#   n` = inv(W)*o
-	# 
+    # Flyer2dynamics lovingly coded by Paul Pounds, first coded 12/4/04
+    # A simulation of idealised X-4 Flyer II flight dynamics.
+    # version 2.0 2005 modified to be compatible with latest version of Matlab
+    # version 3.0 2006 fixed rotation matrix problem
+    # version 4.0 4/2/10, fixed rotor flapping rotation matrix bug, mirroring
+    # version 5.0 8/8/11, simplified and restructured
+    # version 6.0 25/10/13, fixed rotation matrix/inverse wronskian definitions, flapping cross-product bug
+    #
+    # New in version 2:
+    #   - Generalised rotor thrust model
+    #   - Rotor flapping model
+    #   - Frame aerodynamic drag model
+    #   - Frame aerodynamic surfaces model
+    #   - Internal motor model
+    #   - Much coolage
+    #
+    # Version 1.3
+    #   - Rigid body dynamic model
+    #   - Rotor gyroscopic model
+    #   - External motor model
+    #
+    # ARGUMENTS
+    #   u       Reference inputs                1x4
+    #   tele    Enable telemetry (1 or 0)       1x1
+    #   crash   Enable crash detection (1 or 0) 1x1
+    #   init    Initial conditions              1x12
+    #
+    # INPUTS
+    #   u = [N S E W]
+    #   NSEW motor commands                     1x4
+    #
+    # CONTINUOUS STATES
+    #   z      Position                         3x1   (x,y,z)
+    #   v      Velocity                         3x1   (xd,yd,zd)
+    #   n      Attitude                         3x1   (Y,P,R)
+    #   o      Angular velocity                 3x1   (wx,wy,wz)
+    #   w      Rotor angular velocity           4x1
+    #
+    # Notes: z-axis downward so altitude is -z(3)
+    #
+    # CONTINUOUS STATE MATRIX MAPPING
+    #   x = [z1 z2 z3 n1 n2 n3 z1 z2 z3 o1 o2 o3 w1 w2 w3 w4]
+    #
+    #
+    # CONTINUOUS STATE EQUATIONS
+    #   z` = v
+    #   v` = g*e3 - (1/m)*T*R*e3
+    #   I*o` = -o X I*o + G + torq
+    #   R = f(n)
+    #   n` = inv(W)*o
+    #
     def __init__(self, model, groundcheck=True, speedcheck=True, x0=None, **blockargs):
         r"""
         Create a multi-rotor dynamic model block.
 
         :param model: A dictionary of vehicle geometric and inertial properties
         :type model: dict
         :param groundcheck: Prevent vehicle moving below ground :math:`z>0`, defaults to True
         :type groundcheck: bool
         :param speedcheck: Check for non-positive rotor speed, defaults to True
         :type speedcheck: bool
         :param x0: Initial state, defaults to None
         :type x0: array_like(6) or array_like(12), optional
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a MULTIROTOR block
-        :rtype: MultiRotor instance
-        
-        Dynamic model of a multi-rotor flying robot, includes rotor flapping.
-
-        **Block ports**
-        
-            :input : a vector of input rotor speeds in (radians/sec).  These are,
-                looking down, clockwise from the front rotor which lies on the x-axis.
-                
-            :output x: a dictionary signal with the following items:
-                
-                - ``x`` pose in the world frame as :math:`[x, y, z, \theta_Y, \theta_P, \theta_R]`
-                - ``vb`` translational velocity in the world frame (metres/sec)
-                - ``w`` angular rates in the world frame as yaw-pitch-roll rates (radians/second)
-                - ``a1s`` longitudinal flapping angles (radians)
-                - ``b1s`` lateral flapping angles (radians)
-
-        **Model parameters**
-
-        The dynamic model is a dict with the following key/value pairs.
-
-        ===========   ==========================================
-        key           description
-        ===========   ==========================================
-        ``nrotors``   Number of rotors (even integer)                       
-        ``J``         Flyer rotational inertia matrix (3x3)
-        ``h``         Height of rotors above CoG
-        ``d``         Length of flyer arms
-        ``nb``        Number of blades per rotor
-        ``r``         Rotor radius
-        ``c``         Blade chord
-        ``e``         Flapping hinge offset
-        ``Mb``        Rotor blade mass
-        ``Mc``        Estimated hub clamp mass
-        ``ec``        Blade root clamp displacement
-        ``Ib``        Rotor blade rotational inertia
-        ``Ic``        Estimated root clamp inertia
-        ``mb``        Static blade moment
-        ``Ir``        Total rotor inertia
-        ``Ct``        Non-dim. thrust coefficient
-        ``Cq``        Non-dim. torque coefficient
-        ``sigma``     Rotor solidity ratio
-        ``thetat``    Blade tip angle
-        ``theta0``    Blade root angle
-        ``theta1``    Blade twist angle
-        ``theta75``   3/4 blade angle
-        ``thetai``    Blade ideal root approximation
-        ``a``         Lift slope gradient
-        ``A``         Rotor disc area
-        ``gamma``     Lock number
-        ===========   ==========================================
-
-        .. note::
-            - SI units are used.
-            - Based on MATLAB code developed by Pauline Pounds 2004.
-
-        :References:
-            - Design, Construction and Control of a Large Quadrotor micro air vehicle.
-              P.Pounds, `PhD thesis <https://openresearch-repository.anu.edu.au/handle/1885/146543>`_
-              Australian National University, 2007.
-
-        :seealso: :class:`MultiRotorMixer` :class:`MultiRotorPlot`
         """
         if model is None:
-            raise ValueError('no model provided')
-            
+            raise ValueError("no model provided")
+
         super().__init__(nin=1, nout=1, **blockargs)
-        self.type = 'quadrotor'
-    
+
         try:
-            nrotors = model['nrotors']
+            nrotors = model["nrotors"]
         except KeyError:
-            raise RuntimeError('vehicle model does not contain nrotors')
-        assert nrotors % 2 == 0, 'Must have an even number of rotors'
-        
+            raise RuntimeError("vehicle model does not contain nrotors")
+        assert nrotors % 2 == 0, "Must have an even number of rotors"
+
         self.nstates = 12
         if x0 is None:
             x0 = np.zeros((self.nstates,))
         else:
             x0 = np.r_[x0]
             if len(x0) == 6:
                 # assume all derivative are zero
@@ -180,320 +191,383 @@
                 # assume x,y,z,yaw
                 x0 = np.r_[x0[:3], 0, 0, x0[3], np.zeros((6,))]
             elif len(x0) == 3:
                 # assume x,y,z
                 x0 = np.r_[x0[:3], np.zeros((9,))]
             elif len(x0) != self.nstates:
                 raise ValueError("x0 is the wrong length")
-            
+
         self._x0 = x0
-        
+
         self.nrotors = nrotors
         self.model = model
-        
+
         self.groundcheck = groundcheck
         self.speedcheck = speedcheck
 
-        self.D = np.zeros((3,self.nrotors))
+        self.D = np.zeros((3, self.nrotors))
         self.theta = np.zeros((self.nrotors,))
         for i in range(0, self.nrotors):
             theta = i / self.nrotors * 2 * pi
             #  Di      Rotor hub displacements (1x3)
             # first rotor is on the x-axis, clockwise order looking down from above
-            self.D[:,i] = np.r_[ model['d'] * cos(theta), model['d'] * sin(theta), model['h']]
+            self.D[:, i] = np.r_[
+                model["d"] * cos(theta), model["d"] * sin(theta), model["h"]
+            ]
             self.theta[i] = theta
-            
+
         self.a1s = np.zeros((self.nrotors,))
         self.b1s = np.zeros((self.nrotors,))
-    
-    def output(self, t=None):
-        
-        model = self.model    
-        
+
+    def output(self, t, inports, x):
+
+        model = self.model
+
         # compute output vector as a function of state vector
         #   z      Position                         3x1   (x,y,z)
         #   v      Velocity                         3x1   (xd,yd,zd)
         #   n      Attitude                         3x1   (Y,P,R)
         #   o      Angular velocity                 3x1   (Yd,Pd,Rd)
-        
-        n = self._x[3:6]   # RPY angles
-        phi = n[0]         # yaw
-        the = n[1]         # pitch
-        psi = n[2]         # roll
-        
+
+        n = x[3:6]  # RPY angles
+        phi = n[0]  # yaw
+        the = n[1]  # pitch
+        psi = n[2]  # roll
+
         # rotz(phi)*roty(the)*rotx(psi)
         #  BBF > Inertial rotation matrix
-        R = np.array([
-                [cos(the) * cos(phi), sin(psi) * sin(the) * cos(phi) - cos(psi) * sin(phi), cos(psi) * sin(the) * cos(phi) + sin(psi) * sin(phi)],
-                [cos(the) * sin(phi), sin(psi) * sin(the) * sin(phi) + cos(psi) * cos(phi), cos(psi) * sin(the) * sin(phi) - sin(psi) * cos(phi)],
-                [-sin(the),           sin(psi) * cos(the),                                  cos(psi) * cos(the)]
-            ])
-        
-        #inverted Wronskian
-        iW = np.array([
-                    [0,        sin(psi),             cos(psi)],             
-                    [0,        cos(psi) * cos(the), -sin(psi) * cos(the)],
-                    [cos(the), sin(psi) * sin(the),  cos(psi) * sin(the)]
-                ]) / cos(the)
-        
+        R = np.array(
+            [
+                [
+                    cos(the) * cos(phi),
+                    sin(psi) * sin(the) * cos(phi) - cos(psi) * sin(phi),
+                    cos(psi) * sin(the) * cos(phi) + sin(psi) * sin(phi),
+                ],
+                [
+                    cos(the) * sin(phi),
+                    sin(psi) * sin(the) * sin(phi) + cos(psi) * cos(phi),
+                    cos(psi) * sin(the) * sin(phi) - sin(psi) * cos(phi),
+                ],
+                [-sin(the), sin(psi) * cos(the), cos(psi) * cos(the)],
+            ]
+        )
+
+        # inverted Wronskian
+        iW = np.array(
+            [
+                [0, sin(psi), cos(psi)],
+                [0, cos(psi) * cos(the), -sin(psi) * cos(the)],
+                [cos(the), sin(psi) * sin(the), cos(psi) * sin(the)],
+            ]
+        ) / cos(the)
+
         # return velocity in the body frame
 
-        vd = np.linalg.inv(R) @ self._x[6:9]   # translational velocity mapped to body frame
-        rpyd = iW @ self._x[9:12]               # RPY rates mapped to body frame
+        vd = np.linalg.inv(R) @ x[6:9]  # translational velocity mapped to body frame
+        rpyd = iW @ x[9:12]  # RPY rates mapped to body frame
 
         out = {}
 
-        out['x'] = self._x[0:6]
-        out['trans'] = np.r_[self._x[:3], vd]
-        out['rot'] = np.r_[self._x[3:6], rpyd]
-
-        out['a1s'] = self.a1s
-        out['b1s'] = self.b1s
-        out['X'] = np.r_[self._x[:6], vd, rpyd]
+        out["x"] = x[0:6]
+        out["trans"] = np.r_[x[:3], vd]
+        out["rot"] = np.r_[x[3:6], rpyd]
+        out["vb"] = np.linalg.inv(R) @ x[6:9]   # translational velocity mapped to body frame
+        out["w"] = iW @ x[9:12]                 # RPY rates mapped to body frame
+
+        out["a1s"] = self.a1s
+        out["b1s"] = self.b1s
+        out["X"] = np.r_[x[:6], vd, rpyd]
 
         # sys = [ x(1:6);
         #     inv(R)*x(7:9);   % translational velocity mapped to body frame
-        #     iW*x(10:12)]; 
-    
+        #     iW*x(10:12)];
+
         return [out]
-    
-    def deriv(self):
-    
+
+    def deriv(self, t, inports, x):
+
         model = self.model
-        
+
         # Body-fixed frame references
         #   ei      Body fixed frame references 3x1
         e3 = np.r_[0, 0, 1]
-        
+
         # process inputs
-        w = self.inputs[0]
+        w = inports[0]
         if len(w) != self.nrotors:
-            raise RuntimeError('input vector wrong size')
-    
+            raise RuntimeError("input vector wrong size")
+
         if self.speedcheck and np.any(w == 0):
             # might need to fix this, preculudes aerobatics :(
             # mu becomes NaN due to 0/0
-            raise RuntimeError('quadrotor_dynamics: not defined for zero rotor speed');
-        
+            raise RuntimeError("quadrotor_dynamics: not defined for zero rotor speed")
+
         # EXTRACT STATES FROM X
-        z = self._x[0:3]   # position in {W}
-        n = self._x[3:6]   # RPY angles {W}
-        v = self._x[6:9]   # velocity in {W}
-        o = self._x[9:12]  # angular velocity in {W}
-        
+        z = x[0:3]  # position in {W}
+        n = x[3:6]  # RPY angles {W}
+        v = x[6:9]  # velocity in {W}
+        o = x[9:12]  # angular velocity in {W}
+
         # PREPROCESS ROTATION AND WRONSKIAN MATRICIES
-        phi = n[0]    # yaw
-        the = n[1]    # pitch
-        psi = n[2]    # roll
-
-    # phi = n(1);    % yaw
-    # the = n(2);    % pitch
-    # psi = n(3);    % roll
+        phi = n[0]  # yaw
+        the = n[1]  # pitch
+        psi = n[2]  # roll
+
+        # phi = n(1);    % yaw
+        # the = n(2);    % pitch
+        # psi = n(3);    % roll
 
-        
         # rotz(phi)*roty(the)*rotx(psi)
         # BBF > Inertial rotation matrix
-        R = np.array([
-            [cos(the)*cos(phi), sin(psi)*sin(the)*cos(phi)-cos(psi)*sin(phi), cos(psi)*sin(the)*cos(phi)+sin(psi)*sin(phi)],
-            [cos(the)*sin(phi), sin(psi)*sin(the)*sin(phi)+cos(psi)*cos(phi), cos(psi)*sin(the)*sin(phi)-sin(psi)*cos(phi)],
-            [-sin(the),         sin(psi)*cos(the),                            cos(psi)*cos(the)]
-            ])
-        
+        R = np.array(
+            [
+                [
+                    cos(the) * cos(phi),
+                    sin(psi) * sin(the) * cos(phi) - cos(psi) * sin(phi),
+                    cos(psi) * sin(the) * cos(phi) + sin(psi) * sin(phi),
+                ],
+                [
+                    cos(the) * sin(phi),
+                    sin(psi) * sin(the) * sin(phi) + cos(psi) * cos(phi),
+                    cos(psi) * sin(the) * sin(phi) - sin(psi) * cos(phi),
+                ],
+                [-sin(the), sin(psi) * cos(the), cos(psi) * cos(the)],
+            ]
+        )
+
         # Manual Construction
         #     Q3 = [cos(phi) -sin(phi) 0;sin(phi) cos(phi) 0;0 0 1];   % RZ %Rotation mappings
         #     Q2 = [cos(the) 0 sin(the);0 1 0;-sin(the) 0 cos(the)];   % RY
         #     Q1 = [1 0 0;0 cos(psi) -sin(psi);0 sin(psi) cos(psi)];   % RX
         #     R = Q3*Q2*Q1    %Rotation matrix
         #
         #    RZ * RY * RX
         # inverted Wronskian
-        iW = np.array([
-                    [0,        sin(psi),          cos(psi)],            
-                    [0,        cos(psi)*cos(the), -sin(psi)*cos(the)],
-                    [cos(the), sin(psi)*sin(the), cos(psi)*sin(the)]
-                ]) / cos(the)
-    
-
-    #     % rotz(phi)*roty(the)*rotx(psi)
-    # R = [cos(the)*cos(phi) sin(psi)*sin(the)*cos(phi)-cos(psi)*sin(phi) cos(psi)*sin(the)*cos(phi)+sin(psi)*sin(phi);   %BBF > Inertial rotation matrix
-    #      cos(the)*sin(phi) sin(psi)*sin(the)*sin(phi)+cos(psi)*cos(phi) cos(psi)*sin(the)*sin(phi)-sin(psi)*cos(phi);
-    #      -sin(the)         sin(psi)*cos(the)                            cos(psi)*cos(the)];
-    
-    # iW = [0        sin(psi)          cos(psi);             %inverted Wronskian
-    #       0        cos(psi)*cos(the) -sin(psi)*cos(the);
-    #       cos(the) sin(psi)*sin(the) cos(psi)*sin(the)] / cos(the);
+        iW = np.array(
+            [
+                [0, sin(psi), cos(psi)],
+                [0, cos(psi) * cos(the), -sin(psi) * cos(the)],
+                [cos(the), sin(psi) * sin(the), cos(psi) * sin(the)],
+            ]
+        ) / cos(the)
+
+        #     % rotz(phi)*roty(the)*rotx(psi)
+        # R = [cos(the)*cos(phi) sin(psi)*sin(the)*cos(phi)-cos(psi)*sin(phi) cos(psi)*sin(the)*cos(phi)+sin(psi)*sin(phi);   %BBF > Inertial rotation matrix
+        #      cos(the)*sin(phi) sin(psi)*sin(the)*sin(phi)+cos(psi)*cos(phi) cos(psi)*sin(the)*sin(phi)-sin(psi)*cos(phi);
+        #      -sin(the)         sin(psi)*cos(the)                            cos(psi)*cos(the)];
+
+        # iW = [0        sin(psi)          cos(psi);             %inverted Wronskian
+        #       0        cos(psi)*cos(the) -sin(psi)*cos(the);
+        #       cos(the) sin(psi)*sin(the) cos(psi)*sin(the)] / cos(the);
 
         # ROTOR MODEL
-        T = np.zeros((3,4))
-        Q = np.zeros((3,4))
-        tau = np.zeros((3,4))
-    
+        T = np.zeros((3, 4))
+        Q = np.zeros((3, 4))
+        tau = np.zeros((3, 4))
+
         a1s = self.a1s
         b1s = self.b1s
-    
+
         for i in range(0, self.nrotors):  # for each rotor
-    
+
             # Relative motion
-            Vr = np.cross(o, self.D[:,i]) + v
-            mu = sqrt(np.sum(Vr[0:2]**2)) / (abs(w[i]) * model['r'])  # Magnitude of mu, planar components
-            lc = Vr[2] / (abs(w[i]) * model['r'])                     # Non-dimensionalised normal inflow
-            li = mu                                                  # Non-dimensionalised induced velocity approximation
+            Vr = np.cross(o, self.D[:, i]) + v
+            mu = sqrt(np.sum(Vr[0:2] ** 2)) / (
+                abs(w[i]) * model["r"]
+            )  # Magnitude of mu, planar components
+            lc = Vr[2] / (abs(w[i]) * model["r"])  # Non-dimensionalised normal inflow
+            li = mu  # Non-dimensionalised induced velocity approximation
             alphas = atan2(lc, mu)
-            j = atan2(Vr[1], Vr[0])                                  # Sideslip azimuth relative to e1 (zero over nose)
-            J = np.array([
-                    [cos(j), -sin(j)],
-                    [sin(j),  cos(j)]
-                ])                                                   # BBF > mu sideslip rotation matrix
-            
+            j = atan2(Vr[1], Vr[0])  # Sideslip azimuth relative to e1 (zero over nose)
+            J = np.array(
+                [[cos(j), -sin(j)], [sin(j), cos(j)]]
+            )  # BBF > mu sideslip rotation matrix
+
             # Flapping
-            beta = np.array([
-                    [((8/3*model['theta0'] + 2 * model['theta1']) * mu - 2 * lc * mu) / (1 - mu**2 / 2)], # Longitudinal flapping
-                    [0]                                                              # Lattitudinal flapping (note sign)
-                ])
-    
-                # sign(w) * (4/3)*((Ct/sigma)*(2*mu*gamma/3/a)/(1+3*e/2/r) + li)/(1+mu^2/2)]; 
-    
-            beta = J.T @ beta;                                    # Rotate the beta flapping angles to longitudinal and lateral coordinates.
-            a1s[i] = beta[0] - 16 / model['gamma'] / abs(w[i]) * o[1]
-            b1s[i] = beta[1] - 16 / model['gamma'] / abs(w[i]) * o[0]
-            
+            beta = np.array(
+                [
+                    [
+                        (
+                            (8 / 3 * model["theta0"] + 2 * model["theta1"]) * mu
+                            - 2 * lc * mu
+                        )
+                        / (1 - mu**2 / 2)
+                    ],  # Longitudinal flapping
+                    [0],  # Lattitudinal flapping (note sign)
+                ]
+            )
+
+            # sign(w) * (4/3)*((Ct/sigma)*(2*mu*gamma/3/a)/(1+3*e/2/r) + li)/(1+mu^2/2)];
+
+            beta = J.T @ beta
+            # Rotate the beta flapping angles to longitudinal and lateral coordinates.
+            a1s[i] = beta[0] - 16 / model["gamma"] / abs(w[i]) * o[1]
+            b1s[i] = beta[1] - 16 / model["gamma"] / abs(w[i]) * o[0]
+
             # Forces and torques
-    
+
             # Rotor thrust, linearised angle approximations
-    
-            T[:,i] = model['Ct'] * model['rho'] * model['A'] * model['r']**2 * w[i]**2 * \
-                np.r_[-cos(b1s[i]) * sin(a1s[i]), sin(b1s[i]), -cos(a1s[i])*cos(b1s[i])] 
-    
+
+            T[:, i] = (
+                model["Ct"]
+                * model["rho"]
+                * model["A"]
+                * model["r"] ** 2
+                * w[i] ** 2
+                * np.r_[
+                    -cos(b1s[i]) * sin(a1s[i]), sin(b1s[i]), -cos(a1s[i]) * cos(b1s[i])
+                ]
+            )
+
             # Rotor drag torque - note that this preserves w[i] direction sign
-    
-            Q[:,i] = -model['Cq'] * model['rho'] * model['A'] * model['r']**3 * w[i] * abs(w[i]) * e3  
-    
-            tau[:,i] = np.cross(T[:,i], self.D[:,i])    # Torque due to rotor thrust
-    
+
+            Q[:, i] = (
+                -model["Cq"]
+                * model["rho"]
+                * model["A"]
+                * model["r"] ** 3
+                * w[i]
+                * abs(w[i])
+                * e3
+            )
+
+            tau[:, i] = np.cross(T[:, i], self.D[:, i])  # Torque due to rotor thrust
+
         # print(f"{tau=}")
         # print(f"{T=}")
         # RIGID BODY DYNAMIC MODEL
         dz = v
         dn = iW @ o
-        
-        dv = model['g'] * e3 + R @ np.sum(T, axis=1) / model['M']
-        do = -np.linalg.inv(model['J']) @ (np.cross(o, model['J'] @ o) + np.sum(tau, axis=1) + np.sum(Q, axis=1)) # row sum of torques
-    
+
+        dv = model["g"] * e3 + R @ np.sum(T, axis=1) / model["M"]
+        do = -np.linalg.inv(model["J"]) @ (
+            np.cross(o, model["J"] @ o) + np.sum(tau, axis=1) + np.sum(Q, axis=1)
+        )  # row sum of torques
+
         # dv = quad.g*e3 + R*(1/quad.M)*sum(T,2);
         # do = inv(quad.J)*(cross(-o,quad.J*o) + sum(tau,2) + sum(Q,2)); %row sum of torques
 
         # vehicle can't fall below ground, remember z is down
         if self.groundcheck and z[2] > 0:
             z[0] = 0
             dz[0] = 0
 
         # # stash the flapping information for plotting
         # self.a1s = a1s
         # self.b1s = b1s
-        
+
         return np.r_[dz, dn, dv, do]  # This is the state derivative vector
 
+
 # ------------------------------------------------------------------------ #
 
+
 class MultiRotorMixer(FunctionBlock):
-    """
+    r"""
     :blockname:`MULTIROTORMIXER`
-    
-    .. table::
-       :align: left
-    
-    +--------+------------+---------+
-    | inputs | outputs    |  states |
-    +--------+------------+---------+
-    | 4      | 1          | 0       |
-    +--------+------------+---------+
-    | float  | ndarray(4) |         | 
-    +--------+------------+---------+
+
+    Speed mixer for a multi-rotor flying vehicle.
+
+    :inputs: 4
+    :outputs: 1
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - float
+            - :math:`\tau_R`, roll torque
+        *   - Input
+            - 1
+            - float
+            - :math:`\tau_P`, pitch torque
+        *   - Input
+            - 2
+            - float
+            - :math:`\tau_Y`, yaw torque
+        *   - Input
+            - 3
+            - float
+            - :math:`T`, total thrust
+        *   - Output
+            - 0
+            - ndarray(N)
+            - :math:`\varpi`, rotor speeds
+
+    This block converts airframe moments and total thrust into a 1D
+    array of rotor speeds which can be input to the ``MULTIROTOR`` block.
+
+    The model is a dict with the following key/value pairs.
+
+    ===========   ==========================================
+    key           description
+    ===========   ==========================================
+    ``nrotors``   Number of rotors (even integer)
+    ``h``         Height of rotors above CoG
+    ``d``         Length of flyer arms
+    ``r``         Rotor radius
+    ===========   ==========================================
+
+    .. note:: Based on MATLAB code developed by Pauline Pounds 2004.
+
+    :seealso: :class:`MultiRotor` :class:`MultiRotorPlot`
     """
- 
+
     nin = 4
     nout = 1
-    inlabels = ('r', 'p', 'y', 'T')
-    outlabels = ('',)
+    inlabels = ("r", "p", "y", "T")
+    outlabels = ("",)
 
     def __init__(self, model=None, wmax=1000, wmin=5, **blockargs):
         """
-        Create a speed mixer block for a multi-rotor flying vehicle.
-
         :param model: A dictionary of vehicle geometric and inertial properties
         :type model: dict
         :param maxw: maximum rotor speed in rad/s, defaults to 1000
         :type maxw: float
         :param minw: minimum rotor speed in rad/s, defaults to 5
         :type minw: float
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a MULTIROTORMIXER block
-        :rtype: MultiRotorMixer instance
-
-        This block converts airframe moments and total thrust into a 1D
-        array of rotor speeds which can be input to the MULTIROTOR block.
-    
-        **Block ports**
-        
-            :input r: roll torque
-            :input p: pitch torque
-            :input y: yaw torque
-            :input T: total thrust
-
-            :output : 1D array of rotor speeds
-
-        **Model parameters**
-
-        The model is a dict with the following key/value pairs.
-
-        ===========   ==========================================
-        key           description
-        ===========   ==========================================
-        ``nrotors``   Number of rotors (even integer)      
-        ``h``         Height of rotors above CoG
-        ``d``         Length of flyer arms
-        ``r``         Rotor radius
-        ===========   ==========================================
-
-        .. note::
-            - Based on MATLAB code developed by Pauline Pounds 2004.
-
-        :seealso: :class:`MultiRotor` :class:`MultiRotorPlot`
         """
         if model is None:
-            raise ValueError('no model provided')
+            raise ValueError("no model provided")
 
         super().__init__(**blockargs)
-        self.type = 'multirotormixer'
+        self.type = "multirotormixer"
         self.model = model
-        self.nrotors = model['nrotors']
+        self.nrotors = model["nrotors"]
         self.minw = wmin**2
         self.maxw = wmax**2
         self.theta = np.arange(self.nrotors) / self.nrotors * 2 * np.pi
-        
+
         # build the Nx4 mixer matrix
         M = []
         s = []
         for i in range(self.nrotors):
             # roll and pitch coupling
             column = np.r_[
-                -sin(self.theta[i]) * model['d'] * model['b'], 
-                cos(self.theta[i]) * model['d'] * model['b'],
-                model['k'] if (i % 2) == 0 else -model['k'] ,
-                -model['b']
+                -sin(self.theta[i]) * model["d"] * model["b"],
+                cos(self.theta[i]) * model["d"] * model["b"],
+                model["k"] if (i % 2) == 0 else -model["k"],
+                -model["b"],
             ]
             s.append(1 if (i % 2) == 0 else -1)
             M.append(column)
         self.M = np.array(M).T
         self.Minv = np.linalg.inv(self.M)
         self.signs = np.array(s)
 
-    def output(self, t):
-        tau = self.inputs
+    def output(self, t, inports, x):
+        tau = inports
 
         # mix airframe force/torque to rotor thrusts
         w = self.Minv @ tau
 
         # clip the rotor speeds to the range [minw, maxw]
         w = np.clip(w, self.minw, self.maxw)
 
@@ -504,33 +578,72 @@
         w = self.signs * w
 
         return [w]
 
 
 # ------------------------------------------------------------------------ #
 
+
 class MultiRotorPlot(GraphicsBlock):
     """
     :blockname:`MULTIROTORPLOT`
-    
-    .. table::
-       :align: left
-    
-    +--------+---------+---------+
-    | inputs | outputs |  states |
-    +--------+---------+---------+
-    | 1      | 0       | 0       |
-    +--------+---------+---------+
-    | dict   |         |         | 
-    +--------+---------+---------+
+
+    Displays/animates a multi-rotor flying vehicle.
+
+    :inputs: 1
+    :outputs: 0
+    :states: 0
+
+    .. list-table::
+        :header-rows: 1
+
+        *   - Port type
+            - Port number
+            - Types
+            - Description
+        *   - Input
+            - 0
+            - dict
+            - :math:`\mathit{x}`, vehicle state
+
+    Animate a multi-rotor flying vehicle using Matplotlib graphics.  The
+    rotors are shown as circles and their orientation includes rotor
+    flapping which can be exagerated by ``flapscale``.
+
+    .. figure:: ../figs/multirotorplot.png
+        :width: 500px
+        :alt: example of generated graphic
+
+        Example of quad-rotor display.
+
+    The input is a dictionary signal and the block requires the items:
+
+            - ``x`` pose in the world frame as :math:`[x, y, z, \theta_Y, \theta_P, \theta_R]`
+            - ``a1s`` rotor flap angle
+            - ``b1s`` rotor flap angle
+
+    The model is a dict with the following key/value pairs.
+
+    ===========   ==========================================
+    key           description
+    ===========   ==========================================
+    ``nrotors``   Number of rotors (even integer)
+    ``h``         Height of rotors above CoG
+    ``d``         Length of flyer arms
+    ``r``         Rotor radius
+    ===========   ==========================================
+
+    .. note:: Based on MATLAB code developed by Pauline Pounds 2004.
+
+    :seealso: :class:`MultiRotor` :class:`MultiRotorMixer`
     """
- 
+
     nin = 1
     nout = 0
-    inlabels = ('x',)
+    inlabels = ("x",)
 
     # Based on code lovingly coded by Paul Pounds, first coded 17/4/02
     # version 2 2004 added scaling and ground display
     # version 3 2010 improved rotor rendering and fixed mirroring bug
 
     # Displays X-4 flyer position and attitude in a 3D plot.
     # GREEN ROTOR POINTS NORTH
@@ -546,237 +659,242 @@
     # 3 Center Z position
     # 4 Yaw angle in rad
     # 5 Pitch angle in rad
     # 6 Roll angle in rad
 
     nin = 1
     nout = 0
-    inlabels = ('x',)
-     
-    def __init__(self, model, scale=[-2, 2, -2, 2, 10], flapscale=1, projection='ortho', **blockargs):
-        """
-        Create a block that displays/animates a multi-rotor flying vehicle.
+    inlabels = ("x",)
 
+    def __init__(
+        self,
+        model,
+        scale=[-2, 2, -2, 2, 10],
+        flapscale=1,
+        projection="ortho",
+        **blockargs,
+    ):
+        """
         :param model: A dictionary of vehicle geometric and inertial properties
         :type model: dict
         :param scale: dimensions of workspace: xmin, xmax, ymin, ymax, zmin, zmax, defaults to [-2,2,-2,2,10]
         :type scale: array_like, optional
         :param flapscale: exagerate flapping angle by this factor, defaults to 1
         :type flapscale: float
         :param projection: 3D projection, one of: 'ortho' [default], 'perspective'
         :type projection: str
         :param blockargs: |BlockOptions|
         :type blockargs: dict
-        :return: a MULTIROTORPLOT block
-        :rtype: MultiRotorPlot instance
-
-        Animate a multi-rotor flying vehicle using Matplotlib graphics.  The
-        rotors are shown as circles and their orientation includes rotor
-        flapping which can be exagerated by ``flapscale``.
-
-        .. figure:: ../../figs/multirotorplot.png
-           :width: 500px
-           :alt: example of generated graphic
-
-           Example of quad-rotor display.
-
-        **Block ports**
-        
-            :input x: a dictionary signal that includes the item:
-                
-                - ``x`` pose in the world frame as :math:`[x, y, z, \theta_Y, \theta_P, \theta_R]`
-                - ``a1s`` rotor flap angle
-                - ``b1s`` rotor flap angle
-
-        **Model parameters**
-
-        The model is a dict with the following key/value pairs.
-
-        ===========   ==========================================
-        key           description
-        ===========   ==========================================
-        ``nrotors``   Number of rotors (even integer)      
-        ``h``         Height of rotors above CoG
-        ``d``         Length of flyer arms
-        ``r``         Rotor radius
-        ===========   ==========================================
-
-        .. note::
-            - Based on MATLAB code developed by Pauline Pounds 2004.
-
-        :seealso: :class:`MultiRotor` :class:`MultiRotorMixer`
         """
         if model is None:
-            raise ValueError('no model provided')
+            raise ValueError("no model provided")
 
         super().__init__(nin=1, **blockargs)
-        self.type = 'quadrotorplot'
+        self.type = "quadrotorplot"
         self.model = model
         self.scale = scale
-        self.nrotors = model['nrotors']
+        self.nrotors = model["nrotors"]
         self.projection = projection
         self.flapscale = flapscale
 
-    def start(self, state):
+    def start(self, simstate):
         quad = self.model
-        
+
         # vehicle dimensons
-        d = quad['d'];  # Hub displacement from COG
-        r = quad['r'];  # Rotor radius
+        d = quad["d"]
+        # Hub displacement from COG
+        r = quad["r"]
+        # Rotor radius
 
-        #C = np.zeros((3, self.nrotors))   ## WHERE USED?
-        self.D = np.zeros((3,self.nrotors))
+        # C = np.zeros((3, self.nrotors))   ## WHERE USED?
+        self.D = np.zeros((3, self.nrotors))
 
         for i in range(0, self.nrotors):
             theta = i / self.nrotors * 2 * pi
             #  Di      Rotor hub displacements (1x3)
             # first rotor is on the x-axis, clockwise order looking down from above
-            self.D[:,i] = np.r_[ quad['d'] * cos(theta), quad['d'] * sin(theta), quad['h']]
-        
-        #draw ground
-        self.fig = self.create_figure(state)
+            self.D[:, i] = np.r_[
+                quad["d"] * cos(theta), quad["d"] * sin(theta), quad["h"]
+            ]
+
+        # draw ground
+        self.fig = self.create_figure(simstate)
         # no axes in the figure, create a 3D axes
-        self.ax = self.fig.add_subplot(111, projection='3d', proj_type=self.projection)
+        self.ax = self.fig.add_subplot(111, projection="3d", proj_type=self.projection)
 
         # ax.set_aspect('equal')
-        self.ax.set_xlabel('X')
-        self.ax.set_ylabel('Y')
-        self.ax.set_zlabel('-Z (height above ground)')
-
-        self.panel = self.ax.text2D(0.05, 0.95, '', transform=self.ax.transAxes, 
-            fontsize=10, family='monospace', verticalalignment='top',
-            bbox=dict(boxstyle='round', facecolor='white', edgecolor='black'))
+        self.ax.set_xlabel("X")
+        self.ax.set_ylabel("Y")
+        self.ax.set_zlabel("-Z (height above ground)")
+
+        self.panel = self.ax.text2D(
+            0.05,
+            0.95,
+            "",
+            transform=self.ax.transAxes,
+            fontsize=10,
+            family="monospace",
+            verticalalignment="top",
+            bbox=dict(boxstyle="round", facecolor="white", edgecolor="black"),
+        )
 
         # TODO allow user to set maximum height of plot volume
         self.ax.set_xlim(self.scale[0], self.scale[1])
         self.ax.set_ylim(self.scale[2], self.scale[3])
         self.ax.set_zlim(0, self.scale[4])
 
         # plot the ground boundaries and the big cross
-        self.ax.plot([self.scale[0], self.scale[1]], [self.scale[2], self.scale[3]], [0, 0], 'b-')
-        self.ax.plot([self.scale[0], self.scale[1]], [self.scale[3], self.scale[2]], [0, 0], 'b-')
+        self.ax.plot(
+            [self.scale[0], self.scale[1]], [self.scale[2], self.scale[3]], [0, 0], "b-"
+        )
+        self.ax.plot(
+            [self.scale[0], self.scale[1]], [self.scale[3], self.scale[2]], [0, 0], "b-"
+        )
         self.ax.grid(True)
-        
-        self.shadow, = self.ax.plot([0, 0], [0, 0], 'k--')
-        self.groundmark, = self.ax.plot([0], [0], [0], 'kx')
-        
+
+        (self.shadow,) = self.ax.plot([0, 0], [0, 0], "k--")
+        (self.groundmark,) = self.ax.plot([0], [0], [0], "kx")
+
         self.arm = []
         self.disk = []
         for i in range(0, self.nrotors):
-            h, = self.ax.plot([0], [0], [0])
+            (h,) = self.ax.plot([0], [0], [0])
             self.arm.append(h)
             if i == 0:
-                color = 'b-'
+                color = "b-"
             else:
-                color = 'g-'
-            h, = self.ax.plot([0], [0], [0], color)
+                color = "g-"
+            (h,) = self.ax.plot([0], [0], [0], color)
             self.disk.append(h)
-            
+
         self.a1s = np.zeros((self.nrotors,))
         self.b1s = np.zeros((self.nrotors,))
-            
+
         plt.draw()
         plt.show(block=False)
 
-        super().start()
-
-    def step(self, state):
+        super().start(simstate)
 
+    def step(self, t, inports):
         def plot3(h, x, y, z):
             h.set_data_3d(x, y, z)
             # h.set_data(x, y)
             # h.set_3d_properties(np.r_[z])
-            
-        # READ STATE
-        z = self.inputs[0]['x'][0:3]
-        n = self.inputs[0]['x'][3:6]
-        
+
+        # read UAV output "bus"
+        input = inports[0]
+        z = input["x"][0:3]
+        n = input["x"][3:6]
+
         # TODO, check input dimensions, 12 or 12+2N, deal with flapping
-        
-        a1s = self.inputs[0]['a1s']
-        b1s = self.inputs[0]['b1s']
-        
+
+        a1s = input["a1s"]
+        b1s = input["b1s"]
+
         quad = self.model
-        
+
         # vehicle dimensons
-        d = quad['d']  # Hub displacement from COG
-        r = quad['r']  # Rotor radius
-        
+        d = quad["d"]  # Hub displacement from COG
+        r = quad["r"]  # Rotor radius
+
         # PREPROCESS ROTATION MATRIX
-        phi, the, psi = n    # Euler angles
+        phi, the, psi = n  # Euler angles
 
         # BBF > Inertial rotation matrix
-        R = np.array([
-                [cos(the) * cos(phi), sin(psi) * sin(the) * cos(phi) - cos(psi) * sin(phi), cos(psi) * sin(the) * cos(phi) + sin(psi) * sin(phi)],   
-                [cos(the) * sin(phi), sin(psi) * sin(the) * sin(phi) + cos(psi) * cos(phi), cos(psi) * sin(the) * sin(phi) - sin(psi)*  cos(phi)],
-                [-sin(the),           sin(psi)*cos(the),                                    cos(psi) * cos(the)]
-            ])
-        
+        R = np.array(
+            [
+                [
+                    cos(the) * cos(phi),
+                    sin(psi) * sin(the) * cos(phi) - cos(psi) * sin(phi),
+                    cos(psi) * sin(the) * cos(phi) + sin(psi) * sin(phi),
+                ],
+                [
+                    cos(the) * sin(phi),
+                    sin(psi) * sin(the) * sin(phi) + cos(psi) * cos(phi),
+                    cos(psi) * sin(the) * sin(phi) - sin(psi) * cos(phi),
+                ],
+                [-sin(the), sin(psi) * cos(the), cos(psi) * cos(the)],
+            ]
+        )
+
         # Manual Construction
-        #Q3 = [cos(psi) -sin(psi) 0;sin(psi) cos(psi) 0;0 0 1];   %Rotation mappings
-        #Q2 = [cos(the) 0 sin(the);0 1 0;-sin(the) 0 cos(the)];
-        #Q1 = [1 0 0;0 cos(phi) -sin(phi);0 sin(phi) cos(phi)];
-        #R = Q3*Q2*Q1;    %Rotation matrix
-        
+        # Q3 = [cos(psi) -sin(psi) 0;sin(psi) cos(psi) 0;0 0 1];   %Rotation mappings
+        # Q2 = [cos(the) 0 sin(the);0 1 0;-sin(the) 0 cos(the)];
+        # Q1 = [1 0 0;0 cos(phi) -sin(phi);0 sin(phi) cos(phi)];
+        # R = Q3*Q2*Q1;    %Rotation matrix
+
         # CALCULATE FLYER TIP POSITONS USING COORDINATE FRAME ROTATION
-        F = np.array([
-                [1,  0,  0],
-                [0, -1,  0],
-                [0,  0, -1]
-            ])
-        
+        F = np.array([[1, 0, 0], [0, -1, 0], [0, 0, -1]])
+
         # Draw flyer rotors
         theta = np.linspace(0, 2 * pi, 20)
         circle = np.zeros((3, 20))
         for j, t in enumerate(theta):
-            circle[:,j] = np.r_[r * sin(t), r * cos(t), 0]
-        
+            circle[:, j] = np.r_[r * sin(t), r * cos(t), 0]
+
         hub = np.zeros((3, self.nrotors))
         tippath = np.zeros((3, 20, self.nrotors))
         for i in range(0, self.nrotors):
-            hub[:,i] = F @ (z + R @ self.D[:,i])  # points in the inertial frame
-            
-            q = self.flapscale   # Flapping angle scaling for output display - makes it easier to see what flapping is occurring
+            hub[:, i] = F @ (z + R @ self.D[:, i])  # points in the inertial frame
+
+            q = (
+                self.flapscale
+            )  # Flapping angle scaling for output display - makes it easier to see what flapping is occurring
             # Rotor -> Plot frame
-            Rr = np.array([
-                    [cos(q * a1s[i]),  sin(q * b1s[i]) * sin(q * a1s[i]),  cos(q * b1s[i]) * sin(q * a1s[i])],
-                    [0,                cos(q * b1s[i]),                   -sin(q*b1s[i])],
-                    [-sin(q * a1s[i]), sin(q * b1s[i]) * cos(q * a1s[i]),  cos(q * b1s[i]) * cos(q * a1s[i])]
-                ])
-            
-            tippath[:,:,i] = F @ R @ Rr @ circle
-            plot3(self.disk[i], hub[0,i] + tippath[0,:,i], hub[1,i] + tippath[1,:,i], hub[2,i] + tippath[2,:,i])
+            Rr = np.array(
+                [
+                    [
+                        cos(q * a1s[i]),
+                        sin(q * b1s[i]) * sin(q * a1s[i]),
+                        cos(q * b1s[i]) * sin(q * a1s[i]),
+                    ],
+                    [0, cos(q * b1s[i]), -sin(q * b1s[i])],
+                    [
+                        -sin(q * a1s[i]),
+                        sin(q * b1s[i]) * cos(q * a1s[i]),
+                        cos(q * b1s[i]) * cos(q * a1s[i]),
+                    ],
+                ]
+            )
+
+            tippath[:, :, i] = F @ R @ Rr @ circle
+            plot3(
+                self.disk[i],
+                hub[0, i] + tippath[0, :, i],
+                hub[1, i] + tippath[1, :, i],
+                hub[2, i] + tippath[2, :, i],
+            )
 
         # Draw flyer
         hub0 = F @ z  # centre of vehicle
         for i in range(0, self.nrotors):
             # line from hub to centre plot3([hub(1,N) hub(1,S)],[hub(2,N) hub(2,S)],[hub(3,N) hub(3,S)],'-b')
-            plot3(self.arm[i], [hub[0,i], hub0[0]], [hub[1,i], hub0[1]], [hub[2,i], hub0[2]])
-            
+            plot3(
+                self.arm[i],
+                [hub[0, i], hub0[0]],
+                [hub[1, i], hub0[1]],
+                [hub[2, i], hub0[2]],
+            )
+
             # plot a circle at the hub itself
-            #plot3([hub(1,i)],[hub(2,i)],[hub(3,i)],'o')
+            # plot3([hub(1,i)],[hub(2,i)],[hub(3,i)],'o')
 
         # plot the vehicle's centroid on the ground plane
         plot3(self.shadow, [z[0], 0], [-z[1], 0], [0, 0])
-        plot3(self.groundmark, z[0], -z[1], 0)
+        plot3(self.groundmark, [z[0]], [-z[1]], [0])
 
-        textstr = f"t={state.t: .2f}\nh={z[2]: .2f}\n={n[0]: .2f}"
+        textstr = f"t={t: .2f}\nh={z[2]: .2f}\n={n[0]: .2f}"
         self.panel.set_text(textstr)
 
-        super().step(state=state)
+        super().step(t, inports)
 
-    def done(self, block=False, **kwargs):
-        if self.bd.options.graphics:
-            plt.show(block=block)
-            
-            super().done()
 
 if __name__ == "__main__":
 
-    from bdsim.blocks.quad_model import quadrotor
+    from quad_model import quadrotor
 
     # m = MultiRotorMixer(model=quadrotor)
     # print(m.M)
     # print(m.Minv)
     # # print(m.Minv @ [0, 0, 0, -40])
     # m.inputs = [0, 0, 0, -40]
     # print(m.output(0.0))
@@ -790,41 +908,38 @@
     # print(m.output(0.0))
 
     # m.inputs = [0, 1, 0, -40]
     # print(m.output(0.0))
 
     m = MultiRotor(model=quadrotor)
 
-
     def show(w):
         print()
-        print(w[0]**2 + w[2]**2 - w[1]**2 - w[3]**2)
+        print(w[0] ** 2 + w[2] ** 2 - w[1] ** 2 - w[3] ** 2)
         print(w)
 
-        m._x = np.r_[0.0, 0, -4, 0, 0, 0,    0, 0, 0, 0, 0, 0]
+        x = np.r_[0.0, 0, -4, 0, 0, 0, 0, 0, 0, 0, 0, 0]
+        inputs = [np.r_[w]]
 
-        m.inputs = [np.r_[w]]
-        dx = m.deriv()
+        dx = m.deriv(0.0, inputs, x)
 
-        print('zdd', dx[8])
-        print('wd', dx[9:12])
+        print("zdd", dx[8])
+        print("wd", dx[9:12])
 
-        m._x = dx
-        x = m.output()[0]['X']
-        print('zd', x[8])
-        print('ypr_dot', x[9:12])
+        x = dx
+        x = m.output(0.0, inputs, x)[0]["X"]
+        print("zd", x[8])
+        print("ypr_dot", x[9:12])
 
     show([800.0, -800, 800, -800])
 
     # tau_y pitch
-    z = np.sqrt((900**2 + 700**2) /2)
+    z = np.sqrt((900**2 + 700**2) / 2)
     show([900.0, -z, 700, -z])
     show([700.0, -z, 900, -z])
 
     # tau_x roll
     show([z, -900, z, -700])
     show([z, -700, z, -900])
 
-
     # tau_z roll
     show([900, -800, 900, -800])
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Cholesky` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Cholesky`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/CholmodSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/CholmodSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Core` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Core`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Eigenvalues` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Eigenvalues`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Geometry` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Geometry`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Householder` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Householder`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/IterativeLinearSolvers` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/IterativeLinearSolvers`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Jacobi` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Jacobi`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/KLUSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/KLUSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/LU` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/LU`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/MetisSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/MetisSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/OrderingMethods` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/OrderingMethods`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/PaStiXSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/PaStiXSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/PardisoSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/PardisoSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/QR` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/QR`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/QtAlignedMalloc` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/QtAlignedMalloc`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SPQRSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SPQRSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SVD` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SVD`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/Sparse` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/Sparse`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseCholesky` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseCholesky`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseCore` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseCore`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseLU` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseLU`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SparseQR` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SparseQR`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/StdDeque` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/StdDeque`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/StdList` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/StdList`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/StdVector` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/StdVector`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/SuperLUSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/SuperLUSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/UmfPackSupport` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/UmfPackSupport`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/LDLT.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/LDLT.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/LLT.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/LLT.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Cholesky/LLT_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Cholesky/LLT_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/CholmodSupport/CholmodSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/CholmodSupport/CholmodSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ArithmeticSequence.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ArithmeticSequence.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Array.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Array.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ArrayBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ArrayBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ArrayWrapper.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ArrayWrapper.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Assign.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Assign.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/AssignEvaluator.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/AssignEvaluator.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Assign_MKL.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Assign_MKL.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/BandMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/BandMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Block.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Block.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/BooleanRedux.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/BooleanRedux.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CommaInitializer.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CommaInitializer.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ConditionEstimator.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ConditionEstimator.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CoreEvaluators.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CoreEvaluators.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CoreIterators.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CoreIterators.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseBinaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseBinaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseNullaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseNullaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseTernaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseTernaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryView.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/CwiseUnaryView.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DenseBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DenseBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DenseCoeffsBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DenseCoeffsBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DenseStorage.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DenseStorage.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Diagonal.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Diagonal.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DiagonalMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DiagonalMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/DiagonalProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/DiagonalProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Dot.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Dot.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/EigenBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/EigenBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ForceAlignedAccess.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ForceAlignedAccess.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Fuzzy.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Fuzzy.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/GeneralProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/GeneralProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/GenericPacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/GenericPacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/GlobalFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/GlobalFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/IO.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/IO.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/IndexedView.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/IndexedView.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Inverse.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Inverse.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Map.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Map.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MapBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MapBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MathFunctionsImpl.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MathFunctionsImpl.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Matrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Matrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/MatrixBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/MatrixBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/NestByValue.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/NestByValue.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/NoAlias.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/NoAlias.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/NumTraits.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/NumTraits.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/PartialReduxEvaluator.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/PartialReduxEvaluator.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/PermutationMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/PermutationMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/PlainObjectBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/PlainObjectBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Product.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Product.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ProductEvaluators.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ProductEvaluators.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Random.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Random.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Redux.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Redux.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Ref.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Ref.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Replicate.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Replicate.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Reshaped.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Reshaped.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/ReturnByValue.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/ReturnByValue.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Reverse.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Reverse.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Select.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Select.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SelfAdjointView.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SelfAdjointView.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SelfCwiseBinaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SelfCwiseBinaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Solve.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Solve.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SolveTriangular.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SolveTriangular.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/SolverBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/SolverBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/StableNorm.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/StableNorm.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/StlIterators.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/StlIterators.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Stride.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Stride.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Swap.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Swap.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Transpose.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Transpose.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Transpositions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Transpositions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/TriangularMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/TriangularMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/VectorBlock.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/VectorBlock.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/VectorwiseOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/VectorwiseOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/Visitor.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/Visitor.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AVX512/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductCommon.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductCommon.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductMMA.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/MatrixProductMMA.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/AltiVec/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/CUDA/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/CUDA/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/BFloat16.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/BFloat16.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/ConjHelper.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/ConjHelper.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctionsFwd.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/GenericPacketMathFunctionsFwd.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/Half.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/Half.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/Settings.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/Settings.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/Default/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/Default/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/GPU/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/GPU/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/HIP/hcc/math_constants.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/HIP/hcc/math_constants.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/MSA/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/MSA/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/GeneralBlockPanelKernel.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/GeneralBlockPanelKernel.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/NEON/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/NEON/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SSE/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SSE/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SVE/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SVE/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/InteropHeaders.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/InteropHeaders.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/SyclMemoryModel.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/SyclMemoryModel.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/TypeCasting.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/SYCL/TypeCasting.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/Complex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/Complex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/MathFunctions.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/MathFunctions.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/PacketMath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/arch/ZVector/PacketMath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/AssignmentFunctors.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/AssignmentFunctors.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/BinaryFunctors.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/BinaryFunctors.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/NullaryFunctors.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/NullaryFunctors.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/StlFunctors.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/StlFunctors.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/TernaryFunctors.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/TernaryFunctors.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/functors/UnaryFunctors.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/functors/UnaryFunctors.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralBlockPanelKernel.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralBlockPanelKernel.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrixTriangular_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixMatrix_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/GeneralMatrixVector_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/Parallelizer.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/Parallelizer.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixMatrix_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointMatrixVector_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointRank2Update.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/SelfadjointRank2Update.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixMatrix_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularMatrixVector_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix_BLAS.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverMatrix_BLAS.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/products/TriangularSolverVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/BlasUtil.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/BlasUtil.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ConfigureVectorization.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ConfigureVectorization.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Constants.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Constants.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/DisableStupidWarnings.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/DisableStupidWarnings.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ForwardDeclarations.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ForwardDeclarations.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/IndexedViewHelper.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/IndexedViewHelper.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/IntegralConstant.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/IntegralConstant.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/MKL_support.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/MKL_support.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Macros.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Macros.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Memory.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Memory.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/Meta.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/Meta.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ReenableStupidWarnings.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ReenableStupidWarnings.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/ReshapedHelper.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/ReshapedHelper.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/StaticAssert.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/StaticAssert.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/SymbolicIndex.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/SymbolicIndex.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Core/util/XprHelper.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Core/util/XprHelper.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexEigenSolver.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexEigenSolver.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/ComplexSchur_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/EigenSolver.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/EigenSolver.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedEigenSolver.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedEigenSolver.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedSelfAdjointEigenSolver.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/GeneralizedSelfAdjointEigenSolver.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/HessenbergDecomposition.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/HessenbergDecomposition.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/MatrixBaseEigenvalues.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/MatrixBaseEigenvalues.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/RealQZ.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/RealQZ.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/RealSchur_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/SelfAdjointEigenSolver_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Eigenvalues/Tridiagonalization.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Eigenvalues/Tridiagonalization.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/AlignedBox.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/AlignedBox.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/AngleAxis.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/AngleAxis.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/EulerAngles.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/EulerAngles.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Homogeneous.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Homogeneous.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Hyperplane.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Hyperplane.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/OrthoMethods.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/OrthoMethods.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/ParametrizedLine.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/ParametrizedLine.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Quaternion.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Quaternion.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Rotation2D.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Rotation2D.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/RotationBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/RotationBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Scaling.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Scaling.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Transform.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Transform.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Translation.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Translation.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/Umeyama.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/Umeyama.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Geometry/arch/Geometry_SIMD.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Geometry/arch/Geometry_SIMD.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/BlockHouseholder.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/BlockHouseholder.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/Householder.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/Householder.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Householder/HouseholderSequence.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Householder/HouseholderSequence.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BasicPreconditioners.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BasicPreconditioners.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BiCGSTAB.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/BiCGSTAB.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/ConjugateGradient.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/ConjugateGradient.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteCholesky.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteCholesky.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteLUT.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IncompleteLUT.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/LeastSquareConjugateGradient.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/LeastSquareConjugateGradient.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/SolveWithGuess.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/IterativeLinearSolvers/SolveWithGuess.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/Jacobi/Jacobi.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/Jacobi/Jacobi.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/KLUSupport/KLUSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/KLUSupport/KLUSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/Determinant.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/Determinant.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/FullPivLU.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/FullPivLU.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/InverseImpl.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/InverseImpl.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/PartialPivLU.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/PartialPivLU.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/PartialPivLU_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/PartialPivLU_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/LU/arch/InverseSize4.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/LU/arch/InverseSize4.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/MetisSupport/MetisSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/MetisSupport/MetisSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/Amd.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/Amd.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/Eigen_Colamd.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/Eigen_Colamd.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/OrderingMethods/Ordering.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/OrderingMethods/Ordering.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/PaStiXSupport/PaStiXSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/PaStiXSupport/PaStiXSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/PardisoSupport/PardisoSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/PardisoSupport/PardisoSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/ColPivHouseholderQR_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/CompleteOrthogonalDecomposition.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/CompleteOrthogonalDecomposition.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/FullPivHouseholderQR.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/FullPivHouseholderQR.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/HouseholderQR.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/HouseholderQR.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/QR/HouseholderQR_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/QR/HouseholderQR_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SPQRSupport/SuiteSparseQRSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SPQRSupport/SuiteSparseQRSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/BDCSVD.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/BDCSVD.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD_LAPACKE.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/JacobiSVD_LAPACKE.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/SVDBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/SVDBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SVD/UpperBidiagonalization.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SVD/UpperBidiagonalization.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky_impl.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCholesky/SimplicialCholesky_impl.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/AmbiVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/AmbiVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/CompressedStorage.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/CompressedStorage.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/ConservativeSparseSparseProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/ConservativeSparseSparseProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/MappedSparseMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/MappedSparseMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseAssign.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseAssign.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseBlock.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseBlock.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseColEtree.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseColEtree.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseCompressedBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseCompressedBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseBinaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseBinaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseUnaryOp.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseCwiseUnaryOp.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseDenseProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseDenseProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseDiagonalProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseDiagonalProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseDot.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseDot.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseFuzzy.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseFuzzy.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseMap.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseMap.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrixBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseMatrixBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparsePermutation.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparsePermutation.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseProduct.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseProduct.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseRedux.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseRedux.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseRef.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseRef.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseSelfAdjointView.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseSelfAdjointView.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseSolverBase.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseSolverBase.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseSparseProductWithPruning.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseSparseProductWithPruning.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseTranspose.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseTranspose.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseTriangularView.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseTriangularView.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseUtil.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseUtil.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/SparseView.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/SparseView.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseCore/TriangularSolver.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseCore/TriangularSolver.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLUImpl.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLUImpl.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Memory.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Memory.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Structs.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Structs.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_SupernodalMatrix.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_SupernodalMatrix.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Utils.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_Utils.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_bmod.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_bmod.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_dfs.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_column_dfs.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_copy_to_ucol.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_copy_to_ucol.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_gemm_kernel.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_gemm_kernel.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_heap_relax_snode.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_heap_relax_snode.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_kernel_bmod.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_kernel_bmod.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_bmod.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_bmod.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_dfs.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_panel_dfs.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pivotL.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pivotL.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pruneL.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_pruneL.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_relax_snode.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseLU/SparseLU_relax_snode.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SparseQR/SparseQR.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SparseQR/SparseQR.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/StdDeque.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/StdDeque.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/StdList.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/StdList.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/StdVector.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/StdVector.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/StlSupport/details.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/StlSupport/details.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/SuperLUSupport/SuperLUSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/SuperLUSupport/SuperLUSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/UmfPackSupport/UmfPackSupport.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/UmfPackSupport/UmfPackSupport.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/Image.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/Image.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/Kernel.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/Kernel.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/RealSvd2x2.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/RealSvd2x2.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/blas.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/blas.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/lapack.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/lapack.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/misc/lapacke.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/misc/lapacke.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseBinaryOps.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseBinaryOps.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseUnaryOps.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/ArrayCwiseUnaryOps.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/BlockMethods.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/BlockMethods.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseBinaryOps.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseBinaryOps.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseUnaryOps.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/CommonCwiseUnaryOps.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/IndexedViewMethods.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/IndexedViewMethods.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseBinaryOps.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseBinaryOps.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseUnaryOps.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/MatrixCwiseUnaryOps.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/Eigen/src/plugins/ReshapedMethods.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/Eigen/src/plugins/ReshapedMethods.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/fknm.cpp` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/fknm.cpp`

 * *Files 6% similar despite different names*

```diff
@@ -14,36 +14,41 @@
 #include "structs.h"
 
 #include <Python.h>
 #include <numpy/arrayobject.h>
 #include <math.h>
 #include <Eigen/Dense>
 #include <iostream>
+#include <string.h>
 
 static PyMethodDef fknmMethods[] = {
-    {"IK_GN",
-     (PyCFunction)IK_GN,
+    {"Angle_Axis",
+     (PyCFunction)Angle_Axis,
      METH_VARARGS,
      "Link"},
-    {"IK_NR",
-     (PyCFunction)IK_NR,
+    {"IK_GN_c",
+     (PyCFunction)IK_GN_c,
      METH_VARARGS,
      "Link"},
-    {"IK_LM_Chan",
-     (PyCFunction)IK_LM_Chan,
+    {"IK_NR_c",
+     (PyCFunction)IK_NR_c,
      METH_VARARGS,
      "Link"},
-    {"IK_LM_Wampler",
-     (PyCFunction)IK_LM_Wampler,
-     METH_VARARGS,
-     "Link"},
-    {"IK_LM_Sugihara",
-     (PyCFunction)IK_LM_Sugihara,
+    {"IK_LM_c",
+     (PyCFunction)IK_LM_c,
      METH_VARARGS,
      "Link"},
+    // {"IK_LM_Wampler_c",
+    //  (PyCFunction)IK_LM_Wampler_c,
+    //  METH_VARARGS,
+    //  "Link"},
+    // {"IK_LM_Sugihara_c",
+    //  (PyCFunction)IK_LM_Sugihara_c,
+    //  METH_VARARGS,
+    //  "Link"},
     {"Robot_link_T",
      (PyCFunction)Robot_link_T,
      METH_VARARGS,
      "Link"},
     {"ETS_hessian0",
      (PyCFunction)ETS_hessian0,
      METH_VARARGS,
@@ -100,130 +105,67 @@
     import_array();
     return PyModule_Create(&fknmmodule);
 }
 
 extern "C"
 {
 
-    static PyObject *IK_GN(PyObject *self, PyObject *args)
+    static PyObject *Angle_Axis(PyObject *self, PyObject *args)
     {
-        ETS *ets;
-        npy_float64 *np_Tep, *np_ret, *np_q0, *np_we;
-        PyArrayObject *py_np_Tep;
-        PyObject *py_ets, *py_ret, *py_Tep, *py_q0, *py_np_q0, *py_we, *py_np_we;
-        PyObject *py_tup, *py_it, *py_search, *py_solution, *py_E;
-        npy_intp dim[1] = {1};
-        int ilimit, slimit, q0_used = 0, we_used = 0, reject_jl, use_pinv;
-        double tol, E, pinv_damping;
-
-        int it = 0, search = 1, solution = 0;
+        npy_float64 *np_Te, *np_Tep, *np_ret;
+        PyObject *py_Te, *py_Tep;
+        PyArrayObject *py_np_Te, *py_np_Tep;
 
         if (!PyArg_ParseTuple(
-                args, "OOOiidiOid",
-                &py_ets,
-                &py_Tep,
-                &py_q0,
-                &ilimit,
-                &slimit,
-                &tol,
-                &reject_jl,
-                &py_we,
-                &use_pinv,
-                &pinv_damping))
+                args, "OO",
+                &py_Te,
+                &py_Tep))
             return NULL;
 
-        if (!_check_array_type(py_Tep))
-            return NULL;
+        // Inputs can be:
+        // Te, Tep can be SE3s or 4x4 numpy array
 
-        // Extract the ETS object from the python object
-        if (!(ets = (ETS *)PyCapsule_GetPointer(py_ets, "ETS")))
+        // Make sure Te, Tep is number array
+        // Cast to numpy array
+        // Get data out
+        if (!_check_array_type(py_Te))
             return NULL;
+        py_np_Te = (PyArrayObject *)PyArray_FROMANY(py_Te, NPY_DOUBLE, 1, 2, NPY_ARRAY_DEFAULT);
+        np_Te = (npy_float64 *)PyArray_DATA(py_np_Te);
 
-        // Assign empty q0 and we
-        MapVectorX q0(NULL, 0);
-        MapVectorX we(NULL, 0);
-
-        // Check if q0 is None
-        if (py_q0 != Py_None)
-        {
-            // Make sure q is number array
-            // Cast to numpy array
-            // Get data out
-            if (!_check_array_type(py_q0))
-                return NULL;
-            q0_used = 1;
-            py_np_q0 = (PyObject *)PyArray_FROMANY(py_q0, NPY_DOUBLE, 1, 2, NPY_ARRAY_F_CONTIGUOUS);
-            np_q0 = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_np_q0);
-            // MapVectorX q0(np_q0, ets->n);
-            new (&q0) MapVectorX(np_q0, ets->n);
-        }
-
-        // Check if we is None
-        if (py_we != Py_None)
-        {
-            // Make sure we is number array
-            // Cast to numpy array
-            // Get data out
-            if (!_check_array_type(py_we))
-                return NULL;
-            we_used = 1;
-            py_np_we = (PyObject *)PyArray_FROMANY(py_we, NPY_DOUBLE, 1, 2, NPY_ARRAY_F_CONTIGUOUS);
-            np_we = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_np_we);
-            new (&we) MapVectorX(np_we, 6);
-        }
-
-        // Set the dimension of the returned array to match the number of joints
-        dim[0] = ets->n;
-
+        if (!_check_array_type(py_Tep))
+            return NULL;
         py_np_Tep = (PyArrayObject *)PyArray_FROMANY(py_Tep, NPY_DOUBLE, 1, 2, NPY_ARRAY_DEFAULT);
         np_Tep = (npy_float64 *)PyArray_DATA(py_np_Tep);
 
+        // Make our empty error vector
+        npy_intp dims[1] = {6};
+        PyObject *py_ret = PyArray_EMPTY(1, dims, NPY_DOUBLE, 0);
+        np_ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
+        MapVectorX ret(np_ret, 6);
+
+        // Get eigen matrices
         // Tep in row major from Python
         MapMatrix4dr row_Tep(np_Tep);
+        MapMatrix4dr row_Te(np_Te);
 
         // Convert to col major here
         Matrix4dc Tep = row_Tep;
+        Matrix4dc Te = row_Te;
 
-        py_ret = PyArray_EMPTY(1, dim, NPY_DOUBLE, 0);
-        np_ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
-        MapVectorX ret(np_ret, ets->n);
-
-        _IK_GN(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, we, use_pinv, pinv_damping);
-
-        // Free the memory
-        Py_DECREF(py_np_Tep);
+        // Get map matrix
+        MapMatrix4dc map_Te(&Te(0));
 
-        if (q0_used)
-        {
-            Py_DECREF(py_np_q0);
-        }
-
-        if (we_used)
-        {
-            Py_DECREF(py_np_we);
-        }
-
-        // Build the return tuple
-        py_it = Py_BuildValue("i", it);
-        py_search = Py_BuildValue("i", search);
-        py_solution = Py_BuildValue("i", solution);
-        py_E = Py_BuildValue("d", E);
-
-        py_tup = PyTuple_Pack(5, py_ret, py_solution, py_it, py_search, py_E);
-
-        Py_DECREF(py_it);
-        Py_DECREF(py_search);
-        Py_DECREF(py_solution);
-        Py_DECREF(py_E);
-        Py_DECREF(py_ret);
+        // Do the job
+        _angle_axis(map_Te, Tep, ret);
 
-        return py_tup;
+        return py_ret;
     }
 
-    static PyObject *IK_NR(PyObject *self, PyObject *args)
+    static PyObject *IK_GN_c(PyObject *self, PyObject *args)
     {
         ETS *ets;
         npy_float64 *np_Tep, *np_ret, *np_q0, *np_we;
         PyArrayObject *py_np_Tep;
         PyObject *py_ets, *py_ret, *py_Tep, *py_q0, *py_np_q0, *py_we, *py_np_we;
         PyObject *py_tup, *py_it, *py_search, *py_solution, *py_E;
         npy_intp dim[1] = {1};
@@ -298,15 +240,15 @@
         // Convert to col major here
         Matrix4dc Tep = row_Tep;
 
         py_ret = PyArray_EMPTY(1, dim, NPY_DOUBLE, 0);
         np_ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
         MapVectorX ret(np_ret, ets->n);
 
-        _IK_NR(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, we, use_pinv, pinv_damping);
+        _IK_GN(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, we, use_pinv, pinv_damping);
 
         // Free the memory
         Py_DECREF(py_np_Tep);
 
         if (q0_used)
         {
             Py_DECREF(py_np_q0);
@@ -330,38 +272,39 @@
         Py_DECREF(py_solution);
         Py_DECREF(py_E);
         Py_DECREF(py_ret);
 
         return py_tup;
     }
 
-    static PyObject *IK_LM_Chan(PyObject *self, PyObject *args)
+    static PyObject *IK_NR_c(PyObject *self, PyObject *args)
     {
         ETS *ets;
         npy_float64 *np_Tep, *np_ret, *np_q0, *np_we;
         PyArrayObject *py_np_Tep;
         PyObject *py_ets, *py_ret, *py_Tep, *py_q0, *py_np_q0, *py_we, *py_np_we;
         PyObject *py_tup, *py_it, *py_search, *py_solution, *py_E;
         npy_intp dim[1] = {1};
-        int ilimit, slimit, q0_used = 0, we_used = 0, reject_jl;
-        double tol, E, lambda;
+        int ilimit, slimit, q0_used = 0, we_used = 0, reject_jl, use_pinv;
+        double tol, E, pinv_damping;
 
         int it = 0, search = 1, solution = 0;
 
         if (!PyArg_ParseTuple(
-                args, "OOOiidiOd",
+                args, "OOOiidiOid",
                 &py_ets,
                 &py_Tep,
                 &py_q0,
                 &ilimit,
                 &slimit,
                 &tol,
                 &reject_jl,
                 &py_we,
-                &lambda))
+                &use_pinv,
+                &pinv_damping))
             return NULL;
 
         if (!_check_array_type(py_Tep))
             return NULL;
 
         // Extract the ETS object from the python object
         if (!(ets = (ETS *)PyCapsule_GetPointer(py_ets, "ETS")))
@@ -412,18 +355,15 @@
         // Convert to col major here
         Matrix4dc Tep = row_Tep;
 
         py_ret = PyArray_EMPTY(1, dim, NPY_DOUBLE, 0);
         np_ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
         MapVectorX ret(np_ret, ets->n);
 
-        // std::cout << Tep << std::endl;
-        // std::cout << ret << std::endl;
-
-        _IK_LM_Chan(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, lambda, we);
+        _IK_NR(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, we, use_pinv, pinv_damping);
 
         // Free the memory
         Py_DECREF(py_np_Tep);
 
         if (q0_used)
         {
             Py_DECREF(py_np_q0);
@@ -447,38 +387,40 @@
         Py_DECREF(py_solution);
         Py_DECREF(py_E);
         Py_DECREF(py_ret);
 
         return py_tup;
     }
 
-    static PyObject *IK_LM_Wampler(PyObject *self, PyObject *args)
+    static PyObject *IK_LM_c(PyObject *self, PyObject *args)
     {
         ETS *ets;
         npy_float64 *np_Tep, *np_ret, *np_q0, *np_we;
         PyArrayObject *py_np_Tep;
         PyObject *py_ets, *py_ret, *py_Tep, *py_q0, *py_np_q0, *py_we, *py_np_we;
         PyObject *py_tup, *py_it, *py_search, *py_solution, *py_E;
         npy_intp dim[1] = {1};
         int ilimit, slimit, q0_used = 0, we_used = 0, reject_jl;
         double tol, E, lambda;
+        const char *method;
 
         int it = 0, search = 1, solution = 0;
 
         if (!PyArg_ParseTuple(
-                args, "OOOiidiOd",
+                args, "OOOiidiOds",
                 &py_ets,
                 &py_Tep,
                 &py_q0,
                 &ilimit,
                 &slimit,
                 &tol,
                 &reject_jl,
                 &py_we,
-                &lambda))
+                &lambda,
+                &method))
             return NULL;
 
         if (!_check_array_type(py_Tep))
             return NULL;
 
         // Extract the ETS object from the python object
         if (!(ets = (ETS *)PyCapsule_GetPointer(py_ets, "ETS")))
@@ -532,133 +474,30 @@
         py_ret = PyArray_EMPTY(1, dim, NPY_DOUBLE, 0);
         np_ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
         MapVectorX ret(np_ret, ets->n);
 
         // std::cout << Tep << std::endl;
         // std::cout << ret << std::endl;
 
-        _IK_LM_Wampler(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, lambda, we);
-
-        // Free the memory
-        Py_DECREF(py_np_Tep);
-
-        if (q0_used)
+        if (method[0] == 's')
         {
-            Py_DECREF(py_np_q0);
+            // std::cout << "sugi" << std::endl;
+            _IK_LM_Sugihara(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, lambda, we);
         }
-
-        if (we_used)
-        {
-            Py_DECREF(py_np_we);
-        }
-
-        // Build the return tuple
-        py_it = Py_BuildValue("i", it);
-        py_search = Py_BuildValue("i", search);
-        py_solution = Py_BuildValue("i", solution);
-        py_E = Py_BuildValue("d", E);
-
-        py_tup = PyTuple_Pack(5, py_ret, py_solution, py_it, py_search, py_E);
-
-        Py_DECREF(py_it);
-        Py_DECREF(py_search);
-        Py_DECREF(py_solution);
-        Py_DECREF(py_E);
-        Py_DECREF(py_ret);
-
-        return py_tup;
-    }
-
-    static PyObject *IK_LM_Sugihara(PyObject *self, PyObject *args)
-    {
-        ETS *ets;
-        npy_float64 *np_Tep, *np_ret, *np_q0, *np_we;
-        PyArrayObject *py_np_Tep;
-        PyObject *py_ets, *py_ret, *py_Tep, *py_q0, *py_np_q0, *py_we, *py_np_we;
-        PyObject *py_tup, *py_it, *py_search, *py_solution, *py_E;
-        npy_intp dim[1] = {1};
-        int ilimit, slimit, q0_used = 0, we_used = 0, reject_jl;
-        double tol, E, lambda;
-
-        int it = 0, search = 1, solution = 0;
-
-        if (!PyArg_ParseTuple(
-                args, "OOOiidiOd",
-                &py_ets,
-                &py_Tep,
-                &py_q0,
-                &ilimit,
-                &slimit,
-                &tol,
-                &reject_jl,
-                &py_we,
-                &lambda))
-            return NULL;
-
-        if (!_check_array_type(py_Tep))
-            return NULL;
-
-        // Extract the ETS object from the python object
-        if (!(ets = (ETS *)PyCapsule_GetPointer(py_ets, "ETS")))
-            return NULL;
-
-        // Assign empty q0 and we
-        MapVectorX q0(NULL, 0);
-        MapVectorX we(NULL, 0);
-
-        // Check if q0 is None
-        if (py_q0 != Py_None)
+        else if (method[0] == 'w')
         {
-            // Make sure q is number array
-            // Cast to numpy array
-            // Get data out
-            if (!_check_array_type(py_q0))
-                return NULL;
-            q0_used = 1;
-            py_np_q0 = (PyObject *)PyArray_FROMANY(py_q0, NPY_DOUBLE, 1, 2, NPY_ARRAY_F_CONTIGUOUS);
-            np_q0 = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_np_q0);
-            // MapVectorX q0(np_q0, ets->n);
-            new (&q0) MapVectorX(np_q0, ets->n);
+            // std::cout << "wampl" << std::endl;
+            _IK_LM_Wampler(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, lambda, we);
         }
-
-        // Check if we is None
-        if (py_we != Py_None)
+        else
         {
-            // Make sure we is number array
-            // Cast to numpy array
-            // Get data out
-            if (!_check_array_type(py_we))
-                return NULL;
-            we_used = 1;
-            py_np_we = (PyObject *)PyArray_FROMANY(py_we, NPY_DOUBLE, 1, 2, NPY_ARRAY_F_CONTIGUOUS);
-            np_we = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_np_we);
-            new (&we) MapVectorX(np_we, 6);
+            // std::cout << "chan" << std::endl;
+            _IK_LM_Chan(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, lambda, we);
         }
 
-        // Set the dimension of the returned array to match the number of joints
-        dim[0] = ets->n;
-
-        py_np_Tep = (PyArrayObject *)PyArray_FROMANY(py_Tep, NPY_DOUBLE, 1, 2, NPY_ARRAY_DEFAULT);
-        np_Tep = (npy_float64 *)PyArray_DATA(py_np_Tep);
-
-        // Tep in row major from Python
-        MapMatrix4dr row_Tep(np_Tep);
-
-        // Convert to col major here
-        Matrix4dc Tep = row_Tep;
-
-        py_ret = PyArray_EMPTY(1, dim, NPY_DOUBLE, 0);
-        np_ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
-        MapVectorX ret(np_ret, ets->n);
-
-        // std::cout << Tep << std::endl;
-        // std::cout << ret << std::endl;
-
-        _IK_LM_Sugihara(ets, Tep, q0, ilimit, slimit, tol, reject_jl, ret, &it, &search, &solution, &E, lambda, we);
-
         // Free the memory
         Py_DECREF(py_np_Tep);
 
         if (q0_used)
         {
             Py_DECREF(py_np_q0);
         }
@@ -1112,17 +951,19 @@
         // base and tool can be SE3s or 4x4 numpy array
 
         // Make sure q is number array
         // Cast to numpy array
         // Get data out
         if (!_check_array_type(py_q))
             return NULL;
-        py_np_q = (PyObject *)PyArray_FROMANY(py_q, NPY_DOUBLE, 1, 2, NPY_ARRAY_F_CONTIGUOUS);
+        py_np_q = (PyObject *)PyArray_FROMANY(py_q, NPY_DOUBLE, 1, 2, NPY_ARRAY_C_CONTIGUOUS);
         q = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_np_q);
 
+        // std::cout << "q: " << q[0] << ", " << q[1] << ", " << q[2] << ", " << q[3] << ", " << q[4] << ", " << q[5] << std::endl;
+
         // Check the dimesnions of q
         q_nd = PyArray_NDIM((PyArrayObject *)py_np_q);
         q_shape = PyArray_SHAPE((PyArrayObject *)py_np_q);
 
         // Work out how long the trajectory is
         if (q_nd > 1)
         {
@@ -1149,16 +990,23 @@
         // Allocate return array
         if (trajn == 1)
         {
             py_ret = PyArray_EMPTY(2, dim2, NPY_DOUBLE, 1);
         }
         else
         {
+            // if using a trajectory, make a duplicate of ret as we will need to
+            // extreme reshape it due to Fortran ordering
+            // Fortran ordering of 3D array wants (4, 4, n) while numpy looping
+            // typically likes to have (n, 4, 4)
+
+            // therefore we make the returned python array (n, 4, 4) and row-major
+            // and later on we transpose each (4, 4) component
             dim3[0] = trajn;
-            py_ret = PyArray_EMPTY(3, dim3, NPY_DOUBLE, 1);
+            py_ret = PyArray_EMPTY(3, dim3, NPY_DOUBLE, 0);
         }
 
         // Get numpy reference to return array
         ret = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_ret);
 
         // Check if base is None
         // Make sure base is number array
@@ -1185,19 +1033,26 @@
             py_np_tool = (PyObject *)PyArray_FROMANY(py_tool, NPY_DOUBLE, 1, 2, NPY_ARRAY_F_CONTIGUOUS);
             tool = (npy_float64 *)PyArray_DATA((PyArrayObject *)py_np_tool);
         }
 
         // Do the actual job
         for (int i = 0; i < trajn; i++)
         {
-            // Get pointers to the new section of return array and q array
             retp = ret + (4 * 4 * i);
+
             MapMatrix4dc e_retp(retp);
             qp = q + (n * i);
             _ETS_fkine(ets, qp, base, tool, e_retp);
+
+            // Transpose if we have a trajectory
+            // as the returned trajectory is row-major
+            if (trajn > 1)
+            {
+                e_retp.transposeInPlace();
+            }
         }
 
         // Free memory
         Py_DECREF(py_np_q);
 
         if (tool_used)
             Py_DECREF(py_np_tool);
@@ -1265,16 +1120,17 @@
         PyObject *ret, *py_et;
         PyArrayObject *py_T, *py_qlim;
         npy_float64 *np_qlim;
         int isjoint, isflip, jindex;
 
         et = (ET *)PyMem_RawMalloc(sizeof(ET));
 
-        if (!PyArg_ParseTuple(args, "OiiiiO!O!",
+        if (!PyArg_ParseTuple(args, "OiiiiiO!O!",
                               &py_et,
+                              &et->isstaticsym,
                               &isjoint,
                               &isflip,
                               &jindex,
                               &jointtype,
                               &PyArray_Type, &py_T,
                               &PyArray_Type, &py_qlim))
             return NULL;
@@ -1329,15 +1185,16 @@
         int jointtype;
         PyObject *ret;
         PyArrayObject *py_T, *py_qlim;
         npy_float64 *np_qlim;
 
         et = (ET *)PyMem_RawMalloc(sizeof(ET));
 
-        if (!PyArg_ParseTuple(args, "iiiiO!O!",
+        if (!PyArg_ParseTuple(args, "iiiiiO!O!",
+                              &et->isstaticsym,
                               &et->isjoint,
                               &et->isflip,
                               &et->jindex,
                               &jointtype,
                               &PyArray_Type, &py_T,
                               &PyArray_Type, &py_qlim))
             return NULL;
@@ -1393,14 +1250,20 @@
 
         if (!PyArg_ParseTuple(args, "OO", &py_et, &py_eta))
             return NULL;
 
         if (!(et = (ET *)PyCapsule_GetPointer(py_et, "ET")))
             return NULL;
 
+        if (et->isstaticsym)
+        {
+            PyErr_SetString(PyExc_TypeError, "Symbolic value");
+            return NULL;
+        }
+
         if (py_eta != Py_None)
         {
             if (PyFloat_Check(py_eta))
             {
                 eta = (double)PyFloat_AsDouble(py_eta);
             }
             else
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/fknm.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/fknm.h`

 * *Files 4% similar despite different names*

```diff
@@ -12,19 +12,22 @@
 
 #ifdef __cplusplus
 extern "C"
 {
 #endif /* __cplusplus */
 
     // forward defines
-    static PyObject *IK_GN(PyObject *self, PyObject *args);
-    static PyObject *IK_NR(PyObject *self, PyObject *args);
-    static PyObject *IK_LM_Chan(PyObject *self, PyObject *args);
-    static PyObject *IK_LM_Wampler(PyObject *self, PyObject *args);
-    static PyObject *IK_LM_Sugihara(PyObject *self, PyObject *args);
+    static PyObject *Angle_Axis(PyObject *self, PyObject *args);
+
+    static PyObject *IK_GN_c(PyObject *self, PyObject *args);
+    static PyObject *IK_NR_c(PyObject *self, PyObject *args);
+    static PyObject *IK_LM_c(PyObject *self, PyObject *args);
+    // static PyObject *IK_LM_Chan_c(PyObject *self, PyObject *args);
+    // static PyObject *IK_LM_Wampler_c(PyObject *self, PyObject *args);
+    // static PyObject *IK_LM_Sugihara_c(PyObject *self, PyObject *args);
 
     static PyObject *Robot_link_T(PyObject *self, PyObject *args);
 
     static PyObject *ETS_hessian0(PyObject *self, PyObject *args);
     static PyObject *ETS_hessiane(PyObject *self, PyObject *args);
     static PyObject *ETS_jacob0(PyObject *self, PyObject *args);
     static PyObject *ETS_jacobe(PyObject *self, PyObject *args);
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/frne.c` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/frne.c`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/frne.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/frne.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/ik.cpp` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/ik.cpp`

 * *Files 2% similar despite different names*

```diff
@@ -90,15 +90,15 @@
                 if (*E < tol)
                 {
                     // We have arrived
 
                     // wrap q to +- pi
                     for (int i = 0; i < ets->n; i++)
                     {
-                        q(i) = std::fmod(q(i), PI);
+                        q(i) = std::fmod(q(i) + PI, PI_x2) - PI;
                     }
 
                     // Check for joint limit violation
                     if (reject_jl)
                     {
                         *solution = _check_lim(ets, q);
                     }
@@ -224,15 +224,15 @@
                 if (*E < tol)
                 {
                     // We have arrived
 
                     // wrap q to +- pi
                     for (int i = 0; i < ets->n; i++)
                     {
-                        q(i) = std::fmod(q(i), PI);
+                        q(i) = std::fmod(q(i) + PI, PI_x2) - PI;
                     }
 
                     // Check for joint limit violation
                     if (reject_jl)
                     {
                         *solution = _check_lim(ets, q);
                     }
@@ -289,14 +289,17 @@
         ETS *ets, Matrix4dc Tep,
         MapVectorX q0, int ilimit, int slimit, double tol, int reject_jl,
         MapVectorX q, int *it, int *search, int *solution, double *E,
         double lambda, MapVectorX we)
     {
         int iter = 1;
 
+        // std::cout << Tep << "\n";
+        // std::cout << std::endl;
+
         double *np_Te = (double *)PyMem_RawCalloc(16, sizeof(double));
         MapMatrix4dc Te(np_Te);
 
         double *np_J = (double *)PyMem_RawCalloc(6 * ets->n, sizeof(double));
         Eigen::Map<Eigen::MatrixXd> J(np_J, 6, ets->n);
 
         double *np_e = (double *)PyMem_RawCalloc(6, sizeof(double));
@@ -347,15 +350,15 @@
                 if (*E < tol)
                 {
                     // We have arrived
 
                     // wrap q to +- pi
                     for (int i = 0; i < ets->n; i++)
                     {
-                        q(i) = std::fmod(q(i), PI);
+                        q(i) = std::fmod(q(i) + PI, PI_x2) - PI;
                     }
 
                     // Check for joint limit violation
                     if (reject_jl)
                     {
                         *solution = _check_lim(ets, q);
                     }
@@ -461,15 +464,15 @@
                 if (*E < tol)
                 {
                     // We have arrived
 
                     // wrap q to +- pi
                     for (int i = 0; i < ets->n; i++)
                     {
-                        q(i) = std::fmod(q(i), PI);
+                        q(i) = std::fmod(q(i) + PI, PI_x2) - PI;
                     }
 
                     // Check for joint limit violation
                     if (reject_jl)
                     {
                         *solution = _check_lim(ets, q);
                     }
@@ -573,15 +576,15 @@
                 if (*E < tol)
                 {
                     // We have arrived
 
                     // wrap q to +- pi
                     for (int i = 0; i < ets->n; i++)
                     {
-                        q(i) = std::fmod(q(i), PI);
+                        q(i) = std::fmod(q(i) + PI, PI_x2) - PI;
                     }
 
                     // Check for joint limit violation
                     if (reject_jl)
                     {
                         *solution = _check_lim(ets, q);
                     }
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/ik.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/ik.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/linalg.cpp` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/linalg.cpp`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/linalg.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/linalg.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/methods.cpp` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/methods.cpp`

 * *Files 14% similar despite different names*

```diff
@@ -114,57 +114,89 @@
         double T[16];
         MapMatrix4dc eT(T);
         Matrix4dc U = Eigen::Matrix4d::Identity();
         Matrix4dc invU;
         Matrix4dc temp;
         Matrix4dc ret;
         int j = ets->n - 1;
+        double sign = 1.0;
 
         if (tool != NULL)
         {
             Matrix4dc e_tool(tool);
             temp = e_tool * U;
             U = temp;
         }
 
         for (int i = ets->m - 1; i >= 0; i--)
         {
             et = ets->ets[i];
 
             if (et->isjoint)
             {
+
                 if (et->axis == 0)
                 {
                     tJ(Eigen::seq(0, 2), j) = U(2, Eigen::seq(0, 2)) * U(1, 3) - U(1, Eigen::seq(0, 2)) * U(2, 3);
                     tJ(Eigen::seq(3, 5), j) = U(0, Eigen::seq(0, 2));
+
+                    if (et->isflip)
+                    {
+                        tJ(Eigen::seq(0, 5), j) = -tJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 1)
                 {
                     tJ(Eigen::seq(0, 2), j) = U(0, Eigen::seq(0, 2)) * U(2, 3) - U(2, Eigen::seq(0, 2)) * U(0, 3);
                     tJ(Eigen::seq(3, 5), j) = U(1, Eigen::seq(0, 2));
+
+                    if (et->isflip)
+                    {
+                        tJ(Eigen::seq(0, 5), j) = -tJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 2)
                 {
                     tJ(Eigen::seq(0, 2), j) = U(1, Eigen::seq(0, 2)) * U(0, 3) - U(0, Eigen::seq(0, 2)) * U(1, 3);
                     tJ(Eigen::seq(3, 5), j) = U(2, Eigen::seq(0, 2));
+
+                    if (et->isflip)
+                    {
+                        tJ(Eigen::seq(0, 5), j) = -tJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 3)
                 {
                     tJ(Eigen::seq(0, 2), j) = U(0, Eigen::seq(0, 2));
                     tJ(Eigen::seq(3, 5), j) = Eigen::Vector3d::Zero();
+
+                    if (et->isflip)
+                    {
+                        tJ(Eigen::seq(0, 2), j) = -tJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 4)
                 {
                     tJ(Eigen::seq(0, 2), j) = U(1, Eigen::seq(0, 2));
                     tJ(Eigen::seq(3, 5), j) = Eigen::Vector3d::Zero();
+
+                    if (et->isflip)
+                    {
+                        tJ(Eigen::seq(0, 2), j) = -tJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 5)
                 {
                     tJ(Eigen::seq(0, 2), j) = U(2, Eigen::seq(0, 2));
                     tJ(Eigen::seq(3, 5), j) = Eigen::Vector3d::Zero();
+
+                    if (et->isflip)
+                    {
+                        tJ(Eigen::seq(0, 2), j) = -tJ(Eigen::seq(0, 5), j);
+                    }
                 }
 
                 _ET_T(et, &ret(0), q[et->jindex]);
                 temp = ret * U;
                 U = temp;
                 j--;
             }
@@ -208,39 +240,69 @@
 
             if (et->isjoint)
             {
                 if (et->axis == 0)
                 {
                     eJ(Eigen::seq(0, 2), j) = U(2, Eigen::seq(0, 2)) * U(1, 3) - U(1, Eigen::seq(0, 2)) * U(2, 3);
                     eJ(Eigen::seq(3, 5), j) = U(0, Eigen::seq(0, 2));
+
+                    if (et->isflip)
+                    {
+                        eJ(Eigen::seq(0, 5), j) = -eJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 1)
                 {
                     eJ(Eigen::seq(0, 2), j) = U(0, Eigen::seq(0, 2)) * U(2, 3) - U(2, Eigen::seq(0, 2)) * U(0, 3);
                     eJ(Eigen::seq(3, 5), j) = U(1, Eigen::seq(0, 2));
+
+                    if (et->isflip)
+                    {
+                        eJ(Eigen::seq(0, 5), j) = -eJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 2)
                 {
                     eJ(Eigen::seq(0, 2), j) = U(1, Eigen::seq(0, 2)) * U(0, 3) - U(0, Eigen::seq(0, 2)) * U(1, 3);
                     eJ(Eigen::seq(3, 5), j) = U(2, Eigen::seq(0, 2));
+
+                    if (et->isflip)
+                    {
+                        eJ(Eigen::seq(0, 5), j) = -eJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 3)
                 {
                     eJ(Eigen::seq(0, 2), j) = U(0, Eigen::seq(0, 2));
                     eJ(Eigen::seq(3, 5), j) = Eigen::Vector3d::Zero();
+
+                    if (et->isflip)
+                    {
+                        eJ(Eigen::seq(0, 2), j) = -eJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 4)
                 {
                     eJ(Eigen::seq(0, 2), j) = U(1, Eigen::seq(0, 2));
                     eJ(Eigen::seq(3, 5), j) = Eigen::Vector3d::Zero();
+
+                    if (et->isflip)
+                    {
+                        eJ(Eigen::seq(0, 2), j) = -eJ(Eigen::seq(0, 5), j);
+                    }
                 }
                 else if (et->axis == 5)
                 {
                     eJ(Eigen::seq(0, 2), j) = U(2, Eigen::seq(0, 2));
                     eJ(Eigen::seq(3, 5), j) = Eigen::Vector3d::Zero();
+
+                    if (et->isflip)
+                    {
+                        eJ(Eigen::seq(0, 2), j) = -eJ(Eigen::seq(0, 5), j);
+                    }
                 }
 
                 _ET_T(et, &ret(0), q[et->jindex]);
                 temp = ret * U;
                 U = temp;
                 j--;
             }
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/methods.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/methods.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/ne.c` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/ne.c`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/structs.cpp` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/structs.cpp`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/structs.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/structs.h`

 * *Files 11% similar despite different names*

```diff
@@ -28,22 +28,23 @@
                  *************** kinematic parameters *********************
                  **********************************************************/
                 ET **ets;
                 int n;
                 int m;
 
                 // While this information is stored in the ET's
-                // Its much faster for IK to cahce it here
+                // Its much faster for IK to cache it here
                 double *qlim_l;
                 double *qlim_h;
                 double *q_range2;
         };
 
         struct ET
         {
+                int isstaticsym; /* this ET is static and has a symbolic value */
                 int isjoint;
                 int isflip;
                 int jindex;
                 int axis;
                 double *T;    /* link static transform */
                 double *qlim; /* joint limits */
                 void (*op)(double *data, double eta);
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/vmath.c` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/vmath.c`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/core/vmath.h` & `roboticstoolbox-python-1.1.0/roboticstoolbox/core/vmath.h`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/RRMC.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/RRMC.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/RRMC_swift.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/RRMC_swift.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/baur.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/baur.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/branched_robot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/branched_robot.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/eigdemo.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/eigdemo.py`

 * *Files 22% similar despite different names*

```diff
@@ -35,23 +35,28 @@
     plt.xlabel('x')
     plt.ylabel('y')
     plt.axis('equal')
     plt.xlim(-s, s)
     plt.ylim(-s, s)
     ax.set_aspect('equal')
 
-    l1, = plt.plot([0, 0], [0, 0], color='r', linewidth=1.5)  # input vector
-    l2, = plt.plot([0, 0], [0, 0], color='b', linewidth=1.5)  # transformed vector
+    l1, = plt.plot([0, 0], [0, 0], color='r', linewidth=3)  # input vector
+    l2, = plt.plot([0, 0], [0, 0], color='b', linewidth=3)  # transformed vector
 
-    plt.legend(['$x$', r'${\bf A} x$'])
+    plt.plot([0, x[0, 0]], [0, x[1, 0]], color='k', linewidth=1)
+    plt.plot([0, x[0, 1]], [0, x[1, 1]], color='k', linewidth=1)
+    
 
+    plt.legend(['$x$', r'${\bf A} x$', r'$x_1$', r'$x_2$'])
+
+    print("\nto exit: type q, or close the window")
 
     def animate(theta):
 
-        x = np.r_[cos(theta), sin(theta)]
+        x = np.r_[cos(-theta), sin(-theta)]
         y = A @ x
 
         l1.set_xdata([0, x[0]])
         l1.set_ydata([0, x[1]])
 
         l2.set_xdata([0, y[0]])
         l2.set_ydata([0, y[1]])
@@ -64,32 +69,36 @@
             0, 2 * pi, 400), blit=True, interval=20, repeat=True)
 
     plt.show(block=True)
 
 def main():
 
     def help():
-        print("eigdemo          uses default matrix [1 2; 3 4]")
-        print("eigdemo a b c d  uses matrix [a b; c d]")
+        print("eigdemo          # uses default matrix [1 2; 3 4]")
+        print("eigdemo a b c d  # uses matrix [a b; c d]")
         sys.exit(0)
-        
+    
+    if sys.argv in ("-h", "--help", "help"):
+        help()
+
     if len(sys.argv) == 5:
 
         try:
             vec = [float(a) for a in sys.argv[1:5]]
             A = np.reshape(vec, (2,2))
         except:
             help()
 
-    elif sys.argv == 1:
+    elif len(sys.argv) == 1:
         A = np.array([
             [1, 2],
             [3, 3]
         ])
-
+    
     else:
         help()
 
+
     eigdemo(A)
 
 if __name__ == "__main__":
     main()
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/fetch_vision.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/fetch_vision.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/holistic_mm_non_holonomic.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/holistic_mm_non_holonomic.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/holistic_mm_omni.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/holistic_mm_omni.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/icra2021.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/icra2021.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/ik_exp.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ik_exp.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/ik_speed.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ik_speed.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/mexican-wave.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/mexican-wave.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/mmc.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/mmc.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/mobile.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/mobile.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/neo.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/neo.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/park.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/park.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/puma_jtraj.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/puma_jtraj.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/puma_swift.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/puma_swift.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/readme.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/readme.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/robots.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/robots.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/swift_recording.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/swift_recording.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/teach_swift.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/teach_swift.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/tripleangledemo.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/tripleangledemo.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/twistdemo.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/twistdemo.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/examples/vehicle1.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/vehicle1.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/Animations.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/Animations.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,44 +1,46 @@
 """
 @Author: Peter Corke, original MATLAB code and Python version
 @Author: Kristian Gibson, initial MATLAB port
 """
 from abc import ABC
 from math import pi, atan2
 import numpy as np
+
 # from scipy import integrate, linalg, interpolate
 from pathlib import Path
 import matplotlib.pyplot as plt
 from matplotlib import patches, colors
 import matplotlib.transforms as mtransforms
 
 from spatialmath import SE2, base
 from roboticstoolbox import rtb_load_data
 
+
 class VehicleAnimationBase(ABC):
     """
-    Abstract base class to support animation of a vehicle on Matplotlib plot
+    Abstract base class to support animation of a vehicle in a Matplotlib plot
 
     There are three concrete subclasses:
 
-    - ``VehicleMarker`` animates a Matplotlib marker
-    - ``VehiclePolygon`` animates a polygon shape (outline or filled), including predefined shapes
-    - ``VehicleIcon`` animates an image
+    - ``VehicleMarker`` animates a Matplotlib marker (shows position only)
+    - ``VehiclePolygon`` animates a polygon shape (outline or filled), including predefined shapes (shows position and orientation)
+    - ``VehicleIcon`` animates an image (shows position and orientation)
 
     An instance ``a`` of these classes can be used in three different ways, firstly::
 
         a = VehiclePolygon("car", color="red")
         a.add()
 
     adds an instance of the animation shape to the plot and subsequent calls
     to::
 
         a.update(q)
 
-    will animate it.
+    will animate it with the configuration given by ``q``.
 
     Secondly, an instance can be passed to a Vehicle subclass object to make an animation
     during simulation::
 
             a = VehiclePolygon("car", color="red")
             veh = Bicycle(animation=a)
 
@@ -110,14 +112,15 @@
         return self._object
 
     def __del__(self):
 
         if self._object is not None:
             self._object.remove()
 
+
 # ========================================================================= #
 class VehicleMarker(VehicleAnimationBase):
     def __init__(self, **kwargs):
         """
         Create graphical animation of vehicle as a Matplotlib marker
 
         :param kwargs: additional arguments passed to Matplotlib :meth:`~matplotlib.axes.Axes.plot`.
@@ -157,14 +160,15 @@
         if x is None:
             x = (0, 0)
         self._object = plt.plot(x[0], x[1], **{**self._args, **kwargs})[0]
 
 
 # ========================================================================= #
 
+
 class VehiclePolygon(VehicleAnimationBase):
     def __init__(self, shape="car", scale=1, **kwargs):
         """
         Create graphical animation of vehicle as a polygon
 
         :param shape: polygon shape as vertices or a predefined shape, defaults to "car"
         :type shape: ndarray(2,n) or str
@@ -268,15 +272,15 @@
         :type rotation: float
         :raises ValueError: Icon file not found
         :return: animation object
         :rtype: VehicleAnimation
 
         Creates an object that can be passed to a ``Vehicle`` subclass to
         depict the moving robot as an image icon during simulation.  The image
-        is translated and rotated to represent the vehicle configuration. 
+        is translated and rotated to represent the vehicle configuration.
 
         The car is scaled to an image with a horizontal length (width) of
         ``scale`` in the units of the plot. By default the image is assumed to
         contain a car parallel to the x-axis and facing right.  If the vehicle
         is facing upward set ``rotation`` to 90.
 
         The vehicle rotates about its ``origin`` which is expressed in terms of
@@ -412,15 +416,15 @@
 if __name__ == "__main__":
     from math import pi
 
     from roboticstoolbox import Bicycle, RandomPath
 
     V = np.diag(np.r_[0.02, 0.5 * pi / 180] ** 2)
 
-    v = VehiclePolygon(facecolor='None', edgecolor='k')
+    v = VehiclePolygon(facecolor="None", edgecolor="k")
     # v = VehicleIcon('greycar2', scale=2, rotation=90)
 
     veh = Bicycle(covar=V, animation=v, control=RandomPath(10), verbose=False)
     print(veh)
 
     odo = veh.step([1, 0.3])
     print(odo)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/Bug2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/Bug2.py`

 * *Files 3% similar despite different names*

```diff
@@ -6,19 +6,22 @@
 # from numpy import disp
 # from scipy import integrate
 
 # from spatialmath.pose2d import SE2
 from spatialmath import base
 from spatialmath.base.animate import *
 from scipy.ndimage import *
+
 # from matplotlib import cm
 import matplotlib.pyplot as plt
+
 # from matplotlib import animation
 from roboticstoolbox.mobile.PlannerBase import PlannerBase
 
+
 class Bug2(PlannerBase):
     """
     Construct a Bug2 reactive navigator
 
     :param occgrid: occupancy grid
     :type occgrid: :class:`OccGrid` instance or ndarray(N,M)
     :param kwargs: common arguments for :class:`PlannerBase` superclass
@@ -34,61 +37,69 @@
 
     .. note:: This class is not a planner, even though it subclasses
         :class:`PlannerBase`. It can produce very inefficient paths.
 
     :author: Kristian Gibson and Peter Corke, based on MATLAB version by Peter Corke
     :seealso: :class:`PlannerBase`
     """
-    def __init__(self, **kwargs):
 
+    def __init__(self, **kwargs):
         super().__init__(ndims=2, **kwargs)
 
         self.H = []  # hit points
         self._j = 0
         self._step = 1
         self._m_line = None
         self._edge = None
         self._k = None
 
-
     @property
     def m_line(self):
         """
         Get m-line
 
         :return: m-line in homogeneous form
         :rtype: ndarray(3)
 
         This is the m-line computed for the last :meth:`run`.
         """
         return self._m_line
 
     # override query method of base class
-    def run(self, start=None, goal=None, animate=False, pause=0.001, trail=True, movie=None, **kwargs):
+    def run(
+        self,
+        start=None,
+        goal=None,
+        animate=False,
+        pause=0.001,
+        trail=True,
+        movie=None,
+        **kwargs,
+    ):
         """
         Find a path using Bug2 reactive navigation algorithm
-        
+
         :param start: starting position
         :type start: array_like(2)
         :param goal: goal position
         :type goal: array_like(2)
-        :param animate: show animation of robot moving over the map, 
+        :param animate: show animation of robot moving over the map,
             defaults to False
         :type animate: bool, optional
         :param movie: save animation as a movie, defaults to None. Is either
             name of movie or a tuple (filename, frame interval)
         :type movie: str or tuple(str, float), optional
         :param trail: show the path followed by the robot, defaults to True
         :type current: bool, optional
         :return: path from ``start`` to ``goal``
         :rtype: ndarray(2,N)
 
         Compute the path from ``start`` to ``goal`` assuming the robot is capable
         of 8-way motion from its current cell to the next.
-        
+
         .. note:: ``start`` and ``goal`` are given as (x,y) coordinates in the
               occupancy grid map, not as matrix row and column coordinates.
 
         :seealso: :meth:`Bug2.plot`
         """
 
         # make sure start and goal are set and valid
@@ -113,16 +124,16 @@
         # movie = MovieWriter(movie)
 
         robot = self.start
         self._step = 1
         path = robot
         h = None
 
-        trail_line, = plt.plot(0, 0, 'y.', label='robot path')
-        trailHead, = plt.plot(0, 0, 'ko', zorder=10)
+        (trail_line,) = plt.plot(0, 0, "y.", label="robot path")
+        (trailHead,) = plt.plot(0, 0, "ko", zorder=10)
 
         # iterate using the next() method until we reach the goal
         while True:
             if animate:
                 trailHead.set_data(robot[0], robot[1])
                 if trail:
                     trail_line.set_data(path.T)
@@ -160,30 +171,29 @@
 
         :param ls: linestyle, defaults to ``"k--"``
         :type ls: str, optional
 
         Plots the m-line on the current axes.
         """
         if ls is None:
-            ls = 'k--'
+            ls = "k--"
 
         x_min, x_max = plt.gca().get_xlim()
         y_min, y_max = plt.gca().get_ylim()
         if self._m_line[1] == 0:
             # handle the case that the line is vertical
-            plt.plot([self._start[0], self._start[0]],
-                     [y_min, y_max], 'k--', label='m-line')
+            plt.plot(
+                [self._start[0], self._start[0]], [y_min, y_max], "k--", label="m-line"
+            )
         else:
             # regular line
-            x = np.array([
-                [x_min, 1],
-                [x_max, 1]  ])
+            x = np.array([[x_min, 1], [x_max, 1]])
             y = -x @ np.r_[self._m_line[0], self._m_line[2]]
             y = y / self._m_line[1]
-            plt.plot([x_min, x_max], y, ls, zorder=10, label='m-line')
+            plt.plot([x_min, x_max], y, ls, zorder=10, label="m-line")
 
     def next(self, position):
         """
         One step of the finite state automaton
 
         :param position: current robot position
         :type position: ndarray(2)
@@ -236,40 +246,44 @@
             self.message(f"{position}: moving around the obstacle (step 2)")
             if self._k < len(self._edge):
                 n = self._edge[self._k]  # next edge point
             else:
                 # we are at the end of the list of edge points, we
                 # are back where we started.  Step 2.c test.
                 plt.show(block=True)
-                raise RuntimeError('robot is trapped')
+                raise RuntimeError("robot is trapped")
 
             # are we on the M-line now ?
             if abs(np.inner(np.r_[position, 1], self._m_line)) <= 0.5:
                 self.message(f"  {position}: crossed the M-line")
 
                 # are we closer than when we encountered the obstacle?
-                if base.norm(position - self._goal) < base.norm(self.H[-1] - self._goal):
+                if base.norm(position - self._goal) < base.norm(
+                    self.H[-1] - self._goal
+                ):
                     self._step = 1  # transition to step 1
                     self.message(f"  {position}: change to step 1")
                     return n
 
             # no, keep going around
             self._k += 1
 
         return n
 
     def query(self):
-        raise NotImplementedError('This class has no query method')
+        raise NotImplementedError("This class has no query method")
 
     def plan(self):
-        raise NotImplementedError('This class has no plan method')
+        raise NotImplementedError("This class has no plan method")
+
 
 # Ported from Peter Corke's edgelist function found:
 # https://github.com/petercorke/toolbox-common-matlab/blob/master/edgelist.m
 
+
 #  these are directions of 8-neighbours in a clockwise direction
 # fmt: off
 _dirs = np.array([
         [-1,  0],
         [-1,  1],
         [ 0,  1],
         [ 1,  1],
@@ -305,68 +319,64 @@
     ``dirs`` is a list of integers representing the direction of the edge from
     the corresponding point in ``edge`` to the next point in ``edge``.  The
     integers in the range 0 to 7 represent directions: W SW S SE E NW N NW
     respectively.
 
     - Coordinates are given and returned assuming the matrix is an image, so the
       indices are always in the form (x,y) or (column,row).
-    - ``im` is a binary image where 0 is assumed to be background, non-zero 
+    - ``im` is a binary image where 0 is assumed to be background, non-zero
       is an object.
     - ``p`` must be a point on the edge of the region.
     - The initial point is always the first and last element of the returned edgelist.
     - 8-direction chain coding can give incorrect results when used with
       blobs founds using 4-way connectivty.
 
     :Reference:
 
     - METHODS TO ESTIMATE AREAS AND PERIMETERS OF BLOB-LIKE OBJECTS: A COMPARISON
       Luren Yang, Fritz Albregtsen, Tor Lgnnestad and Per Grgttum
       IAPR Workshop on Machine Vision Applications Dec. 13-15, 1994, Kawasaki
 
     """
-    p = base.getvector(p, 2, dtype=np.int)
-    
+    p = base.getvector(p, 2, dtype=int)
     if direction > 0:
         neighbours = np.arange(start=0, stop=8, step=1)
     else:
         neighbours = np.arange(start=7, stop=-1, step=-1)
 
     try:
         pix0 = im[p[1], p[0]]  # color of pixel we start at
     except:
-        raise ValueError('specified coordinate is not within image')
-
+        raise ValueError("specified coordinate is not within image")
 
     q = adjacent_point(im, p, pix0)
 
     # find an adjacent point outside the blob
     if q is None:
-        raise ValueError('no neighbour outside the blob')
+        raise ValueError("no neighbour outside the blob")
 
     d = None
     e = [p]  # initialize the edge list
-    dir = [] # initialize the direction list
+    dir = []  # initialize the direction list
     p0 = None
 
     while True:
-
         # find which direction is Q
         dq = q - p
         for kq in range(0, 8):
             # get index of neighbour's direction in range [1,8]
             if np.all(dq == _dirs[kq]):
                 break
 
         # now test for directions relative to Q
         for j in neighbours:
             # get index of neighbour's direction in range [1,8]
             k = (j + kq) % 8
             # if k > 7:
             #     k = k - 7
-            
 
             # compute coordinate of the k'th neighbour
             nk = p + _dirs[k]
 
             try:
                 if im[nk[1], nk[0]] == pix0:
                     # if this neighbour is in the blob it is the next edge pixel
@@ -376,27 +386,29 @@
                 raise ValueError("Something went wrong calculating edgelist")
 
             q = nk
 
         dir.append(k)
         # check if we are back where we started
         if p0 is None:
-                p0 = p  # make a note of where we started
+            p0 = p  # make a note of where we started
         else:
             if all(p == p0):
                 break
 
         # keep going, add this point to the edgelist
         e.append(p)
-    
+
     return e, dir
 
+
 # Ported from Peter Corke's adjacent_point function found:
 # https://github.com/petercorke/toolbox-common-matlab/blob/master/edgelist.m
 
+
 def adjacent_point(im, seed, pix0):
     """Find adjacent point
 
     :param im: occupancy grid
     :type im: ndarray(m,n)
     :param seed: initial point
     :type seed: ndarray(2)
@@ -413,15 +425,15 @@
 
     for d in _dirs:
         p = seed + d
         try:
             if im[p[1], p[0]] != pix0:
                 return p
         except:
-            pass 
+            pass
 
     return None
 
 
 # Implementation of Peter Corke's matlab homline function from:
 # https://github.com/petercorke/spatialmath-matlab/blob/master/homline.m
 def hom_line(p1, p2):
@@ -429,16 +441,15 @@
 
     # normalize so that the result of x*l' is the pixel distance
     # from the line
     return line / np.linalg.norm(line[0:2])
 
 
 if __name__ == "__main__":
-
     from roboticstoolbox import rtb_load_matfile
 
     vars = rtb_load_matfile("data/map1.mat")
-    map = vars['map']
+    map = vars["map"]
 
     bug2 = Bug2(occgrid=map)
     # bug.plan()
     path = bug2.run([20, 10], [50, 35], animate=True)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/CurvaturePolyPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/CurvaturePolyPlanner.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/DistanceTransformPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/DistanceTransformPlanner.py`

 * *Files 4% similar despite different names*

```diff
@@ -36,15 +36,15 @@
     Creates a planner that finds the path between two points in the 2D grid
     using omnidirectional motion and avoiding occupied cells.  The path
     comprises a set of 4- or -way connected points in adjacent cells.  Also
     known as the wavefront, grassfire or brushfire planning algorithm.
 
     The map is described by a 2D occupancy ``occgrid`` whose elements are zero
     if traversable of nonzero if untraversable, ie. an obstacle.
-    
+
     The cells are assumed to be unit squares. Crossing the cell horizontally or
     vertically is a travel distance of 1, and for the Euclidean distance
     measure, the crossing the cell diagonally is a distance of :math:`\sqrt{2}`.
 
     Example:
 
     .. runblock:: pycon
@@ -102,15 +102,15 @@
         if self.distancemap is not None:
             s += ", Distance map: computed "
         else:
             s += ", Distance map: empty "
 
         return s
 
-    def plan(self, goal=None, animate=False, verbose=False):
+    def plan(self, goal=None, animate=False, summary=False):
         r"""
         Plan path using distance transform
 
         :param goal: goal position :math:`(x, y)`, defaults to previously set value
         :type goal: array_like(2), optional
 
         Compute the distance transform for all non-obstacle cells, which is the
@@ -131,27 +131,28 @@
         if self._goal is None:
             raise ValueError("No goal specified here or in constructor")
 
         self._distancemap = distancexform(
             self.occgrid.grid,
             goal=self._goal,
             metric=self._metric,
-            animate=animate
+            animate=animate,
+            summary=summary,
         )
 
     def next(self, position):
         """
         Find next point on the path
 
         :param position: current robot position
         :type position: array_like(2)
         :raises RuntimeError: no plan has been computed
         :return: next robot position
         :rtype: ndarray(2)
-        
+
         Return the robot position that is one step closer to the goal. Called
         by :meth:`query` to find a path from start to goal.
 
         :seealso: :meth:`plan` :meth:`query`
         """
         if self.distancemap is None:
             Error("No distance map computed, you need to plan.")
@@ -211,15 +212,15 @@
         Creates a 3D plot showing distance from the goal as a cost surface.
         Overlays the path if given.
 
         .. warning:: The visualization is poor because of Matplotlib's poor hidden
             line/surface handling.
         """
         fig = plt.figure()
-        ax = fig.gca(projection="3d")
+        ax = fig.add_subplot(111, projection="3d")
 
         distance = self._distancemap
         X, Y = np.meshgrid(np.arange(distance.shape[1]), np.arange(distance.shape[0]))
         surf = ax.plot_surface(
             X, Y, distance, linewidth=1, antialiased=False  # cmap='gray',
         )
 
@@ -269,15 +270,15 @@
     """
 
     # build the matrix for performing distance transform:
     # - obstacles are nan
     # - other cells are inf
     # - goal is zero
 
-    goal = base.getvector(goal, 2, dtype=np.int)
+    goal = base.getvector(goal, 2, dtype=int)
 
     distance = occgrid.astype(np.float32)
     distance[occgrid > 0] = np.nan  # assign nan to obstacle cells
     distance[occgrid == 0] = np.inf  # assign inf to other cells
     distance[goal[1], goal[0]] = 0  # assign zero to goal
 
     # create the appropriate distance matrix D
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/DstarPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/DstarPlanner.py`

 * *Files 2% similar despite different names*

```diff
@@ -24,68 +24,70 @@
 # ======================================================================== #
 
 # The following code is modified from Python Robotics
 # https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning
 # D* grid planning
 # Author: Nirnay Roy
 # Copyright (c) 2016 - 2022 Atsushi Sakai and other contributors: https://github.com/AtsushiSakai/PythonRobotics/contributors
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 
 # for performance reasons there are some important differences compared to
 # the version from Python Robotics:
 #
 # 1. replace the classic D* functions min__State(), get_kmin(), insert(), remove()
-#    with heapq.heappush() and heapq.heappop(). The open_list is now a list of 
+#    with heapq.heappush() and heapq.heappop(). The open_list is now a list of
 #    tuples (k, _State) maintained by heapq, rather than a set
 #
 # 2. use enums rather than strings for cell state
 #
 # 3. lots of unnecessary inserting/deleting from the open_list due to arithmetic
 #    rounding in tests for costs h and k:
 #    - replace equality tests with math.isclose() which is faster than np.isclose()
 #    - add an offset to inequality tests, X > Y becomes X > Y + tol
 
+
 class _Tag(IntEnum):
     NEW = auto()
     OPEN = auto()
     CLOSED = auto()
-class _State:
 
+
+class _State:
     def __init__(self, x, y):
         self.x = x
         self.y = y
-        self.parent = None # 'back pointer' to next _State
+        self.parent = None  # 'back pointer' to next _State
         self.t = _Tag.NEW  # open closed new
         self.h = 0  # cost to goal
         self.k = 0  # estimate of shortest path cost
 
     def __str__(self):
-        return f"({self.x}, {self.y})" #[{self.h:.1f}, {self.k:.1f}]"
+        return f"({self.x}, {self.y})"  # [{self.h:.1f}, {self.k:.1f}]"
 
     def __repr__(self):
         return self.__str__()
 
     def __lt__(self, other):
         return True
 
-class _Map:
 
+class _Map:
     def __init__(self, row, col):
         self.row = row
         self.col = col
         self._Map = self.init__Map()
 
     def init__Map(self):
         _Map_list = []  # list of rows
         for i in range(self.row):
             # for each row, make a list
             tmp = []
             for j in range(self.col):
                 tmp.append(_State(j, i))  # append column to the row
-            _Map_list.append(tmp) # append row to _Map
+            _Map_list.append(tmp)  # append row to _Map
         return _Map_list
 
     _neighbours = [(-1, -1), (-1, 0), (-1, 1), (0, -1), (0, 1), (1, -1), (1, 0), (1, 1)]
 
     def get_neighbors(self, _State):
         _State_list = []
 
@@ -96,15 +98,17 @@
             except IndexError:
                 pass
         return _State_list
 
     _root2 = np.sqrt(2)
 
     def cost(self, _State1, _State2):
-        c = (self.costmap[_State1.y, _State1.x] + self.costmap[_State2.y, _State2.x]) / 2
+        c = (
+            self.costmap[_State1.y, _State1.x] + self.costmap[_State2.y, _State2.x]
+        ) / 2
 
         dx = _State1.x - _State2.x
         dy = _State1.y - _State2.y
         if dx == 0 or dy == 0:
             # NSEW movement, distance of 1
             return c
         else:
@@ -128,72 +132,100 @@
         # self.open_list = set()
         self.open_list = []
         self.nexpand = 0
         self.tol = tol
 
     def process__State(self, verbose=False):
         if verbose:
-            print('FRONTIER ', ' '.join([f"({x[1].x}, {x[1].y})" for x in self.open_list]))
+            print(
+                "FRONTIER ", " ".join([f"({x[1].x}, {x[1].y})" for x in self.open_list])
+            )
 
         # get _State from frontier
         if len(self.open_list) == 0:
             if verbose:
-                print('  x is None ')
+                print("  x is None ")
             return -1
         k_old, x = heapq.heappop(self.open_list)
         x.t = _Tag.CLOSED
 
         self.nexpand += 1
 
         if verbose:
             print(f"EXPAND {x}, {k_old:.1f}")
 
         if x.h > k_old + self.tol:
             # RAISE _State
             if verbose:
-                print('  raise')
+                print("  raise")
             for y in self._Map.get_neighbors(x):
-                if (y.t is not _Tag.NEW and
-                        y.h <= k_old - self.tol and 
-                        x.h > y.h + self._Map.cost(x, y) + self.tol):
+                if (
+                    y.t is not _Tag.NEW
+                    and y.h <= k_old - self.tol
+                    and x.h > y.h + self._Map.cost(x, y) + self.tol
+                ):
                     if verbose:
-                        print(f"  {x} cost from {x.h:.1f} to {y.h + self._Map.cost(x, y):.1f}; parent from {x.parent} to {y}")
+                        print(
+                            f"  {x} cost from {x.h:.1f} to {y.h + self._Map.cost(x, y):.1f}; parent from {x.parent} to {y}"
+                        )
                     x.parent = y
                     x.h = y.h + self._Map.cost(x, y)
 
         if math.isclose(x.h, k_old, rel_tol=0, abs_tol=self.tol):
             # normal _State
             if verbose:
-                print('  normal')
+                print("  normal")
             for y in self._Map.get_neighbors(x):
-                if y.t is _Tag.NEW \
-                   or (y.parent == x and not math.isclose(y.h, x.h + self._Map.cost(x, y), rel_tol=0, abs_tol=self.tol)) \
-                   or (y.parent != x and y.h > x.h + self._Map.cost(x, y) + self.tol):
+                if (
+                    y.t is _Tag.NEW
+                    or (
+                        y.parent == x
+                        and not math.isclose(
+                            y.h, x.h + self._Map.cost(x, y), rel_tol=0, abs_tol=self.tol
+                        )
+                    )
+                    or (y.parent != x and y.h > x.h + self._Map.cost(x, y) + self.tol)
+                ):
                     if verbose:
                         print(f"  reparent {y} from {y.parent} to {x}")
                     y.parent = x
                     self.insert(y, x.h + self._Map.cost(x, y))
         else:
             # RAISE or LOWER _State
             if verbose:
-                print('  raise/lower')
+                print("  raise/lower")
             for y in self._Map.get_neighbors(x):
-                if y.t is _Tag.NEW or (y.parent == x and not math.isclose(y.h, x.h + self._Map.cost(x, y), rel_tol=0, abs_tol=self.tol)):
+                if y.t is _Tag.NEW or (
+                    y.parent == x
+                    and not math.isclose(
+                        y.h, x.h + self._Map.cost(x, y), rel_tol=0, abs_tol=self.tol
+                    )
+                ):
                     if verbose:
-                        print(f"  {y} cost from {y.h:.1f} to {y.h + self._Map.cost(x, y):.1f}; parent from {y.parent} to {x}; add to frontier")
+                        print(
+                            f"  {y} cost from {y.h:.1f} to {y.h + self._Map.cost(x, y):.1f}; parent from {y.parent} to {x}; add to frontier"
+                        )
                     y.parent = x
                     self.insert(y, x.h + self._Map.cost(x, y))
                 else:
-                    if y.parent != x and y.h > x.h + self._Map.cost(x, y) + self.tol and x.t is _Tag.CLOSED:
+                    if (
+                        y.parent != x
+                        and y.h > x.h + self._Map.cost(x, y) + self.tol
+                        and x.t is _Tag.CLOSED
+                    ):
                         self.insert(x, x.h)
                         if verbose:
                             print(f"  {x}, {x.h:.1f} add to frontier")
                     else:
-                        if y.parent != x and x.h > y.h + self._Map.cost(y, x) + self.tol \
-                                and y.t is _Tag.CLOSED and y.h > k_old + self.tol:
+                        if (
+                            y.parent != x
+                            and x.h > y.h + self._Map.cost(y, x) + self.tol
+                            and y.t is _Tag.CLOSED
+                            and y.h > k_old + self.tol
+                        ):
                             self.insert(y, y.h)
                         if verbose:
                             print(f"  {y}, {y.h:.1f} add to frontier")
         if verbose:
             print()
 
         if len(self.open_list) == 0:
@@ -232,15 +264,15 @@
             # _State.k = min(_State.k, h_new)
             # # remove the item from the open list
             # # print('node already in open list, remove it first')
             # #TODO use bisect on old _State.k to find the entry
             # for i, item in enumerate(self.open_list):
             #     if item[1] is _State:
             #         del self.open_list[i]
-            #         break  
+            #         break
 
         elif _State.t is _Tag.CLOSED:
             _State.k = min(_State.h, h_new)
 
         _State.h = h_new
         _State.t = _Tag.OPEN
 
@@ -254,35 +286,36 @@
         if len(self.open_list) == 0:
             return -1
         else:
             # lowest priority item is always at index 0 according to docs
             return self.open_list[0][0]
 
     def showparents(self):
-        for y in range(self._Map.row-1, -1, -1):
-            if y == self._Map.row-1:
-                print("   ", end='')
+        for y in range(self._Map.row - 1, -1, -1):
+            if y == self._Map.row - 1:
+                print("   ", end="")
                 for x in range(self._Map.col):
-                    print(f"  {x}   ", end='')
+                    print(f"  {x}   ", end="")
                 print()
-            print(f"{y}: ", end='')
+            print(f"{y}: ", end="")
             for x in range(self._Map.col):
                 x = self._Map._Map[y][x]
                 par = x.parent
                 if par is None:
-                    print('  G   ', end='')
+                    print("  G   ", end="")
                 else:
-                    print(f"({par.x},{par.y}) ", end='')
+                    print(f"({par.x},{par.y}) ", end="")
             print()
         print()
 
+
 # ====================== RTB wrapper ============================= #
 
 # Copyright (c) 2022 Peter Corke: https://github.com/petercorke/robotics-toolbox-python
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 class DstarPlanner(PlannerBase):
     r"""
     D* path planner
 
     :param costmap: traversability costmap
     :type costmap: OccGrid or ndarray(w,h)
     :param kwargs: common planner options, see :class:`PlannerBase`
@@ -318,28 +351,29 @@
         >>> path, status = ds.query(start=(5, 4))
         >>> print(path.T)
         >>> print(status)
 
     :thanks: based on D* grid planning included from `Python Robotics <https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning>`_
     :seealso: :class:`PlannerBase`
     """
+
     def __init__(self, costmap=None, **kwargs):
         super().__init__(ndims=2, **kwargs)
 
         if isinstance(costmap, np.ndarray):
             self.costmap = costmap
         elif isinstance(costmap, OccupancyGrid):
             self.costmap = costmap.grid
         elif self.occgrid is not None:
             self.costmap = np.where(self.occgrid.grid > 0, np.inf, 1)
         else:
-            raise ValueError('unknown type of map')
+            raise ValueError("unknown type of map")
         self._Map = _Map(self.costmap.shape[0], self.costmap.shape[1])
         self._Map.costmap = self.costmap
-        self._Dstar = _Dstar(self._Map) #, tol=0)
+        self._Dstar = _Dstar(self._Map)  # , tol=0)
 
     def plan(self, goal=None, animate=False, progress=True, summary=False):
         r"""
         Plan D* path
 
         :param goal: goal position :math:`(x, y)`, defaults to previously set value
         :type goal: array_like(2), optional
@@ -367,15 +401,15 @@
 
         while True:
             ret = self._Dstar.process__State()
             # print('plan', ret, len(self._Dstar.open_list))
 
             if ret == -1:
                 break
-        
+
         if summary:
             print(self._Dstar.ninsert, self._Dstar.nin)
 
     @property
     def nexpand(self):
         """
         Number of node expansions
@@ -423,48 +457,53 @@
         self.start = start
         start_State = self._Map._Map[start[1]][start[0]]
         s = start_State
         s = s.parent
         tmp = start_State
 
         if sensor is not None and not callable(sensor):
-            raise ValueError('sensor must be callable')
+            raise ValueError("sensor must be callable")
 
         cost = tmp.h
         self.goal_State.h = 0
 
         path = []
         while True:
             path.append((tmp.x, tmp.y))
             if tmp == self.goal_State:
                 break
-            
+
             # x, y = tmp.parent.x, tmp.parent.y
 
             if sensor is not None:
                 changes = sensor((tmp.x, tmp.y))
                 if changes is not None:
                     # make changes to the plan
                     for x, y, newcost in changes:
                         X = self._Dstar._Map._Map[y][x]
                         # print(f"change cost at ({x}, {y}) to {newcost}")
                         val = self._Dstar.modify_cost(X, newcost)
                     # propagate the changes to plan
-                    print('propagate')
+                    print("propagate")
                     # self._Dstar.showparents()
                     while val != -1 and val < tmp.h:
                         val = self._Dstar.process__State(verbose=verbose)
                         # print('open set', len(self._Dstar.open_list))
                     # self._Dstar.showparents()
-                    
+
             tmp = tmp.parent
             # print('move to ', tmp)
 
-        status = namedtuple('_DstarStatus', ['cost',])
-        
+        status = namedtuple(
+            "_DstarStatus",
+            [
+                "cost",
+            ],
+        )
+
         return np.array(path), status(cost)
 
     # # Just feed self._h into plot function from parent as p
 
     # def next(self, current):
     #     if not self._valid_plan:
     #         Error("Cost _Map has changed, replan")
@@ -475,36 +514,36 @@
 
     #     if i == 0:
     #         return None  # we have arrived
     #     else:
     #         x = np.unravel_index((i), self._costmap.shape)
     #         return x[1], x[0]
 
+
 if __name__ == "__main__":
 
-    og = np.zeros((10,10))
+    og = np.zeros((10, 10))
     og[4:8, 3:6] = 1
     print(og)
 
     ds = DstarPlanner(occgrid=og)
     print(ds.costmap)
 
-    start = (1,1)
-    goal = (7,6)
+    start = (1, 1)
+    goal = (7, 6)
 
     ds.plan(goal=goal)
     ds._Map.show_h()
 
     # path, status = ds.query(start=start)
     # print(path)
     # print(status)
 
     # ds.plot(path=path)
 
-
     def sensorfunc(pos):
         if pos == (3, 3):
             changes = []
             for x in range(3, 6):
                 for y in range(0, 4):
                     changes.append((x, y, 100))
             return changes
@@ -545,8 +584,7 @@
 
     # # costly zone
     # m.set_cost([30, 40, 60, 80], 1.70, modify=_Dstar)
 
     # _Dstar.replan()
 
     plt.show(block=True)
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/DubinsPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/DubinsPlanner.py`

 * *Files 2% similar despite different names*

```diff
@@ -387,14 +387,23 @@
         self._stepsize = stepsize
 
     def __str__(self):
         s = (
             super().__str__()
             + f"\n  curvature={self.curvature}, stepsize={self.stepsize}"
         )
+        return s
+
+    @property
+    def curvature(self):
+        return self._curvature
+
+    @property
+    def stepsize(self):
+        return self._stepsize
 
     def query(self, start, goal, **kwargs):
         r"""
         Find a path between two configurations
 
         :param start: start configuration :math:`(x, y, \theta)`
         :type start: array_like(3), optional
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/EKF.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/EKF.py`

 * *Files 5% similar despite different names*

```diff
@@ -6,28 +6,38 @@
 from collections import namedtuple
 import numpy as np
 from math import pi
 from scipy import integrate, randn
 from scipy.linalg import sqrtm, block_diag
 from scipy.stats.distributions import chi2
 import matplotlib.pyplot as plt
+from matplotlib import animation
 
 from spatialmath.base.animate import Animate
 from spatialmath import base, SE2
 from roboticstoolbox.mobile import VehicleBase
 from roboticstoolbox.mobile.landmarkmap import LandmarkMap
 from roboticstoolbox.mobile.sensors import SensorBase
 
 
 class EKF:
-
-    def __init__(self, robot,  sensor=None, map=None, 
-            P0=None, x_est=None, joseph=True,
-            animate=True, x0=[0, 0, 0],
-            verbose=False, history=True, workspace=None):
+    def __init__(
+        self,
+        robot,
+        sensor=None,
+        map=None,
+        P0=None,
+        x_est=None,
+        joseph=True,
+        animate=True,
+        x0=[0, 0, 0],
+        verbose=False,
+        history=True,
+        workspace=None,
+    ):
         r"""
         Extended Kalman filter
 
         :param robot: robot motion model
         :type robot: 2-tuple
         :param sensor: vehicle mounted sensor model, defaults to None
         :type sensor: 2-tuple, optional
@@ -162,16 +172,16 @@
 
         The state :math:`\vec{x} = (x_0, y_0, \dots, x_{N-1}, y_{N-1})` is the
         estimated landmark positions where :math:`N` is the number of landmarks.
         The state vector is initially empty, and is extended by 2 elements every
         time a new landmark is observed.
 
         Create a vehicle with perfect odometry (no covariance), add a driver to it,
-        create a sensor that uses the map and vehicle state to estimate landmark range 
-        and bearing with covariance ``W``, the Kalman filter with estimated sensor 
+        create a sensor that uses the map and vehicle state to estimate landmark range
+        and bearing with covariance ``W``, the Kalman filter with estimated sensor
         covariance ``W``, then run the filter for N time steps::
 
             robot = Bicycle()
             robot.add_driver(RandomPath(20, 2))
 
             map = LandmarkMap(nlandmarks=20, workspace=10, seed=0)
 
@@ -204,15 +214,15 @@
             robot = Bicycle(covar=V)
             robot.control = RandomPath(workspace=10)
 
             map = LandmarkMap(nlandmarks=20, workspace=10)
 
             W = np.diag([0.1, np.radians(1)]) ** 2
             sensor = RangeBearingSensor(robot=robot, map=map, covar=W, angle=[-np.pi/2, np.pi/2], range=4, animate=True)
-            
+
             ekf = EKF(robot=(robot, V), P0=P0, sensor=(sensor, W))
 
             ekf.run(T=20)  # run the simulation for 20 seconds
 
             map.plot(); # plot true map
             ekf.plot_map(); # plot estimated landmark position
 
@@ -225,68 +235,74 @@
             pn = ekf.get_Pnorm()
             plt.plot(t, pn);
 
         :seealso: :meth:`run`
         """
 
         if robot is not None:
-            if not isinstance(robot, tuple) or len(robot) != 2 \
-                or not isinstance(robot[0], VehicleBase):
-                    raise TypeError('robot must be tuple (vehicle, V_est)')
+            if (
+                not isinstance(robot, tuple)
+                or len(robot) != 2
+                or not isinstance(robot[0], VehicleBase)
+            ):
+                raise TypeError("robot must be tuple (vehicle, V_est)")
             self._robot = robot[0]  # reference to the robot vehicle
             self._V_est = robot[1]  # estimate of vehicle state covariance V
 
         if sensor is not None:
-            if not isinstance(sensor, tuple) or len(sensor) != 2 \
-                or not isinstance(sensor[0], SensorBase):
-                    raise TypeError('sensor must be tuple (sensor, W_est)')
+            if (
+                not isinstance(sensor, tuple)
+                or len(sensor) != 2
+                or not isinstance(sensor[0], SensorBase)
+            ):
+                raise TypeError("sensor must be tuple (sensor, W_est)")
             self._sensor = sensor[0]  # reference to the sensor
             self._W_est = sensor[1]  # estimate of sensor covariance W
         else:
             self._sensor = None
             self._W_est = None
 
         if map is not None and not isinstance(map, LandmarkMap):
-            raise TypeError('map must be LandmarkMap instance')
+            raise TypeError("map must be LandmarkMap instance")
         self._ekf_map = map  # prior map for localization
 
         if animate:
             if map is not None:
                 self._workspace = map.workspace
                 self._robot._workspace = map.workspace
             elif sensor is not None:
                 self._workspace = sensor[0].map.workspace
                 self._robot._workspace = sensor[0].map.workspace
             elif self.robot.workspace is None:
-                raise ValueError('for animation robot must have a defined workspace')
+                raise ValueError("for animation robot must have a defined workspace")
         self.animate = animate
 
         self._P0 = P0  #  initial system covariance
         self._x0 = x0  # initial vehicle state
 
-        self._x_est = x_est           #  estimated state
-        self._landmarks = None   #  ekf_map state
-        
+        self._x_est = x_est  #  estimated state
+        self._landmarks = None  #  ekf_map state
+
         self._est_vehicle = False
         self._est_ekf_map = False
         if self._V_est is not None:
             # estimating vehicle pose by:
             #  - DR if sensor is None
             #  - localization if sensor is not None and map is not None
             self._est_vehicle = True
 
         # perfect vehicle case
         if map is None and sensor is not None:
             # estimating ekf_map
             self._est_ekf_map = True
-        self._joseph = joseph          #  flag: use Joseph form to compute p
+        self._joseph = joseph  #  flag: use Joseph form to compute p
 
         self._verbose = verbose
 
-        self._keep_history = history     #  keep history
+        self._keep_history = history  #  keep history
         self._htuple = namedtuple("EKFlog", "t xest odo P innov S K lm z")
 
         if workspace is not None:
             self._dim = base.expand_dims(dim)
         elif self.sensor is not None:
             self._dim = self.sensor.map.workspace
         else:
@@ -302,63 +318,63 @@
 
             self._est_vehicle = False
             self._x_est = None
             self._P_est = None
         else:
             # noisy odometry case
             if self.V_est.shape != (2, 2):
-                raise ValueError('vehicle state covariance V_est must be 2x2')
+                raise ValueError("vehicle state covariance V_est must be 2x2")
             self._x_est = self.robot.x
             self._P_est = P0
             self._est_vehicle = True
 
         if self.W_est is not None:
             if self.W_est.shape != (2, 2):
-                raise ValueError('sensor covariance W_est must be 2x2')
+                raise ValueError("sensor covariance W_est must be 2x2")
 
         # if np.any(self._sensor):
         #     self._landmarks = None*np.zeros(2, self._sensor.ekf_map.nlandmarks)
 
         # #  check types for passed objects
         # if np.any(self._map) and not isinstance(self._map, 'LandmarkMap'):
         #     raise ValueError('expecting LandmarkMap object')
 
         # if np.any(sensor) and not isinstance(sensor, 'Sensor'):
         #     raise ValueError('expecting Sensor object')
 
-        self._init()
+        self.init()
 
         self.xxdata = ([], [])
 
     def __str__(self):
         s = f"EKF object: {len(self._x_est)} states"
 
         def indent(s, n=2):
-            spaces = ' ' * n
-            return s.replace('\n', '\n' + spaces) 
+            spaces = " " * n
+            return s.replace("\n", "\n" + spaces)
 
         estimating = []
         if self._est_vehicle is not None:
-            estimating.append('vehicle pose')
+            estimating.append("vehicle pose")
         if self._est_ekf_map is not None:
-            estimating.append('map')
+            estimating.append("map")
         if len(estimating) > 0:
-            s += ', estimating: ' + ", ".join(estimating)
+            s += ", estimating: " + ", ".join(estimating)
         if self.robot is not None:
-            s += indent("\nrobot: "  + str(self.robot))
+            s += indent("\nrobot: " + str(self.robot))
         if self.V_est is not None:
-            s += indent('\nV_est:  ' + base.array2str(self.V_est))
+            s += indent("\nV_est:  " + base.array2str(self.V_est))
 
         if self.sensor is not None:
             s += indent("\nsensor: " + str(self.sensor))
         if self.W_est is not None:
-            s += indent('\nW_est:  ' + base.array2str(self.W_est))
+            s += indent("\nW_est:  " + base.array2str(self.W_est))
 
         return s
-    
+
     def __repr__(self):
         return str(self)
 
     @property
     def x_est(self):
         """
         Get EKF state
@@ -366,15 +382,15 @@
         :return: state vector
         :rtype: ndarray(n)
 
         Returns the value of the estimated state vector at the end of
         simulation. The dimensions depend on the problem being solved.
         """
         return self._x_est
-    
+
     @property
     def P_est(self):
         """
         Get EKF covariance
 
         :return: covariance matrix
         :rtype: ndarray(n,n)
@@ -391,15 +407,15 @@
 
         :return: covariance matrix
         :rtype: ndarray(n,n)
 
         Returns the value of the covariance matrix passed to the constructor.
         """
         return self._P0
-    
+
     @property
     def V_est(self):
         """
         Get estimated odometry covariance
 
         :return: odometry covariance
         :rtype: ndarray(2,2)
@@ -417,25 +433,25 @@
         :return: sensor covariance
         :rtype: ndarray(2,2)
 
         Returns the value of the estimated sensor covariance matrix passed to
         the constructor
         """
         return self._W_est
-    
+
     @property
     def robot(self):
         """
         Get robot object
 
         :return: robot used in simulation
         :rtype: :class:`VehicleBase` subclass
         """
         return self._robot
-    
+
     @property
     def sensor(self):
         """
         Get sensor object
 
         :return: sensor used in simulation
         :rtype: :class:`SensorBase` subclass
@@ -447,69 +463,68 @@
         """
         Get map object
 
         :return: map used in simulation
         :rtype: :class:`LandmarkMap` subclass
         """
         return self._map
-    
+
     @property
     def verbose(self):
         """
         Get verbosity state
 
         :return: verbosity
         :rtype: bool
         """
         return self._verbose
-    
+
     @property
     def history(self):
         """
         Get EKF simulation history
 
         :return: simulation history
         :rtype: list of namedtuples
 
         At each simulation timestep a namedtuple of is appended to the history
         list.  It contains, for that time step, estimated state and covariance,
         and sensor observation.
 
-        :seealso: :meth:`get_t` :meth:`get_xyt` :meth:`get_map` :meth:`get_P` 
-            :meth:`get_Pnorm` 
+        :seealso: :meth:`get_t` :meth:`get_xyt` :meth:`get_map` :meth:`get_P`
+            :meth:`get_Pnorm`
         """
         return self._history
-    
+
     @property
     def workspace(self):
         """
         Size of robot workspace
 
         :return: workspace bounds [xmin, xmax, ymin, ymax]
         :rtype: ndarray(4)
 
         Returns the bounds of the workspace as specified by the constructor
         option ``workspace``
         """
         return self._workspace
 
-    
     @property
     def landmarks(self):
         """
         Get landmark information
 
         :return: landmark information
         :rtype: dict
 
         The dictionary is indexed by the landmark id and gives a 3-tuple:
 
         - order in which landmark was seen
         - number of times seen
-        
+
         The order in which the landmark was first seen.  The first observed
         landmark has order 0 and so on.
 
         :seealso: :meth:`landmark`
         """
         return self._landmarks
 
@@ -581,117 +596,192 @@
         :type id: int
         :return: landmark position :math:`(x,y)`
         :rtype: ndarray(2)
 
         Returns the landmark position from the current state vector.
         """
         jx = self.landmark_index(id)
-        return self._x_est[jx: jx+2]
+        return self._x_est[jx : jx + 2]
 
-    def _init(self):
-        #EKF.init Reset the filter
+    def init(self):
+        # EKF.init Reset the filter
         #
         # E.init() resets the filter state and clears landmarks and history.
         self.robot.init()
         if self.sensor is not None:
             self.sensor.init()
 
-        #clear the history
+        # clear the history
         self._history = []
-        
+
         if self._V_est is None:
             # perfect vehicle case
             self._estVehicle = False
             self._x_est = np.empty((0,))
             self._P_est = np.empty((0, 0))
         else:
             # noisy odometry case
             self._x_est = self._x0
             self._P_est = self._P0
             self._estVehicle = True
-        
+
         if self.sensor is not None:
             # landmark dictionary maps lm_id to list[index, nseen]
             self._landmarks = {}
 
             # np.full((2, len(self.sensor.map)), -1, dtype=int)
 
-    def run(self, T, animate=False, movie=None):
+    def run(self, T, animate=False):
         """
         Run the EKF simulation
 
         :param T: maximum simulation time in seconds
         :type T: float
         :param animate: animate motion of vehicle, defaults to False
         :type animate: bool, optional
-        :param movie: name of movie file to create, defaults to None
-        :type movie: str, optional
 
         Simulates the motion of a vehicle (under the control of a driving agent)
         and the EKF estimator.  The steps are:
 
         - initialize the filter, vehicle and vehicle driver agent, sensor
         - for each time step:
 
             - step the vehicle and its driver agent, obtain odometry
             - take a sensor reading
             - execute the EKF
             - save information as a namedtuple to the history list for later display
 
-        :seealso: :meth:`history` :meth:`landmark` :meth:`landmarks` 
+        :seealso: :meth:`history` :meth:`landmark` :meth:`landmarks`
             :meth:`get_xyt` :meth:`get_t` :meth:`get_map` :meth:`get_P` :meth:`get_Pnorm`
             :meth:`plot_xy` :meth:`plot_ellipse` :meth:`plot_error` :meth:`plot_map`
+            :meth:`run_animation`
         """
-        self._init()
+        self.init()
         if animate:
             if self.sensor is not None:
                 self.sensor.map.plot()
-            elif self._dim is not None:
-                if not Iterable(self._dim):
-                    d = self._dim
-                    plt.axis([-d, d, -d, d])
-                elif len(self._dim) == 2:
-                    w = self._dim[1]
-                    h = self._dim(2)
-                    plt.axis([-w, w, -h, h])
-                elif len(self._dim) == 4:
-                    plt.axis(self._dim)
-            else:
-                animate = False
 
-            plt.xlabel('X')
-            plt.ylabel('Y')
+            plt.xlabel("X")
+            plt.ylabel("Y")
 
-        # anim = Animate(movie)
         for k in range(round(T / self.robot.dt)):
             if animate:
-                self.robot.plot()
-            self._step()
-        #     anim.add()
+                # self.robot.plot()
+                self.robot._animation.update(self.robot.x)
+            self.step()
 
-        # anim.close()
+    def run_animation(self, T=10, x0=None, control=None, format=None, file=None):
+        r"""
+        Run the EKF simulation
 
+        :param T: maximum simulation time in seconds
+        :type T: float
+        :param format: Output format
+        :type format: str, optional
+        :param file: File name
+        :type file: str, optional
+        :return: Matplotlib animation object
+        :rtype: :meth:`matplotlib.animation.FuncAnimation`
+
+        Simulates the motion of a vehicle (under the control of a driving agent)
+        and the EKF estimator for ``T`` seconds and returns an animation
+        in various formats::
+
+            ``format``    ``file``   description
+            ============  =========  ============================
+            ``"html"``    str, None  return HTML5 video
+            ``"jshtml"``  str, None  return JS+HTML video
+            ``"gif"``     str        return animated GIF
+            ``"mp4"``     str        return MP4/H264 video
+            ``None``                 return a ``FuncAnimation`` object
+
+        If ``file`` can be ``None`` then return the video as a string, otherwise it
+        must be a filename.
+
+        The simulation steps are:
+
+        - initialize the filter, vehicle and vehicle driver agent, sensor
+        - for each time step:
 
-    # TODO: Make the following methods private.
-    def _step(self, z_pred=None):
+            - step the vehicle and its driver agent, obtain odometry
+            - take a sensor reading
+            - execute the EKF
+            - save information as a namedtuple to the history list for later display
+
+        :seealso: :meth:`history` :meth:`landmark` :meth:`landmarks`
+            :meth:`get_xyt` :meth:`get_t` :meth:`get_map` :meth:`get_P` :meth:`get_Pnorm`
+            :meth:`plot_xy` :meth:`plot_ellipse` :meth:`plot_error` :meth:`plot_map`
+            :meth:`run_animation`
         """
-        Execute one timestep of the simulation
 
-        :param z_pred: _description_, defaults to None
-        :type z_pred: _type_, optional
+        fig, ax = plt.subplots()
+
+        def init():
+            self.init()
+            if self.sensor is not None:
+                self.sensor.map.plot()
+            ax.set_xlabel("X")
+            ax.set_ylabel("Y")
+
+        def animate(i):
+            self.robot._animation.update(self.robot.x)
+            self.step(pause=False)
+
+        nframes = round(T / self.robot._dt)
+        anim = animation.FuncAnimation(
+            fig=fig,
+            func=animate,
+            init_func=init,
+            frames=nframes,
+            interval=self.robot.dt * 1000,
+            blit=False,
+            repeat=False,
+        )
+
+        ret = None
+        if format == "html":
+            ret = anim.to_html5_video()  # convert to embeddable HTML5 animation
+        elif format == "jshtml":
+            ret = anim.to_jshtml()  # convert to embeddable Javascript/HTML animation
+        elif format == "gif":
+            anim.save(
+                file, writer=animation.PillowWriter(fps=1 / self.robot.dt)
+            )  # convert to GIF
+            ret = None
+        elif format == "mp4":
+            anim.save(
+                file, writer=animation.FFMpegWriter(fps=1 / self.robot.dt)
+            )  # convert to mp4/H264
+            ret = None
+        elif format == None:
+            # return the anim object
+            return anim
+        else:
+            raise ValueError("unknown format")
+
+        if ret is not None and file is not None:
+            with open(file, "w") as f:
+                f.write(ret)
+            ret = None
+        plt.close(fig)
+        return ret
+
+    def step(self, pause=None):
+        """
+        Execute one timestep of the simulation
         """
 
         # move the robot
-        odo = self.robot.step()
+        odo = self.robot.step(pause=pause)
 
         # =================================================================
         # P R E D I C T I O N
         # =================================================================
         if self._est_vehicle:
-            # split the state vector and covariance into chunks for 
+            # split the state vector and covariance into chunks for
             # vehicle and map
             xv_est = self._x_est[:3]
             xm_est = self._x_est[3:]
             Pvv_est = self._P_est[:3, :3]
             Pmm_est = self._P_est[3:, 3:]
             Pvm_est = self._P_est[:3, 3:]
         else:
@@ -718,15 +808,15 @@
             Pmm_pred = Pmm_est
             xm_pred = xm_est
 
         # put the chunks back together again
         if self._est_vehicle and not self._est_ekf_map:
             # vehicle only
             x_pred = xv_pred
-            P_pred =  Pvv_pred
+            P_pred = Pvv_pred
         elif not self._est_vehicle and self._est_ekf_map:
             # map only
             x_pred = xm_pred
             P_pred = Pmm_pred
         elif self._est_vehicle and self._est_ekf_map:
             # vehicle and map
             x_pred = np.r_[xv_pred, xm_pred]
@@ -734,15 +824,15 @@
             P_pred = np.block([
                 [Pvv_pred,   Pvm_pred], 
                 [Pvm_pred.T, Pmm_pred]
             ])
             # fmt: on
 
         # at this point we have:
-        #   xv_pred the state of the vehicle to use to 
+        #   xv_pred the state of the vehicle to use to
         #           predict observations
         #   xm_pred the state of the map
         #   x_pred  the full predicted state vector
         #   P_pred  the full predicted covariance matrix
 
         # initialize the variables that might be computed during
         # the update phase
@@ -751,88 +841,92 @@
 
         # disp('x_pred:') x_pred'
 
         # =================================================================
         # P R O C E S S    O B S E R V A T I O N S
         # =================================================================
 
-        
         if self.sensor is not None:
             #  read the sensor
             z, lm_id = self.sensor.reading()
             sensorReading = z is not None
         else:
             lm_id = None  # keep history saving happy
             z = None
             sensorReading = False
 
         if sensorReading:
             #  here for MBL, MM, SLAM
 
             # compute the innovation
             z_pred = self.sensor.h(xv_pred, lm_id)
-            innov = np.array([
-                z[0] - z_pred[0],
-                base.angdiff(z[1], z_pred[1])
-            ])
+            innov = np.array([z[0] - z_pred[0], base.wrap_mpi_pi(z[1] - z_pred[1])])
 
             if self._est_ekf_map:
                 # the ekf_map is estimated MM or SLAM case
                 if self._isseenbefore(lm_id):
                     # landmark is previously seen
-                    
+
                     # get previous estimate of its state
                     jx = self.landmark_mindex(lm_id)
-                    xf = xm_pred[jx: jx+2]
+                    xf = xm_pred[jx : jx + 2]
 
                     # compute Jacobian for this particular landmark
                     # xf = self.sensor.g(xv_pred, z) # HACK
                     Hx_k = self.sensor.Hp(xv_pred, xf)
 
                     z_pred = self.sensor.h(xv_pred, xf)
-                    innov = np.array([
-                        z[0] - z_pred[0],
-                        base.angdiff(z[1], z_pred[1])
-                    ])
+                    innov = np.array(
+                        [z[0] - z_pred[0], base.wrap_mpi_pi(z[1] - z_pred[1])]
+                    )
 
                     #  create the Jacobian for all landmarks
                     Hx = np.zeros((2, len(xm_pred)))
-                    Hx[:, jx:jx+2] = Hx_k
+                    Hx[:, jx : jx + 2] = Hx_k
 
                     Hw = self.sensor.Hw(xv_pred, xf)
 
                     if self._est_vehicle:
                         # concatenate Hx for for vehicle and ekf_map
                         Hxv = self.sensor.Hx(xv_pred, xf)
                         Hx = np.block([Hxv, Hx])
 
                     self._landmark_increment(lm_id)  # update the count
                     if self._verbose:
-                        print(f"landmark {lm_id} seen {self._landmark_count(lm_id)} times, state_idx={self.landmark_index(lm_id)}")
+                        print(
+                            f"landmark {lm_id} seen"
+                            f" {self._landmark_count(lm_id)} times,"
+                            f" state_idx={self.landmark_index(lm_id)}"
+                        )
                     doUpdatePhase = True
 
                 else:
                     # new landmark, seen for the first time
 
                     # extend the state vector and covariance
-                    x_pred, P_pred = self._extend_map(P_pred, xv_pred, xm_pred, z, lm_id)
+                    x_pred, P_pred = self._extend_map(
+                        P_pred, xv_pred, xm_pred, z, lm_id
+                    )
                     # if lm_id == 17:
                     #     print(P_pred)
                     #     # print(x_pred[-2:], self._sensor._map.landmark(17), base.norm(x_pred[-2:] - self._sensor._map.landmark(17)))
 
                     self._landmark_add(lm_id)
                     if self._verbose:
-                        print(f"landmark {lm_id} seen for first time, state_idx={self.landmark_index(lm_id)}")
+                        print(
+                            f"landmark {lm_id} seen for first time,"
+                            f" state_idx={self.landmark_index(lm_id)}"
+                        )
                     doUpdatePhase = False
 
             else:
-                    # LBL
-                    Hx = self.sensor.Hx(xv_pred, lm_id)
-                    Hw = self.sensor.Hw(xv_pred, lm_id)
-                    doUpdatePhase = True
+                # LBL
+                Hx = self.sensor.Hx(xv_pred, lm_id)
+                Hw = self.sensor.Hw(xv_pred, lm_id)
+                doUpdatePhase = True
         else:
             innov = None
 
         # doUpdatePhase flag indicates whether or not to do
         # the update phase of the filter
         #
         #  DR                        always false
@@ -854,22 +948,21 @@
             K = P_pred @ Hx.T @ np.linalg.inv(S)
 
             # update the state vector
             x_est = x_pred + K @ innov
 
             if self._est_vehicle:
                 #  wrap heading state for a vehicle
-                x_est[2] = base.angdiff(x_est[2])
+                x_est[2] = base.wrap_mpi_pi(x_est[2])
 
             # update the covariance
             if self._joseph:
                 #  we use the Joseph form
                 I = np.eye(P_pred.shape[0])
-                P_est = (I - K @ Hx) @ P_pred @ (I - K @ Hx).T \
-                    + K @ self._W_est @ K.T
+                P_est = (I - K @ Hx) @ P_pred @ (I - K @ Hx).T + K @ self._W_est @ K.T
             else:
                 P_est = P_pred - K @ S @ K.T
                 # enforce P to be symmetric
                 P_est = 0.5 * (P_est + P_est.T)
         else:
             # no update phase, estimate is same as prediction
             x_est = x_pred
@@ -906,32 +999,32 @@
     def _landmark_increment(self, lm_id):
         self._landmarks[lm_id][1] += 1  # update the count
 
     def _landmark_count(self, lm_id):
         return self._landmarks[lm_id][1]
 
     def _landmark_add(self, lm_id):
-        self._landmarks[lm_id] = [len(self._landmarks) , 1]
-    
+        self._landmarks[lm_id] = [len(self._landmarks), 1]
+
     def _extend_map(self, P, xv, xm, z, lm_id):
-            # this is a new landmark, we haven't seen it before
-            # estimate position of landmark in the world based on 
-            # noisy sensor reading and current vehicle pose
+        # this is a new landmark, we haven't seen it before
+        # estimate position of landmark in the world based on
+        # noisy sensor reading and current vehicle pose
 
         # M = None
 
         # estimate its position based on observation and vehicle state
         xf = self.sensor.g(xv, z)
-        
+
         # append this estimate to the state vector
         if self._est_vehicle:
             x_ext = np.r_[xv, xm, xf]
         else:
             x_ext = np.r_[xm, xf]
-        
+
         # get the Jacobian for the new landmark
         Gz = self.sensor.Gz(xv, z)
 
         # extend the covariance matrix
         n = len(self._x_est)
         if self._est_vehicle:
             # estimating vehicle state
@@ -940,26 +1033,25 @@
             Yz = np.block([
                 [np.eye(n), np.zeros((n, 2))    ],
                 [Gx,        np.zeros((2, n-3)), Gz]
             ])
             # fmt: on
         else:
             # estimating landmarks only
-            #P_ext = block_diag(P, Gz @ self._W_est @ Gz.T)
+            # P_ext = block_diag(P, Gz @ self._W_est @ Gz.T)
             # fmt: off
             Yz = np.block([
                 [np.eye(n),        np.zeros((n, 2))    ],
                 [np.zeros((2, n)), Gz]
             ])
             # fmt: on
         P_ext = Yz @ block_diag(P, self._W_est) @ Yz.T
 
         return x_ext, P_ext
 
-
     def get_t(self):
         """
         Get time from simulation
 
         :return: simulation time vector
         :rtype: ndarray(n)
 
@@ -981,98 +1073,117 @@
         """
         if self._est_vehicle:
             xyt = np.array([h.xest[:3] for h in self._history])
         else:
             xyt = None
         return xyt
 
-    def plot_xy(self, *args, block=False, **kwargs):
+    def plot_xy(self, *args, block=None, **kwargs):
         """
         Plot estimated vehicle position
 
         :param args: position arguments passed to :meth:`~matplotlib.axes.Axes.plot`
         :param kwargs: keywords arguments passed to :meth:`~matplotlib.axes.Axes.plot`
-        :param block: hold plot until figure is closed, defaults to False
+        :param block: hold plot until figure is closed, defaults to None
         :type block: bool, optional
 
         Plot the estimated vehicle path in the xy-plane.
 
         :seealso: :meth:`get_xyt` :meth:`plot_error` :meth:`plot_ellipse` :meth:`plot_P`
             :meth:`run` :meth:`history`
         """
-        if args is None and 'color' not in kwargs:
-            kwargs['color'] = 'r'
+        if args is None and "color" not in kwargs:
+            kwargs["color"] = "r"
         xyt = self.get_xyt()
         plt.plot(xyt[:, 0], xyt[:, 1], *args, **kwargs)
-        # plt.show(block=block)
+        if block is not None:
+            plt.show(block=block)
 
-    def plot_ellipse(self, confidence=0.95, N=10, **kwargs):
+    def plot_ellipse(self, confidence=0.95, N=10, block=None, **kwargs):
         """
         Plot uncertainty ellipses
 
         :param confidence: ellipse confidence interval, defaults to 0.95
         :type confidence: float, optional
         :param N: number of ellipses to plot, defaults to 10
         :type N: int, optional
+        :param block: hold plot until figure is closed, defaults to None
+        :type block: bool, optional
         :param kwargs: arguments passed to :meth:`spatialmath.base.graphics.plot_ellipse`
 
         Plot ``N`` uncertainty ellipses spaced evenly along the trajectory.
 
         :seealso: :meth:`get_P` :meth:`run` :meth:`history`
         """
         nhist = len(self._history)
 
         if "label" in kwargs:
             label = kwargs["label"]
             del kwargs["label"]
         else:
             label = f"{confidence*100:.3g}% confidence"
-        
-        for k in np.linspace(0, nhist-1, N):
+
+        for k in np.linspace(0, nhist - 1, N):
             k = round(k)
             h = self._history[k]
             if k == 0:
-                base.plot_ellipse(h.P[:2, :2], centre=h.xest[:2], confidence=confidence, label=label, inverted=True, **kwargs)
+                base.plot_ellipse(
+                    h.P[:2, :2],
+                    centre=h.xest[:2],
+                    confidence=confidence,
+                    label=label,
+                    inverted=True,
+                    **kwargs,
+                )
             else:
-                base.plot_ellipse(h.P[:2, :2], centre=h.xest[:2], confidence=confidence, inverted=True, **kwargs)
-
+                base.plot_ellipse(
+                    h.P[:2, :2],
+                    centre=h.xest[:2],
+                    confidence=confidence,
+                    inverted=True,
+                    **kwargs,
+                )
+        if block is not None:
+            plt.show(block=block)
 
-    def plot_error(self, bgcolor='r', confidence=0.95, ax=None, **kwargs):
+    def plot_error(self, bgcolor="r", confidence=0.95, ax=None, block=None, **kwargs):
         r"""
         Plot error with uncertainty bounds
 
         :param bgcolor: background color, defaults to 'r'
         :type bgcolor: str, optional
         :param confidence: confidence interval, defaults to 0.95
         :type confidence: float, optional
+        :param block: hold plot until figure is closed, defaults to None
+        :type block: bool, optional
 
-        Plot the error between actual and estimated vehicle 
+        Plot the error between actual and estimated vehicle
         path :math:`(x, y, \theta)`` versus time as three stacked plots.
         Heading error is wrapped into the range :math:`[-\pi,\pi)`
 
 
-        Behind each line draw a shaded polygon ``bgcolor`` showing the specified 
+        Behind each line draw a shaded polygon ``bgcolor`` showing the specified
         ``confidence`` bounds based on the covariance at each time step.
         Ideally the lines should be within the shaded polygon ``confidence``
         of the time.
 
         .. note:: Observations will decrease the uncertainty while periods of dead-reckoning increase it.
 
         :seealso: :meth:`get_P` :meth:`run` :meth:`history`
         """
         error = []
-        bounds = [] 
+        bounds = []
         ppf = chi2.ppf(confidence, df=2)
 
         x_gt = self.robot.x_hist
         for k in range(len(self.history)):
             hk = self.history[k]
             # error is true - estimated
             e = x_gt[k, :] - hk.xest
-            e[2] = base.angdiff(e[2])
+            e[2] = base.wrap_mpi_pi(e[2])
             error.append(e)
 
             P = np.diag(hk.P)
             bounds.append(np.sqrt(ppf * P[:3]))
 
         error = np.array(error)
         bounds = np.array(bounds)
@@ -1082,37 +1193,44 @@
             fig, axes = plt.subplots(3)
         else:
             axes = ax[:3]
         labels = ["x", "y", r"$\theta$"]
 
         for k, ax in enumerate(axes):
             if confidence is not None:
-                edge = np.array([
-                    np.r_[t, t[::-1]],
-                    np.r_[bounds[:, k], -bounds[::-1, k]],
-                    ])
-                polygon = plt.Polygon(edge.T, closed=True, facecolor='r', edgecolor='none', alpha=0.3)
+                edge = np.array(
+                    [
+                        np.r_[t, t[::-1]],
+                        np.r_[bounds[:, k], -bounds[::-1, k]],
+                    ]
+                )
+                polygon = plt.Polygon(
+                    edge.T, closed=True, facecolor="r", edgecolor="none", alpha=0.3
+                )
                 ax.add_patch(polygon)
-            ax.plot(error[:, k], **kwargs);
+            ax.plot(error[:, k], **kwargs)
             ax.grid(True)
             ax.set_ylabel(labels[k] + " error")
             ax.set_xlim(0, t[-1])
-        
+
+        if block is not None:
+            plt.show(block=block)
+
         # subplot(opt.nplots*100+12)
         # if opt.confidence
         #     edge = [pxy(:,2); -pxy(end:-1:1,2)];
         #     h = patch(t, edge, opt.color);
         #     set(h, 'EdgeColor', 'none', 'FaceAlpha', 0.3);
         # end
         # hold on
         # plot(err(:,2), args{:});
         # hold off
         # grid
         # ylabel('y error')
-        
+
         # subplot(opt.nplots*100+13)
         # if opt.confidence
         #     edge = [pxy(:,3); -pxy(end:-1:1,3)];
         #     h = patch(t, edge, opt.color);
         #     set(h, 'EdgeColor', 'none', 'FaceAlpha', 0.3);
         # end
         # hold on
@@ -1137,62 +1255,78 @@
         xy = []
         for lm_id, (jx, n) in self._landmarks.items():
             #  jx is an index into the *landmark* part of the state
             #  vector, we need to offset it to account for the vehicle
             #  state if we are estimating vehicle as well
             if self._est_vehicle:
                 jx += 3
-            xf = self._x_est[jx: jx+2]
+            xf = self._x_est[jx : jx + 2]
             xy.append(xf)
         return np.array(xy)
 
-    def plot_map(self, marker=None, ellipse=None, confidence = 0.95):
+    def plot_map(self, marker=None, ellipse=None, confidence=0.95, block=None):
         """
         Plot estimated landmarks
 
         :param marker: plot marker for landmark, arguments passed to :meth:`~matplotlib.axes.Axes.plot`, defaults to "r+"
         :type marker: dict, optional
         :param ellipse: arguments passed to :meth:`~spatialmath.base.graphics.plot_ellipse`, defaults to None
         :type ellipse: dict, optional
         :param confidence: ellipse confidence interval, defaults to 0.95
         :type confidence: float, optional
+        :param block: hold plot until figure is closed, defaults to None
+        :type block: bool, optional
 
         Plot a marker  and covariance ellipses for each estimated landmark.
 
         :seealso: :meth:`get_map` :meth:`run` :meth:`history`
         """
         if marker is None:
             marker = {
-                'marker': '+',
-                'markersize': 10, 
-                'markerfacecolor': 'red',
-                'linewidth': 0
+                "marker": "+",
+                "markersize": 10,
+                "markerfacecolor": "red",
+                "linewidth": 0,
             }
-        
+
         xm = self._x_est
         P = self._P_est
         if self._est_vehicle:
             xm = xm[3:]
             P = P[3:, 3:]
 
         # mark the estimate as a point
         xm = xm.reshape((-1, 2))  # arrange as Nx2
-        plt.plot(xm[:, 0], xm[:, 1], label='estimated landmark', **marker)
+        plt.plot(xm[:, 0], xm[:, 1], label="estimated landmark", **marker)
 
         # add an ellipse
         if ellipse is not None:
             for i in range(xm.shape[0]):
-                Pi = self.P_est[i: i+2, i: i+2]
+                Pi = self.P_est[i : i + 2, i : i + 2]
                 # put ellipse in the legend only once
                 if i == 0:
-                    base.plot_ellipse(Pi, centre=xm[i, :], confidence=confidence,
-                        inverted=True, label=f"{confidence*100:.3g}% confidence", **ellipse)
+                    base.plot_ellipse(
+                        Pi,
+                        centre=xm[i, :],
+                        confidence=confidence,
+                        inverted=True,
+                        label=f"{confidence*100:.3g}% confidence",
+                        **ellipse,
+                    )
                 else:
-                    base.plot_ellipse(Pi, centre=xm[i, :], confidence=confidence, inverted=True, **ellipse)
+                    base.plot_ellipse(
+                        Pi,
+                        centre=xm[i, :],
+                        confidence=confidence,
+                        inverted=True,
+                        **ellipse,
+                    )
         # plot_ellipse( P * chi2inv_rtb(opt.confidence, 2), xf, args{:});
+        if block is not None:
+            plt.show(block=block)
 
     def get_P(self, k=None):
         """
         Get covariance matrices from simulation
 
         :param k: timestep, defaults to None
         :type k: int, optional
@@ -1225,15 +1359,14 @@
         """
         if k is not None:
             return np.sqrt(np.linalg.det(self._history[k].P))
         else:
             p = [np.sqrt(np.linalg.det(h.P)) for h in self._history]
             return np.array(p)
 
-
     def disp_P(self, P, colorbar=False):
         """
         Display covariance matrix
 
         :param P: covariance matrix
         :type P: ndarray(n,n)
         :param colorbar: add a colorbar
@@ -1247,20 +1380,20 @@
 
         :seealso: :meth:`~matplotlib.axes.Axes.imshow` :func:`matplotlib.pyplot.colorbar`
         """
 
         z = np.log10(abs(P))
         mn = min(z[~np.isinf(z)])
         z[np.isinf(z)] = mn
-        plt.xlabel('State')
-        plt.ylabel('State')
+        plt.xlabel("State")
+        plt.ylabel("State")
 
-        plt.imshow(z, cmap='Reds')
+        plt.imshow(z, cmap="Reds")
         if colorbar is True:
-            plt.colorbar(label='log covariance')
+            plt.colorbar(label="log covariance")
         elif isinstance(colorbar, dict):
             plt.colorbar(**colorbar)
 
     def get_transform(self, map):
         """
         Transformation from estimated map to true map frame
 
@@ -1278,36 +1411,38 @@
         p = []
         q = []
 
         for lm_id in self._landmarks.keys():
             p.append(map[lm_id])
             q.append(self.landmark_x(lm_id))
 
-        p = np.array(p)
-        q = np.array(q)
+        p = np.array(p).T
+        q = np.array(q).T
 
         T = base.points2tr2(p, q)
         return SE2(T)
 
+
 if __name__ == "__main__":
 
     from roboticstoolbox import *
-    robot=Bicycle()
+
+    V = np.diag([0.02, np.deg2rad(0.5)]) ** 2
+    robot = Bicycle(covar=V, animation="car")
     robot.control = RandomPath(workspace=10)
-    P0=np.diag([1,1,1])
-    V=np.diag([1,1])
-    ekf = EKF(robot=(robot, V), P0=P0)
+    P0 = np.diag([1, 1, 1])
+    V = np.diag([1, 1])
+    ekf = EKF(robot=(robot, V), P0=P0, animate=False)
     print(ekf)
-
+    ekf.run_animation(T=20, format="mp4", file="ekf.mp4")
 
     # from roboticstoolbox import Bicycle
 
     # ### RVC2: Chapter 6
 
-
     # ##  6.1 Dead reckoning
 
     # ## 6.1.1 Modeling the vehicle
     # V = np.diag(np.r_[0.02, 0.5*pi/180] ** 2);
 
     # veh = Bicycle(covar=V)
 
@@ -1346,15 +1481,14 @@
 
     # # map.plot()
 
     # # W = diag([0.1, 1*pi/180].^2);
 
     # # sensor = RangeBearingSensor(veh, map, 'covar', W)
 
-
     # # [z,i] = sensor.reading()
 
     # # map.landmark(17)
 
     # # randinit
     # # map = LandmarkMap(20);
     # # veh = Bicycle('covar', V);
@@ -1380,15 +1514,14 @@
 
     # # ekf.run(1000);
 
     # # map.plot();
     # # ekf.plot_map('g');
     # # veh.plot_xy('b');
 
-
     # # ekf.landmarks(:,6)
 
     # # ekf.x_est(19:20)'
 
     # # ekf.P_est(19:20,19:20)
 
     # #  6.4  EKF SLAM
@@ -1454,15 +1587,14 @@
 
     # # clf
     # # plot(pf.std(1:100,:))
 
     # # clf
     # # pf.plot_pdf()
 
-
     # # 6.8  Application: Scanning laser rangefinder
 
     # # Laser odometry
     # # pg = PoseGraph('killian.g2o', 'laser');
 
     # # [r, theta] = pg.scan(2580);
     # # about r theta
@@ -1477,11 +1609,10 @@
     # # p2581 = pg.scanxy(2581);
     # # about p2580
 
     # # T = icp( p2581, p2580, 'verbose' , 'T0', transl2(0.5, 0), 'distthresh', 3)
 
     # # pg.time(2581)-pg.time(2580)
 
-
     # # Laser-based map building
     # # map = pg.scanmap();
-    # # pg.plot_occgrid(map)
+    # # pg.plot_occgrid(map)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/LatticePlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/LatticePlanner.py`

 * *Files 3% similar despite different names*

```diff
@@ -3,69 +3,73 @@
 from spatialmath import SE2
 import matplotlib.pyplot as plt
 import itertools
 from roboticstoolbox.mobile.PlannerBase import PlannerBase
 from roboticstoolbox.mobile.OccGrid import BinaryOccupancyGrid
 from collections import namedtuple
 
+
 def make_arc(dir, radius=1, npoints=20):
     points = []
 
-    if dir == 'S':
+    if dir == "S":
         points.append((0, 0))
         points.append((radius, 0))
 
-    elif dir == 'L':
-        for theta in np.linspace(0, np.pi/2, npoints):
+    elif dir == "L":
+        for theta in np.linspace(0, np.pi / 2, npoints):
             x = radius * np.sin(theta)
             y = radius * (1 - np.cos(theta))
             points.append((x, y))
 
-    elif dir == 'R':
-        for theta in np.linspace(0, np.pi/2, npoints):
+    elif dir == "R":
+        for theta in np.linspace(0, np.pi / 2, npoints):
             x = radius * np.sin(theta)
             y = radius * (-1 + np.cos(theta))
             points.append((x, y))
-    
+
     return np.array(points).T
 
+
 arcs = {}
 
+
 class LatticeVertex(DVertex):
     def __init__(self, move=None, pose=None, name=None):
         super().__init__(name=name)
         self.move = move
         self.pose = pose
         self.coord = pose.xyt()
 
     def icoord(self):
         xyt = self.coord
         ix = int(round(xyt[0]))
         iy = int(round(xyt[1]))
-        it = int(round(xyt[2]*2/np.pi))
+        it = int(round(xyt[2] * 2 / np.pi))
         return f"({ix:d},{iy:d},{it:d}), {self.name}"
 
+
 class LatticeEdge(Edge):
     def __init__(self, v1, v2, cost, pose, move):
         super().__init__(v1, v2, cost)
         self.pose = pose
         self.move = move
         self.arc = arcs[move]
 
     def plot(self, configspace=False, unwrap=False, **kwargs):
         T = self.pose
         xy = self.pose * self.arc
         if configspace:
             # 3D plot
             theta0 = self.pose.theta()
-            if self.move == 'L':
+            if self.move == "L":
                 thetaf = theta0 + np.pi / 2
-            elif self.move == 'R':
+            elif self.move == "R":
                 thetaf = theta0 - np.pi / 2
-            elif self.move == 'S':
+            elif self.move == "S":
                 thetaf = theta0
             theta = np.linspace(theta0, thetaf, self.arc.shape[1])
             if unwrap:
                 theta = np.unwrap(theta)
             plt.plot(xy[0, :], xy[1, :], theta, **kwargs)
         else:
             # 2D plot
@@ -126,39 +130,41 @@
         >>> path, status = lattice.query(start=(0, 0, 0), goal=(1, 2, np.pi/2))
         >>> print(path.T)
         >>> print(status)
 
     :seealso: :meth:`plan` :meth:`query` :class:`PlannerBase`
     """
 
-    def __init__(self, costs=None, root=(0,0,0), **kwargs):
+    def __init__(self, costs=None, root=(0, 0, 0), **kwargs):
 
         global arcs
 
         super().__init__(ndims=3, **kwargs)
 
-        self.poses = [SE2(1, 0, 0), SE2(1, 1, np.pi/2), SE2(1, -1, -np.pi/2)]
-        self.moves = ['S', 'L', 'R']
+        self.poses = [SE2(1, 0, 0), SE2(1, 1, np.pi / 2), SE2(1, -1, -np.pi / 2)]
+        self.moves = ["S", "L", "R"]
         if costs is None:
-            costs = [1, np.pi/2, np.pi/2]
+            costs = [1, np.pi / 2, np.pi / 2]
         self.costs = costs
         self.root = root
 
-
         # create the set of possible moves
         for move in self.moves:
             arcs[move] = make_arc(move)
 
     def __str__(self):
-        s = super().__str__() + f"\n  curvature={self.curvature}, stepsize={self.stepsize}"
+        s = (
+            super().__str__()
+            + f"\n  curvature={self.curvature}, stepsize={self.stepsize}"
+        )
 
     def _icoord(self, xyt):
         ix = int(round(xyt[0]))
         iy = int(round(xyt[1]))
-        it = int(round(xyt[2]*2/np.pi))
+        it = int(round(xyt[2] * 2 / np.pi))
         return f"({ix:d},{iy:d},{it:d})"
 
     def plan(self, iterations=None, verbose=False, summary=False):
         """
         Create a lattice plan
 
         :param iterations: number of iterations, defaults to None
@@ -168,85 +174,91 @@
 
         If an occupancy grid exists the if ``iterations`` is None the area of the
         grid will be completely filled.
 
         :seealso: :meth:`query`
         """
         if iterations is None and self.occgrid is None:
-            raise ValueError('iterations must be finite if no occupancy grid is specified')
+            raise ValueError(
+                "iterations must be finite if no occupancy grid is specified"
+            )
 
-        self.graph = DGraph(metric='SE2')
+        self.graph = DGraph(metric="SE2")
 
         # add root vertex to the graph, place it in the frontier
         v0 = LatticeVertex(pose=SE2(self.root))
-        self.graph.add_vertex(v0, name='0')
+        self.graph.add_vertex(v0, name="0")
         frontier = [v0]
 
         iteration = 0
         while True:
 
             newfrontier = []
             for vertex in frontier:
                 if verbose:
-                    print('EXPAND:', vertex.icoord())
+                    print("EXPAND:", vertex.icoord())
 
                 for pose, move, cost in zip(self.poses, self.moves, self.costs):
                     newpose = vertex.pose * pose
                     xyt = newpose.xyt()
                     # theta is guaranteed to be in range [-pi, pi)
 
                     if verbose:
-                        print('  MOVE', move, self._icoord(xyt))
+                        print("  MOVE", move, self._icoord(xyt))
 
                     if self.isoccupied(xyt[:2]):
                         if verbose:
-                            print('    is occupied')
+                            print("    is occupied")
                         continue
                     vclose, d = self.graph.closest(xyt)
 
                     if d > 0.01:
                         # vertex does not already exists
                         vnew = LatticeVertex(move, newpose, name=vertex.name + move)
 
                         # ix = int(xyt[0])
                         # iy = int(xyt[1])
                         # it = int(round(xyt[2]*2/np.pi))
                         # vnew = LatticeVertex(move, newpose, name=f"{ix:d},{iy:d},{it:d}")
                         self.graph.add_vertex(vnew)
                         if verbose:
-                            print('    add to graph as', vnew.name)
+                            print("    add to graph as", vnew.name)
 
-                        edge = LatticeEdge(vertex, vnew, cost=cost, pose=vertex.pose, move=move)
+                        edge = LatticeEdge(
+                            vertex, vnew, cost=cost, pose=vertex.pose, move=move
+                        )
 
                         # connect it into the graph, add to frontier
                         vertex.connect(vnew, edge=edge)
                         newfrontier.append(vnew)
                     else:
                         # vertex already exists
                         # print('exists', vertex, move, vclose)
 
                         # connect it into the graph, don't add to frontier
                         if verbose:
-                            print('    already in graph, connect to', vclose.icoord())
-                        edge = LatticeEdge(vertex, vclose, cost=cost, pose=vertex.pose, move=move)
+                            print("    already in graph, connect to", vclose.icoord())
+                        edge = LatticeEdge(
+                            vertex, vclose, cost=cost, pose=vertex.pose, move=move
+                        )
                         vertex.connect(vclose, edge=edge)
 
             frontier = newfrontier
 
             iteration += 1
             if iterations is None:
                 if len(frontier) == 0:
                     print(f"finished after {iteration} iterations")
                     break
                 print(f"iteration {iteration}, frontier length {len(frontier)}")
             elif iteration >= iterations:
                 break
         if summary:
             print(f"{self.graph.n} vertices and {self.graph.ne} edges created")
-            
+
     def query(self, start, goal):
         r"""
         Find a path through the lattice
 
         :param start: start configuration :math:`(x, y, \theta)`
         :type start: array_like(3), optional
         :param goal: goal configuration :math:`(x, y, \theta)`
@@ -269,93 +281,92 @@
         +-------------+-----------------------------------------------------+
 
         :seealso: :meth:`plan`
         """
 
         vs, ds = self.graph.closest(start)
         if ds > 0.001:
-            raise ValueError('start configuration is not in the lattice')
+            raise ValueError("start configuration is not in the lattice")
         vg, dg = self.graph.closest(goal)
         if dg > 0.001:
-            raise ValueError('goal configuration is not in the lattice')
+            raise ValueError("goal configuration is not in the lattice")
 
         try:
             path, cost, _ = self.graph.path_Astar(vs, vg, verbose=False)
         except TypeError:
-            raise RuntimeError('no path found') from None
+            raise RuntimeError("no path found") from None
 
-        status = namedtuple('LatticeStatus', ['cost', 'segments', 'edges'])
+        status = namedtuple("LatticeStatus", ["cost", "segments", "edges"])
 
         segments = []
         edges = []
         for p, n in zip(path[:-1], path[1:]):
             e = p.edgeto(n)
             edges.append(e)
             segments.append(e.move)
 
         return np.array([p.coord for p in path]), status(cost, segments, edges)
 
     def plot(self, path=None, **kwargs):
         super().plot(**kwargs)
-        
-        if kwargs.get('configspace', False):
+
+        if kwargs.get("configspace", False):
 
             # 3D plot
             for k, vertex in enumerate(self.graph):
                 # for every node
                 # if k == 0:
                 #     plt.plot(vertex.coord[0], vertex.coord[1], vertex.coord[2], 'k>', markersize=10)
                 # else:
-                plt.plot(vertex.coord[0], vertex.coord[1], vertex.coord[2], 'bo')
+                plt.plot(vertex.coord[0], vertex.coord[1], vertex.coord[2], "bo")
 
             for edge in self.graph.edges():
-                edge.plot(color='k', **kwargs)
+                edge.plot(color="k", **kwargs)
 
             if path is not None:
                 for p, n in zip(path[:-1], path[1:]):
                     # turn coordinaets back into vertices
                     vp, _ = self.graph.closest(p)
                     vn, _ = self.graph.closest(n)
                     e = vp.edgeto(vn)
 
-                    #e.plot(color='b', linewidth=4)
-                    
-                    e.plot(color='k', linewidth=4)
-                    e.plot(color='yellow', linewidth=3, dashes=(4,4))
+                    # e.plot(color='b', linewidth=4)
+
+                    e.plot(color="k", linewidth=4)
+                    e.plot(color="yellow", linewidth=3, dashes=(4, 4))
         else:
             # 2D plot
             for k, vertex in enumerate(self.graph):
                 # for every node
                 # if k == 0:
                 #     plt.plot(vertex.coord[0], vertex.coord[1], 'k>', markersize=10)
                 # else:
-                plt.plot(vertex.coord[0], vertex.coord[1], 'bo')
+                plt.plot(vertex.coord[0], vertex.coord[1], "bo")
 
             for edge in self.graph.edges():
-                edge.plot(color='k')
+                edge.plot(color="k")
 
             if path is not None:
                 for p, n in zip(path[:-1], path[1:]):
                     # turn coordinaets back into vertices
                     vp, _ = self.graph.closest(p)
                     vn, _ = self.graph.closest(n)
                     e = vp.edgeto(vn)
 
-                    #e.plot(color='b', linewidth=4)
-                    
-                    e.plot(color='k', linewidth=4)
-                    e.plot(color='yellow', linewidth=3, dashes=(4,4))
+                    # e.plot(color='b', linewidth=4)
 
+                    e.plot(color="k", linewidth=4)
+                    e.plot(color="yellow", linewidth=3, dashes=(4, 4))
 
 
 if __name__ == "__main__":
 
     lattice = LatticePlanner()
     lattice.plan(iterations=6)
-    path = lattice.query(start=(0, 0, np.pi/2), goal=(1, 1, 0))
+    path = lattice.query(start=(0, 0, np.pi / 2), goal=(1, 1, 0))
     print(path)
 
     # og = BinaryOccupancyGrid(workspace=[-5, 5, -5, 5], value=False)
     # og.set([3, 3, -2, 3], True)
 
     # lattice = LatticePlanner(occgrid=og)
 
@@ -384,15 +395,14 @@
     # print()
 
     # path, status = lattice.query(qs, qg)
 
     # print(path)
     # print(status)
 
-
     # lattice.plot(path=path)
 
     # plt.show(block=True)
 
     # ax = plt.gca()
     # ax.set_aspect('equal')
     # ax.grid(True)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/OccGrid.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/OccGrid.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 import numpy as np
 import matplotlib.pyplot as plt
 from spatialmath import base
 import scipy.ndimage as sp
 from abc import ABC
-from spatialmath import base
+import spatialmath.base as smb
 
 from spatialmath.geom2d import Polygon2
 
 
 class BaseMap(ABC):
     def __init__(self, workspace=None, name=None, **unused):
         """
@@ -26,15 +26,15 @@
         ==============  =======  =======
         A (scalar)      -A:A     -A:A
         [A, B]           A:B      A:B
         [A, B, C, D]     A:B      C:D
         ==============  =======  =======
         """
         if workspace is not None:
-            workspace = base.expand_dims(workspace)
+            workspace = smb.expand_dims(workspace)
             self._workspace = workspace
             self.dx = workspace[1] - workspace[0]
             self.dy = workspace[3] - workspace[2]
         self._name = name
 
 
 class BaseOccupancyGrid(BaseMap):
@@ -62,15 +62,15 @@
         - specifying ``workspace`` and ``value`` arguments
 
         """
         super().__init__(**kwargs)
 
         if grid is not None:
             self._grid = grid
-            self._origin = base.getvector(origin, 2)
+            self._origin = smb.getvector(origin, 2)
 
         elif self._workspace is not None:
             self._grid = np.full(
                 np.floor(np.r_[self.dx, self.dy] / cellsize).astype(int) + 1, value
             )
             self._origin = np.r_[self._workspace[0], self._workspace[2]]
 
@@ -236,15 +236,15 @@
         :type p: array_like(2)
         :return: world coordinate (x, y)
         :rtype: ndarray(2)
 
         The grid cell size and offset are used to convert occupancy grid
         coordinate ``p`` to a world coordinate.
         """
-        p = base.getvector(p, 2)
+        p = smb.getvector(p, 2)
         return p * self._cellsize + self._origin
 
     def w2g(self, p):
         """
         Convert world coordinate to grid coordinate (superclass)
 
         :param p: world coordinate (x, y)
@@ -254,45 +254,46 @@
 
         The grid cell size and offset are used to convert ``p`` to an occupancy
         grid coordinate.  The grid coordinate is rounded and cast to integer
         value. No check is made on the validity of the coordinate.
         """
         return (np.round((p - self._origin) / self._cellsize)).astype(int)
 
-    def plot(self, map=None, ax=None, block=False, **kwargs):
+    def plot(self, map=None, ax=None, block=None, **kwargs):
         """
         Plot the occupancy grid (superclass)
 
         :param map: array which is plotted instead of the grid, must be same
             size as the occupancy grid,defaults to None
         :type map: ndarray(N,M), optional
         :param ax: matplotlib axes to plot into, defaults to None
         :type ax: Axes2D, optional
-        :param block: block until plot is dismissed, defaults to False
+        :param block: block until plot is dismissed, defaults to None
         :type block: bool, optional
         :param kwargs: arguments passed to ``imshow``
 
         The grid is plotted as an image but with axes in world coordinates.
 
         The grid is a NumPy boolean array which has values 0 (false=unoccupied)
         and 1 (true=occupied).  Passing a `cmap` option to imshow can be used
         to control the displayed color of free space and obstacles.
 
         """
 
-        ax = base.axes_logic(ax, 2)
+        ax = smb.axes_logic(ax, 2)
 
         if map is None:
             map = self._grid
             kwargs["extent"] = self.workspace
 
         ax.imshow(map, origin="lower", interpolation=None, **kwargs)
         ax.set_xlabel("x")
         ax.set_ylabel("y")
-        plt.show(block=block)
+        if block is not None:
+            plt.show(block=block)
 
     def line_w(self, p1, p2):
         """
         Get index of cells along a line segment (superclass)
 
         :param p1: start
         :type p1: array_like(2)
@@ -312,15 +313,15 @@
         gp1 = self.w2g(p1)
         gp2 = self.w2g(p2)
 
         return self._line(gp1, gp2)
 
     def _line(self, p1, p2):
 
-        x, y = base.bresenham(p1, p2, array=self.grid)
+        x, y = smb.bresenham(p1, p2)
         z = np.ravel_multi_index(np.vstack((y, x)), self.grid.shape)
         return z
 
     @property
     def ravel(self):
         """
         Ravel the grid (superclass)
@@ -464,17 +465,20 @@
     def __init__(self, workspace=None, polygons=[]):
         """
         Polygonal obstacle map
 
         :param workspace: dimensions of 2D plot area, defaults to (-10:10) x (-10:10),
             see :func:`~spatialmath.base.graphics.plotvol2`
         :type workspace: float, array_like(2), array_like(4)
-        :param polygons: _description_, defaults to []
+        :param polygons: obstacle polygons, defaults to []
         :type polygons: list, optional
 
+        The obstacle polygons are specified as instances of :class:`~spatialmath.geom2d.Polygon2`
+        or ndarray(2,N).
+
         The workspace can be specified in several ways:
 
         ==============  =======  =======
         ``workspace``   x-range  y-range
         ==============  =======  =======
         A (scalar)      -A:A     -A:A
         [A, B]           A:B      A:B
@@ -514,21 +518,22 @@
         The ``polygon`` is tested against polygons in the map, and returns True
         on the first collision.
 
         :seealso: :meth:`add` :class:`~spatialmath.geom2d.Polygon2`
         """
         return polygon.intersects(self.polygons)
 
-    def plot(self, block=False):
-        base.plotvol2(self.workspace)
+    def plot(self, block=None):
+        smb.plotvol2(self.workspace)
 
         for polygon in self.polygons:
             polygon.plot(color="r")
 
-        plt.show(block=block)
+        if block is not None:
+            plt.show(block=block)
 
     def isoccupied(self, p):
         """
         Test if point lies inside an obstacle
 
         :param p: a 2D point
         :type p: array_like(2)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/PRMPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/PRMPlanner.py`

 * *Files 4% similar despite different names*

```diff
@@ -5,20 +5,22 @@
 """
 # from multiprocessing.sharedctypes import Value
 # from numpy import disp
 # from scipy import integrate
 # from spatialmath.base.animate import Animate
 from spatialmath.base.transforms2d import *
 from spatialmath.base.vectors import *
+
 # from spatialmath.pose2d import SE2
 # from spatialmath.base import animate
 from scipy.ndimage import *
 from matplotlib import cm, pyplot as plt
 from roboticstoolbox.mobile.PlannerBase import PlannerBase
 from pgraph import UGraph
+
 # from progress.bar import FillingCirclesBar
 
 
 class PRMPlanner(PlannerBase):
     r"""
     Distance transform path planner
 
@@ -57,14 +59,15 @@
         >>> prm.plan()
         >>> path = prm.query(start=(5, 4), goal=(1,1))
         >>> print(path.T)
 
     :author: Peter Corke
     :seealso: :class:`PlannerBase`
     """
+
     def __init__(self, occgrid=None, npoints=100, dist_thresh=None, **kwargs):
         super().__init__(occgrid, ndims=2, **kwargs)
 
         if dist_thresh is None:
             self._dist_thresh = 0.3 * self.occgrid.maxdim
 
         self._npoints = npoints
@@ -77,15 +80,15 @@
         self._local_path = None
         self._v_path = None
         self._g_path = None
 
     def __str__(self):
         s = super().__str__()
         if self.graph is not None:
-            s += '\n  ' + str(self.graph)
+            s += "\n  " + str(self.graph)
         return s
 
     @property
     def npoints(self):
         """
         Number of points in the roadmap
 
@@ -121,15 +124,14 @@
         Roadmap graph
 
         :return: roadmap as an undirected graph
         :rtype: :class:`pgraph.UGraph` instance
         """
         return self._graph
 
-
     def _create_roadmap(self, npoints, dist_thresh, animate=None):
         # a = Animate(animate, fps=5)
         self.progress_start(npoints)
 
         x = None
         y = None
         for j in range(npoints):
@@ -148,37 +150,37 @@
         for vertex in self.graph:
             # find distance from vertex to all other vertices
             distances = []
             for othervertex in self.graph:
                 # skip self
                 if vertex is othervertex:
                     continue
-                # add (distance, vertex) tuples to list 
+                # add (distance, vertex) tuples to list
                 distances.append((vertex.distance(othervertex), othervertex))
-            
+
             # sort into ascending distance
-            distances.sort(key=lambda x:x[0])
+            distances.sort(key=lambda x: x[0])
 
             # create edges to vertex if permissible
             for distance, othervertex in distances:
                 # test if below distance threshold
                 if dist_thresh is not None and distance > dist_thresh:
-                    break # sorted into ascending order, so we are done
+                    break  # sorted into ascending order, so we are done
 
                 # test if obstacle free path connecting them
                 if self._test_path(vertex, othervertex):
                     # add an edge
                     self.graph.add_edge(vertex, othervertex, cost=distance)
             self.progress_next()
 
         self.progress_end()
-            # if animate is not None:
-            #     self.plot()
-            #     if not np.empty(movie):
-            #         a.add()
+        # if animate is not None:
+        #     self.plot()
+        #     if not np.empty(movie):
+        #         a.add()
 
     def _test_path(self, v1, v2, npoints=None):
         # vector from v1 to v2
         dir = v2.coord - v1.coord
 
         # figure the number of points, essentially the line length
         # TODO: should delegate this test to the OccGrid object and do it
@@ -213,15 +215,15 @@
         The roadmap is a pgraph :obj:`~pgraph.PGraph.UGraph`
         :class:`~pgraph.UGraph`
         :class:`~pgraph.PGraph.UGraph`
 
         :seealso: :meth:`query` :meth:`graph`
         """
 
-        self.message('create the graph')
+        self.message("create the graph")
 
         if npoints is None:
             npoints = self.npoints
 
         if dist_thresh is None:
             dist_thresh = self.dist_thresh
 
@@ -248,26 +250,26 @@
 
         .. warning:: Waypoints 1 to N-2 are part of the roadmap, while waypoints
             0 and N-1 are the start and goal respectively.  The first and last
             motion segment is not guaranteed to be obstacle free.
 
         """
         if self.graph.n == 0:
-            raise RuntimeError('no plan computed')
+            raise RuntimeError("no plan computed")
 
         super().query(start=start, goal=goal, next=False, **kwargs)
 
         # find roadmap vertices closest to start and goal
         vstart, _ = self.graph.closest(self.start)
         vgoal, _ = self.graph.closest(self.goal)
 
         # find A* path through the roadmap
         out = self.graph.path_Astar(vstart, vgoal)
         if out is None:
-            raise RuntimeError('no path found')
+            raise RuntimeError("no path found")
         path = [v.coord for v in out[0]]
 
         path.insert(0, start)  # insert start at head of path
         path.append(goal)  # append goal to end of path
 
         return np.array(path)
 
@@ -277,42 +279,58 @@
 
         :param vertex: vertex style, defaults to {}
         :type vertex: dict, optional
         :param edge: edge style, defaults to {}
         :type edge: dict, optional
 
         Displays:
-        
+
         - the planner background (obstacles)
         - the roadmap graph
         - the path
 
         :seealso: :meth:`UGraph.plot`
         """
         # plot the obstacles and path
-        super().plot(*args, **kwargs)
+        ax = super().plot(*args, **kwargs)
+        print("plotted background")
         vertex = {**dict(markersize=4), **vertex}
         edge = {**dict(linewidth=0.5), **edge}
 
         # add the roadmap graph
-        self.graph.plot(text=False, vopt=vertex, eopt=edge)
+        self.graph.plot(text=False, vopt=vertex, eopt=edge, ax=ax)
+        print("plotted roadmap")
 
 
 if __name__ == "__main__":
     import matplotlib.pyplot as plt
+    from roboticstoolbox import *
+
+    house = rtb_load_matfile("data/house.mat")
+    floorplan = house["floorplan"]
+    places = house["places"]
+
+    occgrid = floorplan.copy()
+
+    prm = PRMPlanner(occgrid=floorplan, seed=0)
+    prm.plan(npoints=50)
+    prm.plot()
 
     # start and goal position
-    start = (10, 10)
-    goal = (50, 50)
+    # start = (10, 10)
+    # goal = (50, 50)
+
+    # occgrid = np.zeros((100, 100))
+    # occgrid[20:40, 15:30] = 1
+
+    # prm = PRMPlanner(occgrid=occgrid, verbose=True)
 
-    occgrid = np.zeros((100, 100))
-    occgrid[20:40, 15:30] = 1
+    # prm.plan()
 
-    prm = PRMPlanner(occgrid=occgrid, verbose=True)
+    # prm.plot()
 
-    prm.plan()
-    path = prm.query(start, goal)
-    print(path)
+    # path = prm.query(start, goal)
+    # print(path)
 
-    prm.plot(path, path_marker=dict(zorder=8, linewidth=2, markersize=6, color='k'))
-    prm.plot(ax=plt.gca(), text=False, vertex=dict(markersize=4), edge=dict(linewidth=0.5))
+    # prm.plot(path, path_marker=dict(zorder=8, linewidth=2, markersize=6, color='k'))
+    # prm.plot(ax=plt.gca(), text=False, vertex=dict(markersize=4), edge=dict(linewidth=0.5))
     plt.show(block=True)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/ParticleFilter.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/ParticleFilter.py`

 * *Files 17% similar despite different names*

```diff
@@ -10,27 +10,41 @@
 """
 
 from collections import namedtuple
 
 import numpy as np
 import scipy as sp
 import matplotlib.pyplot as plt
-from spatialmath import base
+from matplotlib import animation
+
+import spatialmath.base as smb
 
 """
 Monte-carlo based localisation for estimating vehicle pose based on
 odometry and observations of known landmarks.
 """
 
 # TODO: refactor this and EKF, RNG, history, common plots, animation, movie
 
+
 class ParticleFilter:
-    
-    def __init__(self, robot, sensor, R, L, nparticles=500, seed=0, x0=None,
-    verbose=False, animate=False, history=True, workspace=None):
+    def __init__(
+        self,
+        robot,
+        sensor,
+        R,
+        L,
+        nparticles=500,
+        seed=0,
+        x0=None,
+        verbose=False,
+        animate=False,
+        history=True,
+        workspace=None,
+    ):
         """
         Particle filter
 
         :param robot: robot motion model
         :type robot: :class:`VehicleBase` subclass,
         :param sensor: vehicle mounted sensor model
         :type sensor: :class:`SensorBase` subclass
@@ -50,15 +64,15 @@
         :type history: bool, optional
         :param workspace: dimension of workspace, see :func:`~spatialmath.base.graphics.expand_dims`
         :type workspace: scalar, array_like(2), array_like(4)
 
         This class implements a Monte-Carlo estimator or particle filter for
         vehicle state, based on odometry, a landmark map, and landmark
         observations.  The state of each particle is a possible vehicle
-        configuration :math:`(x,y,\theta)`.  Bootstrap particle resampling is 
+        configuration :math:`(x,y,\theta)`.  Bootstrap particle resampling is
         used.
 
         The working area is defined by ``workspace`` or inherited from the
         landmark map attached to the ``sensor`` (see
         :func:`~spatialmath.base.graphics.expand_dims`):
 
         ==============  =======  =======
@@ -112,57 +126,57 @@
         self.w0 = 0.05
         self._x0 = x0
 
         # create a private random number stream if required
         self._random = np.random.default_rng(seed)
         self._seed = seed
 
-        self._keep_history = history     #  keep history
+        self._keep_history = history  #  keep history
         self._htuple = namedtuple("PFlog", "t odo xest std weights")
 
         if workspace is not None:
-            self._dim = base.expand_dims(workspace)
+            self._dim = smb.expand_dims(workspace)
         else:
             self._dim = sensor.map.workspace
 
         self._workspace = self.robot.workspace
-        self._init()
+        # self._init()
 
     def __str__(self):
-        #ParticleFilter.char Convert to string
+        # ParticleFilter.char Convert to string
         #
         # PF.char() is a string representing the state of the ParticleFilter
         # object in human-readable form.
         #
         # See also ParticleFilter.display.
 
         def indent(s, n=2):
-            spaces = ' ' * n
-            return s.replace('\n', '\n' + spaces)
+            spaces = " " * n
+            return s.replace("\n", "\n" + spaces)
 
         s = f"ParticleFilter object: {self.nparticles} particles"
-        s += '\nR:  ' + base.array2str(self.R)
-        s += '\nL:  ' + base.array2str(self.L)
+        s += "\nR:  " + smb.array2str(self.R)
+        s += "\nL:  " + smb.array2str(self.L)
         if self.robot is not None:
-            s += indent("\nrobot: "  + str(self.robot))
+            s += indent("\nrobot: " + str(self.robot))
 
         if self.sensor is not None:
             s += indent("\nsensor: " + str(self.sensor))
         return s
 
     @property
     def robot(self):
         """
         Get robot object
 
         :return: robot used in simulation
         :rtype: :class:`VehicleBase` subclass
         """
         return self._robot
-    
+
     @property
     def sensor(self):
         """
         Get sensor object
 
         :return: sensor used in simulation
         :rtype: :class:`SensorBase` subclass
@@ -174,39 +188,39 @@
         """
         Get map object
 
         :return: map used in simulation
         :rtype: :class:`LandmarkMap` subclass
         """
         return self._map
-    
+
     @property
     def verbose(self):
         """
         Get verbosity state
 
         :return: verbosity
         :rtype: bool
         """
         return self._verbose
-    
+
     @property
     def history(self):
         """
         Get EKF simulation history
 
         :return: simulation history
         :rtype: list of namedtuples
 
         At each simulation timestep a namedtuple of is appended to the history
         list.  It contains, for that time step, estimated state and covariance,
         and sensor observation.
 
-        :seealso: :meth:`get_t` :meth:`get_xy` :meth:`get_std` 
-            :meth:`get_Pnorm` 
+        :seealso: :meth:`get_t` :meth:`get_xy` :meth:`get_std`
+            :meth:`get_Pnorm`
         """
         return self._history
 
     @property
     def workspace(self):
         """
         Size of robot workspace
@@ -215,15 +229,14 @@
         :rtype: ndarray(4)
 
         Returns the bounds of the workspace as specified by constructor
         option ``workspace``
         """
         return self._workspace
 
-
     @property
     def random(self):
         """
         Get private random number generator
 
         :return: NumPy random number generator
         :rtype: :class:`numpy.random.Generator`
@@ -238,232 +251,390 @@
 
         The generator is initialized with the seed provided at constructor
         time every time ``init`` is called.
 
         """
         return self._random
 
-    def _init(self, x0=None):
-        #ParticleFilter.init Initialize the particle filter
+    def _init(self, x0=None, animate=False, ax=None):
+        # ParticleFilter.init Initialize the particle filter
         #
         # PF.init() initializes the particle distribution and clears the
         # history.
         #
         # Notes::
         # - If initial particle states were given to the constructor the states are
         #   set to this value, else a random distribution over the map is used.
         # - Invoked by the run() method.
 
         self.robot.init()
         self.sensor.init()
 
-        #clear the history
+        # clear the history
         self._history = []
 
         # create a new private random number generator
         if self._seed is not None:
             self._random = np.random.default_rng(self._seed)
 
         self._t = 0
 
         # initialize particles
         if x0 is None:
             x0 = self._x0
         if x0 is None:
             # create initial particle distribution as uniformly randomly distributed
             # over the map workspace and heading angles
-            x = self.random.uniform(self.workspace[0], self.workspace[1], size=(self.nparticles,))
-            y = self.random.uniform(self.workspace[2], self.workspace[3], size=(self.nparticles,))
+            x = self.random.uniform(
+                self.workspace[0], self.workspace[1], size=(self.nparticles,)
+            )
+            y = self.random.uniform(
+                self.workspace[2], self.workspace[3], size=(self.nparticles,)
+            )
             t = self.random.uniform(-np.pi, np.pi, size=(self.nparticles,))
-            self.x = np.c_[x, y, t] 
+            self.x = np.c_[x, y, t]
 
-        self.weight = np.ones((self.nparticles,))
+        if animate:
+            # display the initial particles
+            (self.h,) = ax.plot(
+                self.x[:, 0],
+                self.x[:, 1],
+                "go",
+                zorder=0,
+                markersize=3,
+                markeredgecolor="none",
+                alpha=0.3,
+                label="particle",
+            )
 
+        self.weight = np.ones((self.nparticles,))
 
     def run(self, T=10, x0=None):
         """
         Run the particle filter simulation
 
         :param T: maximum simulation time in seconds
         :type T: float
-        :param animate: animate motion of vehicle, defaults to False
-        :type animate: bool, optional
-        :param movie: name of movie file to create, defaults to None
-        :type movie: str, optional
+        :param x0: Initial state, defaults to value given to Vehicle constructor
+        :type x0: array_like(3) or array_like(2)
 
         Simulates the motion of a vehicle (under the control of a driving agent)
-        and the EKF estimator.  The steps are:
+        and the particle-filter estimator.  The steps are:
 
         - initialize the filter, vehicle and vehicle driver agent, sensor
         - for each time step:
 
             - step the vehicle and its driver agent, obtain odometry
             - take a sensor reading
             - execute the EKF
             - save information as a namedtuple to the history list for later display
 
-        :seealso: :meth:`history` :meth:`landmark` :meth:`landmarks` 
+        :seealso: :meth:`history` :meth:`landmark` :meth:`landmarks`
             :meth:`get_xy` :meth:`get_t` :meth:`get_std`
             :meth:`plot_xy`
         """
 
         self._init(x0=x0)
 
         # anim = Animate(opt.movie)
 
         # display the initial particles
+        ax = smb.axes_logic(None, 2)
         if self._animate:
-            self.h, = plt.plot(self.x[:, 0], self.x[:, 1], 'go', zorder=0, markersize=3, markeredgecolor='none', alpha=0.3, label='particle')
+            (self.h,) = ax.plot(
+                self.x[:, 0],
+                self.x[:, 1],
+                "go",
+                zorder=0,
+                markersize=3,
+                markeredgecolor="none",
+                alpha=0.3,
+                label="particle",
+            )
         # set(self.h, 'Tag', 'particles')
-        
+
         # self.robot.plot()
 
         # iterate over time
+        import time
+
         for i in range(round(T / self.robot.dt)):
             self._step()
+            # time.sleep(0.2)
+            plt.pause(0.2)
+            # plt.draw()
             # anim.add()
         # anim.close()
 
+    def run_animation(self, T=10, x0=None, format=None, file=None):
+        """
+        Run the particle filter simulation
+
+        :param T: maximum simulation time in seconds
+        :type T: float
+        :param x0: Initial state, defaults to value given to Vehicle constructor
+        :type x0: array_like(3) or array_like(2)
+        :param format: Output format
+        :type format: str, optional
+        :param file: File name
+        :type file: str, optional
+        :return: Matplotlib animation object
+        :rtype: :meth:`matplotlib.animation.FuncAnimation`
+
+        Simulates the motion of a vehicle (under the control of a driving agent)
+        and the particle-filter estimator and returns an animation
+        in various formats::
+
+            ``format``    ``file``   description
+            ============  =========  ============================
+            ``"html"``    str, None  return HTML5 video
+            ``"jshtml"``  str, None  return JS+HTML video
+            ``"gif"``     str        return animated GIF
+            ``"mp4"``     str        return MP4/H264 video
+            ``None``                 return a ``FuncAnimation`` object
+
+        The allowables types for ``file`` are given in the second column.  A str
+        value is the file name.  If ``None`` is an option then return the video as a string.
+
+        For the last case, a reference to the animation object must be held if used for
+        animation in a Jupyter cell::
+
+            anim = robot.run_animation(T=20)
+
+        The steps are:
+
+        - initialize the filter, vehicle and vehicle driver agent, sensor
+        - for each time step:
+
+            - step the vehicle and its driver agent, obtain odometry
+            - take a sensor reading
+            - execute the EKF
+            - save information as a namedtuple to the history list for later display
+
+        :seealso: :meth:`history` :meth:`landmark` :meth:`landmarks`
+            :meth:`get_xy` :meth:`get_t` :meth:`get_std`
+            :meth:`plot_xy`
+        """
+
+        fig, ax = plt.subplots()
+
+        nframes = round(T / self.robot.dt)
+        anim = animation.FuncAnimation(
+            fig=fig,
+            # func=lambda i: self._step(animate=True, pause=False),
+            # init_func=lambda: self._init(animate=True),
+            func=lambda i: self._step(),
+            init_func=lambda: self._init(ax=ax, animate=True),
+            frames=nframes,
+            interval=self.robot.dt * 1000,
+            blit=False,
+            repeat=False,
+        )
+        # anim._interval = self.dt*1000/2
+        # anim._repeat = True
+        ret = None
+        if format == "html":
+            ret = anim.to_html5_video()  # convert to embeddable HTML5 animation
+        elif format == "jshtml":
+            ret = anim.to_jshtml()  # convert to embeddable Javascript/HTML animation
+        elif format == "gif":
+            anim.save(
+                file, writer=animation.PillowWriter(fps=1 / self.dt)
+            )  # convert to GIF
+            ret = None
+        elif format == "mp4":
+            anim.save(
+                file, writer=animation.FFMpegWriter(fps=1 / self.dt)
+            )  # convert to mp4/H264
+            ret = None
+        elif format == None:
+            # return the anim object
+            return anim
+        else:
+            raise ValueError("unknown format")
+
+        if ret is not None and file is not None:
+            with open(file, "w") as f:
+                f.write(ret)
+            ret = None
+        plt.close(fig)
+        return ret
+        # self._init(x0=x0)
+
+        # # anim = Animate(opt.movie)
+
+        # # display the initial particles
+        # ax = smb.axes_logic(None, 2)
+        # if self._animate:
+        #     (self.h,) = ax.plot(
+        #         self.x[:, 0],
+        #         self.x[:, 1],
+        #         "go",
+        #         zorder=0,
+        #         markersize=3,
+        #         markeredgecolor="none",
+        #         alpha=0.3,
+        #         label="particle",
+        #     )
+        # # set(self.h, 'Tag', 'particles')
+
+        # # self.robot.plot()
+
+        # # iterate over time
+        # import time
+
+        # for i in range(round(T / self.robot.dt)):
+        #     self._step()
+        #     # time.sleep(0.2)
+        #     plt.pause(0.2)
+        #     # plt.draw()
+        #     # anim.add()
+        # # anim.close()
+
     def _step(self):
-             
-        #fprintf('---- step\n')
-        odo = self.robot.step()        # move the robot
+
+        # fprintf('---- step\n')
+        odo = self.robot.step(animate=self._animate)  # move the robot
 
         # update the particles based on odometry
         self._predict(odo)
 
         # get a sensor reading
-        z, lm_id = self.sensor.reading()         
+        z, lm_id = self.sensor.reading()
 
         if z is not None:
             self._observe(z, lm_id)
-            #fprintf(' observe beacon #d\n', lm_id)
+            # fprintf(' observe beacon #d\n', lm_id)
 
             self._select()
 
         # our estimate is simply the mean of the particles
         x_est = self.x.mean(axis=0)
         std_est = self.x.std(axis=0)
 
         # std is more complex for angles, need to account for 2pi wrap
-        std_est[2] = np.sqrt(np.sum(base.angdiff(self.x[:,2], x_est[2]) ** 2)) / (self.nparticles-1)
+        std_est[2] = np.sqrt(np.sum(smb.angdiff(self.x[:, 2], x_est[2]) ** 2)) / (
+            self.nparticles - 1
+        )
 
         # display the updated particles
         # set(self.h, 'Xdata', self.x(:,1), 'Ydata', self.x(:,2), 'Zdata', self.x(:,3))
 
         if self._animate:
             self.h.set_xdata(self.x[:, 0])
             self.h.set_ydata(self.x[:, 1])
-        
+
         # if ~isempty(self.anim)
         #     self.anim.add()
 
         if self._keep_history:
             hist = self._htuple(
-                self.robot._t,
-                odo.copy(),
-                x_est,
-                std_est,
-                self.weight.copy()
+                self.robot._t, odo.copy(), x_est, std_est, self.weight.copy()
             )
             self._history.append(hist)
 
     def plot_pdf(self):
         """
         Plot particle PDF
 
         Displays a discrete PDF of vehicle position.  Creates a 3D plot where
         the x- and y-axes are the estimated vehicle position and the z-axis is
         the particle weight.  Each particle is represented by a a vertical line
         segment of height equal to particle weight.
         """
 
-        ax = base.plotvol3()
+        ax = smb.plotvol3()
         for (x, y, t), weight in zip(self.x, self.weight):
             # ax.plot([x, x], [y, y], [0, weight], 'r')
-            ax.plot([x, x], [y, y], [0, weight], 'skyblue', linewidth=3)
-            ax.plot(x, y, weight, 'k.', markersize=6)
+            ax.plot([x, x], [y, y], [0, weight], "skyblue", linewidth=3)
+            ax.plot(x, y, weight, "k.", markersize=6)
 
-        plt.grid(True)
-        plt.xlabel('X')
-        plt.ylabel('Y')
-        plt.xlim()
-        ax.set_zlabel('particle weight')
+        ax.grid(True)
+        ax.set_xlabel("X")
+        ax.set_ylabel("Y")
+        ax.set_xlim()
+        ax.set_zlabel("particle weight")
         ax.view_init(29, 59)
 
     def _predict(self, odo):
         # step 2
         # update the particle state based on odometry and a random perturbation
 
         # Straightforward code:
         #
         # for i=1:self.nparticles
-        #    x = self.robot.f( self.x(i,:), odo)' + sqrt(self.R)*self.randn[2,0]   
+        #    x = self.robot.f( self.x(i,:), odo)' + sqrt(self.R)*self.randn[2,0]
         #    x[2] = angdiff(x[2])
         #    self.x(i,:) = x
         #
         # Vectorized code:
 
-        self.x = self.robot.f(self.x, odo) + \
-            self.random.multivariate_normal((0, 0, 0), self.R, size=self.nparticles)   
-        self.x[:, 2] = base.angdiff(self.x[:, 2])
-
+        self.x = self.robot.f(self.x, odo) + self.random.multivariate_normal(
+            (0, 0, 0), self.R, size=self.nparticles
+        )
+        self.x[:, 2] = smb.angdiff(self.x[:, 2])
 
     def _observe(self, z, lm_id):
         # step 3
         # predict observation and score the particles
-        
+
         # Straightforward code:
         #
         # for p = 1:self.nparticles
         #    # what do we expect observation to be for this particle?
         #    # use the sensor model h(.)
         #    z_pred = self.sensor.h( self.x(p,:), lm_id)
-        #    
+        #
         #    # how different is it
         #    innov[0] = z[0] - z_pred[0]
         #    innov[1] = angdiff(z[1], z_pred[1])
-        #    
+        #
         #    # get likelihood (new importance). Assume Gaussian but any PDF works!
         #    # If predicted obs is very different from actual obs this score will be low
         #    #  ie. this particle is not very good at predicting the observation.
         #    # A lower score means it is less likely to be selected for the next generation...
         #    # The weight is never zero.
         #    self.weight(p) = exp(-0.5*innov'*inv(self.L)*innov) + 0.05
         # end
         #
         # Vectorized code:
 
         invL = np.linalg.inv(self.L)
         z_pred = self.sensor.h(self.x, lm_id)
         z_pred[:, 0] = z[0] - z_pred[:, 0]
-        z_pred[:, 1] = base.angdiff(z[1], z_pred[:, 1])
-
-        LL = -0.5 * np.r_[invL[0,0], invL[1,1], 2*invL[0,1]]
-        e = np.c_[z_pred[:, 0]**2, z_pred[:, 1]**2, z_pred[:,0] * z_pred[:, 1]] @ LL
-        self.weight = np.exp(e) + self.w0  
-
+        z_pred[:, 1] = smb.angdiff(z[1], z_pred[:, 1])
 
+        LL = -0.5 * np.r_[invL[0, 0], invL[1, 1], 2 * invL[0, 1]]
+        e = (
+            np.c_[z_pred[:, 0] ** 2, z_pred[:, 1] ** 2, z_pred[:, 0] * z_pred[:, 1]]
+            @ LL
+        )
+        self.weight = np.exp(e) + self.w0
 
     def _select(self):
         # step 4
         # select particles based on their weights
-        #       
+        #
         # particles with large weights will occupy a greater percentage of the
         # y axis in a cummulative plot
         cdf = np.cumsum(self.weight) / self.weight.sum()
 
         # so randomly (uniform) choosing y values is more likely to correspond to
         # better particles...
-        iselect  = self.random.uniform(0, 1, size=(self.nparticles,))
+        iselect = self.random.uniform(0, 1, size=(self.nparticles,))
 
         # find the particle that corresponds to each y value (just a look up)
-        interpfun = sp.interpolate.interp1d(cdf, np.arange(self.nparticles), 
-                assume_sorted=True, kind='nearest', fill_value='extrapolate')
-        inextgen = interpfun(iselect).astype(np.int)
+        interpfun = sp.interpolate.interp1d(
+            cdf,
+            np.arange(self.nparticles),
+            assume_sorted=True,
+            kind="nearest",
+            fill_value="extrapolate",
+        )
+        inextgen = interpfun(iselect).astype(int)
 
         # copy selected particles for next generation..
         self.x = self.x[inextgen, :]
 
     def get_t(self):
         """
         Get time from simulation
@@ -497,23 +668,39 @@
         Return the standard deviation :math:`(\sigma_x, \sigma_y)` of the
         particle cloud at each time step.
 
         :seealso: :meth:`get_xyt`
         """
         return np.array([h.std for h in self._history])
 
-    def plot_xy(self, block=False, **kwargs):
+    def plot_xy(self, block=None, **kwargs):
         r"""
         Plot estimated vehicle position
 
         :param args: position arguments passed to :meth:`~matplotlib.axes.Axes.plot`
         :param kwargs: keywords arguments passed to :meth:`~matplotlib.axes.Axes.plot`
-        :param block: hold plot until figure is closed, defaults to False
+        :param block: hold plot until figure is closed, defaults to None
         :type block: bool, optional
 
         Plot the estimated vehicle path in the xy-plane.
 
         :seealso: :meth:`get_xy`
         """
         xyt = self.get_xyt()
         plt.plot(xyt[:, 0], xyt[:, 1], **kwargs)
-        # plt.show(block=block)
+        if block is not None:
+            plt.show(block=block)
+
+
+if __name__ == "__main__":
+    from roboticstoolbox import *
+
+    map = LandmarkMap(20, workspace=10)
+    V = np.diag([0.02, np.deg2rad(0.5)]) ** 2
+    robot = Bicycle(covar=V, animation="car", workspace=map)
+    robot.control = RandomPath(workspace=map)
+    W = np.diag([0.1, np.deg2rad(1)]) ** 2
+    sensor = RangeBearingSensor(robot, map, covar=W, plot=True)
+    R = np.diag([0.1, 0.1, np.deg2rad(1)]) ** 2
+    L = np.diag([0.1, 0.1])
+    pf = ParticleFilter(robot, sensor=sensor, R=R, L=L, nparticles=1000, animate=True)
+    pf.run(T=10)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/PlannerBase.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/PlannerBase.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,14 +6,16 @@
 
 from abc import ABC
 
 # from scipy import integrate
 # from scipy.ndimage import interpolation
 from spatialmath.base.transforms2d import *
 from spatialmath.base.vectors import *
+from spatialmath.base.argcheck import getvector
+from spatialmath.base.graphics import axes_logic, plotvol2, axes_get_scale
 
 # from spatialmath import SE2, SE3
 from matplotlib import cm
 from abc import ABC
 import matplotlib as mpl
 import matplotlib.pyplot as plt
 import copy
@@ -119,16 +121,16 @@
         """
         Compact representation of the planner
 
         :return: pretty printed representation
         :rtype: str
         """
         s = f"{self.__class__.__name__}: "
-        if self._occgrid0 is not None:
-            s += "\n  " + str(self.occgrid)
+        if hasattr(self, "_occgrid") and self._occgrid is not None:
+            s += "\n  " + str(self._occgrid)
         if self._start is not None:
             s += f"\n  Start: {self.start}"
         if self._goal is not None:
             s += f"\n  Goal: {self.goal}"
         return s
 
     def __repr__(self):
@@ -151,15 +153,15 @@
         return self._start
 
     @start.setter
     def start(self, start):
         if start is not None:
             if self.isoccupied(start):
                 raise ValueError("Start location inside obstacle")
-            self._start = base.getvector(start)
+            self._start = getvector(start)
 
     @property
     def goal(self):
         r"""
         Set/get goal point or configuration (superclass)
 
         :getter: Return goal pointor configuration
@@ -181,15 +183,15 @@
         :param goal: Set goal :math:`(x, y)` or configuration :math:`(x, y, \theta)`
         :type goal: array_like(2) or array_like(3)
         :raises ValueError: if goal point is occupied
         """
         if goal is not None:
             if self.isoccupied(goal):
                 raise ValueError("Goal location inside obstacle")
-            self._goal = base.getvector(goal)
+            self._goal = getvector(goal)
 
     @property
     def verbose(self):
         """
         Get verbosity
 
         :return: verbosity
@@ -319,15 +321,15 @@
         :rtype: ndarray(2)
 
         The coordinate is tested to be a free cell in the occupancy grid.
 
         :seealso: :meth:`isoccupied` :meth:`occgrid`
         """
         if p is not None:
-            p = base.getvector(p, self._ndims, dtype=dtype)
+            p = getvector(p, self._ndims, dtype=dtype)
             if self.isoccupied(p):
                 raise ValueError("Point is inside obstacle")
         return p
 
     def progress_start(self, n):
         """
         Initialize a progress bar (superclass)
@@ -470,15 +472,15 @@
         start_marker=None,
         goal_marker=None,
         start_vehicle=None,
         goal_vehicle=None,
         start=None,
         goal=None,
         ax=None,
-        block=False,
+        block=None,
         bgargs={},
         **unused,
     ):
         r"""
         Plot vehicle path (superclass)
 
         :param path: path, defaults to None
@@ -581,15 +583,14 @@
 
         will draw a blackline of width 4 with a dashed yellow line of width 3
         plotted on top, giving a line of alternating black and yellow dashes.
 
         :seealso: :meth:`plot_bg` :func:`base.plot_poly`
         """
         # create default markers
-
         # passed to Matplotlib plot()
         if start_marker is None:
             start_marker = {
                 "marker": "o",
                 "markeredgecolor": "k",
                 "markerfacecolor": "y",
                 "markersize": 10,
@@ -631,15 +632,15 @@
             ndims = 2
             if path is not None:
                 path = path[:, :2]
 
         if configspace and ndims < 3 and path is not None:
             raise ValueError(f"path should have {ndims} rows")
 
-        ax = base.axes_logic(ax, ndims)
+        ax = axes_logic(ax, ndims)
 
         # plot occupancy grid background
         if background:
             self.plot_bg(ax=ax, **bgargs)
 
         # mark the path
         if path is not None:
@@ -730,15 +731,15 @@
             if start is not None:
                 ax.plot(start[0], start[1], label="start", **start_marker)
             if goal is not None:
                 ax.plot(goal[0], goal[1], label="goal", **goal_marker)
 
         elif ndims == 2 and self._ndims == 3:
             # 2d projection of 3d plot, show start/goal configuration
-            scale = base.axes_get_scale(ax) / 10
+            scale = axes_get_scale(ax) / 10
 
             if self.marker is None:
                 self.marker = VehiclePolygon(shape="car", scale=scale)
 
             if start is not None:
                 self.marker.plot(start, **start_vehicle)
             if goal is not None:
@@ -760,15 +761,16 @@
         ax.set_xlabel("x")
         ax.set_ylabel("y")
         if ndims == 2:
             ax.set_aspect("equal")
         else:
             ax.set_zlabel(r"$\theta$")
 
-        plt.show(block=block)
+        if block:
+            plt.show(block=block)
 
         return ax
 
     def _qmarker(self, shape):
         h = 0.3
         t = 0.8  # start of head taper
         c = 0.5  # centre x coordinate
@@ -796,14 +798,15 @@
     def plot_bg(
         self,
         distance=None,
         cmap="gray",
         ax=None,
         inflated=True,
         colorbar=True,
+        block=None,
         **unused,
     ):
         """
         Plot background (superclass)
 
         :param distance: override distance field, defaults to None
         :type distance: ndarray(N,M), optional
@@ -823,17 +826,17 @@
         the the distance field will be used as the background and obstacle cells
         (actual or inflated) will be shown in red. A colorbar is added.
         """
         if self._occgrid is None:
             return
 
         if isinstance(self._occgrid, BaseOccupancyGrid):
-            ax = base.plotvol2(dim=self._occgrid.workspace, ax=ax)
+            ax = plotvol2(dim=self._occgrid.workspace, ax=ax)
         else:
-            ax = base.axes_logic(ax, 2)
+            ax = axes_logic(ax, 2)
 
         # create color map for free space + obstacle:
         #   free space, color index = 1, white, alpha=0 to allow background and grid lines to show
         #   obstacle, color index = 2, red, alpha=1
 
         if self._inflate > 0 and inflated:
             # 0 background (white, transparent)
@@ -878,16 +881,16 @@
             ax.grid(True, alpha=0.1, color=(1, 1, 1))
 
             # add colorbar
             scalar_mappable_c_map = cm.ScalarMappable(cmap=c_map, norm=norm)
             if colorbar is True:
                 plt.colorbar(
                     scalar_mappable_c_map,
-                    shrink=0.75,
-                    aspect=20 * 0.75,
+                    # shrink=0.75,
+                    # aspect=20 * 0.75,
                     label="Distance",
                 )
 
             elif isinstance(colorbar, dict):
                 if "label" not in colorbar:
                     colorbar["label"] = "Distance"
                 plt.colorbar(scalar_mappable_c_map, **colorbar)
@@ -897,27 +900,28 @@
 
         else:
             # occupancy grid only
 
             # overlay obstacles
             c_map = mpl.colors.ListedColormap(colors)
             # self.occgrid.plot(image, cmap=c_map, zorder=1)
-            self.occgrid.plot(cmap=c_map, zorder=1)
+            self.occgrid.plot(cmap=c_map, zorder=1, ax=ax)
 
         ax.set_facecolor((1, 1, 1))  # create white background
         ax.set_xlabel("x (cells)")
         ax.set_ylabel("y (cells)")
         ax.grid(True, zorder=0)
 
         # lock axis limits to current value
         # ax.set_xlim(ax.get_xlim())
         # ax.set_ylim(ax.get_ylim())
 
-        plt.draw()
-        plt.show(block=False)
+        # plt.draw()
+        if block is not None:
+            plt.show(block=block)
 
     def message(self, s, color=None):
         """
         Print message to message channel
 
         :param s: message to print
         :type s: str
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/PoseGraph.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/PoseGraph.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,56 +1,68 @@
-#PoseGraph Pose graph 
+# PoseGraph Pose graph
 
 import roboticstoolbox as rtb
 import pgraph
-from spatialmath import base, SE2
+from spatialmath import SE2
+import spatialmath.base as smb
 import matplotlib.pyplot as plt
 import numpy as np
 import scipy as sp
 import zipfile
 import time
 import math
 from pathlib import Path
 from progress.bar import FillingCirclesBar
+
+
 class PGVertex(pgraph.UVertex):
 
-    nvertices = 0
+    nvertices = 0  # reset this before each PGGraph build
 
     def __init__(self, type, **kwargs):
         super().__init__(**kwargs)
         self.type = type
         self.index = PGVertex.nvertices
         PGVertex.nvertices += 1
+
+
 class PGEdge(pgraph.Edge):
     def __init__(self, v1, v2, mean, info):
         super().__init__(v1, v2)
         self.mean = mean
         self.info = info
 
+    # The following method was inspired by, and modeled on, the MATLAB/Octave file
+    # ls-slam.m by Giorgio Grisetti and Gian Diego Tipaldi.
+    #
+    # The theory is covered in:
+    #  G. Grisetti, R. Kmmerle, C. Stachniss and W. Burgard,
+    #  "A Tutorial on Graph-Based SLAM, in IEEE Intelligent Transportation Systems Magazine,
+    #  vol. 2, no. 4, pp. 31-43, winter 2010, doi: 10.1109/MITS.2010.939925.
+
     def linear_factors(self):
-        #computes the Taylor expansion of the error function of the k_th edge
-        #vmeans: vertices positions
-        #eids:   edge ids
-        #emeans: edge means
+        # computes the Taylor expansion of the error function of the k_th edge
+        # v: vertices positions
+        # z: edge means
         #  k:	 edge number
         #  e:	 e_k(x)
         #  A:	 d e_k(x) / d(x_i)
         #  B:	 d e_k(x) / d(x_j)
-        v =  self.endpoints
-        v_i =  v[0].coord
-        v_j =  v[1].coord
-        z_ij =  self.mean
+        v = self.endpoints
+        v_i = v[0].coord
+        v_j = v[1].coord
+        z_ij = self.mean
 
         # compute the homoeneous transforms of the previous solutions
-        zt_ij = base.trot2(z_ij[2], t=z_ij[0:2])
-        vt_i = base.trot2(v_i[2], t=v_i[0:2])
-        vt_j = base.trot2(v_j[2], t=v_j[0:2])
+        zt_ij = smb.trot2(z_ij[2], t=z_ij[0:2])
+        vt_i = smb.trot2(v_i[2], t=v_i[0:2])
+        vt_j = smb.trot2(v_j[2], t=v_j[0:2])
 
         # compute the displacement between x_i and x_j
-        f_ij = base.trinv2(vt_i) @ vt_j
+        f_ij = smb.trinv2(vt_i) @ vt_j
 
         # this below is too long to explain, to understand it derive it by hand
         theta_i = v_i[2]
         ti = v_i[0:2]
         tj = v_j[0:2]
         dt_ij = tj - ti
 
@@ -65,156 +77,178 @@
                 ])
         B  = np.array([
             [  ci, si, 0],
             [ -si, ci, 0],
             [  0,  0,  1 ],
                 ])
         # fmt: on
-        ztinv = base.trinv2(zt_ij)
+        ztinv = smb.trinv2(zt_ij)
         T = ztinv @ f_ij
-        e = base.tr2xyt(T)
-        ztinv[0:2,2] =  0
+        e = smb.tr2xyt(T)
+        ztinv[0:2, 2] = 0
         A = ztinv @ A
         B = ztinv @ B
 
-        return e, A, B 
+        return e, A, B
+
 
 class PoseGraph:
-    
+
     # properties
     #     graph
-        
+
     #     ngrid
     #     center
     #     cellsize
 
     def __init__(self, filename, lidar=False, verbose=False):
+        """
+        Pose graph optimization for SLAM
+
+        :param filename: name of file to load, G2O or TORO format, can be zipped
+        :type filename: str
+        :param lidar: process lidar data, defaults to False
+        :type lidar: bool, optional
+        :param verbose: show details of processing, defaults to False
+        :type verbose: bool, optional
+        :raises RuntimeError: file syntax error
+
+        :references:
+
+            - Robotics, Vision & Control for Python, 6.5, P. Corke, Springer 2023.
+            - A Tutorial on Graph-Based SLAM,
+              G. Grisetti, R. Kmmerle, C. Stachniss and W. Burgard,
+              in IEEE Intelligent Transportation Systems Magazine,
+              vol. 2, no. 4, pp. 31-43, winter 2010, doi: 10.1109/MITS.2010.939925.
+        """
+
         # parse the file data
         # we assume g2o format
         #    VERTEX* vertex_id X Y THETA
         #    EDGE* startvertex_id endvertex_id X Y THETA IXX IXY IYY IXT IYT ITT
         # vertex numbers start at 0
-        
+
         self.lidar = lidar
-        
+
         self.graph = pgraph.UGraph(verbose=verbose)
 
         path = Path(rtb.rtb_path_to_datafile(filename))
 
-        if path.suffix == '.zip':
-            zf = zipfile.ZipFile(path, 'r')
+        if path.suffix == ".zip":
+            zf = zipfile.ZipFile(path, "r")
             opener = zf.open
             path = path.stem
         else:
             opener = open
 
-        with opener(path, 'r') as f:
+        with opener(path, "r") as f:
 
             toroformat = False
             nlidar = 0
-            
+
             # indices into ROBOTLASER1 record for the 3x3 info matrix in column major
             # order
             # IXX IXY IXT IYY IYT ITT
             #   6   7   8   9  10  11
             #   0   1   2   3   4   5
-            g2o =  [0,  1,  2,  1,  3,  4,   2,  4,  5]
+            g2o = [0, 1, 2, 1, 3, 4, 2, 4, 5]
             # IXX IXY IYY ITT IXT IYT
             #   6   7   8   9  10  11
             #   0   1   2   3   4   5
-            toro = [0,  1,  4,  1,  2,  5,  4,  5,  3]
-            
+            toro = [0, 1, 4, 1, 2, 5, 4, 5, 3]
+
             # we keep an array self. = vindex(gi) to map g2o vertex index to PGraph vertex index
-            
+
             self.vindex = {}
             firstlidar = True
+            PGVertex.nvertices = 0  # reset vertex counter in PGVertex class
             for line in f:
                 # for zip file, we get data as bytes not str
                 if isinstance(line, bytes):
                     line = line.decode()
-                
+
                 # is it a comment?
-                if line.startswith('#'):
+                if line.startswith("#"):
                     continue
-                
+
                 tokens = line.split()
-                
+
                 # g2o format records
-                if tokens[0] == 'VERTEX_SE2':
+                if tokens[0] == "VERTEX_SE2":
                     coord = np.array([float(x) for x in tokens[2:5]])
                     id = tokens[1]
 
-                    v = PGVertex('vertex', coord=coord, name=id)
+                    v = PGVertex("vertex", coord=coord, name=id)
                     self.graph.add_vertex(v)
 
-                elif tokens[0] ==  'VERTEX_XY':
+                elif tokens[0] == "VERTEX_XY":
                     coord = np.array([float(x) for x in tokens[2:4]])
                     id = tokens[1]
 
-                    v = PGVertex('landmark', coord=coord, name=id)
+                    v = PGVertex("landmark", coord=coord, name=id)
                     self.graph.add_vertex(v)
-                        
-                elif tokens[0] ==  'EDGE_SE2':                    
+
+                elif tokens[0] == "EDGE_SE2":
                     v1 = tokens[1]
                     v2 = tokens[2]
 
                     # create the edge data as a structure
                     #  X  Y  T
                     #  3  4  5
                     mean = np.array([float(x) for x in tokens[3:6]])
-                    
+
                     # IXX IXY IXT IYY IYT ITT
                     #   6   7   8   9  10  11
                     d = np.array([float(x) for x in tokens[6:12]])
-                    info = d[g2o].reshape((3,3))
+                    info = d[g2o].reshape((3, 3))
 
                     # create the edge
                     v1 = self.graph[v1]
                     v2 = self.graph[v2]
                     e = PGEdge(v1, v2, mean, info)
                     v1.connect(v2, edge=e)
 
                 ## TORO format records
                 # https://openslam-org.github.io/toro.html
-                elif tokens[0] == 'VERTEX2':
+                elif tokens[0] == "VERTEX2":
                     toroformat = True
 
                     coord = np.array([float(x) for x in tokens[2:5]])
                     id = tokens[1]
 
-                    v = PGVertex('vertex', coord=coord, name=id)
+                    v = PGVertex("vertex", coord=coord, name=id)
                     self.graph.add_vertex(v)
-                        
-                elif tokens[0] == 'EDGE2':
+
+                elif tokens[0] == "EDGE2":
                     toroformat = True
-                    
+
                     v1 = tokens[1]
                     v2 = tokens[2]
 
                     # create the edge data as a structure
                     #  X  Y  T
                     #  3  4  5
                     mean = np.array([float(x) for x in tokens[3:6]])
-                    
+
                     # IXX IXY IYY ITT IXT IYT
                     #   6   7   8   9  10  11
                     d = np.array([float(x) for x in tokens[6:12]])
-                    info = d[toro].reshape((3,3))
+                    info = d[toro].reshape((3, 3))
 
                     # create the edge
                     v1 = self.graph[v1]
                     v2 = self.graph[v2]
                     e = PGEdge(v1, v2, mean, info)
                     v1.connect(v2, edge=e)
-                        
-                elif tokens[0] == 'ROBOTLASER1':
+
+                elif tokens[0] == "ROBOTLASER1":
                     if not lidar:
                         continue
-                    
-                    # lidar records are associated with the immediately 
+
+                    # lidar records are associated with the immediately
                     # preceding VERTEX record
                     #
                     # not quite sure what all the fields are
                     # 1 ?
                     # 2 min scan angle
                     # 3 scan range
                     # 4 angular increment
@@ -222,334 +256,284 @@
                     # ?
                     # 8 N = number of beams
                     # 9 to 9+N lidar range data
                     # ?
                     # 9+N+12 timestamp (*nix timestamp)
                     # 9+N+13 lidar type (str)
 
-
                     if firstlidar:
                         nbeams = int(tokens[8])
                         lidarmeta = tokens[2:6]
                         firstlidar = False
 
                     # add attributes to the most recent vertex created
                     v.theta = np.arange(0, nbeams) * float(tokens[4]) + float(tokens[2])
-                    v.range = np.array([float(x) for x in tokens[9:nbeams+9]])
-                    v.time = float(tokens[21+nbeams])
+                    v.range = np.array([float(x) for x in tokens[9 : nbeams + 9]])
+                    v.time = float(tokens[21 + nbeams])
                     self.vindex[v.index] = v
-                    nlidar+= 1
+                    nlidar += 1
                 else:
                     raise RuntimeError(f"Unexpected line  {line} in {filename}")
 
             if toroformat:
                 filetype = "TORO/LAGO"
             else:
                 filetype = "g2o"
-            print(f"loaded {filetype} format file: {self.graph.n} vertices, {self.graph.ne} edges")
-            
+            print(
+                f"loaded {filetype} format file: {self.graph.n} vertices,"
+                f" {self.graph.ne} edges"
+            )
+
             if nlidar > 0:
                 lidarmeta = [float(x) for x in lidarmeta]
-                
+
                 self._angmin = lidarmeta[0]
                 self._angmax = sum(lidarmeta[0:2])
                 self._maxrange = lidarmeta[3]
 
                 fov = np.degrees([self._angmin, self._angmax])
-                print(f"  {nlidar} lidar scans: {nbeams} beams, fov {fov[0]:.1f} to {fov[1]:.1f}, max range {self._maxrange}")
+                print(
+                    f"  {nlidar} lidar scans: {nbeams} beams, fov {fov[0]:.1f} to"
+                    f" {fov[1]:.1f}, max range {self._maxrange}"
+                )
 
-    
     def scan(self, i):
         v = self.vindex[i]
         return v.range, v.theta
-    
+
     def scanxy(self, i):
-        
+
         range, theta = self.scan(i)
         range = np.where(range < self._maxrange, range, np.nan)
         x = range * np.cos(theta)
         y = range * np.sin(theta)
 
-
         return np.c_[x, y].T
-    
+
     def plot_scan(self, n):
-        n = base.getvector(n)
+        n = smb.getvector(n)
         for i in n:
             x, y = self.scanxy(i)
-            plt.plot(x, y, '.', 'MarkerSize', 10)
+            plt.plot(x, y, ".", "MarkerSize", 10)
             plt.pause(1)
 
     def pose(self, i):
         return self.vindex[i].coord
-    
+
     def time(self, i):
         return self.vindex[i].time
-    
+
     def plot(self, **kwargs):
-        if not 'vopt' in kwargs:
-            kwargs['vopt'] = dict(markersize=8, markerfacecolor='blue', markeredgecolor='None')
-        if not 'eopt' in kwargs:
-            kwargs['eopt'] = dict(linewidth=1)
+        if not "vopt" in kwargs:
+            kwargs["vopt"] = dict(
+                markersize=8, markerfacecolor="blue", markeredgecolor="None"
+            )
+        if not "eopt" in kwargs:
+            kwargs["eopt"] = dict(linewidth=1)
         self.graph.plot(colorcomponents=False, force2d=True, **kwargs)
-        plt.xlabel('x')
-        plt.ylabel('y')
+        plt.xlabel("x")
+        plt.ylabel("y")
         plt.grid(True)
 
     def scanmatch(self, s1, s2):
         p1 = self.scanxy(s1)
         p2 = self.scanxy(s2)
-        T = base.ICP2d(p1, p2)
+        T = smb.ICP2d(p1, p2)
         return SE2(T)
-    
+
     def scanmap(self, occgrid, maxrange=None):
         # note about maxrange timing
 
-        bar = FillingCirclesBar('Converting', max=self.graph.n, 
-            suffix = '%(percent).1f%% - %(eta)ds')
+        bar = FillingCirclesBar(
+            "Converting", max=self.graph.n, suffix="%(percent).1f%% - %(eta)ds"
+        )
 
         grid1d = occgrid.ravel
         for i in range(0, self.graph.n, 5):
-            
+
             xy = self.scanxy(i)
             r, theta = self.scan(i)
             if maxrange is not None:
                 toofar = np.where(r > maxrange)[0]
                 xy = np.delete(xy, toofar, axis=1)
             xyt = self.vindex[i].coord
-            
+
             xy = SE2(xyt) * xy
-            
+
             # start of each ray
             p1 = occgrid.w2g(xyt[:2])
-            
+
             for p2 in occgrid.w2g(xy.T):
 
                 # all cells along the ray
                 try:
                     k = occgrid._line(p1, p2)
                 except ValueError:
                     # silently ignore rays to points outside the grid map
                     continue
-                
+
                 # increment cells along the ray, these are free space
                 grid1d[k[:-1]] += 1
                 # decrement target cell
                 grid1d[k[-1]] -= 1
 
             bar.next()
 
         grid1d[grid1d < 0] = -1
         grid1d[grid1d > 0] = 1
         bar.finish()
-    
+
     def w2g(self, w):
         return np.round((w - self._centre) / self._cellsize) + self._ngrid / 2
 
     def g2w(self, g):
-        return ( np.r_[g] - self._ngrid / 2) * self._cellsize + self._centre
+        return (np.r_[g] - self._ngrid / 2) * self._cellsize + self._centre
+
+    def plot_occgrid(self, w, block=None):
 
-    def plot_occgrid(self, w, block=True):
-        
-        bl = self.g2w([0,0])
+        bl = self.g2w([0, 0])
         tr = self.g2w([w.shape[1], w.shape[0]])
 
         w = np.where(w < 0, -1, w)  # free cells are -1
-        w = np.where(w > 0, 1, w)   # occupied cells are +1
-        w = -w 
+        w = np.where(w > 0, 1, w)  # occupied cells are +1
+        w = -w
 
         # plot it
-        plt.imshow(w, cmap='gray', extent=[bl[0], tr[0], bl[1], tr[1]])
-        plt.xlabel('x')
-        plt.ylabel('y')
-        plt.show(block=block)
-
-    
-#   This source code is part of the graph optimization package
-#   deveoped for the lectures of robotics2 at the University of Freiburg.
-#
-#     Copyright (c) 2007 Giorgio Grisetti, Gian Diego Tipaldi
-#
-#   It is licences under the Common Creative License,
-#   Attribution-NonCommercial-ShareAlike 3.0
-#
-#   You are free:
-#     - to Share - to copy, distribute and transmit the work
-#     - to Remix - to adapt the work
-#
-#   Under the following conditions:
-#
-#     - Attribution. You must attribute the work in the manner specified
-#       by the author or licensor (but not in any way that suggests that
-#       they endorse you or your use of the work).
-#
-#     - Noncommercial. You may not use this work for commercial purposes.
-#
-#     - Share Alike. If you alter, transform, or build upon this work,
-#       you may distribute the resulting work only under the same or
-#       similar license to this one.
-#
-#   Any of the above conditions can be waived if you get permission
-#   from the copyright holder.  Nothing in this license impairs or
-#   restricts the author's moral rights.
-#
-#   This software is distributed in the hope that it will be useful,
-#   but WITHOUT ANY WARRANTY; without even the implied
-#   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
-#   PURPOSE.
-    
-    
-# ls-slam.m
-# this file is released under the creative common license
-
-# solves a graph-based slam problem via least squares
-# vmeans: matrix containing the column vectors of the poses of the vertices
-# 	 the vertices are odrered such that vmeans[i] corresponds to the ith id
-# eids:	 matrix containing the column vectors [idFrom, idTo]' of the ids of the vertices
-# 	 eids[k] corresponds to emeans[k] and einfs[k].
-# emeans: matrix containing the column vectors of the poses of the edges
-# einfs:  3d matrix containing the information matrices of the edges
-# 	 einfs(:,:,k) refers to the information matrix of the k-th edge.
-# n:	 number of iterations
-# newmeans: matrix containing the column vectors of the updated vertices positions
-    
-    def optimize(self, iterations = 10, animate = False, retain = False, **kwargs):
-        
-        eprev  =  math.inf
+        plt.imshow(w, cmap="gray", extent=[bl[0], tr[0], bl[1], tr[1]])
+        plt.xlabel("x")
+        plt.ylabel("y")
+
+        if block is not None:
+            plt.show(block=block)
+
+    # The following methods were inspired by, and modeled on, the MATLAB/Octave file
+    # ls-slam.m by Giorgio Grisetti and Gian Diego Tipaldi.
+    #
+    # The theory is covered in:
+    #  G. Grisetti, R. Kmmerle, C. Stachniss and W. Burgard,
+    #  "A Tutorial on Graph-Based SLAM, in IEEE Intelligent Transportation Systems Magazine,
+    #  vol. 2, no. 4, pp. 31-43, winter 2010, doi: 10.1109/MITS.2010.939925.
+
+    def optimize(self, iterations=10, animate=False, retain=True, **kwargs):
+
+        eprev = math.inf
+        eo = {}
 
         if animate and retain:
             colors = plt.cm.Greys(np.linspace(0.3, 1, iterations))
-            if 'eopt' in kwargs:
-                eo = kwargs['eopt']
-                kwargs = {k: v for (k, v) in kwargs.items() if k != 'eopt'}
-            else:
-                eo = {}
+            if "eopt" in kwargs:
+                eo = kwargs["eopt"]
+                kwargs = {k: v for (k, v) in kwargs.items() if k != "eopt"}
+            # else:
+            #     eo = {}
 
         for i in range(iterations):
             if animate:
+                if retain:
+                    if i == 0:
+                        ax = smb.axes_logic(None, 2)
+                else:
+                    ax = smb.axes_logic(None, 2, new=True)
+
                 if not retain:
-                    plt.clf()
                     eopt = eo
                 else:
                     eopt = {**eo, **dict(color=tuple(colors[i, :]), label=i)}
-                self.graph.plot(eopt=eopt, force2d=True, colorcomponents=False, **kwargs)
+                self.graph.plot(
+                    eopt=eopt, force2d=True, colorcomponents=False, ax=ax, **kwargs
+                )
                 plt.pause(0.5)
-            
+
             energy = self.linearize_and_solve()
-            
+
             if energy >= eprev:
                 break
             eprev = energy
 
-    # linearizes and solves one time the ls-slam problem specified by the input
-    # vmeans:   vertices positions at the linearization point
-    # eids:     edge ids
-    # emeans:   edge means
-    # einfs:    edge information matrices
-    # newmeans: new solution computed from the initial guess in vmeans
     def linearize_and_solve(self):
-        t0  =  time.time()
+        t0 = time.time()
 
         g = self.graph
-        
+
         # H and b are respectively the system matrix and the system vector
         H = np.zeros((g.n * 3, g.n * 3))
         b = np.zeros((g.n * 3, 1))
         # this loop constructs the global system by accumulating in H and b the contributions
         # of all edges (see lecture)
-        
+
         etotal = 0
-        for edge  in g.edges():
+        for edge in g.edges():
             e, A, B = edge.linear_factors()
-            omega  =  edge.info
+            omega = edge.info
 
             # compute the blocks of H^k
-            bi  = -A.T @ omega @ e
-            bj  = -B.T @ omega @ e
-            Hii =  A.T @ omega @ A
-            Hij =  A.T @ omega @ B
-            Hjj =  B.T @ omega @ B
-            
+            bi = -A.T @ omega @ e
+            bj = -B.T @ omega @ e
+            Hii = A.T @ omega @ A
+            Hij = A.T @ omega @ B
+            Hjj = B.T @ omega @ B
+
             v = edge.endpoints
             i = v[0].index
             j = v[1].index
 
-            islice = slice(i*3, (i+1)*3)
-            jslice = slice(j*3, (j+1)*3)
+            islice = slice(i * 3, (i + 1) * 3)
+            jslice = slice(j * 3, (j + 1) * 3)
 
             # accumulate the blocks in H and b
-            H[islice, islice] += Hii
-            H[jslice, jslice] += Hjj
-            H[islice, jslice] += Hij
-            H[jslice, islice] += Hij.T
-
-            b[islice,0] += bi
-            b[jslice,0] += bj
+            try:
+                H[islice, islice] += Hii
+                H[jslice, jslice] += Hjj
+                H[islice, jslice] += Hij
+                H[jslice, islice] += Hij.T
+
+                b[islice, 0] += bi
+                b[jslice, 0] += bj
+            except ValueError:
+                print("linearize_and_solve failed")
+                print(v)
+                print(H.shape, b.shape, Hii.shape, Hjj.shape, Hij.shape)
+                print(islice, jslice)
 
             etotal += np.inner(e, e)
 
         # note that the system (H b) is obtained only from
         # relative constraints. H is not full rank.
         # we solve the problem by anchoring the position of
         # the the first vertex.
         # this can be expressed by adding the equation
         #  deltax(1:3,1) = 0
         # which is equivalent to the following
 
         H[0:3, 0:3] += np.eye(3)
-        
+
         SH = sp.sparse.csr_matrix(H)
         deltax = sp.sparse.linalg.spsolve(SH, b)  # SH \ b
-        
+
         # split the increments in nice 3x1 vectors and sum them up to the original matrix
         for vertex in g:
             i = vertex.index * 3
-            vertex.coord += deltax[i: i+3]
+            vertex.coord += deltax[i : i + 3]
             # normalize the angles between -PI and PI
-            vertex.coord[2] = base.angdiff(vertex.coord[2])
+            vertex.coord[2] = smb.angdiff(vertex.coord[2])
 
-        dt  =  time.time() - t0
+        dt = time.time() - t0
         print(f"done in {dt*1e3:0.2f} msec.  Total cost {etotal:g}")
 
         return etotal
 
-    #   This source code is part of the graph optimization package
-    #   deveoped for the lectures of robotics2 at the University of Freiburg.
-    #
-    #     Copyright (c) 2007 Giorgio Grisetti, Gian Diego Tipaldi
-    #
-    #   It is licences under the Common Creative License,
-    #   Attribution-NonCommercial-ShareAlike 3.0
-    #
-    #   You are free:
-    #     - to Share - to copy, distribute and transmit the work
-    #     - to Remix - to adapt the work
-    #
-    #   Under the following conditions:
-    #
-    #     - Attribution. You must attribute the work in the manner specified
-    #       by the author or licensor (but not in any way that suggests that
-    #       they endorse you or your use of the work).
-    #
-    #     - Noncommercial. You may not use this work for commercial purposes.
-    #
-    #     - Share Alike. If you alter, transform, or build upon this work,
-    #       you may distribute the resulting work only under the same or
-    #       similar license to this one.
-    #
-    #   Any of the above conditions can be waived if you get permission
-    #   from the copyright holder.  Nothing in this license impairs or
-    #   restricts the author's moral rights.
-    #
-    #   This software is distributed in the hope that it will be useful,
-    #   but WITHOUT ANY WARRANTY; without even the implied
-    #   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
-    #   PURPOSE.
-
 
 if __name__ == "__main__":
 
-    scan = PoseGraph('killian.g2o', lidar=True, verbose=False)
-    print(scan.graph.nc)
-    # scan.plot()
-    w = scan.scanmap(maxrange=40)
-    scan.plot_occgrid(w)
+    pg = PoseGraph("data/pg1.g2o")
+    pg.optimize(animate=True, retain=False)
+
+    plt.show(block=True)
+
+    # pg = PoseGraph("data/killian-small.toro");
+    # pg.optimize()
+
+    # scan = PoseGraph("killian.g2o", lidar=True, verbose=False)
+    # print(scan.graph.nc)
+    # # scan.plot()
+    # w = scan.scanmap(maxrange=40)
+    # scan.plot_occgrid(w)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/QuinticPolyPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/QuinticPolyPlanner.py`

 * *Files 9% similar despite different names*

```diff
@@ -11,63 +11,89 @@
 show_animation = True
 
 # ======================================================================== #
 
 # The following code is modified from Python Robotics
 # https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning
 # Quintic Polynomial Planner
-# Author: Atsushi Sakai 
+# Author: Atsushi Sakai
 # Copyright (c) 2016 - 2022 Atsushi Sakai and other contributors: https://github.com/AtsushiSakai/PythonRobotics/contributors
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 
-class _QuinticPolynomial:
 
+class _QuinticPolynomial:
     def __init__(self, xs, vxs, axs, xe, vxe, axe, time):
         # calc coefficient of quintic polynomial
         # See jupyter notebook document for derivation of this equation.
         self.a0 = xs
         self.a1 = vxs
         self.a2 = axs / 2.0
 
-        A = np.array([[time ** 3, time ** 4, time ** 5],
-                      [3 * time ** 2, 4 * time ** 3, 5 * time ** 4],
-                      [6 * time, 12 * time ** 2, 20 * time ** 3]])
-        b = np.array([xe - self.a0 - self.a1 * time - self.a2 * time ** 2,
-                      vxe - self.a1 - 2 * self.a2 * time,
-                      axe - 2 * self.a2])
+        A = np.array(
+            [
+                [time**3, time**4, time**5],
+                [3 * time**2, 4 * time**3, 5 * time**4],
+                [6 * time, 12 * time**2, 20 * time**3],
+            ]
+        )
+        b = np.array(
+            [
+                xe - self.a0 - self.a1 * time - self.a2 * time**2,
+                vxe - self.a1 - 2 * self.a2 * time,
+                axe - 2 * self.a2,
+            ]
+        )
         x = np.linalg.solve(A, b)
 
         self.a3 = x[0]
         self.a4 = x[1]
         self.a5 = x[2]
 
     def calc_point(self, t):
-        xt = self.a0 + self.a1 * t + self.a2 * t ** 2 + \
-             self.a3 * t ** 3 + self.a4 * t ** 4 + self.a5 * t ** 5
+        xt = (
+            self.a0
+            + self.a1 * t
+            + self.a2 * t**2
+            + self.a3 * t**3
+            + self.a4 * t**4
+            + self.a5 * t**5
+        )
 
         return xt
 
     def calc_first_derivative(self, t):
-        xt = self.a1 + 2 * self.a2 * t + \
-             3 * self.a3 * t ** 2 + 4 * self.a4 * t ** 3 + 5 * self.a5 * t ** 4
+        xt = (
+            self.a1
+            + 2 * self.a2 * t
+            + 3 * self.a3 * t**2
+            + 4 * self.a4 * t**3
+            + 5 * self.a5 * t**4
+        )
 
         return xt
 
     def calc_second_derivative(self, t):
-        xt = 2 * self.a2 + 6 * self.a3 * t + 12 * self.a4 * t ** 2 + 20 * self.a5 * t ** 3
+        xt = (
+            2 * self.a2
+            + 6 * self.a3 * t
+            + 12 * self.a4 * t**2
+            + 20 * self.a5 * t**3
+        )
 
         return xt
 
     def calc_third_derivative(self, t):
-        xt = 6 * self.a3 + 24 * self.a4 * t + 60 * self.a5 * t ** 2
+        xt = 6 * self.a3 + 24 * self.a4 * t + 60 * self.a5 * t**2
 
         return xt
 
 
-def quintic_polynomials_planner(sx, sy, syaw, sv, sa, gx, gy, gyaw, gv, ga, max_accel, max_jerk, dt, MIN_T, MAX_T):
+def quintic_polynomials_planner(
+    sx, sy, syaw, sv, sa, gx, gy, gyaw, gv, ga, max_accel, max_jerk, dt, MIN_T, MAX_T
+):
     """
     quintic polynomial planner
 
     input
         s_x: start x position [m]
         s_y: start y position [m]
         s_yaw: start yaw angle [rad]
@@ -130,39 +156,43 @@
             jx = xqp.calc_third_derivative(t)
             jy = yqp.calc_third_derivative(t)
             j = np.hypot(jx, jy)
             if len(ra) >= 2 and ra[-1] - ra[-2] < 0.0:
                 j *= -1
             rj.append(j)
 
-        if max([abs(i) for i in ra]) <= max_accel and max([abs(i) for i in rj]) <= max_jerk:
+        if (
+            max([abs(i) for i in ra]) <= max_accel
+            and max([abs(i) for i in rj]) <= max_jerk
+        ):
             print("find path!!")
             break
 
     return time, np.c_[rx, ry, ryaw], rv, ra, rj
 
+
 # ====================== RTB wrapper ============================= #
 
 # Copyright (c) 2022 Peter Corke: https://github.com/petercorke/robotics-toolbox-python
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 class QuinticPolyPlanner(PlannerBase):
     r"""
     Quintic polynomial path planner
 
     :param dt: time step, defaults to 0.1
     :type dt: float, optional
     :param start_vel: initial velocity, defaults to 0
     :type start_vel: float, optional
     :param start_acc: initial acceleration, defaults to 0
     :type start_acc: float, optional
     :param goal_vel: goal velocity, defaults to 0
     :type goal_vel: float, optional
     :param goal_acc: goal acceleration, defaults to 0
     :type goal_acc: float, optional
-    :param max_acc: [description], defaults to 1
+    :param max_acc: maximum acceleration, defaults to 1
     :type max_acc: int, optional
     :param max_jerk: maximum jerk, defaults to 0.5
     :type min_t: float, optional
     :param min_t: minimum path time, defaults to 5
     :type max_t: float, optional
     :param max_t: maximum path time, defaults to 100
     :type max_jerk: float, optional
@@ -183,14 +213,16 @@
     for x and y
 
     .. math::
 
             x(t) &= a_0 + a_1 t + a_2 t^2 + a_3 t^3 + a_4 t^4 + a_5 t^5 \\
             y(t) &= b_0 + b_1 t + b_2 t^2 + b_3 t^3 + b_4 t^4 + b_5 t^5
 
+    that meets the given constraints.  Trajectory time is given as a range.
+    
     :reference: "Local Path Planning And Motion Control For AGV In
         Positioning",  Takahashi, T. Hongo, Y. Ninomiya and G.
         Sugimoto; Proceedings. IEEE/RSJ International Workshop on
         Intelligent Robots and Systems (IROS '89)  doi: 10.1109/IROS.1989.637936
 
     .. note:: The path time is searched in the interval [``min_t``, ``max_t``] in steps
         of ``min_t``.
@@ -208,29 +240,39 @@
         >>> print(path[:5,:])
 
     :thanks: based on quintic polynomial planning from `Python Robotics <https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning>`_
 
 
     :seealso: :class:`Planner`
     """
-    def __init__(self, dt=0.1, start_vel=0, start_acc=0, goal_vel=0, goal_acc=0,
-            max_acc=1, max_jerk=0.5, min_t=5, max_t=100):
+
+    def __init__(
+        self,
+        dt=0.1,
+        start_vel=0,
+        start_acc=0,
+        goal_vel=0,
+        goal_acc=0,
+        max_acc=1,
+        max_jerk=0.5,
+        min_t=5,
+        max_t=100,
+    ):
 
         super().__init__(ndims=3)
         self.dt = dt
         self.start_vel = start_vel
         self.start_acc = start_acc
         self.goal_vel = goal_vel
         self.goal_acc = goal_acc
         self.max_acc = max_acc
         self.max_jerk = max_jerk
         self.min_t = min_t
         self.max_t = max_t
 
-
     def query(self, start, goal):
         r"""
         Find a quintic polynomial path
 
         :param start: start configuration :math:`(x, y, \theta)`
         :type start: array_like(3), optional
         :param goal: goal configuration :math:`(x, y, \theta)`
@@ -244,31 +286,46 @@
         Element     Description
         ==========  ===================================================
         ``t``       time to execute the path
         ``vel``     velocity profile along the path
         ``accel``   acceleration profile along the path
         ``jerk``    jerk profile along the path
         ==========  ===================================================
-    
+
         :seealso: :meth:`Planner.query`
         """
         self._start = start
         self._goal = goal
 
         time, path, v, a, j = quintic_polynomials_planner(
-            start[0], start[1], start[2], self.start_vel, self.start_acc,
-            goal[0], goal[1], goal[2], self.start_vel, self.start_acc, 
-            self.max_acc, self.max_jerk, dt=self.dt, MIN_T=self.min_t, MAX_T=self.max_t)
-
-        status = namedtuple('QuinticPolyStatus', ['t', 'vel', 'acc', 'jerk'])(
-                time, v, a, j)
-        
+            start[0],
+            start[1],
+            start[2],
+            self.start_vel,
+            self.start_acc,
+            goal[0],
+            goal[1],
+            goal[2],
+            self.start_vel,
+            self.start_acc,
+            self.max_acc,
+            self.max_jerk,
+            dt=self.dt,
+            MIN_T=self.min_t,
+            MAX_T=self.max_t,
+        )
+
+        status = namedtuple("QuinticPolyStatus", ["t", "vel", "acc", "jerk"])(
+            time, v, a, j
+        )
+
         return path, status
 
-if __name__ == '__main__':
+
+if __name__ == "__main__":
     from math import pi
 
     start = (10, 10, np.deg2rad(10.0))
     goal = (30, -10, np.deg2rad(20.0))
 
     quintic = QuinticPolyPlanner(start_vel=1)
     path, status = quintic.query(start, goal)
@@ -290,9 +347,7 @@
     plt.subplot(313)
     plt.plot(status.t, status.jerk, "-r")
     plt.xlabel("Time (s)")
     plt.ylabel("jerk (m/s3)")
     plt.grid(True)
 
     plt.show(block=True)
-
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/RRTPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/RRTPlanner.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # ======================================================================== #
 
 # The following code is based on code from Python Robotics
 # https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning
 # RRTDubins planning
-# Author: Atsushi Sakai 
+# Author: Atsushi Sakai
 # Copyright (c) 2016 - 2022 Atsushi Sakai and other contributors: https://github.com/AtsushiSakai/PythonRobotics/contributors
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 
 import math
 from collections import namedtuple
 from roboticstoolbox.mobile.OccGrid import PolygonMap
 
 # import rvcprint
 from roboticstoolbox import *
@@ -21,27 +21,25 @@
 from roboticstoolbox.mobile.DubinsPlanner import DubinsPlanner
 
 # from roboticstoolbox.mobile.OccupancyGrid import OccupancyGrid
 from pgraph import DGraph
 
 
 class RRTPlanner(PlannerBase):
-    """
+    r"""
     Rapidly exploring tree planner
 
     :param map: occupancy grid
     :type map: :class:`PolygonMap`
     :param vehicle: vehicle kinematic model
     :type vehicle: :class:`VehicleBase` subclass
     :param curvature: maximum path curvature, defaults to 1.0
     :type curvature: float, optional
     :param stepsize: spacing between points on the path, defaults to 0.2
     :type stepsize: float, optional
-    :param showsamples: shows vehicle polygons for all random samples, defaults to False
-    :type showsamples: bool, optional
     :param npoints: number of vertices in random tree, defaults to 50
     :type npoints: int, optional
 
     ==================   ========================
     Feature              Capability
     ==================   ========================
     Plan                 :math:`\SE{2}`
@@ -53,28 +51,28 @@
     Creates a planner that finds the obstacle-free path between two
     configurations in the plane using forward and backward motion.  The path
     comprises multiple Dubins curves comprising straight lines, or arcs with
     curvature of :math:`\pm` ``curvature``. Motion along the segments may be in
     the forward or backward direction.
 
     Polygons are used for obstacle avoidance:
-    
+
     - the environment is defined by a set of polygons represented by a :class:`PolygonMap`
     - the vehicle is defined by a single polygon specified by the ``polygon``
       argument to its constructor
 
     Example::
 
         from roboticstoolbox import RRTPlanner
         from spatialmath import Polygon2
         from math import pi
 
         # create polygonal obstacles
         map = PolygonMap(workspace=[0, 10])
-        map.add([(5, 50), (5, 6), (6, 6), (6, 50)]) 
+        map.add([(5, 50), (5, 6), (6, 6), (6, 50)])
         map.add([(5, 4), (5, -50), (6, -50), (6, 4)])
 
         # create outline polygon for vehicle
         l, w = 3, 1.5
         vpolygon = Polygon2([(-l/2, w/2), (-l/2, -w/2), (l/2, -w/2), (l/2, w/2)])
 
         # create vehicle model
@@ -91,30 +89,28 @@
         path, status = rrt.query(start=qs)
         print(path[:5,:])
         print(status)
 
 
     :seealso: :class:`DubinsPlanner` :class:`Vehicle` :class:`PlannerBase`
     """
+
     def __init__(
         self,
         map,
         vehicle,
         curvature=1.0,
         stepsize=0.2,
-        showsamples=False,
         npoints=50,
-        **kwargs
+        **kwargs,
     ):
-
         super().__init__(ndims=2, **kwargs)
 
         self.npoints = npoints
         self.map = map
-        self.showsamples = showsamples
 
         self.g = DGraph(metric="SE2")
 
         self.vehicle = vehicle
         if curvature is None:
             if vehicle is not None:
                 curvature = vehicle.curvature_max
@@ -123,47 +119,62 @@
 
         print("curvature", curvature)
         self.dubins = DubinsPlanner(curvature=curvature, stepsize=stepsize)
 
         # self.goal_yaw_th = np.deg2rad(1.0)
         # self.goal_xy_th = 0.5
 
-    def plan(self, goal, animate=True, search_until_npoints=True):
+    def plan(self, goal, showsamples=True, showvalid=True, animate=False):
         r"""
         Plan paths to goal using RRT
 
         :param goal: goal pose :math:`(x, y, \theta)`, defaults to previously set value
         :type goal: array_like(3), optional
+        :param showsamples: display position part of configurations overlaid on the map, defaults to True
+        :type showsamples: bool, optional
+        :param showvalid: display valid configurations as vehicle polygons overlaid on the map, defaults to False
+        :type showvalid: bool, optional
+        :param animate: update the display as configurations are tested, defaults to False
+        :type animate: bool, optional
 
         Compute a rapidly exploring random tree with its root at the ``goal``.
         The tree will have ``npoints`` vertices spread uniformly randomly over
         the workspace which is an attribute of the ``map``.
 
         For every new point added, a Dubins path is computed to the nearest
         vertex already in the graph.  Each configuration on that path, with
         spacing of ``stepsize``, is tested for obstacle intersection.
 
+        The configurations tested are displayed (translation only) if ``showsamples`` is
+        True.  The valid configurations are displayed as vehicle polygones if ``showvalid``
+        is True.  If ``animate`` is True these points are displayed during the search
+        process, otherwise a single figure is displayed at the end.
+
         :seealso: :meth:`query`
         """
         # TODO use validate
         self.goal = np.r_[goal]
         # self.goal = np.r_[goal]
         self.random_init()
 
         v = self.g.add_vertex(coord=goal)
         v.path = None
 
+        if showsamples or showvalid:
+            self.map.plot()
+
         self.progress_start(self.npoints)
         count = 0
         while count < self.npoints:
-
             random_point = self.qrandom_free()
 
-            if self.showsamples:
+            if showsamples:
                 plt.plot(random_point[0], random_point[1], "ok", markersize=2)
+                if animate:
+                    plt.pause(0.02)
 
             vnearest, d = self.g.closest(random_point)
 
             if d > 6:
                 continue
             path, pstatus = self.dubins.query(random_point, vnearest.coord)
             if path is None:
@@ -187,16 +198,21 @@
             self.progress_next()
 
             # add new vertex to graph
             vnew = self.g.add_vertex(random_point)
             self.g.add_edge(vnew, vnearest, cost=pstatus.length)
             vnew.path = path
 
-            self.vehicle.polygon(random_point).plot(color="b", alpha=0.1)
-            plt.show()
+            if showvalid:
+                self.vehicle.polygon(random_point).plot(color="b", alpha=0.1)
+                if animate:
+                    plt.pause(0.02)
+
+        if (showvalid or showsamples) and not animate:
+            plt.show(block=False)
 
         self.progress_end()
 
     def query(self, start):
         r"""
         Find a path from start configuration
 
@@ -302,15 +318,14 @@
         Transforms the vehicle polygon and tests for intersection against
         the polygonal obstacle map.
         """
         return self.map.iscollision(self.vehicle.polygon(q))
 
 
 if __name__ == "__main__":
-
     from roboticstoolbox.mobile.Vehicle import Bicycle
 
     # start and goal configuration
     qs = (2, 8, -np.pi / 2)
     qg = (8, 2, -np.pi / 2)
 
     # obstacle map
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/ReedsSheppPlanner.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/ReedsSheppPlanner.py`

 * *Files 3% similar despite different names*

```diff
@@ -7,70 +7,85 @@
 from spatialmath import base
 
 # ======================================================================== #
 
 # The following code is modified from Python Robotics
 # https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning
 # D* grid planning
-# Author: Atsushi Sakai 
+# Author: Atsushi Sakai
 # Copyright (c) 2016 - 2022 Atsushi Sakai and other contributors: https://github.com/AtsushiSakai/PythonRobotics/contributors
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 
-class _Path:
 
+class _Path:
     def __init__(self):
         self.lengths = []
         self.ctypes = []
         self.L = 0.0
         self.x = []
         self.y = []
         self.yaw = []
         self.directions = []
 
+    def __repr__(self):
+        s = f"_Path: L={self.L:.2g}, "
+        s += f"[{', '.join(['{}={:.2g}'.format(c,l) for c, l in zip(self.ctypes, self.lengths)])}]"
+        if len(self.x) > 0:
+            s += f", {len(self.x)} points on path"
+        return s
+
 
 def plot_arrow(x, y, yaw, length=1.0, width=0.5, fc="r", ec="k"):
     """
     Plot arrow
     """
 
     if not isinstance(x, float):
         for (ix, iy, iyaw) in zip(x, y, yaw):
             plot_arrow(ix, iy, iyaw)
     else:
-        plt.arrow(x, y, length * math.cos(yaw), length * math.sin(yaw),
-                  fc=fc, ec=ec, head_width=width, head_length=width)
+        plt.arrow(
+            x,
+            y,
+            length * math.cos(yaw),
+            length * math.sin(yaw),
+            fc=fc,
+            ec=ec,
+            head_width=width,
+            head_length=width,
+        )
         plt.plot(x, y)
 
 
 def straight_left_straight(x, y, phi):
     phi = base.wrap_0_2pi(phi)
     if y > 0.0 and 0.0 < phi < math.pi * 0.99:
-        xd = - y / math.tan(phi) + x
+        xd = -y / math.tan(phi) + x
         t = xd - math.tan(phi / 2.0)
         u = phi
-        v = math.sqrt((x - xd) ** 2 + y ** 2) - math.tan(phi / 2.0)
+        v = math.sqrt((x - xd) ** 2 + y**2) - math.tan(phi / 2.0)
         return True, t, u, v
     elif y < 0.0 < phi < math.pi * 0.99:
-        xd = - y / math.tan(phi) + x
+        xd = -y / math.tan(phi) + x
         t = xd - math.tan(phi / 2.0)
         u = phi
-        v = -math.sqrt((x - xd) ** 2 + y ** 2) - math.tan(phi / 2.0)
+        v = -math.sqrt((x - xd) ** 2 + y**2) - math.tan(phi / 2.0)
         return True, t, u, v
 
     return False, 0.0, 0.0, 0.0
 
 
 def set_path(paths, lengths, ctypes):
     path = _Path()
     path.ctypes = ctypes
     path.lengths = lengths
 
     # check same path exist
     for tpath in paths:
-        typeissame = (tpath.ctypes == path.ctypes)
+        typeissame = tpath.ctypes == path.ctypes
         if typeissame:
             if sum(np.abs(tpath.lengths)) - sum(np.abs(path.lengths)) <= 0.01:
                 return paths  # not insert path
 
     path.L = sum([abs(i) for i in lengths])
 
     # Base.Test.@test path.L >= 0.01
@@ -89,15 +104,15 @@
     if flag:
         paths = set_path(paths, [t, u, v], ["S", "R", "S"])
 
     return paths
 
 
 def polar(x, y):
-    r = math.sqrt(x ** 2 + y ** 2)
+    r = math.sqrt(x**2 + y**2)
     theta = math.atan2(y, x)
     return r, theta
 
 
 def left_straight_left(x, y, phi):
     u, t = polar(x - math.sin(phi), y - 1.0 + math.cos(phi))
     if t >= 0.0:
@@ -196,45 +211,70 @@
         paths = set_path(paths, [-t, -u, -v], ["R", "S", "L"])
 
     return paths
 
 
 def left_straight_right(x, y, phi):
     u1, t1 = polar(x + math.sin(phi), y - 1.0 - math.cos(phi))
-    u1 = u1 ** 2
+    u1 = u1**2
     if u1 >= 4.0:
         u = math.sqrt(u1 - 4.0)
         theta = math.atan2(2.0, u)
         t = base.wrap_0_2pi(t1 + theta)
         v = base.wrap_0_2pi(t - phi)
 
         if t >= 0.0 and v >= 0.0:
             return True, t, u, v
 
     return False, 0.0, 0.0, 0.0
 
 
 def generate_path(q0, q1, max_curvature):
+    """
+    Return a set of feasible paths
+
+    :param q0: initial configuration
+    :type q0: array_like(3)
+    :param q1: final configuration
+    :type q1: array_like(3)
+    :param max_curvature: maximum path curvature
+    :type max_curvature: float
+    :return: set of paths
+    :rtype: list of _Path
+    """
     dx = q1[0] - q0[0]
     dy = q1[1] - q0[1]
     dth = q1[2] - q0[2]
     c = math.cos(q0[2])
     s = math.sin(q0[2])
     x = (c * dx + s * dy) * max_curvature
     y = (-s * dx + c * dy) * max_curvature
 
+    # build a list of possible paths
     paths = []
     paths = straight_curve_straight(x, y, dth, paths)
     paths = curve_straight_curve(x, y, dth, paths)
     paths = curve_curve_curve(x, y, dth, paths)
 
     return paths
 
 
-def interpolate(ind, length, mode, max_curvature, origin_x, origin_y, origin_yaw, path_x, path_y, path_yaw, directions):
+def interpolate(
+    ind,
+    length,
+    mode,
+    max_curvature,
+    origin_x,
+    origin_y,
+    origin_yaw,
+    path_x,
+    path_y,
+    path_yaw,
+    directions,
+):
     if mode == "S":
         path_x[ind] = origin_x + length / max_curvature * math.cos(origin_yaw)
         path_y[ind] = origin_y + length / max_curvature * math.sin(origin_yaw)
         path_yaw[ind] = origin_yaw
     else:  # curve
         ldx = math.sin(length) / max_curvature
         ldy = 0.0
@@ -283,32 +323,34 @@
             d = -step_size
 
         # set origin state
         ox, oy, oyaw = px[ind], py[ind], pyaw[ind]
 
         ind -= 1
         if i >= 1 and (lengths[i - 1] * lengths[i]) > 0:
-            pd = - d - ll
+            pd = -d - ll
         else:
             pd = d - ll
 
         while abs(pd) <= abs(l):
             ind += 1
             px, py, pyaw, directions = interpolate(
-                ind, pd, m, max_curvature, ox, oy, oyaw, px, py, pyaw, directions)
+                ind, pd, m, max_curvature, ox, oy, oyaw, px, py, pyaw, directions
+            )
             pd += d
 
         ll = l - pd - d  # calc remain length
 
         ind += 1
         px, py, pyaw, directions = interpolate(
-            ind, l, m, max_curvature, ox, oy, oyaw, px, py, pyaw, directions)
+            ind, l, m, max_curvature, ox, oy, oyaw, px, py, pyaw, directions
+        )
 
     # remove unused data
-    while px[-1] == 0.0:
+    while abs(px[-1]) < 1e-10:
         px.pop()
         py.pop()
         pyaw.pop()
         directions.pop()
 
     return px, py, pyaw, directions
 
@@ -317,24 +359,31 @@
     return (angle + math.pi) % (2 * math.pi) - math.pi
 
 
 def calc_paths(sx, sy, syaw, gx, gy, gyaw, maxc, step_size):
     q0 = [sx, sy, syaw]
     q1 = [gx, gy, gyaw]
 
+    # find set of feasible paths
     paths = generate_path(q0, q1, maxc)
     for path in paths:
+        # interpolate the path
         x, y, yaw, directions = generate_local_course(
-            path.L, path.lengths, path.ctypes, maxc, step_size * maxc)
+            path.L, path.lengths, path.ctypes, maxc, step_size * maxc
+        )
 
         # convert global coordinate
-        path.x = [math.cos(-q0[2]) * ix + math.sin(-q0[2])
-                  * iy + q0[0] for (ix, iy) in zip(x, y)]
-        path.y = [-math.sin(-q0[2]) * ix + math.cos(-q0[2])
-                  * iy + q0[1] for (ix, iy) in zip(x, y)]
+        path.x = [
+            math.cos(-q0[2]) * ix + math.sin(-q0[2]) * iy + q0[0]
+            for (ix, iy) in zip(x, y)
+        ]
+        path.y = [
+            -math.sin(-q0[2]) * ix + math.cos(-q0[2]) * iy + q0[1]
+            for (ix, iy) in zip(x, y)
+        ]
         path.yaw = [pi_2_pi(iyaw + q0[2]) for iyaw in yaw]
         path.directions = directions
         path.lengths = [length / maxc for length in path.lengths]
         path.L = path.L / maxc
 
     return paths
 
@@ -356,18 +405,19 @@
             minL = paths[i].L
             best_path_index = i
 
     bpath = paths[best_path_index]
 
     return bpath
 
+
 # ====================== RTB wrapper ============================= #
 
 # Copyright (c) 2022 Peter Corke: https://github.com/petercorke/robotics-toolbox-python
-# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE 
+# Released under the MIT license: https://github.com/AtsushiSakai/PythonRobotics/blob/master/LICENSE
 class ReedsSheppPlanner(PlannerBase):
     r"""
     Reeds-Shepp path planner
 
     :param curvature: maximum path curvature, defaults to 1.0
     :type curvature: float, optional
     :param stepsize: spacing between points on the path, defaults to 0.1
@@ -397,27 +447,31 @@
         >>> from math import pi
         >>> reedshepp = ReedsSheppPlanner(curvature=1.0)
         >>> path, status = reedshepp.query(start=(0, 0, pi/2), goal=(1, 0, pi/2))
         >>> print(path[:5,:])
         >>> print(status)
 
     :reference: Optimal paths for a car that goes both forwards and backwards,
-        Reeds, J.A. and L.A. Shepp, Pacific J. Math., 145 (1990), 
-        pp. 367393. 
+        Reeds, J.A. and L.A. Shepp, Pacific J. Math., 145 (1990),
+        pp. 367393.
 
     :thanks: based on Reeds-Shepp path planning from `Python Robotics <https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning>`_
     :seealso: :class:`DubinsPlanner` :class:`PlannerBase`
     """
+
     def __init__(self, curvature=1, stepsize=0.1, **kwargs):
         super().__init__(ndims=3, **kwargs)
         self._curvature = curvature
         self._stepsize = stepsize
 
     def __str__(self):
-        s = super().__str__() + f"\n  curvature={self.curvature}, stepsize={self.stepsize}"
+        s = (
+            super().__str__()
+            + f"\n  curvature={self.curvature}, stepsize={self.stepsize}"
+        )
 
     def query(self, start, goal, **kwargs):
         r"""
         Find a path between two configurations
 
         :param start: start configuration :math:`(x, y, \theta)`
         :type start: array_like(3), optional
@@ -440,41 +494,48 @@
         | ``length``  | total path length                                   |
         +-------------+-----------------------------------------------------+
         |``lengths``  | the length of each path segment. The sign of the    |
         |             | length indicates the direction of travel.           |
         +-------------+-----------------------------------------------------+
         |``direction``| the direction of motion at each point on the path   |
         +-------------+-----------------------------------------------------+
-    
-        .. note:: The direction of turning is reversed when travelling 
+
+        .. note:: The direction of turning is reversed when travelling
             backwards.
 
         """
         super().query(start=start, goal=goal, next=False, **kwargs)
 
         bpath = reeds_shepp_path_planning(
-            start=self.start, goal=self.goal,
-            maxc=self._curvature, step_size=self._stepsize)
+            start=self.start,
+            goal=self.goal,
+            maxc=self._curvature,
+            step_size=self._stepsize,
+        )
 
         path = np.c_[bpath.x, bpath.y, bpath.yaw]
 
-        status = namedtuple('ReedsSheppStatus', 
-            ['segments', 'length', 'seglengths', 'direction'])
+        status = namedtuple(
+            "ReedsSheppStatus", ["segments", "length", "seglengths", "direction"]
+        )
+
+        return path, status(
+            bpath.ctypes,
+            sum([abs(l) for l in bpath.lengths]),
+            bpath.lengths,
+            bpath.directions,
+        )
 
-        return path, status(bpath.ctypes, sum([abs(l) for l in bpath.lengths]),
-            bpath.lengths, bpath.directions)
 
-
-if __name__ == '__main__':
+if __name__ == "__main__":
     from math import pi
 
     # start = (-1, -4, -np.radians(20))
     # goal = (5, 5, np.radians(25))
 
-
     start = (0, 0, 0)
     goal = (0, 0, pi)
 
     reedsshepp = ReedsSheppPlanner(curvature=1.0, stepsize=0.1)
     path, status = reedsshepp.query(start, goal)
     print(status)
 
@@ -491,8 +552,8 @@
 
     #     plt.legend()
     #     plt.grid(True)
     #     plt.axis("equal")
     #     plt.show(block=True)
 
     reedsshepp.plot(path=path, direction=status.direction, configspace=True)
-    plt.show(block=True)
+    plt.show(block=True)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/Vehicle.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/Vehicle.py`

 * *Files 14% similar despite different names*

```diff
@@ -6,27 +6,40 @@
 from abc import ABC, abstractmethod
 import warnings
 from math import pi, sin, cos, tan
 import numpy as np
 from scipy import interpolate
 
 import matplotlib.pyplot as plt
+from matplotlib import animation
+
 # from matplotlib import patches
 # import matplotlib.transforms as mtransforms
 
 from spatialmath import SE2, base
 from roboticstoolbox.mobile.drivers import VehicleDriverBase
 from roboticstoolbox.mobile.Animations import VehiclePolygon
 
 
 class VehicleBase(ABC):
-
-    def __init__(self, covar=None, speed_max=np.inf, accel_max=np.inf, x0=[0, 0, 0], dt=0.1,
-                 control=None, seed=0, animation=None, verbose=False, plot=False, workspace=None,
-                 polygon=None):
+    def __init__(
+        self,
+        covar=None,
+        speed_max=np.inf,
+        accel_max=np.inf,
+        x0=[0, 0, 0],
+        dt=0.1,
+        control=None,
+        seed=0,
+        animation=None,
+        verbose=False,
+        plot=False,
+        workspace=None,
+        polygon=None,
+    ):
         r"""
         Superclass for vehicle kinematic models
 
         :param covar: odometry covariance, defaults to zero
         :type covar: ndarray(2,2), optional
         :param speed_max: maximum speed, defaults to :math:`\infty`
         :type speed_max: float, optional
@@ -60,33 +73,36 @@
         ``workspace``   x-range  y-range
         ==============  =======  =======
         A (scalar)      -A:A     -A:A
         [A, B]           A:B      A:B
         [A, B, C, D]     A:B      C:D
         ==============  =======  =======
 
+        :note: Set ``seed=None`` to have it randomly initialized from the
+            operating system.
+
         :seealso: :class:`Bicycle` :class:`Unicycle` :class:`VehicleAnimationBase`
         """
 
         self._V = covar
         self._dt = dt
         if x0 is None:
             x0 = np.zeros((3,), dtype=float)
         else:
             x0 = base.getvector(x0)
-            if len(x0) not in (2,3):
-                raise ValueError('x0 must be length 2 or 3')
+            if len(x0) not in (2, 3):
+                raise ValueError("x0 must be length 2 or 3")
         self._x0 = x0
         self._x = x0.copy()
 
         self._random = np.random.default_rng(seed)
         self._seed = seed
         self._speed_max = speed_max
         self._accel_max = accel_max
-        self._v_prev = 0
+        self._v_prev = [0]
         self._polygon = polygon
 
         if isinstance(animation, str):
             animation = VehiclePolygon(animation)
         self._animation = animation
         self._ax = None
 
@@ -134,15 +150,15 @@
         :param odo: vehicle odometry :math:`(\delta_d, \delta_\theta)`
         :type odo: array_like(2)
         :param v: additive odometry noise, defaults to (0,0)
         :type v: array_like(2), optional
         :return: predicted vehicle state
         :rtype: ndarray(3)
 
-        Predict the next state based on current state and odometry 
+        Predict the next state based on current state and odometry
         value.  ``v`` is a random variable that represents additive
         odometry noise for simulation purposes.
 
         .. math::
 
             f: \vec{x}_k, \delta_d, \delta_\theta \mapsto \vec{x}_{k+1}
 
@@ -157,15 +173,20 @@
         odo = base.getvector(odo, 2)
 
         if isinstance(x, np.ndarray) and x.ndim == 2:
             # x is Nx3 set of vehicle states, do vectorized form
             # used by particle filter
             dd, dth = odo
             theta = x[:, 2]
-            return np.array(x) + np.c_[dd * np.cos(theta), dd * np.sin(theta), np.full(theta.shape, dth)]
+            return (
+                np.array(x)
+                + np.c_[
+                    dd * np.cos(theta), dd * np.sin(theta), np.full(theta.shape, dth)
+                ]
+            )
         else:
             # x is a vector
             x = base.getvector(x, 3)
             dd, dth = odo
             theta = x[2]
 
             if v is not None:
@@ -181,15 +202,15 @@
 
         :param x: vehicle state :math:`(x, y, \theta)`
         :type x: array_like(3)
         :param odo: vehicle odometry :math:`(\delta_d, \delta_\theta)`
         :type odo: array_like(2)
         :return: Jacobian matrix
         :rtype: ndarray(3,3)
-        
+
         Returns the Jacobian matrix :math:`\frac{\partial \vec{f}}{\partial \vec{x}}` for
         the given state and odometry.
 
         :seealso: :meth:`f` :meth:`deriv` :meth:`Fv`
         """
         dd, dth = odo
         theta = x[2]
@@ -209,15 +230,15 @@
 
         :param x: vehicle state :math:`(x, y, \theta)`
         :type x: array_like(3)
         :param odo: vehicle odometry :math:`(\delta_d, \delta_\theta)`
         :type odo: array_like(2)
         :return: Jacobian matrix
         :rtype: ndarray(3,2)
-        
+
         Returns the Jacobian matrix :math:`\frac{\partial \vec{f}}{\partial \vec{v}}` for
         the given state and odometry.
 
         :seealso:  :meth:`f` :meth:`deriv` :meth:`Fx`
         """
         dd, dth = odo
         theta = x[2]
@@ -226,15 +247,15 @@
         J = np.array([
                 [cos(theta),    0],
                 [sin(theta),    0],
                 [0,           1],
             ])
         # fmt: on
         return J
-        
+
     @property
     def control(self):
         """
         Get/set vehicle control (superclass)
 
         :getter: Returns vehicle's control
         :setter: Sets the vehicle's control
@@ -253,15 +274,15 @@
         .. runblock:: pycon
 
             >>> from roboticstoolbox import Bicycle, RandomPath
             >>> bike = Bicycle()
             >>> bike.control = RandomPath(10)
             >>> print(bike)
 
-        :seealso: :meth:`run` :meth:`eval_control` :obj:`scipy.interpolate.interp1d` :class:`~roboticstoolbox.mobile.drivers.VehicleDriverBase` 
+        :seealso: :meth:`run` :meth:`eval_control` :obj:`scipy.interpolate.interp1d` :class:`~roboticstoolbox.mobile.drivers.VehicleDriverBase`
         """
         return self._control
 
     @control.setter
     def control(self, control):
 
         # * a function called as ``f(vehicle, t, x)`` that returns a tuple
@@ -269,15 +290,14 @@
         #   SciPy interp1d
 
         self._control = control
         if isinstance(control, VehicleDriverBase):
             # if this is a driver agent, connect it to the vehicle
             control.vehicle = self
 
-
     def eval_control(self, control, x):
         """
         Evaluate vehicle control input (superclass method)
 
         :param control: vehicle control
         :type control: [type]
         :param x: vehicle state :math:`(x, y, \theta)`
@@ -300,64 +320,66 @@
         :seealso: :meth:`run` :meth:`control` :func:`scipy.interpolate.interp1d`
         """
         # was called control() in the MATLAB version
 
         if base.isvector(control, 2):
             # control is a constant
             u = base.getvector(control, 2)
-        
+
         elif isinstance(control, VehicleDriverBase):
             # vehicle has a driver object
             u = control.demand()
 
         elif isinstance(control, interpolate.interpolate.interp1d):
             # control is an interp1d object
             u = control(self._t)
 
         elif callable(control):
             # control is a user function of time and state
             u = control(self, self._t, x)
 
         else:
-            raise ValueError('bad control specified')
+            raise ValueError("bad control specified")
 
         # apply limits
         ulim = self.u_limited(u)
         return ulim
 
-    def limits_va(self, v):
+    def limits_va(self, v, v_prev):
         """
         Apply velocity and acceleration limits (superclass)
 
         :param v: desired velocity
         :type v: float
+        :param v_prev: previous velocity, reference to list
+        :type v_prev: list with single element
         :return: allowed velocity
         :rtype: float
 
         Determine allowable velocity given desired velocity, speed and
         acceleration limits.
 
-        .. note:: This function is stateful, requires previous velocity,
-            ``_v_prev`` attribute, to enable acceleration limiting.  This
-            is reset to zero at the start of each simulation.
+        .. note:: This function requires previous velocity, ``v_prev`` to enable
+            acceleration limiting.  This is passed as a reference to a mutable value,
+            a single-element list. This is reset to zero at the start of each simulation.
         """
         # acceleration limit
+        vp = v_prev[0]
         if self._accel_max is not None:
-            if (v - self._v_prev) / self._dt > self._accel_max:
-                v = self._v_prev + self._accelmax * self._dt;
-            elif (v - self._v_prev) / self._dt < -self._accel_max:
-                v = self._v_prev - self._accel_max * self._dt;
-        self._v_prev = v
-        
+            if (v - vp) / self._dt > self._accel_max:
+                v = vp + self._accelmax * self._dt
+            elif (v - vp) / self._dt < -self._accel_max:
+                v = vp - self._accel_max * self._dt
+        v_prev[0] = v
+
         # speed limit
         if self._speed_max is not None:
             v = np.clip(v, -self._speed_max, self._speed_max)
         return v
 
-
     def polygon(self, q):
         """
         Bounding polygon at vehicle configuration
 
         :param q: vehicle configuration :math:`(x, y, \theta)`
         :type q: array_like(3)
         :return: bounding polygon of vehicle at configuration ``q``
@@ -384,67 +406,171 @@
         :type driver: VehicleDriverBase subclass
 
         .. warning:: Deprecated.  Use ``vehicle.control = driver`` instead.
 
         :seealso: :class:`VehicleDriverBase` :meth:`control`
         """
 
-        warnings.warn('add_driver is deprecated, use veh.control=driver instead')
+        warnings.warn("add_driver is deprecated, use veh.control=driver instead")
         self._control = driver
         driver._veh = self
 
-
-    def run(self, T=10, x0=None, control=None, animate=False):
+    def run(self, T=10, x0=None, control=None, animate=True):
         r"""
         Simulate motion of vehicle (superclass)
 
-        :param N: Number of simulation steps, defaults to 1000
-        :type N: int, optional
+        :param T: Simulation time in seconds, defaults to 10
+        :type T: float, optional
         :param x0: Initial state, defaults to value given to Vehicle constructor
         :type x0: array_like(3) or array_like(2)
-        :param animation: vehicle animation object, defaults to None
-        :type animation: VehicleAnimation subclass, optional
-        :param plot: Enable plotting, defaults to False
-        :type plot: bool, optional
+        :param control: vehicle control inputs, defaults to None
+        :type control: array_like(2), callable, driving agent
+        :param animate: Enable graphical animation of vehicle, defaults to False
+        :type animate: bool, optional
         :return: State trajectory, each row is :math:`(x,y,\theta)`.
         :rtype: ndarray(n,3)
 
-        Runs the vehicle simulation for ``N`` timesteps and optionally plots
+        Runs the vehicle simulation for ``T`` seconds and optionally plots
         an animation.  The method :meth:`step` performs each time step.
 
-        The control inputs are providd by ``control`` which can be:
+        The control inputs are provided by ``control`` which can be:
 
             * a constant tuple as the control inputs to the vehicle
             * a function called as ``f(vehicle, t, x)`` that returns a tuple
             * an interpolator called as ``f(t)`` that returns a tuple, see
               SciPy interp1d
             * a driver agent, subclass of :class:`VehicleDriverBase`
 
         This is evaluated by :meth:`eval_control` which applies velocity,
         acceleration and steering limits.
 
         The simulation can be stopped prematurely by the control function
-        calling :meth:`stopif`.
-        
-        :seealso: :meth:`init` :meth:`step` :meth:`control`
+        calling :meth:`stopsim`.
+
+        .. note::
+            * the simulation is fixed-time step with the step given by the ``dt``
+              attribute set by the constructor.
+            * integration uses rectangular integration.
+
+        :seealso: :meth:`init` :meth:`step` :meth:`control` :meth:`run_animation`
         """
 
-        self.init(control=control, x0=x0)
-        
+        self.init(control=control, animate=animate, x0=x0)
+
         for i in range(round(T / self.dt)):
             self.step(animate=animate)
 
             # check for user requested stop
             if self._stopsim:
-                print('USER REEQUESTED STOP AT time', self._t)
+                print("USER REEQUESTED STOP AT time", self._t)
                 break
 
         return self.x_hist
 
-    def init(self, x0=None, control=None):
+    def run_animation(self, T=10, x0=None, control=None, format=None, file=None):
+        r"""
+        Simulate motion of vehicle (superclass)
+
+        :param T: Simulation time in seconds, defaults to 10
+        :type T: float, optional
+        :param x0: Initial state, defaults to value given to Vehicle constructor
+        :type x0: array_like(3) or array_like(2)
+        :param control: vehicle control inputs, defaults to None
+        :type control: array_like(2), callable, driving agent
+        :param format: Output format
+        :type format: str, optional
+        :param file: File name
+        :type file: str, optional
+        :return: Matplotlib animation object
+        :rtype: :meth:`matplotlib.animation.FuncAnimation`
+
+        Runs the vehicle simulation for ``T`` seconds and returns an animation
+        in various formats::
+
+            ``format``    ``file``   description
+            ============  =========  ============================
+            ``"html"``    str, None  return HTML5 video
+            ``"jshtml"``  str, None  return JS+HTML video
+            ``"gif"``     str        return animated GIF
+            ``"mp4"``     str        return MP4/H264 video
+            ``None``                 return a ``FuncAnimation`` object
+
+        The allowables types for ``file`` are given in the second column.  A str
+        value is the file name.  If ``None`` is an option then return the video as a string.
+
+        For the last case, a reference to the animation object must be held if used for
+        animation in a Jupyter cell::
+
+            anim = robot.run_animation(T=20)
+
+        The control inputs are provided by ``control`` which can be:
+
+            * a constant tuple as the control inputs to the vehicle
+            * a function called as ``f(vehicle, t, x)`` that returns a tuple
+            * an interpolator called as ``f(t)`` that returns a tuple, see
+              SciPy interp1d
+            * a driver agent, subclass of :class:`VehicleDriverBase`
+
+        This is evaluated by :meth:`eval_control` which applies velocity,
+        acceleration and steering limits.
+
+        The simulation can be stopped prematurely by the control function
+        calling :meth:`stopsim`.
+
+        .. note::
+            * the simulation is fixed-time step with the step given by the ``dt``
+              attribute set by the constructor.
+            * integration uses rectangular integration.
+
+        :seealso: :meth:`init` :meth:`step` :meth:`control` :meth:`run_animation`
+        """
+
+        fig, ax = plt.subplots()
+
+        nframes = round(T / self.dt)
+        anim = animation.FuncAnimation(
+            fig=fig,
+            func=lambda i: self.step(animate=True, pause=False),
+            init_func=lambda: self.init(animate=True),
+            frames=nframes,
+            interval=self.dt * 1000,
+            blit=False,
+            repeat=False,
+        )
+        # anim._interval = self.dt*1000/2
+        # anim._repeat = True
+        ret = None
+        if format == "html":
+            ret = anim.to_html5_video()  # convert to embeddable HTML5 animation
+        elif format == "jshtml":
+            ret = anim.to_jshtml()  # convert to embeddable Javascript/HTML animation
+        elif format == "gif":
+            anim.save(
+                file, writer=animation.PillowWriter(fps=1 / self.dt)
+            )  # convert to GIF
+            ret = None
+        elif format == "mp4":
+            anim.save(
+                file, writer=animation.FFMpegWriter(fps=1 / self.dt)
+            )  # convert to mp4/H264
+            ret = None
+        elif format == None:
+            # return the anim object
+            return anim
+        else:
+            raise ValueError("unknown format")
+
+        if ret is not None and file is not None:
+            with open(file, "w") as f:
+                f.write(ret)
+            ret = None
+        plt.close(fig)
+        return ret
+
+    def init(self, x0=None, control=None, animate=True):
         """
         Initialize for simulation (superclass)
 
         :param x0: Initial state, defaults to value given to Vehicle constructor
         :type x0: array_like(3) or array_like(2)
 
 
@@ -471,40 +597,45 @@
 
         if self._seed is not None:
             self._random = np.random.default_rng(self._seed)
 
         if control is not None:
             # override control
             self._control = control
-        
-        if self._control is not None:
+
+        if isinstance(self._control, VehicleDriverBase):
             self._control.init()
 
         self._t = 0
+        self._v_prev = [0]
 
         # initialize the graphics
-        if self._animation is not None:
+        if animate and self._animation is not None:
 
             # setup the plot
             self._ax = base.plotvol2(self.workspace)
-        
-            self._ax.set_xlabel('x')
-            self._ax.set_ylabel('y')
-            self._ax.set_aspect('equal')
-            self._ax.figure.canvas.manager.set_window_title(
-                f"Robotics Toolbox for Python (Figure {self._ax.figure.number})")
+
+            self._ax.set_xlabel("x")
+            self._ax.set_ylabel("y")
+            self._ax.set_aspect("equal")
+            try:
+                self._ax.figure.canvas.manager.set_window_title(
+                    f"Robotics Toolbox for Python (Figure {self._ax.figure.number})"
+                )
+            except AttributeError:
+                pass
 
             self._animation.add(ax=self._ax)  # add vehicle animation to axis
-            self._timer = plt.figtext(0.85, 0.95, '')  # display time counter
+            self._timer = plt.figtext(0.85, 0.95, "")  # display time counter
 
         # initialize the driver
         if isinstance(self._control, VehicleDriverBase):
             self._control.init(ax=self._ax)
 
-    def step(self, u=None, animate=False):
+    def step(self, u=None, animate=True, pause=True):
         r"""
         Step simulator by one time step (superclass)
 
         :return: odometry :math:`(\delta_d, \delta_\theta)`
         :rtype: ndarray(2)
 
         #. Obtain the vehicle control inputs
@@ -554,23 +685,29 @@
 
         if self._V is not None:
             odo += self.random.multivariate_normal((0, 0), self._V)
 
         # do the graphics
         if animate and self._animation:
             self._animation.update(self._x)
-            if self._timer is not None:
-                self._timer.set_text(f"t = {self._t:.2f}")
-            plt.pause(self._dt)
+            # if self._timer is not None:
+            #     self._timer.set_text(f"t = {self._t:.2f}")
+            if pause:
+                plt.pause(self._dt)
+            # plt.show(block=False)
+            # pass
 
         self._t += self._dt
 
         # be verbose
         if self._verbose:
-            print(f"{self._t:8.2f}: u=({u[0]:8.2f}, {u[1]:8.2f}), x=({self._x[0]:8.2f}, {self._x[1]:8.2f}, {self._x[2]:8.2f})")
+            print(
+                f"{self._t:8.2f}: u=({u[0]:8.2f}, {u[1]:8.2f}), x=({self._x[0]:8.2f},"
+                f" {self._x[1]:8.2f}, {self._x[2]:8.2f})"
+            )
 
         return odo
 
     @property
     def workspace(self):
         """
         Size of robot workspace (superclass)
@@ -581,15 +718,15 @@
         Returns the bounds of the workspace as specified by constructor
         option ``workspace``
         """
 
         # get workspace specified for Vehicle or from its driver
         if self._workspace is not None:
             return self._workspace
-        if self._control is not None:
+        if self._control is not None and hasattr(self._control, "_workspace"):
             return self._control._workspace
 
     @property
     def x(self):
         r"""
         Get vehicle state/configuration (superclass)
 
@@ -754,67 +891,37 @@
         A control function can stop the simulation initated by the ``run``
         method.
 
         :seealso: :meth:`run`
         """
         self._stopsim = True
 
-    # def plot(self, x=None, shape='box', block=False, size=True, **kwargs):
-    #     r"""
-    #     Plot vehicle configuration (superclass)
-
-    #     :param x: configuration :math:`(x, y, \theta)`, defaults to None
-    #     :type x: array_like(3), optional
-    #     :param shape: [description], defaults to 'box'
-    #     :type shape: str, optional
-    #     :param block: [description], defaults to False
-    #     :type block: bool, optional
-    #     :param size: [description], defaults to True
-    #     :type size: bool, optional
-    #     :raises ValueError: [description]
-    #     """
-    #     if shape == 'triangle':
-    #         L = size
-    #         W = 0.6 * size
-    #         vertices = [(L, 0), (-L, -W), (-L, W)]
-    #     elif shape == 'box':
-    #         L1 = size
-    #         L2 = size
-    #         W = 0.6 * size
-    #         vertices = [(-L1, W), (0.6*L2, W), (L2, 0.5*W), (L2, -0.5*W), (0.6*L2, -W), (-L1, -W)]
-    #     elif isinstance(shape, np.ndarray):
-    #         vertices = shape
-    #     else:
-    #         raise ValueError('bad vehicle shape specified')
-
-    #     vertices = np.array(vertices).T
-    #     base.plot_poly(SE2(x) * vertices, close=True, **kwargs)
-
-    def plot_xy(self, *args, block=False, **kwargs):
+    def plot_xy(self, *args, block=None, **kwargs):
         """
         Plot xy-path from history
 
-        :param block: block until plot dismissed, defaults to False
+        :param block: block until plot dismissed, defaults to None
         :type block: bool, optional
         :param args: positional arguments passed to :meth:`~matplotlib.axes.Axes.plot`
         :param kwargs: keyword arguments passed to :meth:`~matplotlib.axes.Axes.plot`
 
 
         The :math:`(x,y)` trajectory from the simulation history is plotted as
         :math:`x` vs :math:`y.
 
         :seealso: :meth:`run` :meth:`plot_xyt`
         """
-        if args is None and 'color' not in kwargs:
-            kwargs['color'] = 'b'
+        if args is None and "color" not in kwargs:
+            kwargs["color"] = "b"
         xyt = self.x_hist
         plt.plot(xyt[:, 0], xyt[:, 1], *args, **kwargs)
-        plt.show(block=block)
+        if block is not None:
+            plt.show(block=block)
 
-    def plot_xyt(self, block=False, **kwargs):
+    def plot_xyt(self, block=None, **kwargs):
         """
         Plot configuration vs time from history
 
         :param block: block until plot dismissed, defaults to False
         :type block: bool, optional
         :param args: positional arguments passed to :meth:`~matplotlib.axes.Axes.plot`
         :param kwargs: keyword arguments passed to :meth:`~matplotlib.axes.Axes.plot`
@@ -822,87 +929,31 @@
         The :math:`(x,y, \theta)` trajectory from the simulation history is plotted
         against time.
 
         :seealso: :meth:`run` :meth:`plot_xy`
         """
         xyt = self.x_hist
         t = np.arange(0, xyt.shape[0] * self._dt, self._dt)
-        plt.plot(xyt[:,0], xyt[:, :], **kwargs)
-        plt.legend(['x', 'y', '$\\theta$'])
-        plt.show(block=block)
-
-
-    # def path(self, t=10, u=None, x0=None):
-    #     """
-    #     Compute path by integration (superclass)
-
-    #     :param t: integration time in seconds, defaults to 10
-    #     :type t: float, optional
-    #     :param u: vehicle command, defaults to None
-    #     :type u: array_like(2), optional
-    #     :param x0: initial state, defaults to (0,0,0)
-    #     :type x0: array_like(3), optional
-    #     :return: time vector and state history
-    #     :rtype: ndarray(1), ndarray(n,3)
-
-    #     XF = V.path(TF, U) is the final state of the vehicle (3x1) from the initial
-    #     state (0,0,0) with the control inputs U (vehicle specific).  TF is  a scalar to 
-    #     specify the total integration time.
-
-    #     XP = V.path(TV, U) is the trajectory of the vehicle (Nx3) from the initial
-    #     state (0,0,0) with the control inputs U (vehicle specific).  T is a vector (N) of 
-    #     times for which elements of the trajectory will be computed.
-
-    #     XP = V.path(T, U, X0) as above but specify the initial state.
-
-    #     .. note::
-    #         - Integration is performed using ODE45.
-    #         - The ODE being integrated is given by the deriv method of the vehicle object.
-
-    #     :seealso: :obj:`scipy.integrate.solve_ivp`
-    #     """
-
-    #     # t, x = veh.path(5, u=control)
-    #     # print(t)
-    #     if x0 is None:
-    #         x0 = np.zeros(3)
-
-    #     def xdot(t, x, vehicle, u):
-    #         # u = vehicle.control(demand, x)
-    #         return vehicle.deriv(x, u)
-
-    #     if base.isscalar(t):
-    #         t_span = (0, t)
-    #         t_eval = np.linspace(0, t, 100)
-    #     elif isinstance(t, np.ndarray):
-    #         t_span = (t[0], t[-1])
-    #         t_eval = t
-    #     else:
-    #         raise ValueError('bad time argument')
-    #     sol = integrate.solve_ivp(xdot, t_span, x0, t_eval=t_eval, method="RK45", args=(self, u))
-
-    #     return (sol.t, sol.y.T)
-
+        plt.plot(xyt[:, 0], xyt[:, :], **kwargs)
+        plt.legend(["x", "y", "$\\theta$"])
+        if block is not None:
+            plt.show(block=block)
 
 
 # ========================================================================= #
 
-class Bicycle(VehicleBase):
 
-    def __init__(self,
-                L=1,
-                steer_max=0.45 * pi,
-                **kwargs
-                ):
+class Bicycle(VehicleBase):
+    def __init__(self, L=1, steer_max=0.45 * pi, **kwargs):
         r"""
         Create bicycle kinematic model
 
         :param L: wheel base, defaults to 1
         :type L: float, optional
-        :param steer_max: [description], defaults to :math:`0.45\pi`
+        :param steer_max: maximum steering angle, defaults to :math:`0.45\pi`
         :type steer_max: float, optional
         :param kwargs: additional arguments passed to :class:`VehicleBase`
             constructor
 
         Model the motion of a bicycle model with equations of motion given by:
 
         .. math::
@@ -920,15 +971,18 @@
 
         self._l = L
         self._steer_max = steer_max
 
     def __str__(self):
 
         s = super().__str__()
-        s += f"\n  L={self._l}, steer_max={self._steer_max:g}, speed_max={self._speed_max:g}, accel_max={self._accel_max:g}"
+        s += (
+            f"\n  L={self._l}, steer_max={self._steer_max:g},"
+            f" speed_max={self._speed_max:g}, accel_max={self._accel_max:g}"
+        )
         return s
 
     @property
     def l(self):
         """
         Vehicle wheelbase
 
@@ -985,69 +1039,68 @@
         r"""
         Time derivative of state
 
         :param x: vehicle state :math:`(x, y, \theta)`
         :type x: array_like(3)
         :param u: control input :math:`(v, \gamma)`
         :type u: array_like(2)
+        :param limits: limits are applied to input, default True
+        :type limits: bool
         :return: state derivative :math:`(\dot{x}, \dot{y}, \dot{\theta})`
         :rtype: ndarray(3)
 
         Returns the time derivative of state (3x1) at the state ``x`` with velocity :math:`v`
         and steered wheel angle :math:`\gamma`
 
         .. math::
                     \dot{x} &= v \cos \theta \\
                     \dot{y} &= v \sin \theta \\
                     \dot{\theta} &= \frac{v}{L} \tan \gamma
 
+        If ``limits`` is True then speed, acceleration and steer-angle limits are
+        applied to ``u``.
+
         :seealso: :meth:`f`
         """
-        
+
         # unpack some variables
         theta = x[2]
 
         if limits:
             u = self.u_limited(u)
         v = u[0]
         gamma = u[1]
-            
-        return v * np.r_[
-                cos(theta), 
-                sin(theta), 
-                tan(gamma) / self.l
-                    ]
+
+        return v * np.r_[cos(theta), sin(theta), tan(gamma) / self.l]
 
     def u_limited(self, u):
         """
         Apply vehicle velocity, acceleration and steering limits
 
         :param u: Desired vehicle inputs :math:`(v, \gamma)`
         :type u: array_like(2)
         :return: Allowable vehicle inputs :math:`(v, \gamma)`
         :rtype: ndarray(2)
 
-        Velocity and acceleration limits are applied to :math:`v` and 
+        Velocity and acceleration limits are applied to :math:`v` and
         steered wheel angle limits are applied to :math:`\gamma`.
         """
         # limit speed and steer angle
         ulim = np.array(u)
-        ulim[0] = self.limits_va(u[0])
+        ulim[0] = self.limits_va(u[0], self._v_prev)
         ulim[1] = np.clip(u[1], -self._steer_max, self._steer_max)
 
         return ulim
 
+
 # ========================================================================= #
 
-class Unicycle(VehicleBase):
 
-    def __init__(self,
-                W=1,
-                steer_max=np.inf,
-                **kwargs):
+class Unicycle(VehicleBase):
+    def __init__(self, W=1, steer_max=np.inf, **kwargs):
         r"""
         Create unicycle kinematic model
 
         :param W: vehicle width, defaults to 1
         :type W: float, optional
         :param steer_max: maximum turn rate
         :type steer_max: float
@@ -1064,92 +1117,211 @@
 
         where :math:`v` is the velocity in body frame x-direction, and 
         :math:`\omega` is the turn rate.
 
         :seealso: :meth:`f` :meth:`deriv` :meth:`Fx` meth:`Fv` :class:`Vehicle`
         """
         super().__init__(**kwargs)
-        self._w = W
+        self._W = W
+        self._steer_max = steer_max
 
     def __str__(self):
 
         s = super().__str__()
-        s += f"\n  W={self._w}, steer_max={self._steer_max}, vel_max={self._vel_max}, accel_max={self.accel_max}"
+        s += (
+            f"\n  W={self._W}, steer_max={self._steer_max:g},"
+            f" vel_max={self._speed_max}, accel_max={self._accel_max}"
+        )
         return s
 
-
-    def deriv(self, t, x, u):
+    def deriv(self, x, u, limits=True):
         r"""
         Time derivative of state
 
         :param x: vehicle state :math:`(x, y, \theta)`
         :type x: array_like(3)
         :param u: control input :math:`(v, \omega)`
         :type u: array_like(2)
+        :param limits: limits are applied to input, default True
+        :type limits: bool
         :return: state derivative :math:`(\dot{x}, \dot{y}, \dot{\theta})`
         :rtype: ndarray(3)
 
         Returns the time derivative of state (3x1) at the state ``x`` with velocity :math:`v`
         and turn rate :math:`\omega`
 
         .. math::
                     \dot{x} &= v \cos \theta \\
                     \dot{y} &= v \sin \theta \\
                     \dot{\theta} &= \omega
 
-        :seealso: :meth:`f`
+        If ``limits`` is True then speed, acceleration and steer-angle limits are
+        applied to ``u``.
 
-        .. note:: Vehicle speed and steering limits are not applied here
+        :seealso: :meth:`f`
         """
-        
+        if limits:
+            u = self.u_limited(u)
         # unpack some variables
         theta = x[2]
         v = u[0]
         vdiff = u[1]
 
-        return np.r_[
-                v * cos(theta), 
-                v * sin(theta), 
-                vdiff / self.w
-                    ]
+        return np.r_[v * cos(theta), v * sin(theta), vdiff / self._W]
 
     def u_limited(self, u):
         """
         Apply vehicle velocity, acceleration and steering limits
 
         :param u: Desired vehicle inputs :math:`(v, \omega)`
         :type u: array_like(2)
         :return: Allowable vehicle inputs :math:`(v, \omega)`
         :rtype: ndarray(2)
 
-        Velocity and acceleration limits are applied to :math:`v` and 
+        Velocity and acceleration limits are applied to :math:`v` and
         turn rate limits are applied to :math:`\omega`.
         """
 
         # limit speed and steer angle
         ulim = np.array(u)
-        ulim[0] = self.limits_va(u[0])
+        ulim[0] = self.limits_va(u[0], self._v_prev)
         ulim[1] = np.maximum(-self._steer_max, np.minimum(self._steer_max, u[1]))
 
         return ulim
 
+
 class DiffSteer(Unicycle):
-    pass
+    def __init__(self, W=1, **kwargs):
+        r"""
+        Create differential steering kinematic model
 
+        :param W: vehicle width, defaults to 1
+        :type W: float, optional
+        :param kwargs: additional arguments passed to :class:`VehicleBase`
+            constructor
+
+        Model the motion of a unicycle model with equations of motion given by:
+
+        .. math::
+
+            \dot{x} &= v \cos \theta \\
+            \dot{y} &= v \sin \theta \\
+            \dot{\theta} &= \omega
+
+        where :math:`v = (v_R + v_L)/2` is the velocity in body frame x-direction, and 
+        :math:`\omega = (v_R - v_L)/W` is the turn rate.
+
+        :seealso: :meth:`f` :meth:`deriv` :meth:`Fx` meth:`Fv` :class:`Vehicle`
+        """
+        super().__init__(**kwargs)
+        self._W = W
+        self._v_prev_L = [0]
+        self._v_prev_R = [0]
+
+    def __str__(self):
+
+        s = super().__str__()
+        return s
+
+    def init(self):
+        super().init()
+        self._v_prev_L = [0]
+        self._v_prev_R = [0]
+
+
+    def u_limited(self, u):
+        """
+        Apply vehicle velocity and acceleration limits
+
+        :param u: Desired vehicle inputs :math:`(v_L, v_R)`
+        :type u: array_like(2)
+        :return: Allowable vehicle inputs :math:`(v_L, v_R)`
+        :rtype: ndarray(2)
+
+        Velocity and acceleration limits are applied to :math:`v` and
+        turn rate limits are applied to :math:`\omega`.
+        """
+
+        # limit speed and acceleration of each wheel/track
+        ulim = np.array(u)
+        ulim[0] = self.limits_va(u[0], self._v_prev_L)
+        ulim[1] = self.limits_va(u[1], self._v_prev_R)
+
+        return ulim
+    
+    def deriv(self, x, u, limits=True):
+        r"""
+        Time derivative of state
+
+        :param x: vehicle state :math:`(x, y, \theta)`
+        :type x: array_like(3)
+        :param u: Desired vehicle inputs :math:`(v_L, v_R)`
+        :type u: array_like(2)
+        :param limits: limits are applied to input, default True
+        :type limits: bool
+        :return: state derivative :math:`(\dot{x}, \dot{y}, \dot{\theta})`
+        :rtype: ndarray(3)
+
+        Returns the time derivative of state (3x1) at the state ``x`` with left and
+        right wheel speeds ``u``.
+
+        .. math::
+
+            \dot{x} &= v \cos \theta \\
+            \dot{y} &= v \sin \theta \\
+            \dot{\theta} &= \omega
+
+        where :math:`v = (v_R + v_L)/2` is the velocity in body frame x-direction, and 
+        :math:`\omega = (v_R - v_L)/W` is the turn rate.
+
+        If ``limits`` is True then speed and acceleration limits are applied to the
+        wheel speeds ``u``.
+
+        :seealso: :meth:`f`
+        """
+        if limits:
+            u = self.u_limited(u)
+        # unpack some variables
+        theta = x[2]
+        vleft = u[0]
+        vright = u[1]
+
+        # convert wheel speeds to forward and differential velocity
+        v = (vright + vleft) / 2.0
+        vdiff = vright - vleft
+
+        return np.r_[v * cos(theta), v * sin(theta), vdiff / self._W]
+
+
+    
 if __name__ == "__main__":
 
     from roboticstoolbox import RandomPath
 
-    V = np.eye(2) * 0.001
-    robot = Bicycle(covar=V, animation="car")
-    odo = robot.step((1, 0.3), animate=False)
+    import roboticstoolbox as rtb
+
+    a = rtb.VehicleMarker(marker="s", markerfacecolor="b")
+    veh = rtb.Bicycle(animation=a, workspace=10)
+    veh.control = (4, 0.5)
+    veh.run(20)
 
-    robot.control = RandomPath(workspace=10)
+    # V = np.eye(2) * 0.001
+    # robot = Bicycle(covar=V, animation="car")
+    # odo = robot.step((1, 0.3), animate=False)
 
-    robot.run(T=10)
+    # robot.control = RandomPath(workspace=10)
+
+    # # robot.run(T=10, animate=True)
+    # # plt.show(block=True)
+
+    # anim = robot.run_animation(T=10, format="html", file="veh.html")
+
+    # anim.save("veh.mp4", writer=animation.FFMpegWriter(fps=1/robot.dt))  # convert to mp4/H264
+    # with open("veh.html", "w") as f:
+    #     f.write(anim.to_html5_video())
 
     # from math import pi
 
     # V = np.diag(np.r_[0.02, 0.5 * pi / 180] ** 2)
 
     # v = VehiclePolygon()
     # # v = VehicleIcon('greycar2', scale=2, rotation=90)
@@ -1184,20 +1356,19 @@
     # print(t)
 
     # fig, ax = plt.subplots()
 
     # ax.set_xlim(-5, 5)
     # ax.set_ylim(-5, 5)
 
-
     # v = VehicleAnimation.Polygon(shape='triangle', maxdim=0.1, color='r')
     # v = VehicleAnimation.Icon('car3.png', maxdim=2, centre=[0.3, 0.5])
     # v = VehicleAnimation.Icon('/Users/corkep/Dropbox/code/robotics-toolbox-python/roboticstoolbox/data/car1.png', maxdim=2, centre=[0.3, 0.5])
     # v = VehicleAnimation.icon('car3.png', maxdim=2, centre=[0.3, 0.5])
     # v = VehicleAnimation.marker()
     # v.start()
     # plt.grid(True)
     # # plt.axis('equal')
 
     # for theta in np.linspace(0, 2 * np.pi, 100):
     #     v.update([0, 0, theta])
-    #     plt.pause(0.1)
+    #     plt.pause(0.1)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -12,21 +12,30 @@
 from roboticstoolbox.mobile.ReedsSheppPlanner import ReedsSheppPlanner
 from roboticstoolbox.mobile.CurvaturePolyPlanner import CurvaturePolyPlanner
 from roboticstoolbox.mobile.QuinticPolyPlanner import QuinticPolyPlanner
 from roboticstoolbox.mobile.RRTPlanner import RRTPlanner
 
 from roboticstoolbox.mobile.Bug2 import Bug2
 
-from roboticstoolbox.mobile.OccGrid import BinaryOccupancyGrid, OccupancyGrid, PolygonMap
+from roboticstoolbox.mobile.OccGrid import (
+    BinaryOccupancyGrid,
+    OccupancyGrid,
+    PolygonMap,
+)
 
 # localization and state estimation
 from roboticstoolbox.mobile.landmarkmap import LandmarkMap
 from roboticstoolbox.mobile.sensors import RangeBearingSensor
 from roboticstoolbox.mobile.drivers import *
-from roboticstoolbox.mobile.Animations import VehicleAnimationBase, VehicleMarker, VehiclePolygon, VehicleIcon
+from roboticstoolbox.mobile.Animations import (
+    VehicleAnimationBase,
+    VehicleMarker,
+    VehiclePolygon,
+    VehicleIcon,
+)
 
 from roboticstoolbox.mobile.PoseGraph import *
 from roboticstoolbox.mobile.EKF import EKF
 from roboticstoolbox.mobile.ParticleFilter import ParticleFilter
 
 __all__ = [
     "VehicleBase",
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/drivers.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/drivers.py`

 * *Files 3% similar despite different names*

```diff
@@ -29,15 +29,15 @@
     @abstractmethod
     def demand(self):
         """
         Compute speed and heading
 
         :return: speed and steering for :class:`VehicleBase`
 
-        When an instance of a :class:`VehicleDriverBase` class is attached as 
+        When an instance of a :class:`VehicleDriverBase` class is attached as
         the control for an instance of a :class:`VehicleBase` class, this method
         is called at each time step to provide the control input.
 
         Has access to the vehicle and its state through the :meth:`vehicle`
         property.
         """
         pass
@@ -67,43 +67,53 @@
     @vehicle.setter
     def vehicle(self, v):
 
         self._veh = v
 
     def __repr__(self):
         return str(self)
+
+
 # ========================================================================= #
 
-class RandomPath(VehicleDriverBase):
 
-    def __init__(self, workspace, speed=1, dthresh=0.05, seed=0, headinggain=0.3, goalmarkerstyle=None):
+class RandomPath(VehicleDriverBase):
+    def __init__(
+        self,
+        workspace,
+        speed=1,
+        dthresh=0.05,
+        seed=0,
+        headinggain=0.3,
+        goalmarkerstyle=None,
+    ):
         """
         Driving agent for random path
 
         :param workspace: dimension of workspace, see :func:`spatialmath.base.exand_dims`
         :type workspace: scalar, array_like(2), array_like(4)
         :param speed: forward speed, defaults to 1
         :type speed: float, optional
         :param dthresh: distance threshold, defaults to 0.05
         :type dthresh: float, optional
 
-        :raises ValueError: [description]
+        :raises ValueError: bad workspace specified
 
-        Returns a *driver* object that drives the attached vehicle to a 
+        Returns a *driver* object that drives the attached vehicle to a
         sequence of random waypoints.
 
         The driver is connected to the vehicle by::
 
             Vehicle(control=driver)
-        
+
         or::
 
             veh = Vehicle()
             veh.control = driver
-        
+
         The waypoints are positioned inside a rectangular region defined by
         the vehicle that is specified by  (see ``plotvol2``):
 
         ==============  =======  =======
         ``workspace``   x-range  y-range
         ==============  =======  =======
         A (scalar)      -A:A     -A:A
@@ -115,61 +125,65 @@
         .. note::
             - It is possible in some cases for the vehicle to move outside the desired
               region, for instance if moving to a waypoint near the edge, the limited
               turning circle may cause the vehicle to temporarily move outside.
             - The vehicle chooses a new waypoint when it is closer than ``dthresh``
               to the current waypoint.
             - Uses its own random number generator so as to not influence the performance
-              of other randomized algorithms such as path planning.
+              of other randomized algorithms such as path planning. Set ``seed=None`` to have it randomly initialized from the
+              operating system.
 
         :seealso: :class:`Bicycle` :class:`Unicycle` :func:`~spatialmath.base.graphics.plotvol2`
         """
-        
+
         # TODO options to specify region, maybe accept a Map object?
-        
-        if hasattr(workspace, 'workspace'):
+
+        if hasattr(workspace, "workspace"):
             # workspace can be defined by an object with a workspace attribute
             self._workspace = base.expand_dims(workspace.workspace)
         else:
             self._workspace = base.expand_dims(workspace)
 
         self._speed = speed
         self._dthresh = dthresh * np.diff(self._workspace[0:2])
         self._goal_marker = None
         if goalmarkerstyle is None:
             self._goal_marker_style = {
-                'marker': 'D',
-                'markersize': 6, 
-                'color': 'r',
-                'linestyle': 'None',
-                }
+                "marker": "D",
+                "markersize": 6,
+                "color": "r",
+                "linestyle": "None",
+            }
         else:
             self._goal_marker_style = goalmarkerstyle
         self._headinggain = headinggain
-        
+
         self._d_prev = np.inf
         self._random = np.random.default_rng(seed)
         self._seed = seed
         self.verbose = True
         self._goal = None
         self._dthresh = dthresh * max(
-                self._workspace[1] - self._workspace[0], 
-                self._workspace[3] - self._workspace[2]
-                                    )
+            self._workspace[1] - self._workspace[0],
+            self._workspace[3] - self._workspace[2],
+        )
 
         self._veh = None
 
     def __str__(self):
         """%RandomPath.char Convert to string
         %
-        % s = R.char() is a string showing driver parameters and state in in 
-        % a compact human readable format. """
+        % s = R.char() is a string showing driver parameters and state in in
+        % a compact human readable format."""
 
-        s = 'RandomPath driver object\n'
-        s += f"  X {self._workspace[0]} : {self._workspace[1]}; Y {self._workspace[0]} : {self._workspace[1]}, dthresh={self._dthresh}\n"
+        s = "RandomPath driver object\n"
+        s += (
+            f"  X {self._workspace[0]} : {self._workspace[1]}; Y {self._workspace[0]} :"
+            f" {self._workspace[1]}, dthresh={self._dthresh}\n"
+        )
         s += f"  current goal={self._goal}"
         return s
 
     @property
     def workspace(self):
         """
         Size of robot driving workspace
@@ -185,27 +199,29 @@
     def init(self, ax=None):
         """
         Initialize random path driving agent
 
         :param ax: axes in which to draw via points, defaults to None
         :type ax: Axes, optional
 
-        Called at the start of a simulation run.  Ensures that the 
-        random number generated is reseeded to ensure that 
+        Called at the start of a simulation run.  Ensures that the
+        random number generated is reseeded to ensure that
         the sequence of random waypoints is repeatable.
         """
 
         if self._seed is not None:
             self._random = np.random.default_rng(self._seed)
-            
+
         self._goal = None
         # delete(driver.h_goal);   % delete the goal
         # driver.h_goal = [];
         if ax is not None:
-            self._goal_marker = plt.plot(np.nan, np.nan, **self._goal_marker_style, label='random waypoint')[0]
+            self._goal_marker = plt.plot(
+                np.nan, np.nan, **self._goal_marker_style, label="random waypoint"
+            )[0]
 
     def demand(self):
         """
         Compute speed and heading for random waypoint
             %
             % [SPEED,STEER] = R.demand() is the speed and steer angle to
             % drive the vehicle toward the next waypoint.  When the vehicle is
@@ -223,32 +239,31 @@
         # elif d > 2 * self._d_prev:
         #     self.choose_goal()
         self._d_prev = d
 
         speed = self._speed
 
         goal_heading = atan2(
-            self._goal[1] - self._veh._x[1], 
-            self._goal[0] - self._veh._x[0]
-                )
+            self._goal[1] - self._veh._x[1], self._goal[0] - self._veh._x[0]
+        )
         delta_heading = base.angdiff(goal_heading, self._veh._x[2])
 
         return np.r_[speed, self._headinggain * delta_heading]
 
     ## private method, invoked from demand() to compute a new waypoint
-    
+
     def _new_goal(self):
-        
+
         # choose a uniform random goal within inner 80% of driving area
         while True:
             r = self._random.uniform(0.1, 0.9)
-            gx = self._workspace[0:2] @ np.r_[r, 1-r]
+            gx = self._workspace[0:2] @ np.r_[r, 1 - r]
 
             r = self._random.uniform(0.1, 0.9)
-            gy = self._workspace[2:4] @ np.r_[r, 1-r]
+            gy = self._workspace[2:4] @ np.r_[r, 1 - r]
 
             self._goal = np.r_[gx, gy]
 
             # check not too close to last goal
             if np.linalg.norm(self._goal - self._veh._x[0:2]) > 2 * self._dthresh:
                 break
 
@@ -256,30 +271,30 @@
             print(f"set goal: {self._goal}")
 
         # update the goal marker
         if self._goal_marker is not None:
             self._goal_marker.set_xdata(self._goal[0])
             self._goal_marker.set_ydata(self._goal[1])
 
+
 # ========================================================================= #
 
-class PurePursuit(VehicleDriverBase):
 
+class PurePursuit(VehicleDriverBase):
     def __init__(self, speed=1, radius=1):
         pass
 
     def __str__(self):
         pass
 
     def init(self):
         pass
 
     def demand(self):
         pass
 
+
 # ========================================================================= #
 
 if __name__ == "__main__":
 
     import unittest
-
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/landmarkmap.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/landmarkmap.py`

 * *Files 4% similar despite different names*

```diff
@@ -2,14 +2,15 @@
 import numpy as np
 import scipy as sp
 from math import pi, sin, cos
 import matplotlib.pyplot as plt
 from spatialmath import base
 import roboticstoolbox as rtb
 
+
 class LandmarkMap:
     """
     Map of planar point landmarks
 
     :param map: map or number of landmarks
     :type map: ndarray(2, N) or int
     :param workspace: workspace or map bounds, defaults to 10
@@ -18,16 +19,16 @@
     :type verbose: bool, optional
     :param seed: random number seed, defaults to 0
     :type seed: int, optional
     :return: a landmark map object
     :rtype: LandmarkMap
 
     A LandmarkMap object represents a rectangular 2D environment with a number
-    of point landmarks. 
-    
+    of point landmarks.
+
     The landmarks can be specified explicitly or be uniform randomly positioned
     inside a region defined by the workspace.  The workspace can be numeric:
 
     ==============  =======  =======
     ``workspace``   x-range  y-range
     ==============  =======  =======
     A (scalar)      -A:A     -A:A
@@ -41,28 +42,27 @@
 
     .. runblock:: pycon
 
         >>> from roboticstoolbox import LandmarkMap
         >>> map = LandmarkMap(20)
         >>> print(map)
         >>> print(map[3])  # coordinates of landmark 3
-    
+
     The object is an iterator that returns consecutive landmark coordinates.
 
     :Reference:
 
         Robotics, Vision & Control, Chap 6,
         Peter Corke,
         Springer 2011
 
     See also :class:`~roboticstoolbox.mobile.sensors.RangeBearingSensor` :class:`~roboticstoolbox.mobile.EKF`
     """
 
     def __init__(self, map, workspace=10, verbose=True, seed=0):
-    
 
         try:
             self._workspace = workspace.workspace
         except:
             self._workspace = base.expand_dims(workspace)
 
         if base.ismatrix(map, (2, None)):
@@ -73,22 +73,21 @@
 
             random = np.random.default_rng(seed)
             x = random.uniform(self._workspace[0], self._workspace[1], self._nlandmarks)
             y = random.uniform(self._workspace[2], self._workspace[3], self._nlandmarks)
             self._map = np.c_[x, y].T
 
         else:
-            raise ValueError('bad type for map')
-    
-        self._verbose = verbose
+            raise ValueError("bad type for map")
 
+        self._verbose = verbose
 
     def __str__(self):
-    # s = M.char() is a string showing map parameters in 
-    # a compact human readable format. 
+        # s = M.char() is a string showing map parameters in
+        # a compact human readable format.
         ws = self._workspace
         s = f"LandmarkMap object with {self._nlandmarks} landmarks, workspace="
         s += f"({ws[0]}: {ws[1]}, {ws[2]}: {ws[3]})"
         return s
 
     def __repr__(self):
         return str(self)
@@ -98,15 +97,14 @@
         Number of landmarks in map
 
         :return: number of landmarks in the map
         :rtype: int
         """
         return self._nlandmarks
 
-
     @property
     def landmarks(self):
         """
         xy-coordinates of all landmarks
 
         :return: xy-coordinates for landmark points
         :rtype: ndarray(2, n)
@@ -133,50 +131,51 @@
         :param k: landmark index
         :type k: int
         :return: coordinate :math:`(x,y)` of k'th landmark
         :rtype: ndarray(2)
         """
         return self._map[:, k]
 
-    def plot(self, labels=False, block=False, **kwargs):
+    def plot(self, labels=False, block=None, **kwargs):
         """
         Plot landmark map
 
         :param labels: number the points on the plot, defaults to False
         :type labels: bool, optional
         :param block: block until figure is closed, defaults to False
         :type block: bool, optional
         :param kwargs: :meth:`~matplotlib.axes.Axes.plot` options
 
         Plot landmark points using Matplotlib options.  Default style is black
         crosses.
         """
 
         ax = base.plotvol2(self._workspace)
-        ax.set_aspect('equal')
+        ax.set_aspect("equal")
 
-        ax.set_xlabel('x')
-        ax.set_ylabel('y')
+        ax.set_xlabel("x")
+        ax.set_ylabel("y")
 
         if len(kwargs) == 0:
             kwargs = {
-                'linewidth': 0,
-                'marker': 'x',
-                'color': 'black',
-                'linestyle': 'None',
+                "linewidth": 0,
+                "marker": "x",
+                "color": "black",
+                "linestyle": "None",
             }
 
-        if 'label' not in kwargs:
-            kwargs['label'] = 'landmark'
+        if "label" not in kwargs:
+            kwargs["label"] = "landmark"
 
         # plt.plot(self._map[0,:], self._map[1,:], , **kwargs)
         if labels:
             labels = "#{}"
         else:
             labels = None
         base.plot_point(self._map, text=labels, **kwargs)
         plt.grid(True)
-        plt.show(block=block)
+        if block is not None:
+            plt.show(block=block)
+
 
 if __name__ == "__main__":
     import unittest
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/mobile/sensors.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/mobile/sensors.py`

 * *Files 6% similar despite different names*

```diff
@@ -27,30 +27,40 @@
   Peter Corke,
   Springer 2011
 
 See also RangeBearingSensor, EKF, Vehicle, Landmarkself.
 
 """
 
+
 class SensorBase(ABC):
     # TODO, pose option, wrt vehicle
 
     # robot
     # map
-    
+
     # verbose
-    
+
     # ls
     # animate     # animate sensor measurements
     # interval    # measurement return subsample factor
     # fail
     # delay
-        
 
-    def __init__(self, robot, map, every=1, fail=[], animate=False, delay=0.1, seed=0, verbose=False):
+    def __init__(
+        self,
+        robot,
+        map,
+        every=1,
+        fail=[],
+        plot=False,
+        delay=0.1,
+        seed=0,
+        verbose=False,
+    ):
         """Sensor.Sensor Sensor object constructor
         %
         # S = Sensor(VEHICLE, MAP, OPTIONS) is a sensor mounted on a vehicle
         # described by the Vehicle subclass object VEHICLE and observing landmarks
         # in a map described by the LandmarkMap class object self.
         %
         # Options::
@@ -62,34 +72,33 @@
         # Notes::
         # - Animation shows a ray from the vehicle position to the selected
         #   landmark.
         """
         self._robot = robot
         self._map = map
         self._every = every
-        self._fail =  fail
-        
+        self._fail = fail
+
         self._verbose = verbose
 
         self.delay = 0.1
 
-        self._animate = animate
+        self._animate = plot
 
         self._seed = seed
         self.init()
 
     def init(self):
         """
         Initialize sensor (superclass)
 
         - reseed the random number generator
         - reset the counter for handling the ``every`` and ``fail`` options
         """
-        if self._seed is not None:
-            self._random = np.random.default_rng(self._seed)
+        self._random = np.random.default_rng(self._seed)
         self._count = 0
 
     def __str__(self):
         """
         Convert sensor parameters to a string (superclass)
         %
         # s = self.char() is a string showing sensor parameters in
@@ -159,33 +168,33 @@
         """
         Plot sensor observation
 
         :param id: landmark id
         :type id: int
 
         Draws a line from the robot to landmark ``id``.
-        
+
         .. note::
             - The line is drawn using the ``line_style`` given at constructor time
 
         """
         pass
 
         # if isempty(self.ls)
         #     return
         # end
-        
+
         # h = findobj(gca, 'tag', 'sensor')
         # if isempty(h)
         #     # no sensor line, create one
         #     h = plot(0, 0, self.ls, 'tag', 'sensor')
         # end
-        
+
         # # there is a sensor line animate it
-        
+
         # if lm_id == 0
         #     set(h, 'Visible', 'off')
         # else
         #     xi = self.self.map(:,lm_id)
         #     set(h, 'Visible', 'on', 'XData', [self.robot.x[0], xi[0]], 'YData', [self.robot.x[1], xi[1]])
         # end
         # pause(self.delay)
@@ -195,42 +204,44 @@
 
 # ======================================================================== #
 
 # visibility function, for one id, or return list of visible
 # covar can be 2x2 or (2,)
 # .W property
 class RangeBearingSensor(SensorBase):
-
-
-    def __init__(self, robot, map, 
-            line_style=None,
-            poly_style=None,
-            covar=None, 
-            range=None,
-            angle=None,
-            plot=False,
-            seed=0,
-            **kwargs):
+    def __init__(
+        self,
+        robot,
+        map,
+        line_style=None,
+        poly_style=None,
+        covar=None,
+        range=None,
+        angle=None,
+        plot=False,
+        seed=0,
+        **kwargs,
+    ):
 
         r"""
-        Range and bearing angke sensor
+        Range and bearing angle sensor
 
         :param robot: model of robot carrying the sensor
         :type robot: :class:`VehicleBase` subclass
         :param map: map of landmarks
         :type map: :class:`LandmarkMap` instance
         :param polygon: polygon style for sensing region, see :class:`~spatialmath.base.graphics.plot_polygon`, defaults to None
         :type polygon: dict, optional
         :param covar: covariance matrix for sensor readings, defaults to None
         :type covar: ndarray(2,2), optional
         :param range: maximum range :math:`r_{max}` or range span :math:`[r_{min}, r_{max}]`, defaults to None
         :type range: float or array_like(2), optional
         :param angle: angular field of view, from :math:`[-\theta, \theta]` defaults to None
         :type angle: float, optional
-        :param plot: [description], defaults to False
+        :param plot: animate the sensor beams, defaults to False
         :type plot: bool, optional
         :param seed: random number seed, defaults to 0
         :type seed: int, optional
         :param kwargs: arguments passed to :class:`SensorBase`
 
         Sensor object that returns the range and bearing angle :math:`(r,
         \beta)` to a point landmark from a robot-mounted sensor.  The sensor
@@ -253,29 +264,31 @@
             >>> map = LandmarkMap(20)
             >>> sensor = RangeBearingSensor(robot, map, range=(0.5, 20), angle=pi/4)
             >>> print(sensor)
 
         :seealso: :class:`~roboticstoolbox.mobile.LandmarkMap` :class:`~roboticstoolbox.mobile.EKF`
         """
 
+        # TODO change plot option to animate, but RVC3 uses plot
+
         # call the superclass constructor
         super().__init__(robot, map, **kwargs)
 
         self._line_style = line_style
         self._poly_style = poly_style
 
         if covar is None:
-            self._W = np.zeros((2,2))
+            self._W = np.zeros((2, 2))
         elif base.isvector(covar, 2):
             self._W = np.diag(covar)
         elif base.ismatrix(covar, (2, 2)):
             self._W = covar
         else:
-            raise ValueError('bad value for covar, must have shape (2,) or (2,2)')
-        
+            raise ValueError("bad value for covar, must have shape (2,) or (2,2)")
+
         if range is None:
             self._r_range = None
         elif isinstance(range, Iterable):
             self._r_range = base.getvector(range, 2)
         else:
             self._r_range = [0, range]
 
@@ -286,15 +299,15 @@
         else:
             self._theta_range = [-angle, angle]
 
         self._animate = plot
         self._landmarklog = []
 
         self._random = np.random.default_rng(seed)
-        
+
     def __str__(self):
         s = super().__str__()
         s += f"\n  W = {base.array2str(self._W)}\n"
 
         s += f"  sampled every {self._every} samples\n"
         if self._r_range is not None:
             s += f"  range: ({self._r_range[0]}: {self._r_range[1]})\n"
@@ -327,28 +340,27 @@
         :return: sensor covariance
         :rtype: ndarray(2,2)
 
         Returns the value of the sensor covariance matrix passed to
         the constructor.
         """
         return self._covar
-    
 
     def reading(self):
         r"""
         Choose landmark and return observation
 
         :return: range and bearing angle to a landmark, and landmark id
         :rtype: ndarray(2), int
 
         Returns an observation of a random visible landmark (range, bearing) and
         the ``id`` of that landmark. The landmark is chosen randomly from the
         set of all visible landmarks, those within the angular field of view and
         range limit.
-        
+
         If constructor argument ``every`` is set then only return a valid
         reading on every ``every`` calls.
 
         If constructor argument ``fail`` is set then do not return a reading
         during that specified time interval.
 
         If no valid reading is available then return (None, None)
@@ -357,29 +369,29 @@
 
             >>> from roboticstoolbox import Bicycle, LandmarkMap, RangeBearingSensor
             >>> from math import pi
             >>> robot = Bicycle()
             >>> map = LandmarkMap(20)
             >>> sensor = RangeBearingSensor(robot, map, range=(0.5, 20), angle=pi/4)
             >>> print(sensor.reading())
-    
+
         .. note::
 
             - Noise with covariance ``W`` (set by constructor) is added to the
               reading
             - If ``animate`` option is set then show a line from the vehicle to
               the landmark
                 - If ``animate`` option set and the angular and distance limits
                   are set then display the sensor field of view as a polygon.
 
         :seealso: :meth:`h`
         """
-        
+
         # TODO probably should return K=0 to indicated invalid
-        
+
         # model a sensor that emits readings every interval samples
         self._count += 1
 
         # check conditions for NOT returning a value
         z = []
         lm_id = -1
         # sample interval
@@ -389,20 +401,20 @@
 
         # simulated failure, fail is a list of 2-tuples giving (start,end) times
         # for a sensor failure
         if self._fail is not None:
             if any([start <= self._count < end for start, end in self._fail]):
                 self._landmarklog.append(lm_id)
                 return (None, None)
-        
+
         # create a polygon to indicate the active sensing area based on range+angle limits
         # if self.animate && ~isempty(self.theta_range) && ~isempty(self.r_range)
         #     h = findobj(gca, 'tag', 'sensor-area')
         #     if isempty(h)
-                
+
         #         th=linspace(self.theta_range[0], self.theta_range[1], 20)
         #         x = self.r_range[1] * cos(th)
         #         y = self.r_range[1] * sin(th)
         #         if self.r_range[0] > 0
         #             th = flip(th)
         #             x = [x self.r_range[0] * cos(th)]
         #             y = [y self.r_range[0] * sin(th)]
@@ -411,15 +423,15 @@
         #             y = [y 0]
         #         end
         #         # no sensor zone, create one
         #         plot_poly([x; y], 'fillcolor', 'r', 'alpha', 0.1, 'edgecolor', 'none', 'animate', 'tag', 'sensor-area')
         #     else
         #         hg = get(h, 'Parent')
         #         plot_poly(h, self.robot.x)
-        
+
         zk = self.visible()
         if len(zk) > 1:
             # more than 1 visible landmark, pick a random one
             i = self._random.integers(len(zk))
             z = zk[i][0]
             lm_id = zk[i][1]
             if self.verbose:
@@ -428,30 +440,30 @@
             # just 1 visible landmark
             z = zk[0][0]
             lm_id = zk[0][1]
             if self.verbose:
                 print(f"Sensor:: feature {lm_id}: ({z[0]}, {z[1]})")
         else:
             if self.verbose:
-                print('Sensor:: no features\n')
+                print("Sensor:: no features\n")
             self._landmarklog.append(lm_id)
             return (None, None)
 
         # compute the range and bearing from robot to feature
-        # z = self.h(self.robot.x, lm_id)  
-        
+        # z = self.h(self.robot.x, lm_id)
+
         if self._animate:
             self.plot(lm_id)
-        
+
         # add the reading to the landmark log
         self._landmarklog.append(lm_id)
 
         # add noise with covariance W
         z += self._random.multivariate_normal((0, 0), self._W)
-    
+
         return z, lm_id
 
     def visible(self):
         """
         List of all visible landmarks
 
         :return: list of visible landmarks
@@ -463,22 +475,24 @@
 
         :seealso: :meth:`isvisible` :meth:`h`
         """
         # get range/bearing to all landmarks
         z = self.h(self.robot.x)
         zk = [(z, k) for k, z in enumerate(z)]
         # a list of tuples, each tuple is ((range, bearing), k)
-        
+
         if self._r_range is not None:
             zk = filter(lambda zk: self._r_range[0] <= zk[0][0] <= self._r_range[1], zk)
 
         if self._theta_range is not None:
             # find all within angular range as well
-            zk = filter(lambda zk: self._theta_range[0] <= zk[0][1] <= self._theta_range[1], zk)
-        
+            zk = filter(
+                lambda zk: self._theta_range[0] <= zk[0][1] <= self._theta_range[1], zk
+            )
+
         return list(zk)
 
     def isvisible(self, id):
         """
         Test if landmark is visible
 
         :param id: landmark id
@@ -488,18 +502,21 @@
 
         The landmark ``id`` is visible if it lies with the sensing range and
         field of view of the sensor at the robot's current configuration.
 
         :seealso: :meth:`visible` :meth:`h`
         """
         z = self.h(self.robot.x, id)
-        
-        return ((self._r_range is None) or self._r_range[0] <= z[0] <= self._r_range[1]) and \
-        ((self._theta_range is None) or self._theta_range[0] <= z[1] <= self._theta_range[1])
 
+        return (
+            (self._r_range is None) or self._r_range[0] <= z[0] <= self._r_range[1]
+        ) and (
+            (self._theta_range is None)
+            or self._theta_range[0] <= z[1] <= self._theta_range[1]
+        )
 
     def h(self, x, landmark=None):
         r"""
         Landmark observation function
 
         :param x: vehicle state :math:`(x, y, \theta)`
         :type x: array_like(3), array_like(N,3)
@@ -509,15 +526,15 @@
         :rtype: ndarray(2) or ndarray(N,2)
 
         Return the range and bearing to a landmark:
 
         - ``.h(x)`` is range and bearing to all landmarks, one row per landmark
         - ``.h(x, id)`` is range and bearing to landmark ``id``
         - ``.h(x, p)`` is range and bearing to landmark with coordinates ``p``
-        
+
         .. runblock:: pycon
 
             >>> from roboticstoolbox import Bicycle, LandmarkMap, RangeBearingSensor
             >>> from math import pi
             >>> robot = Bicycle()
             >>> map = LandmarkMap(20)
             >>> sensor = RangeBearingSensor(robot, map, range=(0.5, 20), angle=pi/4)
@@ -557,17 +574,16 @@
             xlm = base.getvector(landmark, 2)
             dx = xlm[0] - x
             dy = xlm[1] - y
 
         # compute range and bearing (Vectorized code)
 
         z = np.c_[
-                np.sqrt(dx**2 + dy**2), 
-                base.angdiff(np.arctan2(dy, dx), t) 
-            ]  # range & bearing as columns
+            np.sqrt(dx**2 + dy**2), base.angdiff(np.arctan2(dy, dx), t)
+        ]  # range & bearing as columns
 
         if z.shape[0] == 1:
             return z[0]
         else:
             return z
 
     def Hx(self, x, landmark):
@@ -582,15 +598,15 @@
         :rtype: ndarray(2,3)
 
         Compute the Jacobian of the observation function with respect to vehicle
         configuration :math:`\partial h/\partial x`
 
         - ``sensor.Hx(q, id)`` is Jacobian for landmark ``id``
         - ``sensor.h(q, p)`` is Jacobian for landmark with coordinates ``p``
-        
+
         :seealso: :meth:`h` :meth:`Hp` :meth:`Hw`
         """
 
         if base.isinteger(landmark):
             # landmark index provided
             xf = self.map[landmark]
         else:
@@ -618,15 +634,15 @@
         :rtype: ndarray(2,2)
 
         Compute the Jacobian of the observation function with respect
         to landmark position :math:`\partial h/\partial p`
 
         - ``sensor.Hp(x, id)`` is Jacobian for landmark ``id``
         - ``sensor.Hp(x, p)`` is Jacobian for landmark with coordinates ``p``
-        
+
         :seealso: :meth:`h` :meth:`Hx` :meth:`Hw`
         """
         if base.isinteger(landmark):
             xf = self.map.landmark(landmark)
         else:
             xf = landmark
         x = base.getvector(x, 3)
@@ -654,15 +670,15 @@
         Compute the Jacobian of the observation function with respect
         to sensor noise :math:`\partial h/\partial w`
 
         - ``sensor.Hw(x, id)`` is Jacobian for landmark ``id``
         - ``sensor.Hw(x, p)`` is Jacobian for landmark with coordinates ``p``
 
         .. note:: ``x`` and ``landmark`` are not used to compute this.
-        
+
         :seealso: :meth:`h` :meth:`Hx` :meth:`Hp`
         """
         return np.eye(2)
 
     def g(self, x, z):
         r"""
         Landmark position from sensor observation
@@ -676,15 +692,14 @@
 
         Compute the world coordinate  of a landmark given
         the observation ``z`` from a vehicle state with ``x``.
 
         :seealso: :meth:`h` :meth:`Gx` :meth:`Gz`
         """
 
-
         range = z[0]
         bearing = z[1] + x[2]  # bearing angle in vehicle frame
 
         # fmt: off
         return np.r_[
             x[0] + range * cos(bearing),
             x[1] + range * sin(bearing)
@@ -738,19 +753,20 @@
         # fmt: off
         return np.array([
             [cos(theta + bearing),   -r * sin(theta + bearing)],
             [sin(theta + bearing),    r * cos(theta + bearing)],
             ])
         # fmt: on
 
+
 if __name__ == "__main__":
-    
+
     from roboticstoolbox import Bicycle, LandmarkMap, RangeBearingSensor
     from math import pi
+
     robot = Bicycle()
     map = LandmarkMap(20)
-    sensor = RangeBearingSensor(robot, map, range=(0.5, 20), angle=pi/4)
+    sensor = RangeBearingSensor(robot, map, range=(0.5, 20), angle=pi / 4)
     print(sensor.reading())
     print(sensor.visible())
     print(sensor.isvisible(3))
     print(sensor.isvisible(4))
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/AL5D.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/AL5D.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Ball.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Ball.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Baxter.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Baxter.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Cobra600.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Cobra600.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Coil.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Coil.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Hyper.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Hyper.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Hyper3d.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Hyper3d.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/IRB140.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/IRB140.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Jaco.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Jaco.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/KR5.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/KR5.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/LWR4.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/LWR4.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Mico.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Mico.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Orion5.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Orion5.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/P8.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/P8.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Panda.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Panda.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Planar2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Planar2.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Planar3.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Planar3.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Puma560.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Puma560.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Sawyer.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Sawyer.py`

 * *Files 2% similar despite different names*

```diff
@@ -54,31 +54,31 @@
         # kinematic parameters
         a = np.r_[81, 0, 0, 0, 0, 0, 0] * mm
         d = np.r_[317, 192.5, 400, 168.5, 400, 136.3, 133.75] * mm
         alpha = [-pi / 2, -pi / 2, -pi / 2, -pi / 2, -pi / 2, -pi / 2, 0]
 
         links = []
 
-        for j in range(6):
+        for j in range(7):
             link = RevoluteDH(d=d[j], a=a[j], alpha=alpha[j])
             links.append(link)
 
         super().__init__(
             links,
             name="Sawyer",
             manufacturer="Rethink Robotics",
             keywords=(
                 "redundant",
                 "symbolic",
             ),
             symbolic=symbolic,
         )
 
-        self.qr = np.zeros(6)
-        self.qz = np.zeros(6)
+        self.qr = np.zeros(7)
+        self.qz = np.zeros(7)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Stanford.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Stanford.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/TwoLink.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/TwoLink.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/UR10.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/UR10.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/UR3.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/UR3.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/UR5.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/UR5.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/Uprighttl.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/Uprighttl.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/DH/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/DH/__init__.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Frankie.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Frankie.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET
 from roboticstoolbox.robot.ETS import ETS
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 
 
-class Frankie(ERobot):
+class Frankie(Robot):
     """
     A class representing the Franka Emika Panda robot arm. ETS taken from [1]
     based on https://frankaemika.github.io/docs/control_parameters.html
 
     :param et_list: List of elementary transforms which represent the robot
         kinematics
     :type et_list: list of etb.robot.et
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/GenericSeven.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/GenericSeven.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET
 from roboticstoolbox.robot.ETS import ETS
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 
 
-class GenericSeven(ERobot):
+class GenericSeven(Robot):
     """
     Create model of a generic seven degree-of-freedom robot
 
     robot = GenericSeven() creates a robot object. This robot is represented
     using the elementary transform sequence (ETS).
 
     """
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Omni.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Omni.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET
 from roboticstoolbox.robot.ETS import ETS
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 import spatialgeometry as sg
 import spatialmath as sm
 
 
-class Omni(ERobot):
+class Omni(Robot):
     """
     A class an omnidirectional mobile robot.
 
     :param et_list: List of elementary transforms which represent the robot
         kinematics
     :type et_list: list of etb.robot.et
     :param q_idx: List of indexes within the ets_list which correspond to
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Panda.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Panda.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 
 
-class Panda(ERobot):
+class Panda(Robot):
     """
     Create model of Franka-Emika Panda manipulator
 
     panda = Panda() creates a robot object representing the Franka-Emika
     Panda robot arm. This robot is represented using the elementary
     transform sequence (ETS).
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Planar2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Planar2.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET2
 from roboticstoolbox.robot.ETS import ETS2
-from roboticstoolbox.robot.ERobot import ERobot2
+from roboticstoolbox.robot.Robot import Robot2
 from roboticstoolbox.robot.Link import Link2
 
 
-class Planar2(ERobot2):
+class Planar2(Robot2):
     """
     Create model of a branched planar manipulator::
 
         L0 -- L1 -+- L2a -- L3a -- EEa
                 |
                 +- L2b -- L3b -- EEb
 
@@ -31,19 +31,19 @@
 
         l0 = Link2(ETS2(ET2.R()), name="link0")
         l1 = Link2(ETS2(ET2.tx(a1)) * ET2.R(), name="link1", parent=l0)
         l2 = Link2(ETS2(ET2.tx(a2)), name="ee", parent=l1)
 
         super().__init__([l0, l1, l2], name="Planar2", comment="Planar 2D manipulator")
 
-        self.qr = np.array([0, 0])
+        self.qb = np.array([0, np.pi/2])
         self.qz = np.zeros(2)
 
-        self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
+        self.addconfiguration("qb", self.qb)
 
 
 if __name__ == "__main__":  # pragma nocover
 
     robot = Planar2()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Planar_Y.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Planar_Y.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET
 from roboticstoolbox.robot.ETS import ETS
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 
 
-class Planar_Y(ERobot):
+class Planar_Y(Robot):
     """
     Create model of a branched planar manipulator::
 
         L0 -- L1 -+- L2a -- L3a -- EEa
                 |
                 +- L2b -- L3b -- EEb
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/Puma560.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/Puma560.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 from roboticstoolbox import ET as ET
-from roboticstoolbox import ERobot
+from roboticstoolbox import Robot
 import numpy as np
 
 
-class Puma560(ERobot):
+class Puma560(Robot):
     """
     Create model of Franka-Emika Panda manipulator
 
     ``puma = Puma560()`` creates a robot object representing the classic
     Unimation Puma560 robot arm. This robot is represented using the elementary
     transform sequence (ETS).
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/XYPanda.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/XYPanda.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.ET import ET
 from roboticstoolbox.robot.ETS import ETS
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 
 
-class XYPanda(ERobot):
+class XYPanda(Robot):
     """
     Create model of Franka-Emika Panda manipulator on an XY platform
 
     xypanda = XYPanda() creates a robot object representing the Franka-Emika
     Panda robot arm mounted on an XY platform. This robot is represented using the elementary
     transform sequence (ETS).
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/ETS/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/ETS/__init__.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/AL5D.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/AL5D.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from math import pi
 
-class AL5D(ERobot):
+
+class AL5D(Robot):
     """
     Class that imports a AL5D URDF model
 
     ``AL5D()`` is a class which imports a Lynxmotion AL5D robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
@@ -43,11 +44,12 @@
 
         # zero angles, upper arm pointing up, lower arm straight ahead
         self.addconfiguration("qz", np.array([0, 0, 0, 0]))
 
         # reference pose robot pointing upwards
         self.addconfiguration("up", np.array([0.0000, 0.0000, 1.5707, 0.0000]))
 
+
 if __name__ == "__main__":  # pragma nocover
 
     robot = AL5D()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Fetch.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/FetchCamera.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,64 +1,66 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
+
 # from spatialmath import SE3
 
 
-class Fetch(ERobot):
+class FetchCamera(Robot):
     """
-    Class that imports a Fetch URDF model
+    Class that imports a FetchCamera URDF model
 
-    ``Fetch()`` is a class which imports a Fetch robot definition
+    ``FetchCamera()`` is a class which imports a FetchCamera robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
         >>> robot = rtb.models.URDF.Fetch()
         >>> print(robot)
 
     Defined joint configurations are:
 
-    - qz, zero joint angle configuration, arm is stretched out in the x-direction
-    - qr, tucked arm configuration
+    - qz, zero joint angle configuration
+    - qr, zero joint angle configuration
 
     .. codeauthor:: Kerry He
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "fetch_description/robots/fetch.urdf"
+            "fetch_description/robots/fetch_camera.urdf"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Fetch",
-            gripper_links=links[11],
+            gripper_links=links[6],
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        self.qdlim = np.array([4.0, 4.0, 0.1, 1.25, 1.45, 1.57, 1.52, 1.57, 2.26, 2.26])
+        # self.grippers[0].tool = SE3(0, 0, 0.1034)
+        self.qdlim = np.array([4.0, 4.0, 0.1, 1.57, 1.57])
 
-        self.qz = np.array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])
-        self.qr = np.array([0, 0, 0.05, 1.32, 1.4, -0.2, 1.72, 0, 1.66, 0])
+        self.qz = np.array([0, 0, 0, 0, 0])
+        self.qr = np.array([0, 0, 0, 0, 0])
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = Fetch()
+    robot = FetchCamera()
     print(robot)
 
     for link in robot.links:
         print(link.name)
         print(link.isjoint)
         print(len(link.collision))
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/FetchCamera.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/UR10.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,71 +1,54 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
-# from spatialmath import SE3
+from roboticstoolbox.robot.Robot import Robot
 
 
-class FetchCamera(ERobot):
+class UR10(Robot):
     """
-    Class that imports a FetchCamera URDF model
+    Class that imports a UR10 URDF model
 
-    ``FetchCamera()`` is a class which imports a FetchCamera robot definition
-    from a URDF file.  The model describes its kinematic and graphical
-    characteristics.
+    ``UR3()`` is a class which imports a Universal Robotics UR310 robot
+    definition from a URDF file.  The model describes its kinematic and
+    graphical characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.Fetch()
+        >>> robot = rtb.models.URDF.UR10()
         >>> print(robot)
 
     Defined joint configurations are:
 
-    - qz, zero joint angle configuration
-    - qr, zero joint angle configuration
+    - qz, zero joint angle configuration, 'L' shaped configuration
+    - qr, vertical 'READY' configuration
 
-    .. codeauthor:: Kerry He
+    .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "fetch_description/robots/fetch_camera.urdf"
+            "ur_description/urdf/ur10_joint_limited_robot.urdf.xacro"
         )
 
         super().__init__(
             links,
-            name=name,
-            manufacturer="Fetch",
-            gripper_links=links[6],
+            name=name.upper(),
+            manufacturer="Universal Robotics",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        # self.grippers[0].tool = SE3(0, 0, 0.1034)
-        self.qdlim = np.array([4.0, 4.0, 0.1, 1.57, 1.57])
-
-        self.qz = np.array([0, 0, 0, 0, 0])
-        self.qr = np.array([0, 0, 0, 0, 0])
+        self.qr = np.array([np.pi, 0, 0, 0, np.pi / 2, 0])
+        self.qz = np.zeros(6)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = FetchCamera()
+    robot = UR10()
     print(robot)
-
-    for link in robot.links:
-        print(link.name)
-        print(link.isjoint)
-        print(len(link.collision))
-
-    print()
-
-    for link in robot.grippers[0].links:
-        print(link.name)
-        print(link.isjoint)
-        print(len(link.collision))
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Frankie.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Frankie.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from spatialmath import SE3
 
 
-class Frankie(ERobot):
+class Frankie(Robot):
     """
     Class that imports a Frankie URDF model
 
     ``Frankie()`` is a class which imports a Frankie robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/FrankieOmni.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/FrankieOmni.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from roboticstoolbox.robot.Link import Link
 from roboticstoolbox.robot.ETS import ETS
 from roboticstoolbox.robot.ET import ET
 from spatialmath import SE3
 
 
-class FrankieOmni(ERobot):
+class FrankieOmni(Robot):
     """
     Class that imports an Omnidirectional Frankie URDF model
 
     ``FrankieOmni()`` is a class which imports a FrankieOmni robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/KinovaGen3.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/KinovaGen3.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class KinovaGen3(ERobot):
+class KinovaGen3(Robot):
     """
     Class that imports a KinovaGen3 URDF model
 
     ``KinovaGen3()`` is a class which imports a KinovaGen3 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/LBR.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/LBR.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class LBR(ERobot):
+class LBR(Robot):
     """
     Class that imports a LBR URDF model
 
     ``LBR()`` is a class which imports a Franka-Emika LBR robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Mico.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Mico.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 #!/usr/bin/env python
 
 import numpy as np
 from roboticstoolbox.robot.Link import Link
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class Mico(ERobot):
+class Mico(Robot):
     """
     Class that imports a Mico URDF model
 
     ``Panda()`` is a class which imports a Kinova Mico robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/PR2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/PR2.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 #!/usr/bin/env python
 
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 import numpy as np
 
 
-class PR2(ERobot):
+class PR2(Robot):
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
             "pr2_description/robots/pr2.urdf.xacro", xacro_tld="pr2_description"
         )
 
         super().__init__(
@@ -26,14 +26,16 @@
 
         self.qr = np.zeros(31)
         self.qz = np.zeros(31)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
+        self.qdlim = 2.0 * np.ones(31)
+
 
 if __name__ == "__main__":  # pragma nocover
 
     r = PR2()
 
     # i = 0
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Panda.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Panda.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot, ERobot2
+from roboticstoolbox.robot.Robot import Robot
 from spatialmath import SE3
 
 
-class Panda(ERobot):
+class Panda(Robot):
     """
     Class that imports a Panda URDF model
 
     ``Panda()`` is a class which imports a Franka-Emika Panda robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Puma560.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Puma560.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from math import pi
 
 
-class Puma560(ERobot):
+class Puma560(Robot):
     """
     Class that imports a Puma 560 URDF model
 
     ``Puma560()`` is a class which imports a Unimation Puma560 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
@@ -90,7 +90,9 @@
         self.addconfiguration_attr("qn", np.array([0, pi / 4, pi, 0, pi / 4, 0]))
 
 
 if __name__ == "__main__":  # pragma nocover
 
     robot = Puma560()
     print(robot)
+
+    print(robot.ee_links)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/UR10.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/UR3.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,40 +1,40 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class UR10(ERobot):
+class UR3(Robot):
     """
-    Class that imports a UR10 URDF model
+    Class that imports a UR3 URDF model
 
-    ``UR3()`` is a class which imports a Universal Robotics UR310 robot
+    ``UR3()`` is a class which imports a Universal Robotics UR3 robot
     definition from a URDF file.  The model describes its kinematic and
     graphical characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.UR10()
+        >>> robot = rtb.models.URDF.UR3()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "ur_description/urdf/ur10_joint_limited_robot.urdf.xacro"
+            "ur_description/urdf/ur3_joint_limited_robot.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name.upper(),
             manufacturer="Universal Robotics",
             urdf_string=urdf_string,
@@ -46,9 +46,9 @@
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = UR10()
+    robot = UR3()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/UR3.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/rx150.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,54 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class UR3(ERobot):
+class rx150(Robot):
     """
-    Class that imports a UR3 URDF model
+    Class that imports a RX150 URDF model
 
-    ``UR3()`` is a class which imports a Universal Robotics UR3 robot
-    definition from a URDF file.  The model describes its kinematic and
-    graphical characteristics.
+    ``rx150()`` is a class which imports an Interbotix rx150 robot definition
+    from a URDF file.  The model describes its kinematic and graphical
+    characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.UR3()
+        >>> robot = rtb.models.URDF.rx150()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
+    :reference:
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/rx150.html
+
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "ur_description/urdf/ur3_joint_limited_robot.urdf.xacro"
+            "interbotix_descriptions/urdf/rx150.urdf.xacro"
         )
 
         super().__init__(
             links,
-            name=name.upper(),
-            manufacturer="Universal Robotics",
+            name=name,
+            manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        self.qr = np.array([np.pi, 0, 0, 0, np.pi / 2, 0])
-        self.qz = np.zeros(6)
+        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0])
+        self.qz = np.zeros(7)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = UR3()
+    robot = rx150()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/UR5.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/UR5.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 from math import pi
 
 
-class UR5(ERobot):
+class UR5(Robot):
     """
     Class that imports a UR5 URDF model
 
     ``UR3()`` is a class which imports a Universal Robotics UR5 robot
     definition from a URDF file.  The model describes its kinematic and
     graphical characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/Valkyrie.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/Valkyrie.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot, Link
+from roboticstoolbox.robot.Robot import Robot, Link
 
 
-class Valkyrie(ERobot):
+class Valkyrie(Robot):
     """
     Class that imports a NASA Valkyrie URDF model
 
     ``Valkyrie()`` is a class which imports a NASA Valkyrie robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/YuMi.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/YuMi.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 #!/usr/bin/env python
 
 from roboticstoolbox.robot.Link import Link
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 import spatialmath as sm
 
 
-class YuMi(ERobot):
+class YuMi(Robot):
     """
     Class that imports an ABB YuMi URDF model
 
     ``YuMi()`` is a class which imports an ABB YuMi (IRB14000) robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/__init__.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/px100.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/vx300.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,57 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class px100(ERobot):
+class vx300(Robot):
     """
-    Class that imports a PX100 URDF model
+    Class that imports a VX300 URDF model
 
-    ``px100()`` is a class which imports an Interbotix px100 robot definition
+    ``vx300()`` is a class which imports an Interbotix vx300 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.px100()
+        >>> robot = rtb.models.URDF.vx300()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/px100.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/vx300.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/px100.urdf.xacro"
+            "interbotix_descriptions/urdf/vx300.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4])
-        self.qz = np.zeros(7)
+        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0])
+        self.qz = np.zeros(8)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = px100()
+    robot = vx300()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/px150.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/wx250s.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,57 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class px150(ERobot):
+class wx250s(Robot):
     """
-    Class that imports a PX150 URDF model
+    Class that imports a wx250s URDF model
 
-    ``px150()`` is a class which imports an Interbotix px150 robot definition
+    ``wx250s()`` is a class which imports an Interbotix wx250s robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.px150()
+        >>> robot = rtb.models.URDF.wx250s()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/px150.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/wx250s.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/px150.urdf.xacro"
+            "interbotix_descriptions/urdf/wx250s.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0])
-        self.qz = np.zeros(7)
+        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0, 0])
+        self.qz = np.zeros(9)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = px150()
+    robot = wx250s()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/rx150.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/rx200.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,43 +1,43 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class rx150(ERobot):
+class rx200(Robot):
     """
-    Class that imports a RX150 URDF model
+    Class that imports a RX200 URDF model
 
-    ``rx150()`` is a class which imports an Interbotix rx150 robot definition
+    ``rx200()`` is a class which imports an Interbotix rx200 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.rx150()
+        >>> robot = rtb.models.URDF.rx200()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/rx150.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/rx200.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/rx150.urdf.xacro"
+            "interbotix_descriptions/urdf/rx200.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
@@ -49,9 +49,9 @@
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = rx150()
+    robot = rx200()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/rx200.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/wx250.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,57 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class rx200(ERobot):
+class wx250(Robot):
     """
-    Class that imports a RX200 URDF model
+    Class that imports a WX250 URDF model
 
-    ``rx200()`` is a class which imports an Interbotix rx200 robot definition
+    ``wx250()`` is a class which imports an Interbotix wx250 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.rx200()
+        >>> robot = rtb.models.URDF.wx250()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/rx200.html#
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/wx250.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/rx200.urdf.xacro"
+            "interbotix_descriptions/urdf/wx250.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
         self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0])
-        self.qz = np.zeros(7)
+        self.qz = np.zeros(8)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = rx200()
+    robot = wx250()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/vx300.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/vx300s.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,57 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class vx300(ERobot):
+class vx300s(Robot):
     """
-    Class that imports a VX300 URDF model
+    Class that imports a VX300s URDF model
 
-    ``vx300()`` is a class which imports an Interbotix vx300 robot definition
+    ``vx300s()`` is a class which imports an Interbotix vx300s robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.vx300()
+        >>> robot = rtb.models.URDF.vx300s()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/vx300.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/vx300s.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/vx300.urdf.xacro"
+            "interbotix_descriptions/urdf/vx300s.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0])
-        self.qz = np.zeros(8)
+        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0, 0])
+        self.qz = np.zeros(9)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = vx300()
+    robot = vx300s()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/vx300s.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/px100.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,57 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class vx300s(ERobot):
+class px100(Robot):
     """
-    Class that imports a VX300s URDF model
+    Class that imports a PX100 URDF model
 
-    ``vx300s()`` is a class which imports an Interbotix vx300s robot definition
+    ``px100()`` is a class which imports an Interbotix px100 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.vx300s()
+        >>> robot = rtb.models.URDF.px100()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/vx3006dof.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/px100.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/vx300s.urdf.xacro"
+            "interbotix_descriptions/urdf/px100.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
-        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0, 0])
-        self.qz = np.zeros(9)
+        self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4])
+        self.qz = np.zeros(7)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = vx300s()
+    robot = px100()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/wx200.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/wx200.py`

 * *Files 17% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class wx200(ERobot):
+class wx200(Robot):
     """
     Class that imports a WX200 URDF model
 
     ``wx200()`` is a class which imports an Interbotix wx200 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
@@ -20,15 +20,15 @@
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/wx200.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/wx200.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/URDF/wx250.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/URDF/px150.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,57 +1,57 @@
 #!/usr/bin/env python
 
 import numpy as np
-from roboticstoolbox.robot.ERobot import ERobot
+from roboticstoolbox.robot.Robot import Robot
 
 
-class wx250(ERobot):
+class px150(Robot):
     """
-    Class that imports a WX250 URDF model
+    Class that imports a PX150 URDF model
 
-    ``wx250()`` is a class which imports an Interbotix wx250 robot definition
+    ``px150()`` is a class which imports an Interbotix px150 robot definition
     from a URDF file.  The model describes its kinematic and graphical
     characteristics.
 
     .. runblock:: pycon
 
         >>> import roboticstoolbox as rtb
-        >>> robot = rtb.models.URDF.wx250()
+        >>> robot = rtb.models.URDF.px150()
         >>> print(robot)
 
     Defined joint configurations are:
 
     - qz, zero joint angle configuration, 'L' shaped configuration
     - qr, vertical 'READY' configuration
 
     :reference:
-        - http://www.support.interbotix.com/html/specifications/wx250.html
+        - https://docs.trossenrobotics.com/interbotix_xsarms_docs/specifications/px150.html
 
     .. codeauthor:: Jesse Haviland
     .. sectionauthor:: Peter Corke
     """
 
     def __init__(self):
 
         links, name, urdf_string, urdf_filepath = self.URDF_read(
-            "interbotix_descriptions/urdf/wx250.urdf.xacro"
+            "interbotix_descriptions/urdf/px150.urdf.xacro"
         )
 
         super().__init__(
             links,
             name=name,
             manufacturer="Interbotix",
             urdf_string=urdf_string,
             urdf_filepath=urdf_filepath,
         )
 
         self.qr = np.array([0, -0.3, 0, -2.2, 0, 2.0, np.pi / 4, 0])
-        self.qz = np.zeros(8)
+        self.qz = np.zeros(7)
 
         self.addconfiguration("qr", self.qr)
         self.addconfiguration("qz", self.qz)
 
 
 if __name__ == "__main__":  # pragma nocover
 
-    robot = wx250()
+    robot = px150()
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/models/list.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/models/list.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/DHFactor.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/DHFactor.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,83 +1,82 @@
 from roboticstoolbox import ETS, ET
 import re
 import sympy
 import numpy as np
 from spatialmath import base
 
 pi2 = base.pi() / 2
-deg = base.pi() / sympy.Integer('180')
+deg = base.pi() / sympy.Integer("180")
 
 # PROGRESS
 # subs2z does a bad thing in first phase, 2 subs it shouldnt make
 class DHFactor(ET):
-
     def __init__(self, axis=None, eta=None, **kwargs):
 
         super().__init__(axis=axis, eta=eta, **kwargs)
 
     @classmethod
     def parse(cls, s):
         et_re = re.compile(r"([RT][xyz])\(([^)]*)\)")
 
         # self.data = []
 
         jointnum = 0
         ets = DHFactor()
 
         for axis, eta in et_re.findall(s):
-            if eta[0] == 'q':
+            if eta[0] == "q":
                 eta = None
                 unit = None
                 j = jointnum
                 jointnum += 1
             else:
                 # eta can be given as a variable or a number
                 try:
                     # first attempt to create symbolic number
                     eta = sympy.Number(eta)
                 except:
                     # failing that, a symbolic variable
                     eta = sympy.symbols(eta)
-                if axis[0] == 'R':
+                if axis[0] == "R":
                     # convert to degrees, assumed unit in input string
                     eta = eta * deg
                 j = None
 
-            if axis == 'Rx':
+            if axis == "Rx":
                 e = DHFactor.Rx(eta, j=j)
-            elif axis == 'Ry':
+            elif axis == "Ry":
                 e = DHFactor.Ry(eta, j=j)
-            elif axis == 'Rz':
+            elif axis == "Rz":
                 e = DHFactor.Rz(eta, j=j)
-            elif axis == 'Tx':
+            elif axis == "Tx":
                 e = DHFactor.tx(eta, j=j)
-            elif axis == 'Ty':
+            elif axis == "Ty":
                 e = DHFactor.ty(eta, j=j)
             # elif axis == 'Tz':
             else:
                 e = DHFactor.tz(eta, j=j)
 
             ets *= e
-        
+
         return cls(ets)
 
     # ---------------------------------------------------------------------- #
 
     def simplify(self, mdh=False):
 
         self.merge()
         self.swap(mdh)
         self.merge()
         self.float_right()
         self.merge()
         # self.substitute_to_z()
         self.merge()
-        print('inital merge and swap\n  ', self)
-        print('main loop')
+        print("inital merge and swap\n  ", self)
+        print("main loop")
         for i in range(10):
             nchanges = 0
 
             nchanges += self.merge()
             nchanges += self.swap(mdh)
             nchanges += self.merge()
             print(ets)
@@ -88,139 +87,152 @@
             if nchanges == 0:
                 # try this then
                 nchanges += self.substitute_to_z2()
             if nchanges == 0:
                 break
         else:
             # too many iterations
-            print('too many iterations')
+            print("too many iterations")
 
     # ---------------------------------------------------------------------- #
 
     def float_right(self):
         """
         Attempt to 'float' translational terms as far to the right as
-	 * possible and across joint boundaries.
+         * possible and across joint boundaries.
         """
-        
+
         nchanges = 0
 
         for i in range(len(self)):
 
             this = self[i]
             if this.isjoint or this.isrevolute:
                 continue
-            
+
             crossed = False
-            for j in range(i+1, len(self)):
+            for j in range(i + 1, len(self)):
                 next = self[j]
 
                 if next.isprismatic:
                     continue
                 if next.isrevolute and next.axis[1] == this.axis[1]:
                     crossed = True
                     continue
                 break
 
             if crossed:
                 del self[i]
-                self.insert(j-1, this)
+                self.insert(j - 1, this)
                 nchanges += 1
-                print('floated')
+                print("floated")
 
         return nchanges
+
     # ---------------------------------------------------------------------- #
     def swap(self, mdh=False):
 
         #  we want to sort terms into the order:
         # 	RZ
         # 	TX
         # 	TZ
         # 	RX
 
         def do_swap(this, next):
             if mdh:
                 # modified DH
-                return this.axis == 'Rx' and next.axis == 'tx' \
-                    or this.axis == 'Ry' and next.axis == 'ty' \
-                    or this.axis == 'Rz' and next.axis == 'tz' \
-                    or this.axis == 'tz' and next.axis == 'tx'
+                return (
+                    this.axis == "Rx"
+                    and next.axis == "tx"
+                    or this.axis == "Ry"
+                    and next.axis == "ty"
+                    or this.axis == "Rz"
+                    and next.axis == "tz"
+                    or this.axis == "tz"
+                    and next.axis == "tx"
+                )
             else:
                 # standard DH
 
                 # push constant translations through rotational joints
-				# of the same type
+                # of the same type
 
-                if this.axis == 'tz' and next.axis == 'tx':
+                if this.axis == "tz" and next.axis == "tx":
                     return True
 
                 if next.isjoint and (
-                        this.axis == 'tx' and next.axis == 'Rx'
-                        or this.axis == 'ty' and next.axis == 'Ry'
-                        or this.axis == 'tz' and next.axis == 'Rz'):
+                    this.axis == "tx"
+                    and next.axis == "Rx"
+                    or this.axis == "ty"
+                    and next.axis == "Ry"
+                    or this.axis == "tz"
+                    and next.axis == "Rz"
+                ):
                     return True
                 elif not this.isjoint and (
-                        this.axis == 'Rx' and next.axis == 'tx'
-                        or this.axis == 'Ry' and next.axis == 'ty'):
+                    this.axis == "Rx"
+                    and next.axis == "tx"
+                    or this.axis == "Ry"
+                    and next.axis == "ty"
+                ):
                     return True
 
-                if not this.isjoint and not next.isjoint and \
-                        this.axis == 'tz' and next.axis == 'Rz':
+                if (
+                    not this.isjoint
+                    and not next.isjoint
+                    and this.axis == "tz"
+                    and next.axis == "Rz"
+                ):
                     return True
 
                 #  move Ty terms to the right
-                if this.axis == 'ty' and next.axis == 'tz' \
-                        or this.axis == 'ty' and next.axis == 'tx':
+                if (
+                    this.axis == "ty"
+                    and next.axis == "tz"
+                    or this.axis == "ty"
+                    and next.axis == "tx"
+                ):
                     return True
 
             return False
 
         total_changes = 0
         while True:
             nchanges = 0
             for i in range(len(self) - 1):
                 this = self[i]
-                next = self[i+1]
+                next = self[i + 1]
 
                 if do_swap(this, next):
                     del self[i]
-                    self.insert(i+1, this)
+                    self.insert(i + 1, this)
                     nchanges += 1
                     print(f"swapping {this} <--> {next}")
             if nchanges == 0:
                 total_changes += nchanges
                 break
 
         return total_changes
 
     # ---------------------------------------------------------------------- #
 
-
     def substitute_to_z(self):
         # substitute all non Z joint transforms according to rules
         nchanges = 0
         out = DHFactor()
 
         def subs_z(this):
-            if this.axis == 'Rx':
-                return DHFactor.ry(pi2) \
-                     * DHFactor.rz(this.eta) \
-                     * DHFactor.ry(-pi2)
-            elif this.axis == 'Ry':
-                return DHFactor.rx(-pi2) \
-                    * DHFactor.rz(this.eta) \
-                    * DHFactor.rx(pi2)
-            elif this.axis == 'tx':
-                return DHFactor.ry(pi2) \
-                     * DHFactor.tz(this.eta) \
-                     * DHFactor.ry(-pi2)
-            elif this.axis == 'ty':
-                return DHFactor.rx(-pi2) \
-                     * DHFactor.tz(this.eta) \
-                     * DHFactor.rx(pi2)
+            if this.axis == "Rx":
+                return DHFactor.ry(pi2) * DHFactor.rz(this.eta) * DHFactor.ry(-pi2)
+            elif this.axis == "Ry":
+                return DHFactor.rx(-pi2) * DHFactor.rz(this.eta) * DHFactor.rx(pi2)
+            elif this.axis == "tx":
+                return DHFactor.ry(pi2) * DHFactor.tz(this.eta) * DHFactor.ry(-pi2)
+            elif this.axis == "ty":
+                return DHFactor.rx(-pi2) * DHFactor.tz(this.eta) * DHFactor.rx(pi2)
 
         for e in self:
             if not e.isjoint:
                 out *= e
             else:
                 # do a substitution
                 new = DHFactor.subs_z(e)
@@ -237,54 +249,48 @@
     def substitute_to_z2(self):
         # substitute all non Z joint transforms according to rules
         nchanges = 0
         out = DHFactor()
         jointyet = False
 
         def subs_z(prev, this):
-            if this.axis == 'Ry':
-                return DHFactor.rz(pi2) \
-                     * DHFactor.rx(this.eta) \
-                     * DHFactor.rz(-pi2)
-            elif this.axis == 'ty':
-                if prev.axis == 'Rz':
-                    return DHFactor.rz(pi2) \
-                         * DHFactor.ty(this.eta) \
-                         * DHFactor.r(-pi2)
+            if this.axis == "Ry":
+                return DHFactor.rz(pi2) * DHFactor.rx(this.eta) * DHFactor.rz(-pi2)
+            elif this.axis == "ty":
+                if prev.axis == "Rz":
+                    return DHFactor.rz(pi2) * DHFactor.ty(this.eta) * DHFactor.r(-pi2)
                 else:
-                    return DHFactor.rx(-pi2) \
-                         * DHFactor.ty(this.eta) \
-                         * DHFactor.rx(pi2)
+                    return DHFactor.rx(-pi2) * DHFactor.ty(this.eta) * DHFactor.rx(pi2)
 
         for i in range(len(self)):
             this = self[i]
             if this.isjoint:
                 jointyet = True
                 continue
-            
+
             if i == 0 or not jointyet:
                 continue
 
-            prev = self[i-1]
+            prev = self[i - 1]
 
             new = subs_z(prev, this)
 
             if new is None:
                 out *= this
                 continue
             out *= new
             nchanges += 1
             print(f"subs2z2: {this} := {new}")
 
         self.data = out.data
         return nchanges
+
     # ---------------------------------------------------------------------- #
 
     def merge(self):
-
         def can_merge(prev, this):
             return prev.axis == this.axis and not (prev.isjoint and this.isjoint)
 
         out = DHFactor()
         nchanges = 0
         while len(self.data) > 0:
             this = self.pop(0)
@@ -323,15 +329,15 @@
         elif not this.isjoint and not that.isjoint:
             out = DHFactor(this)
             if out.eta is None:
                 out.eta = that.eta
             else:
                 out.eta += that.eta
         else:
-            raise ValueError('both ET cannot be joint variables')
+            raise ValueError("both ET cannot be joint variables")
         return out
 
     # ---------------------------------------------------------------------- #
 
     def eliminate_y(self):
 
         nchanges = 0
@@ -339,50 +345,49 @@
         jointyet = False
 
         def subs_y(prev, this):
             if this.isjoint or prev.isjoint:
                 return None
 
             new = None
-            if prev.axis == 'Rx' and this.axis == 'ty':  # RX.TY -> TZ.RX
+            if prev.axis == "Rx" and this.axis == "ty":  # RX.TY -> TZ.RX
                 new = DHFactor.tx(prev.eta) * prev
-            elif prev.axis == 'Rx' and this.axis == 'tz':  # RX.TZ -> TY.RX
+            elif prev.axis == "Rx" and this.axis == "tz":  # RX.TZ -> TY.RX
                 new = DHFactor.ty(-prev.eta) * prev
-            elif prev.axis == 'Ry' and this.axis == 'tz':  # RY.TX-> TZ.RY
+            elif prev.axis == "Ry" and this.axis == "tz":  # RY.TX-> TZ.RY
                 new = DHFactor.tz(-prev.eta) * prev
-            elif prev.axis == 'Ry' and this.axis == 'tz':  # RY.TZ-> TX.RY
+            elif prev.axis == "Ry" and this.axis == "tz":  # RY.TZ-> TX.RY
                 new = DHFactor.tx(prev.eta) * prev
 
-            elif prev.axis == 'ty' and this.axis == 'Rx':  # TY.RX -> RX.TZ
+            elif prev.axis == "ty" and this.axis == "Rx":  # TY.RX -> RX.TZ
                 new = this * DHFactor.tz(-this.eta)
-            elif prev.axis == 'tx' and this.axis == 'Rz':  # TX.RZ -> RZ.TY
+            elif prev.axis == "tx" and this.axis == "Rz":  # TX.RZ -> RZ.TY
                 new = this * DHFactor.tz(this.eta)
-            elif prev.axis == 'Ry' and this.axis == 'Rx':  # RY(Q).RX -> RX.RZ(-Q)
+            elif prev.axis == "Ry" and this.axis == "Rx":  # RY(Q).RX -> RX.RZ(-Q)
                 new = this * DHFactor.Rz(-prev.eta)
-            elif prev.axis == 'Rx' and this.axis == 'Ry':  # RX.RY -> RZ.RX
+            elif prev.axis == "Rx" and this.axis == "Ry":  # RX.RY -> RZ.RX
                 new = DHFactor.Rz(this.eta) * prev
-            elif prev.axis == 'Rz' and this.axis == 'Rx':  # RZ.RX -> RX.RY
+            elif prev.axis == "Rz" and this.axis == "Rx":  # RZ.RX -> RX.RY
                 new = this * DHFactor.Ry(this.eta)
             return new
 
         for i in range(len(self)):
             this = self[i]
             jointyet = this.isjoint
             if i == 0 or not jointyet:  # leave initial const xform
                 continue
 
-            prev = self[i-1]
+            prev = self[i - 1]
 
             new = subs_y(prev, this)
             if new is not None:
-                self[i-1:i+1] = new
+                self[i - 1 : i + 1] = new
                 nchanges += 1
                 print(f"eliminate Y: {this} := {new}")
 
-
         return nchanges
 
     # ---------------------------------------------------------------------- #
 
     def __str__(self, q=None):
         """
         Pretty prints the ETS
@@ -444,27 +449,29 @@
         c = 0
 
         if q is None:
             if len(self.joints()) > 1:
                 q = "q{0}"
             else:
                 q = "q"
-                
+
         # For each ET in the object, display it, data comes from properties
         # which come from the named tuple
         for et in self:
 
             s = f"{et.axis}("
             if et.isjoint:
                 if q is not None:
                     if et.jindex is None:
                         _j = j
                     else:
                         _j = et.jindex
-                    qvar = q.format(_j, _j+1) # lgtm [py/str-format/surplus-argument]  # noqa
+                    qvar = q.format(
+                        _j, _j + 1
+                    )  # lgtm [py/str-format/surplus-argument]  # noqa
                 else:
                     qvar = ""
                 if et.isflip:
                     s += f"-{qvar}"
                 else:
                     s += f"{qvar}"
                 j += 1
@@ -472,15 +479,15 @@
             if et.eta is not None:
                 if et.isrevolute:
                     if base.issymbol(et.eta):
                         if s[-1] == "(":
                             s += f"{et.eta}"
                         else:
                             # adding to a previous value
-                            if str(et.eta).startswith('-'):
+                            if str(et.eta).startswith("-"):
                                 s += f"{et.eta}"
                             else:
                                 s += f"+{et.eta}"
                     else:
                         s += f"{et.eta * 180 / np.pi:.4g}"
 
                 elif et.isprismatic:
@@ -490,24 +497,27 @@
                     s += f"C{c}"
                     c += 1
             s += ")"
 
             es.append(s)
 
         return " * ".join(es)
-            
+
+
 if __name__ == "__main__":  # pragram: no cover
-    s = 'Tz(L1) Rz(q1) Ry(q2) Ty(L2) Tz(L3) Ry(q3) Tx(L4) Ty(L5) Tz(L6) Rz(q4) Ry(q5) Rz(q6)'
+    s = (
+        "Tz(L1) Rz(q1) Ry(q2) Ty(L2) Tz(L3) Ry(q3) Tx(L4) Ty(L5) Tz(L6) Rz(q4) Ry(q5)"
+        " Rz(q6)"
+    )
 
     ets = DHFactor.parse(s)
     print(ets)
     # ets.substitute_to_z()
     # print(ets)
     # ets.merge()
     # print(ets)
 
     ets.swap()
     ets.simplify()
     print(ets)
     # ets.merge()
     print(ets)
-
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/DHLink.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/DHLink.py`

 * *Files 2% similar despite different names*

```diff
@@ -123,15 +123,15 @@
     :type B: float, or ndarray(2,)
     :param Tc: dynamic - motor Coulomb friction [Tc, Tc]
     :type Tc: ndarray(2,)
     :param G: dynamic - gear ratio
     :type G: float
 
     :references:
-        - Robotics, Vision & Control, P. Corke, Springer 2011, Chap 7.
+        - Robotics, Vision & Control, P. Corke, Springer 2023, Chap 7.
 
     """
 
     def __init__(
         self,
         d=0.0,
         alpha=0.0,
@@ -363,35 +363,32 @@
             offset = f" + {self.offset}"
         if self.id is None:
             qvar = "q"
         else:
             qvar = f"q{self.id}"
         cls = self.__class__.__name__
         if self.isrevolute:
-            s = (
-                f"{cls}:   ={qvar}{offset},  d={self.d}, "
-                f" a={self.a},  ={self.alpha}"
-            )
+            s = f"{cls}:   ={qvar}{offset},  d={self.d},  a={self.a},  ={self.alpha}"
         elif self.isprismatic:
             s = (
                 f"{cls}:  ={self.theta},  d={qvar}{offset}, "
                 f" a={self.a},  "
                 f"={self.alpha}"
             )
         return s
 
     def __repr__(self):
         name = self.__class__.__name__
         args = []
         if self.isrevolute:
-            self._format(args, "d")
+            self._format_param(args, "d")
         else:
-            self._format(args, "theta", "")
-        self._format(args, "a")
-        self._format(args, "alpha", "")
+            self._format_param(args, "theta", "")
+        self._format_param(args, "a")
+        self._format_param(args, "alpha", "")
         args.extend(super()._params())
         return name + "(" + ", ".join(args) + ")"
 
     def __deepcopy__(self, memo):
         kwargs = {
             "name": deepcopy(self.name),
             "joint_name": deepcopy(self._joint_name),
@@ -745,15 +742,16 @@
     A subclass of the :class:`DHLink` class for a revolute joint that holds all
     information related to a robot link such as kinematics parameters,
     rigid-body inertial parameters, motor and transmission parameters.
     The link transform is
     :math:`\underbrace{\mathbf{T}_{rz}(q_i)}_{\mbox{variable}} \cdot \mathbf{T}_{tz}(d_i) \cdot \mathbf{T}_{tx}(a_i) \cdot \mathbf{T}_{rx}(\alpha_i)`
     where :math:`q_i` is the joint variable.
     :references:
-        - Robotics, Vision & Control, P. Corke, Springer 2011, Chap 7.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 7.
+
     :seealso: :func:`PrismaticDH`, :func:`DHLink`, :func:`RevoluteMDH`
     """  # noqa
 
     def __init__(
         self, d=0.0, a=0.0, alpha=0.0, offset=0.0, qlim=None, flip=False, **kwargs
     ):
 
@@ -809,15 +807,16 @@
     A subclass of the DHLink class for a prismatic joint that holds all
     information related to a robot link such as kinematics parameters,
     rigid-body inertial parameters, motor and transmission parameters.
     The link transform is
     :math:`\mathbf{T}_{rz}(\theta_i) \cdot \underbrace{\mathbf{T}_{tz}(q_i)}_{\mbox{variable}} \cdot \mathbf{T}_{tx}(a_i) \cdot \mathbf{T}_{rx}(\alpha_i)`
     where :math:`q_i` is the joint variable.
     :references:
-        - Robotics, Vision & Control, P. Corke, Springer 2011, Chap 7.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 7.
+
     :seealso: :func:`RevoluteDH`, :func:`DHLink`, :func:`PrismaticMDH`
     """  # noqa
 
     def __init__(
         self, theta=0.0, a=0.0, alpha=0.0, offset=0.0, qlim=None, flip=False, **kwargs
     ):
 
@@ -879,15 +878,15 @@
     The link transform is
 
     :math:`\mathbf{T}_{tx}(a_{i-1}) \cdot \mathbf{T}_{rx}(\alpha_{i-1}) \cdot \underbrace{\mathbf{T}_{rz}(q_i)}_{\mbox{variable}} \cdot \mathbf{T}_{tz}(d_i)`
 
     where :math:`q_i` is the joint variable.
 
     :references:
-        - Robotics, Vision & Control, P. Corke, Springer 2011, Chap 7.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 7.
 
     :seealso: :func:`PrismaticMDH`, :func:`DHLink`, :func:`RevoluteDH`
     """  # noqa
 
     def __init__(
         self, d=0.0, a=0.0, alpha=0.0, offset=0.0, qlim=None, flip=False, **kwargs
     ):
@@ -952,15 +951,15 @@
     The link transform is
 
     :math:`\mathbf{T}_{tx}(a_{i-1}) \cdot \mathbf{T}_{rx}(\alpha_{i-1}) \cdot \mathbf{T}_{rz}(\theta_i) \cdot \underbrace{\mathbf{T}_{tz}(q_i)}_{\mbox{variable}}`
 
     where :math:`q_i` is the joint variable.
 
     :references:
-        - Robotics, Vision & Control, P. Corke, Springer 2011, Chap 7.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 7.
 
     :seealso: :func:`RevoluteMDH`, :func:`DHLink`, :func:`PrismaticDH`
     """  # noqa
 
     def __init__(
         self, theta=0.0, a=0.0, alpha=0.0, offset=0.0, qlim=None, flip=False, **kwargs
     ):
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/DHRobot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/DHRobot.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,14 @@
 #!/usr/bin/env python
 """
 @author Jesse Haviland
 """
 
 from collections import namedtuple
+from email import message
 from roboticstoolbox.tools.data import rtb_path_to_datafile
 import warnings
 import copy
 import numpy as np
 from roboticstoolbox.robot.Robot import Robot  # DHLink
 from roboticstoolbox.robot.ETS import ETS, ET
 from roboticstoolbox.robot.DHLink import DHLink
@@ -30,16 +31,19 @@
 from ansitable import ANSITable, Column
 from scipy.linalg import block_diag
 from roboticstoolbox.robot.DHLink import _check_rne, DHLink
 from roboticstoolbox import rtb_get_param
 from roboticstoolbox.frne import init, frne, delete
 from numpy import any
 from typing import Union, Tuple
+from roboticstoolbox.robot.IK import IKSolution
 
-iksol = namedtuple("IKsolution", "q, success, reason")
+ArrayLike = Union[list, np.ndarray, tuple, set]
+
+# iksol = namedtuple("IKsolution", "q, success, reason")
 
 
 class DHRobot(Robot):
     """
     Class for robots defined using Denavit-Hartenberg notation
 
     :param L: List of links which define the robot
@@ -61,23 +65,21 @@
     Denavit-Hartenberg parameters (standard or modified).
 
     .. note:: Link subclass elements passed in must be all standard, or all
           modified, DH parameters.
 
     :reference:
 
-        - Robotics, Vision & Control, Chaps 7-9,
-          P. Corke, Springer 2011.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 7-9.
         - Robot, Modeling & Control,
           M.Spong, S. Hutchinson & M. Vidyasagar, Wiley 2006.
 
     """
 
     def __init__(self, links, meshdir=None, **kwargs):
-
         # Verify L
         if not isinstance(links, list):
             raise TypeError("The links must be stored in a list.")
 
         all_links = []
         self._n = 0
 
@@ -107,17 +109,23 @@
                     rlink.jindex = self._n
                     self._n += 1
 
                     rlink.name = f"link{self._n}"
             else:
                 raise TypeError("Input can be only DHLink or DHRobot")
 
+        for i, link in enumerate(all_links):
+            if i > 0:
+                link.parent = all_links[i - 1]
+            else:
+                link.parent = None
+
         super().__init__(all_links, **kwargs)
 
-        self.ee_links = [self.links[-1]]
+        self._ee_links = [self.links[-1]]
 
         # Check the DH convention
         self._mdh = self.links[0].mdh
         if not all([link.mdh == self.mdh for link in self.links]):
             raise ValueError("Robot has mixed D&H link conventions")
 
         # load meshes if required
@@ -193,14 +201,20 @@
                 return "<<red>>" + str(theta)
             else:
                 if fmt is not None:
                     return fmt.format(theta * deg) + "\u00b0"
                 else:
                     return str(theta * deg) + "\u00b0"
 
+        def format_attr(attr) -> str:
+            if isinstance(attr, float):
+                return f"{attr:.4g}"
+            else:
+                return str(attr)
+
         has_qlim = any([link.qlim is not None for link in self])
         if has_qlim:
             qlim_columns = [
                 Column("q", headalign="^"),
                 Column("q", headalign="^"),
             ]
             qlim = self.qlim
@@ -237,29 +251,38 @@
                 Column("", headalign="^", colalign="<"),
                 Column("d", headalign="^"),
                 Column("a", headalign="^"),
                 Column("", headalign="^"),
                 *qlim_columns,
                 border=border,
             )
+
             for j, L in enumerate(self):
                 if has_qlim:
                     if L.isprismatic:
                         ql = [qlim[0, j], qlim[1, j]]
                     else:
                         ql = [angle(qlim[k, j], "{:.1f}") for k in [0, 1]]
                 else:
                     ql = []
                 if L.isprismatic:
                     table.row(
-                        angle(L.theta), qstr(j, L), f"{L.a:.4g}", angle(L.alpha), *ql
+                        angle(L.theta),
+                        qstr(j, L),
+                        format_attr(L.a),
+                        angle(L.alpha),
+                        *ql,
                     )
                 else:
                     table.row(
-                        qstr(j, L), f"{L.d:.4g}", f"{L.a:.4g}", angle(L.alpha), *ql
+                        qstr(j, L),
+                        format_attr(L.d),
+                        format_attr(L.a),
+                        angle(L.alpha),
+                        *ql,
                     )
 
         s += str(table)
 
         # show tool and base
         if self._tool is not None or self._tool is not None:
             table = ANSITable(
@@ -272,15 +295,15 @@
                 table.row(
                     "base",
                     base.printline(orient="rpy/xyz", fmt="{:.2g}", file=None),
                 )
             if tool is not None:
                 table.row(
                     "tool",
-                    tool.printline(orient="rpy/xyz", fmt="{:.2g}", file=None),
+                    tool.strline(orient="rpy/xyz", fmt="{:.2g}"),
                 )
             s += "\n" + str(table)
 
         # show named configurations
         s += self.configurations_str(border=border)
 
         return s
@@ -296,29 +319,26 @@
 
         if isinstance(L, DHLink):
             nlinks.append(L)
         elif isinstance(L, DHRobot):
             for j in range(L.n):
                 nlinks.append(L.links[j])
         else:
-            raise TypeError(
-                "Can only combine DHRobots with other " "DHRobots or DHLinks"
-            )
+            raise TypeError("Can only combine DHRobots with other DHRobots or DHLinks")
 
         return DHRobot(
             nlinks,
             name=self.name,
             manufacturer=self.manufacturer,
             base=self.base,
             tool=self.tool,
             gravity=self.gravity,
         )
 
     def __deepcopy__(self, memo):
-
         links = []
 
         for link in self.links:
             links.append(copy.deepcopy(link))
 
         name = copy.deepcopy(self.name)
         manufacturer = copy.deepcopy(self.manufacturer)
@@ -412,15 +432,14 @@
         q = getvector(q, self.n)
 
         # t = self.base
 
         tall = self.fkine_all(q, old=True)
 
         for i, link in enumerate(self.links):
-
             # Update the link model transforms
             for col in link.collision:
                 col.wT = tall[i]
 
             for gi in link.geometry:
                 gi.wT = tall[i]
 
@@ -714,15 +733,16 @@
         .. runblock:: pycon
 
             >>> import roboticstoolbox as rtb
             >>> robot = rtb.models.DH.Puma560()
             >>> robot.islimit([0, 0, -4, 4, 0, 0])
 
         """
-        q = self._getq(q)
+        if q is None:
+            q = self.q
 
         return [link.islimit(qk) for (link, qk) in zip(self, q)]
 
     def isspherical(self):
         """
         Test for spherical wrist
 
@@ -851,15 +871,15 @@
                     if link.sigma == 0:
                         tw[j] = Twist3.UnitRevolute(T[j - 1].a, T[j - 1].t)  # revolute
                     else:
                         tw[j] = Twist3.UnitPrismatic(T[j - 1].a)  # prismatic
 
         return tw, T[-1]
 
-    def ets(self, *args, **kwargs):
+    def ets(self, *args, **kwargs) -> ETS:
         """
         Robot kinematics as an elemenary transform sequence
 
         :return: elementary transform sequence
         :rtype: ETS
 
         Example:
@@ -938,15 +958,14 @@
         if np.array_equal(self.tool.A, np.eye(4)):
             tool = None
         else:
             tool = self.tool
 
         T = SE3.Empty()
         for qr in getmatrix(q, (None, self.n)):
-
             first = True
             for q, L in zip(qr, self.links):
                 if first:
                     Tr = L.A(q)
                     first = False
                 else:
                     Tr *= L.A(q)  # type: ignore
@@ -988,15 +1007,14 @@
 
         if self._tool is not None:
             T[-1] *= self._tool
 
         return T
 
     def segments(self):
-
         segments = [None]
         segments.extend(self.links)
         return [segments]
 
     def fkine_all(self, q=None, old=True):
         """
         Forward kinematics for all link frames
@@ -1029,15 +1047,17 @@
               if ``old=False`` it returns ``n``+1 frames {0} to {n}, ie. it
               includes the base frame.
             - The robot's base or tool transform, if present, are incorporated
               into the result.
             - Joint offsets, if defined, are added to q before the forward
               kinematics are computed.
         """
-        q = self._getq(q)
+
+        if q is None:
+            q = self.q
 
         Tj = self.base.copy()
         Tall = Tj
 
         for q, L in zip(q, self.links):
             Tj *= L.A(q)
             Tall.append(Tj)
@@ -1602,15 +1622,14 @@
                 # stash them for later
                 Rm.append(t2r(Tj))
                 pstarm[:, j] = pstar
 
             # -----------------  the forward recursion -------------------- #
 
             for j, link in enumerate(self.links):
-
                 Rt = Rm[j].T  # transpose!!
                 pstar = pstarm[:, j]
                 r = link.r
 
                 # statement order is important here
 
                 if self.mdh:
@@ -1734,15 +1753,16 @@
                 tau[k, j] = (
                     t
                     + link.G**2 * link.Jm * qdd_k[j]
                     - link.friction(qd_k[j], coulomb=not self.symbolic)
                 )
                 if debug:
                     print(
-                        f"j={j:}, G={link.G:}, Jm={link.Jm:}, friction={link.friction(qd_k[j], coulomb=False):}"
+                        f"j={j:}, G={link.G:}, Jm={link.Jm:},"
+                        f" friction={link.friction(qd_k[j], coulomb=False):}"
                     )  # noqa
                     print()
 
             # compute the base wrench and save it
             if base_wrench:
                 R = Rm[0]
                 nn = R @ nn
@@ -1829,29 +1849,30 @@
                 theta = np.r_[theta, eul]
                 if self.links[3].alpha > 0:
                     theta[4] = -theta[4]
 
                 # Remove the link offset angles
                 theta = theta - self.offset
 
-                solution = iksol(theta, True, "")
+                # solution = iksol(theta, True, "")
+                solution = IKSolution(q=theta, success=True)
 
             else:
                 # ikfunc can return None or a str reason
                 if theta is None:
-                    solution = iksol(None, False, "")
+                    solution = IKSolution(q=None, success=False)
                 else:
-                    solution = iksol(None, False, theta)
+                    solution = IKSolution(q=None, success=False, reason=theta)
 
             solutions.append(solution)
 
         if len(T) == 1:
             return solutions[0]
         else:
-            return iksol(
+            return IKSolution(
                 np.vstack([sol.q for sol in solutions]),
                 np.array([sol.success for sol in solutions]),
                 [sol.reason for sol in solutions],
             )
 
     def config_validate(self, config, allowables):
         """
@@ -2426,14 +2447,36 @@
             TODO
         """
 
         return self.ets().ik_gn(
             Tep, q0, ilimit, slimit, tol, reject_jl, we, use_pinv, pinv_damping
         )
 
+    def ikine_LM(
+        self,
+        Tep: Union[np.ndarray, SE3],
+        q0: Union[ArrayLike, None] = None,
+        ilimit: int = 30,
+        slimit: int = 100,
+        tol: float = 1e-6,
+        joint_limits: bool = False,
+        mask: Union[ArrayLike, None] = None,
+        seed: Union[int, None] = None,
+    ):
+        return self.ets().ikine_LM(
+            Tep=Tep,
+            q0=q0,
+            ilimit=ilimit,
+            slimit=slimit,
+            tol=tol,
+            joint_limits=joint_limits,
+            mask=mask,
+            seed=seed,
+        )
+
 
 class SerialLink(DHRobot):
     def __init__(self, *args, **kwargs):
         warnings.warn(
             "SerialLink is deprecated, use DHRobot instead", DeprecationWarning
         )
         super().__init__(*args, **kwargs)
@@ -2442,15 +2485,14 @@
 def _cross(a, b):
     return np.r_[
         a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]
     ]
 
 
 if __name__ == "__main__":  # pragma nocover
-
     import roboticstoolbox as rtb
 
     # import spatialmath.base.symbolic as sym
 
     # planar = rtb.models.DH.Planar2()
     # J = puma.jacob0(puma.qn)
     # print(J)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/Dynamics.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/Dynamics.py`

 * *Files 22% similar despite different names*

```diff
@@ -7,317 +7,328 @@
     * ``rne()`` the inverse dynamics method
 
 so must be subclassed by ``DHRobot`` class.
 
 :todo: perhaps these should be abstract properties, methods of this calss
 """
 from collections import namedtuple
+from typing import Any, Callable, Dict, Union
 import numpy as np
 from spatialmath.base import getvector, verifymatrix, isscalar, getmatrix, t2r, rot2jac
 from scipy import integrate, interpolate
 from spatialmath.base import symbolic as sym
 from roboticstoolbox import rtb_get_param
+from roboticstoolbox.robot.RobotProto import RobotProto
+
+from roboticstoolbox.tools.types import ArrayLike, NDArray
+from typing_extensions import Self
+import roboticstoolbox as rtb
 
 from ansitable import ANSITable, Column
 import warnings
 
 
 class DynamicsMixin:
 
     # --------------------------------------------------------------------- #
-
-    @property
-    def gravity(self):
-        """
-        Get/set default gravitational acceleration (Robot superclass)
-
-        - ``robot.name`` is the default gravitational acceleration
-
-        :return: robot name
-        :rtype: ndarray(3,)
-
-        - ``robot.name = ...`` checks and sets default gravitational
-          acceleration
-
-        .. note:: If the z-axis is upward, out of the Earth, this should be
-            a positive number.
-        """
-        return self._gravity
-
-    @gravity.setter
-    def gravity(self, gravity_new):
-        self._gravity = getvector(gravity_new, 3)
-        self.dynchanged()
-
-    # --------------------------------------------------------------------- #
-    def dynamics(self):
+    def dynamics(self: RobotProto):
         """
         Pretty print the dynamic parameters (Robot superclass)
 
         The dynamic parameters (inertial and friction) are printed in a table,
         with one row per link.
 
-        Example:
-
+        Examples
+        --------
         .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> robot = rtb.models.DH.Puma560()
+        >>> robot.links[2].dyntable()
+        >>> robot.dyntable()
 
-            >>> import roboticstoolbox as rtb
-            >>> robot = rtb.models.DH.Puma560()
-            >>> robot.links[2].dyntable()
-            >>> robot.dyntable()
         """
         unicode = rtb_get_param("unicode")
         table = ANSITable(
             Column("j", colalign=">", headalign="^"),
             Column("m", colalign="<", headalign="^"),
             Column("r", colalign="<", headalign="^"),
             Column("I", colalign="<", headalign="^"),
             Column("Jm", colalign="<", headalign="^"),
             Column("B", colalign="<", headalign="^"),
             Column("Tc", colalign="<", headalign="^"),
             Column("G", colalign="<", headalign="^"),
             border="thin" if unicode else "ascii",
         )
 
-        for j, link in enumerate(self):
+        for j, link in enumerate(self.links):
             table.row(link.name, *link._dyn2list())
         table.print()
 
-    def dynamics_list(self):
+    def dynamics_list(self: RobotProto):
         """
         Print dynamic parameters (Robot superclass)
 
         Display the kinematic and dynamic parameters to the console in
         reable format
+
         """
         for j, link in enumerate(self.links):
             print("\nLink {:d}::".format(j), link)
             print(link.dyn(indent=2))
 
     # --------------------------------------------------------------------- #
 
-    def friction(self, qd):
+    def friction(self: RobotProto, qd: NDArray) -> NDArray:
         r"""
         Manipulator joint friction (Robot superclass)
 
-        :param qd: The joint velocities of the robot
-        :type qd: ndarray(n)
-
-        :return: The joint friction forces/torques for the robot
-        :rtype: ndarray(n,)
-
         ``robot.friction(qd)`` is a vector of joint friction
         forces/torques for the robot moving with joint velocities ``qd``.
 
         The friction model includes:
 
         - Viscous friction which is a linear function of velocity.
         - Coulomb friction which is proportional to sign(qd).
 
         .. math::
 
             \tau_j = G^2 B \dot{q}_j + |G_j| \left\{ \begin{array}{ll}
                 \tau_{C,j}^+ & \mbox{if $\dot{q}_j > 0$} \\
                 \tau_{C,j}^- & \mbox{if $\dot{q}_j < 0$} \end{array} \right.
 
-        .. note::
+        Parameters
+        ----------
+        qd
+            The joint velocities of the robot
+
+        Returns
+        -------
+        friction
+            The joint friction forces/torques for the robot
+
+        Notes
+        -----
+        - The friction value should be added to the motor output torque to
+            determine the nett torque. It has a negative value when qd > 0.
+        - The returned friction value is referred to the output of the
+            gearbox.
+        - The friction parameters in the Link object are referred to the
+            motor.
+        - Motor viscous friction is scaled up by :math:`G^2`.
+        - Motor Coulomb friction is scaled up by math:`G`.
+        - The appropriate Coulomb friction value to use in the
+            non-symmetric case depends on the sign of the joint velocity,
+            not the motor velocity.
+        - Coulomb friction is zero for zero joint velocity, stiction is
+            not modeled.
+        - The absolute value of the gear ratio is used.  Negative gear
+            ratios are tricky: the Puma560 robot has negative gear ratio for
+            joints 1 and 3.
+        - The absolute value of the gear ratio is used. Negative gear
+            ratios are tricky: the Puma560 has negative gear ratio for
+            joints 1 and 3.
+
+        See Also
+        --------
+        :func:`Robot.nofriction`
+        :func:`Link.friction`
 
-            - The friction value should be added to the motor output torque to
-              determine the nett torque. It has a negative value when qd > 0.
-            - The returned friction value is referred to the output of the
-              gearbox.
-            - The friction parameters in the Link object are referred to the
-              motor.
-            - Motor viscous friction is scaled up by :math:`G^2`.
-            - Motor Coulomb friction is scaled up by math:`G`.
-            - The appropriate Coulomb friction value to use in the
-              non-symmetric case depends on the sign of the joint velocity,
-              not the motor velocity.
-            - Coulomb friction is zero for zero joint velocity, stiction is
-              not modeled.
-            - The absolute value of the gear ratio is used.  Negative gear
-              ratios are tricky: the Puma560 robot has negative gear ratio for
-              joints 1 and 3.
-            - The absolute value of the gear ratio is used. Negative gear
-              ratios are tricky: the Puma560 has negative gear ratio for
-              joints 1 and 3.
-
-        :seealso: :func:`Robot.nofriction`, :func:`Link.friction`
         """
 
-        qd = getvector(qd, self.n)
+        qd = np.array(getvector(qd, self.n))
         tau = np.zeros(self.n)
 
         for i in range(self.n):
             tau[i] = self.links[i].friction(qd[i])
 
         return tau
 
     # --------------------------------------------------------------------- #
 
-    def nofriction(self, coulomb=True, viscous=False):
+    def nofriction(self: RobotProto, coulomb: bool = True, viscous: bool = False):
         """
-        Remove manipulator joint friction (Robot superclass)
-
-        :param coulomb: set the Coulomb friction to 0
-        :type coulomb: bool
-        :param viscous: set the viscous friction to 0
-        :type viscous: bool
-        :return: A copy of the robot with dynamic parameters perturbed
-        :rtype: Robot subclass
+        Remove manipulator joint friction
 
         ``nofriction()`` copies the robot and returns
         a robot with the same link parameters except the Coulomb and/or viscous
         friction parameter are set to zero.
 
-        :seealso: :func:`Robot.friction`, :func:`Link.nofriction`
+        Parameters
+        ----------
+        coulomb
+            set the Coulomb friction to 0
+        viscous
+            set the viscous friction to 0
+
+        Returns
+        -------
+        robot
+            A copy of the robot with dynamic parameters perturbed
+
+        See Also
+        --------
+        :func:`Robot.friction`
+        :func:`Link.nofriction`
+
         """
 
         # shallow copy the robot object
-        self.delete_rne()  # remove the inherited C pointers
+        if isinstance(self, rtb.DHRobot):
+            self.delete_rne()  # remove the inherited C pointers
+
         nf = self.copy()
         nf.name = "NF/" + self.name
 
         # add the modified links (copies)
         nf._links = [link.nofriction(coulomb, viscous) for link in self.links]
 
         return nf
 
     def fdyn(
-        self,
-        T,
-        q0,
-        torque=None,
-        torque_args={},
-        qd0=None,
-        solver="RK45",
-        solver_args={},
-        dt=None,
-        progress=False,
+        self: RobotProto,
+        T: float,
+        q0: ArrayLike,
+        Q: Union[Callable[[Any, float, NDArray, NDArray], NDArray], None] = None,
+        Q_args: Dict = {},
+        qd0: Union[ArrayLike, None] = None,
+        solver: str = "RK45",
+        solver_args: Dict = {},
+        dt: Union[float, None] = None,
+        progress: bool = False,
     ):
         """
         Integrate forward dynamics
 
-        :param T: integration time
-        :type T: float
-        :param q0: initial joint coordinates
-        :type q0: array_like
-        :param qd0: initial joint velocities, assumed zero if not given
-        :type qd0: array_like
-        :param torque: a function that computes torque as a function of time
-        and/or state
-        :type torque: callable
-        :param torque_args: positional arguments passed to ``torque``
-        :type torque_args: dict
-        :type solver: name of scipy solver to use, RK45 is the default
-        :param solver: str
-        :type solver_args: arguments passed to the solver
-        :param solver_args: dict
-        :type dt: time step for results
-        :param dt: float
-        :param progress: show progress bar, default False
-        :type progress: bool
-
-        :return: robot trajectory
-        :rtype: namedtuple
-
-        - ``tg = R.fdyn(T, q)`` integrates the dynamics of the robot with zero
-          input torques over the time  interval 0 to ``T`` and returns the
-          trajectory as a namedtuple with elements:
-
-            - ``t`` the time vector (M,)
-            - ``q`` the joint coordinates (M,n)
-            - ``qd`` the joint velocities (M,n)
 
-        - ``tg = R.fdyn(T, q, torqfun)`` as above but the torque applied to the
-          joints is given by the provided function::
+        ``tg = R.fdyn(T, q)`` integrates the dynamics of the robot with zero
+        input torques over the time  interval 0 to ``T`` and returns the
+        trajectory as a namedtuple with elements:
+
+        - ``t`` the time vector (M,)
+        - ``q`` the joint coordinates (M,n)
+        - ``qd`` the joint velocities (M,n)
+
+        ``tg = R.fdyn(T, q, torqfun)`` as above but the torque applied to the
+        joints is given by the provided function::
 
                 tau = function(robot, t, q, qd, **args)
 
         where the inputs are:
 
             - the robot object
             - current time
             - current joint coordinates (n,)
             - current joint velocity (n,)
             - args, optional keyword arguments can be specified, these are
-              passed in from the ``targs`` kewyword argument.
+            passed in from the ``targs`` kewyword argument.
 
         The function must return a Numpy array (n,) of joint forces/torques.
 
-        Examples:
+        Parameters
+        ----------
+        T
+            integration time
+        q0
+            initial joint coordinates
+        qd0
+            initial joint velocities, assumed zero if not given
+        Q
+            a function that computes generalized joint force as a function of
+            time and/or state
+        Q_args
+            positional arguments passed to ``torque``
+        solver
+            str
+        solver_args
+            dict
+        dt
+            float
+        progress
+            show progress bar, default False
+
+        Returns
+        -------
+        trajectory
+            robot trajectory
+
+        Examples
+        --------
+
+        To apply zero joint torque to the robot without Coulomb
+        friction:
+
+        >>> def myfunc(robot, t, q, qd):
+        >>>     return np.zeros((robot.n,))
+
+        >>> tg = robot.nofriction().fdyn(5, q0, myfunc)
+
+        >>> plt.figure()
+        >>> plt.plot(tg.t, tg.q)
+        >>> plt.show()
+
+        We could also use a lambda function::
+
+        >>> tg = robot.nofriction().fdyn(
+        >>>     5, q0, lambda r, t, q, qd: np.zeros((r.n,)))
+
+        The robot is controlled by a PD controller. We first define a
+        function to compute the control which has additional parameters for
+        the setpoint and control gains (qstar, P, D)::
 
-         #. to apply zero joint torque to the robot without Coulomb
-            friction::
+        >>> def myfunc(robot, t, q, qd, qstar, P, D):
+        >>>     return (qstar - q) * P + qd * D  # P, D are (6,)
 
-                def myfunc(robot, t, q, qd):
-                    return np.zeros((robot.n,))
-
-                tg = robot.nofriction().fdyn(5, q0, myfunc)
-
-                plt.figure()
-                plt.plot(tg.t, tg.q)
-                plt.show()
-
-            We could also use a lambda function::
-
-                tg = robot.nofriction().fdyn(
-                    5, q0, lambda r, t, q, qd: np.zeros((r.n,)))
-
-         #. the robot is controlled by a PD controller. We first define a
-            function to compute the control which has additional parameters for
-            the setpoint and control gains (qstar, P, D)::
-
-                def myfunc(robot, t, q, qd, qstar, P, D):
-                    return (qstar - q) * P + qd * D  # P, D are (6,)
-
-                tg = robot.fdyn(10, q0, myfunc, torque_args=(qstar, P, D)) )
+        >>> tg = robot.fdyn(10, q0, myfunc, torque_args=(qstar, P, D)) )
 
         Many integrators have variable step length which is problematic if we
         want to animate the result.  If ``dt`` is specified then the solver
         results are interpolated in time steps of ``dt``.
 
-        .. note::
-
-            - This function performs poorly with non-linear joint friction,
+        Notes
+        -----
+        - This function performs poorly with non-linear joint friction,
             such as Coulomb friction.  The R.nofriction() method can be used
             to set this friction to zero.
-            - If the function is not specified then zero force/torque is
+        - If the function is not specified then zero force/torque is
             applied to the manipulator joints.
-            - Interpolation is performed using `ScipY integrate.ode
+        - Interpolation is performed using `ScipY integrate.ode
             <https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.ode.html>`
-            - The SciPy RK45 integrator is used by default
-            - Interpolation is performed using `SciPy interp1
+        - The SciPy RK45 integrator is used by default
+        - Interpolation is performed using `SciPy interp1
             <https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html>`
 
-        :seealso: :func:`DHRobot.accel`, :func:`DHRobot.nofriction`,
-            :func:`DHRobot.rne`.
+        See Also
+        --------
+        :func:`DHRobot.accel`
+        :func:`DHRobot.nofriction`,
+        :func:`DHRobot.rne`.
+
         """
 
         n = self.n
 
         if not isscalar(T):
             raise ValueError("T must be a scalar")
         q0 = getvector(q0, n)
         if qd0 is None:
             qd0 = np.zeros((n,))
         else:
             qd0 = getvector(qd0, n)
-        if torque is not None:
-            if not callable(torque):
-                raise ValueError("torque function must be callable")
+        if Q is not None:
+            if not callable(Q):
+                raise ValueError("generalized joint torque function must be callable")
 
         # concatenate q and qd into the initial state vector
         x0 = np.r_[q0, qd0]
 
         # get user specified integrator
         scipy_integrator = integrate.__dict__[solver]
 
         integrator = scipy_integrator(
-            lambda t, y: self._fdyn(t, y, torque, torque_args),
+            lambda t, y: self._fdyn(t, y, Q, Q_args),
             t0=0.0,
             y0=x0,
             t_bound=T,
             **solver_args,
         )
 
         # initialize list of time and states
@@ -358,106 +369,122 @@
 
             tnew = np.arange(0, T, dt)
             xnew = interp(tnew)
             return namedtuple("fdyn", "t q qd")(tnew, xnew[:, :n], xnew[:, n:])
         else:
             return namedtuple("fdyn", "t q qd")(tarray, xarray[:, :n], xarray[:, n:])
 
-    def _fdyn(self, t, x, torqfun, targs):
+    def _fdyn(
+        self: RobotProto,
+        t: float,
+        x: NDArray,
+        Qfunc: Callable[[Any, float, NDArray, NDArray], NDArray],
+        Qargs: Dict,
+    ):
         """
         Private function called by fdyn
 
-        :param t: current time
-        :type t: float
-        :param x: current state [q, qd]
-        :type x: numpy array (2n,)
-        :param torqfun: a function that computes torque as a function of time
-        and/or state
-        :type torqfun: callable
-        :param targs: argumments passed to ``torqfun``
-        :type targs: dict
-
-        :return: derivative of current state [qd, qdd]
-        :rtype: numpy array (2n,)
-
         Called by ``fdyn`` to evaluate the robot velocity and acceleration for
         forward dynamics.
+
+        Parameters
+        ----------
+        t
+            current time
+        x
+            current state [q, qd]
+        Qfunc
+            a function that computes torque as a function of time
+            and/or state
+        Qargs : dict
+            argumments passed to ``Qfunc``
+
+        Returns
+        -------
+        fdyn
+            derivative of current state [qd, qdd]
+
         """
         n = self.n
 
         q = x[0:n]
         qd = x[n:]
 
         # evaluate the torque function if one is given
-        if torqfun is None:
+        if Qfunc is None:
             tau = np.zeros((n,))
         else:
-            tau = torqfun(self, t, q, qd, **targs)
+            tau = Qfunc(self, t, q, qd, **Qargs)
             if len(tau) != n or not all(np.isreal(tau)):
                 raise RuntimeError(
                     "torque function must return vector with N real elements"
                 )
 
         qdd = self.accel(q, qd, tau)
 
         return np.r_[qd, qdd]
 
-    def accel(self, q, qd, torque, gravity=None):
+    def accel(self: RobotProto, q, qd, torque, gravity=None):
         r"""
         Compute acceleration due to applied torque
 
-        :param q: Joint coordinates
-        :type q: ndarray(n)
-        :param qd: Joint velocity
-        :type qd: ndarray(n)
-        :param torque: Joint torques of the robot
-        :type torque:  ndarray(n)
-        :param gravity: Gravitational acceleration (Optional, if not supplied will
-            use the ``gravity`` attribute of self).
-        :type gravity: ndarray(3)
-        :return: Joint accelerations of the robot
-        :rtype: ndarray(n)
-
         ``qdd = accel(q, qd, torque)`` calculates a vector (n) of joint
         accelerations that result from applying the actuator force/torque (n)
         to the manipulator in state `q` (n) and `qd` (n), and ``n`` is
         the number of robot joints.
 
         .. math::
 
             \ddot{q} = \mathbf{M}^{-1} \left(\tau - \mathbf{C}(q)\dot{q} - \mathbf{g}(q)\right)
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.accel(puma.qz, 0.5 * np.ones(6), np.zeros(6))
-
         **Trajectory operation**
 
         If `q`, `qd`, torque are matrices (m,n) then ``qdd`` is a matrix (m,n)
         where each row is the acceleration corresponding to the equivalent rows
         of q, qd, torque.
 
-        .. note::
-            - Useful for simulation of manipulator dynamics, in
-              conjunction with a numerical integration function.
-            - Uses the method 1 of Walker and Orin to compute the forward
-              dynamics.
-            - Featherstone's method is more efficient for robots with large
-              numbers of joints.
-            - Joint friction is considered.
-
-        :references:
-            - Efficient dynamic computer simulation of robotic mechanisms,
-              M. W. Walker and D. E. Orin,
-              ASME Journa of Dynamic Systems, Measurement and Control, vol.
-              104, no. 3, pp. 205-211, 1982.
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        qd
+            Joint velocity
+        torque
+            Joint torques of the robot
+        gravity
+            Gravitational acceleration (Optional, if not supplied will
+            use the ``gravity`` attribute of self).
+
+        Returns
+        -------
+        ndarray(n)
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.accel(puma.qz, 0.5 * np.ones(6), np.zeros(6))
+
+        Notes
+        -----
+        - Useful for simulation of manipulator dynamics, in
+            conjunction with a numerical integration function.
+        - Uses the method 1 of Walker and Orin to compute the forward
+            dynamics.
+        - Featherstone's method is more efficient for robots with large
+            numbers of joints.
+        - Joint friction is considered.
+
+        References
+        ----------
+        - Efficient dynamic computer simulation of robotic mechanisms,
+            M. W. Walker and D. E. Orin,
+            ASME Journa of Dynamic Systems, Measurement and Control, vol.
+            104, no. 3, pp. 205-211, 1982.
 
         """  # noqa
 
         q = getmatrix(q, (None, self.n))
         qd = getmatrix(qd, (None, self.n))
         torque = getmatrix(torque, (None, self.n))
 
@@ -480,16 +507,24 @@
             qdd[k, :] = np.linalg.solve(M, tauk - tau)
 
         if q.shape[0] == 1:
             return qdd[0, :]
         else:
             return qdd
 
-    def pay(self, W, q=None, J=None, frame=1):
+    def pay(
+        self: RobotProto,
+        W: ArrayLike,
+        q: Union[NDArray, None] = None,
+        J: Union[NDArray, None] = None,
+        frame: int = 1,
+    ):
         """
+        Generalised joint force/torque due to a payload wrench
+
         tau = pay(W, J) Returns the generalised joint force/torques due to a
         payload wrench W applied to the end-effector. Where the manipulator
         Jacobian is J (6xn), and n is the number of robot joints.
 
         tau = pay(W, q, frame) as above but the Jacobian is calculated at pose
         q in the frame given by frame which is 0 for base frame, 1 for
         end-effector frame.
@@ -498,60 +533,70 @@
         end effector, W = [Fx Fy Fz Mx My Mz]'.
 
         Trajectory operation:
           In the case q is nxm or J is 6xnxm then tau is nxm where each row
           is the generalised force/torque at the pose given by corresponding
           row of q.
 
-        :param W: A wrench vector applied at the end effector,
+        Parameters
+        ----------
+        W
+            A wrench vector applied at the end effector,
             W = [Fx Fy Fz Mx My Mz]
-        :type W: ndarray(6)
-        :param q: Joint coordinates
-        :type q: ndarray(n)
-        :param J: The manipulator Jacobian (Optional, if not supplied will
+        q
+            Joint coordinates
+        J
+            The manipulator Jacobian (Optional, if not supplied will
             use the q value).
-        :type J: ndarray(6,n)
-        :param frame: The frame in which to torques are expressed in when J
+        frame
+            The frame in which to torques are expressed in when J
             is not supplied. 0 means base frame of the robot, 1 means end-
             effector frame
-        :type frame: int
-
-        :return: Joint forces/torques due to w
-        :rtype: ndarray(n)
 
-        .. note::
-            - Wrench vector and Jacobian must be from the same reference
-              frame.
-            - Tool transforms are taken into consideration when frame=1.
-            - Must have a constant wrench - no trajectory support for this
-              yet.
+        Returns
+        -------
+        t
+            Joint forces/torques due to w
+
+        Notes
+        -----
+        - Wrench vector and Jacobian must be from the same reference
+            frame.
+        - Tool transforms are taken into consideration when frame=1.
+        - Must have a constant wrench - no trajectory support for this
+            yet.
 
         """
 
         try:
-            W = getvector(W, 6)
+            W = np.array(getvector(W, 6))
             trajn = 0
         except ValueError:
-            trajn = W.shape[0]
-            verifymatrix(W, (trajn, 6))
+            if isinstance(W, NDArray):
+                trajn = W.shape[0]
+                verifymatrix(W, (trajn, 6))
+            else:
+                raise ValueError("W is invalid")
 
         if trajn:
             # A trajectory
             if J is not None:
                 # Jacobian supplied
                 verifymatrix(J, (trajn, 6, self.n))
-            else:
+            elif q is not None:
                 # Use q instead
                 verifymatrix(q, (trajn, self.n))
                 J = np.zeros((trajn, 6, self.n))
                 for i in range(trajn):
                     if frame:
                         J[i, :, :] = self.jacobe(q[i, :])
                     else:
                         J[i, :, :] = self.jacob0(q[i, :])
+            else:
+                raise ValueError("q of J is needed for trajectory")
         else:
             # Single configuration
             if J is not None:
                 # Jacobian supplied
                 verifymatrix(J, (6, self.n))
             else:
                 # Use q instead
@@ -571,57 +616,67 @@
             tau = np.zeros((trajn, self.n))
 
             for i in range(trajn):
                 tau[i, :] = -J[i, :, :].T @ W[i, :]
 
         return tau
 
-    def payload(self, m, p=np.zeros(3)):
+    def payload(self: RobotProto, m: float, p=np.zeros(3)):
         """
+        Add a payload to the end-effector
+
         payload(m, p) adds payload mass adds a payload with point mass m at
         position p in the end-effector coordinate frame.
 
         payload(m) adds payload mass adds a payload with point mass m at
         in the end-effector coordinate frame.
 
         payload(0) removes added payload.
 
-        :param m: mass (kg)
-        :type m: float
-        :param p: position in end-effector frame
-        :type p: ndarray(3,1)
+        Parameters
+        ----------
+        m
+            mass (kg)
+        p
+            position in end-effector frame
 
         """
 
         p = getvector(p, 3, out="col")
         lastlink = self.links[self.n - 1]
 
         lastlink.m = m
         lastlink.r = p
 
-    def jointdynamics(self, q, qd=None):
+    def jointdynamics(self: RobotProto, q, qd=None):
         """
         Transfer function of joint actuator
 
-        :param q: Joint coordinates
-        :type q: ndarray(n)
-        :param qd: Joint velocity
-        :type qd: ndarray(n)
-        :return: transfer function denominators
-        :rtype: list of 2-tuples
-
-        - ``tf = jointdynamics(qd, q)`` calculates a vector of n
-          continuous-time transfer functions that represent the transfer
-          function 1/(Js+B) for each joint based on the dynamic parameters
-          of the robot and the configuration q (n). n is the number of robot
-          joints.  The result is a list of tuples (J, B) for each joint.
-
-        - ``tf = jointdynamics(q, qd)`` as above but include the linearized
-          effects of Coulomb friction when operating at joint velocity QD
-          (1xN).
+        ``tf = jointdynamics(qd, q)`` calculates a vector of n
+        continuous-time transfer functions that represent the transfer
+        function 1/(Js+B) for each joint based on the dynamic parameters
+        of the robot and the configuration q (n). n is the number of robot
+        joints.  The result is a list of tuples (J, B) for each joint.
+
+        ``tf = jointdynamics(q, qd)`` as above but include the linearized
+        effects of Coulomb friction when operating at joint velocity QD
+        (1xN).
+
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        qd
+            Joint velocity
+
+        Returns
+        -------
+        list of 2-tuples
+            transfer function denominators
+
         """
 
         tf = []
         for j, link in enumerate(self.links):
 
             # compute inertia for this joint
             zero = np.zeros((self.n))
@@ -638,59 +693,64 @@
                     B += link.Tc[0] / qd[j]
                 elif qd < 0:
                     B += link.Tc[1] / qd[j]
             tf.append(((1,), (J, B)))
 
         return tf
 
-    def cinertia(self, q):
+    def cinertia(self: RobotProto, q):
         """
         Deprecated, use ``inertia_x``
 
         """
         warnings.warn("cinertia is deprecated, use inertia_x", DeprecationWarning)
 
-    def inertia(self, q):
-        """
-        Manipulator inertia matrix
-
-        :param q: Joint coordinates
-        :type q: ndarray(n) or ndarray(m,n)
-
-        :return: The inertia matrix
-        :rtype: ndarray(n,n) or ndarray(m,n,n)
-
+    def inertia(self: RobotProto, q: NDArray) -> NDArray:
+        """Manipulator inertia matrix
         ``inertia(q)`` is the symmetric joint inertia matrix (n,n) which
         relates joint torque to joint acceleration for the robot at joint
         configuration q.
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.inertia(puma.qz)
-
         **Trajectory operation**
 
         If ``q`` is a matrix (m,n), each row is interpretted as a joint state
         vector, and the result is a 3d-matrix (nxnxk) where each plane
         corresponds to the inertia for the corresponding row of q.
 
-        .. note::
-            - The diagonal elements ``M[j,j]`` are the inertia seen by joint
-              actuator ``j``.
-            - The off-diagonal elements ``M[j,k]`` are coupling inertias that
-              relate acceleration on joint ``j`` to force/torque on
-              joint ``k``.
-            - The diagonal terms include the motor inertia reflected through
-              the gear ratio.
+        Parameters
+        ----------
+        q
+            Joint coordinates
+
+        Returns
+        -------
+        inertia
+            The inertia matrix
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.inertia(puma.qz)
+
+        Notes
+        -----
+        - The diagonal elements ``M[j,j]`` are the inertia seen by joint
+            actuator ``j``.
+        - The off-diagonal elements ``M[j,k]`` are coupling inertias that
+            relate acceleration on joint ``j`` to force/torque on
+            joint ``k``.
+        - The diagonal terms include the motor inertia reflected through
+            the gear ratio.
+
+        See Also
+        --------
+        :func:`cinertia`
 
-        :seealso: :func:`cinertia`
         """
         q = getmatrix(q, (None, self.n))
 
         In = np.zeros((q.shape[0], self.n, self.n))
 
         for k, qk in enumerate(q):
             In[k, :, :] = self.rne(
@@ -701,54 +761,60 @@
             )
 
         if q.shape[0] == 1:
             return In[0, :, :]
         else:
             return In
 
-    def coriolis(self, q, qd):
+    def coriolis(self: RobotProto, q, qd):
         r"""
         Coriolis and centripetal term
 
-        :param q: Joint coordinates
-        :type q: ndarray(n) or ndarray(m,n)
-        :param qd: Joint velocity
-        :type qd: ndarray(n) or ndarray(m,n)
-        :return: Velocity matrix
-        :rtype: ndarray(n,n) or ndarray(m,n,n)
-
         ``coriolis(q, qd)`` calculates the Coriolis/centripetal matrix (n,n)
         for the robot in configuration ``q`` and velocity ``qd``, where ``n``
         is the number of joints.
 
         The product :math:`\mathbf{C} \dot{q}` is the vector of joint
         force/torque due to velocity coupling. The diagonal elements are due to
         centripetal effects and the off-diagonal elements are due to Coriolis
         effects. This matrix is also known as the velocity coupling matrix,
         since it describes the disturbance forces on any joint due to
         velocity of all other joints.
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.coriolis(puma.qz, 0.5 * np.ones((6,)))
-
         **Trajectory operation**
 
         If ``q`` and `qd` are matrices (m,n), each row is interpretted as a
         joint configuration, and the result (n,n,m) is a 3d-matrix where
         each plane corresponds to a row of ``q`` and ``qd``.
 
-        .. note::
-            - Joint viscous friction is also a joint force proportional to
-              velocity but it is eliminated in the computation of this value.
-            - Computationally slow, involves :math:`n^2/2` invocations of RNE.
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        qd
+            Joint velocity
+
+        Returns
+        -------
+        coriolis
+            Velocity matrix
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.coriolis(puma.qz, 0.5 * np.ones((6,)))
+
+        Notes
+        -----
+        - Joint viscous friction is also a joint force proportional to
+            velocity but it is eliminated in the computation of this value.
+        - Computationally slow, involves :math:`n^2/2` invocations of RNE.
+
         """
 
         q = getmatrix(q, (None, self.n))
         qd = getmatrix(qd, (None, self.n))
         if q.shape[0] != qd.shape[0]:
             raise ValueError("q and qd must have the same number of rows")
 
@@ -793,48 +859,55 @@
             C[k, :, :] = C[k, :, :] + Csq[k, :, :] @ np.diag(qdk)
 
         if q.shape[0] == 1:
             return C[0, :, :]
         else:
             return C
 
-    def gravload(self, q=None, gravity=None):
+    def gravload(
+        self: RobotProto,
+        q: Union[ArrayLike, None] = None,
+        gravity: Union[ArrayLike, None] = None,
+    ):
         """
         Compute gravity load
 
-        :param q: Joint coordinates
-        :type q: ndarray(n)
-        :param gravity: Gravitational acceleration (Optional, if not supplied will
-            use the stored gravity values).
-        :type gravity: ndarray(3)
-
-        :return: The generalised joint force/torques due to gravity
-        :rtype: ndarray(n)
-
         ``robot.gravload(q)`` calculates the joint gravity loading (n) for
         the robot in the joint configuration ``q`` and using the default
         gravitational acceleration specified in the DHRobot object.
 
         ``robot.gravload(q, gravity=g)`` as above except the gravitational
         acceleration is explicitly specified as ``g``.
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.gravload(puma.qz)
-
         **Trajectory operation**
 
         If q is a matrix (nxm) each column is interpreted as a joint
         configuration vector, and the result is a matrix (nxm) each column
         being the corresponding joint torques.
 
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        gravity : ndarray(3)
+            Gravitational acceleration (Optional, if not supplied will
+            use the stored gravity values).
+
+        Returns
+        -------
+        gravload
+            The generalised joint force/torques due to gravity
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.gravload(puma.qz)
+
         """
 
         q = getmatrix(q, (None, self.n))
 
         if gravity is None:
             gravity = self.gravity
         else:
@@ -847,28 +920,20 @@
             taug[k, :] = self.rne(qk, z, z, gravity=gravity)
 
         if q.shape[0] == 1:
             return taug[0, :]
         else:
             return taug
 
-    def inertia_x(self, q=None, pinv=False, representation="rpy/xyz", Ji=None):
+    def inertia_x(
+        self: RobotProto, q=None, pinv=False, representation="rpy/xyz", Ji=None
+    ):
         r"""
         Operational space inertia matrix
 
-        :param q: Joint coordinates
-        :type q: array_like(n) or ndarray(m,n)
-        :param pinv: use pseudo inverse rather than inverse
-        :type pinv: bool
-        :param analytical: the type of analytical Jacobian to use, default is
-            'rpy/xyz'
-        :type analytical: str
-        :return: The inertia matrix
-        :rtype: ndarray(6,6) or ndarray(m,6,6)
-
         ``robot.inertia_x(q)`` is the operational space (Cartesian) inertia
         matrix which relates Cartesian force/torque to Cartesian
         acceleration at the joint configuration q.
 
         .. math::
 
             \mathbf{M}_x = \mathbf{J}(q)^{-T} \mathbf{M}(q) \mathbf{J}(q)^{-1}
@@ -881,37 +946,60 @@
             =============  ========================================
             ``'rpy/xyz'``  RPY angular rates in XYZ order (default)
             ``'rpy/zyx'``  RPY angular rates in XYZ order
             ``'eul'``      Euler angular rates in ZYZ order
             ``'exp'``      exponential coordinate rates
             =============  ========================================
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.inertia_x(puma.qz)
-
         **Trajectory operation**
 
         If ``q`` is a matrix (m,n), each row is interpretted as a joint state
         vector, and the result is a 3d-matrix (m,n,n) where each plane
         corresponds to the Cartesian inertia for the corresponding
         row of ``q``.
 
-        .. note::
-            - If the robot is not 6 DOF the ``pinv`` option is set True.
-            - ``pinv()`` is around 5x slower than ``inv()``
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        pinv
+            use pseudo inverse rather than inverse (Default value = False)
+        analytical
+            the type of analytical Jacobian to use, default is
+            'rpy/xyz'
+        representation
+            (Default value = "rpy/xyz")
+        Ji
+            The inverse analytical Jacobian (base-frame)
+
+        Returns
+        -------
+        inertia_x
+            The operational space inertia matrix
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.inertia_x(puma.qz)
+
+        Notes
+        -----
+        - If the robot is not 6 DOF the ``pinv`` option is set True.
+        - ``pinv()`` is around 5x slower than ``inv()``
 
         .. warning:: Assumes that the operational space has 6 DOF.
 
-        :seealso: :func:`inertia`
+        See Also
+        --------
+        :func:`inertia`
+
         """
+
         q = getmatrix(q, (None, self.n))
         if q.shape[1] != 6:
             pinv = True
 
         if q.shape[0] == 1:
             # single q case
             if Ji is None:
@@ -935,40 +1023,28 @@
                     Ji = np.linalg.inv(Ja)
                 M = self.inertia(qk)
                 Mt[k, :, :] = Ji.T @ M @ Ji
 
             return Mt
 
     def coriolis_x(
-        self,
+        self: RobotProto,
         q,
         qd,
         pinv=False,
         representation="rpy/xyz",
         J=None,
         Ji=None,
         Jd=None,
         C=None,
         Mx=None,
     ):
         r"""
         Operational space Coriolis and centripetal term
 
-        :param q: Joint coordinates
-        :type q: ndarray(n) or ndarray(m,n)
-        :param qd: Joint velocity
-        :type qd: ndarray(n) or ndarray(m,n)
-        :param pinv: use pseudo inverse rather than inverse
-        :type pinv: bool
-        :param analytical: the type of analytical Jacobian to use, default is
-            'rpy/xyz'
-        :type analytical: str
-        :return: Operational space velocity matrix
-        :rtype: ndarray(6,6) or ndarray(m,6,6)
-
         ``coriolis_x(q, qd)`` is the Coriolis/centripetal matrix (m,m)
         in operational space for the robot in configuration ``q`` and velocity
         ``qd``, where ``n`` is the number of joints.
 
         .. math::
 
             \mathbf{C}_x = \mathbf{J}(q)^{-T} \left(
@@ -988,39 +1064,74 @@
             =============  ========================================
             ``'rpy/xyz'``  RPY angular rates in XYZ order (default)
             ``'rpy/zyx'``  RPY angular rates in XYZ order
             ``'eul'``      Euler angular rates in ZYZ order
             ``'exp'``      exponential coordinate rates
             =============  ========================================
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.coriolis_x(puma.qz, 0.5 * np.ones((6,)))
-
         **Trajectory operation**
 
         If ``q`` and `qd` are matrices (m,n), each row is interpretted as a
         joint configuration, and the result (n,n,m) is a 3d-matrix where
         each plane corresponds to a row of ``q`` and ``qd``.
 
-        .. note::
-            - Joint viscous friction is also a joint force proportional to
-              velocity but it is eliminated in the computation of this value.
-            - Computationally slow, involves :math:`n^2/2` invocations of RNE.
-            - If the robot is not 6 DOF the ``pinv`` option is set True.
-            - ``pinv()`` is around 5x slower than ``inv()``
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        qd
+            Joint velocity
+        pinv
+            use pseudo inverse rather than inverse (Default value = False)
+        analytical
+            the type of analytical Jacobian to use, default is
+            'rpy/xyz'
+        representation
+             (Default value = "rpy/xyz")
+        J
+
+        Ji
+
+        Jd
+
+        C
+
+        Mx
+
+
+        Returns
+        -------
+        ndarray(6,6) or ndarray(m,6,6)
+            Operational space velocity matrix
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.coriolis_x(puma.qz, 0.5 * np.ones((6,)))
+
+        Notes
+        -----
+        - Joint viscous friction is also a joint force proportional to
+            velocity but it is eliminated in the computation of this value.
+        - Computationally slow, involves :math:`n^2/2` invocations of RNE.
+        - If the robot is not 6 DOF the ``pinv`` option is set True.
+        - ``pinv()`` is around 5x slower than ``inv()``
 
         .. warning:: Assumes that the operational space has 6 DOF.
 
-        :seealso: :func:`coriolis`, :func:`inertia_x`, :func:`hessian0`
+        See Also
+        --------
+        :func:`coriolis`
+        :func:`inertia_x`
+        :func:`hessian0`
+
         """
+
         q = getmatrix(q, (None, self.n))
         qd = getmatrix(qd, (None, self.n))
         n = q.shape[1]
         if n != 6:
             pinv = True
 
         if q.shape[0] == 1:
@@ -1032,15 +1143,15 @@
                 else:
                     Ji = np.linalg.inv(Ja)
             if C is None:
                 C = self.coriolis(q[0, :], qd[0, :])
             if Mx is None:
                 Mx = self.inertia_x(q[0, :], Ji=Ji)
             if Jd is None:
-                Jd = self.jacob_dot(q[0, :], qd[0, :], J0=Ja)
+                Jd = self.jacob0_dot(q[0, :], qd[0, :], J0=Ja)
             return Ji.T @ (C - Mx @ Jd) @ Ji
         else:
             # trajectory case
             Ct = np.zeros((q.shape[0], 6, 6))
 
             for k, (qk, qdk) in enumerate(zip(q, qd)):
 
@@ -1049,39 +1160,31 @@
                     if pinv:
                         Ji = np.linalg.pinv(Ja)
                     else:
                         Ji = np.linalg.inv(Ja)
 
                 C = self.coriolis(qk, qdk)
                 Mx = self.inertia_x(qk, Ji=Ji)
-                Jd = self.jacob_dot(qk, qdk, J0=J)
+                Jd = self.jacob0_dot(qk, qdk, J0=J)
 
                 Ct[k, :, :] = Ji.T @ (C - Mx @ Jd) @ Ji
 
             return Ct
 
     def gravload_x(
-        self, q=None, gravity=None, pinv=False, representation="rpy/xyz", Ji=None
+        self: RobotProto,
+        q=None,
+        gravity=None,
+        pinv=False,
+        representation="rpy/xyz",
+        Ji=None,
     ):
-        """
+        r"""
         Operational space gravity load
 
-        :param q: Joint coordinates
-        :type q: ndarray(n) or ndarray(m,n)
-        :param gravity: Gravitational acceleration (Optional, if not supplied will
-            use the ``gravity`` attribute of self).
-        :type gravity: ndarray(3)
-        :param pinv: use pseudo inverse rather than inverse
-        :type pinv: bool
-        :param analytical: the type of analytical Jacobian to use, default is
-            'rpy/xyz'
-        :type analytical: str
-        :return: The operational space gravity wrench
-        :rtype: ndarray(6) or ndarray(m,6)
-
         ``robot.gravload_x(q)`` calculates the gravity wrench for
         the robot in the joint configuration ``q`` and using the default
         gravitational acceleration specified in the robot object.
 
         ``robot.gravload_x(q, gravity=g)`` as above except the gravitational
         acceleration is explicitly specified as ``g``.
 
@@ -1097,144 +1200,186 @@
             =============  ========================================
             ``'rpy/xyz'``  RPY angular rates in XYZ order (default)
             ``'rpy/zyx'``  RPY angular rates in XYZ order
             ``'eul'``      Euler angular rates in ZYZ order
             ``'exp'``      exponential coordinate rates
             =============  ========================================
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.gravload_x(puma.qz)
-
         **Trajectory operation**
 
         If q is a matrix (nxm) each column is interpreted as a joint
         configuration vector, and the result is a matrix (nxm) each column
         being the corresponding joint torques.
 
-        .. note::
-            - If the robot is not 6 DOF the ``pinv`` option is set True.
-            - ``pinv()`` is around 5x slower than ``inv()``
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        gravity
+            Gravitational acceleration (Optional, if not supplied will
+            use the ``gravity`` attribute of self).
+        pinv
+            use pseudo inverse rather than inverse (Default value = False)
+        analytical
+            the type of analytical Jacobian to use, default is
+            'rpy/xyz'
+        representation :
+             (Default value = "rpy/xyz")
+        Ji :
+
+
+        Returns
+        -------
+        gravload
+            The operational space gravity wrench
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.gravload_x(puma.qz)
+
+        Notes
+        -----
+        - If the robot is not 6 DOF the ``pinv`` option is set True.
+        - ``pinv()`` is around 5x slower than ``inv()``
 
         .. warning:: Assumes that the operational space has 6 DOF.
 
-        :seealso: :func:`gravload`
+        See Also
+        --------
+        :func:`gravload`
+
         """
 
         q = getmatrix(q, (None, self.n))
         if q.shape[1] != 6:
             pinv = True
 
         # if gravity is None:
         #     gravity = self.gravity
         # else:
         #     gravity = getvector(gravity, 3)
 
         if q.shape[0] == 1:
             # single q case
             if Ji is None:
-                Ja = self.jacob0(q[0, :], analytical=representation)
+                Ja = self.jacob0_analytical(q[0, :], representation=representation)
                 if pinv:
                     Ji = np.linalg.pinv(Ja)
                 else:
                     Ji = np.linalg.inv(Ja)
             G = self.gravload(q[0, :])
             return Ji.T @ G
 
         else:
             # trajectory case
             taug = np.zeros((q.shape[0], self.n))
             # z = np.zeros(self.n)
 
             for k, qk in enumerate(q):
-                Ja = self.jacob0(qk, analytical=representation)
+                Ja = self.jacob0_analytical(qk, representation=representation)
                 G = self.gravload(qk)
                 if pinv:
                     Ji = np.linalg.pinv(Ja)
                 else:
                     Ji = np.linalg.inv(Ja)
 
                 taug[k, :] = Ji.T @ G
 
             return taug
 
     def accel_x(
-        self, q, xd, wrench, gravity=None, pinv=False, representation="rpy/xyz"
+        self: RobotProto,
+        q,
+        xd,
+        wrench,
+        gravity=None,
+        pinv=False,
+        representation="rpy/xyz",
     ):
         r"""
         Operational space acceleration due to applied wrench
 
-        :param q: Joint coordinates
-        :type q: ndarray(n) or ndarray(m,n)
-        :param qd: Joint velocity
-        :type qd: ndarray(n) or ndarray(m,n)
-        :param wrench: Wrench applied to the end-effector
-        :type torque:  ndarray(6) or ndarray(m,6)
-        :param gravity: Gravitational acceleration (Optional, if not supplied will
-            use the ``gravity`` attribute of self).
-        :type gravity: ndarray(3)
-        :param pinv: use pseudo inverse rather than inverse
-        :type pinv: bool
-        :param analytical: the type of analytical Jacobian to use, default is
-            'rpy/xyz'
-        :type analytical: str
-        :return: Operational space accelerations of the end-effector
-        :rtype: ndarray(6) or ndarray(m,6)
-
         ``xdd = accel_x(q, qd, wrench)`` is the operational space acceleration
         due to ``wrench`` applied to the end-effector of a robot in joint
         configuration ``q`` and joint velocity ``qd``.
 
         .. math::
 
             \ddot{x} = \mathbf{J}(q) \mathbf{M}(q)^{-1} \left(
                 \mathbf{J}(q)^T w - \mathbf{C}(q)\dot{q} - \mathbf{g}(q)
                 \right)
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.accel_x(puma.qz, 0.5 * np.ones(6), np.zeros(6))
-
         **Trajectory operation**
 
         If `q`, `qd`, torque are matrices (m,n) then ``qdd`` is a matrix (m,n)
         where each row is the acceleration corresponding to the equivalent rows
         of q, qd, wrench.
 
-        .. note::
-            - Useful for simulation of manipulator dynamics, in
-              conjunction with a numerical integration function.
-            - Uses the method 1 of Walker and Orin to compute the forward
-              dynamics.
-            - Featherstone's method is more efficient for robots with large
-              numbers of joints.
-            - Joint friction is considered.
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        qd
+            Joint velocity
+        wrench
+            Wrench applied to the end-effector
+        gravity
+            Gravitational acceleration (Optional, if not supplied will
+            use the ``gravity`` attribute of self).
+        pinv
+            use pseudo inverse rather than inverse
+        analytical
+            the type of analytical Jacobian to use, default is
+            'rpy/xyz'
+        xd :
+        representation :
+            (Default value = "rpy/xyz")
+
+        Returns
+        -------
+        accel
+            Operational space accelerations of the end-effector
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.accel_x(puma.qz, 0.5 * np.ones(6), np.zeros(6))
+
+        Notes
+        -----
+        - Useful for simulation of manipulator dynamics, in
+            conjunction with a numerical integration function.
+        - Uses the method 1 of Walker and Orin to compute the forward
+            dynamics.
+        - Featherstone's method is more efficient for robots with large
+            numbers of joints.
+        - Joint friction is considered.
+
+        See Also
+        --------
+        :func:`accel`
 
-        :seealso: :func:`accel`
         """  # noqa
 
         q = getmatrix(q, (None, self.n))
         xd = getmatrix(xd, (None, 6))
         w = getmatrix(wrench, (None, 6))
         if q.shape[1] != 6:
             pinv = True
 
         xdd = np.zeros((q.shape[0], self.n))
 
         for k, (qk, xdk, wk) in enumerate(zip(q, xd, w)):
 
-            Ja = self.jacob0(qk, analytical=representation)
+            Ja = self.jacob0_analytical(qk, representation=representation)
             if pinv:
                 Ji = np.linalg.pinv(Ja)
             else:
                 Ji = np.linalg.inv(Ja)
 
             # Compute current manipulator inertia tensor
             # shortcut from torques resulting from unit
@@ -1247,69 +1392,77 @@
             # Compute gravity and coriolis torque torques resulting from zero
             # acceleration at given velocity & with gravity acting.
             tau_rne = self.rne(qk, Ji @ xdk, np.zeros((1, self.n)), gravity=gravity)
 
             # solve is faster than inv() which is faster than pinv()
             #   tau_rne = C(q,qd) + G(q)
             #   qdd = M^-1 (tau - C(q,qd) - G(q))
-            qdd = np.linalg.solve(M, J.T @ wk - tau_rne)
+            qdd = np.linalg.solve(M, Ja.T @ wk - tau_rne)
 
             # xd = Ja qd
             # xdd = Jad qd + Ja qdd
             #
             # Ja = T J
             # Jad = Td J + T Jd
             # assume Td = 0, not sure how valid that is
 
             # need Jacobian dot
             qdk = Ji @ xdk
-            Jd = self.jacob_dot(qk, qdk, J0=J)
+            Jd = self.jacob0_dot(qk, qdk, J0=Ja)
 
             xdd[k, :] = T @ (Jd @ qdk + J @ qdd)
 
         if q.shape[0] == 1:
             return xdd[0, :]
         else:
             return xdd
 
-    def itorque(self, q, qdd):
+    def itorque(self: RobotProto, q, qdd):
         r"""
         Inertia torque
 
-        :param q: Joint coordinates
-        :type q: ndarray(n)
-        :param qdd: Joint acceleration
-        :type qdd: ndarray(n)
-
-        :return: The inertia torque vector
-        :rtype: ndarray(n)
-
         ``itorque(q, qdd)`` is the inertia force/torque vector (n) at
         the specified joint configuration q (n) and acceleration qdd (n), and
         ``n`` is the number of robot joints.
         It is :math:`\mathbf{I}(q) \ddot{q}`.
 
-        Example:
-
-        .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.DH.Puma560()
-            >>> puma.itorque(puma.qz, 0.5 * np.ones((6,)))
-
         **Trajectory operation**
 
         If ``q`` and ``qdd`` are matrices (m,n), each row is interpretted as a
         joint configuration, and the result is a matrix (m,n) where each row is
         the corresponding joint torques.
 
-        .. note:: If the robot model contains non-zero motor inertia then this
-              will be included in the result.
+        Parameters
+        ----------
+        q
+            Joint coordinates
+        qdd
+            Joint acceleration
+
+        Returns
+        -------
+        itorque
+            The inertia torque vector
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.DH.Puma560()
+        >>> puma.itorque(puma.qz, 0.5 * np.ones((6,)))
+
+        Notes
+        -----
+        - If the robot model contains non-zero motor inertia then this
+            will be included in the result.
+
+        See Also
+        --------
+        :func:`inertia`
 
-        :seealso: :func:`inertia`
         """
 
         q = getmatrix(q, (None, self.n))
         qdd = getmatrix(qdd, (None, self.n))
         if q.shape[0] != qdd.shape[0]:
             raise ValueError("q and qdd must have the same number of rows")
 
@@ -1319,60 +1472,72 @@
             taui[k, :] = self.rne(qk, np.zeros(self.n), qddk, gravity=[0, 0, 0])
 
         if q.shape[0] == 1:
             return taui[0, :]
         else:
             return taui
 
-    def paycap(self, w, tauR, frame=1, q=None):
+    def paycap(
+        self: RobotProto,
+        w: NDArray,
+        tauR: NDArray,
+        frame: int = 1,
+        q: Union[ArrayLike, None] = None,
+    ):
         """
         Static payload capacity of a robot
 
-        :param w: The payload wrench
-        :type w: ndarray(n)
-        :param tauR: Joint torque matrix minimum and maximums
-        :type tauR: ndarray(n,2)
-        :param frame: The frame in which to torques are expressed in when J
-            is not supplied. 'base' means base frame of the robot, 'ee' means
-            end-effector frame
-        :type frame: str
-        :param q: Joint coordinates
-        :type q: ndarray(n)
-
-        :return: The maximum permissible payload wrench
-        :rtype: ndarray(6)
-        :return: Joint index (zero indexed) which hits its
-            force/torque limit
-        :rtype: int
-
         ``wmax, joint = paycap(q, w, f, tauR)`` returns the maximum permissible
         payload wrench ``wmax`` (6) applied at the end-effector, and the index
         of the joint (zero indexed) which hits its force/torque limit at that
         wrench. ``q`` (n) is the manipulator pose, ``w`` the payload wrench
         (6), ``f`` the wrench reference frame and tauR (nx2) is a matrix of
         joint forces/torques (first col is maximum, second col minimum).
 
         **Trajectory operation:**
 
         In the case q is nxm then wmax is Mx6 and J is Mx1 where the rows are
         the results at the pose given by corresponding row of q.
 
-        .. note::
-            - Wrench vector and Jacobian must be from the same reference frame
-            - Tool transforms are taken into consideration for frame=1.
+        Parameters
+        ----------
+        w
+            The payload wrench
+        tauR
+            Joint torque matrix minimum and maximums
+        frame
+            The frame in which to torques are expressed in when J
+            is not supplied. 'base' means base frame of the robot, 'ee' means
+            end-effector frame
+        q
+            Joint coordinates
+
+        Returns
+        -------
+        ndarray(6)
+            The maximum permissible payload wrench
+
+        Notes
+        -----
+        - Wrench vector and Jacobian must be from the same reference frame
+        - Tool transforms are taken into consideration for frame=1.
+
         """
+
         # TODO rewrite
         trajn = 1
 
         if q is None:
             q = self.q
+        else:
+            q = np.array(q)
 
         try:
-            q = getvector(q, self.n, "row")
-            w = getvector(w, 6, "row")
+            q = np.array(getvector(q, self.n, "row"))
+            w = np.array(getvector(w, 6, "row"))
         except ValueError:
             trajn = q.shape[1]
             verifymatrix(q, (trajn, self.n))
             verifymatrix(w, (trajn, 6))
 
         verifymatrix(tauR, (self.n, 2))
 
@@ -1408,33 +1573,37 @@
             joint[i] = np.argmin(WM)
 
         if trajn == 1:
             return wmax[0, :], joint[0]
         else:
             return wmax, joint
 
-    def perturb(self, p=0.1):
+    def perturb(self: RobotProto, p=0.1):
         """
         Perturb robot parameters
 
         rp = perturb(p) is a new robot object in which the dynamic parameters
         (link mass and inertia) have been perturbed. The perturbation is
         multiplicative so that values are multiplied by random numbers in the
         interval (1-p) to (1+p). The name string of the perturbed robot is
         prefixed by 'P/'.
 
         Useful for investigating the robustness of various model-based control
         schemes. For example to vary parameters in the range +/- 10 percent
         is: r2 = puma.perturb(0.1)
 
-        :param p: The percent (+/-) to be perturbed. Default 10%
-        :type p: float
-
-        :return: A copy of the robot with dynamic parameters perturbed
-        :rtype: DHRobot
+        Parameters
+        ----------
+        p
+            The percent (+/-) to be perturbed. Default 10%
+
+        Returns
+        -------
+        DHRobot
+            A copy of the robot with dynamic parameters perturbed
 
         """
 
         r2 = self.copy()
         r2.name = "P/" + self.name
 
         for i in range(self.n):
@@ -1457,187 +1626,8 @@
     print(f"\r{prefix} |{bar}| {percent}% {suffix}", end=printEnd)
 
 
 if __name__ == "__main__":  # pragma nocover
 
     import roboticstoolbox as rtb
 
-    # from spatialmath.base import symbolic as sym
-
     puma = rtb.models.DH.Puma560()
-
-    # for j, link in enumerate(puma):
-    #     print(f'joint {j:}::')
-    #     print(link.dyn(indent=4))
-    #     print()
-
-    # tau = puma.rne_dh(puma.qz, puma.qz, puma.qz)
-    # print(tau)
-    # tau = puma.rne_dh(np.r_[puma.qz, puma.qz, puma.qz])
-    # print(tau)
-    # tau = puma.rne_dh([0,0,0,0,0,0],  [0,0,0,0,0,0],  [0,0,0,0,0,0])
-    # print(tau)
-    # tau = puma.rne_dh([0,0,0,0,0,0,  0,0,0,0,0,0,  0,0,0,0,0,0])
-    # print(tau)
-
-    # puma = rtb.models.DH.Puma560(symbolic=True)
-    # print(puma)
-    # g = sym.symbol('g')
-    # puma.gravity = [0, 0, g]
-    # q = sym.symbol('q_:6')
-    # qd = sym.symbol('qd_:6')
-    # qdd = sym.symbol('qdd_:6')
-
-    # tau = puma.rne_dh(q, qd, qdd, debug=False)
-
-    # print(tau[0].coeff(qdd[0]))
-    # print(tau[0].expand().coeff(qdd[0]))
-
-    q = puma.qz
-    # qd = puma.qz
-    # qdd = puma.qz
-    ones = np.ones((6,))
-    qd = ones
-    qdd = ones
-
-    print(puma.rne(q, qd, qdd))
-    print(puma.rne_python(q, qd, qdd, debug=False))
-
-    print(puma.gravity)
-    print([link.isrevolute() for link in puma])
-
-    # NOT CONVINCED WE NEED THIS, AND IT'S ORPHAN CODE
-    # def gravjac(self, q, grav=None):
-    #     """
-    #     Compute gravity load and Jacobian
-
-    #     :param q: The joint configuration of the robot
-    #     :type q: ndarray(n)
-    #     :param grav: The gravity vector (Optional, if not supplied will
-    #         use the stored gravity values).
-    #     :type grav: ndarray(3,)
-
-    #     :return tau: The generalised joint force/torques due to gravity
-    #     :rtype tau: ndarray(n,)
-
-    #     ``tauB = gravjac(q, grav)`` calculates the generalised joint force/
-    #     torques due to gravity and the Jacobian
-
-    #     Trajectory operation:
-    #     If q is nxm where n is the number of robot joints then a
-    #     trajectory is assumed where each row of q corresponds to a robot
-    #     configuration. tau (nxm) is the generalised joint torque, each row
-    #     corresponding to an input pose, and jacob0 (6xnxm) where each
-    #     plane is a Jacobian corresponding to an input pose.
-
-    #     .. note::
-    #         - The gravity vector is defined by the SerialLink property if not
-    #           explicitly given.
-    #         - Does not use inverse dynamics function RNE.
-    #         - Faster than computing gravity and Jacobian separately.
-
-    #     Written by Bryan Moutrie
-
-    #     :seealso: :func:`gravload`
-    #     """
-
-    #     # TODO use np.cross instead
-    #     def _cross3(self, a, b):
-    #         c = np.zeros(3)
-    #         c[2] = a[0] * b[1] - a[1] * b[0]
-    #         c[0] = a[1] * b[2] - a[2] * b[1]
-    #         c[1] = a[2] * b[0] - a[0] * b[2]
-    #         return c
-
-    #     def makeJ(O, A, e, r):
-    #         J[3:6,:] = A
-    #         for j in range(r):
-    #             if r[j]:
-    #                 J[0:3,j] = cross3(A(:,j),e-O(:,j));
-    #             else:
-    #                 J[:,j] = J[[4 5 6 1 2 3],j]; %J(1:3,:) = 0;
-
-    #     if grav is None:
-    #         grav = np.copy(self.gravity)
-    #     else:
-    #         grav = getvector(grav, 3)
-
-    #     try:
-    #         if q is not None:
-    #             q = getvector(q, self.n, 'col')
-    #         else:
-    #             q = np.copy(self.q)
-    #             q = getvector(q, self.n, 'col')
-
-    #         poses = 1
-    #     except ValueError:
-    #         poses = q.shape[1]
-    #         verifymatrix(q, (self.n, poses))
-
-    #     if not self.mdh:
-    #         baseAxis = self.base.a
-    #         baseOrigin = self.base.t
-
-    #     tauB = np.zeros((self.n, poses))
-
-    #     # Forces
-    #     force = np.zeros((3, self.n))
-
-    #     for joint in range(self.n):
-    #         force[:, joint] = np.squeeze(self.links[joint].m * grav)
-
-    #     # Centre of masses (local frames)
-    #     r = np.zeros((4, self.n))
-    #     for joint in range(self.n):
-    #         r[:, joint] = np.r_[np.squeeze(self.links[joint].r), 1]
-
-    #     for pose in range(poses):
-    #         com_arr = np.zeros((3, self.n))
-
-    #         T = self.fkine_all(q[:, pose])
-
-    #         jointOrigins = np.zeros((3, self.n))
-    #         jointAxes = np.zeros((3, self.n))
-    #         for i in range(self.n):
-    #             jointOrigins[:, i] = T[i].t
-    #             jointAxes[:, i] = T[i].a
-
-    #         if not self.mdh:
-    #             jointOrigins = np.c_[
-    #                 baseOrigin, jointOrigins[:, :-1]
-    #             ]
-    #             jointAxes = np.c_[
-    #                 baseAxis, jointAxes[:, :-1]
-    #             ]
-
-    #         # Backwards recursion
-    #         for joint in range(self.n - 1, -1, -1):
-    #             # C.o.M. in world frame, homog
-    #             com = T[joint].A @ r[:, joint]
-
-    #             # Add it to the distal others
-    #             com_arr[:, joint] = com[0:3]
-
-    #             t = np.zeros(3)
-
-    #             # for all links distal to it
-    #             for link in range(joint, self.n):
-    #                 if not self.links[joint].sigma:
-    #                     # Revolute joint
-    #                     d = com_arr[:, link] - jointOrigins[:, joint]
-    #                     t = t + self._cross3(d, force[:, link])
-    #                     # Though r x F would give the applied torque
-    #                     # and not the reaction torque, the gravity
-    #                     # vector is nominally in the positive z
-    #                     # direction, not negative, hence the force is
-    #                     # the reaction force
-    #                 else:
-    #                     # Prismatic joint
-    #                     # Force on prismatic joint
-    #                     t = t + force[:, link]
-
-    #             tauB[joint, pose] = t.T @ jointAxes[:, joint]
-
-    #     if poses == 1:
-    #         return tauB[:, 0]
-    #     else:
-    #         return tauB
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ELink.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ELink.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ERobot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/BaseRobot.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,6614 +1,5622 @@
 00000000: 2321 2f75 7372 2f62 696e 2f65 6e76 2070  #!/usr/bin/env p
-00000010: 7974 686f 6e33 0a22 2222 0a43 7265 6174  ython3.""".Creat
-00000020: 6564 206f 6e20 5475 6520 4170 7220 3234  ed on Tue Apr 24
-00000030: 2031 353a 3438 3a35 3220 3230 3230 0a40   15:48:52 2020.@
-00000040: 6175 7468 6f72 3a20 4a65 7373 6520 4861  author: Jesse Ha
-00000050: 7669 6c61 6e64 0a22 2222 0a0a 6672 6f6d  viland."""..from
-00000060: 206f 732e 7061 7468 2069 6d70 6f72 7420   os.path import 
-00000070: 7370 6c69 7465 7874 0a69 6d70 6f72 7420  splitext.import 
-00000080: 7465 6d70 6669 6c65 0a69 6d70 6f72 7420  tempfile.import 
-00000090: 7375 6270 726f 6365 7373 0a69 6d70 6f72  subprocess.impor
-000000a0: 7420 7765 6262 726f 7773 6572 0a66 726f  t webbrowser.fro
-000000b0: 6d20 6e75 6d70 7920 696d 706f 7274 2028  m numpy import (
-000000c0: 0a20 2020 2061 7272 6179 2c0a 2020 2020  .    array,.    
-000000d0: 6e64 6172 7261 792c 0a20 2020 2069 736e  ndarray,.    isn
-000000e0: 616e 2c0a 2020 2020 7a65 726f 732c 0a20  an,.    zeros,. 
-000000f0: 2020 2065 7965 2c0a 2020 2020 6578 7061     eye,.    expa
-00000100: 6e64 5f64 696d 732c 0a20 2020 2065 6d70  nd_dims,.    emp
-00000110: 7479 2c0a 2020 2020 636f 6e63 6174 656e  ty,.    concaten
-00000120: 6174 652c 0a20 2020 2063 726f 7373 2c0a  ate,.    cross,.
-00000130: 2020 2020 6172 6363 6f73 2c0a 2020 2020      arccos,.    
-00000140: 646f 742c 0a29 0a66 726f 6d20 6e75 6d70  dot,.).from nump
-00000150: 792e 6c69 6e61 6c67 2069 6d70 6f72 7420  y.linalg import 
-00000160: 6e6f 726d 2061 7320 6e70 6e6f 726d 2c20  norm as npnorm, 
-00000170: 696e 760a 6672 6f6d 2073 7061 7469 616c  inv.from spatial
-00000180: 6d61 7468 2069 6d70 6f72 7420 5345 332c  math import SE3,
-00000190: 2053 4532 0a66 726f 6d20 7370 6174 6961   SE2.from spatia
-000001a0: 6c67 656f 6d65 7472 7920 696d 706f 7274  lgeometry import
-000001b0: 2043 796c 696e 6465 720a 6672 6f6d 2073   Cylinder.from s
-000001c0: 7061 7469 616c 6d61 7468 2e62 6173 652e  patialmath.base.
-000001d0: 6172 6763 6865 636b 2069 6d70 6f72 7420  argcheck import 
-000001e0: 6765 7476 6563 746f 722c 2069 736c 6973  getvector, islis
-000001f0: 746f 660a 6672 6f6d 2072 6f62 6f74 6963  tof.from robotic
-00000200: 7374 6f6f 6c62 6f78 2e72 6f62 6f74 2e4c  stoolbox.robot.L
-00000210: 696e 6b20 696d 706f 7274 204c 696e 6b2c  ink import Link,
-00000220: 204c 696e 6b32 2c20 4261 7365 4c69 6e6b   Link2, BaseLink
-00000230: 0a66 726f 6d20 726f 626f 7469 6373 746f  .from roboticsto
-00000240: 6f6c 626f 782e 726f 626f 742e 4554 5320  olbox.robot.ETS 
-00000250: 696d 706f 7274 2045 5453 2c20 4554 5332  import ETS, ETS2
-00000260: 0a66 726f 6d20 726f 626f 7469 6373 746f  .from roboticsto
-00000270: 6f6c 626f 782e 726f 626f 742e 4554 2069  olbox.robot.ET i
-00000280: 6d70 6f72 7420 4554 0a66 726f 6d20 726f  mport ET.from ro
-00000290: 626f 7469 6373 746f 6f6c 626f 782e 726f  boticstoolbox.ro
-000002a0: 626f 742e 4448 526f 626f 7420 696d 706f  bot.DHRobot impo
-000002b0: 7274 2044 4852 6f62 6f74 0a66 726f 6d20  rt DHRobot.from 
-000002c0: 726f 626f 7469 6373 746f 6f6c 626f 782e  roboticstoolbox.
-000002d0: 746f 6f6c 7320 696d 706f 7274 2078 6163  tools import xac
-000002e0: 726f 0a66 726f 6d20 726f 626f 7469 6373  ro.from robotics
-000002f0: 746f 6f6c 626f 782e 746f 6f6c 7320 696d  toolbox.tools im
-00000300: 706f 7274 2055 5244 460a 6672 6f6d 2072  port URDF.from r
-00000310: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2e72  oboticstoolbox.r
-00000320: 6f62 6f74 2e52 6f62 6f74 2069 6d70 6f72  obot.Robot impor
-00000330: 7420 526f 626f 740a 6672 6f6d 2072 6f62  t Robot.from rob
-00000340: 6f74 6963 7374 6f6f 6c62 6f78 2e72 6f62  oticstoolbox.rob
-00000350: 6f74 2e47 7269 7070 6572 2069 6d70 6f72  ot.Gripper impor
-00000360: 7420 4772 6970 7065 720a 6672 6f6d 2072  t Gripper.from r
-00000370: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2e74  oboticstoolbox.t
-00000380: 6f6f 6c73 2e64 6174 6120 696d 706f 7274  ools.data import
-00000390: 2072 7462 5f70 6174 685f 746f 5f64 6174   rtb_path_to_dat
-000003a0: 6166 696c 650a 6672 6f6d 2072 6f62 6f74  afile.from robot
-000003b0: 6963 7374 6f6f 6c62 6f78 2e74 6f6f 6c73  icstoolbox.tools
-000003c0: 2e70 6172 616d 7320 696d 706f 7274 2072  .params import r
-000003d0: 7462 5f67 6574 5f70 6172 616d 0a66 726f  tb_get_param.fro
-000003e0: 6d20 7061 7468 6c69 6220 696d 706f 7274  m pathlib import
-000003f0: 2050 7572 6550 6f73 6978 5061 7468 0a66   PurePosixPath.f
-00000400: 726f 6d20 616e 7369 7461 626c 6520 696d  rom ansitable im
-00000410: 706f 7274 2041 4e53 4954 6162 6c65 2c20  port ANSITable, 
-00000420: 436f 6c75 6d6e 0a66 726f 6d20 7370 6174  Column.from spat
-00000430: 6961 6c6d 6174 6820 696d 706f 7274 2028  ialmath import (
-00000440: 0a20 2020 2053 7061 7469 616c 4163 6365  .    SpatialAcce
-00000450: 6c65 7261 7469 6f6e 2c0a 2020 2020 5370  leration,.    Sp
-00000460: 6174 6961 6c56 656c 6f63 6974 792c 0a20  atialVelocity,. 
-00000470: 2020 2053 7061 7469 616c 496e 6572 7469     SpatialInerti
-00000480: 612c 0a20 2020 2053 7061 7469 616c 466f  a,.    SpatialFo
-00000490: 7263 652c 0a29 0a66 726f 6d20 6675 6e63  rce,.).from func
-000004a0: 746f 6f6c 7320 696d 706f 7274 206c 7275  tools import lru
-000004b0: 5f63 6163 6865 0a66 726f 6d20 7479 7069  _cache.from typi
-000004c0: 6e67 2069 6d70 6f72 7420 556e 696f 6e2c  ng import Union,
-000004d0: 206f 7665 726c 6f61 642c 2044 6963 742c   overload, Dict,
-000004e0: 204c 6973 742c 2054 7570 6c65 2c20 4f70   List, Tuple, Op
-000004f0: 7469 6f6e 616c 0a66 726f 6d20 636f 7079  tional.from copy
-00000500: 2069 6d70 6f72 7420 6465 6570 636f 7079   import deepcopy
-00000510: 0a0a 4172 7261 794c 696b 6520 3d20 556e  ..ArrayLike = Un
-00000520: 696f 6e5b 6c69 7374 2c20 6e64 6172 7261  ion[list, ndarra
-00000530: 792c 2074 7570 6c65 2c20 7365 745d 0a0a  y, tuple, set]..
-00000540: 0a63 6c61 7373 2042 6173 6545 526f 626f  .class BaseERobo
-00000550: 7428 526f 626f 7429 3a0a 0a20 2020 2022  t(Robot):..    "
-00000560: 2222 0a20 2020 2043 6f6e 7374 7275 6374  "".    Construct
-00000570: 2061 6e20 4552 6f62 6f74 206f 626a 6563   an ERobot objec
-00000580: 740a 2020 2020 3a70 6172 616d 2065 745f  t.    :param et_
-00000590: 6c69 7374 3a20 4c69 7374 206f 6620 656c  list: List of el
-000005a0: 656d 656e 7461 7279 2074 7261 6e73 666f  ementary transfo
-000005b0: 726d 7320 7768 6963 6820 7265 7072 6573  rms which repres
-000005c0: 656e 7420 7468 6520 726f 626f 740a 2020  ent the robot.  
-000005d0: 2020 2020 2020 6b69 6e65 6d61 7469 6373        kinematics
-000005e0: 0a20 2020 203a 7479 7065 2065 745f 6c69  .    :type et_li
-000005f0: 7374 3a20 4554 206c 6973 740a 2020 2020  st: ET list.    
-00000600: 3a70 6172 616d 206e 616d 653a 204e 616d  :param name: Nam
-00000610: 6520 6f66 2074 6865 2072 6f62 6f74 0a20  e of the robot. 
-00000620: 2020 203a 7479 7065 206e 616d 653a 2073     :type name: s
-00000630: 7472 2c20 6f70 7469 6f6e 616c 0a20 2020  tr, optional.   
-00000640: 203a 7061 7261 6d20 6d61 6e75 6661 6374   :param manufact
-00000650: 7572 6572 3a20 4d61 6e75 6661 6374 7572  urer: Manufactur
-00000660: 6572 206f 6620 7468 6520 726f 626f 740a  er of the robot.
-00000670: 2020 2020 3a74 7970 6520 6d61 6e75 6661      :type manufa
-00000680: 6374 7572 6572 3a20 7374 722c 206f 7074  cturer: str, opt
-00000690: 696f 6e61 6c0a 2020 2020 3a70 6172 616d  ional.    :param
-000006a0: 2062 6173 653a 204c 6f63 6174 696f 6e20   base: Location 
-000006b0: 6f66 2074 6865 2062 6173 6520 6973 2074  of the base is t
-000006c0: 6865 2077 6f72 6c64 2066 7261 6d65 0a20  he world frame. 
-000006d0: 2020 203a 7479 7065 2062 6173 653a 2053     :type base: S
-000006e0: 4533 2c20 6f70 7469 6f6e 616c 0a20 2020  E3, optional.   
-000006f0: 203a 7061 7261 6d20 746f 6f6c 3a20 4f66   :param tool: Of
-00000700: 6673 6574 206f 6620 7468 6520 666c 616e  fset of the flan
-00000710: 6765 206f 6620 7468 6520 726f 626f 7420  ge of the robot 
-00000720: 746f 2074 6865 2065 6e64 2d65 6666 6563  to the end-effec
-00000730: 746f 720a 2020 2020 3a74 7970 6520 746f  tor.    :type to
-00000740: 6f6c 3a20 5345 332c 206f 7074 696f 6e61  ol: SE3, optiona
-00000750: 6c0a 2020 2020 3a70 6172 616d 2067 7261  l.    :param gra
-00000760: 7669 7479 3a20 5468 6520 6772 6176 6974  vity: The gravit
-00000770: 7920 7665 6374 6f72 0a20 2020 203a 7479  y vector.    :ty
-00000780: 7065 206e 3a20 6e64 6172 7261 7928 3329  pe n: ndarray(3)
-00000790: 0a20 2020 2041 6e20 4552 6f62 6f74 2072  .    An ERobot r
-000007a0: 6570 7265 7365 6e74 7320 7468 6520 6b69  epresents the ki
-000007b0: 6e65 6d61 7469 6373 206f 6620 6120 7365  nematics of a se
-000007c0: 7269 616c 2d6c 696e 6b20 6d61 6e69 7075  rial-link manipu
-000007d0: 6c61 746f 7220 7769 7468 0a20 2020 206f  lator with.    o
-000007e0: 6e65 206f 7220 6d6f 7265 2062 7261 6e63  ne or more branc
-000007f0: 6865 732e 0a20 2020 2046 726f 6d20 4554  hes..    From ET
-00000800: 530a 2020 2020 2d2d 2d2d 2d2d 2d2d 0a20  S.    --------. 
-00000810: 2020 2045 7861 6d70 6c65 3a0a 2020 2020     Example:.    
-00000820: 2e2e 2072 756e 626c 6f63 6b3a 3a20 7079  .. runblock:: py
-00000830: 636f 6e0a 2020 2020 2020 2020 3e3e 3e20  con.        >>> 
-00000840: 6672 6f6d 2072 6f62 6f74 6963 7374 6f6f  from roboticstoo
-00000850: 6c62 6f78 2069 6d70 6f72 7420 4554 532c  lbox import ETS,
-00000860: 2045 526f 626f 740a 2020 2020 2020 2020   ERobot.        
-00000870: 3e3e 3e20 6574 7320 3d20 4554 532e 727a  >>> ets = ETS.rz
-00000880: 2829 202a 2045 5453 2e72 7928 2920 2a20  () * ETS.ry() * 
-00000890: 4554 532e 747a 2831 2920 2a20 4554 532e  ETS.tz(1) * ETS.
-000008a0: 7279 2829 202a 2045 5453 2e74 7a28 3129  ry() * ETS.tz(1)
-000008b0: 0a20 2020 2020 2020 203e 3e3e 2072 6f62  .        >>> rob
-000008c0: 6f74 203d 2045 526f 626f 7428 6574 7329  ot = ERobot(ets)
-000008d0: 0a20 2020 2020 2020 203e 3e3e 2070 7269  .        >>> pri
-000008e0: 6e74 2872 6f62 6f74 290a 2020 2020 5468  nt(robot).    Th
-000008f0: 6520 4554 5320 6973 2070 6172 7469 7469  e ETS is partiti
-00000900: 6f6e 6564 2073 7563 6820 7468 6174 2061  oned such that a
-00000910: 206e 6577 206c 696e 6b20 6672 616d 6520   new link frame 
-00000920: 6973 2063 7265 6174 6564 202a 2a61 6674  is created **aft
-00000930: 6572 2a2a 2065 7665 7279 0a20 2020 206a  er** every.    j
-00000940: 6f69 6e74 2076 6172 6961 626c 652e 0a20  oint variable.. 
-00000950: 2020 2046 726f 6d20 6c69 7374 206f 6620     From list of 
-00000960: 4c69 6e6b 730a 2020 2020 2d2d 2d2d 2d2d  Links.    ------
-00000970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 2020  -------------.  
-00000980: 2020 4578 616d 706c 653a 0a20 2020 202e    Example:.    .
-00000990: 2e20 7275 6e62 6c6f 636b 3a3a 2070 7963  . runblock:: pyc
-000009a0: 6f6e 0a20 2020 2020 2020 203e 3e3e 2066  on.        >>> f
-000009b0: 726f 6d20 726f 626f 7469 6373 746f 6f6c  rom roboticstool
-000009c0: 626f 7820 696d 706f 7274 2045 5453 2c20  box import ETS, 
-000009d0: 4552 6f62 6f74 0a20 2020 2020 2020 203e  ERobot.        >
-000009e0: 3e3e 206c 696e 6b31 203d 204c 696e 6b28  >> link1 = Link(
-000009f0: 4554 532e 727a 2829 2c20 6e61 6d65 3d27  ETS.rz(), name='
-00000a00: 6c69 6e6b 3127 290a 2020 2020 2020 2020  link1').        
-00000a10: 3e3e 3e20 6c69 6e6b 3220 3d20 4c69 6e6b  >>> link2 = Link
-00000a20: 2845 5453 2e72 7928 292c 206e 616d 653d  (ETS.ry(), name=
-00000a30: 276c 696e 6b32 272c 2070 6172 656e 743d  'link2', parent=
-00000a40: 6c69 6e6b 3129 0a20 2020 2020 2020 203e  link1).        >
-00000a50: 3e3e 206c 696e 6b33 203d 204c 696e 6b28  >> link3 = Link(
-00000a60: 4554 532e 747a 2831 2920 2a20 4554 532e  ETS.tz(1) * ETS.
-00000a70: 7279 2829 2c20 6e61 6d65 3d27 6c69 6e6b  ry(), name='link
-00000a80: 3327 2c20 7061 7265 6e74 3d6c 696e 6b32  3', parent=link2
-00000a90: 290a 2020 2020 2020 2020 3e3e 3e20 6c69  ).        >>> li
-00000aa0: 6e6b 3420 3d20 4c69 6e6b 2845 5453 2e74  nk4 = Link(ETS.t
-00000ab0: 7a28 3129 2c20 6e61 6d65 3d27 6565 272c  z(1), name='ee',
-00000ac0: 2070 6172 656e 743d 6c69 6e6b 3329 0a20   parent=link3). 
-00000ad0: 2020 2020 2020 203e 3e3e 2072 6f62 6f74         >>> robot
-00000ae0: 203d 2045 526f 626f 7428 5b6c 696e 6b31   = ERobot([link1
-00000af0: 2c20 6c69 6e6b 322c 206c 696e 6b33 2c20  , link2, link3, 
-00000b00: 6c69 6e6b 345d 290a 2020 2020 2020 2020  link4]).        
-00000b10: 3e3e 3e20 7072 696e 7428 726f 626f 7429  >>> print(robot)
-00000b20: 0a20 2020 2041 206e 756d 6265 7220 6f66  .    A number of
-00000b30: 2060 604c 696e 6b60 6020 6f62 6a65 6374   ``Link`` object
-00000b40: 7320 6172 6520 6372 6561 7465 642c 2065  s are created, e
-00000b50: 6163 6820 6861 7320 6120 7472 616e 7366  ach has a transf
-00000b60: 6f72 6d20 7769 7468 0a20 2020 2072 6573  orm with.    res
-00000b70: 7065 6374 2074 6f20 7468 6520 7072 6576  pect to the prev
-00000b80: 696f 7573 2066 7261 6d65 2c20 616e 6420  ious frame, and 
-00000b90: 616c 6c20 6578 6365 7074 2074 6865 2066  all except the f
-00000ba0: 6972 7374 206c 696e 6b20 6861 7665 2061  irst link have a
-00000bb0: 2070 6172 656e 742e 0a20 2020 2054 6865   parent..    The
-00000bc0: 2069 6d70 6c69 6369 7420 7061 7265 6e74   implicit parent
-00000bd0: 206f 6620 7468 6520 6669 7273 7420 6c69   of the first li
-00000be0: 6e6b 2069 7320 7468 6520 6261 7365 2e0a  nk is the base..
-00000bf0: 2020 2020 5468 6520 7061 7265 6e74 2061      The parent a
-00000c00: 6c73 6f20 6361 6e20 6265 2073 7065 6369  lso can be speci
-00000c10: 6669 6564 2061 7320 6120 7374 7269 6e67  fied as a string
-00000c20: 2c20 616e 6420 6974 7320 6e61 6d65 2069  , and its name i
-00000c30: 7320 6d61 7070 6564 2074 6f20 7468 650a  s mapped to the.
-00000c40: 2020 2020 7061 7265 6e74 206c 696e 6b20      parent link 
-00000c50: 6279 206e 616d 6520 696e 2060 6045 526f  by name in ``ERo
-00000c60: 626f 7460 602e 0a20 2020 2049 6620 6e6f  bot``..    If no
-00000c70: 2060 6070 6172 656e 7460 6020 6172 6775   ``parent`` argu
-00000c80: 6d65 6e74 7320 6172 6520 6769 7665 6e20  ments are given 
-00000c90: 6974 2069 7320 6173 7375 6d65 6420 7468  it is assumed th
-00000ca0: 6520 6c69 6e6b 7320 6172 6520 696e 0a20  e links are in. 
-00000cb0: 2020 2073 6571 7565 6e74 6961 6c20 6f72     sequential or
-00000cc0: 6465 722c 2061 6e64 2074 6865 2070 6172  der, and the par
-00000cd0: 656e 7420 6869 6572 6172 6368 7920 7769  ent hierarchy wi
-00000ce0: 6c6c 2062 6520 6175 746f 6d61 7469 6361  ll be automatica
-00000cf0: 6c6c 790a 2020 2020 6573 7461 626c 6973  lly.    establis
-00000d00: 6865 642e 0a20 2020 202e 2e20 7275 6e62  hed..    .. runb
-00000d10: 6c6f 636b 3a3a 2070 7963 6f6e 0a20 2020  lock:: pycon.   
-00000d20: 2020 2020 203e 3e3e 2066 726f 6d20 726f       >>> from ro
-00000d30: 626f 7469 6373 746f 6f6c 626f 7820 696d  boticstoolbox im
-00000d40: 706f 7274 2045 5453 2c20 4552 6f62 6f74  port ETS, ERobot
-00000d50: 0a20 2020 2020 2020 203e 3e3e 2072 6f62  .        >>> rob
-00000d60: 6f74 203d 2045 526f 626f 7428 5b0a 2020  ot = ERobot([.  
-00000d70: 2020 2020 2020 3e3e 3e20 2020 2020 4c69        >>>     Li
-00000d80: 6e6b 2845 5453 2e72 7a28 292c 206e 616d  nk(ETS.rz(), nam
-00000d90: 653d 276c 696e 6b31 2729 2c0a 2020 2020  e='link1'),.    
-00000da0: 2020 2020 3e3e 3e20 2020 2020 4c69 6e6b      >>>     Link
-00000db0: 2845 5453 2e72 7928 292c 206e 616d 653d  (ETS.ry(), name=
-00000dc0: 276c 696e 6b32 2729 2c0a 2020 2020 2020  'link2'),.      
-00000dd0: 2020 3e3e 3e20 2020 2020 4c69 6e6b 2845    >>>     Link(E
-00000de0: 5453 2e74 7a28 3129 202a 2045 5453 2e72  TS.tz(1) * ETS.r
-00000df0: 7928 292c 206e 616d 653d 276c 696e 6b33  y(), name='link3
-00000e00: 2729 2c0a 2020 2020 2020 2020 3e3e 3e20  '),.        >>> 
-00000e10: 2020 2020 4c69 6e6b 2845 5453 2e74 7a28      Link(ETS.tz(
-00000e20: 3129 2c20 6e61 6d65 3d27 6565 2729 0a20  1), name='ee'). 
-00000e30: 2020 2020 2020 203e 3e3e 2020 2020 2020         >>>      
-00000e40: 2020 2020 2020 205d 290a 2020 2020 2020         ]).      
-00000e50: 2020 3e3e 3e20 7072 696e 7428 726f 626f    >>> print(robo
-00000e60: 7429 0a20 2020 2042 7261 6e63 6865 6420  t).    Branched 
-00000e70: 726f 626f 7473 0a20 2020 202d 2d2d 2d2d  robots.    -----
-00000e80: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020 2045  ----------.    E
-00000e90: 7861 6d70 6c65 3a0a 2020 2020 2e2e 2072  xample:.    .. r
-00000ea0: 756e 626c 6f63 6b3a 3a20 7079 636f 6e0a  unblock:: pycon.
-00000eb0: 2020 2020 2020 2020 3e3e 3e20 726f 626f          >>> robo
-00000ec0: 7420 3d20 4552 6f62 6f74 285b 0a20 2020  t = ERobot([.   
-00000ed0: 2020 2020 203e 3e3e 2020 2020 4c69 6e6b       >>>    Link
-00000ee0: 2845 5453 2e72 7a28 292c 206e 616d 653d  (ETS.rz(), name=
-00000ef0: 276c 696e 6b31 2729 2c0a 2020 2020 2020  'link1'),.      
-00000f00: 2020 3e3e 3e20 2020 204c 696e 6b28 4554    >>>    Link(ET
-00000f10: 532e 7478 2831 2920 2a20 4554 532e 7479  S.tx(1) * ETS.ty
-00000f20: 282d 302e 3529 202a 2045 5453 2e72 7a28  (-0.5) * ETS.rz(
-00000f30: 292c 206e 616d 653d 276c 696e 6b32 272c  ), name='link2',
-00000f40: 2070 6172 656e 743d 276c 696e 6b31 2729   parent='link1')
-00000f50: 2c0a 2020 2020 2020 2020 3e3e 3e20 2020  ,.        >>>   
-00000f60: 204c 696e 6b28 4554 532e 7478 2831 292c   Link(ETS.tx(1),
-00000f70: 206e 616d 653d 2765 655f 3127 2c20 7061   name='ee_1', pa
-00000f80: 7265 6e74 3d27 6c69 6e6b 3227 292c 0a20  rent='link2'),. 
-00000f90: 2020 2020 2020 203e 3e3e 2020 2020 4c69         >>>    Li
-00000fa0: 6e6b 2845 5453 2e74 7828 3129 202a 2045  nk(ETS.tx(1) * E
-00000fb0: 5453 2e74 7928 302e 3529 202a 2045 5453  TS.ty(0.5) * ETS
-00000fc0: 2e72 7a28 292c 206e 616d 653d 276c 696e  .rz(), name='lin
-00000fd0: 6b33 272c 2070 6172 656e 743d 276c 696e  k3', parent='lin
-00000fe0: 6b31 2729 2c0a 2020 2020 2020 2020 3e3e  k1'),.        >>
-00000ff0: 3e20 2020 204c 696e 6b28 4554 532e 7478  >    Link(ETS.tx
-00001000: 2831 292c 206e 616d 653d 2765 655f 3227  (1), name='ee_2'
-00001010: 2c20 7061 7265 6e74 3d27 6c69 6e6b 3327  , parent='link3'
-00001020: 290a 2020 2020 2020 2020 3e3e 3e20 2020  ).        >>>   
-00001030: 2020 2020 2020 2020 2020 5d29 0a20 2020            ]).   
-00001040: 2020 2020 203e 3e3e 2070 7269 6e74 2872       >>> print(r
-00001050: 6f62 6f74 290a 2020 2020 3a72 6566 6572  obot).    :refer
-00001060: 656e 6365 733a 0a20 2020 2020 2020 202d  ences:.        -
-00001070: 204b 696e 656d 6174 6963 2044 6572 6976   Kinematic Deriv
-00001080: 6174 6976 6573 2075 7369 6e67 2074 6865  atives using the
-00001090: 2045 6c65 6d65 6e74 6172 7920 5472 616e   Elementary Tran
-000010a0: 7366 6f72 6d20 5365 7175 656e 6365 2c0a  sform Sequence,.
-000010b0: 2020 2020 2020 2020 2020 4a2e 2048 6176            J. Hav
-000010c0: 696c 616e 6420 616e 6420 502e 2043 6f72  iland and P. Cor
-000010d0: 6b65 0a20 2020 2022 2222 2020 2320 6e6f  ke.    """  # no
-000010e0: 7161 2045 3530 310a 0a20 2020 2064 6566  qa E501..    def
-000010f0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00001100: 6c69 6e6b 732c 2067 7269 7070 6572 5f6c  links, gripper_l
-00001110: 696e 6b73 3d4e 6f6e 652c 2063 6865 636b  inks=None, check
-00001120: 6a69 6e64 6578 3d54 7275 652c 202a 2a6b  jindex=True, **k
-00001130: 7761 7267 7329 3a0a 2020 2020 2020 2020  wargs):.        
-00001140: 7365 6c66 2e5f 7061 7468 5f63 6163 6865  self._path_cache
-00001150: 5f66 6b6e 6d20 3d20 7b7d 0a20 2020 2020  _fknm = {}.     
-00001160: 2020 2073 656c 662e 5f70 6174 685f 6361     self._path_ca
-00001170: 6368 6520 3d20 7b7d 0a20 2020 2020 2020  che = {}.       
-00001180: 2073 656c 662e 5f65 7965 5f66 6b6e 6d20   self._eye_fknm 
-00001190: 3d20 6579 6528 3429 0a0a 2020 2020 2020  = eye(4)..      
-000011a0: 2020 7365 6c66 2e5f 6c69 6e6b 6469 6374    self._linkdict
-000011b0: 203d 207b 7d0a 2020 2020 2020 2020 7365   = {}.        se
-000011c0: 6c66 2e5f 6e20 3d20 300a 2020 2020 2020  lf._n = 0.      
-000011d0: 2020 7365 6c66 2e5f 6565 5f6c 696e 6b73    self._ee_links
-000011e0: 203d 205b 5d0a 0a20 2020 2020 2020 2023   = []..        #
-000011f0: 204f 7264 6572 6564 206c 696e 6b73 2c20   Ordered links, 
-00001200: 7765 2072 656f 7264 6572 2074 6865 2069  we reorder the i
-00001210: 6e70 7574 2065 6c69 6e6b 7320 746f 2062  nput elinks to b
-00001220: 6520 696e 2064 6570 7468 2066 6972 7374  e in depth first
-00001230: 0a20 2020 2020 2020 2023 2073 6561 7263  .        # searc
-00001240: 6820 6f72 6465 720a 2020 2020 2020 2020  h order.        
-00001250: 6f72 6c69 6e6b 7320 3d20 5b5d 0a0a 2020  orlinks = []..  
-00001260: 2020 2020 2020 2320 6368 6563 6b20 616c        # check al
-00001270: 6c20 7468 6520 696e 636f 6d69 6e67 204c  l the incoming L
-00001280: 696e 6b20 6f62 6a65 6374 730a 2020 2020  ink objects.    
-00001290: 2020 2020 6e20 3d20 300a 2020 2020 2020      n = 0.      
-000012a0: 2020 666f 7220 6b2c 206c 696e 6b20 696e    for k, link in
-000012b0: 2065 6e75 6d65 7261 7465 286c 696e 6b73   enumerate(links
-000012c0: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
-000012d0: 2069 6620 6c69 6e6b 2068 6173 206e 6f20   if link has no 
-000012e0: 6e61 6d65 2c20 6769 7665 2069 7420 6f6e  name, give it on
-000012f0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
-00001300: 206c 696e 6b2e 6e61 6d65 2069 7320 4e6f   link.name is No
-00001310: 6e65 206f 7220 6c69 6e6b 2e6e 616d 6520  ne or link.name 
-00001320: 3d3d 2022 223a 0a20 2020 2020 2020 2020  == "":.         
-00001330: 2020 2020 2020 206c 696e 6b2e 6e61 6d65         link.name
-00001340: 203d 2066 226c 696e 6b2d 7b6b 7d22 0a20   = f"link-{k}". 
-00001350: 2020 2020 2020 2020 2020 206c 696e 6b2e             link.
-00001360: 6e75 6d62 6572 203d 206b 202b 2031 0a0a  number = k + 1..
-00001370: 2020 2020 2020 2020 2020 2020 2320 7075              # pu
-00001380: 7420 6974 2069 6e20 7468 6520 6c69 6e6b  t it in the link
-00001390: 2064 6963 7469 6f6e 6172 792c 2063 6865   dictionary, che
-000013a0: 636b 2066 6f72 2064 7570 6c69 6361 7465  ck for duplicate
-000013b0: 730a 2020 2020 2020 2020 2020 2020 6966  s.            if
-000013c0: 206c 696e 6b2e 6e61 6d65 2069 6e20 7365   link.name in se
-000013d0: 6c66 2e5f 6c69 6e6b 6469 6374 3a0a 2020  lf._linkdict:.  
-000013e0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-000013f0: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
-00001400: 226c 696e 6b20 6e61 6d65 207b 6c69 6e6b  "link name {link
-00001410: 2e6e 616d 657d 2069 7320 6e6f 7420 756e  .name} is not un
-00001420: 6971 7565 2229 0a20 2020 2020 2020 2020  ique").         
-00001430: 2020 2073 656c 662e 5f6c 696e 6b64 6963     self._linkdic
-00001440: 745b 6c69 6e6b 2e6e 616d 655d 203d 206c  t[link.name] = l
-00001450: 696e 6b0a 0a20 2020 2020 2020 2020 2020  ink..           
-00001460: 2069 6620 6c69 6e6b 2e69 736a 6f69 6e74   if link.isjoint
-00001470: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001480: 2020 6e20 2b3d 2031 0a0a 2020 2020 2020    n += 1..      
-00001490: 2020 2320 7265 736f 6c76 6520 7061 7265    # resolve pare
-000014a0: 6e74 7320 6769 7665 6e20 6279 206e 616d  nts given by nam
-000014b0: 652c 2077 6974 6869 6e20 7468 6520 636f  e, within the co
-000014c0: 6e74 6578 7420 6f66 0a20 2020 2020 2020  ntext of.       
-000014d0: 2023 2074 6869 7320 7365 7420 6f66 206c   # this set of l
-000014e0: 696e 6b73 0a20 2020 2020 2020 2066 6f72  inks.        for
-000014f0: 206c 696e 6b20 696e 206c 696e 6b73 3a0a   link in links:.
-00001500: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00001510: 696e 6b2e 7061 7265 6e74 2069 7320 4e6f  ink.parent is No
-00001520: 6e65 2061 6e64 206c 696e 6b2e 7061 7265  ne and link.pare
-00001530: 6e74 5f6e 616d 6520 6973 206e 6f74 204e  nt_name is not N
-00001540: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00001550: 2020 2020 206c 696e 6b2e 5f70 6172 656e       link._paren
-00001560: 7420 3d20 7365 6c66 2e5f 6c69 6e6b 6469  t = self._linkdi
-00001570: 6374 5b6c 696e 6b2e 7061 7265 6e74 5f6e  ct[link.parent_n
-00001580: 616d 655d 0a0a 2020 2020 2020 2020 6966  ame]..        if
-00001590: 2061 6c6c 285b 6c69 6e6b 2e70 6172 656e   all([link.paren
-000015a0: 7420 6973 204e 6f6e 6520 666f 7220 6c69  t is None for li
-000015b0: 6e6b 2069 6e20 6c69 6e6b 735d 293a 0a20  nk in links]):. 
-000015c0: 2020 2020 2020 2020 2020 2023 206e 6f20             # no 
-000015d0: 7061 7265 6e74 206c 696e 6b73 2077 6572  parent links wer
-000015e0: 6520 6769 7665 6e2c 2061 7373 756d 6520  e given, assume 
-000015f0: 7468 6579 2061 7265 2073 6571 7565 6e74  they are sequent
-00001600: 6961 6c0a 2020 2020 2020 2020 2020 2020  ial.            
-00001610: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
-00001620: 656e 286c 696e 6b73 2920 2d20 3129 3a0a  en(links) - 1):.
-00001630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001640: 6c69 6e6b 735b 6920 2b20 315d 2e5f 7061  links[i + 1]._pa
-00001650: 7265 6e74 203d 206c 696e 6b73 5b69 5d0a  rent = links[i].
-00001660: 0a20 2020 2020 2020 2073 656c 662e 5f6e  .        self._n
-00001670: 203d 206e 0a0a 2020 2020 2020 2020 2320   = n..        # 
-00001680: 7363 616e 2066 6f72 2062 6173 650a 2020  scan for base.  
-00001690: 2020 2020 2020 666f 7220 6c69 6e6b 2069        for link i
-000016a0: 6e20 6c69 6e6b 733a 0a20 2020 2020 2020  n links:.       
-000016b0: 2020 2020 2023 2069 7320 7468 6973 2061       # is this a
-000016c0: 2062 6173 6520 6c69 6e6b 3f0a 2020 2020   base link?.    
-000016d0: 2020 2020 2020 2020 6966 206c 696e 6b2e          if link.
-000016e0: 5f70 6172 656e 7420 6973 204e 6f6e 653a  _parent is None:
-000016f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001700: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00001710: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00001720: 662e 5f62 6173 655f 6c69 6e6b 2069 7320  f._base_link is 
-00001730: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00001740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001750: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00001760: 6f72 2822 4d75 6c74 6970 6c65 2062 6173  or("Multiple bas
-00001770: 6520 6c69 6e6b 7322 290a 2020 2020 2020  e links").      
-00001780: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00001790: 2041 7474 7269 6275 7465 4572 726f 723a   AttributeError:
-000017a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000017b0: 2020 2020 2070 6173 730a 0a20 2020 2020       pass..     
-000017c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000017d0: 5f62 6173 655f 6c69 6e6b 203d 206c 696e  _base_link = lin
-000017e0: 6b0a 2020 2020 2020 2020 2020 2020 656c  k.            el
-000017f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00001800: 2020 2020 2320 6e6f 2c20 7570 6461 7465      # no, update
-00001810: 2063 6869 6c64 7265 6e20 6f66 2074 6869   children of thi
-00001820: 7320 6c69 6e6b 2773 2070 6172 656e 740a  s link's parent.
-00001830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001840: 6c69 6e6b 2e5f 7061 7265 6e74 2e5f 6368  link._parent._ch
-00001850: 696c 6472 656e 2e61 7070 656e 6428 6c69  ildren.append(li
-00001860: 6e6b 290a 0a20 2020 2020 2020 2069 6620  nk)..        if 
-00001870: 7365 6c66 2e62 6173 655f 6c69 6e6b 2069  self.base_link i
-00001880: 7320 4e6f 6e65 3a20 2023 2050 7261 676d  s None:  # Pragm
-00001890: 613a 206e 6f63 6f76 6572 0a20 2020 2020  a: nocover.     
-000018a0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-000018b0: 7565 4572 726f 7228 0a20 2020 2020 2020  ueError(.       
-000018c0: 2020 2020 2020 2020 2022 496e 7661 6c69           "Invali
-000018d0: 6420 6c69 6e6b 2063 6f6e 6669 6775 7261  d link configura
-000018e0: 7469 6f6e 2070 726f 7669 6465 642c 206d  tion provided, m
-000018f0: 7573 7420 6861 7665 2061 2062 6173 6520  ust have a base 
-00001900: 6c69 6e6b 220a 2020 2020 2020 2020 2020  link".          
-00001910: 2020 290a 0a20 2020 2020 2020 2023 2053    )..        # S
-00001920: 6365 6e65 206e 6f64 652c 2073 6574 206c  cene node, set l
-00001930: 696e 6b73 2062 6574 7765 656e 2074 6865  inks between the
-00001940: 206c 696e 6b73 0a20 2020 2020 2020 2066   links.        f
-00001950: 6f72 206c 696e 6b20 696e 206c 696e 6b73  or link in links
-00001960: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00001970: 206c 696e 6b2e 7061 7265 6e74 2069 7320   link.parent is 
-00001980: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00001990: 2020 2020 2020 2020 2020 6c69 6e6b 2e73            link.s
-000019a0: 6365 6e65 5f70 6172 656e 7420 3d20 6c69  cene_parent = li
-000019b0: 6e6b 2e70 6172 656e 740a 0a20 2020 2020  nk.parent..     
-000019c0: 2020 2023 2053 6574 2075 7020 7468 6520     # Set up the 
-000019d0: 6772 6970 7065 722c 206d 616b 6520 6120  gripper, make a 
-000019e0: 6c69 7374 2063 6f6e 7461 696e 696e 6720  list containing 
-000019f0: 7468 6520 726f 6f74 206f 6620 616c 6c0a  the root of all.
-00001a00: 2020 2020 2020 2020 2320 6772 6970 7065          # grippe
-00001a10: 7273 0a20 2020 2020 2020 2069 6620 6772  rs.        if gr
-00001a20: 6970 7065 725f 6c69 6e6b 7320 6973 206e  ipper_links is n
-00001a30: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00001a40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00001a50: 6365 2867 7269 7070 6572 5f6c 696e 6b73  ce(gripper_links
-00001a60: 2c20 4c69 6e6b 293a 0a20 2020 2020 2020  , Link):.       
-00001a70: 2020 2020 2020 2020 2067 7269 7070 6572           gripper
-00001a80: 5f6c 696e 6b73 203d 205b 6772 6970 7065  _links = [grippe
-00001a90: 725f 6c69 6e6b 735d 0a20 2020 2020 2020  r_links].       
-00001aa0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00001ab0: 2020 2067 7269 7070 6572 5f6c 696e 6b73     gripper_links
-00001ac0: 203d 205b 5d0a 0a20 2020 2020 2020 2023   = []..        #
-00001ad0: 2041 6e20 656d 7074 7920 6c69 7374 2074   An empty list t
-00001ae0: 6f20 686f 6c64 2061 6c6c 2067 7269 7070  o hold all gripp
-00001af0: 6572 730a 2020 2020 2020 2020 7365 6c66  ers.        self
-00001b00: 2e5f 6772 6970 7065 7273 203d 205b 5d0a  ._grippers = [].
-00001b10: 0a20 2020 2020 2020 2023 204d 616b 6520  .        # Make 
-00001b20: 6120 6772 6970 7065 7220 6f62 6a65 6374  a gripper object
-00001b30: 2066 6f72 2065 6163 6820 6772 6970 7065   for each grippe
-00001b40: 720a 2020 2020 2020 2020 666f 7220 6c69  r.        for li
-00001b50: 6e6b 2069 6e20 6772 6970 7065 725f 6c69  nk in gripper_li
-00001b60: 6e6b 733a 0a20 2020 2020 2020 2020 2020  nks:.           
-00001b70: 2067 5f6c 696e 6b73 203d 2073 656c 662e   g_links = self.
-00001b80: 6466 735f 6c69 6e6b 7328 6c69 6e6b 290a  dfs_links(link).
-00001b90: 0a20 2020 2020 2020 2020 2020 2023 2052  .            # R
-00001ba0: 656d 6f76 6520 6772 6970 7065 7220 6c69  emove gripper li
-00001bb0: 6e6b 7320 6672 6f6d 2074 6865 2072 6f62  nks from the rob
-00001bc0: 6f74 0a20 2020 2020 2020 2020 2020 2066  ot.            f
-00001bd0: 6f72 2067 5f6c 696e 6b20 696e 2067 5f6c  or g_link in g_l
-00001be0: 696e 6b73 3a0a 2020 2020 2020 2020 2020  inks:.          
-00001bf0: 2020 2020 2020 2320 7072 696e 7428 675f        # print(g_
-00001c00: 6c69 6e6b 290a 2020 2020 2020 2020 2020  link).          
-00001c10: 2020 2020 2020 6c69 6e6b 732e 7265 6d6f        links.remo
-00001c20: 7665 2867 5f6c 696e 6b29 0a0a 2020 2020  ve(g_link)..    
-00001c30: 2020 2020 2020 2020 2320 5361 7665 2074          # Save t
-00001c40: 6865 2067 7269 7070 6572 206f 626a 6563  he gripper objec
-00001c50: 740a 2020 2020 2020 2020 2020 2020 7365  t.            se
-00001c60: 6c66 2e5f 6772 6970 7065 7273 2e61 7070  lf._grippers.app
-00001c70: 656e 6428 4772 6970 7065 7228 675f 6c69  end(Gripper(g_li
-00001c80: 6e6b 732c 206e 616d 653d 6c69 6e6b 2e6e  nks, name=link.n
-00001c90: 616d 6529 290a 0a20 2020 2020 2020 2023  ame))..        #
-00001ca0: 2053 7562 7472 6163 7420 7468 6520 6e20   Subtract the n 
-00001cb0: 6f66 2074 6865 2067 7269 7070 6572 7320  of the grippers 
-00001cc0: 6672 6f6d 2074 6865 206e 206f 6620 7468  from the n of th
-00001cd0: 6520 726f 626f 740a 2020 2020 2020 2020  e robot.        
-00001ce0: 666f 7220 6772 6970 7065 7220 696e 2073  for gripper in s
-00001cf0: 656c 662e 5f67 7269 7070 6572 733a 0a20  elf._grippers:. 
-00001d00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00001d10: 5f6e 202d 3d20 6772 6970 7065 722e 6e0a  _n -= gripper.n.
-00001d20: 0a20 2020 2020 2020 2023 2053 6574 2074  .        # Set t
-00001d30: 6865 2065 6520 6c69 6e6b 730a 2020 2020  he ee links.    
-00001d40: 2020 2020 7365 6c66 2e65 655f 6c69 6e6b      self.ee_link
-00001d50: 7320 3d20 5b5d 0a20 2020 2020 2020 2069  s = [].        i
-00001d60: 6620 6c65 6e28 6772 6970 7065 725f 6c69  f len(gripper_li
-00001d70: 6e6b 7329 203d 3d20 303a 0a20 2020 2020  nks) == 0:.     
-00001d80: 2020 2020 2020 2066 6f72 206c 696e 6b20         for link 
-00001d90: 696e 206c 696e 6b73 3a0a 2020 2020 2020  in links:.      
-00001da0: 2020 2020 2020 2020 2020 2320 6973 2074            # is t
-00001db0: 6869 7320 6120 6c65 6166 206e 6f64 653f  his a leaf node?
-00001dc0: 2061 6e64 2064 6f20 7765 206e 6f74 2068   and do we not h
-00001dd0: 6176 6520 616e 7920 6772 6970 7065 7273  ave any grippers
-00001de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001df0: 2069 6620 6c65 6e28 6c69 6e6b 2e63 6869   if len(link.chi
-00001e00: 6c64 7265 6e29 203d 3d20 303a 0a20 2020  ldren) == 0:.   
-00001e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e20: 2023 206e 6f20 6368 696c 6472 656e 2c20   # no children, 
-00001e30: 6d75 7374 2062 6520 616e 2065 6e64 2d65  must be an end-e
-00001e40: 6666 6563 746f 720a 2020 2020 2020 2020  ffector.        
-00001e50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00001e60: 2e65 655f 6c69 6e6b 732e 6170 7065 6e64  .ee_links.append
-00001e70: 286c 696e 6b29 0a20 2020 2020 2020 2065  (link).        e
-00001e80: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00001e90: 2066 6f72 206c 696e 6b20 696e 2067 7269   for link in gri
-00001ea0: 7070 6572 5f6c 696e 6b73 3a0a 2020 2020  pper_links:.    
-00001eb0: 2020 2020 2020 2020 2020 2020 2320 7573              # us
-00001ec0: 6520 7468 6520 7061 7373 6564 2069 6e20  e the passed in 
-00001ed0: 7661 6c75 650a 2020 2020 2020 2020 2020  value.          
-00001ee0: 2020 2020 2020 7365 6c66 2e65 655f 6c69        self.ee_li
-00001ef0: 6e6b 732e 6170 7065 6e64 286c 696e 6b2e  nks.append(link.
-00001f00: 7061 7265 6e74 2920 2023 2074 7970 653a  parent)  # type:
-00001f10: 2069 676e 6f72 650a 0a20 2020 2020 2020   ignore..       
-00001f20: 2023 2061 7373 6967 6e20 7468 6520 6a6f   # assign the jo
-00001f30: 696e 7420 696e 6469 6365 730a 2020 2020  int indices.    
-00001f40: 2020 2020 6966 2061 6c6c 285b 6c69 6e6b      if all([link
-00001f50: 2e6a 696e 6465 7820 6973 204e 6f6e 6520  .jindex is None 
-00001f60: 6f72 206c 696e 6b2e 6574 732e 5f61 7574  or link.ets._aut
-00001f70: 6f5f 6a69 6e64 6578 2066 6f72 206c 696e  o_jindex for lin
-00001f80: 6b20 696e 206c 696e 6b73 5d29 3a0a 2020  k in links]):.  
-00001f90: 2020 2020 2020 2020 2020 2320 6e6f 206a            # no j
-00001fa0: 6f69 6e74 7320 6861 7665 2061 6e20 696e  oints have an in
-00001fb0: 6465 780a 2020 2020 2020 2020 2020 2020  dex.            
-00001fc0: 6a69 6e64 6578 203d 205b 305d 2020 2320  jindex = [0]  # 
-00001fd0: 226d 7574 6162 6c65 2069 6e74 6567 6572  "mutable integer
-00001fe0: 2220 6861 636b 0a0a 2020 2020 2020 2020  " hack..        
-00001ff0: 2020 2020 6465 6620 7669 7369 745f 6c69      def visit_li
-00002000: 6e6b 286c 696e 6b2c 206a 696e 6465 7829  nk(link, jindex)
-00002010: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00002020: 2020 2320 6966 2069 7427 7320 6120 6a6f    # if it's a jo
-00002030: 696e 742c 2061 7373 6967 6e20 6974 2061  int, assign it a
-00002040: 206a 696e 6465 7820 616e 6420 696e 6372   jindex and incr
-00002050: 656d 656e 7420 6974 0a20 2020 2020 2020  ement it.       
-00002060: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
-00002070: 2e69 736a 6f69 6e74 2061 6e64 206c 696e  .isjoint and lin
-00002080: 6b20 696e 206c 696e 6b73 3a0a 2020 2020  k in links:.    
-00002090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020a0: 6c69 6e6b 2e6a 696e 6465 7820 3d20 6a69  link.jindex = ji
-000020b0: 6e64 6578 5b30 5d0a 2020 2020 2020 2020  ndex[0].        
-000020c0: 2020 2020 2020 2020 2020 2020 6a69 6e64              jind
-000020d0: 6578 5b30 5d20 2b3d 2031 0a0a 2020 2020  ex[0] += 1..    
-000020e0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-000020f0: 696e 6b20 696e 206c 696e 6b73 3a0a 2020  ink in links:.  
-00002100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002110: 2020 6f72 6c69 6e6b 732e 6170 7065 6e64    orlinks.append
-00002120: 286c 696e 6b29 0a0a 2020 2020 2020 2020  (link)..        
-00002130: 2020 2020 2320 7669 7369 7420 616c 6c20      # visit all 
-00002140: 6c69 6e6b 7320 696e 2044 4653 206f 7264  links in DFS ord
-00002150: 6572 0a20 2020 2020 2020 2020 2020 2073  er.            s
-00002160: 656c 662e 6466 735f 6c69 6e6b 7328 7365  elf.dfs_links(se
-00002170: 6c66 2e62 6173 655f 6c69 6e6b 2c20 6c61  lf.base_link, la
-00002180: 6d62 6461 206c 696e 6b3a 2076 6973 6974  mbda link: visit
-00002190: 5f6c 696e 6b28 6c69 6e6b 2c20 6a69 6e64  _link(link, jind
-000021a0: 6578 2929 0a0a 2020 2020 2020 2020 656c  ex))..        el
-000021b0: 6966 2061 6c6c 285b 6c69 6e6b 2e6a 696e  if all([link.jin
-000021c0: 6465 7820 6973 206e 6f74 204e 6f6e 6520  dex is not None 
-000021d0: 666f 7220 6c69 6e6b 2069 6e20 6c69 6e6b  for link in link
-000021e0: 7320 6966 206c 696e 6b2e 6973 6a6f 696e  s if link.isjoin
-000021f0: 745d 293a 0a20 2020 2020 2020 2020 2020  t]):.           
-00002200: 2023 206a 696e 6465 7820 7365 7420 6f6e   # jindex set on
-00002210: 2061 6c6c 2c20 6368 6563 6b20 7468 6579   all, check they
-00002220: 2061 7265 2075 6e69 7175 6520 616e 6420   are unique and 
-00002230: 636f 6e74 6967 756f 7573 0a20 2020 2020  contiguous.     
-00002240: 2020 2020 2020 2069 6620 6368 6563 6b6a         if checkj
-00002250: 696e 6465 783a 0a20 2020 2020 2020 2020  index:.         
-00002260: 2020 2020 2020 206a 7365 7420 3d20 7365         jset = se
-00002270: 7428 7261 6e67 6528 7365 6c66 2e5f 6e29  t(range(self._n)
-00002280: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00002290: 2020 666f 7220 6c69 6e6b 2069 6e20 6c69    for link in li
-000022a0: 6e6b 733a 0a20 2020 2020 2020 2020 2020  nks:.           
-000022b0: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
-000022c0: 2e69 736a 6f69 6e74 2061 6e64 206c 696e  .isjoint and lin
-000022d0: 6b2e 6a69 6e64 6578 206e 6f74 2069 6e20  k.jindex not in 
-000022e0: 6a73 6574 3a0a 2020 2020 2020 2020 2020  jset:.          
-000022f0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00002300: 6973 6520 5661 6c75 6545 7272 6f72 280a  ise ValueError(.
-00002310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002320: 2020 2020 2020 2020 2020 2020 6622 6a6f              f"jo
-00002330: 696e 7420 696e 6465 7820 7b6c 696e 6b2e  int index {link.
-00002340: 6a69 6e64 6578 7d20 7761 7320 2220 2272  jindex} was " "r
-00002350: 6570 6561 7465 6420 6f72 206f 7574 206f  epeated or out o
-00002360: 6620 7261 6e67 6522 0a20 2020 2020 2020  f range".       
-00002370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002380: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-00002390: 2020 2020 2020 206a 7365 7420 2d3d 2073         jset -= s
-000023a0: 6574 285b 6c69 6e6b 2e6a 696e 6465 785d  et([link.jindex]
-000023b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000023c0: 2020 6966 206c 656e 286a 7365 7429 203e    if len(jset) >
-000023d0: 2030 3a20 2023 2070 7261 676d 6120 6e6f   0:  # pragma no
-000023e0: 636f 7665 7220 2023 2069 7320 696d 706f  cover  # is impo
-000023f0: 7373 6962 6c65 0a20 2020 2020 2020 2020  ssible.         
-00002400: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00002410: 2056 616c 7565 4572 726f 7228 6622 6a6f   ValueError(f"jo
-00002420: 696e 7473 207b 6a73 6574 7d20 7765 7265  ints {jset} were
-00002430: 206e 6f74 2061 7373 6967 6e65 6422 290a   not assigned").
-00002440: 2020 2020 2020 2020 2020 2020 6f72 6c69              orli
-00002450: 6e6b 7320 3d20 6c69 6e6b 730a 2020 2020  nks = links.    
-00002460: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00002470: 2020 2020 2020 2320 6d75 7374 2062 6520        # must be 
-00002480: 6120 6d69 7874 7572 6520 6f66 204c 696e  a mixture of Lin
-00002490: 6b73 2077 6974 682f 7769 7468 6f75 7420  ks with/without 
-000024a0: 6a69 6e64 6578 0a20 2020 2020 2020 2020  jindex.         
-000024b0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-000024c0: 726f 7228 2261 6c6c 206c 696e 6b73 206d  ror("all links m
-000024d0: 7573 7420 6861 7665 2061 206a 696e 6465  ust have a jinde
-000024e0: 782c 206f 7220 6e6f 6e65 2068 6176 6520  x, or none have 
-000024f0: 6120 6a69 6e64 6578 2229 0a0a 2020 2020  a jindex")..    
-00002500: 2020 2020 2320 7365 6c66 2e5f 6e62 7261      # self._nbra
-00002510: 6e63 6865 7320 3d20 7375 6d28 5b6c 696e  nches = sum([lin
-00002520: 6b2e 6e63 6869 6c64 7265 6e20 3d3d 2030  k.nchildren == 0
-00002530: 2066 6f72 206c 696e 6b20 696e 206c 696e   for link in lin
-00002540: 6b73 5d29 0a0a 2020 2020 2020 2020 2320  ks])..        # 
-00002550: 5365 7420 7570 2071 6c69 6d0a 2020 2020  Set up qlim.    
-00002560: 2020 2020 716c 696d 203d 207a 6572 6f73      qlim = zeros
-00002570: 2828 322c 2073 656c 662e 6e29 290a 2020  ((2, self.n)).  
-00002580: 2020 2020 2020 6a20 3d20 300a 0a20 2020        j = 0..   
-00002590: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-000025a0: 6e67 6528 6c65 6e28 6f72 6c69 6e6b 7329  nge(len(orlinks)
-000025b0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-000025c0: 6620 6f72 6c69 6e6b 735b 695d 2e69 736a  f orlinks[i].isj
-000025d0: 6f69 6e74 3a0a 2020 2020 2020 2020 2020  oint:.          
-000025e0: 2020 2020 2020 716c 696d 5b3a 2c20 6a5d        qlim[:, j]
-000025f0: 203d 206f 726c 696e 6b73 5b69 5d2e 716c   = orlinks[i].ql
-00002600: 696d 0a20 2020 2020 2020 2020 2020 2020  im.             
-00002610: 2020 206a 202b 3d20 310a 2020 2020 2020     j += 1.      
-00002620: 2020 7365 6c66 2e5f 716c 696d 203d 2071    self._qlim = q
-00002630: 6c69 6d0a 0a20 2020 2020 2020 2073 656c  lim..        sel
-00002640: 662e 5f76 616c 6964 5f71 6c69 6d20 3d20  f._valid_qlim = 
-00002650: 4661 6c73 650a 2020 2020 2020 2020 666f  False.        fo
-00002660: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
-00002670: 662e 6e29 3a0a 2020 2020 2020 2020 2020  f.n):.          
-00002680: 2020 6966 2061 6e79 2871 6c69 6d5b 3a2c    if any(qlim[:,
-00002690: 2069 5d20 213d 2030 2920 616e 6420 6e6f   i] != 0) and no
-000026a0: 7420 616e 7928 6973 6e61 6e28 716c 696d  t any(isnan(qlim
-000026b0: 5b3a 2c20 695d 2929 3a0a 2020 2020 2020  [:, i])):.      
-000026c0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-000026d0: 7661 6c69 645f 716c 696d 203d 2054 7275  valid_qlim = Tru
-000026e0: 650a 0a20 2020 2020 2020 2023 2049 6e69  e..        # Ini
-000026f0: 7469 616c 6973 6520 526f 626f 7420 6f62  tialise Robot ob
-00002700: 6a65 6374 0a20 2020 2020 2020 2073 7570  ject.        sup
-00002710: 6572 2829 2e5f 5f69 6e69 745f 5f28 6f72  er().__init__(or
-00002720: 6c69 6e6b 732c 202a 2a6b 7761 7267 7329  links, **kwargs)
-00002730: 0a0a 2020 2020 2020 2020 2320 4669 7820  ..        # Fix 
-00002740: 6e75 6d62 6572 206f 6620 6c69 6e6b 7320  number of links 
-00002750: 666f 7220 6772 6970 7065 7220 6c69 6e6b  for gripper link
-00002760: 730a 2020 2020 2020 2020 7365 6c66 2e5f  s.        self._
-00002770: 6e6c 696e 6b73 203d 206c 656e 286c 696e  nlinks = len(lin
-00002780: 6b73 290a 0a20 2020 2020 2020 2066 6f72  ks)..        for
-00002790: 2067 7269 7070 6572 2069 6e20 7365 6c66   gripper in self
-000027a0: 2e67 7269 7070 6572 733a 0a20 2020 2020  .grippers:.     
-000027b0: 2020 2020 2020 2073 656c 662e 5f6e 6c69         self._nli
-000027c0: 6e6b 7320 2b3d 206c 656e 2867 7269 7070  nks += len(gripp
-000027d0: 6572 2e6c 696e 6b73 290a 0a20 2020 2020  er.links)..     
-000027e0: 2020 2023 2053 6365 6e65 4e6f 6465 2c20     # SceneNode, 
-000027f0: 7365 7420 6120 7265 6665 7265 6e63 6520  set a reference 
-00002800: 746f 2074 6865 2066 6972 7374 206c 696e  to the first lin
-00002810: 6b0a 2020 2020 2020 2020 7365 6c66 2e73  k.        self.s
-00002820: 6365 6e65 5f63 6869 6c64 7265 6e20 3d20  cene_children = 
-00002830: 5b73 656c 662e 6c69 6e6b 735b 305d 5d20  [self.links[0]] 
-00002840: 2023 2074 7970 653a 2069 676e 6f72 650a   # type: ignore.
-00002850: 0a20 2020 2064 6566 205f 5f73 7472 5f5f  .    def __str__
-00002860: 2873 656c 6629 202d 3e20 7374 723a 0a20  (self) -> str:. 
-00002870: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00002880: 2020 2050 7265 7474 7920 7072 696e 7473     Pretty prints
-00002890: 2074 6865 2045 5453 204d 6f64 656c 206f   the ETS Model o
-000028a0: 6620 7468 6520 726f 626f 742e 0a20 2020  f the robot..   
-000028b0: 2020 2020 203a 7265 7475 726e 3a20 5072       :return: Pr
-000028c0: 6574 7479 2070 7269 6e74 206f 6620 7468  etty print of th
-000028d0: 6520 726f 626f 7420 6d6f 6465 6c0a 2020  e robot model.  
-000028e0: 2020 2020 2020 3a72 7479 7065 3a20 7374        :rtype: st
-000028f0: 720a 2020 2020 2020 2020 2e2e 206e 6f74  r.        .. not
-00002900: 653a 3a0a 2020 2020 2020 2020 2020 2020  e::.            
-00002910: 2d20 436f 6e73 7461 6e74 206c 696e 6b73  - Constant links
-00002920: 2061 7265 2073 686f 776e 2069 6e20 626c   are shown in bl
-00002930: 7565 2e0a 2020 2020 2020 2020 2020 2020  ue..            
-00002940: 2d20 456e 642d 6566 6665 6374 6f72 206c  - End-effector l
-00002950: 696e 6b73 2061 7265 2070 7265 6669 7865  inks are prefixe
-00002960: 6420 7769 7468 2061 6e20 400a 2020 2020  d with an @.    
-00002970: 2020 2020 2020 2020 2d20 416e 676c 6573          - Angles
-00002980: 2069 6e20 6465 6772 6565 730a 2020 2020   in degrees.    
-00002990: 2020 2020 2020 2020 2d20 5468 6520 726f          - The ro
-000029a0: 626f 7420 6261 7365 2066 7261 6d65 2069  bot base frame i
-000029b0: 7320 6465 6e6f 7465 6420 6173 2060 6042  s denoted as ``B
-000029c0: 4153 4560 6020 616e 6420 6973 2065 7175  ASE`` and is equ
-000029d0: 616c 2074 6f20 7468 650a 2020 2020 2020  al to the.      
-000029e0: 2020 2020 2020 2020 726f 626f 7427 7320          robot's 
-000029f0: 6060 6261 7365 6060 2061 7474 7269 6275  ``base`` attribu
-00002a00: 7465 2e0a 2020 2020 2020 2020 2222 220a  te..        """.
-00002a10: 2020 2020 2020 2020 756e 6963 6f64 6520          unicode 
-00002a20: 3d20 7274 625f 6765 745f 7061 7261 6d28  = rtb_get_param(
-00002a30: 2275 6e69 636f 6465 2229 0a20 2020 2020  "unicode").     
-00002a40: 2020 2062 6f72 6465 7220 3d20 2274 6869     border = "thi
-00002a50: 6e22 2069 6620 756e 6963 6f64 6520 656c  n" if unicode el
-00002a60: 7365 2022 6173 6369 6922 0a0a 2020 2020  se "ascii"..    
-00002a70: 2020 2020 7461 626c 6520 3d20 414e 5349      table = ANSI
-00002a80: 5461 626c 6528 0a20 2020 2020 2020 2020  Table(.         
-00002a90: 2020 2043 6f6c 756d 6e28 226c 696e 6b22     Column("link"
-00002aa0: 2c20 6865 6164 616c 6967 6e3d 225e 222c  , headalign="^",
-00002ab0: 2063 6f6c 616c 6967 6e3d 223e 2229 2c0a   colalign=">"),.
-00002ac0: 2020 2020 2020 2020 2020 2020 436f 6c75              Colu
-00002ad0: 6d6e 2822 6c69 6e6b 222c 2068 6561 6461  mn("link", heada
-00002ae0: 6c69 676e 3d22 5e22 2c20 636f 6c61 6c69  lign="^", colali
-00002af0: 676e 3d22 3c22 292c 0a20 2020 2020 2020  gn="<"),.       
-00002b00: 2020 2020 2043 6f6c 756d 6e28 226a 6f69       Column("joi
-00002b10: 6e74 222c 2068 6561 6461 6c69 676e 3d22  nt", headalign="
-00002b20: 5e22 2c20 636f 6c61 6c69 676e 3d22 3e22  ^", colalign=">"
-00002b30: 292c 0a20 2020 2020 2020 2020 2020 2043  ),.            C
-00002b40: 6f6c 756d 6e28 2270 6172 656e 7422 2c20  olumn("parent", 
-00002b50: 6865 6164 616c 6967 6e3d 225e 222c 2063  headalign="^", c
-00002b60: 6f6c 616c 6967 6e3d 223c 2229 2c0a 2020  olalign="<"),.  
-00002b70: 2020 2020 2020 2020 2020 436f 6c75 6d6e            Column
-00002b80: 2822 4554 533a 2070 6172 656e 7420 746f  ("ETS: parent to
-00002b90: 206c 696e 6b22 2c20 6865 6164 616c 6967   link", headalig
-00002ba0: 6e3d 225e 222c 2063 6f6c 616c 6967 6e3d  n="^", colalign=
-00002bb0: 223c 2229 2c0a 2020 2020 2020 2020 2020  "<"),.          
-00002bc0: 2020 626f 7264 6572 3d62 6f72 6465 722c    border=border,
-00002bd0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00002be0: 2020 2020 666f 7220 6b2c 206c 696e 6b20      for k, link 
-00002bf0: 696e 2065 6e75 6d65 7261 7465 2873 656c  in enumerate(sel
-00002c00: 662e 6c69 6e6b 7329 3a0a 2020 2020 2020  f.links):.      
-00002c10: 2020 2020 2020 636f 6c6f 7220 3d20 2222        color = ""
-00002c20: 2069 6620 6c69 6e6b 2e69 736a 6f69 6e74   if link.isjoint
-00002c30: 2065 6c73 6520 223c 3c62 6c75 653e 3e22   else "<<blue>>"
-00002c40: 0a20 2020 2020 2020 2020 2020 2065 6520  .            ee 
-00002c50: 3d20 2240 2220 6966 206c 696e 6b20 696e  = "@" if link in
-00002c60: 2073 656c 662e 6565 5f6c 696e 6b73 2065   self.ee_links e
-00002c70: 6c73 6520 2222 0a20 2020 2020 2020 2020  lse "".         
-00002c80: 2020 2065 7473 203d 206c 696e 6b2e 6574     ets = link.et
-00002c90: 730a 2020 2020 2020 2020 2020 2020 6966  s.            if
-00002ca0: 206c 696e 6b2e 7061 7265 6e74 2069 7320   link.parent is 
-00002cb0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00002cc0: 2020 2020 2020 7061 7265 6e74 5f6e 616d        parent_nam
-00002cd0: 6520 3d20 2242 4153 4522 0a20 2020 2020  e = "BASE".     
-00002ce0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00002cf0: 2020 2020 2020 2020 2020 2020 2070 6172               par
-00002d00: 656e 745f 6e61 6d65 203d 206c 696e 6b2e  ent_name = link.
-00002d10: 7061 7265 6e74 2e6e 616d 650a 2020 2020  parent.name.    
-00002d20: 2020 2020 2020 2020 7320 3d20 6574 732e          s = ets.
-00002d30: 5f5f 7374 725f 5f28 6622 717b 6c69 6e6b  __str__(f"q{link
-00002d40: 2e6a 696e 6465 787d 2229 0a20 2020 2020  .jindex}").     
-00002d50: 2020 2020 2020 2023 2069 6620 6c65 6e28         # if len(
-00002d60: 7329 203e 2030 3a0a 2020 2020 2020 2020  s) > 0:.        
-00002d70: 2020 2020 2320 2020 2020 6f70 203d 2022      #     op = "
-00002d80: 205c 7532 3239 3520 2220 6966 2075 6e69   \u2295 " if uni
-00002d90: 636f 6465 2065 6c73 6520 2220 2a20 2220  code else " * " 
-00002da0: 2023 205c 6f70 6c75 730a 2020 2020 2020   # \oplus.      
-00002db0: 2020 2020 2020 2320 2020 2020 7320 3d20        #     s = 
-00002dc0: 6f70 202b 2073 0a0a 2020 2020 2020 2020  op + s..        
-00002dd0: 2020 2020 6966 206c 696e 6b2e 6973 6a6f      if link.isjo
-00002de0: 696e 743a 0a20 2020 2020 2020 2020 2020  int:.           
-00002df0: 2020 2020 206a 6e61 6d65 203d 206c 696e       jname = lin
-00002e00: 6b2e 6a69 6e64 6578 0a20 2020 2020 2020  k.jindex.       
-00002e10: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00002e20: 2020 2020 2020 2020 2020 206a 6e61 6d65             jname
-00002e30: 203d 2022 220a 2020 2020 2020 2020 2020   = "".          
-00002e40: 2020 7461 626c 652e 726f 7728 0a20 2020    table.row(.   
-00002e50: 2020 2020 2020 2020 2020 2020 2023 206c               # l
-00002e60: 696e 6b2e 6a69 6e64 6578 2c0a 2020 2020  ink.jindex,.    
-00002e70: 2020 2020 2020 2020 2020 2020 6b2c 0a20              k,. 
-00002e80: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00002e90: 6f6c 6f72 202b 2065 6520 2b20 6c69 6e6b  olor + ee + link
-00002ea0: 2e6e 616d 652c 0a20 2020 2020 2020 2020  .name,.         
-00002eb0: 2020 2020 2020 206a 6e61 6d65 2c0a 2020         jname,.  
-00002ec0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00002ed0: 7265 6e74 5f6e 616d 652c 0a20 2020 2020  rent_name,.     
-00002ee0: 2020 2020 2020 2020 2020 2066 227b 737d             f"{s}
-00002ef0: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
-00002f00: 0a0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-00002f10: 6e73 7461 6e63 6528 7365 6c66 2c20 4552  nstance(self, ER
-00002f20: 6f62 6f74 3229 3a0a 2020 2020 2020 2020  obot2):.        
-00002f30: 2020 2020 636c 6173 736e 616d 6520 3d20      classname = 
-00002f40: 2245 526f 626f 7432 220a 2020 2020 2020  "ERobot2".      
-00002f50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00002f60: 2020 2020 636c 6173 736e 616d 6520 3d20      classname = 
-00002f70: 2245 526f 626f 7422 0a0a 2020 2020 2020  "ERobot"..      
-00002f80: 2020 7320 3d20 6622 7b63 6c61 7373 6e61    s = f"{classna
-00002f90: 6d65 7d3a 207b 7365 6c66 2e6e 616d 657d  me}: {self.name}
-00002fa0: 220a 2020 2020 2020 2020 6966 2073 656c  ".        if sel
-00002fb0: 662e 6d61 6e75 6661 6374 7572 6572 2069  f.manufacturer i
-00002fc0: 7320 6e6f 7420 4e6f 6e65 2061 6e64 206c  s not None and l
-00002fd0: 656e 2873 656c 662e 6d61 6e75 6661 6374  en(self.manufact
-00002fe0: 7572 6572 2920 3e20 303a 0a20 2020 2020  urer) > 0:.     
-00002ff0: 2020 2020 2020 2073 202b 3d20 6622 2028         s += f" (
-00003000: 6279 207b 7365 6c66 2e6d 616e 7566 6163  by {self.manufac
-00003010: 7475 7265 727d 2922 0a20 2020 2020 2020  turer})".       
-00003020: 2073 202b 3d20 6622 2c20 7b73 656c 662e   s += f", {self.
-00003030: 6e7d 206a 6f69 6e74 7320 287b 7365 6c66  n} joints ({self
-00003040: 2e73 7472 7563 7475 7265 7d29 220a 2020  .structure})".  
-00003050: 2020 2020 2020 6966 206c 656e 2873 656c        if len(sel
-00003060: 662e 6772 6970 7065 7273 2920 3e20 303a  f.grippers) > 0:
-00003070: 0a20 2020 2020 2020 2020 2020 2073 202b  .            s +
-00003080: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-00003090: 2020 2020 6622 2c20 7b6c 656e 2873 656c      f", {len(sel
-000030a0: 662e 6772 6970 7065 7273 297d 2067 7269  f.grippers)} gri
-000030b0: 7070 6572 7b27 7327 2069 6620 6c65 6e28  pper{'s' if len(
-000030c0: 7365 6c66 2e67 7269 7070 6572 7329 203e  self.grippers) >
-000030d0: 2031 2065 6c73 6520 2727 7d22 0a20 2020   1 else ''}".   
-000030e0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000030f0: 2020 2069 6620 7365 6c66 2e6e 6272 616e     if self.nbran
-00003100: 6368 6573 203e 2031 3a0a 2020 2020 2020  ches > 1:.      
-00003110: 2020 2020 2020 7320 2b3d 2066 222c 207b        s += f", {
-00003120: 7365 6c66 2e6e 6272 616e 6368 6573 7d20  self.nbranches} 
-00003130: 6272 616e 6368 6573 220a 2020 2020 2020  branches".      
-00003140: 2020 6966 2073 656c 662e 5f68 6173 6479    if self._hasdy
-00003150: 6e61 6d69 6373 3a0a 2020 2020 2020 2020  namics:.        
-00003160: 2020 2020 7320 2b3d 2022 2c20 6479 6e61      s += ", dyna
-00003170: 6d69 6373 220a 2020 2020 2020 2020 6966  mics".        if
-00003180: 2061 6e79 285b 6c65 6e28 6c69 6e6b 2e67   any([len(link.g
-00003190: 656f 6d65 7472 7929 203e 2030 2066 6f72  eometry) > 0 for
-000031a0: 206c 696e 6b20 696e 2073 656c 662e 6c69   link in self.li
-000031b0: 6e6b 735d 293a 0a20 2020 2020 2020 2020  nks]):.         
-000031c0: 2020 2073 202b 3d20 222c 2067 656f 6d65     s += ", geome
-000031d0: 7472 7922 0a20 2020 2020 2020 2069 6620  try".        if 
-000031e0: 616e 7928 5b6c 656e 286c 696e 6b2e 636f  any([len(link.co
-000031f0: 6c6c 6973 696f 6e29 203e 2030 2066 6f72  llision) > 0 for
-00003200: 206c 696e 6b20 696e 2073 656c 662e 6c69   link in self.li
-00003210: 6e6b 735d 293a 0a20 2020 2020 2020 2020  nks]):.         
-00003220: 2020 2073 202b 3d20 222c 2063 6f6c 6c69     s += ", colli
-00003230: 7369 6f6e 220a 2020 2020 2020 2020 7320  sion".        s 
-00003240: 2b3d 2022 5c6e 220a 0a20 2020 2020 2020  += "\n"..       
-00003250: 2073 202b 3d20 7374 7228 7461 626c 6529   s += str(table)
-00003260: 0a20 2020 2020 2020 2073 202b 3d20 7365  .        s += se
-00003270: 6c66 2e63 6f6e 6669 6775 7261 7469 6f6e  lf.configuration
-00003280: 735f 7374 7228 626f 7264 6572 3d62 6f72  s_str(border=bor
-00003290: 6465 7229 0a0a 2020 2020 2020 2020 7265  der)..        re
-000032a0: 7475 726e 2073 0a0a 2020 2020 406f 7665  turn s..    @ove
-000032b0: 726c 6f61 640a 2020 2020 6465 6620 5f5f  rload.    def __
-000032c0: 6765 7469 7465 6d5f 5f28 7365 6c66 3a20  getitem__(self: 
-000032d0: 2245 526f 626f 7422 2c20 693a 2055 6e69  "ERobot", i: Uni
-000032e0: 6f6e 5b69 6e74 2c20 7374 725d 2920 2d3e  on[int, str]) ->
-000032f0: 204c 696e 6b3a 0a20 2020 2020 2020 202e   Link:.        .
-00003300: 2e2e 0a0a 2020 2020 406f 7665 726c 6f61  ....    @overloa
-00003310: 640a 2020 2020 6465 6620 5f5f 6765 7469  d.    def __geti
-00003320: 7465 6d5f 5f28 7365 6c66 3a20 2245 526f  tem__(self: "ERo
-00003330: 626f 7422 2c20 693a 2073 6c69 6365 2920  bot", i: slice) 
-00003340: 2d3e 204c 6973 745b 4c69 6e6b 5d3a 0a20  -> List[Link]:. 
-00003350: 2020 2020 2020 202e 2e2e 0a0a 2020 2020         .....    
-00003360: 406f 7665 726c 6f61 640a 2020 2020 6465  @overload.    de
-00003370: 6620 5f5f 6765 7469 7465 6d5f 5f28 7365  f __getitem__(se
-00003380: 6c66 3a20 2245 526f 626f 7432 222c 2069  lf: "ERobot2", i
-00003390: 3a20 556e 696f 6e5b 696e 742c 2073 7472  : Union[int, str
-000033a0: 5d29 202d 3e20 4c69 6e6b 323a 0a20 2020  ]) -> Link2:.   
-000033b0: 2020 2020 202e 2e2e 0a0a 2020 2020 406f       .....    @o
-000033c0: 7665 726c 6f61 640a 2020 2020 6465 6620  verload.    def 
-000033d0: 5f5f 6765 7469 7465 6d5f 5f28 7365 6c66  __getitem__(self
-000033e0: 3a20 2245 526f 626f 7432 222c 2069 3a20  : "ERobot2", i: 
-000033f0: 736c 6963 6529 202d 3e20 4c69 7374 5b4c  slice) -> List[L
-00003400: 696e 6b32 5d3a 0a20 2020 2020 2020 202e  ink2]:.        .
-00003410: 2e2e 0a0a 2020 2020 6465 6620 5f5f 6765  ....    def __ge
-00003420: 7469 7465 6d5f 5f28 7365 6c66 2c20 6929  titem__(self, i)
-00003430: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00003440: 2020 2020 2020 4765 7420 6c69 6e6b 0a0a        Get link..
-00003450: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00003460: 3a20 6c69 6e6b 206e 756d 6265 7220 6f72  : link number or
-00003470: 206e 616d 650a 2020 2020 2020 2020 3a74   name.        :t
-00003480: 7970 6520 693a 2069 6e74 2c20 736c 6963  ype i: int, slic
-00003490: 6520 6f72 2073 7472 0a20 2020 2020 2020  e or str.       
-000034a0: 203a 7265 7475 726e 3a20 6927 7468 206c   :return: i'th l
-000034b0: 696e 6b20 6f72 206e 616d 6564 206c 696e  ink or named lin
-000034c0: 6b0a 2020 2020 2020 2020 3a72 7479 7065  k.        :rtype
-000034d0: 3a20 4c69 6e6b 0a0a 2020 2020 2020 2020  : Link..        
-000034e0: 5468 6973 2061 6c73 6f20 7375 7070 6f72  This also suppor
-000034f0: 7473 2069 7465 7261 7469 6e67 206f 7665  ts iterating ove
-00003500: 7220 6561 6368 206c 696e 6b20 696e 2074  r each link in t
-00003510: 6865 2072 6f62 6f74 206f 626a 6563 742c  he robot object,
-00003520: 0a20 2020 2020 2020 2066 726f 6d20 7468  .        from th
-00003530: 6520 6261 7365 2074 6f20 7468 6520 746f  e base to the to
-00003540: 6f6c 2e0a 0a20 2020 2020 2020 202e 2e20  ol...        .. 
-00003550: 7275 6e62 6c6f 636b 3a3a 2070 7963 6f6e  runblock:: pycon
-00003560: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00003570: 3e20 696d 706f 7274 2072 6f62 6f74 6963  > import robotic
-00003580: 7374 6f6f 6c62 6f78 2061 7320 7274 620a  stoolbox as rtb.
-00003590: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000035a0: 726f 626f 7420 3d20 7274 622e 6d6f 6465  robot = rtb.mode
-000035b0: 6c73 2e50 616e 6461 2829 0a20 2020 2020  ls.Panda().     
-000035c0: 2020 2020 2020 203e 3e3e 2070 7269 6e74         >>> print
-000035d0: 2872 6f62 6f74 5b31 5d29 2023 2070 7269  (robot[1]) # pri
-000035e0: 6e74 2074 6865 2032 6e64 206c 696e 6b0a  nt the 2nd link.
-000035f0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00003600: 7072 696e 7428 5b6c 696e 6b2e 6120 666f  print([link.a fo
-00003610: 7220 6c69 6e6b 2069 6e20 726f 626f 745d  r link in robot]
-00003620: 2920 2023 2070 7269 6e74 2061 6c6c 2074  )  # print all t
-00003630: 6865 2061 5f6a 2076 616c 7565 730a 0a20  he a_j values.. 
-00003640: 2020 2020 2020 202e 2e20 6e6f 7465 3a3a         .. note::
-00003650: 2060 6045 526f 626f 7460 6020 7375 7070   ``ERobot`` supp
-00003660: 6f72 7473 206c 696e 6b20 6c6f 6f6b 7570  orts link lookup
-00003670: 2062 7920 6e61 6d65 2c0a 2020 2020 2020   by name,.      
-00003680: 2020 2020 2020 6567 2e20 6060 726f 626f        eg. ``robo
-00003690: 745b 276c 696e 6b31 275d 6060 0a20 2020  t['link1']``.   
-000036a0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000036b0: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
-000036c0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-000036d0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-000036e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000036f0: 7365 6c66 2e6c 696e 6b5f 6469 6374 5b69  self.link_dict[i
-00003700: 5d0a 2020 2020 2020 2020 2020 2020 6578  ].            ex
-00003710: 6365 7074 204b 6579 4572 726f 723a 0a20  cept KeyError:. 
-00003720: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00003730: 6169 7365 204b 6579 4572 726f 7228 6622  aise KeyError(f"
-00003740: 6c69 6e6b 207b 697d 206e 6f74 2069 6e20  link {i} not in 
-00003750: 6c69 6e6b 2064 6963 7469 6f6e 6172 7922  link dictionary"
-00003760: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-00003770: 6365 7074 2041 7474 7269 6275 7465 4572  cept AttributeEr
-00003780: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-00003790: 2020 2020 2072 6169 7365 2041 7474 7269       raise Attri
-000037a0: 6275 7465 4572 726f 7228 6622 726f 626f  buteError(f"robo
-000037b0: 7420 6861 7320 6e6f 206c 696e 6b20 6469  t has no link di
-000037c0: 6374 696f 6e61 7279 2229 0a20 2020 2020  ctionary").     
-000037d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000037e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000037f0: 2e5f 6c69 6e6b 735b 695d 0a0a 2020 2020  ._links[i]..    
-00003800: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-00003810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003840: 2d2d 2d2d 2d2d 2d20 230a 0a20 2020 2040  ------- #..    @
-00003850: 6f76 6572 6c6f 6164 0a20 2020 2064 6566  overload.    def
-00003860: 206c 696e 6b73 2873 656c 663a 2022 4552   links(self: "ER
-00003870: 6f62 6f74 2229 202d 3e20 4c69 7374 5b4c  obot") -> List[L
-00003880: 696e 6b5d 3a0a 2020 2020 2020 2020 2e2e  ink]:.        ..
-00003890: 2e0a 0a20 2020 2040 6f76 6572 6c6f 6164  ...    @overload
-000038a0: 0a20 2020 2064 6566 206c 696e 6b73 2873  .    def links(s
-000038b0: 656c 663a 2022 4552 6f62 6f74 3222 2920  elf: "ERobot2") 
-000038c0: 2d3e 204c 6973 745b 4c69 6e6b 325d 3a0a  -> List[Link2]:.
-000038d0: 2020 2020 2020 2020 2e2e 2e0a 0a20 2020          .....   
-000038e0: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-000038f0: 6566 206c 696e 6b73 2873 656c 6629 202d  ef links(self) -
-00003900: 3e20 4c69 7374 5b4c 696e 6b5d 3a0a 2020  > List[Link]:.  
-00003910: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00003920: 2020 526f 626f 7420 6c69 6e6b 730a 0a20    Robot links.. 
-00003930: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
-00003940: 4120 6c69 7374 206f 6620 6c69 6e6b 206f  A list of link o
-00003950: 626a 6563 7473 0a20 2020 2020 2020 2022  bjects.        "
-00003960: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-00003970: 6e20 7365 6c66 2e5f 6c69 6e6b 730a 0a20  n self._links.. 
-00003980: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-00003990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000039a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000039b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000039c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2023 0a0a 2020  ---------- #..  
-000039d0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-000039e0: 6465 6620 6e28 7365 6c66 2920 2d3e 2069  def n(self) -> i
-000039f0: 6e74 3a0a 2020 2020 2020 2020 2222 220a  nt:.        """.
-00003a00: 2020 2020 2020 2020 4e75 6d62 6572 206f          Number o
-00003a10: 6620 6a6f 696e 7473 0a20 2020 2020 2020  f joints.       
-00003a20: 203a 7265 7475 726e 3a20 6e75 6d62 6572   :return: number
-00003a30: 206f 6620 7661 7269 6162 6c65 206a 6f69   of variable joi
-00003a40: 6e74 2069 6e20 7468 6520 726f 626f 7427  nt in the robot'
-00003a50: 7320 6b69 6e65 6d61 7469 6320 7472 6565  s kinematic tree
-00003a60: 0a20 2020 2020 2020 203a 7274 7970 653a  .        :rtype:
-00003a70: 2069 6e74 0a20 2020 2020 2020 2054 6865   int.        The
-00003a80: 2073 756d 206f 6620 7468 6520 6e75 6d62   sum of the numb
-00003a90: 6572 206f 6620 7265 766f 6c75 7465 2061  er of revolute a
-00003aa0: 6e64 2070 7269 736d 6174 6963 206a 6f69  nd prismatic joi
-00003ab0: 6e74 732e 0a20 2020 2020 2020 2022 2222  nts..        """
-00003ac0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00003ad0: 7365 6c66 2e5f 6e0a 0a20 2020 2023 202d  self._n..    # -
-00003ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003b20: 2d2d 2d2d 2023 0a0a 2020 2020 4070 726f  ---- #..    @pro
-00003b30: 7065 7274 790a 2020 2020 6465 6620 6772  perty.    def gr
-00003b40: 6970 7065 7273 2873 656c 6629 202d 3e20  ippers(self) -> 
-00003b50: 4c69 7374 5b47 7269 7070 6572 5d3a 0a20  List[Gripper]:. 
-00003b60: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00003b70: 2020 2047 7269 7070 6572 7320 6174 7461     Grippers atta
-00003b80: 6368 6564 2074 6f20 7468 6520 726f 626f  ched to the robo
-00003b90: 740a 0a20 2020 2020 2020 203a 7265 7475  t..        :retu
-00003ba0: 726e 3a20 4120 6c69 7374 206f 6620 6772  rn: A list of gr
-00003bb0: 6970 7065 7273 0a0a 2020 2020 2020 2020  ippers..        
-00003bc0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-00003bd0: 726e 2073 656c 662e 5f67 7269 7070 6572  rn self._gripper
-00003be0: 730a 0a20 2020 2023 202d 2d2d 2d2d 2d2d  s..    # -------
-00003bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2023  -------------- #
-00003c30: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-00003c40: 2020 2064 6566 206e 6272 616e 6368 6573     def nbranches
-00003c50: 2873 656c 6629 202d 3e20 696e 743a 0a20  (self) -> int:. 
-00003c60: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00003c70: 2020 204e 756d 6265 7220 6f66 2062 7261     Number of bra
-00003c80: 6e63 6865 730a 0a20 2020 2020 2020 203a  nches..        :
-00003c90: 7265 7475 726e 3a20 6e75 6d62 6572 206f  return: number o
-00003ca0: 6620 6272 616e 6368 6573 2069 6e20 7468  f branches in th
-00003cb0: 6520 726f 626f 7427 7320 6b69 6e65 6d61  e robot's kinema
-00003cc0: 7469 6320 7472 6565 0a20 2020 2020 2020  tic tree.       
-00003cd0: 203a 7274 7970 653a 2069 6e74 0a0a 2020   :rtype: int..  
-00003ce0: 2020 2020 2020 4e75 6d62 6572 206f 6620        Number of 
-00003cf0: 6272 616e 6368 6573 2069 6e20 7468 6973  branches in this
-00003d00: 2072 6f62 6f74 2e20 2043 6f6d 7075 7465   robot.  Compute
-00003d10: 6420 6173 2074 6865 206e 756d 6265 7220  d as the number 
-00003d20: 6f66 206c 696e 6b73 2077 6974 680a 2020  of links with.  
-00003d30: 2020 2020 2020 7a65 726f 2063 6869 6c64        zero child
-00003d40: 7265 6e0a 0a20 2020 2020 2020 2045 7861  ren..        Exa
-00003d50: 6d70 6c65 3a0a 0a20 2020 2020 2020 202e  mple:..        .
-00003d60: 2e20 7275 6e62 6c6f 636b 3a3a 2070 7963  . runblock:: pyc
-00003d70: 6f6e 0a0a 2020 2020 2020 2020 2020 2020  on..            
-00003d80: 3e3e 3e20 696d 706f 7274 2072 6f62 6f74  >>> import robot
-00003d90: 6963 7374 6f6f 6c62 6f78 2061 7320 7274  icstoolbox as rt
-00003da0: 620a 2020 2020 2020 2020 2020 2020 3e3e  b.            >>
-00003db0: 3e20 726f 626f 7420 3d20 7274 622e 6d6f  > robot = rtb.mo
-00003dc0: 6465 6c73 2e45 5453 2e50 616e 6461 2829  dels.ETS.Panda()
-00003dd0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00003de0: 2072 6f62 6f74 2e6e 6272 616e 6368 6573   robot.nbranches
-00003df0: 0a0a 2020 2020 2020 2020 3a73 6565 616c  ..        :seeal
-00003e00: 736f 3a20 3a66 756e 633a 606e 602c 203a  so: :func:`n`, :
-00003e10: 6675 6e63 3a60 6e6c 696e 6b73 600a 2020  func:`nlinks`.  
-00003e20: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00003e30: 2020 2320 7265 7475 726e 2073 656c 662e    # return self.
-00003e40: 5f6e 6272 616e 6368 6573 0a20 2020 2020  _nbranches.     
-00003e50: 2020 2072 6574 7572 6e20 7375 6d28 5b6c     return sum([l
-00003e60: 696e 6b2e 6e63 6869 6c64 7265 6e20 3d3d  ink.nchildren ==
-00003e70: 2030 2066 6f72 206c 696e 6b20 696e 2073   0 for link in s
-00003e80: 656c 662e 6c69 6e6b 735d 2920 2b20 6c65  elf.links]) + le
-00003e90: 6e28 7365 6c66 2e67 7269 7070 6572 7329  n(self.grippers)
-00003ea0: 0a0a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  ..    # --------
-00003eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a  ------------- #.
-00003ef0: 0a20 2020 2040 6f76 6572 6c6f 6164 0a20  .    @overload. 
-00003f00: 2020 2064 6566 2065 6c69 6e6b 7328 7365     def elinks(se
-00003f10: 6c66 3a20 2245 526f 626f 7422 2920 2d3e  lf: "ERobot") ->
-00003f20: 204c 6973 745b 4c69 6e6b 5d3a 0a20 2020   List[Link]:.   
-00003f30: 2020 2020 202e 2e2e 0a0a 2020 2020 406f       .....    @o
-00003f40: 7665 726c 6f61 640a 2020 2020 6465 6620  verload.    def 
-00003f50: 656c 696e 6b73 2873 656c 663a 2022 4552  elinks(self: "ER
-00003f60: 6f62 6f74 3222 2920 2d3e 204c 6973 745b  obot2") -> List[
-00003f70: 4c69 6e6b 325d 3a0a 2020 2020 2020 2020  Link2]:.        
-00003f80: 2e2e 2e0a 0a20 2020 2040 7072 6f70 6572  .....    @proper
-00003f90: 7479 0a20 2020 2064 6566 2065 6c69 6e6b  ty.    def elink
-00003fa0: 7328 7365 6c66 2920 2d3e 204c 6973 745b  s(self) -> List[
-00003fb0: 4c69 6e6b 5d3a 0a20 2020 2020 2020 2072  Link]:.        r
-00003fc0: 6574 7572 6e20 7365 6c66 2e5f 6c69 6e6b  eturn self._link
-00003fd0: 730a 0a20 2020 2023 202d 2d2d 2d2d 2d2d  s..    # -------
-00003fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2023  -------------- #
-00004020: 0a0a 2020 2020 406f 7665 726c 6f61 640a  ..    @overload.
-00004030: 2020 2020 6465 6620 6c69 6e6b 5f64 6963      def link_dic
-00004040: 7428 7365 6c66 3a20 2245 526f 626f 7422  t(self: "ERobot"
-00004050: 2920 2d3e 2044 6963 745b 7374 722c 204c  ) -> Dict[str, L
-00004060: 696e 6b5d 3a0a 2020 2020 2020 2020 2e2e  ink]:.        ..
-00004070: 2e0a 0a20 2020 2040 6f76 6572 6c6f 6164  ...    @overload
-00004080: 0a20 2020 2064 6566 206c 696e 6b5f 6469  .    def link_di
-00004090: 6374 2873 656c 663a 2022 4552 6f62 6f74  ct(self: "ERobot
-000040a0: 3222 2920 2d3e 2044 6963 745b 7374 722c  2") -> Dict[str,
-000040b0: 204c 696e 6b32 5d3a 0a20 2020 2020 2020   Link2]:.       
-000040c0: 202e 2e2e 0a0a 2020 2020 4070 726f 7065   .....    @prope
-000040d0: 7274 790a 2020 2020 6465 6620 6c69 6e6b  rty.    def link
-000040e0: 5f64 6963 7428 7365 6c66 2920 2d3e 2044  _dict(self) -> D
-000040f0: 6963 745b 7374 722c 204c 696e 6b5d 3a0a  ict[str, Link]:.
-00004100: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00004110: 656c 662e 5f6c 696e 6b64 6963 740a 0a20  elf._linkdict.. 
-00004120: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
-00004130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004160: 2d2d 2d2d 2d2d 2d2d 2d2d 2023 0a0a 2020  ---------- #..  
-00004170: 2020 406f 7665 726c 6f61 640a 2020 2020    @overload.    
-00004180: 6465 6620 6261 7365 5f6c 696e 6b28 7365  def base_link(se
-00004190: 6c66 3a20 2245 526f 626f 7422 2920 2d3e  lf: "ERobot") ->
-000041a0: 204c 696e 6b3a 0a20 2020 2020 2020 202e   Link:.        .
-000041b0: 2e2e 0a0a 2020 2020 406f 7665 726c 6f61  ....    @overloa
-000041c0: 640a 2020 2020 6465 6620 6261 7365 5f6c  d.    def base_l
-000041d0: 696e 6b28 7365 6c66 3a20 2245 526f 626f  ink(self: "ERobo
-000041e0: 7432 2229 202d 3e20 4c69 6e6b 323a 0a20  t2") -> Link2:. 
-000041f0: 2020 2020 2020 202e 2e2e 0a0a 2020 2020         .....    
-00004200: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
-00004210: 6620 6261 7365 5f6c 696e 6b28 7365 6c66  f base_link(self
-00004220: 2920 2d3e 204c 696e 6b3a 0a20 2020 2020  ) -> Link:.     
-00004230: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00004240: 6261 7365 5f6c 696e 6b0a 0a20 2020 2040  base_link..    @
-00004250: 6261 7365 5f6c 696e 6b2e 7365 7474 6572  base_link.setter
-00004260: 0a20 2020 2064 6566 2062 6173 655f 6c69  .    def base_li
-00004270: 6e6b 2873 656c 662c 206c 696e 6b29 3a0a  nk(self, link):.
-00004280: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00004290: 7461 6e63 6528 6c69 6e6b 2c20 4c69 6e6b  tance(link, Link
-000042a0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-000042b0: 656c 662e 5f62 6173 655f 6c69 6e6b 203d  elf._base_link =
-000042c0: 206c 696e 6b0a 2020 2020 2020 2020 656c   link.        el
-000042d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000042e0: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
-000042f0: 224d 7573 7420 6265 2061 204c 696e 6b22  "Must be a Link"
-00004300: 290a 0a20 2020 2023 202d 2d2d 2d2d 2d2d  )..    # -------
-00004310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2023  -------------- #
-00004350: 0a0a 2020 2020 406f 7665 726c 6f61 640a  ..    @overload.
-00004360: 2020 2020 6465 6620 6565 5f6c 696e 6b73      def ee_links
-00004370: 2873 656c 663a 2022 4552 6f62 6f74 3222  (self: "ERobot2"
-00004380: 2920 2d3e 204c 6973 745b 4c69 6e6b 325d  ) -> List[Link2]
-00004390: 3a0a 2020 2020 2020 2020 2e2e 2e0a 0a20  :.        ..... 
-000043a0: 2020 2040 6f76 6572 6c6f 6164 0a20 2020     @overload.   
-000043b0: 2064 6566 2065 655f 6c69 6e6b 7328 7365   def ee_links(se
-000043c0: 6c66 3a20 2245 526f 626f 7422 2920 2d3e  lf: "ERobot") ->
-000043d0: 204c 6973 745b 4c69 6e6b 5d3a 0a20 2020   List[Link]:.   
-000043e0: 2020 2020 202e 2e2e 0a0a 2020 2020 4070       .....    @p
-000043f0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-00004400: 6565 5f6c 696e 6b73 2873 656c 6629 202d  ee_links(self) -
-00004410: 3e20 4c69 7374 5b4c 696e 6b5d 3a0a 2020  > List[Link]:.  
-00004420: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00004430: 662e 5f65 655f 6c69 6e6b 730a 0a20 2020  f._ee_links..   
-00004440: 2040 6565 5f6c 696e 6b73 2e73 6574 7465   @ee_links.sette
-00004450: 720a 2020 2020 6465 6620 6565 5f6c 696e  r.    def ee_lin
-00004460: 6b73 2873 656c 662c 206c 696e 6b3a 2055  ks(self, link: U
-00004470: 6e69 6f6e 5b4c 6973 745b 4c69 6e6b 5d2c  nion[List[Link],
-00004480: 204c 696e 6b5d 293a 0a20 2020 2020 2020   Link]):.       
-00004490: 2069 6620 6973 696e 7374 616e 6365 286c   if isinstance(l
-000044a0: 696e 6b2c 204c 696e 6b29 3a0a 2020 2020  ink, Link):.    
-000044b0: 2020 2020 2020 2020 7365 6c66 2e5f 6565          self._ee
-000044c0: 5f6c 696e 6b73 203d 205b 6c69 6e6b 5d0a  _links = [link].
-000044d0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-000044e0: 6e73 7461 6e63 6528 6c69 6e6b 2c20 6c69  nstance(link, li
-000044f0: 7374 2920 616e 6420 616c 6c28 5b69 7369  st) and all([isi
-00004500: 6e73 7461 6e63 6528 782c 204c 696e 6b29  nstance(x, Link)
-00004510: 2066 6f72 2078 2069 6e20 6c69 6e6b 5d29   for x in link])
-00004520: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00004530: 6c66 2e5f 6565 5f6c 696e 6b73 203d 206c  lf._ee_links = l
-00004540: 696e 6b0a 2020 2020 2020 2020 656c 7365  ink.        else
-00004550: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00004560: 6973 6520 5479 7065 4572 726f 7228 2265  ise TypeError("e
-00004570: 7870 6563 7469 6e67 2061 204c 696e 6b20  xpecting a Link 
-00004580: 6f72 206c 6973 7420 6f66 204c 696e 6b73  or list of Links
-00004590: 2229 0a0a 2020 2020 2320 2d2d 2d2d 2d2d  ")..    # ------
-000045a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000045b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000045c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000045d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20  --------------- 
-000045e0: 230a 0a20 2020 2040 7072 6f70 6572 7479  #..    @property
-000045f0: 0a20 2020 2064 6566 2072 6561 6368 2873  .    def reach(s
-00004600: 656c 6629 202d 3e20 666c 6f61 743a 0a20  elf) -> float:. 
-00004610: 2020 2020 2020 2072 2222 220a 2020 2020         r""".    
-00004620: 2020 2020 5265 6163 6820 6f66 2074 6865      Reach of the
-00004630: 2072 6f62 6f74 0a20 2020 2020 2020 203a   robot.        :
-00004640: 7265 7475 726e 3a20 4d61 7869 6d75 6d20  return: Maximum 
-00004650: 7265 6163 6820 6f66 2074 6865 2072 6f62  reach of the rob
-00004660: 6f74 0a20 2020 2020 2020 203a 7274 7970  ot.        :rtyp
-00004670: 653a 2066 6c6f 6174 0a20 2020 2020 2020  e: float.       
-00004680: 2041 2063 6f6e 7365 7276 6174 6976 6520   A conservative 
-00004690: 6573 7469 6d61 7465 206f 6620 7468 6520  estimate of the 
-000046a0: 7265 6163 6820 6f66 2074 6865 2072 6f62  reach of the rob
-000046b0: 6f74 2e20 4974 2069 7320 636f 6d70 7574  ot. It is comput
-000046c0: 6564 2061 730a 2020 2020 2020 2020 7468  ed as.        th
-000046d0: 6520 7375 6d20 6f66 2074 6865 2074 7261  e sum of the tra
-000046e0: 6e73 6c61 7469 6f6e 616c 2045 5473 2074  nslational ETs t
-000046f0: 6861 7420 6465 6669 6e65 2074 6865 206c  hat define the l
-00004700: 696e 6b20 7472 616e 7366 6f72 6d2e 0a20  ink transform.. 
-00004710: 2020 2020 2020 202e 2e20 6e6f 7465 3a3a         .. note::
-00004720: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
-00004730: 726f 6261 626c 7920 616e 206f 7665 7265  robably an overe
-00004740: 7374 696d 6174 6520 6f66 2072 6561 6368  stimate of reach
-00004750: 0a20 2020 2020 2020 2020 2020 202d 2055  .            - U
-00004760: 7365 6420 6279 206e 756d 6572 6963 616c  sed by numerical
-00004770: 2069 6e76 6572 7365 206b 696e 656d 6174   inverse kinemat
-00004780: 6963 7320 746f 2073 6361 6c65 2074 7261  ics to scale tra
-00004790: 6e73 6c61 7469 6f6e 616c 0a20 2020 2020  nslational.     
-000047a0: 2020 2020 2020 2020 2065 7272 6f72 2e0a           error..
-000047b0: 2020 2020 2020 2020 2020 2020 2d20 466f              - Fo
-000047c0: 7220 6120 7072 6973 6d61 7469 6320 6a6f  r a prismatic jo
-000047d0: 696e 742c 2075 7365 7320 6060 716c 696d  int, uses ``qlim
-000047e0: 6060 2069 6620 6974 2069 7320 7365 740a  `` if it is set.
-000047f0: 2020 2020 2020 2020 2e2e 2077 6172 6e69          .. warni
-00004800: 6e67 3a3a 2043 6f6d 7075 7465 6420 6f6e  ng:: Computed on
-00004810: 2074 6865 2066 6972 7374 2061 6363 6573   the first acces
-00004820: 732e 2049 6620 6b69 6e65 6d61 7469 6320  s. If kinematic 
-00004830: 7061 7261 6d65 7465 7273 0a20 2020 2020  parameters.     
-00004840: 2020 2020 2020 2020 2073 7562 7365 7175           subsequ
-00004850: 656e 746c 7920 6368 616e 6765 2074 6869  ently change thi
-00004860: 7320 7769 6c6c 206e 6f74 2062 6520 7265  s will not be re
-00004870: 666c 6563 7465 642e 0a20 2020 2020 2020  flected..       
-00004880: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-00004890: 7365 6c66 2e5f 7265 6163 6820 6973 204e  self._reach is N
-000048a0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000048b0: 2064 5f61 6c6c 203d 205b 5d0a 2020 2020   d_all = [].    
-000048c0: 2020 2020 2020 2020 666f 7220 6c69 6e6b          for link
-000048d0: 2069 6e20 7365 6c66 2e65 655f 6c69 6e6b   in self.ee_link
-000048e0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-000048f0: 2020 2064 203d 2030 0a20 2020 2020 2020     d = 0.       
-00004900: 2020 2020 2020 2020 2077 6869 6c65 2054           while T
-00004910: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-00004920: 2020 2020 2020 2020 2066 6f72 2065 7420           for et 
-00004930: 696e 206c 696e 6b2e 6574 733a 0a20 2020  in link.ets:.   
-00004940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004950: 2020 2020 2069 6620 6574 2e69 7374 7261       if et.istra
-00004960: 6e73 6c61 7469 6f6e 3a0a 2020 2020 2020  nslation:.      
-00004970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004980: 2020 2020 2020 6966 2065 742e 6973 6a6f        if et.isjo
-00004990: 696e 743a 0a20 2020 2020 2020 2020 2020  int:.           
-000049a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049b0: 2020 2020 2023 2074 6865 206c 656e 6774       # the lengt
-000049c0: 6820 6f66 2061 2070 7269 736d 6174 6963  h of a prismatic
-000049d0: 206a 6f69 6e74 2064 6570 656e 6473 206f   joint depends o
-000049e0: 6e20 7468 650a 2020 2020 2020 2020 2020  n the.          
-000049f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a00: 2020 2020 2020 2320 6a6f 696e 7420 6c69        # joint li
-00004a10: 6d69 7473 2e20 2054 6865 7920 6d69 6768  mits.  They migh
-00004a20: 7420 6265 2073 6574 2069 6e20 7468 6520  t be set in the 
-00004a30: 4554 0a20 2020 2020 2020 2020 2020 2020  ET.             
-00004a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a50: 2020 2023 206f 7220 696e 2074 6865 204c     # or in the L
-00004a60: 696e 6b20 6465 7065 6e64 696e 6720 6f6e  ink depending on
-00004a70: 2068 6f77 2074 6865 2072 6f62 6f74 0a20   how the robot. 
-00004a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00004aa0: 2077 6173 2063 6f6e 7374 7275 6374 6564   was constructed
-00004ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ad0: 2069 6620 6c69 6e6b 2e71 6c69 6d20 6973   if link.qlim is
-00004ae0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00004af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b00: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00004b10: 202b 3d20 6d61 7828 6c69 6e6b 2e71 6c69   += max(link.qli
-00004b20: 6d29 0a20 2020 2020 2020 2020 2020 2020  m).             
-00004b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b40: 2020 2065 6c69 6620 6574 2e71 6c69 6d20     elif et.qlim 
-00004b50: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00004b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b80: 2064 202b 3d20 6d61 7828 6574 2e71 6c69   d += max(et.qli
-00004b90: 6d29 0a20 2020 2020 2020 2020 2020 2020  m).             
-00004ba0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00004bb0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00004bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004bd0: 2020 2020 2064 202b 3d20 6162 7328 6574       d += abs(et
-00004be0: 2e65 7461 290a 2020 2020 2020 2020 2020  .eta).          
-00004bf0: 2020 2020 2020 2020 2020 6c69 6e6b 203d            link =
-00004c00: 206c 696e 6b2e 7061 7265 6e74 0a20 2020   link.parent.   
-00004c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c20: 2069 6620 6c69 6e6b 2069 7320 4e6f 6e65   if link is None
-00004c30: 206f 7220 6973 696e 7374 616e 6365 286c   or isinstance(l
-00004c40: 696e 6b2c 2073 7472 293a 0a20 2020 2020  ink, str):.     
-00004c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c60: 2020 2064 5f61 6c6c 2e61 7070 656e 6428     d_all.append(
-00004c70: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-00004c80: 2020 2020 2020 2020 2020 2062 7265 616b             break
-00004c90: 0a0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00004ca0: 6c66 2e5f 7265 6163 6820 3d20 6d61 7828  lf._reach = max(
-00004cb0: 645f 616c 6c29 0a20 2020 2020 2020 2072  d_all).        r
-00004cc0: 6574 7572 6e20 7365 6c66 2e5f 7265 6163  eturn self._reac
-00004cd0: 680a 0a20 2020 2023 202d 2d2d 2d2d 2d2d  h..    # -------
-00004ce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004cf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2023  -------------- #
-00004d20: 0a0a 2020 2020 6465 6620 6869 6572 6172  ..    def hierar
-00004d30: 6368 7928 7365 6c66 293a 0a20 2020 2020  chy(self):.     
-00004d40: 2020 2022 2222 0a20 2020 2020 2020 2050     """.        P
-00004d50: 7265 7474 7920 7072 696e 7420 7468 6520  retty print the 
-00004d60: 726f 626f 7420 6c69 6e6b 2068 6965 7261  robot link hiera
-00004d70: 6368 790a 2020 2020 2020 2020 3a72 6574  chy.        :ret
-00004d80: 7572 6e3a 2050 7265 7474 7920 7072 696e  urn: Pretty prin
-00004d90: 7420 6f66 2074 6865 2072 6f62 6f74 206d  t of the robot m
-00004da0: 6f64 656c 0a20 2020 2020 2020 203a 7274  odel.        :rt
-00004db0: 7970 653a 2073 7472 0a20 2020 2020 2020  ype: str.       
-00004dc0: 2045 7861 6d70 6c65 3a0a 2020 2020 2020   Example:.      
-00004dd0: 2020 2e2e 2072 756e 626c 6f63 6b3a 3a20    .. runblock:: 
-00004de0: 7079 636f 6e0a 2020 2020 2020 2020 2020  pycon.          
-00004df0: 2020 3e3e 3e20 696d 706f 7274 2072 6f62    >>> import rob
-00004e00: 6f74 6963 7374 6f6f 6c62 6f78 2061 7320  oticstoolbox as 
-00004e10: 7274 620a 2020 2020 2020 2020 2020 2020  rtb.            
-00004e20: 3e3e 3e20 726f 626f 7420 3d20 7274 622e  >>> robot = rtb.
-00004e30: 6d6f 6465 6c73 2e55 5244 462e 5061 6e64  models.URDF.Pand
-00004e40: 6128 290a 2020 2020 2020 2020 2020 2020  a().            
-00004e50: 3e3e 3e20 726f 626f 742e 6869 6572 6172  >>> robot.hierar
-00004e60: 6368 7928 290a 2020 2020 2020 2020 2222  chy().        ""
-00004e70: 220a 0a20 2020 2020 2020 2064 6566 2072  "..        def r
-00004e80: 6563 7572 7365 286c 696e 6b2c 2069 6e64  ecurse(link, ind
-00004e90: 656e 743d 3029 3a0a 2020 2020 2020 2020  ent=0):.        
-00004ea0: 2020 2020 7072 696e 7428 2220 2220 2a20      print(" " * 
-00004eb0: 696e 6465 6e74 202a 2032 2c20 6c69 6e6b  indent * 2, link
-00004ec0: 2e6e 616d 6529 0a20 2020 2020 2020 2020  .name).         
-00004ed0: 2020 2066 6f72 2063 6869 6c64 2069 6e20     for child in 
-00004ee0: 6c69 6e6b 2e63 6869 6c64 3a0a 2020 2020  link.child:.    
-00004ef0: 2020 2020 2020 2020 2020 2020 7265 6375              recu
-00004f00: 7273 6528 6368 696c 642c 2069 6e64 656e  rse(child, inden
-00004f10: 7420 2b20 3129 0a0a 2020 2020 2020 2020  t + 1)..        
-00004f20: 7265 6375 7273 6528 7365 6c66 2e62 6173  recurse(self.bas
-00004f30: 655f 6c69 6e6b 290a 0a20 2020 2023 202d  e_link)..    # -
-00004f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004f80: 2d2d 2d2d 2023 0a0a 2020 2020 6465 6620  ---- #..    def 
-00004f90: 5f66 696e 645f 6574 7328 7365 6c66 2c20  _find_ets(self, 
-00004fa0: 7374 6172 742c 2065 6e64 2c20 6578 706c  start, end, expl
-00004fb0: 6f72 6564 2c20 7061 7468 2920 2d3e 2055  ored, path) -> U
-00004fc0: 6e69 6f6e 5b45 5453 2c20 4e6f 6e65 5d3a  nion[ETS, None]:
-00004fd0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00004fe0: 2020 2020 2050 7269 7661 6465 206d 6574       Privade met
-00004ff0: 686f 6420 7768 6963 6820 7769 6c6c 2072  hod which will r
-00005000: 6563 7572 7369 7665 6c79 2066 696e 6420  ecursively find 
-00005010: 7468 6520 4554 5320 6f66 2061 2070 6174  the ETS of a pat
-00005020: 680a 2020 2020 2020 2020 7365 6520 6574  h.        see et
-00005030: 7328 290a 2020 2020 2020 2020 2222 220a  s().        """.
-00005040: 0a20 2020 2020 2020 206c 696e 6b20 3d20  .        link = 
-00005050: 7365 6c66 2e5f 6765 746c 696e 6b28 7374  self._getlink(st
-00005060: 6172 742c 2073 656c 662e 6261 7365 5f6c  art, self.base_l
-00005070: 696e 6b29 0a20 2020 2020 2020 2065 6e64  ink).        end
-00005080: 203d 2073 656c 662e 5f67 6574 6c69 6e6b   = self._getlink
-00005090: 2865 6e64 2c20 7365 6c66 2e65 655f 6c69  (end, self.ee_li
-000050a0: 6e6b 735b 305d 290a 0a20 2020 2020 2020  nks[0])..       
-000050b0: 2074 6f70 6c65 7665 6c20 3d20 7061 7468   toplevel = path
-000050c0: 2069 7320 4e6f 6e65 0a20 2020 2020 2020   is None.       
-000050d0: 2065 7870 6c6f 7265 642e 6164 6428 6c69   explored.add(li
-000050e0: 6e6b 290a 0a20 2020 2020 2020 2069 6620  nk)..        if 
-000050f0: 6c69 6e6b 203d 3d20 656e 643a 0a20 2020  link == end:.   
-00005100: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00005110: 7061 7468 0a0a 2020 2020 2020 2020 2320  path..        # 
-00005120: 756e 6c69 6b65 2072 6567 756c 6172 2044  unlike regular D
-00005130: 4653 2c20 7468 6520 6e65 6967 6862 6f75  FS, the neighbou
-00005140: 7273 206f 6620 7468 6520 6e6f 6465 2061  rs of the node a
-00005150: 7265 2069 7473 2063 6869 6c64 7265 6e0a  re its children.
-00005160: 2020 2020 2020 2020 2320 616e 6420 6974          # and it
-00005170: 7320 7061 7265 6e74 2e0a 0a20 2020 2020  s parent...     
-00005180: 2020 2023 2076 6973 6974 2063 6869 6c64     # visit child
-00005190: 206e 6f64 6573 2062 656c 6f77 2073 7461   nodes below sta
-000051a0: 7274 0a20 2020 2020 2020 2069 6620 746f  rt.        if to
-000051b0: 706c 6576 656c 3a0a 2020 2020 2020 2020  plevel:.        
-000051c0: 2020 2020 7061 7468 203d 206c 696e 6b2e      path = link.
-000051d0: 6574 730a 0a20 2020 2020 2020 2069 6620  ets..        if 
-000051e0: 6c69 6e6b 2e63 6869 6c64 7265 6e20 6973  link.children is
-000051f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00005200: 2020 2020 2020 2066 6f72 2063 6869 6c64         for child
-00005210: 2069 6e20 6c69 6e6b 2e63 6869 6c64 7265   in link.childre
-00005220: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
-00005230: 2020 2069 6620 6368 696c 6420 6e6f 7420     if child not 
-00005240: 696e 2065 7870 6c6f 7265 643a 0a20 2020  in explored:.   
-00005250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005260: 2070 203d 2073 656c 662e 5f66 696e 645f   p = self._find_
-00005270: 6574 7328 6368 696c 642c 2065 6e64 2c20  ets(child, end, 
-00005280: 6578 706c 6f72 6564 2c20 7061 7468 202a  explored, path *
-00005290: 2063 6869 6c64 2e65 7473 290a 2020 2020   child.ets).    
-000052a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000052b0: 6966 2070 2069 7320 6e6f 7420 4e6f 6e65  if p is not None
-000052c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000052d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000052e0: 2070 0a0a 2020 2020 2020 2020 2320 7765   p..        # we
-000052f0: 2064 6964 6e27 7420 6669 6e64 2074 6865   didn't find the
-00005300: 206e 6f64 6520 6265 6c6f 772c 206b 6565   node below, kee
-00005310: 7020 676f 696e 6720 7570 2061 206c 6576  p going up a lev
-00005320: 656c 2c20 616e 6420 7265 6375 7273 696e  el, and recursin
-00005330: 670a 2020 2020 2020 2020 2320 646f 776e  g.        # down
-00005340: 2061 6761 696e 0a20 2020 2020 2020 2069   again.        i
-00005350: 6620 746f 706c 6576 656c 3a0a 2020 2020  f toplevel:.    
-00005360: 2020 2020 2020 2020 7061 7468 203d 204e          path = N
-00005370: 6f6e 650a 2020 2020 2020 2020 6966 206c  one.        if l
-00005380: 696e 6b2e 7061 7265 6e74 2069 7320 6e6f  ink.parent is no
-00005390: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-000053a0: 2020 2020 7061 7265 6e74 203d 206c 696e      parent = lin
-000053b0: 6b2e 7061 7265 6e74 2020 2320 676f 2075  k.parent  # go u
-000053c0: 7020 6f6e 6520 6c65 7665 6c20 746f 7761  p one level towa
-000053d0: 7264 2074 6865 2072 6f6f 740a 2020 2020  rd the root.    
-000053e0: 2020 2020 2020 2020 6966 2070 6172 656e          if paren
-000053f0: 7420 6e6f 7420 696e 2065 7870 6c6f 7265  t not in explore
-00005400: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
-00005410: 2020 2069 6620 7061 7468 2069 7320 4e6f     if path is No
-00005420: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00005430: 2020 2020 2020 2020 7020 3d20 7365 6c66          p = self
-00005440: 2e5f 6669 6e64 5f65 7473 2870 6172 656e  ._find_ets(paren
-00005450: 742c 2065 6e64 2c20 6578 706c 6f72 6564  t, end, explored
-00005460: 2c20 6c69 6e6b 2e65 7473 2e69 6e76 2829  , link.ets.inv()
-00005470: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00005480: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00005490: 2020 2020 2020 2020 2020 2020 7020 3d20              p = 
-000054a0: 7365 6c66 2e5f 6669 6e64 5f65 7473 2870  self._find_ets(p
-000054b0: 6172 656e 742c 2065 6e64 2c20 6578 706c  arent, end, expl
-000054c0: 6f72 6564 2c20 7061 7468 202a 206c 696e  ored, path * lin
-000054d0: 6b2e 6574 732e 696e 7628 2929 0a20 2020  k.ets.inv()).   
-000054e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000054f0: 7020 6973 206e 6f74 204e 6f6e 653a 0a20  p is not None:. 
-00005500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005510: 2020 2072 6574 7572 6e20 700a 0a20 2020     return p..   
-00005520: 2064 6566 205f 6772 6970 7065 725f 6574   def _gripper_et
-00005530: 7328 7365 6c66 2c20 6772 6970 7065 723a  s(self, gripper:
-00005540: 2047 7269 7070 6572 2920 2d3e 2045 5453   Gripper) -> ETS
-00005550: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00005560: 2020 2020 2020 5072 6976 6164 6520 6d65        Privade me
-00005570: 7468 6f64 2077 6869 6368 2077 696c 6c20  thod which will 
-00005580: 6669 6e64 2074 6865 2045 5453 206f 6620  find the ETS of 
-00005590: 6120 6772 6970 7065 720a 2020 2020 2020  a gripper.      
-000055a0: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-000055b0: 7265 7475 726e 2067 7269 7070 6572 2e6c  return gripper.l
-000055c0: 696e 6b73 5b30 5d2e 6574 7320 2a20 4554  inks[0].ets * ET
-000055d0: 2e53 4533 2867 7269 7070 6572 2e74 6f6f  .SE3(gripper.too
-000055e0: 6c29 0a20 2020 2020 2020 2072 6574 7572  l).        retur
-000055f0: 6e20 4554 5328 4554 2e53 4533 2867 7269  n ETS(ET.SE3(gri
-00005600: 7070 6572 2e74 6f6f 6c29 290a 0a20 2020  pper.tool))..   
-00005610: 2040 6c72 755f 6361 6368 6528 6d61 7873   @lru_cache(maxs
-00005620: 697a 653d 3332 290a 2020 2020 6465 6620  ize=32).    def 
-00005630: 6574 7328 0a20 2020 2020 2020 2073 656c  ets(.        sel
-00005640: 662c 0a20 2020 2020 2020 2073 7461 7274  f,.        start
-00005650: 3a20 556e 696f 6e5b 4c69 6e6b 2c20 4772  : Union[Link, Gr
-00005660: 6970 7065 722c 2073 7472 2c20 4e6f 6e65  ipper, str, None
-00005670: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-00005680: 2020 656e 643a 2055 6e69 6f6e 5b4c 696e    end: Union[Lin
-00005690: 6b2c 2047 7269 7070 6572 2c20 7374 722c  k, Gripper, str,
-000056a0: 204e 6f6e 655d 203d 204e 6f6e 652c 0a20   None] = None,. 
-000056b0: 2020 2029 202d 3e20 4554 533a 0a20 2020     ) -> ETS:.   
-000056c0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000056d0: 2045 526f 626f 7420 746f 2045 5453 0a0a   ERobot to ETS..
-000056e0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-000056f0: 7461 7274 3a20 7374 6172 7420 6f66 2070  tart: start of p
-00005700: 6174 682c 2064 6566 6175 6c74 7320 746f  ath, defaults to
-00005710: 2060 6062 6173 655f 6c69 6e6b 6060 0a20   ``base_link``. 
-00005720: 2020 2020 2020 203a 7479 7065 2073 7461         :type sta
-00005730: 7274 3a20 4c69 6e6b 206f 7220 7374 722c  rt: Link or str,
-00005740: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
-00005750: 2020 3a70 6172 616d 2065 6e64 3a20 656e    :param end: en
-00005760: 6420 6f66 2070 6174 682c 2064 6566 6175  d of path, defau
-00005770: 6c74 7320 746f 2065 6e64 2d65 6666 6563  lts to end-effec
-00005780: 746f 720a 2020 2020 2020 2020 3a74 7970  tor.        :typ
-00005790: 6520 656e 643a 204c 696e 6b20 6f72 2073  e end: Link or s
-000057a0: 7472 2c20 6f70 7469 6f6e 616c 0a20 2020  tr, optional.   
-000057b0: 2020 2020 203a 7261 6973 6573 2056 616c       :raises Val
-000057c0: 7565 4572 726f 723a 2061 206c 696e 6b20  ueError: a link 
-000057d0: 646f 6573 206e 6f74 2062 656c 6f6e 6720  does not belong 
-000057e0: 746f 2074 6869 7320 4552 6f62 6f74 0a20  to this ERobot. 
-000057f0: 2020 2020 2020 203a 7261 6973 6573 2054         :raises T
-00005800: 7970 6545 7272 6f72 3a20 6120 6261 6420  ypeError: a bad 
-00005810: 6c69 6e6b 2061 7267 756d 656e 740a 2020  link argument.  
-00005820: 2020 2020 2020 3a72 6574 7572 6e3a 2065        :return: e
-00005830: 6c65 6d65 6e74 6172 7920 7472 616e 7366  lementary transf
-00005840: 6f72 6d20 7365 7175 656e 6365 0a20 2020  orm sequence.   
-00005850: 2020 2020 203a 7274 7970 653a 2045 5453       :rtype: ETS
-00005860: 2069 6e73 7461 6e63 650a 0a0a 2020 2020   instance...    
-00005870: 2020 2020 2d20 6060 726f 626f 742e 6574      - ``robot.et
-00005880: 7328 2960 6020 6973 2061 6e20 4554 5320  s()`` is an ETS 
-00005890: 7265 7072 6573 656e 7469 6e67 2074 6865  representing the
-000058a0: 206b 696e 656d 6174 6963 7320 6672 6f6d   kinematics from
-000058b0: 2062 6173 6520 746f 0a20 2020 2020 2020   base to.       
-000058c0: 2020 2065 6e64 2d65 6666 6563 746f 722e     end-effector.
-000058d0: 0a20 2020 2020 2020 202d 2060 6072 6f62  .        - ``rob
-000058e0: 6f74 2e65 7473 2865 6e64 3d6c 696e 6b29  ot.ets(end=link)
-000058f0: 6060 2069 7320 616e 2045 5453 2072 6570  `` is an ETS rep
-00005900: 7265 7365 6e74 696e 6720 7468 6520 6b69  resenting the ki
-00005910: 6e65 6d61 7469 6373 2066 726f 6d0a 2020  nematics from.  
-00005920: 2020 2020 2020 2020 6261 7365 2074 6f20          base to 
-00005930: 7468 6520 6c69 6e6b 2060 606c 696e 6b60  the link ``link`
-00005940: 6020 7370 6563 6966 6965 6420 6173 2061  ` specified as a
-00005950: 204c 696e 6b20 7265 6665 7265 6e63 6520   Link reference 
-00005960: 6f72 2061 206e 616d 652e 0a20 2020 2020  or a name..     
-00005970: 2020 202d 2060 6072 6f62 6f74 2e65 7473     - ``robot.ets
-00005980: 2873 7461 7274 3d6c 312c 2065 6e64 3d6c  (start=l1, end=l
-00005990: 3229 6060 2069 7320 616e 2045 5453 2072  2)`` is an ETS r
-000059a0: 6570 7265 7365 6e74 696e 6720 7468 6520  epresenting the 
-000059b0: 6b69 6e65 6d61 7469 6373 0a20 2020 2020  kinematics.     
-000059c0: 2020 2020 2066 726f 6d20 6c69 6e6b 2060       from link `
-000059d0: 606c 3160 6020 746f 206c 696e 6b20 6060  `l1`` to link ``
-000059e0: 6c32 6060 2e0a 0a20 2020 2020 2020 202e  l2``...        .
-000059f0: 2e20 7275 6e62 6c6f 636b 3a3a 2070 7963  . runblock:: pyc
-00005a00: 6f6e 0a20 2020 2020 2020 2020 2020 203e  on.            >
-00005a10: 3e3e 2069 6d70 6f72 7420 726f 626f 7469  >> import roboti
-00005a20: 6373 746f 6f6c 626f 7820 6173 2072 7462  cstoolbox as rtb
-00005a30: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00005a40: 2070 616e 6461 203d 2072 7462 2e6d 6f64   panda = rtb.mod
-00005a50: 656c 732e 4554 532e 5061 6e64 6128 290a  els.ETS.Panda().
-00005a60: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00005a70: 7061 6e64 612e 6574 7328 290a 2020 2020  panda.ets().    
-00005a80: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
-00005a90: 2023 2065 7473 2074 6f20 7374 616e 6420   # ets to stand 
-00005aa0: 616e 6420 656e 6420 696e 6361 7365 206f  and end incase o
-00005ab0: 6620 6772 6970 7065 7273 0a20 2020 2020  f grippers.     
-00005ac0: 2020 2065 7473 5f69 6e69 7420 3d20 4e6f     ets_init = No
-00005ad0: 6e65 0a20 2020 2020 2020 2065 7473 5f65  ne.        ets_e
-00005ae0: 6e64 203d 204e 6f6e 650a 0a20 2020 2020  nd = None..     
-00005af0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00005b00: 2873 7461 7274 2c20 4772 6970 7065 7229  (start, Gripper)
-00005b10: 3a0a 2020 2020 2020 2020 2020 2020 6574  :.            et
-00005b20: 735f 696e 6974 203d 2073 656c 662e 5f67  s_init = self._g
-00005b30: 7269 7070 6572 5f65 7473 2873 7461 7274  ripper_ets(start
-00005b40: 292e 696e 7628 290a 2020 2020 2020 2020  ).inv().        
-00005b50: 2020 2020 6c69 6e6b 203d 2073 7461 7274      link = start
-00005b60: 2e6c 696e 6b73 5b30 5d2e 7061 7265 6e74  .links[0].parent
-00005b70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00005b80: 6c69 6e6b 2069 7320 4e6f 6e65 3a20 2023  link is None:  #
-00005b90: 2070 7261 676d 613a 206e 6f63 6f76 6572   pragma: nocover
-00005ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005bb0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00005bc0: 7228 2249 6e76 616c 6964 2072 6f62 6f74  r("Invalid robot
-00005bd0: 206c 696e 6b20 636f 6e66 6967 7572 6174   link configurat
-00005be0: 696f 6e22 290a 2020 2020 2020 2020 656c  ion").        el
-00005bf0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00005c00: 6c69 6e6b 203d 2073 656c 662e 5f67 6574  link = self._get
-00005c10: 6c69 6e6b 2873 7461 7274 2c20 7365 6c66  link(start, self
-00005c20: 2e62 6173 655f 6c69 6e6b 290a 0a20 2020  .base_link)..   
-00005c30: 2020 2020 2069 6620 656e 6420 6973 204e       if end is N
-00005c40: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00005c50: 2069 6620 6c65 6e28 7365 6c66 2e67 7269   if len(self.gri
-00005c60: 7070 6572 7329 203e 2031 3a0a 2020 2020  ppers) > 1:.    
-00005c70: 2020 2020 2020 2020 2020 2020 656e 645f              end_
-00005c80: 6c69 6e6b 203d 2073 656c 662e 6772 6970  link = self.grip
-00005c90: 7065 7273 5b30 5d2e 6c69 6e6b 735b 305d  pers[0].links[0]
-00005ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005cb0: 2065 7473 5f65 6e64 203d 2073 656c 662e   ets_end = self.
-00005cc0: 5f67 7269 7070 6572 5f65 7473 2873 656c  _gripper_ets(sel
-00005cd0: 662e 6772 6970 7065 7273 5b30 5d29 0a20  f.grippers[0]). 
-00005ce0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00005cf0: 7269 6e74 2822 6d75 6c74 6970 6c65 2067  rint("multiple g
-00005d00: 7269 7070 6572 7320 7072 6573 656e 742c  rippers present,
-00005d10: 2061 6d62 6967 756f 7573 2c20 7573 696e   ambiguous, usin
-00005d20: 6720 7365 6c66 2e67 7269 7070 6572 735b  g self.grippers[
-00005d30: 305d 2229 0a20 2020 2020 2020 2020 2020  0]").           
-00005d40: 2065 6c69 6620 6c65 6e28 7365 6c66 2e67   elif len(self.g
-00005d50: 7269 7070 6572 7329 203d 3d20 313a 0a20  rippers) == 1:. 
-00005d60: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00005d70: 6e64 5f6c 696e 6b20 3d20 7365 6c66 2e67  nd_link = self.g
-00005d80: 7269 7070 6572 735b 305d 2e6c 696e 6b73  rippers[0].links
-00005d90: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-00005da0: 2020 2020 6574 735f 656e 6420 3d20 7365      ets_end = se
-00005db0: 6c66 2e5f 6772 6970 7065 725f 6574 7328  lf._gripper_ets(
-00005dc0: 7365 6c66 2e67 7269 7070 6572 735b 305d  self.grippers[0]
-00005dd0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00005de0: 6966 206c 656e 2873 656c 662e 6772 6970  if len(self.grip
-00005df0: 7065 7273 2920 3e20 313a 0a20 2020 2020  pers) > 1:.     
-00005e00: 2020 2020 2020 2020 2020 2065 6e64 5f6c             end_l
-00005e10: 696e 6b20 3d20 7365 6c66 2e5f 6765 746c  ink = self._getl
-00005e20: 696e 6b28 656e 642c 2073 656c 662e 6565  ink(end, self.ee
-00005e30: 5f6c 696e 6b73 5b30 5d29 0a20 2020 2020  _links[0]).     
-00005e40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00005e50: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00005e60: 2020 2020 2020 226d 756c 7469 706c 6520        "multiple 
-00005e70: 656e 642d 6566 6665 6374 6f72 7320 7072  end-effectors pr
-00005e80: 6573 656e 742c 2061 6d62 6967 756f 7573  esent, ambiguous
-00005e90: 2c20 7573 696e 6720 7365 6c66 2e65 655f  , using self.ee_
-00005ea0: 6c69 6e6b 735b 305d 220a 2020 2020 2020  links[0]".      
-00005eb0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00005ec0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00005ed0: 2020 2020 2020 2020 2020 2020 2020 656e                en
-00005ee0: 645f 6c69 6e6b 203d 2073 656c 662e 5f67  d_link = self._g
-00005ef0: 6574 6c69 6e6b 2865 6e64 2c20 7365 6c66  etlink(end, self
-00005f00: 2e65 655f 6c69 6e6b 735b 305d 290a 2020  .ee_links[0]).  
-00005f10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00005f20: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00005f30: 7461 6e63 6528 656e 642c 2047 7269 7070  tance(end, Gripp
-00005f40: 6572 293a 0a20 2020 2020 2020 2020 2020  er):.           
-00005f50: 2020 2020 2065 7473 5f65 6e64 203d 2073       ets_end = s
-00005f60: 656c 662e 5f67 7269 7070 6572 5f65 7473  elf._gripper_ets
-00005f70: 2865 6e64 290a 2020 2020 2020 2020 2020  (end).          
-00005f80: 2020 2020 2020 656e 645f 6c69 6e6b 203d        end_link =
-00005f90: 2065 6e64 2e6c 696e 6b73 5b30 5d2e 7061   end.links[0].pa
-00005fa0: 7265 6e74 2020 2320 7479 7065 3a20 6967  rent  # type: ig
-00005fb0: 6e6f 7265 0a20 2020 2020 2020 2020 2020  nore.           
-00005fc0: 2020 2020 2069 6620 656e 645f 6c69 6e6b       if end_link
-00005fd0: 2069 7320 4e6f 6e65 3a20 2023 2070 7261   is None:  # pra
-00005fe0: 676d 613a 206e 6f63 6f76 6572 0a20 2020  gma: nocover.   
-00005ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006000: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00006010: 7228 2249 6e76 616c 6964 2072 6f62 6f74  r("Invalid robot
-00006020: 206c 696e 6b20 636f 6e66 6967 7572 6174   link configurat
-00006030: 696f 6e22 290a 2020 2020 2020 2020 2020  ion").          
-00006040: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00006050: 2020 2020 2020 2020 656e 645f 6c69 6e6b          end_link
-00006060: 203d 2073 656c 662e 5f67 6574 6c69 6e6b   = self._getlink
-00006070: 2865 6e64 2c20 7365 6c66 2e65 655f 6c69  (end, self.ee_li
-00006080: 6e6b 735b 305d 290a 0a20 2020 2020 2020  nks[0])..       
-00006090: 2065 7870 6c6f 7265 6420 3d20 7365 7428   explored = set(
-000060a0: 290a 0a20 2020 2020 2020 2069 6620 6c69  )..        if li
-000060b0: 6e6b 2069 7320 656e 645f 6c69 6e6b 3a0a  nk is end_link:.
-000060c0: 2020 2020 2020 2020 2020 2020 6574 7320              ets 
-000060d0: 3d20 6c69 6e6b 2e65 7473 0a20 2020 2020  = link.ets.     
-000060e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000060f0: 2020 2020 2065 7473 203d 2073 656c 662e       ets = self.
-00006100: 5f66 696e 645f 6574 7328 6c69 6e6b 2c20  _find_ets(link, 
-00006110: 656e 645f 6c69 6e6b 2c20 6578 706c 6f72  end_link, explor
-00006120: 6564 2c20 7061 7468 3d4e 6f6e 6529 0a0a  ed, path=None)..
-00006130: 2020 2020 2020 2020 6966 2065 7473 2069          if ets i
-00006140: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00006150: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00006160: 7272 6f72 2822 436f 756c 6420 6e6f 7420  rror("Could not 
-00006170: 6669 6e64 2074 6865 2072 6571 7565 7374  find the request
-00006180: 6564 2045 5453 2069 6e20 7468 6973 2072  ed ETS in this r
-00006190: 6f62 6f74 2229 0a0a 2020 2020 2020 2020  obot")..        
-000061a0: 6966 2065 7473 5f69 6e69 7420 6973 206e  if ets_init is n
-000061b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000061c0: 2020 2020 2065 7473 203d 2065 7473 5f69       ets = ets_i
-000061d0: 6e69 7420 2a20 6574 730a 0a20 2020 2020  nit * ets..     
-000061e0: 2020 2069 6620 6574 735f 656e 6420 6973     if ets_end is
-000061f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00006200: 2020 2020 2020 2065 7473 203d 2065 7473         ets = ets
-00006210: 202a 2065 7473 5f65 6e64 0a0a 2020 2020   * ets_end..    
-00006220: 2020 2020 7265 7475 726e 2065 7473 0a0a      return ets..
-00006230: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-00006240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a 0a20  ----------- #.. 
-00006280: 2020 2064 6566 2073 6567 6d65 6e74 7328     def segments(
-00006290: 7365 6c66 2920 2d3e 204c 6973 745b 4c69  self) -> List[Li
-000062a0: 7374 5b55 6e69 6f6e 5b4c 696e 6b2c 204e  st[Union[Link, N
-000062b0: 6f6e 655d 5d5d 3a0a 2020 2020 2020 2020  one]]]:.        
-000062c0: 2222 220a 2020 2020 2020 2020 5365 676d  """.        Segm
-000062d0: 656e 7473 206f 6620 6272 616e 6368 6564  ents of branched
-000062e0: 2072 6f62 6f74 0a0a 2020 2020 2020 2020   robot..        
-000062f0: 3a72 6574 7572 6e3a 2053 6567 6d65 6e74  :return: Segment
-00006300: 206c 6973 740a 2020 2020 2020 2020 3a72   list.        :r
-00006310: 7479 7065 3a20 6c69 7374 206f 6620 6c69  type: list of li
-00006320: 7374 7320 6f66 204c 696e 6b0a 0a20 2020  sts of Link..   
-00006330: 2020 2020 2046 6f72 2061 2073 696e 676c       For a singl
-00006340: 652d 6368 6169 6e20 726f 626f 7420 7769  e-chain robot wi
-00006350: 7468 2073 7472 7563 7475 7265 3a3a 0a0a  th structure::..
-00006360: 2020 2020 2020 2020 2020 2020 4c31 202d              L1 -
-00006370: 204c 3220 2d20 4c33 0a0a 2020 2020 2020   L2 - L3..      
-00006380: 2020 7468 6520 7265 7475 726e 2069 7320    the return is 
-00006390: 6060 5b5b 4e6f 6e65 2c20 4c31 2c20 4c32  ``[[None, L1, L2
-000063a0: 2c20 4c33 5d5d 6060 0a0a 2020 2020 2020  , L3]]``..      
-000063b0: 2020 466f 7220 6120 726f 626f 7420 7769    For a robot wi
-000063c0: 7468 2073 7472 7563 7475 7265 3a3a 0a0a  th structure::..
-000063d0: 2020 2020 2020 2020 2020 2020 4c31 202d              L1 -
-000063e0: 204c 3220 2b2d 2020 4c33 202d 204c 340a   L2 +-  L3 - L4.
-000063f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006400: 2020 2020 2b2d 204c 3520 2d20 4c36 0a0a      +- L5 - L6..
-00006410: 2020 2020 2020 2020 7468 6520 7265 7475          the retu
-00006420: 726e 2069 7320 6060 5b5b 4e6f 6e65 2c20  rn is ``[[None, 
-00006430: 4c31 2c20 4c32 5d2c 205b 4c32 2c20 4c33  L1, L2], [L2, L3
-00006440: 2c20 4c34 5d2c 205b 4c32 2c20 4c35 2c20  , L4], [L2, L5, 
-00006450: 4c36 5d5d 6060 0a0a 2020 2020 2020 2020  L6]]``..        
-00006460: 2e2e 206e 6f74 653a 3a0a 2020 2020 2020  .. note::.      
-00006470: 2020 2020 2020 2d20 7468 6520 6c65 6e67        - the leng
-00006480: 7468 206f 6620 7468 6520 6c69 7374 2069  th of the list i
-00006490: 7320 7468 6520 6e75 6d62 6572 206f 6620  s the number of 
-000064a0: 7365 676d 656e 7473 2069 6e20 7468 6520  segments in the 
-000064b0: 726f 626f 740a 2020 2020 2020 2020 2020  robot.          
-000064c0: 2020 2d20 7468 6520 6669 7273 7420 7365    - the first se
-000064d0: 676d 656e 7420 616c 7761 7973 2073 7461  gment always sta
-000064e0: 7274 7320 7769 7468 2060 604e 6f6e 6560  rts with ``None`
-000064f0: 6020 7768 6963 6820 7265 7072 6573 656e  ` which represen
-00006500: 7473 0a20 2020 2020 2020 2020 2020 2020  ts.             
-00006510: 2074 6865 2062 6173 6520 7472 616e 7366   the base transf
-00006520: 6f72 6d20 2873 696e 6365 2074 6865 7265  orm (since there
-00006530: 2069 7320 6e6f 2062 6173 6520 6c69 6e6b   is no base link
-00006540: 290a 2020 2020 2020 2020 2020 2020 2d20  ).            - 
-00006550: 7468 6520 6c61 7374 206c 696e 6b20 6f66  the last link of
-00006560: 206f 6e65 2073 6567 6d65 6e74 2069 7320   one segment is 
-00006570: 616c 736f 2074 6865 2066 6972 7374 206c  also the first l
-00006580: 696e 6b20 6f66 2073 7562 7365 7175 656e  ink of subsequen
-00006590: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-000065a0: 7365 676d 656e 7473 0a20 2020 2020 2020  segments.       
-000065b0: 2022 2222 0a0a 2020 2020 2020 2020 6465   """..        de
-000065c0: 6620 7265 6375 7273 6528 6c69 6e6b 3a20  f recurse(link: 
-000065d0: 4c69 6e6b 293a 0a0a 2020 2020 2020 2020  Link):..        
-000065e0: 2020 2020 7365 6773 203d 205b 6c69 6e6b      segs = [link
-000065f0: 2e70 6172 656e 745d 0a20 2020 2020 2020  .parent].       
-00006600: 2020 2020 2077 6869 6c65 2054 7275 653a       while True:
-00006610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006620: 2073 6567 732e 6170 7065 6e64 286c 696e   segs.append(lin
-00006630: 6b29 0a20 2020 2020 2020 2020 2020 2020  k).             
-00006640: 2020 2069 6620 6c69 6e6b 2e6e 6368 696c     if link.nchil
-00006650: 6472 656e 203d 3d20 303a 0a20 2020 2020  dren == 0:.     
-00006660: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00006670: 6574 7572 6e20 5b73 6567 735d 0a20 2020  eturn [segs].   
-00006680: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00006690: 6620 6c69 6e6b 2e6e 6368 696c 6472 656e  f link.nchildren
-000066a0: 203d 3d20 313a 0a20 2020 2020 2020 2020   == 1:.         
-000066b0: 2020 2020 2020 2020 2020 206c 696e 6b20             link 
-000066c0: 3d20 6c69 6e6b 2e63 6869 6c64 7265 6e5b  = link.children[
-000066d0: 305d 2020 2320 7479 7065 3a20 6967 6e6f  0]  # type: igno
-000066e0: 7265 0a20 2020 2020 2020 2020 2020 2020  re.             
-000066f0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00006700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006710: 656c 6966 206c 696e 6b2e 6e63 6869 6c64  elif link.nchild
-00006720: 7265 6e20 3e20 313a 0a20 2020 2020 2020  ren > 1:.       
-00006730: 2020 2020 2020 2020 2020 2020 2073 6567               seg
-00006740: 7320 3d20 5b73 6567 735d 0a0a 2020 2020  s = [segs]..    
-00006750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006760: 666f 7220 6368 696c 6420 696e 206c 696e  for child in lin
-00006770: 6b2e 6368 696c 6472 656e 3a20 2023 2074  k.children:  # t
-00006780: 7970 653a 2069 676e 6f72 650a 2020 2020  ype: ignore.    
-00006790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000067a0: 2020 2020 7365 6773 2e65 7874 656e 6428      segs.extend(
-000067b0: 7265 6375 7273 6528 6368 696c 6429 290a  recurse(child)).
-000067c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000067d0: 2020 2020 2072 6574 7572 6e20 7365 6773       return segs
-000067e0: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000067f0: 2072 6563 7572 7365 2873 656c 662e 6c69   recurse(self.li
-00006800: 6e6b 735b 305d 2920 2023 2074 7970 653a  nks[0])  # type:
-00006810: 2069 676e 6f72 650a 0a20 2020 2023 202d   ignore..    # -
-00006820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006860: 2d2d 2d2d 2023 0a0a 2020 2020 6465 6620  ---- #..    def 
-00006870: 666b 696e 655f 616c 6c28 7365 6c66 2c20  fkine_all(self, 
-00006880: 7129 3a0a 2020 2020 2020 2020 2222 220a  q):.        """.
-00006890: 2020 2020 2020 2020 436f 6d70 7574 6520          Compute 
-000068a0: 7468 6520 706f 7365 206f 6620 6576 6572  the pose of ever
-000068b0: 7920 6c69 6e6b 2066 7261 6d65 0a0a 2020  y link frame..  
-000068c0: 2020 2020 2020 3a70 6172 616d 2071 3a20        :param q: 
-000068d0: 5468 6520 6a6f 696e 7420 636f 6e66 6967  The joint config
-000068e0: 7572 6174 696f 6e0a 2020 2020 2020 2020  uration.        
-000068f0: 3a74 7970 6520 713a 2020 6461 7272 6179  :type q:  darray
-00006900: 286e 290a 2020 2020 2020 2020 3a72 6574  (n).        :ret
-00006910: 7572 6e3a 2050 6f73 6520 6f66 2061 6c6c  urn: Pose of all
-00006920: 206c 696e 6b73 0a20 2020 2020 2020 203a   links.        :
-00006930: 7274 7970 653a 2053 4533 2069 6e73 7461  rtype: SE3 insta
-00006940: 6e63 650a 0a20 2020 2020 2020 2060 6054  nce..        ``T
-00006950: 203d 2072 6f62 6f74 2e66 6b69 6e65 5f61   = robot.fkine_a
-00006960: 6c6c 2871 2960 6020 6973 2020 616e 2053  ll(q)`` is  an S
-00006970: 4533 2069 6e73 7461 6e63 6520 7769 7468  E3 instance with
-00006980: 2060 6072 6f62 6f74 2e6e 6c69 6e6b 7320   ``robot.nlinks 
-00006990: 2b0a 2020 2020 2020 2020 3160 6020 7661  +.        1`` va
-000069a0: 6c75 6573 3a0a 0a20 2020 2020 2020 202d  lues:..        -
-000069b0: 2060 6054 5b30 5d60 6020 6973 2074 6865   ``T[0]`` is the
-000069c0: 2062 6173 6520 7472 616e 7366 6f72 6d0a   base transform.
-000069d0: 2020 2020 2020 2020 2d20 6060 545b 695d          - ``T[i]
-000069e0: 6060 2069 7320 7468 6520 706f 7365 206f  `` is the pose o
-000069f0: 6620 6c69 6e6b 2077 686f 7365 2060 606e  f link whose ``n
-00006a00: 756d 6265 7260 6020 6973 2060 6069 6060  umber`` is ``i``
-00006a10: 0a0a 2020 2020 2020 2020 3a72 6566 6572  ..        :refer
-00006a20: 656e 6365 733a 0a20 2020 2020 2020 2020  ences:.         
-00006a30: 2020 202d 204b 696e 656d 6174 6963 2044     - Kinematic D
-00006a40: 6572 6976 6174 6976 6573 2075 7369 6e67  erivatives using
-00006a50: 2074 6865 2045 6c65 6d65 6e74 6172 7920   the Elementary 
-00006a60: 5472 616e 7366 6f72 6d0a 2020 2020 2020  Transform.      
-00006a70: 2020 2020 2020 2020 5365 7175 656e 6365          Sequence
-00006a80: 2c20 4a2e 2048 6176 696c 616e 6420 616e  , J. Haviland an
-00006a90: 6420 502e 2043 6f72 6b65 0a20 2020 2020  d P. Corke.     
-00006aa0: 2020 2022 2222 0a20 2020 2020 2020 2071     """.        q
-00006ab0: 203d 2067 6574 7665 6374 6f72 2871 290a   = getvector(q).
-00006ac0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00006ad0: 7374 616e 6365 2873 656c 662c 2045 526f  stance(self, ERo
-00006ae0: 626f 7429 3a0a 2020 2020 2020 2020 2020  bot):.          
-00006af0: 2020 5462 6173 6520 3d20 5345 3328 7365    Tbase = SE3(se
-00006b00: 6c66 2e62 6173 6529 2020 2320 6164 6420  lf.base)  # add 
-00006b10: 6261 7365 2c20 616c 736f 2073 6574 7320  base, also sets 
-00006b20: 7468 6520 7479 7065 0a20 2020 2020 2020  the type.       
-00006b30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00006b40: 2020 2054 6261 7365 203d 2053 4532 2873     Tbase = SE2(s
-00006b50: 656c 662e 6261 7365 2920 2023 2061 6464  elf.base)  # add
-00006b60: 2062 6173 652c 2061 6c73 6f20 7365 7473   base, also sets
-00006b70: 2074 6865 2074 7970 650a 0a20 2020 2020   the type..     
-00006b80: 2020 206c 696e 6b66 7261 6d65 7320 3d20     linkframes = 
-00006b90: 5462 6173 652e 5f5f 636c 6173 735f 5f2e  Tbase.__class__.
-00006ba0: 416c 6c6f 6328 7365 6c66 2e6e 6c69 6e6b  Alloc(self.nlink
-00006bb0: 7320 2b20 3129 0a20 2020 2020 2020 206c  s + 1).        l
-00006bc0: 696e 6b66 7261 6d65 735b 305d 203d 2054  inkframes[0] = T
-00006bd0: 6261 7365 0a0a 2020 2020 2020 2020 6465  base..        de
-00006be0: 6620 7265 6375 7273 6528 5461 6c6c 2c20  f recurse(Tall, 
-00006bf0: 5470 6172 656e 742c 2071 2c20 6c69 6e6b  Tparent, q, link
-00006c00: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
-00006c10: 2069 6620 6a6f 696e 743f 3f0a 2020 2020   if joint??.    
-00006c20: 2020 2020 2020 2020 5420 3d20 5470 6172          T = Tpar
-00006c30: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
-00006c40: 7768 696c 6520 5472 7565 3a0a 2020 2020  while True:.    
-00006c50: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00006c60: 7369 6e73 7461 6e63 6528 7365 6c66 2c20  sinstance(self, 
-00006c70: 4552 6f62 6f74 293a 0a20 2020 2020 2020  ERobot):.       
-00006c80: 2020 2020 2020 2020 2020 2020 2054 202a               T *
-00006c90: 3d20 5345 3328 6c69 6e6b 2e41 2871 5b6c  = SE3(link.A(q[l
-00006ca0: 696e 6b2e 6a69 6e64 6578 5d29 290a 2020  ink.jindex])).  
-00006cb0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00006cc0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00006cd0: 2020 2020 2020 2020 5420 2a3d 2053 4532          T *= SE2
-00006ce0: 286c 696e 6b2e 4128 715b 6c69 6e6b 2e6a  (link.A(q[link.j
-00006cf0: 696e 6465 785d 2929 0a0a 2020 2020 2020  index]))..      
-00006d00: 2020 2020 2020 2020 2020 5461 6c6c 5b6c            Tall[l
-00006d10: 696e 6b2e 6e75 6d62 6572 5d20 3d20 540a  ink.number] = T.
-00006d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006d30: 2069 6620 6c69 6e6b 2e6e 6368 696c 6472   if link.nchildr
-00006d40: 656e 203d 3d20 303a 0a20 2020 2020 2020  en == 0:.       
-00006d50: 2020 2020 2020 2020 2020 2020 2023 206e               # n
-00006d60: 6f20 6368 696c 6472 656e 0a20 2020 2020  o children.     
-00006d70: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00006d80: 6574 7572 6e0a 2020 2020 2020 2020 2020  eturn.          
-00006d90: 2020 2020 2020 656c 6966 206c 696e 6b2e        elif link.
-00006da0: 6e63 6869 6c64 7265 6e20 3d3d 2031 3a0a  nchildren == 1:.
-00006db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006dc0: 2020 2020 2320 6f6e 6520 6368 696c 640a      # one child.
-00006dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006de0: 2020 2020 6966 206c 696e 6b20 696e 2073      if link in s
-00006df0: 656c 662e 6565 5f6c 696e 6b73 3a0a 2020  elf.ee_links:.  
-00006e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e10: 2020 2020 2020 2320 7468 6973 206c 696e        # this lin
-00006e20: 6b20 6973 2061 6e20 656e 642d 6566 6665  k is an end-effe
-00006e30: 6374 6f72 2c20 676f 206e 6f20 6675 7274  ctor, go no furt
-00006e40: 6865 720a 2020 2020 2020 2020 2020 2020  her.            
-00006e50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006e60: 726e 0a20 2020 2020 2020 2020 2020 2020  rn.             
-00006e70: 2020 2020 2020 206c 696e 6b20 3d20 6c69         link = li
-00006e80: 6e6b 2e63 6869 6c64 7265 6e5b 305d 0a20  nk.children[0]. 
-00006e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ea0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00006eb0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00006ec0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00006ed0: 2020 2020 2020 2320 6d75 6c74 6970 6c65        # multiple
-00006ee0: 2063 6869 6c64 7265 6e0a 2020 2020 2020   children.      
-00006ef0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00006f00: 7220 6368 696c 6420 696e 206c 696e 6b2e  r child in link.
-00006f10: 6368 696c 6472 656e 3a0a 2020 2020 2020  children:.      
-00006f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f30: 2020 7265 6375 7273 6528 5461 6c6c 2c20    recurse(Tall, 
-00006f40: 542c 2071 2c20 6368 696c 6429 0a20 2020  T, q, child).   
-00006f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f60: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
-00006f70: 2072 6563 7572 7365 286c 696e 6b66 7261   recurse(linkfra
-00006f80: 6d65 732c 2054 6261 7365 2c20 712c 2073  mes, Tbase, q, s
-00006f90: 656c 662e 6c69 6e6b 735b 305d 290a 0a20  elf.links[0]).. 
-00006fa0: 2020 2020 2020 2072 6574 7572 6e20 6c69         return li
-00006fb0: 6e6b 6672 616d 6573 0a0a 2020 2020 2320  nkframes..    # 
-00006fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007000: 2d2d 2d2d 2d20 230a 0a20 2020 2064 6566  ----- #..    def
-00007010: 2073 686f 7767 7261 7068 2873 656c 662c   showgraph(self,
-00007020: 202a 2a6b 7761 7267 7329 3a0a 2020 2020   **kwargs):.    
-00007030: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00007040: 4469 7370 6c61 7920 6120 6c69 6e6b 2074  Display a link t
-00007050: 7261 6e73 666f 726d 2067 7261 7068 2069  ransform graph i
-00007060: 6e20 6272 6f77 7365 720a 2020 2020 2020  n browser.      
-00007070: 2020 3a70 6172 616d 2065 7473 626f 783a    :param etsbox:
-00007080: 2050 7574 2074 6865 206c 696e 6b20 4554   Put the link ET
-00007090: 5320 696e 2061 2062 6f78 2c20 6f74 6865  S in a box, othe
-000070a0: 7277 6973 6520 616e 2065 6467 6520 6c61  rwise an edge la
-000070b0: 6265 6c0a 2020 2020 2020 2020 3a74 7970  bel.        :typ
-000070c0: 6520 6574 7362 6f78 3a20 626f 6f6c 0a20  e etsbox: bool. 
-000070d0: 2020 2020 2020 203a 7061 7261 6d20 6a74         :param jt
-000070e0: 7970 653a 2041 7272 6f77 6865 6164 2074  ype: Arrowhead t
-000070f0: 6f20 6e6f 6465 2069 6e64 6963 6174 6573  o node indicates
-00007100: 2072 6576 6f6c 7574 6520 6f72 2070 7269   revolute or pri
-00007110: 736d 6174 6963 2074 7970 650a 2020 2020  smatic type.    
-00007120: 2020 2020 3a74 7970 6520 6a74 7970 653a      :type jtype:
-00007130: 2062 6f6f 6c0a 2020 2020 2020 2020 3a70   bool.        :p
-00007140: 6172 616d 2073 7461 7469 633a 2053 686f  aram static: Sho
-00007150: 7720 7374 6174 6963 206a 6f69 6e74 7320  w static joints 
-00007160: 696e 2062 6c75 6520 616e 6420 626f 6c64  in blue and bold
-00007170: 0a20 2020 2020 2020 203a 7479 7065 2073  .        :type s
-00007180: 7461 7469 633a 2062 6f6f 6c0a 2020 2020  tatic: bool.    
-00007190: 2020 2020 6060 726f 626f 742e 7368 6f77      ``robot.show
-000071a0: 6772 6170 6828 2960 6020 6469 7370 6c61  graph()`` displa
-000071b0: 7973 2061 2067 7261 7068 206f 6620 7468  ys a graph of th
-000071c0: 6520 726f 626f 7427 7320 6c69 6e6b 2066  e robot's link f
-000071d0: 7261 6d65 730a 2020 2020 2020 2020 616e  rames.        an
-000071e0: 6420 7468 6520 4554 5320 6265 7477 6565  d the ETS betwee
-000071f0: 6e20 7468 656d 2e20 2049 7420 7573 6573  n them.  It uses
-00007200: 2047 7261 7068 5669 7a20 646f 742e 0a20   GraphViz dot.. 
-00007210: 2020 2020 2020 2054 6865 206e 6f64 6573         The nodes
-00007220: 2061 7265 3a0a 2020 2020 2020 2020 2020   are:.          
-00007230: 2020 2d20 4261 7365 2069 7320 7368 6f77    - Base is show
-00007240: 6e20 6173 2061 2067 7265 7920 7371 7561  n as a grey squa
-00007250: 7265 2e20 2054 6869 7320 6973 2074 6865  re.  This is the
-00007260: 2077 6f72 6c64 2066 7261 6d65 206f 7269   world frame ori
-00007270: 6769 6e2c 0a20 2020 2020 2020 2020 2020  gin,.           
-00007280: 2020 2062 7574 2063 616e 2062 6520 6368     but can be ch
-00007290: 616e 6765 6420 7573 696e 6720 7468 6520  anged using the 
-000072a0: 6060 6261 7365 6060 2061 7474 7269 6275  ``base`` attribu
-000072b0: 7465 206f 6620 7468 6520 726f 626f 742e  te of the robot.
-000072c0: 0a20 2020 2020 2020 2020 2020 202d 204c  .            - L
-000072d0: 696e 6b20 6672 616d 6573 2061 7265 2069  ink frames are i
-000072e0: 6e64 6963 6174 6564 2062 7920 6369 7263  ndicated by circ
-000072f0: 6c65 730a 2020 2020 2020 2020 2020 2020  les.            
-00007300: 2d20 4554 5320 7472 616e 7366 6f72 6d73  - ETS transforms
-00007310: 2061 7265 2069 6e64 6963 6174 6564 2062   are indicated b
-00007320: 7920 726f 756e 6465 6420 626f 7865 730a  y rounded boxes.
-00007330: 2020 2020 2020 2020 5468 6520 6564 6765          The edge
-00007340: 7320 6172 653a 0a20 2020 2020 2020 2020  s are:.         
-00007350: 2020 202d 2061 6e20 6172 726f 7720 6966     - an arrow if
-00007360: 2060 6a74 7970 6560 2069 7320 4661 6c73   `jtype` is Fals
-00007370: 6520 6f72 2074 6865 206a 6f69 6e74 2069  e or the joint i
-00007380: 7320 6669 7865 640a 2020 2020 2020 2020  s fixed.        
-00007390: 2020 2020 2d20 616e 2061 7272 6f77 2077      - an arrow w
-000073a0: 6974 6820 6120 726f 756e 6420 6865 6164  ith a round head
-000073b0: 2069 6620 606a 7479 7065 6020 6973 2054   if `jtype` is T
-000073c0: 7275 6520 616e 6420 7468 6520 6a6f 696e  rue and the join
-000073d0: 7420 6973 0a20 2020 2020 2020 2020 2020  t is.           
-000073e0: 2020 2072 6576 6f6c 7574 650a 2020 2020     revolute.    
-000073f0: 2020 2020 2020 2020 2d20 616e 2061 7272          - an arr
-00007400: 6f77 2077 6974 6820 6120 626f 7820 6865  ow with a box he
-00007410: 6164 2069 6620 606a 7479 7065 6020 6973  ad if `jtype` is
-00007420: 2054 7275 6520 616e 6420 7468 6520 6a6f   True and the jo
-00007430: 696e 7420 6973 0a20 2020 2020 2020 2020  int is.         
-00007440: 2020 2020 2070 7269 736d 6174 6963 0a20       prismatic. 
-00007450: 2020 2020 2020 2045 6467 6520 6c61 6265         Edge labe
-00007460: 6c73 206f 7220 6e6f 6465 7320 696e 2062  ls or nodes in b
-00007470: 6c75 6520 6861 7665 2061 2066 6978 6564  lue have a fixed
-00007480: 2074 7261 6e73 666f 726d 6174 696f 6e20   transformation 
-00007490: 746f 2074 6865 0a20 2020 2020 2020 2070  to the.        p
-000074a0: 7265 6365 6469 6e67 206c 696e 6b2e 0a20  receding link.. 
-000074b0: 2020 2020 2020 2045 7861 6d70 6c65 3a3a         Example::
-000074c0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000074d0: 2069 6d70 6f72 7420 726f 626f 7469 6373   import robotics
-000074e0: 746f 6f6c 626f 7820 6173 2072 7462 0a20  toolbox as rtb. 
-000074f0: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-00007500: 616e 6461 203d 2072 7462 2e6d 6f64 656c  anda = rtb.model
-00007510: 732e 5552 4446 2e50 616e 6461 2829 0a20  s.URDF.Panda(). 
-00007520: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
-00007530: 616e 6461 2e73 686f 7767 7261 7068 2829  anda.showgraph()
-00007540: 0a20 2020 2020 2020 202e 2e20 696d 6167  .        .. imag
-00007550: 653a 3a20 2e2e 2f66 6967 732f 7061 6e64  e:: ../figs/pand
-00007560: 612d 6772 6170 682e 7376 670a 2020 2020  a-graph.svg.    
-00007570: 2020 2020 2020 2020 3a77 6964 7468 3a20          :width: 
-00007580: 3630 300a 2020 2020 2020 2020 3a73 6565  600.        :see
-00007590: 616c 736f 3a20 3a66 756e 633a 6064 6f74  also: :func:`dot
-000075a0: 6669 6c65 600a 2020 2020 2020 2020 2222  file`.        ""
-000075b0: 220a 0a20 2020 2020 2020 2023 2063 7265  "..        # cre
-000075c0: 6174 6520 7468 6520 7465 6d70 6f72 6172  ate the temporar
-000075d0: 7920 646f 7466 696c 650a 2020 2020 2020  y dotfile.      
-000075e0: 2020 646f 7466 696c 6520 3d20 7465 6d70    dotfile = temp
-000075f0: 6669 6c65 2e54 656d 706f 7261 7279 4669  file.TemporaryFi
-00007600: 6c65 286d 6f64 653d 2277 2229 0a20 2020  le(mode="w").   
-00007610: 2020 2020 2073 656c 662e 646f 7466 696c       self.dotfil
-00007620: 6528 646f 7466 696c 652c 202a 2a6b 7761  e(dotfile, **kwa
-00007630: 7267 7329 0a0a 2020 2020 2020 2020 2320  rgs)..        # 
-00007640: 7265 7769 6e64 2074 6865 2064 6f74 2066  rewind the dot f
-00007650: 696c 652c 2063 7265 6174 6520 5044 4620  ile, create PDF 
-00007660: 6669 6c65 2069 6e20 7468 6520 6669 6c65  file in the file
-00007670: 7379 7374 656d 2c20 7275 6e20 646f 740a  system, run dot.
-00007680: 2020 2020 2020 2020 646f 7466 696c 652e          dotfile.
-00007690: 7365 656b 2830 290a 2020 2020 2020 2020  seek(0).        
-000076a0: 7064 6666 696c 6520 3d20 7465 6d70 6669  pdffile = tempfi
-000076b0: 6c65 2e4e 616d 6564 5465 6d70 6f72 6172  le.NamedTemporar
-000076c0: 7946 696c 6528 7375 6666 6978 3d22 2e70  yFile(suffix=".p
-000076d0: 6466 222c 2064 656c 6574 653d 4661 6c73  df", delete=Fals
-000076e0: 6529 0a20 2020 2020 2020 2073 7562 7072  e).        subpr
-000076f0: 6f63 6573 732e 7275 6e28 2264 6f74 202d  ocess.run("dot -
-00007700: 5470 6466 222c 2073 6865 6c6c 3d54 7275  Tpdf", shell=Tru
-00007710: 652c 2073 7464 696e 3d64 6f74 6669 6c65  e, stdin=dotfile
-00007720: 2c20 7374 646f 7574 3d70 6466 6669 6c65  , stdout=pdffile
-00007730: 290a 0a20 2020 2020 2020 2023 206f 7065  )..        # ope
-00007740: 6e20 7468 6520 5044 4620 6669 6c65 2069  n the PDF file i
-00007750: 6e20 6272 6f77 7365 7220 2868 6f70 6566  n browser (hopef
-00007760: 756c 6c79 2070 6f72 7461 626c 6529 2c20  ully portable), 
-00007770: 7468 656e 2063 6c65 616e 7570 0a20 2020  then cleanup.   
-00007780: 2020 2020 2077 6562 6272 6f77 7365 722e       webbrowser.
-00007790: 6f70 656e 2866 2266 696c 653a 2f2f 7b70  open(f"file://{p
-000077a0: 6466 6669 6c65 2e6e 616d 657d 2229 0a0a  dffile.name}")..
-000077b0: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
-000077c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000077d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000077e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000077f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a 0a20  ----------- #.. 
-00007800: 2020 2064 6566 2064 6f74 6669 6c65 2873     def dotfile(s
-00007810: 656c 662c 2066 696c 656e 616d 652c 2065  elf, filename, e
-00007820: 7473 626f 783d 4661 6c73 652c 2065 7473  tsbox=False, ets
-00007830: 3d22 6675 6c6c 222c 206a 7479 7065 3d46  ="full", jtype=F
-00007840: 616c 7365 2c20 7374 6174 6963 3d54 7275  alse, static=Tru
-00007850: 6529 3a0a 2020 2020 2020 2020 2222 220a  e):.        """.
-00007860: 2020 2020 2020 2020 5772 6974 6520 6120          Write a 
-00007870: 6c69 6e6b 2074 7261 6e73 666f 726d 2067  link transform g
-00007880: 7261 7068 2061 7320 6120 4772 6170 6856  raph as a GraphV
-00007890: 697a 2064 6f74 2066 696c 650a 2020 2020  iz dot file.    
-000078a0: 2020 2020 3a70 6172 616d 2066 696c 653a      :param file:
-000078b0: 204e 616d 6520 6f66 2066 696c 6520 746f   Name of file to
-000078c0: 2077 7269 7465 2074 6f0a 2020 2020 2020   write to.      
-000078d0: 2020 3a74 7970 6520 6669 6c65 3a20 7374    :type file: st
-000078e0: 7220 6f72 2066 696c 650a 2020 2020 2020  r or file.      
-000078f0: 2020 3a70 6172 616d 2065 7473 626f 783a    :param etsbox:
-00007900: 2050 7574 2074 6865 206c 696e 6b20 4554   Put the link ET
-00007910: 5320 696e 2061 2062 6f78 2c20 6f74 6865  S in a box, othe
-00007920: 7277 6973 6520 616e 2065 6467 6520 6c61  rwise an edge la
-00007930: 6265 6c0a 2020 2020 2020 2020 3a74 7970  bel.        :typ
-00007940: 6520 6574 7362 6f78 3a20 626f 6f6c 0a20  e etsbox: bool. 
-00007950: 2020 2020 2020 203a 7061 7261 6d20 6a74         :param jt
-00007960: 7970 653a 2041 7272 6f77 6865 6164 2074  ype: Arrowhead t
-00007970: 6f20 6e6f 6465 2069 6e64 6963 6174 6573  o node indicates
-00007980: 2072 6576 6f6c 7574 6520 6f72 2070 7269   revolute or pri
-00007990: 736d 6174 6963 2074 7970 650a 2020 2020  smatic type.    
-000079a0: 2020 2020 3a74 7970 6520 6a74 7970 653a      :type jtype:
-000079b0: 2062 6f6f 6c0a 2020 2020 2020 2020 3a70   bool.        :p
-000079c0: 6172 616d 2073 7461 7469 633a 2053 686f  aram static: Sho
-000079d0: 7720 7374 6174 6963 206a 6f69 6e74 7320  w static joints 
-000079e0: 696e 2062 6c75 6520 616e 6420 626f 6c64  in blue and bold
-000079f0: 0a20 2020 2020 2020 203a 7479 7065 2073  .        :type s
-00007a00: 7461 7469 633a 2062 6f6f 6c0a 2020 2020  tatic: bool.    
-00007a10: 2020 2020 5468 6520 6669 6c65 2063 616e      The file can
-00007a20: 2062 6520 7072 6f63 6573 7365 6420 7573   be processed us
-00007a30: 696e 6720 646f 743a 3a0a 2020 2020 2020  ing dot::.      
-00007a40: 2020 2020 2020 2520 646f 7420 2d54 706e        % dot -Tpn
-00007a50: 6720 2d6f 206f 7574 2e70 6e67 2064 6f74  g -o out.png dot
-00007a60: 6669 6c65 2e64 6f74 0a20 2020 2020 2020  file.dot.       
-00007a70: 2054 6865 206e 6f64 6573 2061 7265 3a0a   The nodes are:.
-00007a80: 2020 2020 2020 2020 2020 2020 2d20 4261              - Ba
-00007a90: 7365 2069 7320 7368 6f77 6e20 6173 2061  se is shown as a
-00007aa0: 2067 7265 7920 7371 7561 7265 2e20 2054   grey square.  T
-00007ab0: 6869 7320 6973 2074 6865 2077 6f72 6c64  his is the world
-00007ac0: 2066 7261 6d65 206f 7269 6769 6e2c 0a20   frame origin,. 
-00007ad0: 2020 2020 2020 2020 2020 2020 2062 7574               but
-00007ae0: 2063 616e 2062 6520 6368 616e 6765 6420   can be changed 
-00007af0: 7573 696e 6720 7468 6520 6060 6261 7365  using the ``base
-00007b00: 6060 2061 7474 7269 6275 7465 206f 6620  `` attribute of 
-00007b10: 7468 6520 726f 626f 742e 0a20 2020 2020  the robot..     
-00007b20: 2020 2020 2020 202d 204c 696e 6b20 6672         - Link fr
-00007b30: 616d 6573 2061 7265 2069 6e64 6963 6174  ames are indicat
-00007b40: 6564 2062 7920 6369 7263 6c65 730a 2020  ed by circles.  
-00007b50: 2020 2020 2020 2020 2020 2d20 4554 5320            - ETS 
-00007b60: 7472 616e 7366 6f72 6d73 2061 7265 2069  transforms are i
-00007b70: 6e64 6963 6174 6564 2062 7920 726f 756e  ndicated by roun
-00007b80: 6465 6420 626f 7865 730a 2020 2020 2020  ded boxes.      
-00007b90: 2020 5468 6520 6564 6765 7320 6172 653a    The edges are:
-00007ba0: 0a20 2020 2020 2020 2020 2020 202d 2061  .            - a
-00007bb0: 6e20 6172 726f 7720 6966 2060 6a74 7970  n arrow if `jtyp
-00007bc0: 6560 2069 7320 4661 6c73 6520 6f72 2074  e` is False or t
-00007bd0: 6865 206a 6f69 6e74 2069 7320 6669 7865  he joint is fixe
-00007be0: 640a 2020 2020 2020 2020 2020 2020 2d20  d.            - 
-00007bf0: 616e 2061 7272 6f77 2077 6974 6820 6120  an arrow with a 
-00007c00: 726f 756e 6420 6865 6164 2069 6620 606a  round head if `j
-00007c10: 7479 7065 6020 6973 2054 7275 6520 616e  type` is True an
-00007c20: 6420 7468 6520 6a6f 696e 7420 6973 0a20  d the joint is. 
-00007c30: 2020 2020 2020 2020 2020 2020 2072 6576               rev
-00007c40: 6f6c 7574 650a 2020 2020 2020 2020 2020  olute.          
-00007c50: 2020 2d20 616e 2061 7272 6f77 2077 6974    - an arrow wit
-00007c60: 6820 6120 626f 7820 6865 6164 2069 6620  h a box head if 
-00007c70: 606a 7479 7065 6020 6973 2054 7275 6520  `jtype` is True 
-00007c80: 616e 6420 7468 6520 6a6f 696e 7420 6973  and the joint is
-00007c90: 0a20 2020 2020 2020 2020 2020 2020 2070  .              p
-00007ca0: 7269 736d 6174 6963 0a20 2020 2020 2020  rismatic.       
-00007cb0: 2045 6467 6520 6c61 6265 6c73 206f 7220   Edge labels or 
-00007cc0: 6e6f 6465 7320 696e 2062 6c75 6520 6861  nodes in blue ha
-00007cd0: 7665 2061 2066 6978 6564 2074 7261 6e73  ve a fixed trans
-00007ce0: 666f 726d 6174 696f 6e20 746f 2074 6865  formation to the
-00007cf0: 0a20 2020 2020 2020 2070 7265 6365 6469  .        precedi
-00007d00: 6e67 206c 696e 6b2e 0a20 2020 2020 2020  ng link..       
-00007d10: 202e 2e20 6e6f 7465 3a3a 2049 6620 6060   .. note:: If ``
-00007d20: 6669 6c65 6e61 6d65 6060 2069 7320 6120  filename`` is a 
-00007d30: 6669 6c65 206f 626a 6563 7420 7468 656e  file object then
-00007d40: 2074 6865 2066 696c 6520 7769 6c6c 202a   the file will *
-00007d50: 6e6f 742a 0a20 2020 2020 2020 2020 2020  not*.           
-00007d60: 2062 6520 636c 6f73 6564 2061 6674 6572   be closed after
-00007d70: 2074 6865 2047 7261 7068 5669 7a20 6d6f   the GraphViz mo
-00007d80: 6465 6c20 6973 2077 7269 7474 656e 2e0a  del is written..
-00007d90: 2020 2020 2020 2020 3a73 6565 616c 736f          :seealso
-00007da0: 3a20 3a66 756e 633a 6073 686f 7767 7261  : :func:`showgra
-00007db0: 7068 600a 2020 2020 2020 2020 2222 220a  ph`.        """.
-00007dc0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00007dd0: 7461 6e63 6528 6669 6c65 6e61 6d65 2c20  tance(filename, 
-00007de0: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-00007df0: 2020 6669 6c65 203d 206f 7065 6e28 6669    file = open(fi
-00007e00: 6c65 6e61 6d65 2c20 2277 2229 0a20 2020  lename, "w").   
-00007e10: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00007e20: 2020 2020 2020 2066 696c 6520 3d20 6669         file = fi
-00007e30: 6c65 6e61 6d65 0a0a 2020 2020 2020 2020  lename..        
-00007e40: 6865 6164 6572 203d 2072 2222 2264 6967  header = r"""dig
-00007e50: 7261 7068 2047 207b 0a67 7261 7068 205b  raph G {.graph [
-00007e60: 7261 6e6b 6469 723d 4c52 5d3b 0a22 2222  rankdir=LR];."""
-00007e70: 0a0a 2020 2020 2020 2020 6465 6620 6472  ..        def dr
-00007e80: 6177 5f65 6467 6528 6c69 6e6b 2c20 6574  aw_edge(link, et
-00007e90: 7362 6f78 2c20 6a74 7970 652c 2073 7461  sbox, jtype, sta
-00007ea0: 7469 6329 3a0a 2020 2020 2020 2020 2020  tic):.          
-00007eb0: 2020 2320 6472 6177 2074 6865 2065 6467    # draw the edg
-00007ec0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
-00007ed0: 206a 7479 7065 3a0a 2020 2020 2020 2020   jtype:.        
-00007ee0: 2020 2020 2020 2020 6966 206c 696e 6b2e          if link.
-00007ef0: 6973 7072 6973 6d61 7469 633a 0a20 2020  isprismatic:.   
-00007f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f10: 2065 6467 655f 6f70 7469 6f6e 7320 3d20   edge_options = 
-00007f20: 2761 7272 6f77 6865 6164 3d22 626f 7822  'arrowhead="box"
-00007f30: 2c20 6172 726f 7774 6169 6c3d 2269 6e76  , arrowtail="inv
-00007f40: 222c 2064 6972 3d22 626f 7468 2227 0a20  ", dir="both"'. 
-00007f50: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00007f60: 6c69 6620 6c69 6e6b 2e69 7372 6576 6f6c  lif link.isrevol
-00007f70: 7574 653a 0a20 2020 2020 2020 2020 2020  ute:.           
-00007f80: 2020 2020 2020 2020 2065 6467 655f 6f70           edge_op
-00007f90: 7469 6f6e 7320 3d20 2761 7272 6f77 6865  tions = 'arrowhe
-00007fa0: 6164 3d22 646f 7422 2c20 6172 726f 7774  ad="dot", arrowt
-00007fb0: 6169 6c3d 2269 6e76 222c 2064 6972 3d22  ail="inv", dir="
-00007fc0: 626f 7468 2227 0a20 2020 2020 2020 2020  both"'.         
-00007fd0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00007fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ff0: 2065 6467 655f 6f70 7469 6f6e 7320 3d20   edge_options = 
-00008000: 2761 7272 6f77 6865 6164 3d22 6e6f 726d  'arrowhead="norm
-00008010: 616c 2227 0a20 2020 2020 2020 2020 2020  al"'.           
-00008020: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00008030: 2020 2020 2020 2065 6467 655f 6f70 7469         edge_opti
-00008040: 6f6e 7320 3d20 2761 7272 6f77 6865 6164  ons = 'arrowhead
-00008050: 3d22 6e6f 726d 616c 2227 0a0a 2020 2020  ="normal"'..    
-00008060: 2020 2020 2020 2020 6966 206c 696e 6b2e          if link.
-00008070: 7061 7265 6e74 2069 7320 4e6f 6e65 3a0a  parent is None:.
-00008080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008090: 7061 7265 6e74 203d 2022 4241 5345 220a  parent = "BASE".
-000080a0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000080b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000080c0: 2020 7061 7265 6e74 203d 206c 696e 6b2e    parent = link.
-000080d0: 7061 7265 6e74 2e6e 616d 650a 0a20 2020  parent.name..   
-000080e0: 2020 2020 2020 2020 2069 6620 6574 7362           if etsb
-000080f0: 6f78 3a0a 2020 2020 2020 2020 2020 2020  ox:.            
-00008100: 2020 2020 2320 7075 7420 7468 6520 6574      # put the et
-00008110: 7320 6672 6167 6d65 6e74 2069 6e20 6120  s fragment in a 
-00008120: 626f 780a 2020 2020 2020 2020 2020 2020  box.            
-00008130: 2020 2020 6966 206e 6f74 206c 696e 6b2e      if not link.
-00008140: 6973 6a6f 696e 7420 616e 6420 7374 6174  isjoint and stat
-00008150: 6963 3a0a 2020 2020 2020 2020 2020 2020  ic:.            
-00008160: 2020 2020 2020 2020 6e6f 6465 5f6f 7074          node_opt
-00008170: 696f 6e73 203d 2027 2c20 666f 6e74 636f  ions = ', fontco
-00008180: 6c6f 723d 2262 6c75 6522 270a 2020 2020  lor="blue"'.    
-00008190: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000081a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000081b0: 2020 2020 2020 6e6f 6465 5f6f 7074 696f        node_optio
-000081c0: 6e73 203d 2022 220a 2020 2020 2020 2020  ns = "".        
-000081d0: 2020 2020 2020 2020 6669 6c65 2e77 7269          file.wri
-000081e0: 7465 280a 2020 2020 2020 2020 2020 2020  te(.            
-000081f0: 2020 2020 2020 2020 2220 207b 7d5f 6574          "  {}_et
-00008200: 7320 5b73 6861 7065 3d62 6f78 2c20 7374  s [shape=box, st
-00008210: 796c 653d 726f 756e 6465 642c 2022 0a20  yle=rounded, ". 
-00008220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008230: 2020 2027 6c61 6265 6c3d 227b 7d22 7b7d     'label="{}"{}
-00008240: 5d3b 5c6e 272e 666f 726d 6174 280a 2020  ];\n'.format(.  
-00008250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008260: 2020 2020 2020 6c69 6e6b 2e6e 616d 652c        link.name,
-00008270: 206c 696e 6b2e 6574 732e 5f5f 7374 725f   link.ets.__str_
-00008280: 5f28 713d 6622 717b 6c69 6e6b 2e6a 696e  _(q=f"q{link.jin
-00008290: 6465 787d 2229 2c20 6e6f 6465 5f6f 7074  dex}"), node_opt
-000082a0: 696f 6e73 0a20 2020 2020 2020 2020 2020  ions.           
-000082b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000082c0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-000082d0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-000082e0: 652e 7772 6974 6528 2220 207b 7d20 2d3e  e.write("  {} ->
-000082f0: 207b 7d5f 6574 733b 5c6e 222e 666f 726d   {}_ets;\n".form
-00008300: 6174 2870 6172 656e 742c 206c 696e 6b2e  at(parent, link.
-00008310: 6e61 6d65 2929 0a20 2020 2020 2020 2020  name)).         
-00008320: 2020 2020 2020 2066 696c 652e 7772 6974         file.writ
-00008330: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-00008340: 2020 2020 2020 2022 2020 7b7d 5f65 7473         "  {}_ets
-00008350: 202d 3e20 7b7d 205b 7b7d 5d3b 5c6e 222e   -> {} [{}];\n".
-00008360: 666f 726d 6174 286c 696e 6b2e 6e61 6d65  format(link.name
-00008370: 2c20 6c69 6e6b 2e6e 616d 652c 2065 6467  , link.name, edg
-00008380: 655f 6f70 7469 6f6e 7329 0a20 2020 2020  e_options).     
-00008390: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-000083a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000083b0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000083c0: 2070 7574 2074 6865 2065 7473 2066 7261   put the ets fra
-000083d0: 676d 656e 7420 6173 2061 6e20 6564 6765  gment as an edge
-000083e0: 206c 6162 656c 0a20 2020 2020 2020 2020   label.         
-000083f0: 2020 2020 2020 2069 6620 6e6f 7420 6c69         if not li
-00008400: 6e6b 2e69 736a 6f69 6e74 2061 6e64 2073  nk.isjoint and s
-00008410: 7461 7469 633a 0a20 2020 2020 2020 2020  tatic:.         
-00008420: 2020 2020 2020 2020 2020 2065 6467 655f             edge_
-00008430: 6f70 7469 6f6e 7320 2b3d 2027 666f 6e74  options += 'font
-00008440: 636f 6c6f 723d 2262 6c75 6522 270a 2020  color="blue"'.  
-00008450: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00008460: 2065 7473 203d 3d20 2266 756c 6c22 3a0a   ets == "full":.
-00008470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008480: 2020 2020 6573 7472 203d 206c 696e 6b2e      estr = link.
-00008490: 6574 732e 5f5f 7374 725f 5f28 713d 6622  ets.__str__(q=f"
-000084a0: 717b 6c69 6e6b 2e6a 696e 6465 787d 2229  q{link.jindex}")
-000084b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000084c0: 2065 6c69 6620 6574 7320 3d3d 2022 6272   elif ets == "br
-000084d0: 6965 6622 3a0a 2020 2020 2020 2020 2020  ief":.          
-000084e0: 2020 2020 2020 2020 2020 6966 206c 696e            if lin
-000084f0: 6b2e 6a69 6e64 6578 2069 7320 4e6f 6e65  k.jindex is None
-00008500: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00008510: 2020 2020 2020 2020 2020 6573 7472 203d            estr =
-00008520: 2022 220a 2020 2020 2020 2020 2020 2020   "".            
-00008530: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00008540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008550: 2020 2020 2020 6573 7472 203d 2066 222e        estr = f".
-00008560: 2e2e 717b 6c69 6e6b 2e6a 696e 6465 787d  ..q{link.jindex}
-00008570: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00008580: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00008590: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000085a0: 726e 0a20 2020 2020 2020 2020 2020 2020  rn.             
-000085b0: 2020 2066 696c 652e 7772 6974 6528 0a20     file.write(. 
-000085c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000085d0: 2020 2027 2020 7b7d 202d 3e20 7b7d 205b     '  {} -> {} [
-000085e0: 6c61 6265 6c3d 227b 7d22 2c20 7b7d 5d3b  label="{}", {}];
-000085f0: 5c6e 272e 666f 726d 6174 280a 2020 2020  \n'.format(.    
-00008600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008610: 2020 2020 7061 7265 6e74 2c0a 2020 2020      parent,.    
-00008620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008630: 2020 2020 6c69 6e6b 2e6e 616d 652c 0a20      link.name,. 
-00008640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008650: 2020 2020 2020 2065 7374 722c 0a20 2020         estr,.   
-00008660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008670: 2020 2020 2065 6467 655f 6f70 7469 6f6e       edge_option
-00008680: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-00008690: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000086a0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-000086b0: 2020 2020 6669 6c65 2e77 7269 7465 2868      file.write(h
-000086c0: 6561 6465 7229 0a0a 2020 2020 2020 2020  eader)..        
-000086d0: 2320 6164 6420 7468 6520 6261 7365 206c  # add the base l
-000086e0: 696e 6b0a 2020 2020 2020 2020 6669 6c65  ink.        file
-000086f0: 2e77 7269 7465 2822 2020 4241 5345 205b  .write("  BASE [
-00008700: 7368 6170 653d 7371 7561 7265 2c20 7374  shape=square, st
-00008710: 796c 653d 6669 6c6c 6564 2c20 6669 6c6c  yle=filled, fill
-00008720: 636f 6c6f 723d 6772 6179 5d5c 6e22 290a  color=gray]\n").
-00008730: 0a20 2020 2020 2020 2023 2061 6464 2074  .        # add t
-00008740: 6865 206c 696e 6b73 0a20 2020 2020 2020  he links.       
-00008750: 2066 6f72 206c 696e 6b20 696e 2073 656c   for link in sel
-00008760: 663a 0a20 2020 2020 2020 2020 2020 2023  f:.            #
-00008770: 2064 7261 7720 7468 6520 6c69 6e6b 2066   draw the link f
-00008780: 7261 6d65 206e 6f64 6520 2863 6972 636c  rame node (circl
-00008790: 6529 206f 7220 6565 206e 6f64 6520 2864  e) or ee node (d
-000087a0: 6f75 626c 6563 6972 636c 6529 0a20 2020  oublecircle).   
-000087b0: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
-000087c0: 2069 6e20 7365 6c66 2e65 655f 6c69 6e6b   in self.ee_link
-000087d0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-000087e0: 2020 2023 2065 6e64 2d65 6666 6563 746f     # end-effecto
-000087f0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-00008800: 2020 6e6f 6465 5f6f 7074 696f 6e73 203d    node_options =
-00008810: 2027 7368 6170 653d 2264 6f75 626c 6563   'shape="doublec
-00008820: 6972 636c 6522 2c20 636f 6c6f 723d 2262  ircle", color="b
-00008830: 6c75 6522 2c20 666f 6e74 636f 6c6f 723d  lue", fontcolor=
-00008840: 2262 6c75 6522 270a 2020 2020 2020 2020  "blue"'.        
-00008850: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00008860: 2020 2020 2020 2020 2020 6e6f 6465 5f6f            node_o
-00008870: 7074 696f 6e73 203d 2027 7368 6170 653d  ptions = 'shape=
-00008880: 2263 6972 636c 6522 270a 0a20 2020 2020  "circle"'..     
-00008890: 2020 2020 2020 2066 696c 652e 7772 6974         file.writ
-000088a0: 6528 2220 207b 7d20 5b7b 7d5d 3b5c 6e22  e("  {} [{}];\n"
-000088b0: 2e66 6f72 6d61 7428 6c69 6e6b 2e6e 616d  .format(link.nam
-000088c0: 652c 206e 6f64 655f 6f70 7469 6f6e 7329  e, node_options)
-000088d0: 290a 0a20 2020 2020 2020 2020 2020 2064  )..            d
-000088e0: 7261 775f 6564 6765 286c 696e 6b2c 2065  raw_edge(link, e
-000088f0: 7473 626f 782c 206a 7479 7065 2c20 7374  tsbox, jtype, st
-00008900: 6174 6963 290a 0a20 2020 2020 2020 2066  atic)..        f
-00008910: 6f72 2067 7269 7070 6572 2069 6e20 7365  or gripper in se
-00008920: 6c66 2e67 7269 7070 6572 733a 0a20 2020  lf.grippers:.   
-00008930: 2020 2020 2020 2020 2066 6f72 206c 696e           for lin
-00008940: 6b20 696e 2067 7269 7070 6572 2e6c 696e  k in gripper.lin
-00008950: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
-00008960: 2020 2020 6669 6c65 2e77 7269 7465 2822      file.write("
-00008970: 2020 7b7d 205b 7368 6170 653d 6364 735d    {} [shape=cds]
-00008980: 3b5c 6e22 2e66 6f72 6d61 7428 6c69 6e6b  ;\n".format(link
-00008990: 2e6e 616d 6529 290a 2020 2020 2020 2020  .name)).        
-000089a0: 2020 2020 2020 2020 6472 6177 5f65 6467          draw_edg
-000089b0: 6528 6c69 6e6b 2c20 6574 7362 6f78 2c20  e(link, etsbox, 
-000089c0: 6a74 7970 652c 2073 7461 7469 6329 0a0a  jtype, static)..
-000089d0: 2020 2020 2020 2020 6669 6c65 2e77 7269          file.wri
-000089e0: 7465 2822 7d5c 6e22 290a 0a20 2020 2020  te("}\n")..     
-000089f0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00008a00: 2866 696c 656e 616d 652c 2073 7472 293a  (filename, str):
-00008a10: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-00008a20: 652e 636c 6f73 6528 2920 2023 206e 6f71  e.close()  # noq
-00008a30: 610a 0a20 2020 2023 202d 2d2d 2d2d 2d2d  a..    # -------
-00008a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2023  -------------- #
-00008a80: 0a0a 2020 2020 6465 6620 6466 735f 6c69  ..    def dfs_li
-00008a90: 6e6b 7328 7365 6c66 2c20 7374 6172 742c  nks(self, start,
-00008aa0: 2066 756e 633d 4e6f 6e65 293a 0a20 2020   func=None):.   
-00008ab0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00008ac0: 2056 6973 6974 2061 6c6c 206c 696e 6b73   Visit all links
-00008ad0: 2066 726f 6d20 7374 6172 7420 696e 2064   from start in d
-00008ae0: 6570 7468 2d66 6972 7374 206f 7264 6572  epth-first order
-00008af0: 2061 6e64 2077 696c 6c20 6170 706c 790a   and will apply.
-00008b00: 2020 2020 2020 2020 6675 6e63 2074 6f20          func to 
-00008b10: 6561 6368 2076 6973 6974 6564 206c 696e  each visited lin
-00008b20: 6b0a 2020 2020 2020 2020 3a70 6172 616d  k.        :param
-00008b30: 2073 7461 7274 3a20 7468 6520 6c69 6e6b   start: the link
-00008b40: 2074 6f20 7374 6172 7420 6174 0a20 2020   to start at.   
-00008b50: 2020 2020 203a 7479 7065 2073 7461 7274       :type start
-00008b60: 3a20 4c69 6e6b 0a20 2020 2020 2020 203a  : Link.        :
-00008b70: 7061 7261 6d20 6675 6e63 3a20 416e 206f  param func: An o
-00008b80: 7074 696f 6e61 6c20 6675 6e63 7469 6f6e  ptional function
-00008b90: 2074 6f20 6170 706c 7920 746f 2065 6163   to apply to eac
-00008ba0: 6820 6c69 6e6b 2061 7320 6974 2069 7320  h link as it is 
-00008bb0: 666f 756e 640a 2020 2020 2020 2020 3a74  found.        :t
-00008bc0: 7970 6520 6675 6e63 3a20 6675 6e63 7469  ype func: functi
-00008bd0: 6f6e 0a20 2020 2020 2020 203a 7265 7475  on.        :retu
-00008be0: 726e 733a 2041 206c 6973 7420 6f66 206c  rns: A list of l
-00008bf0: 696e 6b73 0a20 2020 2020 2020 203a 7274  inks.        :rt
-00008c00: 7970 653a 206c 6973 7420 6f66 204c 696e  ype: list of Lin
-00008c10: 6b0a 2020 2020 2020 2020 2222 220a 2020  k.        """.  
-00008c20: 2020 2020 2020 7669 7369 7465 6420 3d20        visited = 
-00008c30: 5b5d 0a0a 2020 2020 2020 2020 6465 6620  []..        def 
-00008c40: 7669 735f 6368 696c 6472 656e 286c 696e  vis_children(lin
-00008c50: 6b29 3a0a 2020 2020 2020 2020 2020 2020  k):.            
-00008c60: 7669 7369 7465 642e 6170 7065 6e64 286c  visited.append(l
-00008c70: 696e 6b29 0a20 2020 2020 2020 2020 2020  ink).           
-00008c80: 2069 6620 6675 6e63 2069 7320 6e6f 7420   if func is not 
-00008c90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00008ca0: 2020 2020 2020 6675 6e63 286c 696e 6b29        func(link)
-00008cb0: 0a0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-00008cc0: 7220 6c69 2069 6e20 6c69 6e6b 2e63 6869  r li in link.chi
-00008cd0: 6c64 7265 6e3a 0a20 2020 2020 2020 2020  ldren:.         
-00008ce0: 2020 2020 2020 2069 6620 6c69 206e 6f74         if li not
-00008cf0: 2069 6e20 7669 7369 7465 643a 0a20 2020   in visited:.   
-00008d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d10: 2076 6973 5f63 6869 6c64 7265 6e28 6c69   vis_children(li
-00008d20: 290a 0a20 2020 2020 2020 2076 6973 5f63  )..        vis_c
-00008d30: 6869 6c64 7265 6e28 7374 6172 7429 0a0a  hildren(start)..
-00008d40: 2020 2020 2020 2020 7265 7475 726e 2076          return v
-00008d50: 6973 6974 6564 0a0a 2020 2020 6465 6620  isited..    def 
-00008d60: 5f67 6574 5f6c 696d 6974 5f6c 696e 6b73  _get_limit_links
-00008d70: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00008d80: 2020 2020 2020 2020 656e 643a 2055 6e69          end: Uni
-00008d90: 6f6e 5b47 7269 7070 6572 2c20 4c69 6e6b  on[Gripper, Link
-00008da0: 2c20 7374 722c 204e 6f6e 655d 203d 204e  , str, None] = N
-00008db0: 6f6e 652c 0a20 2020 2020 2020 2073 7461  one,.        sta
-00008dc0: 7274 3a20 556e 696f 6e5b 4772 6970 7065  rt: Union[Grippe
-00008dd0: 722c 204c 696e 6b2c 2073 7472 2c20 4e6f  r, Link, str, No
-00008de0: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-00008df0: 2920 2d3e 2054 7570 6c65 5b4c 696e 6b2c  ) -> Tuple[Link,
-00008e00: 2055 6e69 6f6e 5b4c 696e 6b2c 2047 7269   Union[Link, Gri
-00008e10: 7070 6572 5d2c 2055 6e69 6f6e 5b4e 6f6e  pper], Union[Non
-00008e20: 652c 2053 4533 5d5d 3a0a 2020 2020 2020  e, SE3]]:.      
-00008e30: 2020 2222 220a 2020 2020 2020 2020 4765    """.        Ge
-00008e40: 7420 616e 6420 7661 6c69 6461 7465 2061  t and validate a
-00008e50: 6e20 656e 642d 6566 6665 6374 6f72 2c20  n end-effector, 
-00008e60: 616e 6420 6120 6261 7365 206c 696e 6b0a  and a base link.
-00008e70: 2020 2020 2020 2020 3a70 6172 616d 2065          :param e
-00008e80: 6e64 3a20 656e 642d 6566 6665 6374 6f72  nd: end-effector
-00008e90: 206f 7220 6772 6970 7065 7220 746f 2063   or gripper to c
-00008ea0: 6f6d 7075 7465 2066 6f72 7761 7264 206b  ompute forward k
-00008eb0: 696e 656d 6174 6963 7320 746f 0a20 2020  inematics to.   
-00008ec0: 2020 2020 203a 7479 7065 2065 6e64 3a20       :type end: 
-00008ed0: 7374 7220 6f72 204c 696e 6b20 6f72 2047  str or Link or G
-00008ee0: 7269 7070 6572 2c20 6f70 7469 6f6e 616c  ripper, optional
-00008ef0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00008f00: 7374 6172 743a 206e 616d 6520 6f72 2072  start: name or r
-00008f10: 6566 6572 656e 6365 2074 6f20 6120 6261  eference to a ba
-00008f20: 7365 206c 696e 6b2c 2064 6566 6175 6c74  se link, default
-00008f30: 7320 746f 204e 6f6e 650a 2020 2020 2020  s to None.      
-00008f40: 2020 3a74 7970 6520 7374 6172 743a 2073    :type start: s
-00008f50: 7472 206f 7220 4c69 6e6b 2c20 6f70 7469  tr or Link, opti
-00008f60: 6f6e 616c 0a20 2020 2020 2020 203a 7261  onal.        :ra
-00008f70: 6973 6573 2056 616c 7565 4572 726f 723a  ises ValueError:
-00008f80: 206c 696e 6b20 6e6f 7420 6b6e 6f77 6e20   link not known 
-00008f90: 6f72 2061 6d62 6967 756f 7573 0a20 2020  or ambiguous.   
-00008fa0: 2020 2020 203a 7261 6973 6573 2056 616c       :raises Val
-00008fb0: 7565 4572 726f 723a 205b 6465 7363 7269  ueError: [descri
-00008fc0: 7074 696f 6e5d 0a20 2020 2020 2020 203a  ption].        :
-00008fd0: 7261 6973 6573 2054 7970 6545 7272 6f72  raises TypeError
-00008fe0: 3a20 756e 6b6e 6f77 6e20 7479 7065 2070  : unknown type p
-00008ff0: 726f 7669 6465 640a 2020 2020 2020 2020  rovided.        
-00009000: 3a72 6574 7572 6e3a 2065 6e64 2d65 6666  :return: end-eff
-00009010: 6563 746f 7220 6c69 6e6b 2c20 6261 7365  ector link, base
-00009020: 206c 696e 6b2c 2061 6e64 2074 6f6f 6c20   link, and tool 
-00009030: 7472 616e 7366 6f72 6d20 6f66 2067 7269  transform of gri
-00009040: 7070 6572 0a20 2020 2020 2020 2020 2020  pper.           
-00009050: 2069 6620 6170 706c 6963 6162 6c65 0a20   if applicable. 
-00009060: 2020 2020 2020 203a 7274 7970 653a 204c         :rtype: L
-00009070: 696e 6b2c 2045 6c69 6e6b 2c20 5345 3320  ink, Elink, SE3 
-00009080: 6f72 204e 6f6e 650a 2020 2020 2020 2020  or None.        
-00009090: 4865 6c70 6572 206d 6574 686f 6420 746f  Helper method to
-000090a0: 2066 696e 6420 6f72 2076 616c 6964 6174   find or validat
-000090b0: 6520 616e 2065 6e64 2d65 6666 6563 746f  e an end-effecto
-000090c0: 7220 616e 6420 6261 7365 206c 696e 6b2e  r and base link.
-000090d0: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-000090e0: 2020 2020 2020 2320 5472 7920 6361 6368        # Try cach
-000090f0: 650a 2020 2020 2020 2020 2320 6966 2073  e.        # if s
-00009100: 656c 662e 5f63 6163 6865 5f65 6e64 2069  elf._cache_end i
-00009110: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00009120: 2020 2020 2320 2020 2020 7265 7475 726e      #     return
-00009130: 2073 656c 662e 5f63 6163 6865 5f65 6e64   self._cache_end
-00009140: 2c20 7365 6c66 2e5f 6361 6368 655f 7374  , self._cache_st
-00009150: 6172 742c 2073 656c 662e 5f63 6163 6865  art, self._cache
-00009160: 5f65 6e64 5f74 6f6f 6c0a 0a20 2020 2020  _end_tool..     
-00009170: 2020 2074 6f6f 6c20 3d20 4e6f 6e65 0a20     tool = None. 
-00009180: 2020 2020 2020 2069 6620 656e 6420 6973         if end is
-00009190: 204e 6f6e 653a 0a0a 2020 2020 2020 2020   None:..        
-000091a0: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
-000091b0: 6772 6970 7065 7273 2920 3e20 313a 0a20  grippers) > 1:. 
-000091c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000091d0: 6e64 5f72 6574 203d 2073 656c 662e 6772  nd_ret = self.gr
-000091e0: 6970 7065 7273 5b30 5d2e 6c69 6e6b 735b  ippers[0].links[
-000091f0: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
-00009200: 2020 2074 6f6f 6c20 3d20 7365 6c66 2e67     tool = self.g
-00009210: 7269 7070 6572 735b 305d 2e74 6f6f 6c0a  rippers[0].tool.
-00009220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009230: 6966 206c 656e 2873 656c 662e 6772 6970  if len(self.grip
-00009240: 7065 7273 2920 3e20 313a 0a20 2020 2020  pers) > 1:.     
-00009250: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00009260: 2057 6172 6e20 7573 6572 3a20 6d6f 7265   Warn user: more
-00009270: 2074 6861 6e20 6f6e 6520 6772 6970 7065   than one grippe
-00009280: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-00009290: 2020 2020 2020 7072 696e 7428 224d 6f72        print("Mor
-000092a0: 6520 7468 616e 206f 6e65 2067 7269 7070  e than one gripp
-000092b0: 6572 2070 7265 7365 6e74 2c20 7573 696e  er present, usin
-000092c0: 6720 726f 626f 742e 6772 6970 7065 7273  g robot.grippers
-000092d0: 5b30 5d22 290a 2020 2020 2020 2020 2020  [0]").          
-000092e0: 2020 656c 6966 206c 656e 2873 656c 662e    elif len(self.
-000092f0: 6772 6970 7065 7273 2920 3d3d 2031 3a0a  grippers) == 1:.
-00009300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009310: 656e 645f 7265 7420 3d20 7365 6c66 2e67  end_ret = self.g
-00009320: 7269 7070 6572 735b 305d 2e6c 696e 6b73  rippers[0].links
-00009330: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-00009340: 2020 2020 746f 6f6c 203d 2073 656c 662e      tool = self.
-00009350: 6772 6970 7065 7273 5b30 5d2e 746f 6f6c  grippers[0].tool
-00009360: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00009370: 6e6f 2067 7269 7070 6572 732c 2075 7365  no grippers, use
-00009380: 2065 6520 6c69 6e6b 2069 6620 6a75 7374   ee link if just
-00009390: 206f 6e65 0a20 2020 2020 2020 2020 2020   one.           
-000093a0: 2065 6c69 6620 6c65 6e28 7365 6c66 2e65   elif len(self.e
-000093b0: 655f 6c69 6e6b 7329 203e 2031 3a0a 2020  e_links) > 1:.  
-000093c0: 2020 2020 2020 2020 2020 2020 2020 656e                en
-000093d0: 645f 7265 7420 3d20 7365 6c66 2e65 655f  d_ret = self.ee_
-000093e0: 6c69 6e6b 735b 305d 0a20 2020 2020 2020  links[0].       
-000093f0: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00009400: 7365 6c66 2e65 655f 6c69 6e6b 7329 203e  self.ee_links) >
-00009410: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-00009420: 2020 2020 2020 2020 2320 5761 726e 2075          # Warn u
-00009430: 7365 723a 206d 6f72 6520 7468 616e 206f  ser: more than o
-00009440: 6e65 2045 450a 2020 2020 2020 2020 2020  ne EE.          
-00009450: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00009460: 224d 6f72 6520 7468 616e 206f 6e65 2065  "More than one e
-00009470: 6e64 2d65 6666 6563 746f 7220 7072 6573  nd-effector pres
-00009480: 656e 742c 2075 7369 6e67 2072 6f62 6f74  ent, using robot
-00009490: 2e65 655f 6c69 6e6b 735b 305d 2229 0a20  .ee_links[0]"). 
-000094a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000094b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000094c0: 2065 6e64 5f72 6574 203d 2073 656c 662e   end_ret = self.
-000094d0: 6565 5f6c 696e 6b73 5b30 5d0a 0a20 2020  ee_links[0]..   
-000094e0: 2020 2020 2020 2020 2023 2043 6163 6865           # Cache
-000094f0: 2072 6573 756c 740a 2020 2020 2020 2020   result.        
-00009500: 2020 2020 7365 6c66 2e5f 6361 6368 655f      self._cache_
-00009510: 656e 6420 3d20 656e 640a 2020 2020 2020  end = end.      
-00009520: 2020 2020 2020 7365 6c66 2e5f 6361 6368        self._cach
-00009530: 655f 656e 645f 746f 6f6c 203d 2074 6f6f  e_end_tool = too
-00009540: 6c0a 2020 2020 2020 2020 656c 7365 3a0a  l.        else:.
-00009550: 0a20 2020 2020 2020 2020 2020 2023 2043  .            # C
-00009560: 6865 636b 2069 6620 656e 6420 636f 7272  heck if end corr
-00009570: 6573 706f 6e64 7320 746f 2067 7269 7070  esponds to gripp
-00009580: 6572 0a20 2020 2020 2020 2020 2020 2066  er.            f
-00009590: 6f72 2067 7269 7070 6572 2069 6e20 7365  or gripper in se
-000095a0: 6c66 2e67 7269 7070 6572 733a 0a20 2020  lf.grippers:.   
-000095b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000095c0: 656e 6420 3d3d 2067 7269 7070 6572 206f  end == gripper o
-000095d0: 7220 656e 6420 3d3d 2067 7269 7070 6572  r end == gripper
-000095e0: 2e6e 616d 653a 0a20 2020 2020 2020 2020  .name:.         
-000095f0: 2020 2020 2020 2020 2020 2074 6f6f 6c20             tool 
-00009600: 3d20 6772 6970 7065 722e 746f 6f6c 0a20  = gripper.tool. 
-00009610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009620: 2020 2023 2065 6e64 5f72 6574 203d 2067     # end_ret = g
-00009630: 7269 7070 6572 2e6c 696e 6b73 5b30 5d0a  ripper.links[0].
-00009640: 0a20 2020 2020 2020 2020 2020 2023 206f  .            # o
-00009650: 7468 6572 7769 7365 2063 6865 636b 2066  therwise check f
-00009660: 6f72 2065 6e64 2069 6e20 7468 6520 6c69  or end in the li
-00009670: 6e6b 730a 2020 2020 2020 2020 2020 2020  nks.            
-00009680: 656e 645f 7265 7420 3d20 7365 6c66 2e5f  end_ret = self._
-00009690: 6765 746c 696e 6b28 656e 6429 0a0a 2020  getlink(end)..  
-000096a0: 2020 2020 2020 6966 2073 7461 7274 2069        if start i
-000096b0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-000096c0: 2020 2020 7374 6172 745f 7265 7420 3d20      start_ret = 
-000096d0: 7365 6c66 2e62 6173 655f 6c69 6e6b 0a0a  self.base_link..
-000096e0: 2020 2020 2020 2020 2020 2020 2320 4361              # Ca
-000096f0: 6368 6520 7265 7375 6c74 0a20 2020 2020  che result.     
-00009700: 2020 2020 2020 2073 656c 662e 5f63 6163         self._cac
-00009710: 6865 5f73 7461 7274 203d 2073 7461 7274  he_start = start
-00009720: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00009730: 2020 2020 2020 2020 2020 2023 2073 7461             # sta
-00009740: 7274 2065 6666 6563 746f 7220 6973 2073  rt effector is s
-00009750: 7065 6369 6669 6564 0a20 2020 2020 2020  pecified.       
-00009760: 2020 2020 2073 7461 7274 5f72 6574 203d       start_ret =
-00009770: 2073 656c 662e 5f67 6574 6c69 6e6b 2873   self._getlink(s
-00009780: 7461 7274 290a 0a20 2020 2020 2020 2072  tart)..        r
-00009790: 6574 7572 6e20 656e 645f 7265 742c 2073  eturn end_ret, s
-000097a0: 7461 7274 5f72 6574 2c20 746f 6f6c 0a0a  tart_ret, tool..
-000097b0: 2020 2020 6465 6620 5f67 6574 6c69 6e6b      def _getlink
-000097c0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-000097d0: 2020 2020 2020 2020 6c69 6e6b 3a20 556e          link: Un
-000097e0: 696f 6e5b 4c69 6e6b 2c20 4772 6970 7065  ion[Link, Grippe
-000097f0: 722c 2073 7472 2c20 4e6f 6e65 5d2c 0a20  r, str, None],. 
-00009800: 2020 2020 2020 2064 6566 6175 6c74 3a20         default: 
-00009810: 556e 696f 6e5b 4c69 6e6b 2c20 4772 6970  Union[Link, Grip
-00009820: 7065 722c 2073 7472 2c20 4e6f 6e65 5d20  per, str, None] 
-00009830: 3d20 4e6f 6e65 2c0a 2020 2020 2920 2d3e  = None,.    ) ->
-00009840: 204c 696e 6b3a 0a20 2020 2020 2020 2022   Link:.        "
-00009850: 2222 0a20 2020 2020 2020 2056 616c 6964  "".        Valid
-00009860: 6174 6520 7265 6665 7265 6e63 6520 746f  ate reference to
-00009870: 204c 696e 6b0a 0a20 2020 2020 2020 203a   Link..        :
-00009880: 7061 7261 6d20 6c69 6e6b 3a20 6c69 6e6b  param link: link
-00009890: 0a0a 2020 2020 2020 2020 3a72 6169 7365  ..        :raise
-000098a0: 7320 5661 6c75 6545 7272 6f72 3a20 6c69  s ValueError: li
-000098b0: 6e6b 2064 6f65 7320 6e6f 7420 6265 6c6f  nk does not belo
-000098c0: 6e67 2074 6f20 7468 6973 2045 526f 626f  ng to this ERobo
-000098d0: 740a 2020 2020 2020 2020 3a72 6169 7365  t.        :raise
-000098e0: 7320 5479 7065 4572 726f 723a 2062 6164  s TypeError: bad
-000098f0: 2061 7267 756d 656e 740a 0a20 2020 2020   argument..     
-00009900: 2020 203a 7265 7475 726e 3a20 6c69 6e6b     :return: link
-00009910: 2072 6566 6572 656e 6365 0a0a 2020 2020   reference..    
-00009920: 2020 2020 6060 726f 626f 742e 5f67 6574      ``robot._get
-00009930: 6c69 6e6b 286c 696e 6b29 6060 2069 7320  link(link)`` is 
-00009940: 6120 7661 6c69 6461 7465 6420 7265 6665  a validated refe
-00009950: 7265 6e63 6520 746f 2061 204c 696e 6b20  rence to a Link 
-00009960: 7769 7468 696e 0a20 2020 2020 2020 2074  within.        t
-00009970: 6865 2045 526f 626f 7420 6060 726f 626f  he ERobot ``robo
-00009980: 7460 602e 2020 4966 2060 606c 696e 6b60  t``.  If ``link`
-00009990: 6020 6973 3a0a 0a20 2020 2020 2020 202d  ` is:..        -
-000099a0: 2020 616e 2060 604c 696e 6b60 6020 7265    an ``Link`` re
-000099b0: 6665 7265 6e63 6520 6974 2069 7320 7661  ference it is va
-000099c0: 6c69 6461 7465 6420 6173 2062 656c 6f6e  lidated as belon
-000099d0: 6769 6e67 2074 6f0a 2020 2020 2020 2020  ging to.        
-000099e0: 2020 6060 726f 626f 7460 602e 0a20 2020    ``robot``..   
-000099f0: 2020 2020 202d 2061 2073 7472 696e 672c       - a string,
-00009a00: 2074 6865 6e20 6974 206c 6f6f 6b65 6420   then it looked 
-00009a10: 7570 2069 6e20 7468 6520 726f 626f 7427  up in the robot'
-00009a20: 7320 6c69 6e6b 206e 616d 6520 6469 6374  s link name dict
-00009a30: 696f 6e61 7279 2c20 616e 640a 2020 2020  ionary, and.    
-00009a40: 2020 2020 2020 6120 4c69 6e6b 2072 6566        a Link ref
-00009a50: 6572 656e 6365 2072 6574 7572 6e65 642e  erence returned.
-00009a60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00009a70: 2020 2020 2069 6620 6c69 6e6b 2069 7320       if link is 
-00009a80: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00009a90: 2020 6c69 6e6b 203d 2064 6566 6175 6c74    link = default
-00009aa0: 0a0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-00009ab0: 6e73 7461 6e63 6528 6c69 6e6b 2c20 7374  nstance(link, st
-00009ac0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00009ad0: 6966 206c 696e 6b20 696e 2073 656c 662e  if link in self.
-00009ae0: 6c69 6e6b 5f64 6963 743a 0a20 2020 2020  link_dict:.     
-00009af0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00009b00: 6e20 7365 6c66 2e6c 696e 6b5f 6469 6374  n self.link_dict
-00009b10: 5b6c 696e 6b5d 0a0a 2020 2020 2020 2020  [link]..        
-00009b20: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00009b30: 7272 6f72 2866 226e 6f20 6c69 6e6b 206e  rror(f"no link n
-00009b40: 616d 6564 207b 6c69 6e6b 7d22 290a 0a20  amed {link}").. 
-00009b50: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-00009b60: 7374 616e 6365 286c 696e 6b2c 2042 6173  stance(link, Bas
-00009b70: 654c 696e 6b29 3a0a 2020 2020 2020 2020  eLink):.        
-00009b80: 2020 2020 6966 206c 696e 6b20 696e 2073      if link in s
-00009b90: 656c 662e 6c69 6e6b 733a 0a20 2020 2020  elf.links:.     
-00009ba0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00009bb0: 6e20 6c69 6e6b 0a20 2020 2020 2020 2020  n link.         
-00009bc0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00009bd0: 2020 2020 2020 2020 2066 6f72 2067 7269           for gri
-00009be0: 7070 6572 2069 6e20 7365 6c66 2e67 7269  pper in self.gri
-00009bf0: 7070 6572 733a 0a20 2020 2020 2020 2020  ppers:.         
-00009c00: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
-00009c10: 6e6b 2069 6e20 6772 6970 7065 722e 6c69  nk in gripper.li
-00009c20: 6e6b 733a 0a20 2020 2020 2020 2020 2020  nks:.           
-00009c30: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00009c40: 7572 6e20 6c69 6e6b 0a0a 2020 2020 2020  urn link..      
-00009c50: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00009c60: 5661 6c75 6545 7272 6f72 2822 6c69 6e6b  ValueError("link
-00009c70: 206e 6f74 2069 6e20 726f 626f 7420 6c69   not in robot li
-00009c80: 6e6b 7322 290a 2020 2020 2020 2020 656c  nks").        el
-00009c90: 6966 2069 7369 6e73 7461 6e63 6528 6c69  if isinstance(li
-00009ca0: 6e6b 2c20 4772 6970 7065 7229 3a0a 2020  nk, Gripper):.  
-00009cb0: 2020 2020 2020 2020 2020 666f 7220 6772            for gr
-00009cc0: 6970 7065 7220 696e 2073 656c 662e 6772  ipper in self.gr
-00009cd0: 6970 7065 7273 3a0a 2020 2020 2020 2020  ippers:.        
-00009ce0: 2020 2020 2020 2020 6966 206c 696e 6b20          if link 
-00009cf0: 6973 2067 7269 7070 6572 3a0a 2020 2020  is gripper:.    
-00009d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d10: 7265 7475 726e 2067 7269 7070 6572 2e6c  return gripper.l
-00009d20: 696e 6b73 5b30 5d0a 0a20 2020 2020 2020  inks[0]..       
-00009d30: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00009d40: 4572 726f 7228 2247 7269 7070 6572 206e  Error("Gripper n
-00009d50: 6f74 2069 6e20 726f 626f 7422 290a 0a20  ot in robot").. 
-00009d60: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00009d70: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-00009d80: 7970 6545 7272 6f72 2822 756e 6b6e 6f77  ypeError("unknow
-00009d90: 6e20 6172 6775 6d65 6e74 2229 0a0a 0a23  n argument")...#
-00009da0: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00009db0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009dc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009dd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009de0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2023 0a0a  ============ #..
-00009df0: 0a63 6c61 7373 2045 526f 626f 7428 4261  .class ERobot(Ba
-00009e00: 7365 4552 6f62 6f74 293a 0a20 2020 2064  seERobot):.    d
-00009e10: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00009e20: 2c20 6172 672c 2075 7264 665f 7374 7269  , arg, urdf_stri
-00009e30: 6e67 3d4e 6f6e 652c 2075 7264 665f 6669  ng=None, urdf_fi
-00009e40: 6c65 7061 7468 3d4e 6f6e 652c 202a 2a6b  lepath=None, **k
-00009e50: 7761 7267 7329 3a0a 0a20 2020 2020 2020  wargs):..       
-00009e60: 2069 6620 6973 696e 7374 616e 6365 2861   if isinstance(a
-00009e70: 7267 2c20 4552 6f62 6f74 293a 0a20 2020  rg, ERobot):.   
-00009e80: 2020 2020 2020 2020 2023 2057 6527 7265           # We're
-00009e90: 2070 6173 7365 6420 616e 2045 526f 626f   passed an ERobo
-00009ea0: 742c 2063 6c6f 6e65 2069 740a 2020 2020  t, clone it.    
-00009eb0: 2020 2020 2020 2020 2320 5765 206e 6565          # We nee
-00009ec0: 6420 746f 2070 7265 7365 7276 6520 7468  d to preserve th
-00009ed0: 6520 7061 7265 6e74 206c 696e 6b20 6173  e parent link as
-00009ee0: 2077 6520 636f 7079 0a0a 2020 2020 2020   we copy..      
-00009ef0: 2020 2020 2020 2320 436f 7079 2065 6163        # Copy eac
-00009f00: 6820 6c69 6e6b 2077 6974 6869 6e20 7468  h link within th
-00009f10: 6520 726f 626f 740a 2020 2020 2020 2020  e robot.        
-00009f20: 2020 2020 6c69 6e6b 7320 3d20 5b64 6565      links = [dee
-00009f30: 7063 6f70 7928 6c69 6e6b 2920 666f 7220  pcopy(link) for 
-00009f40: 6c69 6e6b 2069 6e20 6172 672e 6c69 6e6b  link in arg.link
-00009f50: 735d 0a20 2020 2020 2020 2020 2020 2067  s].            g
-00009f60: 7269 7070 6572 5f6c 696e 6b73 203d 205b  ripper_links = [
-00009f70: 5d0a 0a20 2020 2020 2020 2020 2020 2066  ]..            f
-00009f80: 6f72 2067 7269 7070 6572 2069 6e20 6172  or gripper in ar
-00009f90: 672e 6772 6970 7065 7273 3a0a 2020 2020  g.grippers:.    
-00009fa0: 2020 2020 2020 2020 2020 2020 676c 696e              glin
-00009fb0: 6b73 203d 205b 5d0a 2020 2020 2020 2020  ks = [].        
-00009fc0: 2020 2020 2020 2020 666f 7220 6c69 6e6b          for link
-00009fd0: 2069 6e20 6772 6970 7065 722e 6c69 6e6b   in gripper.link
-00009fe0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00009ff0: 2020 2020 2020 2067 6c69 6e6b 732e 6170         glinks.ap
-0000a000: 7065 6e64 2864 6565 7063 6f70 7928 6c69  pend(deepcopy(li
-0000a010: 6e6b 2929 0a0a 2020 2020 2020 2020 2020  nk))..          
-0000a020: 2020 2020 2020 6772 6970 7065 725f 6c69        gripper_li
-0000a030: 6e6b 732e 6170 7065 6e64 2867 6c69 6e6b  nks.append(glink
-0000a040: 735b 305d 290a 2020 2020 2020 2020 2020  s[0]).          
-0000a050: 2020 2020 2020 6c69 6e6b 7320 3d20 6c69        links = li
-0000a060: 6e6b 7320 2b20 676c 696e 6b73 0a0a 2020  nks + glinks..  
-0000a070: 2020 2020 2020 2020 2020 2320 7072 696e            # prin
-0000a080: 7428 6c69 6e6b 735b 395d 2069 7320 6772  t(links[9] is gr
-0000a090: 6970 7065 725f 6c69 6e6b 735b 305d 290a  ipper_links[0]).
-0000a0a0: 2020 2020 2020 2020 2020 2020 2320 7072              # pr
-0000a0b0: 696e 7428 6772 6970 7065 725f 6c69 6e6b  int(gripper_link
-0000a0c0: 7329 0a0a 2020 2020 2020 2020 2020 2020  s)..            
-0000a0d0: 2320 5365 7665 7220 7061 7265 6e74 2063  # Sever parent c
-0000a0e0: 6f6e 6e65 6374 696f 6e2c 2062 7574 2073  onnection, but s
-0000a0f0: 6176 6520 7468 6520 7374 7269 6e67 0a20  ave the string. 
-0000a100: 2020 2020 2020 2020 2020 2023 2054 6865             # The
-0000a110: 2063 6f6e 7374 7275 6374 6f72 2077 696c   constructor wil
-0000a120: 6c20 7069 6563 6520 7468 6973 2074 6f67  l piece this tog
-0000a130: 6574 6865 7220 666f 7220 7573 0a20 2020  ether for us.   
-0000a140: 2020 2020 2020 2020 2066 6f72 206c 696e           for lin
-0000a150: 6b20 696e 206c 696e 6b73 3a0a 2020 2020  k in links:.    
-0000a160: 2020 2020 2020 2020 2020 2020 6c69 6e6b              link
-0000a170: 2e5f 6368 696c 6472 656e 203d 205b 5d0a  ._children = [].
-0000a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a190: 6966 206c 696e 6b2e 7061 7265 6e74 2069  if link.parent i
-0000a1a0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000a1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1c0: 6c69 6e6b 2e5f 7061 7265 6e74 5f6e 616d  link._parent_nam
-0000a1d0: 6520 3d20 6c69 6e6b 2e70 6172 656e 742e  e = link.parent.
-0000a1e0: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
-0000a1f0: 2020 2020 2020 2020 206c 696e 6b2e 5f70           link._p
-0000a200: 6172 656e 7420 3d20 4e6f 6e65 0a0a 2020  arent = None..  
-0000a210: 2020 2020 2020 2020 2020 2320 6772 6970            # grip
-0000a220: 7065 725f 7061 7265 6e74 7320 3d20 5b5d  per_parents = []
-0000a230: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0000a240: 2320 4d61 6b65 2061 206c 6973 7420 6f66  # Make a list of
-0000a250: 206f 6c64 2067 7269 7070 6572 206c 696e   old gripper lin
-0000a260: 6b73 0a20 2020 2020 2020 2020 2020 2023  ks.            #
-0000a270: 2066 6f72 2067 7269 7070 6572 2069 6e20   for gripper in 
-0000a280: 6172 672e 6772 6970 7065 7273 3a0a 2020  arg.grippers:.  
-0000a290: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-0000a2a0: 6772 6970 7065 725f 7061 7265 6e74 732e  gripper_parents.
-0000a2b0: 6170 7065 6e64 2867 7269 7070 6572 2e6c  append(gripper.l
-0000a2c0: 696e 6b73 5b30 5d2e 6e61 6d65 290a 0a20  inks[0].name).. 
-0000a2d0: 2020 2020 2020 2020 2020 2023 2067 7269             # gri
-0000a2e0: 7070 6572 5f6c 696e 6b73 203d 205b 5d0a  pper_links = [].
-0000a2f0: 0a20 2020 2020 2020 2020 2020 2023 2064  .            # d
-0000a300: 6566 2064 6673 286e 6f64 652c 206e 6f64  ef dfs(node, nod
-0000a310: 655f 636f 7079 293a 0a20 2020 2020 2020  e_copy):.       
-0000a320: 2020 2020 2023 2020 2020 2066 6f72 2063       #     for c
-0000a330: 6869 6c64 2069 6e20 6e6f 6465 2e63 6869  hild in node.chi
-0000a340: 6c64 7265 6e3a 0a20 2020 2020 2020 2020  ldren:.         
-0000a350: 2020 2023 2020 2020 2020 2020 2063 6869     #         chi
-0000a360: 6c64 5f63 6f70 7920 3d20 6368 696c 642e  ld_copy = child.
-0000a370: 636f 7079 286e 6f64 655f 636f 7079 290a  copy(node_copy).
-0000a380: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0000a390: 2020 2020 2020 6c69 6e6b 732e 6170 7065        links.appe
-0000a3a0: 6e64 2863 6869 6c64 5f63 6f70 7929 0a0a  nd(child_copy)..
-0000a3b0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0000a3c0: 2020 2020 2020 2320 4966 2074 6869 7320        # If this 
-0000a3d0: 6c69 6e6b 2077 6173 2061 2067 7269 7070  link was a gripp
-0000a3e0: 6572 206c 696e 6b2c 2061 6464 2074 6f20  er link, add to 
-0000a3f0: 7468 6520 6c69 7374 0a20 2020 2020 2020  the list.       
-0000a400: 2020 2020 2023 2020 2020 2020 2020 2069       #         i
-0000a410: 6620 6368 696c 645f 636f 7079 2e6e 616d  f child_copy.nam
-0000a420: 6520 696e 2067 7269 7070 6572 5f70 6172  e in gripper_par
-0000a430: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
-0000a440: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000a450: 6772 6970 7065 725f 6c69 6e6b 732e 6170  gripper_links.ap
-0000a460: 7065 6e64 2863 6869 6c64 5f63 6f70 7929  pend(child_copy)
-0000a470: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0000a480: 2020 2020 2020 2020 6466 7328 6368 696c          dfs(chil
-0000a490: 642c 2063 6869 6c64 5f63 6f70 7929 0a0a  d, child_copy)..
-0000a4a0: 2020 2020 2020 2020 2020 2020 2320 6c69              # li
-0000a4b0: 6e6b 3020 3d20 6172 672e 6c69 6e6b 735b  nk0 = arg.links[
-0000a4c0: 305d 0a20 2020 2020 2020 2020 2020 2023  0].            #
-0000a4d0: 206c 696e 6b73 2e61 7070 656e 6428 6172   links.append(ar
-0000a4e0: 672e 6c69 6e6b 735b 305d 2e63 6f70 7928  g.links[0].copy(
-0000a4f0: 2929 0a20 2020 2020 2020 2020 2020 2023  )).            #
-0000a500: 2064 6673 286c 696e 6b30 2c20 6c69 6e6b   dfs(link0, link
-0000a510: 735b 305d 290a 0a20 2020 2020 2020 2020  s[0])..         
-0000a520: 2020 2023 2070 7269 6e74 2867 7269 7070     # print(gripp
-0000a530: 6572 5f6c 696e 6b73 5b30 5d2e 6a69 6e64  er_links[0].jind
-0000a540: 6578 290a 0a20 2020 2020 2020 2020 2020  ex)..           
-0000a550: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-0000a560: 5f28 6c69 6e6b 732c 2067 7269 7070 6572  _(links, gripper
-0000a570: 5f6c 696e 6b73 3d67 7269 7070 6572 5f6c  _links=gripper_l
-0000a580: 696e 6b73 2c20 2a2a 6b77 6172 6773 290a  inks, **kwargs).
-0000a590: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0000a5a0: 2069 2c20 6772 6970 7065 7220 696e 2065   i, gripper in e
-0000a5b0: 6e75 6d65 7261 7465 2873 656c 662e 6772  numerate(self.gr
-0000a5c0: 6970 7065 7273 293a 0a20 2020 2020 2020  ippers):.       
-0000a5d0: 2020 2020 2020 2020 2067 7269 7070 6572           gripper
-0000a5e0: 2e74 6f6f 6c20 3d20 6172 672e 6772 6970  .tool = arg.grip
-0000a5f0: 7065 7273 5b69 5d2e 746f 6f6c 2e63 6f70  pers[i].tool.cop
-0000a600: 7928 290a 0a20 2020 2020 2020 2020 2020  y()..           
-0000a610: 2023 2069 6620 6172 672e 7164 6c69 6d20   # if arg.qdlim 
-0000a620: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000a630: 2020 2020 2020 2020 2023 2020 2020 2073           #     s
-0000a640: 656c 662e 7164 6c69 6d20 3d20 6172 672e  elf.qdlim = arg.
-0000a650: 7164 6c69 6d0a 0a20 2020 2020 2020 2020  qdlim..         
-0000a660: 2020 2073 656c 662e 5f75 7264 665f 7374     self._urdf_st
-0000a670: 7269 6e67 203d 2061 7267 2e75 7264 665f  ring = arg.urdf_
-0000a680: 7374 7269 6e67 0a20 2020 2020 2020 2020  string.         
-0000a690: 2020 2073 656c 662e 5f75 7264 665f 6669     self._urdf_fi
-0000a6a0: 6c65 7061 7468 203d 2061 7267 2e75 7264  lepath = arg.urd
-0000a6b0: 665f 6669 6c65 7061 7468 0a0a 2020 2020  f_filepath..    
-0000a6c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000a6d0: 2020 2020 2020 7365 6c66 2e5f 7572 6466        self._urdf
-0000a6e0: 5f73 7472 696e 6720 3d20 7572 6466 5f73  _string = urdf_s
-0000a6f0: 7472 696e 670a 2020 2020 2020 2020 2020  tring.          
-0000a700: 2020 7365 6c66 2e5f 7572 6466 5f66 696c    self._urdf_fil
-0000a710: 6570 6174 6820 3d20 7572 6466 5f66 696c  epath = urdf_fil
-0000a720: 6570 6174 680a 0a20 2020 2020 2020 2020  epath..         
-0000a730: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0000a740: 2861 7267 2c20 4448 526f 626f 7429 3a0a  (arg, DHRobot):.
+00000010: 7974 686f 6e0a 0a22 2222 0a40 6175 7468  ython..""".@auth
+00000020: 6f72 3a20 4a65 7373 6520 4861 7669 6c61  or: Jesse Havila
+00000030: 6e64 0a40 6175 7468 6f72 3a20 5065 7465  nd.@author: Pete
+00000040: 7220 436f 726b 650a 2222 220a 0a23 2069  r Corke."""..# i
+00000050: 6d70 6f72 7420 7379 730a 6672 6f6d 2061  mport sys.from a
+00000060: 6263 2069 6d70 6f72 7420 4142 430a 6672  bc import ABC.fr
+00000070: 6f6d 2063 6f70 7920 696d 706f 7274 2064  om copy import d
+00000080: 6565 7063 6f70 790a 6672 6f6d 2066 756e  eepcopy.from fun
+00000090: 6374 6f6f 6c73 2069 6d70 6f72 7420 6c72  ctools import lr
+000000a0: 755f 6361 6368 650a 6672 6f6d 2074 7970  u_cache.from typ
+000000b0: 696e 6720 696d 706f 7274 2028 0a20 2020  ing import (.   
+000000c0: 2049 4f2c 0a20 2020 2054 5950 455f 4348   IO,.    TYPE_CH
+000000d0: 4543 4b49 4e47 2c0a 2020 2020 416e 792c  ECKING,.    Any,
+000000e0: 0a20 2020 2043 616c 6c61 626c 652c 0a20  .    Callable,. 
+000000f0: 2020 2047 656e 6572 6963 2c0a 2020 2020     Generic,.    
+00000100: 4c69 7374 2c0a 2020 2020 5479 7065 5661  List,.    TypeVa
+00000110: 722c 0a20 2020 2055 6e69 6f6e 2c0a 2020  r,.    Union,.  
+00000120: 2020 4469 6374 2c0a 2020 2020 5475 706c    Dict,.    Tupl
+00000130: 652c 0a20 2020 2053 6574 2c0a 290a 0a66  e,.    Set,.)..f
+00000140: 726f 6d20 7479 7069 6e67 5f65 7874 656e  rom typing_exten
+00000150: 7369 6f6e 7320 696d 706f 7274 204c 6974  sions import Lit
+00000160: 6572 616c 2061 7320 4c0a 0a69 6d70 6f72  eral as L..impor
+00000170: 7420 6e75 6d70 7920 6173 206e 700a 0a66  t numpy as np..f
+00000180: 726f 6d20 7370 6174 6961 6c6d 6174 6820  rom spatialmath 
+00000190: 696d 706f 7274 2053 4533 0a66 726f 6d20  import SE3.from 
+000001a0: 7370 6174 6961 6c6d 6174 682e 6261 7365  spatialmath.base
+000001b0: 2e61 7267 6368 6563 6b20 696d 706f 7274  .argcheck import
+000001c0: 2028 0a20 2020 2067 6574 7665 6374 6f72   (.    getvector
+000001d0: 2c0a 2020 2020 6765 746d 6174 7269 782c  ,.    getmatrix,
+000001e0: 0a20 2020 2067 6574 756e 6974 2c0a 290a  .    getunit,.).
+000001f0: 0a66 726f 6d20 616e 7369 7461 626c 6520  .from ansitable 
+00000200: 696d 706f 7274 2041 4e53 4954 6162 6c65  import ANSITable
+00000210: 2c20 436f 6c75 6d6e 0a66 726f 6d20 7377  , Column.from sw
+00000220: 6966 7420 696d 706f 7274 2053 7769 6674  ift import Swift
+00000230: 0a66 726f 6d20 7370 6174 6961 6c67 656f  .from spatialgeo
+00000240: 6d65 7472 7920 696d 706f 7274 2053 6365  metry import Sce
+00000250: 6e65 4e6f 6465 0a0a 6672 6f6d 2072 6f62  neNode..from rob
+00000260: 6f74 6963 7374 6f6f 6c62 6f78 2e66 6b6e  oticstoolbox.fkn
+00000270: 6d20 696d 706f 7274 2052 6f62 6f74 5f6c  m import Robot_l
+00000280: 696e 6b5f 540a 696d 706f 7274 2072 6f62  ink_T.import rob
+00000290: 6f74 6963 7374 6f6f 6c62 6f78 2061 7320  oticstoolbox as 
+000002a0: 7274 620a 6672 6f6d 2072 6f62 6f74 6963  rtb.from robotic
+000002b0: 7374 6f6f 6c62 6f78 2e72 6f62 6f74 2e47  stoolbox.robot.G
+000002c0: 7269 7070 6572 2069 6d70 6f72 7420 4772  ripper import Gr
+000002d0: 6970 7065 720a 6672 6f6d 2072 6f62 6f74  ipper.from robot
+000002e0: 6963 7374 6f6f 6c62 6f78 2e72 6f62 6f74  icstoolbox.robot
+000002f0: 2e4c 696e 6b20 696d 706f 7274 2042 6173  .Link import Bas
+00000300: 654c 696e 6b2c 204c 696e 6b0a 6672 6f6d  eLink, Link.from
+00000310: 2072 6f62 6f74 6963 7374 6f6f 6c62 6f78   roboticstoolbox
+00000320: 2e72 6f62 6f74 2e45 5453 2069 6d70 6f72  .robot.ETS impor
+00000330: 7420 4554 530a 6672 6f6d 2072 6f62 6f74  t ETS.from robot
+00000340: 6963 7374 6f6f 6c62 6f78 2e72 6f62 6f74  icstoolbox.robot
+00000350: 2e45 5420 696d 706f 7274 2045 540a 6672  .ET import ET.fr
+00000360: 6f6d 2072 6f62 6f74 6963 7374 6f6f 6c62  om roboticstoolb
+00000370: 6f78 2e72 6f62 6f74 2e44 796e 616d 6963  ox.robot.Dynamic
+00000380: 7320 696d 706f 7274 2044 796e 616d 6963  s import Dynamic
+00000390: 734d 6978 696e 0a66 726f 6d20 726f 626f  sMixin.from robo
+000003a0: 7469 6373 746f 6f6c 626f 782e 746f 6f6c  ticstoolbox.tool
+000003b0: 732e 7479 7065 7320 696d 706f 7274 2041  s.types import A
+000003c0: 7272 6179 4c69 6b65 2c20 4e44 4172 7261  rrayLike, NDArra
+000003d0: 790a 6672 6f6d 2072 6f62 6f74 6963 7374  y.from roboticst
+000003e0: 6f6f 6c62 6f78 2e74 6f6f 6c73 2e70 6172  oolbox.tools.par
+000003f0: 616d 7320 696d 706f 7274 2072 7462 5f67  ams import rtb_g
+00000400: 6574 5f70 6172 616d 0a66 726f 6d20 726f  et_param.from ro
+00000410: 626f 7469 6373 746f 6f6c 626f 782e 6261  boticstoolbox.ba
+00000420: 636b 656e 6473 2e50 7950 6c6f 7420 696d  ckends.PyPlot im
+00000430: 706f 7274 2050 7950 6c6f 742c 2050 7950  port PyPlot, PyP
+00000440: 6c6f 7432 0a66 726f 6d20 726f 626f 7469  lot2.from roboti
+00000450: 6373 746f 6f6c 626f 782e 6261 636b 656e  cstoolbox.backen
+00000460: 6473 2e50 7950 6c6f 742e 456c 6c69 7073  ds.PyPlot.Ellips
+00000470: 6550 6c6f 7420 696d 706f 7274 2045 6c6c  ePlot import Ell
+00000480: 6970 7365 506c 6f74 0a0a 0a69 6620 5459  ipsePlot...if TY
+00000490: 5045 5f43 4845 434b 494e 473a 0a20 2020  PE_CHECKING:.   
+000004a0: 2066 726f 6d20 6d61 7470 6c6f 746c 6962   from matplotlib
+000004b0: 2e63 6d20 696d 706f 7274 2043 6f6c 6f72  .cm import Color
+000004c0: 2020 2320 7072 6167 6d61 206e 6f63 6f76    # pragma nocov
+000004d0: 6572 0a65 6c73 653a 0a20 2020 2043 6f6c  er.else:.    Col
+000004e0: 6f72 203d 204e 6f6e 650a 0a74 7279 3a0a  or = None..try:.
+000004f0: 2020 2020 6672 6f6d 206d 6174 706c 6f74      from matplot
+00000500: 6c69 6220 696d 706f 7274 2063 6f6c 6f72  lib import color
+00000510: 730a 2020 2020 6672 6f6d 206d 6174 706c  s.    from matpl
+00000520: 6f74 6c69 6220 696d 706f 7274 2063 6d0a  otlib import cm.
+00000530: 0a20 2020 205f 6d70 6c20 3d20 5472 7565  .    _mpl = True
+00000540: 0a65 7863 6570 7420 496d 706f 7274 4572  .except ImportEr
+00000550: 726f 723a 2020 2320 7072 6167 6d61 206e  ror:  # pragma n
+00000560: 6f63 6f76 6572 0a20 2020 2063 6d20 3d20  ocover.    cm = 
+00000570: 7374 720a 2020 2020 7061 7373 0a0a 2320  str.    pass..# 
+00000580: 5f64 6566 6175 6c74 5f62 6163 6b65 6e64  _default_backend
+00000590: 203d 204e 6f6e 650a 0a23 2041 2067 656e   = None..# A gen
+000005a0: 6572 6963 2074 7970 6520 7661 7269 6162  eric type variab
+000005b0: 6c65 2072 6570 7265 7365 6e74 696e 6720  le representing 
+000005c0: 616e 7920 7375 6263 6c61 7373 206f 6620  any subclass of 
+000005d0: 4261 7365 4c69 6e6b 0a4c 696e 6b54 7970  BaseLink.LinkTyp
+000005e0: 6520 3d20 5479 7065 5661 7228 224c 696e  e = TypeVar("Lin
+000005f0: 6b54 7970 6522 2c20 626f 756e 643d 4261  kType", bound=Ba
+00000600: 7365 4c69 6e6b 290a 0a0a 636c 6173 7320  seLink)...class 
+00000610: 4261 7365 526f 626f 7428 5363 656e 654e  BaseRobot(SceneN
+00000620: 6f64 652c 2044 796e 616d 6963 734d 6978  ode, DynamicsMix
+00000630: 696e 2c20 4142 432c 2047 656e 6572 6963  in, ABC, Generic
+00000640: 5b4c 696e 6b54 7970 655d 293a 0a20 2020  [LinkType]):.   
+00000650: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+00000660: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00000670: 2020 2020 206c 696e 6b73 3a20 4c69 7374       links: List
+00000680: 5b4c 696e 6b54 7970 655d 2c0a 2020 2020  [LinkType],.    
+00000690: 2020 2020 6772 6970 7065 725f 6c69 6e6b      gripper_link
+000006a0: 733a 2055 6e69 6f6e 5b4c 696e 6b54 7970  s: Union[LinkTyp
+000006b0: 652c 204c 6973 745b 4c69 6e6b 5479 7065  e, List[LinkType
+000006c0: 5d2c 204e 6f6e 655d 203d 204e 6f6e 652c  ], None] = None,
+000006d0: 0a20 2020 2020 2020 206e 616d 653a 2073  .        name: s
+000006e0: 7472 203d 2022 222c 0a20 2020 2020 2020  tr = "",.       
+000006f0: 206d 616e 7566 6163 7475 7265 723a 2073   manufacturer: s
+00000700: 7472 203d 2022 222c 0a20 2020 2020 2020  tr = "",.       
+00000710: 2063 6f6d 6d65 6e74 3a20 7374 7220 3d20   comment: str = 
+00000720: 2222 2c0a 2020 2020 2020 2020 6261 7365  "",.        base
+00000730: 3a20 556e 696f 6e5b 4e44 4172 7261 792c  : Union[NDArray,
+00000740: 2053 4533 2c20 4e6f 6e65 5d20 3d20 4e6f   SE3, None] = No
+00000750: 6e65 2c0a 2020 2020 2020 2020 746f 6f6c  ne,.        tool
+00000760: 3a20 556e 696f 6e5b 4e44 4172 7261 792c  : Union[NDArray,
+00000770: 2053 4533 2c20 4e6f 6e65 5d20 3d20 4e6f   SE3, None] = No
+00000780: 6e65 2c0a 2020 2020 2020 2020 6772 6176  ne,.        grav
+00000790: 6974 793a 2041 7272 6179 4c69 6b65 203d  ity: ArrayLike =
+000007a0: 205b 302c 2030 2c20 2d39 2e38 315d 2c0a   [0, 0, -9.81],.
+000007b0: 2020 2020 2020 2020 6b65 7977 6f72 6473          keywords
+000007c0: 3a20 556e 696f 6e5b 4c69 7374 5b73 7472  : Union[List[str
+000007d0: 5d2c 2054 7570 6c65 5b73 7472 5d5d 203d  ], Tuple[str]] =
+000007e0: 205b 5d2c 0a20 2020 2020 2020 2073 796d   [],.        sym
+000007f0: 626f 6c69 633a 2062 6f6f 6c20 3d20 4661  bolic: bool = Fa
+00000800: 6c73 652c 0a20 2020 2020 2020 2063 6f6e  lse,.        con
+00000810: 6669 6773 3a20 556e 696f 6e5b 4469 6374  figs: Union[Dict
+00000820: 5b73 7472 2c20 4e44 4172 7261 795d 2c20  [str, NDArray], 
+00000830: 4e6f 6e65 5d20 3d20 4e6f 6e65 2c0a 2020  None] = None,.  
+00000840: 2020 2020 2020 6368 6563 6b5f 6a69 6e64        check_jind
+00000850: 6578 3a20 626f 6f6c 203d 2054 7275 652c  ex: bool = True,
+00000860: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00000870: 2320 496e 6974 6961 6c69 7365 2074 6865  # Initialise the
+00000880: 2073 6365 6e65 206e 6f64 650a 2020 2020   scene node.    
+00000890: 2020 2020 5363 656e 654e 6f64 652e 5f5f      SceneNode.__
+000008a0: 696e 6974 5f5f 2873 656c 6629 0a0a 2020  init__(self)..  
+000008b0: 2020 2020 2020 2320 4c65 7473 2073 6f72        # Lets sor
+000008c0: 7420 6f75 7420 6c69 6e6b 7320 6e6f 770a  t out links now.
+000008d0: 2020 2020 2020 2020 7365 6c66 2e5f 6c69          self._li
+000008e0: 6e6b 6469 6374 3a20 4469 6374 5b73 7472  nkdict: Dict[str
+000008f0: 2c20 4c69 6e6b 5479 7065 5d20 3d20 7b7d  , LinkType] = {}
+00000900: 0a0a 2020 2020 2020 2020 2320 536f 7274  ..        # Sort
+00000910: 206c 696e 6b73 2061 6e64 2073 6574 2073   links and set s
+00000920: 656c 662e 6c69 6e6b 2c20 7365 6c66 2e6e  elf.link, self.n
+00000930: 2c20 7365 6c66 2e62 6173 655f 6c69 6e6b  , self.base_link
+00000940: 2c0a 2020 2020 2020 2020 2320 7365 6c66  ,.        # self
+00000950: 2e65 655f 6c69 6e6b 730a 2020 2020 2020  .ee_links.      
+00000960: 2020 7365 6c66 2e5f 736f 7274 5f6c 696e    self._sort_lin
+00000970: 6b73 286c 696e 6b73 2c20 6772 6970 7065  ks(links, grippe
+00000980: 725f 6c69 6e6b 732c 2063 6865 636b 5f6a  r_links, check_j
+00000990: 696e 6465 7829 0a0a 2020 2020 2020 2020  index)..        
+000009a0: 2320 4669 7820 6e75 6d62 6572 206f 6620  # Fix number of 
+000009b0: 6c69 6e6b 7320 666f 7220 6772 6970 7065  links for grippe
+000009c0: 7220 6c69 6e6b 730a 2020 2020 2020 2020  r links.        
+000009d0: 7365 6c66 2e5f 6e6c 696e 6b73 203d 206c  self._nlinks = l
+000009e0: 656e 286c 696e 6b73 290a 0a20 2020 2020  en(links)..     
+000009f0: 2020 2066 6f72 2067 7269 7070 6572 2069     for gripper i
+00000a00: 6e20 7365 6c66 2e67 7269 7070 6572 733a  n self.grippers:
+00000a10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00000a20: 662e 5f6e 6c69 6e6b 7320 2b3d 206c 656e  f._nlinks += len
+00000a30: 2867 7269 7070 6572 2e6c 696e 6b73 290a  (gripper.links).
+00000a40: 0a20 2020 2020 2020 2023 2053 6574 2074  .        # Set t
+00000a50: 6865 2070 6f73 6520 6f66 2074 6865 2072  he pose of the r
+00000a60: 6f62 6f74 2069 6e20 7468 6520 776f 726c  obot in the worl
+00000a70: 6420 6672 616d 650a 2020 2020 2020 2020  d frame.        
+00000a80: 2320 696e 2074 6865 2073 6365 6e65 6e6f  # in the sceneno
+00000a90: 6465 206f 626a 6563 7420 746f 2061 206e  de object to a n
+00000aa0: 756d 7079 2061 7272 6179 0a20 2020 2020  umpy array.     
+00000ab0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00000ac0: 2862 6173 652c 2053 4533 293a 0a20 2020  (base, SE3):.   
+00000ad0: 2020 2020 2020 2020 2073 656c 662e 5f54           self._T
+00000ae0: 203d 2062 6173 652e 410a 2020 2020 2020   = base.A.      
+00000af0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00000b00: 6528 6261 7365 2c20 6e70 2e6e 6461 7272  e(base, np.ndarr
+00000b10: 6179 293a 0a20 2020 2020 2020 2020 2020  ay):.           
+00000b20: 2073 656c 662e 5f54 203d 2062 6173 650a   self._T = base.
+00000b30: 0a20 2020 2020 2020 2023 2053 6574 2074  .        # Set t
+00000b40: 6865 2072 6f62 6f74 2074 6f6f 6c20 7472  he robot tool tr
+00000b50: 616e 7366 6f72 6d0a 2020 2020 2020 2020  ansform.        
+00000b60: 6966 2069 7369 6e73 7461 6e63 6528 746f  if isinstance(to
+00000b70: 6f6c 2c20 5345 3329 3a0a 2020 2020 2020  ol, SE3):.      
+00000b80: 2020 2020 2020 7365 6c66 2e5f 746f 6f6c        self._tool
+00000b90: 203d 2074 6f6f 6c2e 410a 2020 2020 2020   = tool.A.      
+00000ba0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00000bb0: 6528 746f 6f6c 2c20 6e70 2e6e 6461 7272  e(tool, np.ndarr
+00000bc0: 6179 293a 0a20 2020 2020 2020 2020 2020  ay):.           
+00000bd0: 2073 656c 662e 5f74 6f6f 6c20 3d20 746f   self._tool = to
+00000be0: 6f6c 0a20 2020 2020 2020 2065 6c73 653a  ol.        else:
+00000bf0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00000c00: 662e 5f74 6f6f 6c20 3d20 6e70 2e65 7965  f._tool = np.eye
+00000c10: 2834 290a 0a20 2020 2020 2020 2023 2053  (4)..        # S
+00000c20: 6574 2074 6865 206b 6579 776f 7264 730a  et the keywords.
+00000c30: 2020 2020 2020 2020 6966 206b 6579 776f          if keywo
+00000c40: 7264 7320 6973 206e 6f74 204e 6f6e 6520  rds is not None 
+00000c50: 616e 6420 6e6f 7420 6973 696e 7374 616e  and not isinstan
+00000c60: 6365 286b 6579 776f 7264 732c 2028 7475  ce(keywords, (tu
+00000c70: 706c 652c 206c 6973 7429 293a 0a20 2020  ple, list)):.   
+00000c80: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+00000c90: 7970 6545 7272 6f72 2822 6b65 7977 6f72  ypeError("keywor
+00000ca0: 6473 206d 7573 7420 6265 2061 206c 6973  ds must be a lis
+00000cb0: 7420 6f72 2074 7570 6c65 2229 0a20 2020  t or tuple").   
+00000cc0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00000cd0: 2020 2020 2020 2073 656c 662e 5f6b 6579         self._key
+00000ce0: 776f 7264 7320 3d20 6c69 7374 286b 6579  words = list(key
+00000cf0: 776f 7264 7329 0a0a 2020 2020 2020 2020  words)..        
+00000d00: 2320 4772 6176 6974 7920 6973 2069 6e20  # Gravity is in 
+00000d10: 7468 6520 6e65 6761 7469 7665 2d7a 2064  the negative-z d
+00000d20: 6972 6563 7469 6f6e 2e0a 2020 2020 2020  irection..      
+00000d30: 2020 7365 6c66 2e67 7261 7669 7479 203d    self.gravity =
+00000d40: 206e 702e 6172 7261 7928 6772 6176 6974   np.array(gravit
+00000d50: 7929 0a0a 2020 2020 2020 2020 2320 4261  y)..        # Ba
+00000d60: 7369 6320 6172 6775 6d65 6e74 730a 2020  sic arguments.  
+00000d70: 2020 2020 2020 7365 6c66 2e6e 616d 6520        self.name 
+00000d80: 3d20 6e61 6d65 0a20 2020 2020 2020 2073  = name.        s
+00000d90: 656c 662e 6d61 6e75 6661 6374 7572 6572  elf.manufacturer
+00000da0: 203d 206d 616e 7566 6163 7475 7265 720a   = manufacturer.
+00000db0: 2020 2020 2020 2020 7365 6c66 2e63 6f6d          self.com
+00000dc0: 6d65 6e74 203d 2063 6f6d 6d65 6e74 0a20  ment = comment. 
+00000dd0: 2020 2020 2020 2073 656c 662e 5f73 796d         self._sym
+00000de0: 626f 6c69 6320 3d20 7379 6d62 6f6c 6963  bolic = symbolic
+00000df0: 0a20 2020 2020 2020 2073 656c 662e 5f72  .        self._r
+00000e00: 6561 6368 203d 204e 6f6e 650a 2020 2020  each = None.    
+00000e10: 2020 2020 7365 6c66 2e5f 6861 7364 796e      self._hasdyn
+00000e20: 616d 6963 7320 3d20 4661 6c73 650a 2020  amics = False.  
+00000e30: 2020 2020 2020 7365 6c66 2e5f 6861 7367        self._hasg
+00000e40: 656f 6d65 7472 7920 3d20 4661 6c73 650a  eometry = False.
+00000e50: 2020 2020 2020 2020 7365 6c66 2e5f 6861          self._ha
+00000e60: 7363 6f6c 6c69 7369 6f6e 203d 2046 616c  scollision = Fal
+00000e70: 7365 0a20 2020 2020 2020 2073 656c 662e  se.        self.
+00000e80: 5f75 7264 665f 7374 7269 6e67 203d 2022  _urdf_string = "
+00000e90: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
+00000ea0: 7572 6466 5f66 696c 6570 6174 6820 3d20  urdf_filepath = 
+00000eb0: 2222 0a0a 2020 2020 2020 2020 2320 5469  ""..        # Ti
+00000ec0: 6d65 2074 6f20 6368 6563 6b6f 7574 2074  me to checkout t
+00000ed0: 6865 206c 696e 6b73 2066 6f72 2067 656f  he links for geo
+00000ee0: 6d65 7472 7920 696e 666f 726d 6174 696f  metry informatio
+00000ef0: 6e0a 2020 2020 2020 2020 666f 7220 6c69  n.        for li
+00000f00: 6e6b 2069 6e20 7365 6c66 2e6c 696e 6b73  nk in self.links
+00000f10: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00000f20: 4164 6420 6c69 6e6b 2062 6163 6b20 746f  Add link back to
+00000f30: 2072 6f62 6f74 206f 626a 6563 740a 2020   robot object.  
+00000f40: 2020 2020 2020 2020 2020 6c69 6e6b 2e5f            link._
+00000f50: 726f 626f 7420 3d20 7365 6c66 0a0a 2020  robot = self..  
+00000f60: 2020 2020 2020 2020 2020 6966 206c 696e            if lin
+00000f70: 6b2e 6861 7364 796e 616d 6963 733a 0a20  k.hasdynamics:. 
+00000f80: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00000f90: 656c 662e 5f68 6173 6479 6e61 6d69 6373  elf._hasdynamics
+00000fa0: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00000fb0: 2020 2020 6966 206c 696e 6b2e 6765 6f6d      if link.geom
+00000fc0: 6574 7279 3a0a 2020 2020 2020 2020 2020  etry:.          
+00000fd0: 2020 2020 2020 7365 6c66 2e5f 6861 7367        self._hasg
+00000fe0: 656f 6d65 7472 7920 3d20 5b5d 0a20 2020  eometry = [].   
+00000ff0: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
+00001000: 2e63 6f6c 6c69 7369 6f6e 3a0a 2020 2020  .collision:.    
+00001010: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00001020: 2e5f 6861 7363 6f6c 6c69 7369 6f6e 203d  ._hascollision =
+00001030: 2054 7275 650a 0a20 2020 2020 2020 2020   True..         
+00001040: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00001050: 286c 696e 6b2c 204c 696e 6b29 3a0a 2020  (link, Link):.  
+00001060: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00001070: 206c 656e 286c 696e 6b2e 6765 6f6d 6574   len(link.geomet
+00001080: 7279 2920 3e20 303a 0a20 2020 2020 2020  ry) > 0:.       
+00001090: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000010a0: 662e 5f68 6173 6765 6f6d 6574 7279 203d  f._hasgeometry =
+000010b0: 2054 7275 650a 0a20 2020 2020 2020 2023   True..        #
+000010c0: 2043 7572 7265 6e74 206a 6f69 6e74 2063   Current joint c
+000010d0: 6f6e 6669 6775 7261 6974 6f6e 2c20 7665  onfiguraiton, ve
+000010e0: 6c6f 6369 7479 2c20 6163 6365 6c65 7261  locity, accelera
+000010f0: 7469 6f6e 0a20 2020 2020 2020 2073 656c  tion.        sel
+00001100: 662e 7120 3d20 6e70 2e7a 6572 6f73 2873  f.q = np.zeros(s
+00001110: 656c 662e 6e29 0a20 2020 2020 2020 2073  elf.n).        s
+00001120: 656c 662e 7164 203d 206e 702e 7a65 726f  elf.qd = np.zero
+00001130: 7328 7365 6c66 2e6e 290a 2020 2020 2020  s(self.n).      
+00001140: 2020 7365 6c66 2e71 6464 203d 206e 702e    self.qdd = np.
+00001150: 7a65 726f 7328 7365 6c66 2e6e 290a 0a20  zeros(self.n).. 
+00001160: 2020 2020 2020 2023 2054 6865 2063 7572         # The cur
+00001170: 7265 6e74 2063 6f6e 7472 6f6c 206d 6f64  rent control mod
+00001180: 6520 6f66 2074 6865 2072 6f62 6f74 0a20  e of the robot. 
+00001190: 2020 2020 2020 2073 656c 662e 636f 6e74         self.cont
+000011a0: 726f 6c5f 6d6f 6465 203d 2022 7622 0a0a  rol_mode = "v"..
+000011b0: 2020 2020 2020 2020 2320 5365 7420 7570          # Set up
+000011c0: 206e 616d 6564 2063 6f6e 6669 6775 7261   named configura
+000011d0: 7469 6f6e 2070 726f 7065 7274 790a 2020  tion property.  
+000011e0: 2020 2020 2020 6966 2063 6f6e 6669 6773        if configs
+000011f0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00001200: 2020 2020 2020 636f 6e66 6967 7320 3d20        configs = 
+00001210: 6469 6374 2829 0a20 2020 2020 2020 2073  dict().        s
+00001220: 656c 662e 5f63 6f6e 6669 6773 203d 2063  elf._configs = c
+00001230: 6f6e 6669 6773 0a0a 2020 2020 2020 2020  onfigs..        
+00001240: 2320 4120 666c 6167 2066 6f72 2077 6174  # A flag for wat
+00001250: 6368 696e 6720 6479 6e61 6d69 6373 2070  ching dynamics p
+00001260: 726f 7065 7274 6965 730a 2020 2020 2020  roperties.      
+00001270: 2020 7365 6c66 2e5f 6479 6e63 6861 6e67    self._dynchang
+00001280: 6564 203d 2046 616c 7365 0a0a 2020 2020  ed = False..    
+00001290: 2020 2020 2320 5365 7420 7570 2071 6c69      # Set up qli
+000012a0: 6d0a 2020 2020 2020 2020 716c 696d 203d  m.        qlim =
+000012b0: 206e 702e 7a65 726f 7328 2832 2c20 7365   np.zeros((2, se
+000012c0: 6c66 2e6e 2929 0a20 2020 2020 2020 206a  lf.n)).        j
+000012d0: 203d 2030 0a0a 2020 2020 2020 2020 666f   = 0..        fo
+000012e0: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
+000012f0: 2873 656c 662e 6c69 6e6b 7329 293a 0a20  (self.links)):. 
+00001300: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00001310: 6c66 2e6c 696e 6b73 5b69 5d2e 6973 6a6f  lf.links[i].isjo
+00001320: 696e 743a 0a20 2020 2020 2020 2020 2020  int:.           
+00001330: 2020 2020 2071 6c69 6d5b 3a2c 206a 5d20       qlim[:, j] 
+00001340: 3d20 7365 6c66 2e6c 696e 6b73 5b69 5d2e  = self.links[i].
+00001350: 716c 696d 0a20 2020 2020 2020 2020 2020  qlim.           
+00001360: 2020 2020 206a 202b 3d20 310a 2020 2020       j += 1.    
+00001370: 2020 2020 7365 6c66 2e5f 716c 696d 203d      self._qlim =
+00001380: 2071 6c69 6d0a 0a20 2020 2020 2020 2073   qlim..        s
+00001390: 656c 662e 5f76 616c 6964 5f71 6c69 6d20  elf._valid_qlim 
+000013a0: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
+000013b0: 666f 7220 6920 696e 2072 616e 6765 2873  for i in range(s
+000013c0: 656c 662e 6e29 3a0a 2020 2020 2020 2020  elf.n):.        
+000013d0: 2020 2020 6966 2061 6e79 2871 6c69 6d5b      if any(qlim[
+000013e0: 3a2c 2069 5d20 213d 2030 2920 616e 6420  :, i] != 0) and 
+000013f0: 6e6f 7420 616e 7928 6e70 2e69 736e 616e  not any(np.isnan
+00001400: 2871 6c69 6d5b 3a2c 2069 5d29 293a 0a20  (qlim[:, i])):. 
+00001410: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00001420: 656c 662e 5f76 616c 6964 5f71 6c69 6d20  elf._valid_qlim 
+00001430: 3d20 5472 7565 0a0a 2020 2020 2020 2020  = True..        
+00001440: 2320 5363 656e 654e 6f64 652c 2073 6574  # SceneNode, set
+00001450: 2061 2072 6566 6572 656e 6365 2074 6f20   a reference to 
+00001460: 7468 6520 6669 7273 7420 6c69 6e6b 0a20  the first link. 
+00001470: 2020 2020 2020 2073 656c 662e 7363 656e         self.scen
+00001480: 655f 6368 696c 6472 656e 203d 205b 7365  e_children = [se
+00001490: 6c66 2e6c 696e 6b73 5b30 5d5d 2020 2320  lf.links[0]]  # 
+000014a0: 7479 7065 3a20 6967 6e6f 7265 0a0a 2020  type: ignore..  
+000014b0: 2020 2020 2020 7365 6c66 2e5f 6465 6661        self._defa
+000014c0: 756c 745f 6261 636b 656e 6420 3d20 4e6f  ult_backend = No
+000014d0: 6e65 0a0a 2020 2020 2320 2d2d 2d2d 2d2d  ne..    # ------
+000014e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000014f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20  --------------- 
+00001520: 230a 2020 2020 2320 2d2d 2d2d 2d2d 2d2d  #.    # --------
+00001530: 2d20 5072 6976 6174 6520 4d65 7468 6f64  - Private Method
+00001540: 7320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s --------------
+00001550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a  ------------- #.
+00001570: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00001580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000015a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000015b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a 0a20  ----------- #.. 
+000015c0: 2020 2064 6566 205f 736f 7274 5f6c 696e     def _sort_lin
+000015d0: 6b73 280a 2020 2020 2020 2020 7365 6c66  ks(.        self
+000015e0: 2c0a 2020 2020 2020 2020 6c69 6e6b 733a  ,.        links:
+000015f0: 204c 6973 745b 4c69 6e6b 5479 7065 5d2c   List[LinkType],
+00001600: 0a20 2020 2020 2020 2067 7269 7070 6572  .        gripper
+00001610: 5f6c 696e 6b73 3a20 556e 696f 6e5b 4c69  _links: Union[Li
+00001620: 6e6b 5479 7065 2c20 4c69 7374 5b4c 696e  nkType, List[Lin
+00001630: 6b54 7970 655d 2c20 4e6f 6e65 5d2c 0a20  kType], None],. 
+00001640: 2020 2020 2020 2063 6865 636b 5f6a 696e         check_jin
+00001650: 6465 783a 2062 6f6f 6c2c 0a20 2020 2029  dex: bool,.    )
+00001660: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00001670: 2020 2020 2020 5468 6973 206d 6574 686f        This metho
+00001680: 6420 646f 6573 2073 6576 6572 616c 2074  d does several t
+00001690: 6869 6e67 7320 666f 7220 7365 7474 696e  hings for settin
+000016a0: 6720 7570 2074 6865 206c 696e 6b73 206f  g up the links o
+000016b0: 6620 6120 726f 626f 740a 0a20 2020 2020  f a robot..     
+000016c0: 2020 202d 2047 6976 6573 2065 6163 6820     - Gives each 
+000016d0: 6c69 6e6b 2061 2075 6e69 7175 6520 6e61  link a unique na
+000016e0: 6d65 2069 6620 6974 2064 6f65 736e 2774  me if it doesn't
+000016f0: 2068 6176 6520 6f6e 650a 2020 2020 2020   have one.      
+00001700: 2020 2d20 4173 7369 676e 7320 6561 6368    - Assigns each
+00001710: 206c 696e 6b20 6120 7061 7265 6e74 2069   link a parent i
+00001720: 6620 6974 2064 6f65 736e 2774 2068 6176  f it doesn't hav
+00001730: 6520 6f6e 650a 2020 2020 2020 2020 2d20  e one.        - 
+00001740: 4669 6e64 7320 616e 6420 7365 7473 2074  Finds and sets t
+00001750: 6865 2062 6173 6520 6c69 6e6b 0a20 2020  he base link.   
+00001760: 2020 2020 202d 2046 696e 6473 2061 6e64       - Finds and
+00001770: 2073 6574 7320 7468 6520 6565 206c 696e   sets the ee lin
+00001780: 6b73 0a20 2020 2020 2020 202d 2073 6574  ks.        - set
+00001790: 7320 7468 6520 6a69 6e64 6963 6573 0a20  s the jindices. 
+000017a0: 2020 2020 2020 202d 2073 6574 7320 6e0a         - sets n.
+000017b0: 2020 2020 2020 2020 2d20 7365 7473 206c          - sets l
+000017c0: 696e 6b73 0a0a 2020 2020 2020 2020 2222  inks..        ""
+000017d0: 220a 0a20 2020 2020 2020 2023 2054 6865  "..        # The
+000017e0: 206f 7264 6572 6564 206c 696e 6b73 0a20   ordered links. 
+000017f0: 2020 2020 2020 206f 726c 696e 6b73 3a20         orlinks: 
+00001800: 4c69 7374 5b4c 696e 6b54 7970 655d 203d  List[LinkType] =
+00001810: 205b 5d0a 0a20 2020 2020 2020 2023 2054   []..        # T
+00001820: 6865 2065 6e64 2d65 6666 6563 746f 7220  he end-effector 
+00001830: 6c69 6e6b 730a 2020 2020 2020 2020 7365  links.        se
+00001840: 6c66 2e5f 6565 5f6c 696e 6b73 3a20 4c69  lf._ee_links: Li
+00001850: 7374 5b4c 696e 6b54 7970 655d 203d 205b  st[LinkType] = [
+00001860: 5d0a 0a20 2020 2020 2020 2023 2043 6865  ]..        # Che
+00001870: 636b 2061 6c6c 2074 6865 2069 6e63 6f6d  ck all the incom
+00001880: 696e 6720 4c69 6e6b 206f 626a 6563 7473  ing Link objects
+00001890: 0a20 2020 2020 2020 206e 3a20 696e 7420  .        n: int 
+000018a0: 3d20 300a 0a20 2020 2020 2020 2023 204d  = 0..        # M
+000018b0: 616b 6520 7375 7265 2065 6163 6820 6c69  ake sure each li
+000018c0: 6e6b 2068 6173 2061 206e 616d 650a 2020  nk has a name.  
+000018d0: 2020 2020 2020 2320 2d2d 2d2d 2d2d 2d2d        # --------
+000018e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000018f0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2066  ------.        f
+00001900: 6f72 206b 2c20 6c69 6e6b 2069 6e20 656e  or k, link in en
+00001910: 756d 6572 6174 6528 6c69 6e6b 7329 3a0a  umerate(links):.
+00001920: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00001930: 6f74 2069 7369 6e73 7461 6e63 6528 6c69  ot isinstance(li
+00001940: 6e6b 2c20 4261 7365 4c69 6e6b 293a 0a20  nk, BaseLink):. 
+00001950: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00001960: 6169 7365 2054 7970 6545 7272 6f72 2822  aise TypeError("
+00001970: 6c69 6e6b 7320 7368 6f75 6c64 2061 6c6c  links should all
+00001980: 2062 6520 4c69 6e6b 2073 7562 636c 6173   be Link subclas
+00001990: 7322 290a 0a20 2020 2020 2020 2020 2020  s")..           
+000019a0: 2023 2049 6620 6c69 6e6b 2068 6173 206e   # If link has n
+000019b0: 6f20 6e61 6d65 2c20 6769 7665 2069 7420  o name, give it 
+000019c0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000019d0: 6966 206c 696e 6b2e 6e61 6d65 2069 7320  if link.name is 
+000019e0: 4e6f 6e65 206f 7220 6c69 6e6b 2e6e 616d  None or link.nam
+000019f0: 6520 3d3d 2022 223a 0a20 2020 2020 2020  e == "":.       
+00001a00: 2020 2020 2020 2020 206c 696e 6b2e 6e61           link.na
+00001a10: 6d65 203d 2066 226c 696e 6b2d 7b6b 7d22  me = f"link-{k}"
+00001a20: 0a0a 2020 2020 2020 2020 2020 2020 6c69  ..            li
+00001a30: 6e6b 2e6e 756d 6265 7220 3d20 6b20 2b20  nk.number = k + 
+00001a40: 310a 0a20 2020 2020 2020 2020 2020 2023  1..            #
+00001a50: 2050 7574 2069 7420 696e 2074 6865 206c   Put it in the l
+00001a60: 696e 6b20 6469 6374 696f 6e61 7279 2c20  ink dictionary, 
+00001a70: 6368 6563 6b20 666f 7220 6475 706c 6963  check for duplic
+00001a80: 6174 6573 0a20 2020 2020 2020 2020 2020  ates.           
+00001a90: 2069 6620 6c69 6e6b 2e6e 616d 6520 696e   if link.name in
+00001aa0: 2073 656c 662e 5f6c 696e 6b64 6963 743a   self._linkdict:
+00001ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001ac0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+00001ad0: 7228 6622 6c69 6e6b 206e 616d 6520 7b6c  r(f"link name {l
+00001ae0: 696e 6b2e 6e61 6d65 7d20 6973 206e 6f74  ink.name} is not
+00001af0: 2075 6e69 7175 6522 290a 0a20 2020 2020   unique")..     
+00001b00: 2020 2020 2020 2073 656c 662e 5f6c 696e         self._lin
+00001b10: 6b64 6963 745b 6c69 6e6b 2e6e 616d 655d  kdict[link.name]
+00001b20: 203d 206c 696e 6b0a 0a20 2020 2020 2020   = link..       
+00001b30: 2020 2020 2069 6620 6c69 6e6b 2e69 736a       if link.isj
+00001b40: 6f69 6e74 3a0a 2020 2020 2020 2020 2020  oint:.          
+00001b50: 2020 2020 2020 6e20 2b3d 2031 0a0a 2020        n += 1..  
+00001b60: 2020 2020 2020 2320 5265 736f 6c76 6520        # Resolve 
+00001b70: 7061 7265 6e74 7320 6769 7665 6e20 6279  parents given by
+00001b80: 206e 616d 652c 2077 6974 6869 6e20 7468   name, within th
+00001b90: 6520 636f 6e74 6578 7420 6f66 0a20 2020  e context of.   
+00001ba0: 2020 2020 2023 2074 6869 7320 7365 7420       # this set 
+00001bb0: 6f66 206c 696e 6b73 0a20 2020 2020 2020  of links.       
+00001bc0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00001bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001bf0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00001c00: 666f 7220 6c69 6e6b 2069 6e20 6c69 6e6b  for link in link
+00001c10: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
+00001c20: 6620 6c69 6e6b 2e70 6172 656e 7420 6973  f link.parent is
+00001c30: 204e 6f6e 6520 616e 6420 6c69 6e6b 2e70   None and link.p
+00001c40: 6172 656e 745f 6e61 6d65 2069 7320 6e6f  arent_name is no
+00001c50: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00001c60: 2020 2020 2020 2020 6c69 6e6b 2e70 6172          link.par
+00001c70: 656e 7420 3d20 7365 6c66 2e5f 6c69 6e6b  ent = self._link
+00001c80: 6469 6374 5b6c 696e 6b2e 7061 7265 6e74  dict[link.parent
+00001c90: 5f6e 616d 655d 0a0a 2020 2020 2020 2020  _name]..        
+00001ca0: 6966 2061 6c6c 285b 6c69 6e6b 2e70 6172  if all([link.par
+00001cb0: 656e 7420 6973 204e 6f6e 6520 666f 7220  ent is None for 
+00001cc0: 6c69 6e6b 2069 6e20 6c69 6e6b 735d 293a  link in links]):
+00001cd0: 0a20 2020 2020 2020 2020 2020 2023 204e  .            # N
+00001ce0: 6f20 7061 7265 6e74 206c 696e 6b73 2077  o parent links w
+00001cf0: 6572 6520 6769 7665 6e2c 2061 7373 756d  ere given, assum
+00001d00: 6520 7468 6579 2061 7265 2073 6571 7565  e they are seque
+00001d10: 6e74 6961 6c0a 2020 2020 2020 2020 2020  ntial.          
+00001d20: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00001d30: 286c 656e 286c 696e 6b73 2920 2d20 3129  (len(links) - 1)
+00001d40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001d50: 2020 2320 6c69 203d 206c 696e 6b73 5b69    # li = links[i
+00001d60: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00001d70: 2020 6c69 6e6b 735b 6920 2b20 315d 2e70    links[i + 1].p
+00001d80: 6172 656e 7420 3d20 6c69 6e6b 735b 695d  arent = links[i]
+00001d90: 0a0a 2020 2020 2020 2020 2320 5365 7420  ..        # Set 
+00001da0: 7468 6520 6261 7365 206c 696e 6b0a 2020  the base link.  
+00001db0: 2020 2020 2020 2320 2d2d 2d2d 2d2d 2d2d        # --------
+00001dc0: 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020  ---------.      
+00001dd0: 2020 666f 7220 6c69 6e6b 2069 6e20 6c69    for link in li
+00001de0: 6e6b 733a 0a20 2020 2020 2020 2020 2020  nks:.           
+00001df0: 2023 2049 7320 7468 6973 2061 2062 6173   # Is this a bas
+00001e00: 6520 6c69 6e6b 3f0a 0a20 2020 2020 2020  e link?..       
+00001e10: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00001e20: 6365 286c 696e 6b2e 7061 7265 6e74 2c20  ce(link.parent, 
+00001e30: 4261 7365 4c69 6e6b 293a 0a20 2020 2020  BaseLink):.     
+00001e40: 2020 2020 2020 2020 2020 2023 2055 7064             # Upd
+00001e50: 6174 6520 6368 696c 6472 656e 206f 6620  ate children of 
+00001e60: 7468 6973 206c 696e 6b27 7320 7061 7265  this link's pare
+00001e70: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
+00001e80: 2020 206c 696e 6b2e 7061 7265 6e74 2e5f     link.parent._
+00001e90: 6368 696c 6472 656e 2e61 7070 656e 6428  children.append(
+00001ea0: 6c69 6e6b 290a 2020 2020 2020 2020 2020  link).          
+00001eb0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00001ec0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00001ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ee0: 2069 6620 7365 6c66 2e5f 6261 7365 5f6c   if self._base_l
+00001ef0: 696e 6b20 6973 206e 6f74 204e 6f6e 653a  ink is not None:
+00001f00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001f10: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00001f20: 616c 7565 4572 726f 7228 224d 756c 7469  alueError("Multi
+00001f30: 706c 6520 6261 7365 206c 696e 6b73 2229  ple base links")
+00001f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001f50: 2065 7863 6570 7420 4174 7472 6962 7574   except Attribut
+00001f60: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
+00001f70: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00001f80: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00001f90: 2020 7365 6c66 2e5f 6261 7365 5f6c 696e    self._base_lin
+00001fa0: 6b20 3d20 6c69 6e6b 0a0a 2020 2020 2020  k = link..      
+00001fb0: 2020 6966 206e 6f74 2068 6173 6174 7472    if not hasattr
+00001fc0: 2873 656c 662c 2022 5f62 6173 655f 6c69  (self, "_base_li
+00001fd0: 6e6b 2229 3a0a 2020 2020 2020 2020 2020  nk"):.          
+00001fe0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00001ff0: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+00002000: 2020 2020 2249 6e76 616c 6964 206c 696e      "Invalid lin
+00002010: 6b20 636f 6e66 6967 7572 6174 696f 6e20  k configuration 
+00002020: 7072 6f76 6964 6564 2c20 6d75 7374 2068  provided, must h
+00002030: 6176 6520 6120 6261 7365 206c 696e 6b22  ave a base link"
+00002040: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00002050: 2020 2020 2020 2020 2320 5363 656e 6520          # Scene 
+00002060: 6e6f 6465 2c20 7365 7420 6c69 6e6b 7320  node, set links 
+00002070: 6265 7477 6565 6e20 7468 6520 6c69 6e6b  between the link
+00002080: 730a 2020 2020 2020 2020 2320 2d2d 2d2d  s.        # ----
+00002090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000020a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000020b0: 2d2d 2d0a 2020 2020 2020 2020 666f 7220  ---.        for 
+000020c0: 6c69 6e6b 2069 6e20 6c69 6e6b 733a 0a20  link in links:. 
+000020d0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+000020e0: 696e 7374 616e 6365 286c 696e 6b2e 7061  instance(link.pa
+000020f0: 7265 6e74 2c20 4261 7365 4c69 6e6b 293a  rent, BaseLink):
+00002100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002110: 206c 696e 6b2e 7363 656e 655f 7061 7265   link.scene_pare
+00002120: 6e74 203d 206c 696e 6b2e 7061 7265 6e74  nt = link.parent
+00002130: 0a0a 2020 2020 2020 2020 2320 5365 7420  ..        # Set 
+00002140: 7570 2074 6865 2067 7269 7070 6572 2c20  up the gripper, 
+00002150: 6d61 6b65 2061 206c 6973 7420 636f 6e74  make a list cont
+00002160: 6169 6e69 6e67 2074 6865 2072 6f6f 7420  aining the root 
+00002170: 6f66 2061 6c6c 0a20 2020 2020 2020 2023  of all.        #
+00002180: 2067 7269 7070 6572 730a 2020 2020 2020   grippers.      
+00002190: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+000021a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000021b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000021c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a20  --------------. 
+000021d0: 2020 2020 2020 2069 6620 6772 6970 7065         if grippe
+000021e0: 725f 6c69 6e6b 7320 6973 204e 6f6e 653a  r_links is None:
+000021f0: 0a20 2020 2020 2020 2020 2020 2067 7269  .            gri
+00002200: 7070 6572 5f6c 696e 6b73 203d 205b 5d0a  pper_links = [].
+00002210: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00002220: 6973 696e 7374 616e 6365 2867 7269 7070  isinstance(gripp
+00002230: 6572 5f6c 696e 6b73 2c20 6c69 7374 293a  er_links, list):
+00002240: 0a20 2020 2020 2020 2020 2020 2067 7269  .            gri
+00002250: 7070 6572 5f6c 696e 6b73 203d 205b 6772  pper_links = [gr
+00002260: 6970 7065 725f 6c69 6e6b 735d 0a0a 2020  ipper_links]..  
+00002270: 2020 2020 2020 2320 416e 2065 6d70 7479        # An empty
+00002280: 206c 6973 7420 746f 2068 6f6c 6420 616c   list to hold al
+00002290: 6c20 6772 6970 7065 7273 0a20 2020 2020  l grippers.     
+000022a0: 2020 2073 656c 662e 5f67 7269 7070 6572     self._gripper
+000022b0: 7320 3d20 5b5d 0a0a 2020 2020 2020 2020  s = []..        
+000022c0: 2320 4d61 6b65 2061 2067 7269 7070 6572  # Make a gripper
+000022d0: 206f 626a 6563 7420 666f 7220 6561 6368   object for each
+000022e0: 2067 7269 7070 6572 0a20 2020 2020 2020   gripper.       
+000022f0: 2066 6f72 206c 696e 6b20 696e 2067 7269   for link in gri
+00002300: 7070 6572 5f6c 696e 6b73 3a0a 2020 2020  pper_links:.    
+00002310: 2020 2020 2020 2020 675f 6c69 6e6b 7320          g_links 
+00002320: 3d20 7365 6c66 2e64 6673 5f6c 696e 6b73  = self.dfs_links
+00002330: 286c 696e 6b29 0a0a 2020 2020 2020 2020  (link)..        
+00002340: 2020 2020 2320 5265 6d6f 7665 2067 7269      # Remove gri
+00002350: 7070 6572 206c 696e 6b73 2066 726f 6d20  pper links from 
+00002360: 7468 6520 726f 626f 740a 2020 2020 2020  the robot.      
+00002370: 2020 2020 2020 666f 7220 675f 6c69 6e6b        for g_link
+00002380: 2069 6e20 675f 6c69 6e6b 733a 0a20 2020   in g_links:.   
+00002390: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+000023a0: 7269 6e74 2867 5f6c 696e 6b29 0a20 2020  rint(g_link).   
+000023b0: 2020 2020 2020 2020 2020 2020 206c 696e               lin
+000023c0: 6b73 2e72 656d 6f76 6528 675f 6c69 6e6b  ks.remove(g_link
+000023d0: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
+000023e0: 2053 6176 6520 7468 6520 6772 6970 7065   Save the grippe
+000023f0: 7220 6f62 6a65 6374 0a20 2020 2020 2020  r object.       
+00002400: 2020 2020 2073 656c 662e 5f67 7269 7070       self._gripp
+00002410: 6572 732e 6170 7065 6e64 2847 7269 7070  ers.append(Gripp
+00002420: 6572 2867 5f6c 696e 6b73 2c20 6e61 6d65  er(g_links, name
+00002430: 3d6c 696e 6b2e 6e61 6d65 2929 0a0a 2020  =link.name))..  
+00002440: 2020 2020 2020 2320 5375 6274 7261 6374        # Subtract
+00002450: 2074 6865 206e 206f 6620 7468 6520 6772   the n of the gr
+00002460: 6970 7065 7273 2066 726f 6d20 7468 6520  ippers from the 
+00002470: 6e20 6f66 2074 6865 2072 6f62 6f74 0a20  n of the robot. 
+00002480: 2020 2020 2020 2066 6f72 2067 7269 7070         for gripp
+00002490: 6572 2069 6e20 7365 6c66 2e5f 6772 6970  er in self._grip
+000024a0: 7065 7273 3a0a 2020 2020 2020 2020 2020  pers:.          
+000024b0: 2020 6e20 2d3d 2067 7269 7070 6572 2e6e    n -= gripper.n
+000024c0: 0a0a 2020 2020 2020 2020 2320 5365 7420  ..        # Set 
+000024d0: 7468 6520 6565 206c 696e 6b73 0a20 2020  the ee links.   
+000024e0: 2020 2020 2023 202d 2d2d 2d2d 2d2d 2d2d       # ---------
+000024f0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00002500: 6565 5f6c 696e 6b73 3a20 4c69 7374 5b4c  ee_links: List[L
+00002510: 696e 6b54 7970 655d 203d 205b 5d0a 0a20  inkType] = [].. 
+00002520: 2020 2020 2020 2069 6620 6c65 6e28 6772         if len(gr
+00002530: 6970 7065 725f 6c69 6e6b 7329 203d 3d20  ipper_links) == 
+00002540: 303a 0a20 2020 2020 2020 2020 2020 2066  0:.            f
+00002550: 6f72 206c 696e 6b20 696e 206c 696e 6b73  or link in links
+00002560: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002570: 2020 2320 4973 2074 6869 7320 6120 6c65    # Is this a le
+00002580: 6166 206e 6f64 653f 2061 6e64 2064 6f20  af node? and do 
+00002590: 7765 206e 6f74 2068 6176 6520 616e 7920  we not have any 
+000025a0: 6772 6970 7065 7273 0a20 2020 2020 2020  grippers.       
+000025b0: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
+000025c0: 2e63 6869 6c64 7265 6e20 6973 204e 6f6e  .children is Non
+000025d0: 6520 6f72 206c 656e 286c 696e 6b2e 6368  e or len(link.ch
+000025e0: 696c 6472 656e 2920 3d3d 2030 3a0a 2020  ildren) == 0:.  
+000025f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002600: 2020 2320 4e6f 2063 6869 6c64 7265 6e2c    # No children,
+00002610: 206d 7573 7420 6265 2061 6e20 656e 642d   must be an end-
+00002620: 6566 6665 6374 6f72 0a20 2020 2020 2020  effector.       
+00002630: 2020 2020 2020 2020 2020 2020 2065 655f               ee_
+00002640: 6c69 6e6b 732e 6170 7065 6e64 286c 696e  links.append(lin
+00002650: 6b29 0a20 2020 2020 2020 2065 6c73 653a  k).        else:
+00002660: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00002670: 206c 696e 6b20 696e 2067 7269 7070 6572   link in gripper
+00002680: 5f6c 696e 6b73 3a0a 2020 2020 2020 2020  _links:.        
+00002690: 2020 2020 2020 2020 2320 5573 6520 7468          # Use th
+000026a0: 6520 7061 7373 6564 2069 6e20 7661 6c75  e passed in valu
+000026b0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000026c0: 2020 6966 206c 696e 6b2e 7061 7265 6e74    if link.parent
+000026d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000026e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000026f0: 2020 6565 5f6c 696e 6b73 2e61 7070 656e    ee_links.appen
+00002700: 6428 6c69 6e6b 2e70 6172 656e 7429 0a0a  d(link.parent)..
+00002710: 2020 2020 2020 2020 7365 6c66 2e5f 6565          self._ee
+00002720: 5f6c 696e 6b73 203d 2065 655f 6c69 6e6b  _links = ee_link
+00002730: 730a 0a20 2020 2020 2020 2023 2041 7373  s..        # Ass
+00002740: 6967 6e20 7468 6520 6a6f 696e 7420 696e  ign the joint in
+00002750: 6469 6365 7320 616e 6420 736f 7274 2074  dices and sort t
+00002760: 6865 206c 696e 6b73 0a20 2020 2020 2020  he links.       
+00002770: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00002780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a20  --------------. 
+000027a0: 2020 2020 2020 2069 6620 616c 6c28 5b6c         if all([l
+000027b0: 696e 6b2e 6a69 6e64 6578 2069 7320 4e6f  ink.jindex is No
+000027c0: 6e65 206f 7220 6c69 6e6b 2e65 7473 2e5f  ne or link.ets._
+000027d0: 6175 746f 5f6a 696e 6465 7820 666f 7220  auto_jindex for 
+000027e0: 6c69 6e6b 2069 6e20 6c69 6e6b 735d 293a  link in links]):
+000027f0: 0a20 2020 2020 2020 2020 2020 2023 204e  .            # N
+00002800: 6f20 6a6f 696e 7473 2068 6176 6520 616e  o joints have an
+00002810: 2069 6e64 6578 0a20 2020 2020 2020 2020   index.         
+00002820: 2020 206a 696e 6465 7820 3d20 5b30 5d20     jindex = [0] 
+00002830: 2023 2022 6d75 7461 626c 6520 696e 7465   # "mutable inte
+00002840: 6765 7222 2068 6163 6b0a 0a20 2020 2020  ger" hack..     
+00002850: 2020 2020 2020 2064 6566 2076 6973 6974         def visit
+00002860: 5f6c 696e 6b28 6c69 6e6b 2c20 6a69 6e64  _link(link, jind
+00002870: 6578 293a 0a20 2020 2020 2020 2020 2020  ex):.           
+00002880: 2020 2020 2023 2069 6620 6974 2773 2061       # if it's a
+00002890: 206a 6f69 6e74 2c20 6173 7369 676e 2069   joint, assign i
+000028a0: 7420 6120 6a69 6e64 6578 2061 6e64 2069  t a jindex and i
+000028b0: 6e63 7265 6d65 6e74 2069 740a 2020 2020  ncrement it.    
+000028c0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+000028d0: 696e 6b2e 6973 6a6f 696e 7420 616e 6420  ink.isjoint and 
+000028e0: 6c69 6e6b 2069 6e20 6c69 6e6b 733a 0a20  link in links:. 
+000028f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002900: 2020 206c 696e 6b2e 6a69 6e64 6578 203d     link.jindex =
+00002910: 206a 696e 6465 785b 305d 0a20 2020 2020   jindex[0].     
+00002920: 2020 2020 2020 2020 2020 2020 2020 206a                 j
+00002930: 696e 6465 785b 305d 202b 3d20 310a 0a20  index[0] += 1.. 
+00002940: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00002950: 6620 6c69 6e6b 2069 6e20 6c69 6e6b 733a  f link in links:
+00002960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002970: 2020 2020 206f 726c 696e 6b73 2e61 7070       orlinks.app
+00002980: 656e 6428 6c69 6e6b 290a 0a20 2020 2020  end(link)..     
+00002990: 2020 2020 2020 2023 2076 6973 6974 2061         # visit a
+000029a0: 6c6c 206c 696e 6b73 2069 6e20 4446 5320  ll links in DFS 
+000029b0: 6f72 6465 720a 2020 2020 2020 2020 2020  order.          
+000029c0: 2020 7365 6c66 2e64 6673 5f6c 696e 6b73    self.dfs_links
+000029d0: 2873 656c 662e 6261 7365 5f6c 696e 6b2c  (self.base_link,
+000029e0: 206c 616d 6264 6120 6c69 6e6b 3a20 7669   lambda link: vi
+000029f0: 7369 745f 6c69 6e6b 286c 696e 6b2c 206a  sit_link(link, j
+00002a00: 696e 6465 7829 290a 0a20 2020 2020 2020  index))..       
+00002a10: 2065 6c69 6620 616c 6c28 0a20 2020 2020   elif all(.     
+00002a20: 2020 2020 2020 205b 0a20 2020 2020 2020         [.       
+00002a30: 2020 2020 2020 2020 206c 696e 6b2e 6a69           link.ji
+00002a40: 6e64 6578 2069 7320 6e6f 7420 4e6f 6e65  ndex is not None
+00002a50: 2061 6e64 206e 6f74 206c 696e 6b2e 6574   and not link.et
+00002a60: 732e 5f61 7574 6f5f 6a69 6e64 6578 0a20  s._auto_jindex. 
+00002a70: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00002a80: 6f72 206c 696e 6b20 696e 206c 696e 6b73  or link in links
+00002a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002aa0: 2069 6620 6c69 6e6b 2e69 736a 6f69 6e74   if link.isjoint
+00002ab0: 0a20 2020 2020 2020 2020 2020 205d 0a20  .            ]. 
+00002ac0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00002ad0: 2020 2020 2020 2320 4a69 6e64 6578 2073        # Jindex s
+00002ae0: 6574 206f 6e20 616c 6c2c 2063 6865 636b  et on all, check
+00002af0: 2074 6865 7920 6172 6520 756e 6971 7565   they are unique
+00002b00: 2061 6e64 2063 6f6e 7469 6775 6f75 730a   and contiguous.
+00002b10: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+00002b20: 6865 636b 5f6a 696e 6465 783a 0a20 2020  heck_jindex:.   
+00002b30: 2020 2020 2020 2020 2020 2020 206a 7365               jse
+00002b40: 7420 3d20 7365 7428 7261 6e67 6528 6e29  t = set(range(n)
+00002b50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00002b60: 2020 666f 7220 6c69 6e6b 2069 6e20 6c69    for link in li
+00002b70: 6e6b 733a 0a20 2020 2020 2020 2020 2020  nks:.           
+00002b80: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
+00002b90: 2e69 736a 6f69 6e74 2061 6e64 206c 696e  .isjoint and lin
+00002ba0: 6b2e 6a69 6e64 6578 206e 6f74 2069 6e20  k.jindex not in 
+00002bb0: 6a73 6574 3a0a 2020 2020 2020 2020 2020  jset:.          
+00002bc0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00002bd0: 6973 6520 5661 6c75 6545 7272 6f72 280a  ise ValueError(.
+00002be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bf0: 2020 2020 2020 2020 2020 2020 6622 6a6f              f"jo
+00002c00: 696e 7420 696e 6465 7820 7b6c 696e 6b2e  int index {link.
+00002c10: 6a69 6e64 6578 7d20 7761 7320 7265 7065  jindex} was repe
+00002c20: 6174 6564 206f 7220 6f75 7420 6f66 2072  ated or out of r
+00002c30: 616e 6765 220a 2020 2020 2020 2020 2020  ange".          
+00002c40: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00002c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c60: 2020 2020 6a73 6574 202d 3d20 7365 7428      jset -= set(
+00002c70: 5b6c 696e 6b2e 6a69 6e64 6578 5d29 0a20  [link.jindex]). 
+00002c80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00002c90: 6620 6c65 6e28 6a73 6574 2920 3e20 303a  f len(jset) > 0:
+00002ca0: 2020 2320 7072 6167 6d61 206e 6f63 6f76    # pragma nocov
+00002cb0: 6572 2020 2320 6973 2069 6d70 6f73 7369  er  # is impossi
+00002cc0: 626c 650a 2020 2020 2020 2020 2020 2020  ble.            
+00002cd0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00002ce0: 6c75 6545 7272 6f72 2866 226a 6f69 6e74  lueError(f"joint
+00002cf0: 7320 7b6a 7365 747d 2077 6572 6520 6e6f  s {jset} were no
+00002d00: 7420 6173 7369 676e 6564 2229 0a20 2020  t assigned").   
+00002d10: 2020 2020 2020 2020 206f 726c 696e 6b73           orlinks
+00002d20: 203d 206c 696e 6b73 0a20 2020 2020 2020   = links.       
+00002d30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00002d40: 2020 2023 206d 7573 7420 6265 2061 206d     # must be a m
+00002d50: 6978 7475 7265 206f 6620 4c69 6e6b 7320  ixture of Links 
+00002d60: 7769 7468 2f77 6974 686f 7574 206a 696e  with/without jin
+00002d70: 6465 780a 2020 2020 2020 2020 2020 2020  dex.            
+00002d80: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00002d90: 2822 616c 6c20 6c69 6e6b 7320 6d75 7374  ("all links must
+00002da0: 2068 6176 6520 6120 6a69 6e64 6578 2c20   have a jindex, 
+00002db0: 6f72 206e 6f6e 6520 6861 7665 2061 206a  or none have a j
+00002dc0: 696e 6465 7822 290a 0a20 2020 2020 2020  index")..       
+00002dd0: 2023 2053 6574 206e 0a20 2020 2020 2020   # Set n.       
+00002de0: 2023 202d 2d2d 2d2d 0a20 2020 2020 2020   # -----.       
+00002df0: 2073 656c 662e 5f6e 203d 206e 0a0a 2020   self._n = n..  
+00002e00: 2020 2020 2020 2320 5365 7420 6c69 6e6b        # Set link
+00002e10: 730a 2020 2020 2020 2020 2320 2d2d 2d2d  s.        # ----
+00002e20: 2d2d 2d2d 2d0a 2020 2020 2020 2020 7365  -----.        se
+00002e30: 6c66 2e5f 6c69 6e6b 7320 3d20 6f72 6c69  lf._links = orli
+00002e40: 6e6b 730a 0a20 2020 2064 6566 2064 796e  nks..    def dyn
+00002e50: 6368 616e 6765 6428 7365 6c66 2c20 7768  changed(self, wh
+00002e60: 6174 3a20 556e 696f 6e5b 7374 722c 204e  at: Union[str, N
+00002e70: 6f6e 655d 203d 204e 6f6e 6529 3a0a 2020  one] = None):.  
+00002e80: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00002e90: 2020 4479 6e61 6d69 6320 7061 7261 6d65    Dynamic parame
+00002ea0: 7465 7273 2068 6176 6520 6368 616e 6765  ters have change
+00002eb0: 640a 0a20 2020 2020 2020 2043 616c 6c65  d..        Calle
+00002ec0: 6420 6672 6f6d 2061 2070 726f 7065 7274  d from a propert
+00002ed0: 7920 7365 7474 6572 2074 6f20 696e 666f  y setter to info
+00002ee0: 726d 2074 6865 2072 6f62 6f74 2074 6861  rm the robot tha
+00002ef0: 7420 7468 6520 6361 6368 6520 6f66 0a20  t the cache of. 
+00002f00: 2020 2020 2020 2064 796e 616d 6963 2070         dynamic p
+00002f10: 6172 616d 6574 6572 7320 6973 2069 6e76  arameters is inv
+00002f20: 616c 6964 2e0a 0a20 2020 2020 2020 2053  alid...        S
+00002f30: 6565 2041 6c73 6f0a 2020 2020 2020 2020  ee Also.        
+00002f40: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+00002f50: 203a 6675 6e63 3a60 726f 626f 7469 6373   :func:`robotics
+00002f60: 746f 6f6c 626f 782e 4c69 6e6b 2e5f 6c69  toolbox.Link._li
+00002f70: 7374 656e 5f64 796e 600a 0a20 2020 2020  sten_dyn`..     
+00002f80: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+00002f90: 7365 6c66 2e5f 6479 6e63 6861 6e67 6564  self._dynchanged
+00002fa0: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00002fb0: 6966 2077 6861 7420 213d 2022 6772 6176  if what != "grav
+00002fc0: 6974 7922 3a0a 2020 2020 2020 2020 2020  ity":.          
+00002fd0: 2020 7365 6c66 2e5f 6861 7364 796e 616d    self._hasdynam
+00002fe0: 6963 7320 3d20 5472 7565 0a0a 2020 2020  ics = True..    
+00002ff0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00003000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003030: 2d2d 2d2d 2d2d 2d20 230a 2020 2020 2320  ------- #.    # 
+00003040: 2d2d 2d2d 2d2d 2d2d 2d20 4d61 6769 6320  --------- Magic 
+00003050: 4d65 7468 6f64 7320 2d2d 2d2d 2d2d 2d2d  Methods --------
+00003060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003080: 2d2d 2d2d 2d20 230a 2020 2020 2320 2d2d  ----- #.    # --
+00003090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000030a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000030b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000030c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000030d0: 2d2d 2d20 230a 0a20 2020 2064 6566 205f  --- #..    def _
+000030e0: 5f69 7465 725f 5f28 7365 6c66 293a 0a20  _iter__(self):. 
+000030f0: 2020 2020 2020 2073 656c 662e 5f69 7465         self._ite
+00003100: 7220 3d20 300a 2020 2020 2020 2020 7265  r = 0.        re
+00003110: 7475 726e 2073 656c 660a 0a20 2020 2064  turn self..    d
+00003120: 6566 205f 5f6e 6578 745f 5f28 7365 6c66  ef __next__(self
+00003130: 2920 2d3e 204c 696e 6b54 7970 653a 0a20  ) -> LinkType:. 
+00003140: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00003150: 6974 6572 203c 206c 656e 2873 656c 662e  iter < len(self.
+00003160: 6c69 6e6b 7329 3a0a 2020 2020 2020 2020  links):.        
+00003170: 2020 2020 6c69 6e6b 203d 2073 656c 665b      link = self[
+00003180: 7365 6c66 2e5f 6974 6572 5d0a 2020 2020  self._iter].    
+00003190: 2020 2020 2020 2020 7365 6c66 2e5f 6974          self._it
+000031a0: 6572 202b 3d20 310a 2020 2020 2020 2020  er += 1.        
+000031b0: 2020 2020 7265 7475 726e 206c 696e 6b0a      return link.
+000031c0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000031d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000031e0: 5374 6f70 4974 6572 6174 696f 6e0a 0a20  StopIteration.. 
+000031f0: 2020 2064 6566 205f 5f67 6574 6974 656d     def __getitem
+00003200: 5f5f 2873 656c 662c 2069 3a20 556e 696f  __(self, i: Unio
+00003210: 6e5b 696e 742c 2073 7472 5d29 202d 3e20  n[int, str]) -> 
+00003220: 4c69 6e6b 5479 7065 3a0a 2020 2020 2020  LinkType:.      
+00003230: 2020 2222 220a 2020 2020 2020 2020 4765    """.        Ge
+00003240: 7420 6c69 6e6b 0a0a 2020 2020 2020 2020  t link..        
+00003250: 5468 6973 2061 6c73 6f20 7375 7070 6f72  This also suppor
+00003260: 7473 2069 7465 7261 7469 6e67 206f 7665  ts iterating ove
+00003270: 7220 6561 6368 206c 696e 6b20 696e 2074  r each link in t
+00003280: 6865 2072 6f62 6f74 206f 626a 6563 742c  he robot object,
+00003290: 0a20 2020 2020 2020 2066 726f 6d20 7468  .        from th
+000032a0: 6520 6261 7365 2074 6f20 7468 6520 746f  e base to the to
+000032b0: 6f6c 2e0a 0a20 2020 2020 2020 2050 6172  ol...        Par
+000032c0: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
+000032d0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020  ----------.     
+000032e0: 2020 2069 0a20 2020 2020 2020 2020 2020     i.           
+000032f0: 206c 696e 6b20 6e75 6d62 6572 206f 7220   link number or 
+00003300: 6e61 6d65 0a0a 2020 2020 2020 2020 5265  name..        Re
+00003310: 7475 726e 730a 2020 2020 2020 2020 2d2d  turns.        --
+00003320: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6c69  -----.        li
+00003330: 6e6b 0a20 2020 2020 2020 2020 2020 2069  nk.            i
+00003340: 2774 6820 6c69 6e6b 206f 7220 6e61 6d65  'th link or name
+00003350: 6420 6c69 6e6b 0a0a 2020 2020 2020 2020  d link..        
+00003360: 4578 616d 706c 6573 0a20 2020 2020 2020  Examples.       
+00003370: 202d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020   --------.      
+00003380: 2020 2e2e 2072 756e 626c 6f63 6b3a 3a20    .. runblock:: 
+00003390: 7079 636f 6e0a 2020 2020 2020 2020 3e3e  pycon.        >>
+000033a0: 3e20 696d 706f 7274 2072 6f62 6f74 6963  > import robotic
+000033b0: 7374 6f6f 6c62 6f78 2061 7320 7274 620a  stoolbox as rtb.
+000033c0: 2020 2020 2020 2020 3e3e 3e20 726f 626f          >>> robo
+000033d0: 7420 3d20 7274 622e 6d6f 6465 6c73 2e44  t = rtb.models.D
+000033e0: 482e 5075 6d61 3536 3028 290a 2020 2020  H.Puma560().    
+000033f0: 2020 2020 3e3e 3e20 7072 696e 7428 726f      >>> print(ro
+00003400: 626f 745b 315d 2920 2320 7072 696e 7420  bot[1]) # print 
+00003410: 7468 6520 326e 6420 6c69 6e6b 0a20 2020  the 2nd link.   
+00003420: 2020 2020 203e 3e3e 2070 7269 6e74 285b       >>> print([
+00003430: 6c69 6e6b 2e61 2066 6f72 206c 696e 6b20  link.a for link 
+00003440: 696e 2072 6f62 6f74 5d29 2020 2320 7072  in robot])  # pr
+00003450: 696e 7420 616c 6c20 7468 6520 615f 6a20  int all the a_j 
+00003460: 7661 6c75 6573 0a0a 2020 2020 2020 2020  values..        
+00003470: 4e6f 7465 730a 2020 2020 2020 2020 2d2d  Notes.        --
+00003480: 2d2d 2d0a 2020 2020 2020 2020 6060 526f  ---.        ``Ro
+00003490: 626f 7460 6020 7375 7070 6f72 7473 206c  bot`` supports l
+000034a0: 696e 6b20 6c6f 6f6b 7570 2062 7920 6e61  ink lookup by na
+000034b0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+000034c0: 6567 2e20 6060 726f 626f 745b 276c 696e  eg. ``robot['lin
+000034d0: 6b31 275d 6060 0a0a 2020 2020 2020 2020  k1']``..        
+000034e0: 2222 220a 0a20 2020 2020 2020 2069 6620  """..        if 
+000034f0: 6973 696e 7374 616e 6365 2869 2c20 696e  isinstance(i, in
+00003500: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00003510: 7265 7475 726e 2073 656c 662e 5f6c 696e  return self._lin
+00003520: 6b73 5b69 5d0a 2020 2020 2020 2020 656c  ks[i].        el
+00003530: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00003540: 7265 7475 726e 2073 656c 662e 5f6c 696e  return self._lin
+00003550: 6b64 6963 745b 695d 0a0a 2020 2020 6465  kdict[i]..    de
+00003560: 6620 5f5f 7374 725f 5f28 7365 6c66 2920  f __str__(self) 
+00003570: 2d3e 2073 7472 3a0a 2020 2020 2020 2020  -> str:.        
+00003580: 2222 220a 2020 2020 2020 2020 5072 6574  """.        Pret
+00003590: 7479 2070 7269 6e74 7320 7468 6520 4554  ty prints the ET
+000035a0: 5320 4d6f 6465 6c20 6f66 2074 6865 2072  S Model of the r
+000035b0: 6f62 6f74 2e0a 0a20 2020 2020 2020 2052  obot...        R
+000035c0: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+000035d0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2073  ------.        s
+000035e0: 7472 0a20 2020 2020 2020 2020 2020 2050  tr.            P
+000035f0: 7265 7474 7920 7072 696e 7420 6f66 2074  retty print of t
+00003600: 6865 2072 6f62 6f74 206d 6f64 656c 0a0a  he robot model..
+00003610: 2020 2020 2020 2020 4e6f 7465 730a 2020          Notes.  
+00003620: 2020 2020 2020 2d2d 2d2d 2d0a 2020 2020        -----.    
+00003630: 2020 2020 2d20 436f 6e73 7461 6e74 206c      - Constant l
+00003640: 696e 6b73 2061 7265 2073 686f 776e 2069  inks are shown i
+00003650: 6e20 626c 7565 2e0a 2020 2020 2020 2020  n blue..        
+00003660: 2d20 456e 642d 6566 6665 6374 6f72 206c  - End-effector l
+00003670: 696e 6b73 2061 7265 2070 7265 6669 7865  inks are prefixe
+00003680: 6420 7769 7468 2061 6e20 400a 2020 2020  d with an @.    
+00003690: 2020 2020 2d20 416e 676c 6573 2069 6e20      - Angles in 
+000036a0: 6465 6772 6565 730a 2020 2020 2020 2020  degrees.        
+000036b0: 2d20 5468 6520 726f 626f 7420 6261 7365  - The robot base
+000036c0: 2066 7261 6d65 2069 7320 6465 6e6f 7465   frame is denote
+000036d0: 6420 6173 2060 6042 4153 4560 6020 616e  d as ``BASE`` an
+000036e0: 6420 6973 2065 7175 616c 2074 6f20 7468  d is equal to th
+000036f0: 650a 2020 2020 2020 2020 2020 2020 726f  e.            ro
+00003700: 626f 7427 7320 6060 6261 7365 6060 2061  bot's ``base`` a
+00003710: 7474 7269 6275 7465 2e0a 0a20 2020 2020  ttribute...     
+00003720: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+00003730: 756e 6963 6f64 6520 3d20 7274 625f 6765  unicode = rtb_ge
+00003740: 745f 7061 7261 6d28 2275 6e69 636f 6465  t_param("unicode
+00003750: 2229 0a20 2020 2020 2020 2062 6f72 6465  ").        borde
+00003760: 7220 3d20 2274 6869 6e22 2069 6620 756e  r = "thin" if un
+00003770: 6963 6f64 6520 656c 7365 2022 6173 6369  icode else "asci
+00003780: 6922 0a0a 2020 2020 2020 2020 7461 626c  i"..        tabl
+00003790: 6520 3d20 414e 5349 5461 626c 6528 0a20  e = ANSITable(. 
+000037a0: 2020 2020 2020 2020 2020 2043 6f6c 756d             Colum
+000037b0: 6e28 226c 696e 6b22 2c20 6865 6164 616c  n("link", headal
+000037c0: 6967 6e3d 225e 222c 2063 6f6c 616c 6967  ign="^", colalig
+000037d0: 6e3d 223e 2229 2c0a 2020 2020 2020 2020  n=">"),.        
+000037e0: 2020 2020 436f 6c75 6d6e 2822 6c69 6e6b      Column("link
+000037f0: 222c 2068 6561 6461 6c69 676e 3d22 5e22  ", headalign="^"
+00003800: 2c20 636f 6c61 6c69 676e 3d22 3c22 292c  , colalign="<"),
+00003810: 0a20 2020 2020 2020 2020 2020 2043 6f6c  .            Col
+00003820: 756d 6e28 226a 6f69 6e74 222c 2068 6561  umn("joint", hea
+00003830: 6461 6c69 676e 3d22 5e22 2c20 636f 6c61  dalign="^", cola
+00003840: 6c69 676e 3d22 3e22 292c 0a20 2020 2020  lign=">"),.     
+00003850: 2020 2020 2020 2043 6f6c 756d 6e28 2270         Column("p
+00003860: 6172 656e 7422 2c20 6865 6164 616c 6967  arent", headalig
+00003870: 6e3d 225e 222c 2063 6f6c 616c 6967 6e3d  n="^", colalign=
+00003880: 223c 2229 2c0a 2020 2020 2020 2020 2020  "<"),.          
+00003890: 2020 436f 6c75 6d6e 2822 4554 533a 2070    Column("ETS: p
+000038a0: 6172 656e 7420 746f 206c 696e 6b22 2c20  arent to link", 
+000038b0: 6865 6164 616c 6967 6e3d 225e 222c 2063  headalign="^", c
+000038c0: 6f6c 616c 6967 6e3d 223c 2229 2c0a 2020  olalign="<"),.  
+000038d0: 2020 2020 2020 2020 2020 626f 7264 6572            border
+000038e0: 3d62 6f72 6465 722c 0a20 2020 2020 2020  =border,.       
+000038f0: 2029 0a0a 2020 2020 2020 2020 666f 7220   )..        for 
+00003900: 6b2c 206c 696e 6b20 696e 2065 6e75 6d65  k, link in enume
+00003910: 7261 7465 2873 656c 662e 6c69 6e6b 7329  rate(self.links)
+00003920: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+00003930: 6c6f 7220 3d20 2222 2069 6620 6c69 6e6b  lor = "" if link
+00003940: 2e69 736a 6f69 6e74 2065 6c73 6520 223c  .isjoint else "<
+00003950: 3c62 6c75 653e 3e22 0a20 2020 2020 2020  <blue>>".       
+00003960: 2020 2020 2065 6520 3d20 2240 2220 6966       ee = "@" if
+00003970: 206c 696e 6b20 696e 2073 656c 662e 6565   link in self.ee
+00003980: 5f6c 696e 6b73 2065 6c73 6520 2222 0a20  _links else "". 
+00003990: 2020 2020 2020 2020 2020 2065 7473 203d             ets =
+000039a0: 206c 696e 6b2e 6574 730a 2020 2020 2020   link.ets.      
+000039b0: 2020 2020 2020 6966 206c 696e 6b2e 7061        if link.pa
+000039c0: 7265 6e74 2069 7320 4e6f 6e65 3a0a 2020  rent is None:.  
+000039d0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+000039e0: 7265 6e74 5f6e 616d 6520 3d20 2242 4153  rent_name = "BAS
+000039f0: 4522 0a20 2020 2020 2020 2020 2020 2065  E".            e
+00003a00: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00003a10: 2020 2020 2070 6172 656e 745f 6e61 6d65       parent_name
+00003a20: 203d 206c 696e 6b2e 7061 7265 6e74 2e6e   = link.parent.n
+00003a30: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00003a40: 7320 3d20 6574 732e 5f5f 7374 725f 5f28  s = ets.__str__(
+00003a50: 6622 717b 6c69 6e6b 2e6a 696e 6465 787d  f"q{link.jindex}
+00003a60: 2229 0a20 2020 2020 2020 2020 2020 2023  ").            #
+00003a70: 2069 6620 6c65 6e28 7329 203e 2030 3a0a   if len(s) > 0:.
+00003a80: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00003a90: 2020 6f70 203d 2022 205c 7532 3239 3520    op = " \u2295 
+00003aa0: 2220 6966 2075 6e69 636f 6465 2065 6c73  " if unicode els
+00003ab0: 6520 2220 2a20 2220 2023 205c 6f70 6c75  e " * "  # \oplu
+00003ac0: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
+00003ad0: 2020 2020 7320 3d20 6f70 202b 2073 0a0a      s = op + s..
+00003ae0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00003af0: 696e 6b2e 6973 6a6f 696e 743a 0a20 2020  ink.isjoint:.   
+00003b00: 2020 2020 2020 2020 2020 2020 206a 6e61               jna
+00003b10: 6d65 203d 206c 696e 6b2e 6a69 6e64 6578  me = link.jindex
+00003b20: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00003b30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00003b40: 2020 206a 6e61 6d65 203d 2022 220a 2020     jname = "".  
+00003b50: 2020 2020 2020 2020 2020 7461 626c 652e            table.
+00003b60: 726f 7728 0a20 2020 2020 2020 2020 2020  row(.           
+00003b70: 2020 2020 2023 206c 696e 6b2e 6a69 6e64       # link.jind
+00003b80: 6578 2c0a 2020 2020 2020 2020 2020 2020  ex,.            
+00003b90: 2020 2020 6b2c 0a20 2020 2020 2020 2020      k,.         
+00003ba0: 2020 2020 2020 2063 6f6c 6f72 202b 2065         color + e
+00003bb0: 6520 2b20 6c69 6e6b 2e6e 616d 652c 0a20  e + link.name,. 
+00003bc0: 2020 2020 2020 2020 2020 2020 2020 206a                 j
+00003bd0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+00003be0: 2020 2020 2020 7061 7265 6e74 5f6e 616d        parent_nam
+00003bf0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00003c00: 2020 2066 227b 737d 222c 0a20 2020 2020     f"{s}",.     
+00003c10: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00003c20: 2020 636c 6173 736e 616d 6520 3d20 2245    classname = "E
+00003c30: 526f 626f 7422 0a0a 2020 2020 2020 2020  Robot"..        
+00003c40: 7320 3d20 6622 7b63 6c61 7373 6e61 6d65  s = f"{classname
+00003c50: 7d3a 207b 7365 6c66 2e6e 616d 657d 220a  }: {self.name}".
+00003c60: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00003c70: 6d61 6e75 6661 6374 7572 6572 2069 7320  manufacturer is 
+00003c80: 6e6f 7420 4e6f 6e65 2061 6e64 206c 656e  not None and len
+00003c90: 2873 656c 662e 6d61 6e75 6661 6374 7572  (self.manufactur
+00003ca0: 6572 2920 3e20 303a 0a20 2020 2020 2020  er) > 0:.       
+00003cb0: 2020 2020 2073 202b 3d20 6622 2028 6279       s += f" (by
+00003cc0: 207b 7365 6c66 2e6d 616e 7566 6163 7475   {self.manufactu
+00003cd0: 7265 727d 2922 0a20 2020 2020 2020 2073  rer})".        s
+00003ce0: 202b 3d20 6622 2c20 7b73 656c 662e 6e7d   += f", {self.n}
+00003cf0: 206a 6f69 6e74 7320 287b 7365 6c66 2e73   joints ({self.s
+00003d00: 7472 7563 7475 7265 7d29 220a 2020 2020  tructure})".    
+00003d10: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
+00003d20: 6772 6970 7065 7273 2920 3e20 303a 0a20  grippers) > 0:. 
+00003d30: 2020 2020 2020 2020 2020 2073 202b 3d20             s += 
+00003d40: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00003d50: 2020 6622 2c20 7b6c 656e 2873 656c 662e    f", {len(self.
+00003d60: 6772 6970 7065 7273 297d 2067 7269 7070  grippers)} gripp
+00003d70: 6572 7b27 7327 2069 6620 6c65 6e28 7365  er{'s' if len(se
+00003d80: 6c66 2e67 7269 7070 6572 7329 203e 2031  lf.grippers) > 1
+00003d90: 2065 6c73 6520 2727 7d22 0a20 2020 2020   else ''}".     
+00003da0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00003db0: 2069 6620 7365 6c66 2e6e 6272 616e 6368   if self.nbranch
+00003dc0: 6573 203e 2031 3a0a 2020 2020 2020 2020  es > 1:.        
+00003dd0: 2020 2020 7320 2b3d 2066 222c 207b 7365      s += f", {se
+00003de0: 6c66 2e6e 6272 616e 6368 6573 7d20 6272  lf.nbranches} br
+00003df0: 616e 6368 6573 220a 2020 2020 2020 2020  anches".        
+00003e00: 6966 2073 656c 662e 5f68 6173 6479 6e61  if self._hasdyna
+00003e10: 6d69 6373 3a0a 2020 2020 2020 2020 2020  mics:.          
+00003e20: 2020 7320 2b3d 2022 2c20 6479 6e61 6d69    s += ", dynami
+00003e30: 6373 220a 2020 2020 2020 2020 6966 2061  cs".        if a
+00003e40: 6e79 285b 6c65 6e28 6c69 6e6b 2e67 656f  ny([len(link.geo
+00003e50: 6d65 7472 7929 203e 2030 2066 6f72 206c  metry) > 0 for l
+00003e60: 696e 6b20 696e 2073 656c 662e 6c69 6e6b  ink in self.link
+00003e70: 735d 293a 0a20 2020 2020 2020 2020 2020  s]):.           
+00003e80: 2073 202b 3d20 222c 2067 656f 6d65 7472   s += ", geometr
+00003e90: 7922 0a20 2020 2020 2020 2069 6620 616e  y".        if an
+00003ea0: 7928 5b6c 656e 286c 696e 6b2e 636f 6c6c  y([len(link.coll
+00003eb0: 6973 696f 6e29 203e 2030 2066 6f72 206c  ision) > 0 for l
+00003ec0: 696e 6b20 696e 2073 656c 662e 6c69 6e6b  ink in self.link
+00003ed0: 735d 293a 0a20 2020 2020 2020 2020 2020  s]):.           
+00003ee0: 2073 202b 3d20 222c 2063 6f6c 6c69 7369   s += ", collisi
+00003ef0: 6f6e 220a 2020 2020 2020 2020 7320 2b3d  on".        s +=
+00003f00: 2022 5c6e 220a 0a20 2020 2020 2020 2073   "\n"..        s
+00003f10: 202b 3d20 7374 7228 7461 626c 6529 0a20   += str(table). 
+00003f20: 2020 2020 2020 2073 202b 3d20 7365 6c66         s += self
+00003f30: 2e63 6f6e 6669 6775 7261 7469 6f6e 735f  .configurations_
+00003f40: 7374 7228 626f 7264 6572 3d62 6f72 6465  str(border=borde
+00003f50: 7229 0a0a 2020 2020 2020 2020 7265 7475  r)..        retu
+00003f60: 726e 2073 0a0a 2020 2020 6465 6620 5f5f  rn s..    def __
+00003f70: 7265 7072 5f5f 2873 656c 6629 202d 3e20  repr__(self) -> 
+00003f80: 7374 723a 0a20 2020 2020 2020 2072 6574  str:.        ret
+00003f90: 7572 6e20 7374 7228 7365 6c66 290a 0a20  urn str(self).. 
+00003fa0: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00003fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2023 0a20 2020  ---------- #.   
+00003ff0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2050 726f   # --------- Pro
+00004000: 7065 7274 6965 7320 2d2d 2d2d 2d2d 2d2d  perties --------
+00004010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004030: 2d2d 2d2d 2d2d 2d2d 2023 0a20 2020 2023  -------- #.    #
+00004040: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00004050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004080: 2d2d 2d2d 2d2d 2023 0a0a 2020 2020 4070  ------ #..    @p
+00004090: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+000040a0: 6c69 6e6b 7328 7365 6c66 2920 2d3e 204c  links(self) -> L
+000040b0: 6973 745b 4c69 6e6b 5479 7065 5d3a 0a20  ist[LinkType]:. 
+000040c0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000040d0: 2020 2052 6f62 6f74 206c 696e 6b73 0a0a     Robot links..
+000040e0: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
+000040f0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
+00004100: 2020 2020 2020 2020 6c69 6e6b 730a 2020          links.  
+00004110: 2020 2020 2020 2020 2020 4120 6c69 7374            A list
+00004120: 206f 6620 6c69 6e6b 206f 626a 6563 7473   of link objects
+00004130: 0a0a 2020 2020 2020 2020 4e6f 7465 730a  ..        Notes.
+00004140: 2020 2020 2020 2020 2d2d 2d2d 2d0a 2020          -----.  
+00004150: 2020 2020 2020 4974 2069 7320 7072 6f62        It is prob
+00004160: 6162 6c79 206d 6f72 6520 636f 6e63 6973  ably more concis
+00004170: 6520 746f 2069 6e64 6578 2074 6865 2072  e to index the r
+00004180: 6f62 6f74 206f 626a 6563 7420 7261 7468  obot object rath
+00004190: 6572 0a20 2020 2020 2020 2074 6861 6e20  er.        than 
+000041a0: 7468 6520 6c69 7374 206f 6620 6c69 6e6b  the list of link
+000041b0: 732c 2069 652e 2074 6865 2066 6f6c 6c6f  s, ie. the follo
+000041c0: 7769 6e67 2061 7265 2065 7175 6976 616c  wing are equival
+000041d0: 656e 743a 0a20 2020 2020 2020 202d 2060  ent:.        - `
+000041e0: 6072 6f62 6f74 2e6c 696e 6b73 5b69 5d60  `robot.links[i]`
+000041f0: 600a 2020 2020 2020 2020 2d20 6060 726f  `.        - ``ro
+00004200: 626f 745b 695d 6060 0a0a 2020 2020 2020  bot[i]``..      
+00004210: 2020 2222 220a 0a20 2020 2020 2020 2072    """..        r
+00004220: 6574 7572 6e20 7365 6c66 2e5f 6c69 6e6b  eturn self._link
+00004230: 730a 0a20 2020 2040 7072 6f70 6572 7479  s..    @property
+00004240: 0a20 2020 2064 6566 206c 696e 6b5f 6469  .    def link_di
+00004250: 6374 2873 656c 6629 202d 3e20 4469 6374  ct(self) -> Dict
+00004260: 5b73 7472 2c20 4c69 6e6b 5479 7065 5d3a  [str, LinkType]:
+00004270: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004280: 7365 6c66 2e5f 6c69 6e6b 6469 6374 0a0a  self._linkdict..
+00004290: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+000042a0: 2020 6465 6620 6772 6970 7065 7273 2873    def grippers(s
+000042b0: 656c 6629 202d 3e20 4c69 7374 5b47 7269  elf) -> List[Gri
+000042c0: 7070 6572 5d3a 0a20 2020 2020 2020 2022  pper]:.        "
+000042d0: 2222 0a20 2020 2020 2020 2047 7269 7070  "".        Gripp
+000042e0: 6572 7320 6174 7461 6368 6564 2074 6f20  ers attached to 
+000042f0: 7468 6520 726f 626f 740a 0a20 2020 2020  the robot..     
+00004300: 2020 2052 6574 7572 6e73 0a20 2020 2020     Returns.     
+00004310: 2020 202d 2d2d 2d2d 2d2d 0a20 2020 2020     -------.     
+00004320: 2020 2067 7269 7070 6572 730a 2020 2020     grippers.    
+00004330: 2020 2020 2020 2020 4120 6c69 7374 206f          A list o
+00004340: 6620 6772 6970 7065 7273 0a0a 2020 2020  f grippers..    
+00004350: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00004360: 2072 6574 7572 6e20 7365 6c66 2e5f 6772   return self._gr
+00004370: 6970 7065 7273 0a0a 2020 2020 4070 726f  ippers..    @pro
+00004380: 7065 7274 790a 2020 2020 6465 6620 6261  perty.    def ba
+00004390: 7365 5f6c 696e 6b28 7365 6c66 2920 2d3e  se_link(self) ->
+000043a0: 204c 696e 6b54 7970 653a 0a20 2020 2020   LinkType:.     
+000043b0: 2020 2022 2222 0a20 2020 2020 2020 2047     """.        G
+000043c0: 6574 2074 6865 2072 6f62 6f74 2062 6173  et the robot bas
+000043d0: 6520 6c69 6e6b 0a0a 2020 2020 2020 2020  e link..        
+000043e0: 2d20 6060 726f 626f 742e 6261 7365 5f6c  - ``robot.base_l
+000043f0: 696e 6b60 6020 6973 2074 6865 2072 6f62  ink`` is the rob
+00004400: 6f74 2062 6173 6520 6c69 6e6b 0a0a 2020  ot base link..  
+00004410: 2020 2020 2020 5265 7475 726e 730a 2020        Returns.  
+00004420: 2020 2020 2020 2d2d 2d2d 2d2d 2d0a 2020        -------.  
+00004430: 2020 2020 2020 6261 7365 5f6c 696e 6b0a        base_link.
+00004440: 2020 2020 2020 2020 2020 2020 7468 6520              the 
+00004450: 6669 7273 7420 6c69 6e6b 2069 6e20 7468  first link in th
+00004460: 6520 726f 626f 7420 7472 6565 0a0a 2020  e robot tree..  
+00004470: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
+00004480: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00004490: 6261 7365 5f6c 696e 6b0a 0a20 2020 2040  base_link..    @
+000044a0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+000044b0: 2065 655f 6c69 6e6b 7328 7365 6c66 2920   ee_links(self) 
+000044c0: 2d3e 204c 6973 745b 4c69 6e6b 5479 7065  -> List[LinkType
+000044d0: 5d3a 0a20 2020 2020 2020 2072 6574 7572  ]:.        retur
+000044e0: 6e20 7365 6c66 2e5f 6565 5f6c 696e 6b73  n self._ee_links
+000044f0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+00004500: 2020 2020 6465 6620 6e28 7365 6c66 2920      def n(self) 
+00004510: 2d3e 2069 6e74 3a0a 2020 2020 2020 2020  -> int:.        
+00004520: 2222 220a 2020 2020 2020 2020 4e75 6d62  """.        Numb
+00004530: 6572 206f 6620 6a6f 696e 7473 0a0a 2020  er of joints..  
+00004540: 2020 2020 2020 5265 7475 726e 730a 2020        Returns.  
+00004550: 2020 2020 2020 2d2d 2d2d 2d2d 2d0a 2020        -------.  
+00004560: 2020 2020 2020 6e0a 2020 2020 2020 2020        n.        
+00004570: 2020 2020 4e75 6d62 6572 206f 6620 6a6f      Number of jo
+00004580: 696e 7473 0a0a 2020 2020 2020 2020 4578  ints..        Ex
+00004590: 616d 706c 6573 0a20 2020 2020 2020 202d  amples.        -
+000045a0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+000045b0: 2e2e 2072 756e 626c 6f63 6b3a 3a20 7079  .. runblock:: py
+000045c0: 636f 6e0a 2020 2020 2020 2020 3e3e 3e20  con.        >>> 
+000045d0: 696d 706f 7274 2072 6f62 6f74 6963 7374  import roboticst
+000045e0: 6f6f 6c62 6f78 2061 7320 7274 620a 2020  oolbox as rtb.  
+000045f0: 2020 2020 2020 3e3e 3e20 726f 626f 7420        >>> robot 
+00004600: 3d20 7274 622e 6d6f 6465 6c73 2e44 482e  = rtb.models.DH.
+00004610: 5075 6d61 3536 3028 290a 2020 2020 2020  Puma560().      
+00004620: 2020 3e3e 3e20 726f 626f 742e 6e0a 0a20    >>> robot.n.. 
+00004630: 2020 2020 2020 2053 6565 2041 6c73 6f0a         See Also.
+00004640: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00004650: 0a20 2020 2020 2020 203a 6675 6e63 3a60  .        :func:`
+00004660: 6e6c 696e 6b73 600a 2020 2020 2020 2020  nlinks`.        
+00004670: 3a66 756e 633a 606e 6272 616e 6368 6573  :func:`nbranches
+00004680: 600a 0a20 2020 2020 2020 2022 2222 0a0a  `..        """..
+00004690: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000046a0: 656c 662e 5f6e 0a0a 2020 2020 4070 726f  elf._n..    @pro
+000046b0: 7065 7274 790a 2020 2020 6465 6620 6e6c  perty.    def nl
+000046c0: 696e 6b73 2873 656c 6629 3a0a 2020 2020  inks(self):.    
+000046d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000046e0: 4e75 6d62 6572 206f 6620 6c69 6e6b 730a  Number of links.
+000046f0: 0a20 2020 2020 2020 2054 6865 2072 6574  .        The ret
+00004700: 7572 6e65 6420 6e75 6d62 6572 2069 7320  urned number is 
+00004710: 7468 6520 746f 7461 6c20 6f66 2062 6f74  the total of bot
+00004720: 6820 7661 7269 6162 6c65 206a 6f69 6e74  h variable joint
+00004730: 7320 616e 640a 2020 2020 2020 2020 7374  s and.        st
+00004740: 6174 6963 206c 696e 6b73 0a0a 2020 2020  atic links..    
+00004750: 2020 2020 5265 7475 726e 730a 2020 2020      Returns.    
+00004760: 2020 2020 2d2d 2d2d 2d2d 2d0a 2020 2020      -------.    
+00004770: 2020 2020 6e6c 696e 6b73 0a20 2020 2020      nlinks.     
+00004780: 2020 2020 2020 204e 756d 6265 7220 6f66         Number of
+00004790: 206c 696e 6b73 0a0a 2020 2020 2020 2020   links..        
+000047a0: 4578 616d 706c 6573 0a20 2020 2020 2020  Examples.       
+000047b0: 202d 2d2d 2d2d 2d2d 2d0a 0a20 2020 2020   --------..     
+000047c0: 2020 202e 2e20 7275 6e62 6c6f 636b 3a3a     .. runblock::
+000047d0: 2070 7963 6f6e 0a20 2020 2020 2020 203e   pycon.        >
+000047e0: 3e3e 2069 6d70 6f72 7420 726f 626f 7469  >> import roboti
+000047f0: 6373 746f 6f6c 626f 7820 6173 2072 7462  cstoolbox as rtb
+00004800: 0a20 2020 2020 2020 203e 3e3e 2072 6f62  .        >>> rob
+00004810: 6f74 203d 2072 7462 2e6d 6f64 656c 732e  ot = rtb.models.
+00004820: 4448 2e50 756d 6135 3630 2829 0a20 2020  DH.Puma560().   
+00004830: 2020 2020 203e 3e3e 2072 6f62 6f74 2e6e       >>> robot.n
+00004840: 6c69 6e6b 730a 0a20 2020 2020 2020 2053  links..        S
+00004850: 6565 2041 6c73 6f0a 2020 2020 2020 2020  ee Also.        
+00004860: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+00004870: 203a 6675 6e63 3a60 6e60 0a20 2020 2020   :func:`n`.     
+00004880: 2020 203a 6675 6e63 3a60 6e62 7261 6e63     :func:`nbranc
+00004890: 6865 7360 0a0a 2020 2020 2020 2020 2222  hes`..        ""
+000048a0: 220a 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+000048b0: 6e20 7365 6c66 2e5f 6e6c 696e 6b73 0a0a  n self._nlinks..
+000048c0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+000048d0: 2020 6465 6620 6e62 7261 6e63 6865 7328    def nbranches(
+000048e0: 7365 6c66 2920 2d3e 2069 6e74 3a0a 2020  self) -> int:.  
+000048f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00004900: 2020 4e75 6d62 6572 206f 6620 6272 616e    Number of bran
+00004910: 6368 6573 0a0a 2020 2020 2020 2020 4e75  ches..        Nu
+00004920: 6d62 6572 206f 6620 6272 616e 6368 6573  mber of branches
+00004930: 2069 6e20 7468 6973 2072 6f62 6f74 2e20   in this robot. 
+00004940: 2043 6f6d 7075 7465 6420 6173 2074 6865   Computed as the
+00004950: 206e 756d 6265 7220 6f66 206c 696e 6b73   number of links
+00004960: 2077 6974 680a 2020 2020 2020 2020 7a65   with.        ze
+00004970: 726f 2063 6869 6c64 7265 6e0a 0a20 2020  ro children..   
+00004980: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+00004990: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+000049a0: 2020 2020 206e 6272 616e 6368 6573 0a20       nbranches. 
+000049b0: 2020 2020 2020 2020 2020 206e 756d 6265             numbe
+000049c0: 7220 6f66 2062 7261 6e63 6865 7320 696e  r of branches in
+000049d0: 2074 6865 2072 6f62 6f74 2773 206b 696e   the robot's kin
+000049e0: 656d 6174 6963 2074 7265 650a 0a20 2020  ematic tree..   
+000049f0: 2020 2020 2045 7861 6d70 6c65 730a 2020       Examples.  
+00004a00: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0a0a        --------..
+00004a10: 2020 2020 2020 2020 2e2e 2072 756e 626c          .. runbl
+00004a20: 6f63 6b3a 3a20 7079 636f 6e0a 2020 2020  ock:: pycon.    
+00004a30: 2020 2020 3e3e 3e20 696d 706f 7274 2072      >>> import r
+00004a40: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2061  oboticstoolbox a
+00004a50: 7320 7274 620a 2020 2020 2020 2020 3e3e  s rtb.        >>
+00004a60: 3e20 726f 626f 7420 3d20 7274 622e 6d6f  > robot = rtb.mo
+00004a70: 6465 6c73 2e45 5453 2e50 616e 6461 2829  dels.ETS.Panda()
+00004a80: 0a20 2020 2020 2020 203e 3e3e 2072 6f62  .        >>> rob
+00004a90: 6f74 2e6e 6272 616e 6368 6573 0a0a 2020  ot.nbranches..  
+00004aa0: 2020 2020 2020 5365 6520 416c 736f 0a20        See Also. 
+00004ab0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+00004ac0: 2020 2020 2020 2020 3a66 756e 633a 606e          :func:`n
+00004ad0: 600a 2020 2020 2020 2020 3a66 756e 633a  `.        :func:
+00004ae0: 606e 6c69 6e6b 7360 0a20 2020 2020 2020  `nlinks`.       
+00004af0: 2022 2222 0a0a 2020 2020 2020 2020 7265   """..        re
+00004b00: 7475 726e 2073 756d 285b 6c69 6e6b 2e6e  turn sum([link.n
+00004b10: 6368 696c 6472 656e 203d 3d20 3020 666f  children == 0 fo
+00004b20: 7220 6c69 6e6b 2069 6e20 7365 6c66 2e6c  r link in self.l
+00004b30: 696e 6b73 5d29 202b 206c 656e 2873 656c  inks]) + len(sel
+00004b40: 662e 6772 6970 7065 7273 290a 0a20 2020  f.grippers)..   
+00004b50: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+00004b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b90: 2d2d 2d2d 2d2d 2d2d 2023 0a0a 2020 2020  -------- #..    
+00004ba0: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+00004bb0: 6620 6e61 6d65 2873 656c 6629 202d 3e20  f name(self) -> 
+00004bc0: 7374 723a 0a20 2020 2020 2020 2022 2222  str:.        """
+00004bd0: 0a20 2020 2020 2020 2047 6574 2f73 6574  .        Get/set
+00004be0: 2072 6f62 6f74 206e 616d 650a 0a20 2020   robot name..   
+00004bf0: 2020 2020 202d 2060 6072 6f62 6f74 2e6e       - ``robot.n
+00004c00: 616d 6560 6020 6973 2074 6865 2072 6f62  ame`` is the rob
+00004c10: 6f74 206e 616d 650a 2020 2020 2020 2020  ot name.        
+00004c20: 2d20 6060 726f 626f 742e 6e61 6d65 203d  - ``robot.name =
+00004c30: 202e 2e2e 6060 2063 6865 636b 7320 616e   ...`` checks an
+00004c40: 6420 7365 7473 2074 6865 2072 6f62 6f74  d sets the robot
+00004c50: 206e 616d 650a 0a20 2020 2020 2020 2050   name..        P
+00004c60: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
+00004c70: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
+00004c80: 2020 2020 206e 616d 650a 2020 2020 2020       name.      
+00004c90: 2020 2020 2020 7468 6520 6e65 7720 726f        the new ro
+00004ca0: 626f 7420 6e61 6d65 0a0a 2020 2020 2020  bot name..      
+00004cb0: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
+00004cc0: 2020 2d2d 2d2d 2d2d 2d0a 2020 2020 2020    -------.      
+00004cd0: 2020 6e61 6d65 0a20 2020 2020 2020 2020    name.         
+00004ce0: 2020 2074 6865 2063 7572 7265 6e74 2072     the current r
+00004cf0: 6f62 6f74 206e 616d 650a 0a20 2020 2020  obot name..     
+00004d00: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00004d10: 6574 7572 6e20 7365 6c66 2e5f 6e61 6d65  eturn self._name
+00004d20: 0a0a 2020 2020 406e 616d 652e 7365 7474  ..    @name.sett
+00004d30: 6572 0a20 2020 2064 6566 206e 616d 6528  er.    def name(
+00004d40: 7365 6c66 2c20 6e61 6d65 5f6e 6577 3a20  self, name_new: 
+00004d50: 7374 7229 3a0a 2020 2020 2020 2020 7365  str):.        se
+00004d60: 6c66 2e5f 6e61 6d65 203d 206e 616d 655f  lf._name = name_
+00004d70: 6e65 770a 0a20 2020 2040 7072 6f70 6572  new..    @proper
+00004d80: 7479 0a20 2020 2064 6566 2063 6f6d 6d65  ty.    def comme
+00004d90: 6e74 2873 656c 6629 202d 3e20 7374 723a  nt(self) -> str:
+00004da0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00004db0: 2020 2020 2047 6574 2f73 6574 2072 6f62       Get/set rob
+00004dc0: 6f74 2063 6f6d 6d65 6e74 0a0a 2020 2020  ot comment..    
+00004dd0: 2020 2020 2d20 6060 726f 626f 742e 636f      - ``robot.co
+00004de0: 6d6d 656e 7460 6020 6973 2074 6865 2072  mment`` is the r
+00004df0: 6f62 6f74 2063 6f6d 6d65 6e74 0a20 2020  obot comment.   
+00004e00: 2020 2020 202d 2060 6072 6f62 6f74 2e63       - ``robot.c
+00004e10: 6f6d 6d65 6e74 203d 202e 2e2e 6060 2063  omment = ...`` c
+00004e20: 6865 636b 7320 616e 6420 7365 7473 2074  hecks and sets t
+00004e30: 6865 2072 6f62 6f74 2063 6f6d 6d65 6e74  he robot comment
+00004e40: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00004e50: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
+00004e60: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00004e70: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
+00004e80: 2074 6865 206e 6577 2072 6f62 6f74 2063   the new robot c
+00004e90: 6f6d 6d65 6e74 0a0a 2020 2020 2020 2020  omment..        
+00004ea0: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
+00004eb0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00004ec0: 636f 6d6d 656e 740a 2020 2020 2020 2020  comment.        
+00004ed0: 2020 2020 726f 626f 7420 636f 6d6d 656e      robot commen
+00004ee0: 740a 0a20 2020 2020 2020 2022 2222 0a20  t..        """. 
+00004ef0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00004f00: 6c66 2e5f 636f 6d6d 656e 740a 0a20 2020  lf._comment..   
+00004f10: 2040 636f 6d6d 656e 742e 7365 7474 6572   @comment.setter
+00004f20: 0a20 2020 2064 6566 2063 6f6d 6d65 6e74  .    def comment
+00004f30: 2873 656c 662c 2063 6f6d 6d65 6e74 5f6e  (self, comment_n
+00004f40: 6577 3a20 7374 7229 3a0a 2020 2020 2020  ew: str):.      
+00004f50: 2020 7365 6c66 2e5f 636f 6d6d 656e 7420    self._comment 
+00004f60: 3d20 636f 6d6d 656e 745f 6e65 770a 0a20  = comment_new.. 
+00004f70: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00004f80: 2064 6566 206d 616e 7566 6163 7475 7265   def manufacture
+00004f90: 7228 7365 6c66 293a 0a20 2020 2020 2020  r(self):.       
+00004fa0: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+00004fb0: 2f73 6574 2072 6f62 6f74 206d 616e 7566  /set robot manuf
+00004fc0: 6163 7475 7265 7227 7320 6e61 6d65 0a0a  acturer's name..
+00004fd0: 2020 2020 2020 2020 2d20 6060 726f 626f          - ``robo
+00004fe0: 742e 6d61 6e75 6661 6374 7572 6572 6060  t.manufacturer``
+00004ff0: 2069 7320 7468 6520 726f 626f 7420 6d61   is the robot ma
+00005000: 6e75 6661 6374 7572 6572 2773 206e 616d  nufacturer's nam
+00005010: 650a 2020 2020 2020 2020 2d20 6060 726f  e.        - ``ro
+00005020: 626f 742e 6d61 6e75 6661 6374 7572 6572  bot.manufacturer
+00005030: 203d 202e 2e2e 6060 2063 6865 636b 7320   = ...`` checks 
+00005040: 616e 6420 7365 7473 2074 6865 206d 616e  and sets the man
+00005050: 7566 6163 7475 7265 7227 7320 6e61 6d65  ufacturer's name
+00005060: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00005070: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+00005080: 2d0a 2020 2020 2020 2020 6d61 6e75 6661  -.        manufa
+00005090: 6374 7572 6572 0a20 2020 2020 2020 2020  cturer.         
+000050a0: 2020 2072 6f62 6f74 206d 616e 7566 6163     robot manufac
+000050b0: 7475 7265 7227 7320 6e61 6d65 0a0a 2020  turer's name..  
+000050c0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000050d0: 2020 7265 7475 726e 2073 656c 662e 5f6d    return self._m
+000050e0: 616e 7566 6163 7475 7265 720a 0a20 2020  anufacturer..   
+000050f0: 2040 6d61 6e75 6661 6374 7572 6572 2e73   @manufacturer.s
+00005100: 6574 7465 720a 2020 2020 6465 6620 6d61  etter.    def ma
+00005110: 6e75 6661 6374 7572 6572 2873 656c 662c  nufacturer(self,
+00005120: 206d 616e 7566 6163 7475 7265 725f 6e65   manufacturer_ne
+00005130: 7729 3a0a 2020 2020 2020 2020 7365 6c66  w):.        self
+00005140: 2e5f 6d61 6e75 6661 6374 7572 6572 203d  ._manufacturer =
+00005150: 206d 616e 7566 6163 7475 7265 725f 6e65   manufacturer_ne
+00005160: 770a 0a20 2020 2040 7072 6f70 6572 7479  w..    @property
+00005170: 0a20 2020 2064 6566 2063 6f6e 6669 6773  .    def configs
+00005180: 2873 656c 6629 202d 3e20 4469 6374 5b73  (self) -> Dict[s
+00005190: 7472 2c20 4e44 4172 7261 795d 3a0a 2020  tr, NDArray]:.  
+000051a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000051b0: 662e 5f63 6f6e 6669 6773 0a0a 2020 2020  f._configs..    
+000051c0: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+000051d0: 6620 6b65 7977 6f72 6473 2873 656c 6629  f keywords(self)
+000051e0: 202d 3e20 4c69 7374 5b73 7472 5d3a 0a20   -> List[str]:. 
+000051f0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00005200: 6c66 2e5f 6b65 7977 6f72 6473 0a0a 2020  lf._keywords..  
+00005210: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+00005220: 6465 6620 7379 6d62 6f6c 6963 2873 656c  def symbolic(sel
+00005230: 6629 202d 3e20 626f 6f6c 3a0a 2020 2020  f) -> bool:.    
+00005240: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00005250: 5f73 796d 626f 6c69 630a 0a20 2020 2040  _symbolic..    @
+00005260: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00005270: 2068 6173 6479 6e61 6d69 6373 2873 656c   hasdynamics(sel
+00005280: 6629 3a0a 2020 2020 2020 2020 2222 220a  f):.        """.
+00005290: 2020 2020 2020 2020 526f 626f 7420 6861          Robot ha
+000052a0: 7320 6479 6e61 6d69 6320 7061 7261 6d65  s dynamic parame
+000052b0: 7465 7273 0a0a 2020 2020 2020 2020 5265  ters..        Re
+000052c0: 7475 726e 730a 2020 2020 2020 2020 2d2d  turns.        --
+000052d0: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6861  -----.        ha
+000052e0: 7364 796e 616d 6963 730a 2020 2020 2020  sdynamics.      
+000052f0: 2020 2020 2020 526f 626f 7420 6861 7320        Robot has 
+00005300: 6479 6e61 6d69 6320 7061 7261 6d65 7465  dynamic paramete
+00005310: 7273 0a0a 2020 2020 2020 2020 4174 206c  rs..        At l
+00005320: 6561 7374 206f 6e65 206c 696e 6b20 6861  east one link ha
+00005330: 7320 6173 736f 6369 6174 6564 2064 796e  s associated dyn
+00005340: 616d 6963 2070 6172 616d 6574 6572 732e  amic parameters.
+00005350: 0a0a 2020 2020 2020 2020 4578 616d 706c  ..        Exampl
+00005360: 6573 0a20 2020 2020 2020 202d 2d2d 2d2d  es.        -----
+00005370: 2d2d 2d0a 0a20 2020 2020 2020 202e 2e20  ---..        .. 
+00005380: 7275 6e62 6c6f 636b 3a3a 2070 7963 6f6e  runblock:: pycon
+00005390: 0a20 2020 2020 2020 203e 3e3e 2069 6d70  .        >>> imp
+000053a0: 6f72 7420 726f 626f 7469 6373 746f 6f6c  ort roboticstool
+000053b0: 626f 7820 6173 2072 7462 0a20 2020 2020  box as rtb.     
+000053c0: 2020 203e 3e3e 2072 6f62 6f74 203d 2072     >>> robot = r
+000053d0: 7462 2e6d 6f64 656c 732e 4448 2e50 756d  tb.models.DH.Pum
+000053e0: 6135 3630 2829 0a20 2020 2020 2020 203e  a560().        >
+000053f0: 3e3e 2072 6f62 6f74 2e68 6173 6479 6e61  >> robot.hasdyna
+00005400: 6d69 6373 3a0a 0a20 2020 2020 2020 2022  mics:..        "
+00005410: 2222 0a0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00005420: 726e 2073 656c 662e 5f68 6173 6479 6e61  rn self._hasdyna
+00005430: 6d69 6373 0a0a 2020 2020 4070 726f 7065  mics..    @prope
+00005440: 7274 790a 2020 2020 6465 6620 6861 7367  rty.    def hasg
+00005450: 656f 6d65 7472 7928 7365 6c66 293a 0a20  eometry(self):. 
+00005460: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00005470: 2020 2052 6f62 6f74 2068 6173 2067 656f     Robot has geo
+00005480: 6d65 7472 7920 6d6f 6465 6c0a 0a20 2020  metry model..   
+00005490: 2020 2020 2041 7420 6c65 6173 7420 6f6e       At least on
+000054a0: 6520 6c69 6e6b 2068 6173 2061 7373 6f63  e link has assoc
+000054b0: 6961 7465 6420 6d65 7368 2074 6f20 6465  iated mesh to de
+000054c0: 7363 7269 6265 2069 7473 2073 6861 7065  scribe its shape
+000054d0: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+000054e0: 6e73 0a20 2020 2020 2020 202d 2d2d 2d2d  ns.        -----
+000054f0: 2d2d 0a20 2020 2020 2020 2068 6173 6765  --.        hasge
+00005500: 6f6d 6574 7279 0a20 2020 2020 2020 2020  ometry.         
+00005510: 2020 2052 6f62 6f74 2068 6173 2067 656f     Robot has geo
+00005520: 6d65 7472 7920 6d6f 6465 6c0a 0a20 2020  metry model..   
+00005530: 2020 2020 2045 7861 6d70 6c65 730a 2020       Examples.  
+00005540: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 0a0a        --------..
+00005550: 2020 2020 2020 2020 2e2e 2072 756e 626c          .. runbl
+00005560: 6f63 6b3a 3a20 7079 636f 6e0a 2020 2020  ock:: pycon.    
+00005570: 2020 2020 3e3e 3e20 696d 706f 7274 2072      >>> import r
+00005580: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2061  oboticstoolbox a
+00005590: 7320 7274 620a 2020 2020 2020 2020 3e3e  s rtb.        >>
+000055a0: 3e20 726f 626f 7420 3d20 7274 622e 6d6f  > robot = rtb.mo
+000055b0: 6465 6c73 2e44 482e 5075 6d61 3536 3028  dels.DH.Puma560(
+000055c0: 290a 2020 2020 2020 2020 3e3e 3e20 726f  ).        >>> ro
+000055d0: 626f 742e 6861 7367 656f 6d65 7472 790a  bot.hasgeometry.
+000055e0: 0a20 2020 2020 2020 2053 6565 2041 6c73  .        See Als
+000055f0: 6f0a 2020 2020 2020 2020 2d2d 2d2d 2d2d  o.        ------
+00005600: 2d2d 0a20 2020 2020 2020 203a 6675 6e63  --.        :func
+00005610: 3a60 6861 7363 6f6c 6c69 7369 6f6e 600a  :`hascollision`.
+00005620: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00005630: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00005640: 662e 5f68 6173 6765 6f6d 6574 7279 0a0a  f._hasgeometry..
+00005650: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+00005660: 2020 6465 6620 6861 7363 6f6c 6c69 7369    def hascollisi
+00005670: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
+00005680: 2020 2222 220a 2020 2020 2020 2020 526f    """.        Ro
+00005690: 626f 7420 6861 7320 636f 6c6c 6973 696f  bot has collisio
+000056a0: 6e20 6d6f 6465 6c0a 0a20 2020 2020 2020  n model..       
+000056b0: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
+000056c0: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
+000056d0: 2068 6173 636f 6c6c 6973 696f 6e0a 2020   hascollision.  
+000056e0: 2020 2020 2020 2020 2020 526f 626f 7420            Robot 
+000056f0: 6861 7320 636f 6c6c 6973 696f 6e20 6d6f  has collision mo
+00005700: 6465 6c0a 0a20 2020 2020 2020 2041 7420  del..        At 
+00005710: 6c65 6173 7420 6f6e 6520 6c69 6e6b 2068  least one link h
+00005720: 6173 2061 7373 6f63 6961 7465 6420 636f  as associated co
+00005730: 6c6c 6973 696f 6e20 6d6f 6465 6c2e 0a0a  llision model...
+00005740: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+00005750: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00005760: 2d0a 0a20 2020 2020 2020 202e 2e20 7275  -..        .. ru
+00005770: 6e62 6c6f 636b 3a3a 2070 7963 6f6e 0a20  nblock:: pycon. 
+00005780: 2020 2020 2020 203e 3e3e 2069 6d70 6f72         >>> impor
+00005790: 7420 726f 626f 7469 6373 746f 6f6c 626f  t roboticstoolbo
+000057a0: 7820 6173 2072 7462 0a20 2020 2020 2020  x as rtb.       
+000057b0: 203e 3e3e 2072 6f62 6f74 203d 2072 7462   >>> robot = rtb
+000057c0: 2e6d 6f64 656c 732e 4448 2e50 756d 6135  .models.DH.Puma5
+000057d0: 3630 2829 0a20 2020 2020 2020 203e 3e3e  60().        >>>
+000057e0: 2072 6f62 6f74 2e68 6173 636f 6c6c 6973   robot.hascollis
+000057f0: 696f 6e0a 0a20 2020 2020 2020 2053 6565  ion..        See
+00005800: 2041 6c73 6f0a 2020 2020 2020 2020 2d2d   Also.        --
+00005810: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 203a  ------.        :
+00005820: 6675 6e63 3a60 6861 7367 656f 6d65 7472  func:`hasgeometr
+00005830: 7960 0a0a 2020 2020 2020 2020 2222 220a  y`..        """.
+00005840: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00005850: 7365 6c66 2e5f 6861 7363 6f6c 6c69 7369  self._hascollisi
+00005860: 6f6e 0a0a 2020 2020 4070 726f 7065 7274  on..    @propert
+00005870: 790a 2020 2020 6465 6620 6465 6661 756c  y.    def defaul
+00005880: 745f 6261 636b 656e 6428 7365 6c66 293a  t_backend(self):
+00005890: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000058a0: 2020 2020 2047 6574 2064 6566 6175 6c74       Get default
+000058b0: 2067 7261 7068 6963 616c 2062 6163 6b65   graphical backe
+000058c0: 6e64 0a0a 2020 2020 2020 2020 2d20 6060  nd..        - ``
+000058d0: 726f 626f 742e 6465 6661 756c 745f 6261  robot.default_ba
+000058e0: 636b 656e 6460 6020 4765 7420 7468 6520  ckend`` Get the 
+000058f0: 6465 6661 756c 7420 6772 6170 6869 6361  default graphica
+00005900: 6c20 6261 636b 656e 642c 2075 7365 6420  l backend, used 
+00005910: 7768 656e 0a20 2020 2020 2020 2020 2020  when.           
+00005920: 206e 6f20 6578 706c 6963 6974 2062 6163   no explicit bac
+00005930: 6b65 6e64 2069 7320 7061 7373 6564 2074  kend is passed t
+00005940: 6f20 6060 526f 626f 742e 706c 6f74 6060  o ``Robot.plot``
+00005950: 2e0a 2020 2020 2020 2020 2d20 6060 726f  ..        - ``ro
+00005960: 626f 742e 6465 6661 756c 745f 6261 636b  bot.default_back
+00005970: 656e 6420 3d20 2e2e 2e60 6020 5365 7420  end = ...`` Set 
+00005980: 7468 6520 6465 6661 756c 7420 6772 6170  the default grap
+00005990: 6869 6361 6c20 6261 636b 656e 642c 2075  hical backend, u
+000059a0: 7365 6420 7768 656e 0a20 2020 2020 2020  sed when.       
+000059b0: 2020 2020 206e 6f20 6578 706c 6963 6974       no explicit
+000059c0: 2062 6163 6b65 6e64 2069 7320 7061 7373   backend is pass
+000059d0: 6564 2074 6f20 6060 526f 626f 742e 706c  ed to ``Robot.pl
+000059e0: 6f74 6060 2e20 2054 6865 2064 6566 6175  ot``.  The defau
+000059f0: 6c74 2073 6574 2068 6572 6520 7769 6c6c  lt set here will
+00005a00: 0a20 2020 2020 2020 2020 2020 2062 6520  .            be 
+00005a10: 6f76 6572 7269 6464 656e 2069 6620 7468  overridden if th
+00005a20: 6520 7061 7274 6963 756c 6172 2060 6052  e particular ``R
+00005a30: 6f62 6f74 6060 2073 7562 636c 6173 7320  obot`` subclass 
+00005a40: 6361 6e6e 6f74 2073 7570 706f 7274 2069  cannot support i
+00005a50: 742e 0a0a 2020 2020 2020 2020 5265 7475  t...        Retu
+00005a60: 726e 730a 2020 2020 2020 2020 2d2d 2d2d  rns.        ----
+00005a70: 2d2d 2d0a 2020 2020 2020 2020 6465 6661  ---.        defa
+00005a80: 756c 745f 6261 636b 656e 640a 2020 2020  ult_backend.    
+00005a90: 2020 2020 2020 2020 6261 636b 656e 6420          backend 
+00005aa0: 6e61 6d65 0a0a 0a20 2020 2020 2020 2022  name...        "
+00005ab0: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+00005ac0: 6e20 7365 6c66 2e5f 6465 6661 756c 745f  n self._default_
+00005ad0: 6261 636b 656e 640a 0a20 2020 2040 6465  backend..    @de
+00005ae0: 6661 756c 745f 6261 636b 656e 642e 7365  fault_backend.se
+00005af0: 7474 6572 0a20 2020 2064 6566 2064 6566  tter.    def def
+00005b00: 6175 6c74 5f62 6163 6b65 6e64 2873 656c  ault_backend(sel
+00005b10: 662c 2062 6529 3a0a 2020 2020 2020 2020  f, be):.        
+00005b20: 7365 6c66 2e5f 6465 6661 756c 745f 6261  self._default_ba
+00005b30: 636b 656e 6420 3d20 6265 0a0a 2020 2020  ckend = be..    
+00005b40: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+00005b50: 6620 6772 6176 6974 7928 7365 6c66 2920  f gravity(self) 
+00005b60: 2d3e 204e 4441 7272 6179 3a0a 2020 2020  -> NDArray:.    
+00005b70: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00005b80: 4765 742f 7365 7420 6465 6661 756c 7420  Get/set default 
+00005b90: 6772 6176 6974 6174 696f 6e61 6c20 6163  gravitational ac
+00005ba0: 6365 6c65 7261 7469 6f6e 2028 526f 626f  celeration (Robo
+00005bb0: 7420 7375 7065 7263 6c61 7373 290a 0a20  t superclass).. 
+00005bc0: 2020 2020 2020 202d 2060 6072 6f62 6f74         - ``robot
+00005bd0: 2e6e 616d 6560 6020 6973 2074 6865 2064  .name`` is the d
+00005be0: 6566 6175 6c74 2067 7261 7669 7461 7469  efault gravitati
+00005bf0: 6f6e 616c 2061 6363 656c 6572 6174 696f  onal acceleratio
+00005c00: 6e0a 2020 2020 2020 2020 2d20 6060 726f  n.        - ``ro
+00005c10: 626f 742e 6e61 6d65 203d 202e 2e2e 6060  bot.name = ...``
+00005c20: 2063 6865 636b 7320 616e 6420 7365 7473   checks and sets
+00005c30: 2064 6566 6175 6c74 2067 7261 7669 7461   default gravita
+00005c40: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
+00005c50: 2020 2061 6363 656c 6572 6174 696f 6e0a     acceleration.
+00005c60: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00005c70: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
+00005c80: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00005c90: 6772 6176 6974 790a 2020 2020 2020 2020  gravity.        
+00005ca0: 2020 2020 7468 6520 6e65 7720 6772 6176      the new grav
+00005cb0: 6974 6174 696f 6e61 6c20 6163 6365 6c65  itational accele
+00005cc0: 7261 7469 6f6e 2066 6f72 2074 6869 7320  ration for this 
+00005cd0: 726f 626f 740a 0a20 2020 2020 2020 2052  robot..        R
+00005ce0: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+00005cf0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2067  ------.        g
+00005d00: 7261 7669 7479 0a20 2020 2020 2020 2020  ravity.         
+00005d10: 2020 2067 7261 7669 7461 7469 6f6e 616c     gravitational
+00005d20: 2061 6363 656c 6572 6174 696f 6e0a 0a20   acceleration.. 
+00005d30: 2020 2020 2020 204e 6f74 6573 0a20 2020         Notes.   
+00005d40: 2020 2020 202d 2d2d 2d2d 0a20 2020 2020       -----.     
+00005d50: 2020 2049 6620 7468 6520 7a2d 6178 6973     If the z-axis
+00005d60: 2069 7320 7570 7761 7264 2c20 6f75 7420   is upward, out 
+00005d70: 6f66 2074 6865 2045 6172 7468 2c20 7468  of the Earth, th
+00005d80: 6973 2073 686f 756c 6420 6265 0a20 2020  is should be.   
+00005d90: 2020 2020 2061 2070 6f73 6974 6976 6520       a positive 
+00005da0: 6e75 6d62 6572 2e0a 0a20 2020 2020 2020  number...       
+00005db0: 2022 2222 0a0a 2020 2020 2020 2020 7265   """..        re
+00005dc0: 7475 726e 2073 656c 662e 5f67 7261 7669  turn self._gravi
+00005dd0: 7479 0a0a 2020 2020 4067 7261 7669 7479  ty..    @gravity
+00005de0: 2e73 6574 7465 720a 2020 2020 6465 6620  .setter.    def 
+00005df0: 6772 6176 6974 7928 7365 6c66 2c20 6772  gravity(self, gr
+00005e00: 6176 6974 795f 6e65 773a 2041 7272 6179  avity_new: Array
+00005e10: 4c69 6b65 293a 0a20 2020 2020 2020 2073  Like):.        s
+00005e20: 656c 662e 5f67 7261 7669 7479 203d 206e  elf._gravity = n
+00005e30: 702e 6172 7261 7928 6765 7476 6563 746f  p.array(getvecto
+00005e40: 7228 6772 6176 6974 795f 6e65 772c 2033  r(gravity_new, 3
+00005e50: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+00005e60: 6479 6e63 6861 6e67 6564 2829 0a0a 2020  dynchanged()..  
+00005e70: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+00005e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005ea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005eb0: 2d2d 2d2d 2d2d 2d2d 2d20 230a 0a20 2020  --------- #..   
+00005ec0: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
+00005ed0: 6566 2071 2873 656c 6629 202d 3e20 4e44  ef q(self) -> ND
+00005ee0: 4172 7261 793a 0a20 2020 2020 2020 2022  Array:.        "
+00005ef0: 2222 0a20 2020 2020 2020 2047 6574 2f73  "".        Get/s
+00005f00: 6574 2072 6f62 6f74 206a 6f69 6e74 2063  et robot joint c
+00005f10: 6f6e 6669 6775 7261 7469 6f6e 0a0a 2020  onfiguration..  
+00005f20: 2020 2020 2020 2d20 6060 726f 626f 742e        - ``robot.
+00005f30: 7160 6020 6973 2074 6865 2072 6f62 6f74  q`` is the robot
+00005f40: 206a 6f69 6e74 2063 6f6e 6669 6775 7261   joint configura
+00005f50: 7469 6f6e 0a20 2020 2020 2020 202d 2060  tion.        - `
+00005f60: 6072 6f62 6f74 2e71 203d 202e 2e2e 6060  `robot.q = ...``
+00005f70: 2063 6865 636b 7320 616e 6420 7365 7473   checks and sets
+00005f80: 2074 6865 206a 6f69 6e74 2063 6f6e 6669   the joint confi
+00005f90: 6775 7261 7469 6f6e 0a0a 2020 2020 2020  guration..      
+00005fa0: 2020 5061 7261 6d65 7465 7273 0a20 2020    Parameters.   
+00005fb0: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0a       ----------.
+00005fc0: 2020 2020 2020 2020 710a 2020 2020 2020          q.      
+00005fd0: 2020 2020 2020 7468 6520 6e65 7720 726f        the new ro
+00005fe0: 626f 7420 6a6f 696e 7420 636f 6e66 6967  bot joint config
+00005ff0: 7572 6174 696f 6e0a 0a20 2020 2020 2020  uration..       
+00006000: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
+00006010: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
+00006020: 2071 0a20 2020 2020 2020 2020 2020 2072   q.            r
+00006030: 6f62 6f74 206a 6f69 6e74 2063 6f6e 6669  obot joint confi
+00006040: 6775 7261 7469 6f6e 0a0a 2020 2020 2020  guration..      
+00006050: 2020 2222 220a 0a20 2020 2020 2020 2072    """..        r
+00006060: 6574 7572 6e20 7365 6c66 2e5f 710a 0a20  eturn self._q.. 
+00006070: 2020 2040 712e 7365 7474 6572 0a20 2020     @q.setter.   
+00006080: 2064 6566 2071 2873 656c 662c 2071 5f6e   def q(self, q_n
+00006090: 6577 3a20 4172 7261 794c 696b 6529 3a0a  ew: ArrayLike):.
+000060a0: 2020 2020 2020 2020 7365 6c66 2e5f 7120          self._q 
+000060b0: 3d20 6e70 2e61 7272 6179 2867 6574 7665  = np.array(getve
+000060c0: 6374 6f72 2871 5f6e 6577 2c20 7365 6c66  ctor(q_new, self
+000060d0: 2e6e 2929 0a0a 2020 2020 4070 726f 7065  .n))..    @prope
+000060e0: 7274 790a 2020 2020 6465 6620 7164 2873  rty.    def qd(s
+000060f0: 656c 6629 202d 3e20 4e44 4172 7261 793a  elf) -> NDArray:
+00006100: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00006110: 2020 2020 2047 6574 2f73 6574 2072 6f62       Get/set rob
+00006120: 6f74 206a 6f69 6e74 2076 656c 6f63 6974  ot joint velocit
+00006130: 790a 0a20 2020 2020 2020 202d 2060 6072  y..        - ``r
+00006140: 6f62 6f74 2e71 6460 6020 6973 2074 6865  obot.qd`` is the
+00006150: 2072 6f62 6f74 206a 6f69 6e74 2076 656c   robot joint vel
+00006160: 6f63 6974 790a 2020 2020 2020 2020 2d20  ocity.        - 
+00006170: 6060 726f 626f 742e 7164 203d 202e 2e2e  ``robot.qd = ...
+00006180: 6060 2063 6865 636b 7320 616e 6420 7365  `` checks and se
+00006190: 7473 2074 6865 206a 6f69 6e74 2076 656c  ts the joint vel
+000061a0: 6f63 6974 790a 0a20 2020 2020 2020 2052  ocity..        R
+000061b0: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+000061c0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2071  ------.        q
+000061d0: 640a 2020 2020 2020 2020 2020 2020 726f  d.            ro
+000061e0: 626f 7420 6a6f 696e 7420 7665 6c6f 6369  bot joint veloci
+000061f0: 7479 0a0a 2020 2020 2020 2020 2222 220a  ty..        """.
+00006200: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00006210: 7365 6c66 2e5f 7164 0a0a 2020 2020 4071  self._qd..    @q
+00006220: 642e 7365 7474 6572 0a20 2020 2064 6566  d.setter.    def
+00006230: 2071 6428 7365 6c66 2c20 7164 5f6e 6577   qd(self, qd_new
+00006240: 3a20 4172 7261 794c 696b 6529 3a0a 2020  : ArrayLike):.  
+00006250: 2020 2020 2020 7365 6c66 2e5f 7164 203d        self._qd =
+00006260: 206e 702e 6172 7261 7928 6765 7476 6563   np.array(getvec
+00006270: 746f 7228 7164 5f6e 6577 2c20 7365 6c66  tor(qd_new, self
+00006280: 2e6e 2929 0a0a 2020 2020 4070 726f 7065  .n))..    @prope
+00006290: 7274 790a 2020 2020 6465 6620 7164 6428  rty.    def qdd(
+000062a0: 7365 6c66 2920 2d3e 204e 4441 7272 6179  self) -> NDArray
+000062b0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+000062c0: 2020 2020 2020 4765 742f 7365 7420 726f        Get/set ro
+000062d0: 626f 7420 6a6f 696e 7420 6163 6365 6c65  bot joint accele
+000062e0: 7261 7469 6f6e 0a0a 2020 2020 2020 2020  ration..        
+000062f0: 2d20 6060 726f 626f 742e 7164 6460 6020  - ``robot.qdd`` 
+00006300: 6973 2074 6865 2072 6f62 6f74 206a 6f69  is the robot joi
+00006310: 6e74 2061 6363 656c 6572 6174 696f 6e0a  nt acceleration.
+00006320: 2020 2020 2020 2020 2d20 6060 726f 626f          - ``robo
+00006330: 742e 7164 6420 3d20 2e2e 2e60 6020 6368  t.qdd = ...`` ch
+00006340: 6563 6b73 2061 6e64 2073 6574 7320 7468  ecks and sets th
+00006350: 6520 726f 626f 7420 6a6f 696e 7420 6163  e robot joint ac
+00006360: 6365 6c65 7261 7469 6f6e 0a0a 2020 2020  celeration..    
+00006370: 2020 2020 5265 7475 726e 730a 2020 2020      Returns.    
+00006380: 2020 2020 2d2d 2d2d 2d2d 2d0a 2020 2020      -------.    
+00006390: 2020 2020 7164 640a 2020 2020 2020 2020      qdd.        
+000063a0: 2020 2020 726f 626f 7420 6a6f 696e 7420      robot joint 
+000063b0: 6163 6365 6c65 7261 7469 6f6e 0a0a 0a20  acceleration... 
+000063c0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000063d0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+000063e0: 7164 640a 0a20 2020 2040 7164 642e 7365  qdd..    @qdd.se
+000063f0: 7474 6572 0a20 2020 2064 6566 2071 6464  tter.    def qdd
+00006400: 2873 656c 662c 2071 6464 5f6e 6577 3a20  (self, qdd_new: 
+00006410: 4172 7261 794c 696b 6529 3a0a 2020 2020  ArrayLike):.    
+00006420: 2020 2020 7365 6c66 2e5f 7164 6420 3d20      self._qdd = 
+00006430: 6e70 2e61 7272 6179 2867 6574 7665 6374  np.array(getvect
+00006440: 6f72 2871 6464 5f6e 6577 2c20 7365 6c66  or(qdd_new, self
+00006450: 2e6e 2929 0a0a 2020 2020 4070 726f 7065  .n))..    @prope
+00006460: 7274 790a 2020 2020 6465 6620 716c 696d  rty.    def qlim
+00006470: 2873 656c 6629 202d 3e20 4e44 4172 7261  (self) -> NDArra
+00006480: 793a 0a20 2020 2020 2020 2072 2222 220a  y:.        r""".
+00006490: 2020 2020 2020 2020 4a6f 696e 7420 6c69          Joint li
+000064a0: 6d69 7473 0a0a 2020 2020 2020 2020 4c69  mits..        Li
+000064b0: 6d69 7473 2061 7265 2065 7874 7261 6374  mits are extract
+000064c0: 6564 2066 726f 6d20 7468 6520 6c69 6e6b  ed from the link
+000064d0: 206f 626a 6563 7473 2e20 2049 6620 6a6f   objects.  If jo
+000064e0: 696e 7473 206c 696d 6974 7320 6172 650a  ints limits are.
+000064f0: 2020 2020 2020 2020 6e6f 7420 7365 7420          not set 
+00006500: 666f 723a 0a0a 2020 2020 2020 2020 2d20  for:..        - 
+00006510: 6120 7265 766f 6c75 7465 206a 6f69 6e74  a revolute joint
+00006520: 205b 2df0 9d9c 8b2e 20f0 9d9c 8b5d 2069   [-..... ....] i
+00006530: 7320 7265 7475 726e 6564 0a20 2020 2020  s returned.     
+00006540: 2020 202d 2061 2070 7269 736d 6174 6963     - a prismatic
+00006550: 206a 6f69 6e74 2061 6e20 6578 6365 7074   joint an except
+00006560: 696f 6e20 6973 2072 6169 7365 640a 0a20  ion is raised.. 
+00006570: 2020 2020 2020 2041 7474 7269 6275 7465         Attribute
+00006580: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+00006590: 2d2d 2d2d 0a20 2020 2020 2020 2071 6c69  ----.        qli
+000065a0: 6d0a 2020 2020 2020 2020 2020 2020 416e  m.            An
+000065b0: 2061 7272 6179 206f 6620 6a6f 696e 7473   array of joints
+000065c0: 206c 696d 6974 7320 2832 2c20 6e29 0a0a   limits (2, n)..
+000065d0: 2020 2020 2020 2020 5261 6973 6573 0a20          Raises. 
+000065e0: 2020 2020 2020 202d 2d2d 2d2d 2d0a 2020         ------.  
+000065f0: 2020 2020 2020 5661 6c75 6545 7272 6f72        ValueError
+00006600: 0a20 2020 2020 2020 2020 2020 2075 6e73  .            uns
+00006610: 6574 206c 696d 6974 7320 666f 7220 6120  et limits for a 
+00006620: 7072 6973 6d61 7469 6320 6a6f 696e 740a  prismatic joint.
+00006630: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00006640: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00006650: 0a20 2020 2020 2020 2071 6c69 6d0a 2020  .        qlim.  
+00006660: 2020 2020 2020 2020 2020 4172 7261 7920            Array 
+00006670: 6f66 206a 6f69 6e74 206c 696d 6974 2076  of joint limit v
+00006680: 616c 7565 730a 0a20 2020 2020 2020 2045  alues..        E
+00006690: 7861 6d70 6c65 730a 2020 2020 2020 2020  xamples.        
+000066a0: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+000066b0: 202e 2e20 7275 6e62 6c6f 636b 3a3a 2070   .. runblock:: p
+000066c0: 7963 6f6e 0a20 2020 2020 2020 203e 3e3e  ycon.        >>>
+000066d0: 2069 6d70 6f72 7420 726f 626f 7469 6373   import robotics
+000066e0: 746f 6f6c 626f 7820 6173 2072 7462 0a20  toolbox as rtb. 
+000066f0: 2020 2020 2020 203e 3e3e 2072 6f62 6f74         >>> robot
+00006700: 203d 2072 7462 2e6d 6f64 656c 732e 4448   = rtb.models.DH
+00006710: 2e50 756d 6135 3630 2829 0a20 2020 2020  .Puma560().     
+00006720: 2020 203e 3e3e 2072 6f62 6f74 2e71 6c69     >>> robot.qli
+00006730: 6d0a 0a20 2020 2020 2020 2022 2222 0a0a  m..        """..
+00006740: 2020 2020 2020 2020 6c69 6d69 7473 203d          limits =
+00006750: 206e 702e 7a65 726f 7328 2832 2c20 7365   np.zeros((2, se
+00006760: 6c66 2e6e 2929 0a20 2020 2020 2020 206a  lf.n)).        j
+00006770: 203d 2030 0a0a 2020 2020 2020 2020 666f   = 0..        fo
+00006780: 7220 6c69 6e6b 2069 6e20 7365 6c66 2e6c  r link in self.l
+00006790: 696e 6b73 3a0a 2020 2020 2020 2020 2020  inks:.          
+000067a0: 2020 6966 206c 696e 6b2e 6973 7265 766f    if link.isrevo
+000067b0: 6c75 7465 3a0a 2020 2020 2020 2020 2020  lute:.          
+000067c0: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+000067d0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+000067e0: 696e 6b2e 716c 696d 2069 7320 4e6f 6e65  ink.qlim is None
+000067f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006800: 2020 2020 206f 7220 6c69 6e6b 2e71 6c69       or link.qli
+00006810: 6d5b 305d 2069 7320 4e6f 6e65 0a20 2020  m[0] is None.   
+00006820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006830: 206f 7220 6e70 2e61 6e79 286e 702e 6973   or np.any(np.is
+00006840: 6e61 6e28 6c69 6e6b 2e71 6c69 6d29 290a  nan(link.qlim)).
+00006850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006860: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00006870: 2020 2020 2020 2076 203d 205b 2d6e 702e         v = [-np.
+00006880: 7069 2c20 6e70 2e70 695d 0a20 2020 2020  pi, np.pi].     
+00006890: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000068a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000068b0: 2020 2020 2076 203d 206c 696e 6b2e 716c       v = link.ql
+000068c0: 696d 0a20 2020 2020 2020 2020 2020 2065  im.            e
+000068d0: 6c69 6620 6c69 6e6b 2e69 7370 7269 736d  lif link.isprism
+000068e0: 6174 6963 3a0a 2020 2020 2020 2020 2020  atic:.          
+000068f0: 2020 2020 2020 6966 206c 696e 6b2e 716c        if link.ql
+00006900: 696d 2069 7320 4e6f 6e65 3a0a 2020 2020  im is None:.    
+00006910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006920: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00006930: 2822 556e 6465 6669 6e65 6420 7072 6973  ("Undefined pris
+00006940: 6d61 7469 6320 6a6f 696e 7420 6c69 6d69  matic joint limi
+00006950: 7422 290a 2020 2020 2020 2020 2020 2020  t").            
+00006960: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00006970: 2020 2020 2020 2020 2020 2020 2020 7620                v 
+00006980: 3d20 6c69 6e6b 2e71 6c69 6d0a 2020 2020  = link.qlim.    
+00006990: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000069a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000069b0: 4669 7865 6420 6c69 6e6b 0a20 2020 2020  Fixed link.     
+000069c0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+000069d0: 6e75 6520 2023 2070 7261 676d 6120 6e6f  nue  # pragma no
+000069e0: 636f 7665 720a 0a20 2020 2020 2020 2020  cover..         
+000069f0: 2020 206c 696d 6974 735b 3a2c 206a 5d20     limits[:, j] 
+00006a00: 3d20 760a 2020 2020 2020 2020 2020 2020  = v.            
+00006a10: 6a20 2b3d 2031 0a0a 2020 2020 2020 2020  j += 1..        
+00006a20: 7265 7475 726e 206c 696d 6974 730a 0a20  return limits.. 
+00006a30: 2020 2040 716c 696d 2e73 6574 7465 720a     @qlim.setter.
+00006a40: 2020 2020 6465 6620 716c 696d 2873 656c      def qlim(sel
+00006a50: 662c 206e 6577 5f71 6c69 6d3a 2041 7272  f, new_qlim: Arr
+00006a60: 6179 4c69 6b65 293a 0a20 2020 2020 2020  ayLike):.       
+00006a70: 206e 6577 5f71 6c69 6d20 3d20 6e70 2e61   new_qlim = np.a
+00006a80: 7272 6179 286e 6577 5f71 6c69 6d29 0a0a  rray(new_qlim)..
+00006a90: 2020 2020 2020 2020 6966 206e 6577 5f71          if new_q
+00006aa0: 6c69 6d2e 7368 6170 6520 213d 2028 322c  lim.shape != (2,
+00006ab0: 2073 656c 662e 6e29 3a0a 2020 2020 2020   self.n):.      
+00006ac0: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00006ad0: 6545 7272 6f72 2822 6e65 775f 716c 696d  eError("new_qlim
+00006ae0: 206d 7573 7420 6265 206f 6620 7368 6170   must be of shap
+00006af0: 6520 2832 2c20 6e29 2229 0a0a 2020 2020  e (2, n)")..    
+00006b00: 2020 2020 6a20 3d20 300a 2020 2020 2020      j = 0.      
+00006b10: 2020 666f 7220 6c69 6e6b 2069 6e20 7365    for link in se
+00006b20: 6c66 2e6c 696e 6b73 3a0a 2020 2020 2020  lf.links:.      
+00006b30: 2020 2020 2020 6966 206c 696e 6b2e 6973        if link.is
+00006b40: 6a6f 696e 743a 0a20 2020 2020 2020 2020  joint:.         
+00006b50: 2020 2020 2020 206c 696e 6b2e 716c 696d         link.qlim
+00006b60: 203d 206e 6577 5f71 6c69 6d5b 3a2c 206a   = new_qlim[:, j
+00006b70: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00006b80: 2020 6a20 2b3d 2031 0a0a 2020 2020 4070    j += 1..    @p
+00006b90: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00006ba0: 7374 7275 6374 7572 6528 7365 6c66 2920  structure(self) 
+00006bb0: 2d3e 2073 7472 3a0a 2020 2020 2020 2020  -> str:.        
+00006bc0: 2222 220a 2020 2020 2020 2020 5265 7475  """.        Retu
+00006bd0: 726e 2074 6865 206a 6f69 6e74 2073 7472  rn the joint str
+00006be0: 7563 7475 7265 2073 7472 696e 670a 0a20  ucture string.. 
+00006bf0: 2020 2020 2020 2041 2073 7472 696e 6720         A string 
+00006c00: 7769 7468 206f 6e65 206c 6574 7465 7220  with one letter 
+00006c10: 7065 7220 6a6f 696e 743a 2060 6052 6060  per joint: ``R``
+00006c20: 2066 6f72 2061 2072 6576 6f6c 7574 650a   for a revolute.
+00006c30: 2020 2020 2020 2020 6a6f 696e 742c 2061          joint, a
+00006c40: 6e64 2060 6050 6060 2066 6f72 2061 2070  nd ``P`` for a p
+00006c50: 7269 736d 6174 6963 206a 6f69 6e74 2e0a  rismatic joint..
+00006c60: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00006c70: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00006c80: 0a20 2020 2020 2020 2073 7472 7563 7475  .        structu
+00006c90: 7265 0a20 2020 2020 2020 2020 2020 206a  re.            j
+00006ca0: 6f69 6e74 2063 6f6e 6669 6775 7261 7469  oint configurati
+00006cb0: 6f6e 2073 7472 696e 670a 0a20 2020 2020  on string..     
+00006cc0: 2020 2045 7861 6d70 6c65 730a 2020 2020     Examples.    
+00006cd0: 2020 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020      --------.   
+00006ce0: 2020 2020 202e 2e20 7275 6e62 6c6f 636b       .. runblock
+00006cf0: 3a3a 2070 7963 6f6e 0a20 2020 2020 2020  :: pycon.       
+00006d00: 203e 3e3e 2069 6d70 6f72 7420 726f 626f   >>> import robo
+00006d10: 7469 6373 746f 6f6c 626f 7820 6173 2072  ticstoolbox as r
+00006d20: 7462 0a20 2020 2020 2020 203e 3e3e 2070  tb.        >>> p
+00006d30: 756d 6120 3d20 7274 622e 6d6f 6465 6c73  uma = rtb.models
+00006d40: 2e44 482e 5075 6d61 3536 3028 290a 2020  .DH.Puma560().  
+00006d50: 2020 2020 2020 3e3e 3e20 7075 6d61 2e73        >>> puma.s
+00006d60: 7472 7563 7475 7265 0a20 2020 2020 2020  tructure.       
+00006d70: 203e 3e3e 2073 7461 6e66 6f72 6420 3d20   >>> stanford = 
+00006d80: 7274 622e 6d6f 6465 6c73 2e44 482e 5374  rtb.models.DH.St
+00006d90: 616e 666f 7264 2829 0a20 2020 2020 2020  anford().       
+00006da0: 203e 3e3e 2073 7461 6e66 6f72 642e 7374   >>> stanford.st
+00006db0: 7275 6374 7572 650a 0a20 2020 2020 2020  ructure..       
+00006dc0: 204e 6f74 6573 0a20 2020 2020 2020 202d   Notes.        -
+00006dd0: 2d2d 2d2d 0a20 2020 2020 2020 2046 6978  ----.        Fix
+00006de0: 6564 206a 6f69 6e74 732c 2074 6861 7420  ed joints, that 
+00006df0: 6d61 696e 7461 696e 2061 2063 6f6e 7374  maintain a const
+00006e00: 616e 7420 6c69 6e6b 2072 656c 6174 6976  ant link relativ
+00006e10: 6520 706f 7365 2c0a 2020 2020 2020 2020  e pose,.        
+00006e20: 6172 6520 6e6f 7420 696e 636c 7564 6564  are not included
+00006e30: 2e0a 2020 2020 2020 2020 6060 6c65 6e28  ..        ``len(
+00006e40: 7365 6c66 2e73 7472 7563 7475 7265 2920  self.structure) 
+00006e50: 3d3d 2073 656c 662e 6e60 602e 0a0a 2020  == self.n``...  
+00006e60: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
+00006e70: 2020 2073 7472 7563 7475 7265 203d 205b     structure = [
+00006e80: 5d0a 0a20 2020 2020 2020 2066 6f72 206c  ]..        for l
+00006e90: 696e 6b20 696e 2073 656c 662e 6c69 6e6b  ink in self.link
+00006ea0: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
+00006eb0: 6620 6c69 6e6b 2e69 7372 6576 6f6c 7574  f link.isrevolut
+00006ec0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00006ed0: 2020 2073 7472 7563 7475 7265 2e61 7070     structure.app
+00006ee0: 656e 6428 2252 2229 0a20 2020 2020 2020  end("R").       
+00006ef0: 2020 2020 2065 6c69 6620 6c69 6e6b 2e69       elif link.i
+00006f00: 7370 7269 736d 6174 6963 3a0a 2020 2020  sprismatic:.    
+00006f10: 2020 2020 2020 2020 2020 2020 7374 7275              stru
+00006f20: 6374 7572 652e 6170 7065 6e64 2822 5022  cture.append("P"
+00006f30: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00006f40: 6e20 2222 2e6a 6f69 6e28 7374 7275 6374  n "".join(struct
+00006f50: 7572 6529 0a0a 2020 2020 4070 726f 7065  ure)..    @prope
+00006f60: 7274 790a 2020 2020 6465 6620 7072 6973  rty.    def pris
+00006f70: 6d61 7469 636a 6f69 6e74 7328 7365 6c66  maticjoints(self
+00006f80: 2920 2d3e 204c 6973 745b 626f 6f6c 5d3a  ) -> List[bool]:
+00006f90: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00006fa0: 2020 2020 2052 6576 6f6c 7574 6520 6a6f       Revolute jo
+00006fb0: 696e 7473 2061 7320 626f 6f6c 2061 7272  ints as bool arr
+00006fc0: 6179 0a0a 2020 2020 2020 2020 5265 7475  ay..        Retu
+00006fd0: 726e 730a 2020 2020 2020 2020 2d2d 2d2d  rns.        ----
+00006fe0: 2d2d 2d0a 2020 2020 2020 2020 7072 6973  ---.        pris
+00006ff0: 6d61 7469 636a 6f69 6e74 730a 2020 2020  maticjoints.    
+00007000: 2020 2020 2020 2020 6172 7261 7920 6f66          array of
+00007010: 206a 6f69 6e74 2074 7970 652c 2054 7275   joint type, Tru
+00007020: 6520 6966 2070 7269 736d 6174 6963 0a0a  e if prismatic..
+00007030: 2020 2020 2020 2020 4578 616d 706c 6573          Examples
+00007040: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+00007050: 2d0a 2020 2020 2020 2020 2e2e 2072 756e  -.        .. run
+00007060: 626c 6f63 6b3a 3a20 7079 636f 6e0a 2020  block:: pycon.  
+00007070: 2020 2020 2020 3e3e 3e20 696d 706f 7274        >>> import
+00007080: 2072 6f62 6f74 6963 7374 6f6f 6c62 6f78   roboticstoolbox
+00007090: 2061 7320 7274 620a 2020 2020 2020 2020   as rtb.        
+000070a0: 3e3e 3e20 7075 6d61 203d 2072 7462 2e6d  >>> puma = rtb.m
+000070b0: 6f64 656c 732e 4448 2e50 756d 6135 3630  odels.DH.Puma560
+000070c0: 2829 0a20 2020 2020 2020 203e 3e3e 2070  ().        >>> p
+000070d0: 756d 612e 7072 6973 6d61 7469 636a 6f69  uma.prismaticjoi
+000070e0: 6e74 7328 290a 2020 2020 2020 2020 3e3e  nts().        >>
+000070f0: 3e20 7374 616e 666f 7264 203d 2072 7462  > stanford = rtb
+00007100: 2e6d 6f64 656c 732e 4448 2e53 7461 6e66  .models.DH.Stanf
+00007110: 6f72 6428 290a 2020 2020 2020 2020 3e3e  ord().        >>
+00007120: 3e20 7374 616e 666f 7264 2e70 7269 736d  > stanford.prism
+00007130: 6174 6963 6a6f 696e 7473 2829 0a0a 2020  aticjoints()..  
+00007140: 2020 2020 2020 4e6f 7465 730a 2020 2020        Notes.    
+00007150: 2020 2020 2d2d 2d2d 2d0a 2020 2020 2020      -----.      
+00007160: 2020 4669 7865 6420 6a6f 696e 7473 2c20    Fixed joints, 
+00007170: 7468 6174 206d 6169 6e74 6169 6e20 6120  that maintain a 
+00007180: 636f 6e73 7461 6e74 206c 696e 6b20 7265  constant link re
+00007190: 6c61 7469 7665 2070 6f73 652c 0a20 2020  lative pose,.   
+000071a0: 2020 2020 2061 7265 206e 6f74 2069 6e63       are not inc
+000071b0: 6c75 6465 642e 0a0a 2020 2020 2020 2020  luded...        
+000071c0: 5365 6520 416c 736f 0a20 2020 2020 2020  See Also.       
+000071d0: 202d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020   --------.      
+000071e0: 2020 3a66 756e 633a 604c 696e 6b2e 6973    :func:`Link.is
+000071f0: 7072 6973 6d61 7469 6360 0a20 2020 2020  prismatic`.     
+00007200: 2020 203a 6675 6e63 3a60 7265 766f 6c75     :func:`revolu
+00007210: 7465 6a6f 696e 7473 600a 0a20 2020 2020  tejoints`..     
+00007220: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+00007230: 7265 7475 726e 205b 6c69 6e6b 2e69 7370  return [link.isp
+00007240: 7269 736d 6174 6963 2066 6f72 206c 696e  rismatic for lin
+00007250: 6b20 696e 2073 656c 662e 6c69 6e6b 7320  k in self.links 
+00007260: 6966 206c 696e 6b2e 6973 6a6f 696e 745d  if link.isjoint]
+00007270: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+00007280: 2020 2020 6465 6620 7265 766f 6c75 7465      def revolute
+00007290: 6a6f 696e 7473 2873 656c 6629 202d 3e20  joints(self) -> 
+000072a0: 4c69 7374 5b62 6f6f 6c5d 3a0a 2020 2020  List[bool]:.    
+000072b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000072c0: 5265 766f 6c75 7465 206a 6f69 6e74 7320  Revolute joints 
+000072d0: 6173 2062 6f6f 6c20 6172 7261 790a 0a20  as bool array.. 
+000072e0: 2020 2020 2020 2052 6574 7572 6e73 0a20         Returns. 
+000072f0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 0a20         -------. 
+00007300: 2020 2020 2020 2072 6576 6f6c 7574 656a         revolutej
+00007310: 6f69 6e74 730a 2020 2020 2020 2020 2020  oints.          
+00007320: 2020 6172 7261 7920 6f66 206a 6f69 6e74    array of joint
+00007330: 2074 7970 652c 2054 7275 6520 6966 2072   type, True if r
+00007340: 6576 6f6c 7574 650a 0a20 2020 2020 2020  evolute..       
+00007350: 2045 7861 6d70 6c65 730a 2020 2020 2020   Examples.      
+00007360: 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020    --------.     
+00007370: 2020 202e 2e20 7275 6e62 6c6f 636b 3a3a     .. runblock::
+00007380: 2070 7963 6f6e 0a20 2020 2020 2020 203e   pycon.        >
+00007390: 3e3e 2069 6d70 6f72 7420 726f 626f 7469  >> import roboti
+000073a0: 6373 746f 6f6c 626f 7820 6173 2072 7462  cstoolbox as rtb
+000073b0: 0a20 2020 2020 2020 203e 3e3e 2070 756d  .        >>> pum
+000073c0: 6120 3d20 7274 622e 6d6f 6465 6c73 2e44  a = rtb.models.D
+000073d0: 482e 5075 6d61 3536 3028 290a 2020 2020  H.Puma560().    
+000073e0: 2020 2020 3e3e 3e20 7075 6d61 2e72 6576      >>> puma.rev
+000073f0: 6f6c 7574 656a 6f69 6e74 7328 290a 2020  olutejoints().  
+00007400: 2020 2020 2020 3e3e 3e20 7374 616e 666f        >>> stanfo
+00007410: 7264 203d 2072 7462 2e6d 6f64 656c 732e  rd = rtb.models.
+00007420: 4448 2e53 7461 6e66 6f72 6428 290a 2020  DH.Stanford().  
+00007430: 2020 2020 2020 3e3e 3e20 7374 616e 666f        >>> stanfo
+00007440: 7264 2e72 6576 6f6c 7574 656a 6f69 6e74  rd.revolutejoint
+00007450: 7328 290a 0a20 2020 2020 2020 204e 6f74  s()..        Not
+00007460: 6573 0a20 2020 2020 2020 202d 2d2d 2d2d  es.        -----
+00007470: 0a20 2020 2020 2020 2046 6978 6564 206a  .        Fixed j
+00007480: 6f69 6e74 732c 2074 6861 7420 6d61 696e  oints, that main
+00007490: 7461 696e 2061 2063 6f6e 7374 616e 7420  tain a constant 
+000074a0: 6c69 6e6b 2072 656c 6174 6976 6520 706f  link relative po
+000074b0: 7365 2c0a 2020 2020 2020 2020 6172 6520  se,.        are 
+000074c0: 6e6f 7420 696e 636c 7564 6564 2e0a 0a20  not included... 
+000074d0: 2020 2020 2020 2053 6565 2041 6c73 6f0a         See Also.
+000074e0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000074f0: 0a20 2020 2020 2020 203a 6675 6e63 3a60  .        :func:`
+00007500: 4c69 6e6b 2e69 7372 6576 6f6c 7574 6560  Link.isrevolute`
+00007510: 0a20 2020 2020 2020 203a 6675 6e63 3a60  .        :func:`
+00007520: 7072 6973 6d61 7469 636a 6f69 6e74 7360  prismaticjoints`
+00007530: 0a0a 2020 2020 2020 2020 2222 220a 0a20  ..        """.. 
+00007540: 2020 2020 2020 2072 6574 7572 6e20 5b6c         return [l
+00007550: 696e 6b2e 6973 7265 766f 6c75 7465 2066  ink.isrevolute f
+00007560: 6f72 206c 696e 6b20 696e 2073 656c 662e  or link in self.
+00007570: 6c69 6e6b 7320 6966 206c 696e 6b2e 6973  links if link.is
+00007580: 6a6f 696e 745d 0a0a 2020 2020 4070 726f  joint]..    @pro
+00007590: 7065 7274 790a 2020 2020 6465 6620 636f  perty.    def co
+000075a0: 6e74 726f 6c5f 6d6f 6465 2873 656c 6629  ntrol_mode(self)
+000075b0: 202d 3e20 7374 723a 0a20 2020 2020 2020   -> str:.       
+000075c0: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+000075d0: 2f73 6574 2072 6f62 6f74 2063 6f6e 7472  /set robot contr
+000075e0: 6f6c 206d 6f64 650a 0a20 2020 2020 2020  ol mode..       
+000075f0: 202d 2060 6072 6f62 6f74 2e63 6f6e 7472   - ``robot.contr
+00007600: 6f6c 5f74 7970 6560 6020 6973 2074 6865  ol_type`` is the
+00007610: 2072 6f62 6f74 2063 6f6e 7472 6f6c 206d   robot control m
+00007620: 6f64 650a 2020 2020 2020 2020 2d20 6060  ode.        - ``
+00007630: 726f 626f 742e 636f 6e74 726f 6c5f 7479  robot.control_ty
+00007640: 7065 203d 202e 2e2e 6060 2063 6865 636b  pe = ...`` check
+00007650: 7320 616e 6420 7365 7473 2074 6865 2072  s and sets the r
+00007660: 6f62 6f74 2063 6f6e 7472 6f6c 206d 6f64  obot control mod
+00007670: 650a 0a20 2020 2020 2020 2050 6172 616d  e..        Param
+00007680: 6574 6572 730a 2020 2020 2020 2020 2d2d  eters.        --
+00007690: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+000076a0: 2063 6f6e 7472 6f6c 5f6d 6f64 650a 2020   control_mode.  
+000076b0: 2020 2020 2020 2020 2020 7468 6520 6e65            the ne
+000076c0: 7720 726f 626f 7420 636f 6e74 726f 6c20  w robot control 
+000076d0: 6d6f 6465 0a0a 2020 2020 2020 2020 5265  mode..        Re
+000076e0: 7475 726e 730a 2020 2020 2020 2020 2d2d  turns.        --
+000076f0: 2d2d 2d2d 2d0a 2020 2020 2020 2020 636f  -----.        co
+00007700: 6e74 726f 6c5f 6d6f 6465 0a20 2020 2020  ntrol_mode.     
+00007710: 2020 2020 2020 2074 6865 2063 7572 7265         the curre
+00007720: 6e74 2072 6f62 6f74 2063 6f6e 7472 6f6c  nt robot control
+00007730: 206d 6f64 650a 0a20 2020 2020 2020 2022   mode..        "
+00007740: 2222 0a0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00007750: 726e 2073 656c 662e 5f63 6f6e 7472 6f6c  rn self._control
+00007760: 5f6d 6f64 650a 0a20 2020 2040 636f 6e74  _mode..    @cont
+00007770: 726f 6c5f 6d6f 6465 2e73 6574 7465 720a  rol_mode.setter.
+00007780: 2020 2020 6465 6620 636f 6e74 726f 6c5f      def control_
+00007790: 6d6f 6465 2873 656c 662c 2063 6e3a 2073  mode(self, cn: s
+000077a0: 7472 293a 0a20 2020 2020 2020 2069 6620  tr):.        if 
+000077b0: 636e 203d 3d20 2270 2220 6f72 2063 6e20  cn == "p" or cn 
+000077c0: 3d3d 2022 7622 206f 7220 636e 203d 3d20  == "v" or cn == 
+000077d0: 2261 223a 0a20 2020 2020 2020 2020 2020  "a":.           
+000077e0: 2073 656c 662e 5f63 6f6e 7472 6f6c 5f6d   self._control_m
+000077f0: 6f64 6520 3d20 636e 0a20 2020 2020 2020  ode = cn.       
+00007800: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00007810: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+00007820: 726f 7228 2243 6f6e 7472 6f6c 2074 7970  ror("Control typ
+00007830: 6520 6d75 7374 2062 6520 6f6e 6520 6f66  e must be one of
+00007840: 2027 7027 2c20 2776 272c 206f 7220 2761   'p', 'v', or 'a
+00007850: 2722 290a 0a20 2020 2023 202d 2d2d 2d2d  '")..    # -----
+00007860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000078a0: 2023 0a0a 2020 2020 4070 726f 7065 7274   #..    @propert
+000078b0: 790a 2020 2020 6465 6620 7572 6466 5f73  y.    def urdf_s
+000078c0: 7472 696e 6728 7365 6c66 2920 2d3e 2073  tring(self) -> s
+000078d0: 7472 3a0a 2020 2020 2020 2020 7265 7475  tr:.        retu
+000078e0: 726e 2073 656c 662e 5f75 7264 665f 7374  rn self._urdf_st
+000078f0: 7269 6e67 0a0a 2020 2020 4070 726f 7065  ring..    @prope
+00007900: 7274 790a 2020 2020 6465 6620 7572 6466  rty.    def urdf
+00007910: 5f66 696c 6570 6174 6828 7365 6c66 2920  _filepath(self) 
+00007920: 2d3e 2073 7472 3a0a 2020 2020 2020 2020  -> str:.        
+00007930: 7265 7475 726e 2073 656c 662e 5f75 7264  return self._urd
+00007940: 665f 6669 6c65 7061 7468 0a0a 2020 2020  f_filepath..    
+00007950: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00007960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007990: 2d2d 2d2d 2d2d 2d20 230a 0a20 2020 2040  ------- #..    @
+000079a0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+000079b0: 2074 6f6f 6c28 7365 6c66 2920 2d3e 2053   tool(self) -> S
+000079c0: 4533 3a0a 2020 2020 2020 2020 2222 220a  E3:.        """.
+000079d0: 2020 2020 2020 2020 4765 742f 7365 7420          Get/set 
+000079e0: 726f 626f 7420 746f 6f6c 2074 7261 6e73  robot tool trans
+000079f0: 666f 726d 0a0a 2020 2020 2020 2020 2d20  form..        - 
+00007a00: 6060 726f 626f 742e 746f 6f6c 6060 2069  ``robot.tool`` i
+00007a10: 7320 7468 6520 726f 626f 7420 746f 6f6c  s the robot tool
+00007a20: 2074 7261 6e73 666f 726d 2061 7320 616e   transform as an
+00007a30: 2053 4533 206f 626a 6563 740a 2020 2020   SE3 object.    
+00007a40: 2020 2020 2d20 6060 726f 626f 742e 5f74      - ``robot._t
+00007a50: 6f6f 6c60 6020 6973 2074 6865 2072 6f62  ool`` is the rob
+00007a60: 6f74 2074 6f6f 6c20 7472 616e 7366 6f72  ot tool transfor
+00007a70: 6d20 6173 2061 206e 756d 7079 2061 7272  m as a numpy arr
+00007a80: 6179 0a20 2020 2020 2020 202d 2060 6072  ay.        - ``r
+00007a90: 6f62 6f74 2e74 6f6f 6c20 3d20 2e2e 2e60  obot.tool = ...`
+00007aa0: 6020 6368 6563 6b73 2061 6e64 2073 6574  ` checks and set
+00007ab0: 7320 7468 6520 726f 626f 7420 746f 6f6c  s the robot tool
+00007ac0: 2074 7261 6e73 666f 726d 0a0a 2020 2020   transform..    
+00007ad0: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
+00007ae0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00007af0: 2d0a 2020 2020 2020 2020 746f 6f6c 0a20  -.        tool. 
+00007b00: 2020 2020 2020 2020 2020 2074 6865 206e             the n
+00007b10: 6577 2072 6f62 6f74 2074 6f6f 6c20 7472  ew robot tool tr
+00007b20: 616e 7366 6f72 6d20 2861 7320 616e 2053  ansform (as an S
+00007b30: 4528 3329 290a 0a20 2020 2020 2020 2052  E(3))..        R
+00007b40: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+00007b50: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2074  ------.        t
+00007b60: 6f6f 6c0a 2020 2020 2020 2020 2020 2020  ool.            
+00007b70: 726f 626f 7420 746f 6f6c 2074 7261 6e73  robot tool trans
+00007b80: 666f 726d 0a0a 0a0a 2020 2020 2020 2020  form....        
+00007b90: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00007ba0: 726e 2053 4533 2873 656c 662e 5f74 6f6f  rn SE3(self._too
+00007bb0: 6c2c 2063 6865 636b 3d46 616c 7365 290a  l, check=False).
+00007bc0: 0a20 2020 2040 746f 6f6c 2e73 6574 7465  .    @tool.sette
+00007bd0: 720a 2020 2020 6465 6620 746f 6f6c 2873  r.    def tool(s
+00007be0: 656c 662c 2054 3a20 556e 696f 6e5b 5345  elf, T: Union[SE
+00007bf0: 332c 204e 4441 7272 6179 5d29 3a0a 2020  3, NDArray]):.  
+00007c00: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00007c10: 6e63 6528 542c 2053 4533 293a 0a20 2020  nce(T, SE3):.   
+00007c20: 2020 2020 2020 2020 2073 656c 662e 5f74           self._t
+00007c30: 6f6f 6c20 3d20 542e 410a 2020 2020 2020  ool = T.A.      
+00007c40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00007c50: 2020 2020 7365 6c66 2e5f 746f 6f6c 203d      self._tool =
+00007c60: 2054 0a0a 2020 2020 4070 726f 7065 7274   T..    @propert
+00007c70: 790a 2020 2020 6465 6620 6261 7365 2873  y.    def base(s
+00007c80: 656c 6629 202d 3e20 5345 333a 0a20 2020  elf) -> SE3:.   
+00007c90: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00007ca0: 2047 6574 2f73 6574 2072 6f62 6f74 2062   Get/set robot b
+00007cb0: 6173 6520 7472 616e 7366 6f72 6d0a 0a20  ase transform.. 
+00007cc0: 2020 2020 2020 202d 2060 6072 6f62 6f74         - ``robot
+00007cd0: 2e62 6173 6560 6020 6973 2074 6865 2072  .base`` is the r
+00007ce0: 6f62 6f74 2062 6173 6520 7472 616e 7366  obot base transf
+00007cf0: 6f72 6d0a 2020 2020 2020 2020 2d20 6060  orm.        - ``
+00007d00: 726f 626f 742e 6261 7365 203d 202e 2e2e  robot.base = ...
+00007d10: 6060 2063 6865 636b 7320 616e 6420 7365  `` checks and se
+00007d20: 7473 2074 6865 2072 6f62 6f74 2062 6173  ts the robot bas
+00007d30: 6520 7472 616e 7366 6f72 6d0a 0a20 2020  e transform..   
+00007d40: 2020 2020 2050 6172 616d 6574 6572 730a       Parameters.
+00007d50: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00007d60: 2d2d 0a20 2020 2020 2020 2062 6173 650a  --.        base.
+00007d70: 2020 2020 2020 2020 2020 2020 7468 6520              the 
+00007d80: 6e65 7720 726f 626f 7420 6261 7365 2074  new robot base t
+00007d90: 7261 6e73 666f 726d 0a0a 2020 2020 2020  ransform..      
+00007da0: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
+00007db0: 2020 2d2d 2d2d 2d2d 2d0a 2020 2020 2020    -------.      
+00007dc0: 2020 6261 7365 0a20 2020 2020 2020 2020    base.         
+00007dd0: 2020 2074 6865 2063 7572 7265 6e74 2072     the current r
+00007de0: 6f62 6f74 2062 6173 6520 7472 616e 7366  obot base transf
+00007df0: 6f72 6d0a 0a20 2020 2020 2020 2022 2222  orm..        """
+00007e00: 0a0a 2020 2020 2020 2020 2320 7265 7475  ..        # retu
+00007e10: 726e 2061 2063 6f70 792c 206f 7468 6572  rn a copy, other
+00007e20: 7769 7365 2073 6f6d 6562 6f64 7920 7769  wise somebody wi
+00007e30: 7468 0a20 2020 2020 2020 2023 2072 6566  th.        # ref
+00007e40: 6572 656e 6365 2074 6f20 7468 6520 6261  erence to the ba
+00007e50: 7365 2063 616e 2063 6861 6e67 6520 6974  se can change it
+00007e60: 0a0a 2020 2020 2020 2020 2320 5468 6973  ..        # This
+00007e70: 206e 6f77 2072 6574 7572 6e73 2074 6865   now returns the
+00007e80: 2053 6365 6e65 204e 6f64 6520 7472 616e   Scene Node tran
+00007e90: 7366 6f72 6d0a 2020 2020 2020 2020 2320  sform.        # 
+00007ea0: 7365 6c66 2e5f 5420 6973 2061 2063 6f70  self._T is a cop
+00007eb0: 7920 6f66 2053 6365 6e65 4e6f 6465 2e5f  y of SceneNode._
+00007ec0: 5f54 0a20 2020 2020 2020 2072 6574 7572  _T.        retur
+00007ed0: 6e20 5345 3328 7365 6c66 2e5f 542c 2063  n SE3(self._T, c
+00007ee0: 6865 636b 3d46 616c 7365 290a 0a20 2020  heck=False)..   
+00007ef0: 2040 6261 7365 2e73 6574 7465 720a 2020   @base.setter.  
+00007f00: 2020 6465 6620 6261 7365 2873 656c 662c    def base(self,
+00007f10: 2054 3a20 556e 696f 6e5b 4e44 4172 7261   T: Union[NDArra
+00007f20: 792c 2053 4533 5d29 3a0a 2020 2020 2020  y, SE3]):.      
+00007f30: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00007f40: 7365 6c66 2c20 7274 622e 526f 626f 7429  self, rtb.Robot)
+00007f50: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00007f60: 416c 6c20 3344 2072 6f62 6f74 730a 2020  All 3D robots.  
+00007f70: 2020 2020 2020 2020 2020 2320 5365 7420            # Set 
+00007f80: 7468 6520 5363 656e 654e 6f64 6520 540a  the SceneNode T.
+00007f90: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00007fa0: 7369 6e73 7461 6e63 6528 542c 2053 4533  sinstance(T, SE3
+00007fb0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00007fc0: 2020 2073 656c 662e 5f54 203d 2054 2e41     self._T = T.A
+00007fd0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00007fe0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00007ff0: 2020 2073 656c 662e 5f54 203d 2054 0a0a     self._T = T..
+00008000: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00008010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a 0a20  ----------- #.. 
+00008050: 2020 2040 6c72 755f 6361 6368 6528 6d61     @lru_cache(ma
+00008060: 7873 697a 653d 3332 290a 2020 2020 6465  xsize=32).    de
+00008070: 6620 6765 745f 7061 7468 280a 2020 2020  f get_path(.    
+00008080: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00008090: 2020 656e 643a 2055 6e69 6f6e 5b47 7269    end: Union[Gri
+000080a0: 7070 6572 2c20 4c69 6e6b 5479 7065 2c20  pper, LinkType, 
+000080b0: 7374 722c 204e 6f6e 655d 203d 204e 6f6e  str, None] = Non
+000080c0: 652c 0a20 2020 2020 2020 2073 7461 7274  e,.        start
+000080d0: 3a20 556e 696f 6e5b 4772 6970 7065 722c  : Union[Gripper,
+000080e0: 204c 696e 6b54 7970 652c 2073 7472 2c20   LinkType, str, 
+000080f0: 4e6f 6e65 5d20 3d20 4e6f 6e65 2c0a 2020  None] = None,.  
+00008100: 2020 2920 2d3e 2054 7570 6c65 5b4c 6973    ) -> Tuple[Lis
+00008110: 745b 4c69 6e6b 5479 7065 5d2c 2069 6e74  t[LinkType], int
+00008120: 2c20 5345 335d 3a0a 2020 2020 2020 2020  , SE3]:.        
+00008130: 2222 220a 2020 2020 2020 2020 4669 6e64  """.        Find
+00008140: 2061 2070 6174 6820 6672 6f6d 2073 7461   a path from sta
+00008150: 7274 2074 6f20 656e 640a 0a20 2020 2020  rt to end..     
+00008160: 2020 2050 6172 616d 6574 6572 730a 2020     Parameters.  
+00008170: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
+00008180: 0a20 2020 2020 2020 2065 6e64 0a20 2020  .        end.   
+00008190: 2020 2020 2020 2020 2065 6e64 2d65 6666           end-eff
+000081a0: 6563 746f 7220 6f72 2067 7269 7070 6572  ector or gripper
+000081b0: 2074 6f20 636f 6d70 7574 6520 666f 7277   to compute forw
+000081c0: 6172 6420 6b69 6e65 6d61 7469 6373 2074  ard kinematics t
+000081d0: 6f0a 2020 2020 2020 2020 7374 6172 740a  o.        start.
+000081e0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+000081f0: 206f 7220 7265 6665 7265 6e63 6520 746f   or reference to
+00008200: 2061 2062 6173 6520 6c69 6e6b 2c20 6465   a base link, de
+00008210: 6661 756c 7473 2074 6f20 4e6f 6e65 0a0a  faults to None..
+00008220: 2020 2020 2020 2020 5261 6973 6573 0a20          Raises. 
+00008230: 2020 2020 2020 202d 2d2d 2d2d 2d0a 2020         ------.  
+00008240: 2020 2020 2020 5661 6c75 6545 7272 6f72        ValueError
+00008250: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+00008260: 6b20 6e6f 7420 6b6e 6f77 6e20 6f72 2061  k not known or a
+00008270: 6d62 6967 756f 7573 0a0a 2020 2020 2020  mbiguous..      
+00008280: 2020 5265 7475 726e 730a 2020 2020 2020    Returns.      
+00008290: 2020 2d2d 2d2d 2d2d 2d0a 2020 2020 2020    -------.      
+000082a0: 2020 7061 7468 0a20 2020 2020 2020 2020    path.         
+000082b0: 2020 2074 6865 2070 6174 6820 6672 6f6d     the path from
+000082c0: 2073 7461 7274 2074 6f20 656e 640a 2020   start to end.  
+000082d0: 2020 2020 2020 6e0a 2020 2020 2020 2020        n.        
+000082e0: 2020 2020 7468 6520 6e75 6d62 6572 206f      the number o
+000082f0: 6620 6a6f 696e 7473 2069 6e20 7468 6520  f joints in the 
+00008300: 7061 7468 0a20 2020 2020 2020 2054 0a20  path.        T. 
+00008310: 2020 2020 2020 2020 2020 2074 6865 2074             the t
+00008320: 6f6f 6c20 7472 616e 7366 6f72 6d20 7072  ool transform pr
+00008330: 6573 656e 7420 6166 7465 7220 656e 640a  esent after end.
+00008340: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00008350: 2020 2020 2020 6465 6620 7365 6172 6368        def search
+00008360: 280a 2020 2020 2020 2020 2020 2020 7374  (.            st
+00008370: 6172 742c 0a20 2020 2020 2020 2020 2020  art,.           
+00008380: 2065 6e64 2c0a 2020 2020 2020 2020 2020   end,.          
+00008390: 2020 6578 706c 6f72 6564 3a20 5365 745b    explored: Set[
+000083a0: 556e 696f 6e5b 4c69 6e6b 5479 7065 2c20  Union[LinkType, 
+000083b0: 4c69 6e6b 5d5d 2c0a 2020 2020 2020 2020  Link]],.        
+000083c0: 2020 2020 7061 7468 3a20 4c69 7374 5b55      path: List[U
+000083d0: 6e69 6f6e 5b4c 696e 6b54 7970 652c 204c  nion[LinkType, L
+000083e0: 696e 6b5d 5d2c 0a20 2020 2020 2020 2029  ink]],.        )
+000083f0: 202d 3e20 556e 696f 6e5b 4c69 7374 5b55   -> Union[List[U
+00008400: 6e69 6f6e 5b4c 696e 6b54 7970 652c 204c  nion[LinkType, L
+00008410: 696e 6b5d 5d2c 204e 6f6e 655d 3a0a 2020  ink]], None]:.  
+00008420: 2020 2020 2020 2020 2020 6c69 6e6b 203d            link =
+00008430: 2073 656c 662e 5f67 6574 6c69 6e6b 2873   self._getlink(s
+00008440: 7461 7274 2c20 7365 6c66 2e62 6173 655f  tart, self.base_
+00008450: 6c69 6e6b 290a 2020 2020 2020 2020 2020  link).          
+00008460: 2020 656e 6420 3d20 7365 6c66 2e5f 6765    end = self._ge
+00008470: 746c 696e 6b28 656e 642c 2073 656c 662e  tlink(end, self.
+00008480: 6565 5f6c 696e 6b73 5b30 5d29 0a0a 2020  ee_links[0])..  
+00008490: 2020 2020 2020 2020 2020 746f 706c 6576            toplev
+000084a0: 656c 203d 206c 656e 2870 6174 6829 203d  el = len(path) =
+000084b0: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
+000084c0: 6578 706c 6f72 6564 2e61 6464 286c 696e  explored.add(lin
+000084d0: 6b29 0a0a 2020 2020 2020 2020 2020 2020  k)..            
+000084e0: 6966 206c 696e 6b20 3d3d 2065 6e64 3a0a  if link == end:.
+000084f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008500: 7265 7475 726e 2070 6174 680a 0a20 2020  return path..   
+00008510: 2020 2020 2020 2020 2023 2075 6e6c 696b           # unlik
+00008520: 6520 7265 6775 6c61 7220 4446 532c 2074  e regular DFS, t
+00008530: 6865 206e 6569 6768 626f 7572 7320 6f66  he neighbours of
+00008540: 2074 6865 206e 6f64 6520 6172 6520 6974   the node are it
+00008550: 7320 6368 696c 6472 656e 0a20 2020 2020  s children.     
+00008560: 2020 2020 2020 2023 2061 6e64 2069 7473         # and its
+00008570: 2070 6172 656e 742e 0a0a 2020 2020 2020   parent...      
+00008580: 2020 2020 2020 2320 7669 7369 7420 6368        # visit ch
+00008590: 696c 6420 6e6f 6465 7320 6265 6c6f 7720  ild nodes below 
+000085a0: 7374 6172 740a 2020 2020 2020 2020 2020  start.          
+000085b0: 2020 6966 2074 6f70 6c65 7665 6c3a 0a20    if toplevel:. 
+000085c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000085d0: 6174 6820 3d20 5b6c 696e 6b5d 0a0a 2020  ath = [link]..  
+000085e0: 2020 2020 2020 2020 2020 6966 206c 696e            if lin
+000085f0: 6b2e 6368 696c 6472 656e 2069 7320 6e6f  k.children is no
+00008600: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00008610: 2020 2020 2020 2020 666f 7220 6368 696c          for chil
+00008620: 6420 696e 206c 696e 6b2e 6368 696c 6472  d in link.childr
+00008630: 656e 3a0a 2020 2020 2020 2020 2020 2020  en:.            
+00008640: 2020 2020 2020 2020 6966 2063 6869 6c64          if child
+00008650: 206e 6f74 2069 6e20 6578 706c 6f72 6564   not in explored
+00008660: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00008670: 2020 2020 2020 2020 2020 7061 7468 2e61            path.a
+00008680: 7070 656e 6428 6368 696c 6429 0a20 2020  ppend(child).   
+00008690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000086a0: 2020 2020 2070 203d 2073 6561 7263 6828       p = search(
+000086b0: 6368 696c 642c 2065 6e64 2c20 6578 706c  child, end, expl
+000086c0: 6f72 6564 2c20 7061 7468 290a 2020 2020  ored, path).    
+000086d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000086e0: 2020 2020 6966 2070 2069 7320 6e6f 7420      if p is not 
+000086f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00008700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008710: 2020 7265 7475 726e 2070 0a0a 2020 2020    return p..    
+00008720: 2020 2020 2020 2020 2320 5765 2064 6964          # We did
+00008730: 6e27 7420 6669 6e64 2074 6865 206e 6f64  n't find the nod
+00008740: 6520 6265 6c6f 772c 206b 6565 7020 676f  e below, keep go
+00008750: 696e 6720 7570 2061 206c 6576 656c 2c20  ing up a level, 
+00008760: 616e 6420 7265 6375 7273 696e 670a 2020  and recursing.  
+00008770: 2020 2020 2020 2020 2020 2320 646f 776e            # down
+00008780: 2061 6761 696e 0a20 2020 2020 2020 2020   again.         
+00008790: 2020 2069 6620 746f 706c 6576 656c 3a0a     if toplevel:.
+000087a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087b0: 7061 7468 203d 205b 5d0a 0a20 2020 2020  path = []..     
+000087c0: 2020 2020 2020 2069 6620 6c69 6e6b 2e70         if link.p
+000087d0: 6172 656e 7420 6973 206e 6f74 204e 6f6e  arent is not Non
+000087e0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000087f0: 2020 2070 6172 656e 7420 3d20 6c69 6e6b     parent = link
+00008800: 2e70 6172 656e 7420 2023 2067 6f20 7570  .parent  # go up
+00008810: 206f 6e65 206c 6576 656c 2074 6f77 6172   one level towar
+00008820: 6420 7468 6520 726f 6f74 0a20 2020 2020  d the root.     
+00008830: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
+00008840: 7265 6e74 206e 6f74 2069 6e20 6578 706c  rent not in expl
+00008850: 6f72 6564 3a0a 2020 2020 2020 2020 2020  ored:.          
+00008860: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00008870: 2870 6174 6829 203d 3d20 303a 0a20 2020  (path) == 0:.   
+00008880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008890: 2020 2020 2070 203d 2073 6561 7263 6828       p = search(
+000088a0: 7061 7265 6e74 2c20 656e 642c 2065 7870  parent, end, exp
+000088b0: 6c6f 7265 642c 205b 6c69 6e6b 5d29 0a20  lored, [link]). 
+000088c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000088e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088f0: 2070 6174 682e 6170 7065 6e64 286c 696e   path.append(lin
+00008900: 6b29 0a20 2020 2020 2020 2020 2020 2020  k).             
+00008910: 2020 2020 2020 2020 2020 2070 203d 2073             p = s
+00008920: 6561 7263 6828 7061 7265 6e74 2c20 656e  earch(parent, en
+00008930: 642c 2065 7870 6c6f 7265 642c 2070 6174  d, explored, pat
+00008940: 6829 0a0a 2020 2020 2020 2020 2020 2020  h)..            
+00008950: 2020 2020 2020 2020 6966 2070 2069 7320          if p is 
+00008960: 6e6f 7420 4e6f 6e65 2061 6e64 206c 656e  not None and len
+00008970: 2870 2920 3e20 303a 0a20 2020 2020 2020  (p) > 0:.       
+00008980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008990: 2072 6574 7572 6e20 700a 0a20 2020 2020   return p..     
+000089a0: 2020 2065 6e64 2c20 7374 6172 742c 2074     end, start, t
+000089b0: 6f6f 6c20 3d20 7365 6c66 2e5f 6765 745f  ool = self._get_
+000089c0: 6c69 6d69 745f 6c69 6e6b 7328 656e 643d  limit_links(end=
+000089d0: 656e 642c 2073 7461 7274 3d73 7461 7274  end, start=start
+000089e0: 290a 0a20 2020 2020 2020 2070 6174 6820  )..        path 
+000089f0: 3d20 7365 6172 6368 2873 7461 7274 2c20  = search(start, 
+00008a00: 656e 642c 2073 6574 2829 2c20 5b5d 290a  end, set(), []).
+00008a10: 0a20 2020 2020 2020 2069 6620 7061 7468  .        if path
+00008a20: 2069 7320 4e6f 6e65 206f 7220 6c65 6e28   is None or len(
+00008a30: 7061 7468 2920 3d3d 2030 3a0a 2020 2020  path) == 0:.    
+00008a40: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00008a50: 6c75 6545 7272 6f72 2822 4e6f 2070 6174  lueError("No pat
+00008a60: 6820 666f 756e 6422 2920 2023 2070 7261  h found")  # pra
+00008a70: 676d 6120 6e6f 636f 7665 720a 2020 2020  gma nocover.    
+00008a80: 2020 2020 656c 6966 2070 6174 685b 2d31      elif path[-1
+00008a90: 5d20 213d 2065 6e64 3a0a 2020 2020 2020  ] != end:.      
+00008aa0: 2020 2020 2020 7061 7468 2e61 7070 656e        path.appen
+00008ab0: 6428 656e 6429 0a0a 2020 2020 2020 2020  d(end)..        
+00008ac0: 6966 2074 6f6f 6c20 6973 204e 6f6e 653a  if tool is None:
+00008ad0: 0a20 2020 2020 2020 2020 2020 2074 6f6f  .            too
+00008ae0: 6c20 3d20 5345 3328 290a 0a20 2020 2020  l = SE3()..     
+00008af0: 2020 2072 6574 7572 6e20 7061 7468 2c20     return path, 
+00008b00: 6c65 6e28 7061 7468 292c 2074 6f6f 6c20  len(path), tool 
+00008b10: 2023 2074 7970 653a 2069 676e 6f72 650a   # type: ignore.
+00008b20: 0a20 2020 2040 6c72 755f 6361 6368 6528  .    @lru_cache(
+00008b30: 6d61 7873 697a 653d 3332 290a 2020 2020  maxsize=32).    
+00008b40: 6465 6620 5f67 6574 6c69 6e6b 280a 2020  def _getlink(.  
+00008b50: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00008b60: 2020 2020 6c69 6e6b 3a20 556e 696f 6e5b      link: Union[
+00008b70: 4c69 6e6b 5479 7065 2c20 4772 6970 7065  LinkType, Grippe
+00008b80: 722c 2073 7472 2c20 4e6f 6e65 5d2c 0a20  r, str, None],. 
+00008b90: 2020 2020 2020 2064 6566 6175 6c74 3a20         default: 
+00008ba0: 556e 696f 6e5b 4c69 6e6b 5479 7065 2c20  Union[LinkType, 
+00008bb0: 4772 6970 7065 722c 2073 7472 2c20 4e6f  Gripper, str, No
+00008bc0: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
+00008bd0: 2920 2d3e 2055 6e69 6f6e 5b4c 696e 6b54  ) -> Union[LinkT
+00008be0: 7970 652c 204c 696e 6b5d 3a0a 2020 2020  ype, Link]:.    
+00008bf0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00008c00: 5661 6c69 6461 7465 2072 6566 6572 656e  Validate referen
+00008c10: 6365 2074 6f20 4c69 6e6b 0a0a 2020 2020  ce to Link..    
+00008c20: 2020 2020 6060 726f 626f 742e 5f67 6574      ``robot._get
+00008c30: 6c69 6e6b 286c 696e 6b29 6060 2069 7320  link(link)`` is 
+00008c40: 6120 7661 6c69 6461 7465 6420 7265 6665  a validated refe
+00008c50: 7265 6e63 6520 746f 2061 204c 696e 6b20  rence to a Link 
+00008c60: 7769 7468 696e 0a20 2020 2020 2020 2074  within.        t
+00008c70: 6865 2045 526f 626f 7420 6060 726f 626f  he ERobot ``robo
+00008c80: 7460 602e 2020 4966 2060 606c 696e 6b60  t``.  If ``link`
+00008c90: 6020 6973 3a0a 0a20 2020 2020 2020 202d  ` is:..        -
+00008ca0: 2020 616e 2060 604c 696e 6b60 6020 7265    an ``Link`` re
+00008cb0: 6665 7265 6e63 6520 6974 2069 7320 7661  ference it is va
+00008cc0: 6c69 6461 7465 6420 6173 2062 656c 6f6e  lidated as belon
+00008cd0: 6769 6e67 2074 6f0a 2020 2020 2020 2020  ging to.        
+00008ce0: 2020 6060 726f 626f 7460 602e 0a20 2020    ``robot``..   
+00008cf0: 2020 2020 202d 2061 2073 7472 696e 672c       - a string,
+00008d00: 2074 6865 6e20 6974 206c 6f6f 6b65 6420   then it looked 
+00008d10: 7570 2069 6e20 7468 6520 726f 626f 7427  up in the robot'
+00008d20: 7320 6c69 6e6b 206e 616d 6520 6469 6374  s link name dict
+00008d30: 696f 6e61 7279 2c20 616e 640a 2020 2020  ionary, and.    
+00008d40: 2020 2020 2020 6120 4c69 6e6b 2072 6566        a Link ref
+00008d50: 6572 656e 6365 2072 6574 7572 6e65 642e  erence returned.
+00008d60: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00008d70: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
+00008d80: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00008d90: 6c69 6e6b 0a20 2020 2020 2020 2020 2020  link.           
+00008da0: 206c 696e 6b0a 0a20 2020 2020 2020 2052   link..        R
+00008db0: 6169 7365 730a 2020 2020 2020 2020 2d2d  aises.        --
+00008dc0: 2d2d 2d2d 0a20 2020 2020 2020 2056 616c  ----.        Val
+00008dd0: 7565 4572 726f 720a 2020 2020 2020 2020  ueError.        
+00008de0: 2020 2020 6c69 6e6b 2064 6f65 7320 6e6f      link does no
+00008df0: 7420 6265 6c6f 6e67 2074 6f20 7468 6973  t belong to this
+00008e00: 2045 526f 626f 740a 2020 2020 2020 2020   ERobot.        
+00008e10: 5479 7065 4572 726f 720a 2020 2020 2020  TypeError.      
+00008e20: 2020 2020 2020 6261 6420 6172 6775 6d65        bad argume
+00008e30: 6e74 0a0a 2020 2020 2020 2020 5265 7475  nt..        Retu
+00008e40: 726e 730a 2020 2020 2020 2020 2d2d 2d2d  rns.        ----
+00008e50: 2d2d 2d0a 2020 2020 2020 2020 6c69 6e6b  ---.        link
+00008e60: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+00008e70: 6b20 7265 6665 7265 6e63 650a 0a20 2020  k reference..   
+00008e80: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+00008e90: 2020 6966 206c 696e 6b20 6973 204e 6f6e    if link is Non
+00008ea0: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
+00008eb0: 696e 6b20 3d20 6465 6661 756c 740a 0a20  ink = default.. 
+00008ec0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00008ed0: 616e 6365 286c 696e 6b2c 2073 7472 293a  ance(link, str):
+00008ee0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00008ef0: 6c69 6e6b 2069 6e20 7365 6c66 2e6c 696e  link in self.lin
+00008f00: 6b5f 6469 6374 3a0a 2020 2020 2020 2020  k_dict:.        
+00008f10: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00008f20: 656c 662e 6c69 6e6b 5f64 6963 745b 6c69  elf.link_dict[li
+00008f30: 6e6b 5d0a 0a20 2020 2020 2020 2020 2020  nk]..           
+00008f40: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+00008f50: 7228 6622 6e6f 206c 696e 6b20 6e61 6d65  r(f"no link name
+00008f60: 6420 7b6c 696e 6b7d 2229 0a0a 2020 2020  d {link}")..    
+00008f70: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00008f80: 6e63 6528 6c69 6e6b 2c20 4261 7365 4c69  nce(link, BaseLi
+00008f90: 6e6b 293a 0a20 2020 2020 2020 2020 2020  nk):.           
+00008fa0: 2069 6620 6c69 6e6b 2069 6e20 7365 6c66   if link in self
+00008fb0: 2e6c 696e 6b73 3a0a 2020 2020 2020 2020  .links:.        
+00008fc0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
+00008fd0: 696e 6b0a 2020 2020 2020 2020 2020 2020  ink.            
+00008fe0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00008ff0: 2020 2020 2020 666f 7220 6772 6970 7065        for grippe
+00009000: 7220 696e 2073 656c 662e 6772 6970 7065  r in self.grippe
+00009010: 7273 3a0a 2020 2020 2020 2020 2020 2020  rs:.            
+00009020: 2020 2020 2020 2020 6966 206c 696e 6b20          if link 
+00009030: 696e 2067 7269 7070 6572 2e6c 696e 6b73  in gripper.links
+00009040: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009050: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00009060: 206c 696e 6b0a 0a20 2020 2020 2020 2020   link..         
+00009070: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00009080: 7565 4572 726f 7228 226c 696e 6b20 6e6f  ueError("link no
+00009090: 7420 696e 2072 6f62 6f74 206c 696e 6b73  t in robot links
+000090a0: 2229 0a20 2020 2020 2020 2065 6c69 6620  ").        elif 
+000090b0: 6973 696e 7374 616e 6365 286c 696e 6b2c  isinstance(link,
+000090c0: 2047 7269 7070 6572 293a 0a20 2020 2020   Gripper):.     
+000090d0: 2020 2020 2020 2066 6f72 2067 7269 7070         for gripp
+000090e0: 6572 2069 6e20 7365 6c66 2e67 7269 7070  er in self.gripp
+000090f0: 6572 733a 0a20 2020 2020 2020 2020 2020  ers:.           
+00009100: 2020 2020 2069 6620 6c69 6e6b 2069 7320       if link is 
+00009110: 6772 6970 7065 723a 0a20 2020 2020 2020  gripper:.       
+00009120: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00009130: 7572 6e20 6772 6970 7065 722e 6c69 6e6b  urn gripper.link
+00009140: 735b 305d 0a0a 2020 2020 2020 2020 2020  s[0]..          
+00009150: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00009160: 6f72 2822 4772 6970 7065 7220 6e6f 7420  or("Gripper not 
+00009170: 696e 2072 6f62 6f74 2229 0a20 2020 2020  in robot").     
+00009180: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00009190: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+000091a0: 7272 6f72 2822 756e 6b6e 6f77 6e20 6172  rror("unknown ar
+000091b0: 6775 6d65 6e74 2229 0a0a 2020 2020 6465  gument")..    de
+000091c0: 6620 5f66 696e 645f 6574 7328 7365 6c66  f _find_ets(self
+000091d0: 2c20 7374 6172 742c 2065 6e64 2c20 6578  , start, end, ex
+000091e0: 706c 6f72 6564 2c20 7061 7468 2920 2d3e  plored, path) ->
+000091f0: 2055 6e69 6f6e 5b45 5453 2c20 4e6f 6e65   Union[ETS, None
+00009200: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
+00009210: 2020 2020 2020 2050 7269 7661 6465 206d         Privade m
+00009220: 6574 686f 6420 7768 6963 6820 7769 6c6c  ethod which will
+00009230: 2072 6563 7572 7369 7665 6c79 2066 696e   recursively fin
+00009240: 6420 7468 6520 4554 5320 6f66 2061 2070  d the ETS of a p
+00009250: 6174 680a 2020 2020 2020 2020 7365 6520  ath.        see 
+00009260: 6574 7328 290a 2020 2020 2020 2020 2222  ets().        ""
+00009270: 220a 0a20 2020 2020 2020 206c 696e 6b20  "..        link 
+00009280: 3d20 7365 6c66 2e5f 6765 746c 696e 6b28  = self._getlink(
+00009290: 7374 6172 742c 2073 656c 662e 6261 7365  start, self.base
+000092a0: 5f6c 696e 6b29 0a20 2020 2020 2020 2065  _link).        e
+000092b0: 6e64 203d 2073 656c 662e 5f67 6574 6c69  nd = self._getli
+000092c0: 6e6b 2865 6e64 2c20 7365 6c66 2e65 655f  nk(end, self.ee_
+000092d0: 6c69 6e6b 735b 305d 290a 0a20 2020 2020  links[0])..     
+000092e0: 2020 2074 6f70 6c65 7665 6c20 3d20 7061     toplevel = pa
+000092f0: 7468 2069 7320 4e6f 6e65 0a20 2020 2020  th is None.     
+00009300: 2020 2065 7870 6c6f 7265 642e 6164 6428     explored.add(
+00009310: 6c69 6e6b 290a 0a20 2020 2020 2020 2069  link)..        i
+00009320: 6620 6c69 6e6b 203d 3d20 656e 643a 0a20  f link == end:. 
+00009330: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00009340: 6e20 7061 7468 0a0a 2020 2020 2020 2020  n path..        
+00009350: 2320 756e 6c69 6b65 2072 6567 756c 6172  # unlike regular
+00009360: 2044 4653 2c20 7468 6520 6e65 6967 6862   DFS, the neighb
+00009370: 6f75 7273 206f 6620 7468 6520 6e6f 6465  ours of the node
+00009380: 2061 7265 2069 7473 2063 6869 6c64 7265   are its childre
+00009390: 6e0a 2020 2020 2020 2020 2320 616e 6420  n.        # and 
+000093a0: 6974 7320 7061 7265 6e74 2e0a 0a20 2020  its parent...   
+000093b0: 2020 2020 2023 2076 6973 6974 2063 6869       # visit chi
+000093c0: 6c64 206e 6f64 6573 2062 656c 6f77 2073  ld nodes below s
+000093d0: 7461 7274 0a20 2020 2020 2020 2069 6620  tart.        if 
+000093e0: 746f 706c 6576 656c 3a0a 2020 2020 2020  toplevel:.      
+000093f0: 2020 2020 2020 7061 7468 203d 206c 696e        path = lin
+00009400: 6b2e 6574 730a 0a20 2020 2020 2020 2069  k.ets..        i
+00009410: 6620 6c69 6e6b 2e63 6869 6c64 7265 6e20  f link.children 
+00009420: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00009430: 2020 2020 2020 2020 2066 6f72 2063 6869           for chi
+00009440: 6c64 2069 6e20 6c69 6e6b 2e63 6869 6c64  ld in link.child
+00009450: 7265 6e3a 0a20 2020 2020 2020 2020 2020  ren:.           
+00009460: 2020 2020 2069 6620 6368 696c 6420 6e6f       if child no
+00009470: 7420 696e 2065 7870 6c6f 7265 643a 0a20  t in explored:. 
+00009480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009490: 2020 2070 203d 2073 656c 662e 5f66 696e     p = self._fin
+000094a0: 645f 6574 7328 6368 696c 642c 2065 6e64  d_ets(child, end
+000094b0: 2c20 6578 706c 6f72 6564 2c20 7061 7468  , explored, path
+000094c0: 202a 2063 6869 6c64 2e65 7473 290a 2020   * child.ets).  
+000094d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000094e0: 2020 6966 2070 2069 7320 6e6f 7420 4e6f    if p is not No
+000094f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00009500: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00009510: 726e 2070 0a0a 2020 2020 2020 2020 2320  rn p..        # 
+00009520: 7765 2064 6964 6e27 7420 6669 6e64 2074  we didn't find t
+00009530: 6865 206e 6f64 6520 6265 6c6f 772c 206b  he node below, k
+00009540: 6565 7020 676f 696e 6720 7570 2061 206c  eep going up a l
+00009550: 6576 656c 2c20 616e 6420 7265 6375 7273  evel, and recurs
+00009560: 696e 670a 2020 2020 2020 2020 2320 646f  ing.        # do
+00009570: 776e 2061 6761 696e 0a20 2020 2020 2020  wn again.       
+00009580: 2069 6620 746f 706c 6576 656c 3a0a 2020   if toplevel:.  
+00009590: 2020 2020 2020 2020 2020 7061 7468 203d            path =
+000095a0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+000095b0: 206c 696e 6b2e 7061 7265 6e74 2069 7320   link.parent is 
+000095c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000095d0: 2020 2020 2020 7061 7265 6e74 203d 206c        parent = l
+000095e0: 696e 6b2e 7061 7265 6e74 2020 2320 676f  ink.parent  # go
+000095f0: 2075 7020 6f6e 6520 6c65 7665 6c20 746f   up one level to
+00009600: 7761 7264 2074 6865 2072 6f6f 740a 2020  ward the root.  
+00009610: 2020 2020 2020 2020 2020 6966 2070 6172            if par
+00009620: 656e 7420 6e6f 7420 696e 2065 7870 6c6f  ent not in explo
+00009630: 7265 643a 0a20 2020 2020 2020 2020 2020  red:.           
+00009640: 2020 2020 2069 6620 7061 7468 2069 7320       if path is 
+00009650: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00009660: 2020 2020 2020 2020 2020 7020 3d20 7365            p = se
+00009670: 6c66 2e5f 6669 6e64 5f65 7473 2870 6172  lf._find_ets(par
+00009680: 656e 742c 2065 6e64 2c20 6578 706c 6f72  ent, end, explor
+00009690: 6564 2c20 6c69 6e6b 2e65 7473 2e69 6e76  ed, link.ets.inv
+000096a0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
+000096b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000096c0: 2020 2020 2020 2020 2020 2020 2020 7020                p 
+000096d0: 3d20 7365 6c66 2e5f 6669 6e64 5f65 7473  = self._find_ets
+000096e0: 2870 6172 656e 742c 2065 6e64 2c20 6578  (parent, end, ex
+000096f0: 706c 6f72 6564 2c20 7061 7468 202a 206c  plored, path * l
+00009700: 696e 6b2e 6574 732e 696e 7628 2929 0a20  ink.ets.inv()). 
+00009710: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00009720: 6620 7020 6973 206e 6f74 204e 6f6e 653a  f p is not None:
+00009730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009740: 2020 2020 2072 6574 7572 6e20 700a 0a20       return p.. 
+00009750: 2020 2064 6566 205f 6772 6970 7065 725f     def _gripper_
+00009760: 6574 7328 7365 6c66 2c20 6772 6970 7065  ets(self, grippe
+00009770: 723a 2047 7269 7070 6572 2920 2d3e 2045  r: Gripper) -> E
+00009780: 5453 3a0a 2020 2020 2020 2020 2222 220a  TS:.        """.
+00009790: 2020 2020 2020 2020 5072 6976 6164 6520          Privade 
+000097a0: 6d65 7468 6f64 2077 6869 6368 2077 696c  method which wil
+000097b0: 6c20 6669 6e64 2074 6865 2045 5453 206f  l find the ETS o
+000097c0: 6620 6120 6772 6970 7065 720a 0a20 2020  f a gripper..   
+000097d0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+000097e0: 2020 7265 7475 726e 2045 5453 2845 542e    return ETS(ET.
+000097f0: 5345 3328 6772 6970 7065 722e 746f 6f6c  SE3(gripper.tool
+00009800: 2929 0a0a 2020 2020 406c 7275 5f63 6163  ))..    @lru_cac
+00009810: 6865 286d 6178 7369 7a65 3d33 3229 0a20  he(maxsize=32). 
+00009820: 2020 2064 6566 205f 6765 745f 6c69 6d69     def _get_limi
+00009830: 745f 6c69 6e6b 7328 0a20 2020 2020 2020  t_links(.       
+00009840: 2073 656c 662c 0a20 2020 2020 2020 2065   self,.        e
+00009850: 6e64 3a20 556e 696f 6e5b 4772 6970 7065  nd: Union[Grippe
+00009860: 722c 204c 696e 6b54 7970 652c 2073 7472  r, LinkType, str
+00009870: 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65 2c0a  , None] = None,.
+00009880: 2020 2020 2020 2020 7374 6172 743a 2055          start: U
+00009890: 6e69 6f6e 5b47 7269 7070 6572 2c20 4c69  nion[Gripper, Li
+000098a0: 6e6b 5479 7065 2c20 7374 722c 204e 6f6e  nkType, str, Non
+000098b0: 655d 203d 204e 6f6e 652c 0a20 2020 2029  e] = None,.    )
+000098c0: 202d 3e20 5475 706c 655b 4c69 6e6b 5479   -> Tuple[LinkTy
+000098d0: 7065 2c20 4c69 6e6b 5479 7065 2c20 556e  pe, LinkType, Un
+000098e0: 696f 6e5b 4e6f 6e65 2c20 5345 335d 5d3a  ion[None, SE3]]:
+000098f0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00009900: 2020 2020 2047 6574 2061 6e64 2076 616c       Get and val
+00009910: 6964 6174 6520 616e 2065 6e64 2d65 6666  idate an end-eff
+00009920: 6563 746f 722c 2061 6e64 2061 2062 6173  ector, and a bas
+00009930: 6520 6c69 6e6b 0a0a 2020 2020 2020 2020  e link..        
+00009940: 4865 6c70 6572 206d 6574 686f 6420 746f  Helper method to
+00009950: 2066 696e 6420 6f72 2076 616c 6964 6174   find or validat
+00009960: 6520 616e 2065 6e64 2d65 6666 6563 746f  e an end-effecto
+00009970: 7220 616e 6420 6261 7365 206c 696e 6b0a  r and base link.
+00009980: 0a20 2020 2020 2020 2065 6e64 0a20 2020  .        end.   
+00009990: 2020 2020 2020 2020 2065 6e64 2d65 6666           end-eff
+000099a0: 6563 746f 7220 6f72 2067 7269 7070 6572  ector or gripper
+000099b0: 2074 6f20 636f 6d70 7574 6520 666f 7277   to compute forw
+000099c0: 6172 6420 6b69 6e65 6d61 7469 6373 2074  ard kinematics t
+000099d0: 6f0a 2020 2020 2020 2020 7374 6172 740a  o.        start.
+000099e0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+000099f0: 206f 7220 7265 6665 7265 6e63 6520 746f   or reference to
+00009a00: 2061 2062 6173 6520 6c69 6e6b 2c20 6465   a base link, de
+00009a10: 6661 756c 7473 2074 6f20 4e6f 6e65 0a0a  faults to None..
+00009a20: 2020 2020 2020 2020 5661 6c75 6545 7272          ValueErr
+00009a30: 6f72 0a20 2020 2020 2020 2020 2020 206c  or.            l
+00009a40: 696e 6b20 6e6f 7420 6b6e 6f77 6e20 6f72  ink not known or
+00009a50: 2061 6d62 6967 756f 7573 0a20 2020 2020   ambiguous.     
+00009a60: 2020 2056 616c 7565 4572 726f 720a 2020     ValueError.  
+00009a70: 2020 2020 2020 2020 2020 5b64 6573 6372            [descr
+00009a80: 6970 7469 6f6e 5d0a 2020 2020 2020 2020  iption].        
+00009a90: 5479 7065 4572 726f 720a 2020 2020 2020  TypeError.      
+00009aa0: 2020 2020 2020 756e 6b6e 6f77 6e20 7479        unknown ty
+00009ab0: 7065 2070 726f 7669 6465 640a 0a20 2020  pe provided..   
+00009ac0: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+00009ad0: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+00009ae0: 2020 2020 2065 6e64 0a20 2020 2020 2020       end.       
+00009af0: 2020 2020 2065 6e64 2d65 6666 6563 746f       end-effecto
+00009b00: 7220 6c69 6e6b 0a20 2020 2020 2020 2073  r link.        s
+00009b10: 7461 7274 0a20 2020 2020 2020 2020 2020  tart.           
+00009b20: 2062 6173 6520 6c69 6e6b 0a20 2020 2020   base link.     
+00009b30: 2020 2074 6f6f 6c0a 2020 2020 2020 2020     tool.        
+00009b40: 2020 2020 746f 6f6c 2074 7261 6e73 666f      tool transfo
+00009b50: 726d 206f 6620 6772 6970 7065 7220 6966  rm of gripper if
+00009b60: 2061 7070 6c69 6361 626c 650a 0a20 2020   applicable..   
+00009b70: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+00009b80: 2020 746f 6f6c 203d 204e 6f6e 650a 2020    tool = None.  
+00009b90: 2020 2020 2020 6966 2065 6e64 2069 7320        if end is 
+00009ba0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00009bb0: 2020 6966 206c 656e 2873 656c 662e 6772    if len(self.gr
+00009bc0: 6970 7065 7273 2920 3e20 313a 0a20 2020  ippers) > 1:.   
+00009bd0: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+00009be0: 5f72 6574 203d 2073 656c 662e 6772 6970  _ret = self.grip
+00009bf0: 7065 7273 5b30 5d2e 6c69 6e6b 735b 305d  pers[0].links[0]
+00009c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009c10: 2074 6f6f 6c20 3d20 7365 6c66 2e67 7269   tool = self.gri
+00009c20: 7070 6572 735b 305d 2e74 6f6f 6c0a 2020  ppers[0].tool.  
+00009c30: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00009c40: 206c 656e 2873 656c 662e 6772 6970 7065   len(self.grippe
+00009c50: 7273 2920 3e20 313a 0a20 2020 2020 2020  rs) > 1:.       
+00009c60: 2020 2020 2020 2020 2020 2020 2023 2057               # W
+00009c70: 6172 6e20 7573 6572 3a20 6d6f 7265 2074  arn user: more t
+00009c80: 6861 6e20 6f6e 6520 6772 6970 7065 720a  han one gripper.
+00009c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009ca0: 2020 2020 7072 696e 7428 224d 6f72 6520      print("More 
+00009cb0: 7468 616e 206f 6e65 2067 7269 7070 6572  than one gripper
+00009cc0: 2070 7265 7365 6e74 2c20 7573 696e 6720   present, using 
+00009cd0: 726f 626f 742e 6772 6970 7065 7273 5b30  robot.grippers[0
+00009ce0: 5d22 290a 2020 2020 2020 2020 2020 2020  ]").            
+00009cf0: 656c 6966 206c 656e 2873 656c 662e 6772  elif len(self.gr
+00009d00: 6970 7065 7273 2920 3d3d 2031 3a0a 2020  ippers) == 1:.  
+00009d10: 2020 2020 2020 2020 2020 2020 2020 656e                en
+00009d20: 645f 7265 7420 3d20 7365 6c66 2e67 7269  d_ret = self.gri
+00009d30: 7070 6572 735b 305d 2e6c 696e 6b73 5b30  ppers[0].links[0
+00009d40: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00009d50: 2020 746f 6f6c 203d 2073 656c 662e 6772    tool = self.gr
+00009d60: 6970 7065 7273 5b30 5d2e 746f 6f6c 0a0a  ippers[0].tool..
+00009d70: 2020 2020 2020 2020 2020 2020 2320 6e6f              # no
+00009d80: 2067 7269 7070 6572 732c 2075 7365 2065   grippers, use e
+00009d90: 6520 6c69 6e6b 2069 6620 6a75 7374 206f  e link if just o
+00009da0: 6e65 0a20 2020 2020 2020 2020 2020 2065  ne.            e
+00009db0: 6c69 6620 6c65 6e28 7365 6c66 2e65 655f  lif len(self.ee_
+00009dc0: 6c69 6e6b 7329 203e 2031 3a0a 2020 2020  links) > 1:.    
+00009dd0: 2020 2020 2020 2020 2020 2020 656e 645f              end_
+00009de0: 7265 7420 3d20 7365 6c66 2e65 655f 6c69  ret = self.ee_li
+00009df0: 6e6b 735b 305d 0a20 2020 2020 2020 2020  nks[0].         
+00009e00: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+00009e10: 6c66 2e65 655f 6c69 6e6b 7329 203e 2031  lf.ee_links) > 1
+00009e20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009e30: 2020 2020 2020 2320 5761 726e 2075 7365        # Warn use
+00009e40: 723a 206d 6f72 6520 7468 616e 206f 6e65  r: more than one
+00009e50: 2045 450a 2020 2020 2020 2020 2020 2020   EE.            
+00009e60: 2020 2020 2020 2020 7072 696e 7428 224d          print("M
+00009e70: 6f72 6520 7468 616e 206f 6e65 2065 6e64  ore than one end
+00009e80: 2d65 6666 6563 746f 7220 7072 6573 656e  -effector presen
+00009e90: 742c 2075 7369 6e67 2072 6f62 6f74 2e65  t, using robot.e
+00009ea0: 655f 6c69 6e6b 735b 305d 2229 0a20 2020  e_links[0]").   
+00009eb0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00009ec0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00009ed0: 6e64 5f72 6574 203d 2073 656c 662e 6565  nd_ret = self.ee
+00009ee0: 5f6c 696e 6b73 5b30 5d0a 0a20 2020 2020  _links[0]..     
+00009ef0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00009f00: 2020 2020 2023 2043 6865 636b 2069 6620       # Check if 
+00009f10: 656e 6420 636f 7272 6573 706f 6e64 7320  end corresponds 
+00009f20: 746f 2067 7269 7070 6572 0a20 2020 2020  to gripper.     
+00009f30: 2020 2020 2020 2066 6f72 2067 7269 7070         for gripp
+00009f40: 6572 2069 6e20 7365 6c66 2e67 7269 7070  er in self.gripp
+00009f50: 6572 733a 0a20 2020 2020 2020 2020 2020  ers:.           
+00009f60: 2020 2020 2069 6620 656e 6420 3d3d 2067       if end == g
+00009f70: 7269 7070 6572 206f 7220 656e 6420 3d3d  ripper or end ==
+00009f80: 2067 7269 7070 6572 2e6e 616d 653a 0a20   gripper.name:. 
+00009f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009fa0: 2020 2074 6f6f 6c20 3d20 6772 6970 7065     tool = grippe
+00009fb0: 722e 746f 6f6c 0a20 2020 2020 2020 2020  r.tool.         
+00009fc0: 2020 2020 2020 2020 2020 2023 2065 6e64             # end
+00009fd0: 5f72 6574 203d 2067 7269 7070 6572 2e6c  _ret = gripper.l
+00009fe0: 696e 6b73 5b30 5d0a 0a20 2020 2020 2020  inks[0]..       
+00009ff0: 2020 2020 2023 206f 7468 6572 7769 7365       # otherwise
+0000a000: 2063 6865 636b 2066 6f72 2065 6e64 2069   check for end i
+0000a010: 6e20 7468 6520 6c69 6e6b 730a 2020 2020  n the links.    
+0000a020: 2020 2020 2020 2020 656e 645f 7265 7420          end_ret 
+0000a030: 3d20 7365 6c66 2e5f 6765 746c 696e 6b28  = self._getlink(
+0000a040: 656e 6429 0a0a 2020 2020 2020 2020 6966  end)..        if
+0000a050: 2073 7461 7274 2069 7320 4e6f 6e65 3a0a   start is None:.
+0000a060: 2020 2020 2020 2020 2020 2020 7374 6172              star
+0000a070: 745f 7265 7420 3d20 7365 6c66 2e62 6173  t_ret = self.bas
+0000a080: 655f 6c69 6e6b 0a0a 2020 2020 2020 2020  e_link..        
+0000a090: 2020 2020 2320 4361 6368 6520 7265 7375      # Cache resu
+0000a0a0: 6c74 0a20 2020 2020 2020 2020 2020 2073  lt.            s
+0000a0b0: 656c 662e 5f63 6163 6865 5f73 7461 7274  elf._cache_start
+0000a0c0: 203d 2073 7461 7274 0a20 2020 2020 2020   = start.       
+0000a0d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000a0e0: 2020 2023 2073 7461 7274 2065 6666 6563     # start effec
+0000a0f0: 746f 7220 6973 2073 7065 6369 6669 6564  tor is specified
+0000a100: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+0000a110: 7274 5f72 6574 203d 2073 656c 662e 5f67  rt_ret = self._g
+0000a120: 6574 6c69 6e6b 2873 7461 7274 290a 0a20  etlink(start).. 
+0000a130: 2020 2020 2020 2023 2062 6563 6175 7365         # because
+0000a140: 2047 7269 7070 6572 2072 6574 7572 6e73   Gripper returns
+0000a150: 204c 696e 6b20 6e6f 7420 4c69 6e6b 5479   Link not LinkTy
+0000a160: 7065 0a20 2020 2020 2020 2072 6574 7572  pe.        retur
+0000a170: 6e20 656e 645f 7265 742c 2073 7461 7274  n end_ret, start
+0000a180: 5f72 6574 2c20 746f 6f6c 2020 2320 7479  _ret, tool  # ty
+0000a190: 7065 3a20 6967 6e6f 7265 0a0a 2020 2020  pe: ignore..    
+0000a1a0: 406c 7275 5f63 6163 6865 286d 6178 7369  @lru_cache(maxsi
+0000a1b0: 7a65 3d33 3229 0a20 2020 2064 6566 2065  ze=32).    def e
+0000a1c0: 7473 280a 2020 2020 2020 2020 7365 6c66  ts(.        self
+0000a1d0: 2c0a 2020 2020 2020 2020 7374 6172 743a  ,.        start:
+0000a1e0: 2055 6e69 6f6e 5b4c 696e 6b54 7970 652c   Union[LinkType,
+0000a1f0: 2047 7269 7070 6572 2c20 7374 722c 204e   Gripper, str, N
+0000a200: 6f6e 655d 203d 204e 6f6e 652c 0a20 2020  one] = None,.   
+0000a210: 2020 2020 2065 6e64 3a20 556e 696f 6e5b       end: Union[
+0000a220: 4c69 6e6b 5479 7065 2c20 4772 6970 7065  LinkType, Grippe
+0000a230: 722c 2073 7472 2c20 4e6f 6e65 5d20 3d20  r, str, None] = 
+0000a240: 4e6f 6e65 2c0a 2020 2020 2920 2d3e 2045  None,.    ) -> E
+0000a250: 5453 3a0a 2020 2020 2020 2020 2222 220a  TS:.        """.
+0000a260: 2020 2020 2020 2020 526f 626f 7420 746f          Robot to
+0000a270: 2045 5453 0a0a 2020 2020 2020 2020 6060   ETS..        ``
+0000a280: 726f 626f 742e 6574 7328 2960 6020 6973  robot.ets()`` is
+0000a290: 2061 6e20 4554 5320 7265 7072 6573 656e   an ETS represen
+0000a2a0: 7469 6e67 2074 6865 206b 696e 656d 6174  ting the kinemat
+0000a2b0: 6963 7320 6672 6f6d 2062 6173 6520 746f  ics from base to
+0000a2c0: 0a20 2020 2020 2020 2065 6e64 2d65 6666  .        end-eff
+0000a2d0: 6563 746f 722e 0a0a 2020 2020 2020 2020  ector...        
+0000a2e0: 6060 726f 626f 742e 6574 7328 656e 643d  ``robot.ets(end=
+0000a2f0: 6c69 6e6b 2960 6020 6973 2061 6e20 4554  link)`` is an ET
+0000a300: 5320 7265 7072 6573 656e 7469 6e67 2074  S representing t
+0000a310: 6865 206b 696e 656d 6174 6963 7320 6672  he kinematics fr
+0000a320: 6f6d 0a20 2020 2020 2020 2062 6173 6520  om.        base 
+0000a330: 746f 2074 6865 206c 696e 6b20 6060 6c69  to the link ``li
+0000a340: 6e6b 6060 2073 7065 6369 6669 6564 2061  nk`` specified a
+0000a350: 7320 6120 4c69 6e6b 2072 6566 6572 656e  s a Link referen
+0000a360: 6365 206f 7220 6120 6e61 6d65 2e0a 0a20  ce or a name... 
+0000a370: 2020 2020 2020 2060 6072 6f62 6f74 2e65         ``robot.e
+0000a380: 7473 2873 7461 7274 3d6c 312c 2065 6e64  ts(start=l1, end
+0000a390: 3d6c 3229 6060 2069 7320 616e 2045 5453  =l2)`` is an ETS
+0000a3a0: 2072 6570 7265 7365 6e74 696e 6720 7468   representing th
+0000a3b0: 6520 6b69 6e65 6d61 7469 6373 0a20 2020  e kinematics.   
+0000a3c0: 2020 2020 2066 726f 6d20 6c69 6e6b 2060       from link `
+0000a3d0: 606c 3160 6020 746f 206c 696e 6b20 6060  `l1`` to link ``
+0000a3e0: 6c32 6060 2e0a 0a20 2020 2020 2020 2050  l2``...        P
+0000a3f0: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
+0000a400: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
+0000a410: 2020 2020 203a 7061 7261 6d20 7374 6172       :param star
+0000a420: 743a 2073 7461 7274 206f 6620 7061 7468  t: start of path
+0000a430: 2c20 6465 6661 756c 7473 2074 6f20 6060  , defaults to ``
+0000a440: 6261 7365 5f6c 696e 6b60 600a 2020 2020  base_link``.    
+0000a450: 2020 2020 3a70 6172 616d 2065 6e64 3a20      :param end: 
+0000a460: 656e 6420 6f66 2070 6174 682c 2064 6566  end of path, def
+0000a470: 6175 6c74 7320 746f 2065 6e64 2d65 6666  aults to end-eff
+0000a480: 6563 746f 720a 0a20 2020 2020 2020 2052  ector..        R
+0000a490: 6169 7365 730a 2020 2020 2020 2020 2d2d  aises.        --
+0000a4a0: 2d2d 2d2d 0a20 2020 2020 2020 2056 616c  ----.        Val
+0000a4b0: 7565 4572 726f 720a 2020 2020 2020 2020  ueError.        
+0000a4c0: 2020 2020 6120 6c69 6e6b 2064 6f65 7320      a link does 
+0000a4d0: 6e6f 7420 6265 6c6f 6e67 2074 6f20 7468  not belong to th
+0000a4e0: 6973 2045 526f 626f 740a 2020 2020 2020  is ERobot.      
+0000a4f0: 2020 5479 7065 4572 726f 720a 2020 2020    TypeError.    
+0000a500: 2020 2020 2020 2020 6120 6261 6420 6c69          a bad li
+0000a510: 6e6b 2061 7267 756d 656e 740a 0a20 2020  nk argument..   
+0000a520: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+0000a530: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+0000a540: 2020 2020 2065 7473 0a20 2020 2020 2020       ets.       
+0000a550: 2020 2020 2065 6c65 6d65 6e74 6172 7920       elementary 
+0000a560: 7472 616e 7366 6f72 6d20 7365 7175 656e  transform sequen
+0000a570: 6365 0a0a 2020 2020 2020 2020 4578 616d  ce..        Exam
+0000a580: 706c 6573 0a20 2020 2020 2020 202d 2d2d  ples.        ---
+0000a590: 2d2d 2d2d 2d0a 2020 2020 2020 2020 2e2e  -----.        ..
+0000a5a0: 2072 756e 626c 6f63 6b3a 3a20 7079 636f   runblock:: pyco
+0000a5b0: 6e0a 2020 2020 2020 2020 2020 2020 3e3e  n.            >>
+0000a5c0: 3e20 696d 706f 7274 2072 6f62 6f74 6963  > import robotic
+0000a5d0: 7374 6f6f 6c62 6f78 2061 7320 7274 620a  stoolbox as rtb.
+0000a5e0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+0000a5f0: 7061 6e64 6120 3d20 7274 622e 6d6f 6465  panda = rtb.mode
+0000a600: 6c73 2e45 5453 2e50 616e 6461 2829 0a20  ls.ETS.Panda(). 
+0000a610: 2020 2020 2020 2020 2020 203e 3e3e 2070             >>> p
+0000a620: 616e 6461 2e65 7473 2829 0a0a 2020 2020  anda.ets()..    
+0000a630: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+0000a640: 2023 2065 7473 2074 6f20 7374 616e 6420   # ets to stand 
+0000a650: 616e 6420 656e 6420 696e 6361 7365 206f  and end incase o
+0000a660: 6620 6772 6970 7065 7273 0a20 2020 2020  f grippers.     
+0000a670: 2020 2065 7473 5f69 6e69 7420 3d20 4e6f     ets_init = No
+0000a680: 6e65 0a20 2020 2020 2020 2065 7473 5f65  ne.        ets_e
+0000a690: 6e64 203d 204e 6f6e 650a 0a20 2020 2020  nd = None..     
+0000a6a0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000a6b0: 2873 7461 7274 2c20 4772 6970 7065 7229  (start, Gripper)
+0000a6c0: 3a0a 2020 2020 2020 2020 2020 2020 6574  :.            et
+0000a6d0: 735f 696e 6974 203d 2073 656c 662e 5f67  s_init = self._g
+0000a6e0: 7269 7070 6572 5f65 7473 2873 7461 7274  ripper_ets(start
+0000a6f0: 292e 696e 7628 290a 2020 2020 2020 2020  ).inv().        
+0000a700: 2020 2020 6c69 6e6b 203d 2073 7461 7274      link = start
+0000a710: 2e6c 696e 6b73 5b30 5d2e 7061 7265 6e74  .links[0].parent
+0000a720: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000a730: 6c69 6e6b 2069 7320 4e6f 6e65 3a20 2023  link is None:  #
+0000a740: 2070 7261 676d 6120 6e6f 636f 7665 720a   pragma nocover.
 0000a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a760: 2320 7765 2772 6520 7061 7373 6564 2061  # we're passed a
-0000a770: 2044 4852 6f62 6f74 206f 626a 6563 740a   DHRobot object.
-0000a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a790: 2320 544f 444f 2068 616e 646c 6520 6479  # TODO handle dy
-0000a7a0: 6e61 6d69 6320 7061 7261 6d65 7465 7273  namic parameters
-0000a7b0: 2069 6620 6769 7665 6e0a 2020 2020 2020   if given.      
-0000a7c0: 2020 2020 2020 2020 2020 6172 6720 3d20            arg = 
-0000a7d0: 6172 672e 6574 730a 0a20 2020 2020 2020  arg.ets..       
-0000a7e0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0000a7f0: 6365 2861 7267 2c20 4554 5329 3a0a 2020  ce(arg, ETS):.  
-0000a800: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000a810: 7765 2772 6520 7061 7373 6564 2061 6e20  we're passed an 
-0000a820: 4554 5320 7374 7269 6e67 0a20 2020 2020  ETS string.     
-0000a830: 2020 2020 2020 2020 2020 206c 696e 6b73             links
-0000a840: 203d 205b 5d0a 2020 2020 2020 2020 2020   = [].          
-0000a850: 2020 2020 2020 2320 6368 6f70 2069 7420        # chop it 
-0000a860: 7570 2069 6e74 6f20 7365 676d 656e 7473  up into segments
-0000a870: 2c20 6120 6c69 6e6b 2066 7261 6d65 2061  , a link frame a
-0000a880: 6674 6572 2065 7665 7279 206a 6f69 6e74  fter every joint
-0000a890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a8a0: 2070 6172 656e 7420 3d20 4e6f 6e65 0a20   parent = None. 
-0000a8b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000a8c0: 6f72 206a 2c20 6574 735f 6a20 696e 2065  or j, ets_j in e
-0000a8d0: 6e75 6d65 7261 7465 2861 7267 2e73 706c  numerate(arg.spl
-0000a8e0: 6974 2829 293a 0a20 2020 2020 2020 2020  it()):.         
-0000a8f0: 2020 2020 2020 2020 2020 2065 6c69 6e6b             elink
-0000a900: 203d 204c 696e 6b28 4554 5328 6574 735f   = Link(ETS(ets_
-0000a910: 6a29 2c20 7061 7265 6e74 3d70 6172 656e  j), parent=paren
-0000a920: 742c 206e 616d 653d 6622 6c69 6e6b 7b6a  t, name=f"link{j
-0000a930: 3a64 7d22 290a 2020 2020 2020 2020 2020  :d}").          
-0000a940: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
-0000a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a960: 2020 2020 2020 2065 6c69 6e6b 2e71 6c69         elink.qli
-0000a970: 6d20 6973 204e 6f6e 650a 2020 2020 2020  m is None.      
-0000a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a990: 2020 616e 6420 656c 696e 6b2e 7620 6973    and elink.v is
-0000a9a0: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-0000a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9c0: 2020 616e 6420 656c 696e 6b2e 762e 716c    and elink.v.ql
-0000a9d0: 696d 2069 7320 6e6f 7420 4e6f 6e65 0a20  im is not None. 
-0000a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9f0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-0000aa00: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0000aa10: 696e 6b2e 716c 696d 203d 2065 6c69 6e6b  ink.qlim = elink
-0000aa20: 2e76 2e71 6c69 6d0a 2020 2020 2020 2020  .v.qlim.        
-0000aa30: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-0000aa40: 6e74 203d 2065 6c69 6e6b 0a20 2020 2020  nt = elink.     
-0000aa50: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0000aa60: 696e 6b73 2e61 7070 656e 6428 656c 696e  inks.append(elin
-0000aa70: 6b29 0a0a 2020 2020 2020 2020 2020 2020  k)..            
-0000aa80: 656c 6966 2069 736c 6973 746f 6628 6172  elif islistof(ar
-0000aa90: 672c 204c 696e 6b29 3a0a 2020 2020 2020  g, Link):.      
-0000aaa0: 2020 2020 2020 2020 2020 6c69 6e6b 7320            links 
-0000aab0: 3d20 6172 670a 0a20 2020 2020 2020 2020  = arg..         
-0000aac0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000aad0: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-0000aae0: 7970 6545 7272 6f72 2822 636f 6e73 7472  ypeError("constr
-0000aaf0: 7563 746f 7220 6172 6775 6d65 6e74 206d  uctor argument m
-0000ab00: 7573 7420 6265 2045 5453 206f 7220 6c69  ust be ETS or li
-0000ab10: 7374 206f 6620 4c69 6e6b 2229 0a0a 2020  st of Link")..  
-0000ab20: 2020 2020 2020 2020 2020 7375 7065 7228            super(
-0000ab30: 292e 5f5f 696e 6974 5f5f 286c 696e 6b73  ).__init__(links
-0000ab40: 2c20 2a2a 6b77 6172 6773 290a 0a20 2020  , **kwargs)..   
-0000ab50: 2040 636c 6173 736d 6574 686f 640a 2020   @classmethod.  
-0000ab60: 2020 6465 6620 5552 4446 2863 6c73 2c20    def URDF(cls, 
-0000ab70: 6669 6c65 5f70 6174 682c 2067 7269 7070  file_path, gripp
-0000ab80: 6572 3d4e 6f6e 6529 3a0a 2020 2020 2020  er=None):.      
-0000ab90: 2020 2222 220a 2020 2020 2020 2020 436f    """.        Co
-0000aba0: 6e73 7472 7563 7420 616e 2045 526f 626f  nstruct an ERobo
-0000abb0: 7420 6f62 6a65 6374 2066 726f 6d20 5552  t object from UR
-0000abc0: 4446 2066 696c 650a 2020 2020 2020 2020  DF file.        
-0000abd0: 3a70 6172 616d 2066 696c 655f 7061 7468  :param file_path
-0000abe0: 3a20 5b64 6573 6372 6970 7469 6f6e 5d0a  : [description].
-0000abf0: 2020 2020 2020 2020 3a74 7970 6520 6669          :type fi
-0000ac00: 6c65 5f70 6174 683a 205b 7479 7065 5d0a  le_path: [type].
-0000ac10: 2020 2020 2020 2020 3a70 6172 616d 2067          :param g
-0000ac20: 7269 7070 6572 3a20 696e 6465 7820 6f72  ripper: index or
-0000ac30: 206e 616d 6520 6f66 2074 6865 2067 7269   name of the gri
-0000ac40: 7070 6572 206c 696e 6b28 7329 0a20 2020  pper link(s).   
-0000ac50: 2020 2020 203a 7479 7065 2067 7269 7070       :type gripp
-0000ac60: 6572 3a20 696e 7420 6f72 2073 7472 206f  er: int or str o
-0000ac70: 7220 6c69 7374 0a20 2020 2020 2020 203a  r list.        :
-0000ac80: 7265 7475 726e 3a20 5b64 6573 6372 6970  return: [descrip
-0000ac90: 7469 6f6e 5d0a 2020 2020 2020 2020 3a72  tion].        :r
-0000aca0: 7479 7065 3a20 5b74 7970 655d 0a20 2020  type: [type].   
-0000acb0: 2020 2020 2049 6620 6060 6772 6970 7065       If ``grippe
-0000acc0: 7260 6020 6973 2073 7065 6369 6669 6564  r`` is specified
-0000acd0: 2c20 6c69 6e6b 7320 6672 6f6d 2074 6861  , links from tha
-0000ace0: 7420 6c69 6e6b 206f 7574 7761 7264 2061  t link outward a
-0000acf0: 7265 2072 656d 6f76 6564 0a20 2020 2020  re removed.     
-0000ad00: 2020 2066 726f 6d20 7468 6520 7269 6769     from the rigi
-0000ad10: 642d 626f 6479 2074 7265 6520 616e 6420  d-body tree and 
-0000ad20: 666f 6c64 6564 2069 6e74 6f20 6120 6060  folded into a ``
-0000ad30: 4772 6970 7065 7260 6020 6f62 6a65 6374  Gripper`` object
-0000ad40: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0000ad50: 2020 2020 2020 6c69 6e6b 732c 206e 616d        links, nam
-0000ad60: 652c 205f 2c20 5f20 3d20 4552 6f62 6f74  e, _, _ = ERobot
-0000ad70: 2e55 5244 465f 7265 6164 2866 696c 655f  .URDF_read(file_
-0000ad80: 7061 7468 290a 0a20 2020 2020 2020 2069  path)..        i
-0000ad90: 6620 6772 6970 7065 7220 6973 206e 6f74  f gripper is not
-0000ada0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0000adb0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0000adc0: 2867 7269 7070 6572 2c20 696e 7429 3a0a  (gripper, int):.
-0000add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ade0: 6772 6970 7065 7220 3d20 6c69 6e6b 735b  gripper = links[
-0000adf0: 6772 6970 7065 725d 0a20 2020 2020 2020  gripper].       
-0000ae00: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
-0000ae10: 616e 6365 2867 7269 7070 6572 2c20 7374  ance(gripper, st
-0000ae20: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0000ae30: 2020 2020 666f 7220 6c69 6e6b 2069 6e20      for link in 
-0000ae40: 6c69 6e6b 733a 0a20 2020 2020 2020 2020  links:.         
-0000ae50: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
-0000ae60: 6e6b 2e6e 616d 6520 3d3d 2067 7269 7070  nk.name == gripp
-0000ae70: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-0000ae80: 2020 2020 2020 2020 2020 2020 6772 6970              grip
-0000ae90: 7065 7220 3d20 6c69 6e6b 0a20 2020 2020  per = link.     
-0000aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aeb0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
-0000aec0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0000aed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aee0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-0000aef0: 726f 7228 6622 6e6f 206c 696e 6b20 6e61  ror(f"no link na
-0000af00: 6d65 6420 7b67 7269 7070 6572 7d22 290a  med {gripper}").
-0000af10: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0000af20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000af30: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
-0000af40: 7228 2262 6164 2061 7267 756d 656e 7420  r("bad argument 
-0000af50: 7061 7373 6564 2061 7320 6772 6970 7065  passed as grippe
-0000af60: 7222 290a 0a20 2020 2020 2020 206c 696e  r")..        lin
-0000af70: 6b73 2c20 6e61 6d65 2c20 7572 6466 5f73  ks, name, urdf_s
-0000af80: 7472 696e 672c 2075 7264 665f 6669 6c65  tring, urdf_file
-0000af90: 7061 7468 203d 2045 526f 626f 742e 5552  path = ERobot.UR
-0000afa0: 4446 5f72 6561 6428 6669 6c65 5f70 6174  DF_read(file_pat
-0000afb0: 6829 0a20 2020 2020 2020 2070 7269 6e74  h).        print
-0000afc0: 2863 6c73 290a 2020 2020 2020 2020 7265  (cls).        re
-0000afd0: 7475 726e 2063 6c73 280a 2020 2020 2020  turn cls(.      
-0000afe0: 2020 2020 2020 6c69 6e6b 732c 0a20 2020        links,.   
-0000aff0: 2020 2020 2020 2020 206e 616d 653d 6e61           name=na
-0000b000: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-0000b010: 6772 6970 7065 725f 6c69 6e6b 733d 6772  gripper_links=gr
-0000b020: 6970 7065 722c 0a20 2020 2020 2020 2020  ipper,.         
-0000b030: 2020 2075 7264 665f 7374 7269 6e67 3d75     urdf_string=u
-0000b040: 7264 665f 7374 7269 6e67 2c0a 2020 2020  rdf_string,.    
-0000b050: 2020 2020 2020 2020 7572 6466 5f66 696c          urdf_fil
-0000b060: 6570 6174 683d 7572 6466 5f66 696c 6570  epath=urdf_filep
-0000b070: 6174 682c 0a20 2020 2020 2020 2029 0a0a  ath,.        )..
-0000b080: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-0000b090: 2020 6465 6620 7572 6466 5f73 7472 696e    def urdf_strin
-0000b0a0: 6728 7365 6c66 293a 0a20 2020 2020 2020  g(self):.       
-0000b0b0: 2072 6574 7572 6e20 7365 6c66 2e5f 7572   return self._ur
-0000b0c0: 6466 5f73 7472 696e 670a 0a20 2020 2040  df_string..    @
-0000b0d0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-0000b0e0: 2075 7264 665f 6669 6c65 7061 7468 2873   urdf_filepath(s
-0000b0f0: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
-0000b100: 7475 726e 2073 656c 662e 5f75 7264 665f  turn self._urdf_
-0000b110: 6669 6c65 7061 7468 0a0a 2020 2020 2320  filepath..    # 
-0000b120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b160: 2d2d 2d2d 2d20 230a 0a20 2020 2064 6566  ----- #..    def
-0000b170: 205f 746f 5f64 6963 7428 7365 6c66 2c20   _to_dict(self, 
-0000b180: 726f 626f 745f 616c 7068 613d 312e 302c  robot_alpha=1.0,
-0000b190: 2063 6f6c 6c69 7369 6f6e 5f61 6c70 6861   collision_alpha
-0000b1a0: 3d30 2e30 293a 0a0a 2020 2020 2020 2020  =0.0):..        
-0000b1b0: 2320 7365 6c66 2e5f 7365 745f 6c69 6e6b  # self._set_link
-0000b1c0: 5f66 6b28 7365 6c66 2e71 290a 0a20 2020  _fk(self.q)..   
-0000b1d0: 2020 2020 206f 6220 3d20 5b5d 0a0a 2020       ob = []..  
-0000b1e0: 2020 2020 2020 666f 7220 6c69 6e6b 2069        for link i
-0000b1f0: 6e20 7365 6c66 2e6c 696e 6b73 3a0a 0a20  n self.links:.. 
-0000b200: 2020 2020 2020 2020 2020 2069 6620 726f             if ro
-0000b210: 626f 745f 616c 7068 6120 3e20 303a 0a20  bot_alpha > 0:. 
-0000b220: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000b230: 6f72 2067 6920 696e 206c 696e 6b2e 6765  or gi in link.ge
-0000b240: 6f6d 6574 7279 3a0a 2020 2020 2020 2020  ometry:.        
-0000b250: 2020 2020 2020 2020 2020 2020 6769 2e73              gi.s
-0000b260: 6574 5f61 6c70 6861 2872 6f62 6f74 5f61  et_alpha(robot_a
-0000b270: 6c70 6861 290a 2020 2020 2020 2020 2020  lpha).          
-0000b280: 2020 2020 2020 2020 2020 6f62 2e61 7070            ob.app
-0000b290: 656e 6428 6769 2e74 6f5f 6469 6374 2829  end(gi.to_dict()
-0000b2a0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0000b2b0: 2063 6f6c 6c69 7369 6f6e 5f61 6c70 6861   collision_alpha
-0000b2c0: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
-0000b2d0: 2020 2020 2020 666f 7220 6769 2069 6e20        for gi in 
-0000b2e0: 6c69 6e6b 2e63 6f6c 6c69 7369 6f6e 3a0a  link.collision:.
-0000b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b300: 2020 2020 6769 2e73 6574 5f61 6c70 6861      gi.set_alpha
-0000b310: 2863 6f6c 6c69 7369 6f6e 5f61 6c70 6861  (collision_alpha
-0000b320: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000b330: 2020 2020 2020 6f62 2e61 7070 656e 6428        ob.append(
-0000b340: 6769 2e74 6f5f 6469 6374 2829 290a 0a20  gi.to_dict()).. 
-0000b350: 2020 2020 2020 2023 2044 6f20 7468 6520         # Do the 
-0000b360: 6772 6970 7065 7273 206e 6f77 0a20 2020  grippers now.   
-0000b370: 2020 2020 2066 6f72 2067 7269 7070 6572       for gripper
-0000b380: 2069 6e20 7365 6c66 2e67 7269 7070 6572   in self.gripper
-0000b390: 733a 0a20 2020 2020 2020 2020 2020 2066  s:.            f
-0000b3a0: 6f72 206c 696e 6b20 696e 2067 7269 7070  or link in gripp
-0000b3b0: 6572 2e6c 696e 6b73 3a0a 0a20 2020 2020  er.links:..     
-0000b3c0: 2020 2020 2020 2020 2020 2069 6620 726f             if ro
-0000b3d0: 626f 745f 616c 7068 6120 3e20 303a 0a20  bot_alpha > 0:. 
-0000b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3f0: 2020 2066 6f72 2067 6920 696e 206c 696e     for gi in lin
-0000b400: 6b2e 6765 6f6d 6574 7279 3a0a 2020 2020  k.geometry:.    
-0000b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b420: 2020 2020 6769 2e73 6574 5f61 6c70 6861      gi.set_alpha
-0000b430: 2872 6f62 6f74 5f61 6c70 6861 290a 2020  (robot_alpha).  
-0000b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b450: 2020 2020 2020 6f62 2e61 7070 656e 6428        ob.append(
-0000b460: 6769 2e74 6f5f 6469 6374 2829 290a 2020  gi.to_dict()).  
-0000b470: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000b480: 2063 6f6c 6c69 7369 6f6e 5f61 6c70 6861   collision_alpha
-0000b490: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
-0000b4a0: 2020 2020 2020 2020 2020 666f 7220 6769            for gi
-0000b4b0: 2069 6e20 6c69 6e6b 2e63 6f6c 6c69 7369   in link.collisi
-0000b4c0: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
-0000b4d0: 2020 2020 2020 2020 2020 2020 6769 2e73              gi.s
-0000b4e0: 6574 5f61 6c70 6861 2863 6f6c 6c69 7369  et_alpha(collisi
-0000b4f0: 6f6e 5f61 6c70 6861 290a 2020 2020 2020  on_alpha).      
-0000b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b510: 2020 6f62 2e61 7070 656e 6428 6769 2e74    ob.append(gi.t
-0000b520: 6f5f 6469 6374 2829 290a 0a20 2020 2020  o_dict())..     
-0000b530: 2020 2023 2066 6f72 206f 2069 6e20 6f62     # for o in ob
-0000b540: 3a0a 2020 2020 2020 2020 2320 2020 2020  :.        #     
-0000b550: 7072 696e 7428 6f29 0a0a 2020 2020 2020  print(o)..      
-0000b560: 2020 7265 7475 726e 206f 620a 0a20 2020    return ob..   
-0000b570: 2064 6566 205f 666b 5f64 6963 7428 7365   def _fk_dict(se
-0000b580: 6c66 2c20 726f 626f 745f 616c 7068 613d  lf, robot_alpha=
-0000b590: 312e 302c 2063 6f6c 6c69 7369 6f6e 5f61  1.0, collision_a
-0000b5a0: 6c70 6861 3d30 2e30 293a 0a20 2020 2020  lpha=0.0):.     
-0000b5b0: 2020 206f 6220 3d20 5b5d 0a0a 2020 2020     ob = []..    
-0000b5c0: 2020 2020 2320 446f 2074 6865 2072 6f62      # Do the rob
-0000b5d0: 6f74 0a20 2020 2020 2020 2066 6f72 206c  ot.        for l
-0000b5e0: 696e 6b20 696e 2073 656c 662e 6c69 6e6b  ink in self.link
-0000b5f0: 733a 0a0a 2020 2020 2020 2020 2020 2020  s:..            
-0000b600: 6966 2072 6f62 6f74 5f61 6c70 6861 203e  if robot_alpha >
-0000b610: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0000b620: 2020 2020 666f 7220 6769 2069 6e20 6c69      for gi in li
-0000b630: 6e6b 2e67 656f 6d65 7472 793a 0a20 2020  nk.geometry:.   
-0000b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b650: 206f 622e 6170 7065 6e64 2867 692e 666b   ob.append(gi.fk
-0000b660: 5f64 6963 7428 2929 0a20 2020 2020 2020  _dict()).       
-0000b670: 2020 2020 2069 6620 636f 6c6c 6973 696f       if collisio
-0000b680: 6e5f 616c 7068 6120 3e20 303a 0a20 2020  n_alpha > 0:.   
-0000b690: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0000b6a0: 2067 6920 696e 206c 696e 6b2e 636f 6c6c   gi in link.coll
-0000b6b0: 6973 696f 6e3a 0a20 2020 2020 2020 2020  ision:.         
-0000b6c0: 2020 2020 2020 2020 2020 206f 622e 6170             ob.ap
-0000b6d0: 7065 6e64 2867 692e 666b 5f64 6963 7428  pend(gi.fk_dict(
-0000b6e0: 2929 0a0a 2020 2020 2020 2020 2320 446f  ))..        # Do
-0000b6f0: 2074 6865 2067 7269 7070 6572 7320 6e6f   the grippers no
-0000b700: 770a 2020 2020 2020 2020 666f 7220 6772  w.        for gr
-0000b710: 6970 7065 7220 696e 2073 656c 662e 6772  ipper in self.gr
-0000b720: 6970 7065 7273 3a0a 2020 2020 2020 2020  ippers:.        
-0000b730: 2020 2020 666f 7220 6c69 6e6b 2069 6e20      for link in 
-0000b740: 6772 6970 7065 722e 6c69 6e6b 733a 0a20  gripper.links:. 
-0000b750: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000b760: 6620 726f 626f 745f 616c 7068 6120 3e20  f robot_alpha > 
-0000b770: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-0000b780: 2020 2020 2020 2066 6f72 2067 6920 696e         for gi in
-0000b790: 206c 696e 6b2e 6765 6f6d 6574 7279 3a0a   link.geometry:.
-0000b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7b0: 2020 2020 2020 2020 6f62 2e61 7070 656e          ob.appen
-0000b7c0: 6428 6769 2e66 6b5f 6469 6374 2829 290a  d(gi.fk_dict()).
-0000b7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7e0: 6966 2063 6f6c 6c69 7369 6f6e 5f61 6c70  if collision_alp
-0000b7f0: 6861 203e 2030 3a0a 2020 2020 2020 2020  ha > 0:.        
-0000b800: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000b810: 6769 2069 6e20 6c69 6e6b 2e63 6f6c 6c69  gi in link.colli
-0000b820: 7369 6f6e 3a0a 2020 2020 2020 2020 2020  sion:.          
-0000b830: 2020 2020 2020 2020 2020 2020 2020 6f62                ob
-0000b840: 2e61 7070 656e 6428 6769 2e66 6b5f 6469  .append(gi.fk_di
-0000b850: 6374 2829 290a 0a20 2020 2020 2020 2072  ct())..        r
-0000b860: 6574 7572 6e20 6f62 0a0a 2020 2020 2320  eturn ob..    # 
-0000b870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b8a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b8b0: 2d2d 2d2d 2d20 230a 0a20 2020 2040 7374  ----- #..    @st
-0000b8c0: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
-0000b8d0: 6566 2055 5244 465f 7265 6164 2866 696c  ef URDF_read(fil
-0000b8e0: 655f 7061 7468 2c20 746c 643d 4e6f 6e65  e_path, tld=None
-0000b8f0: 2c20 7861 6372 6f5f 746c 643d 4e6f 6e65  , xacro_tld=None
-0000b900: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-0000b910: 2020 2020 2020 2052 6561 6420 6120 5552         Read a UR
-0000b920: 4446 2066 696c 6520 6173 204c 696e 6b73  DF file as Links
-0000b930: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000b940: 6669 6c65 5f70 6174 683a 2046 696c 6520  file_path: File 
-0000b950: 7061 7468 2072 656c 6174 6976 6520 746f  path relative to
-0000b960: 2074 6865 2078 6163 726f 2066 6f6c 6465   the xacro folde
-0000b970: 720a 2020 2020 2020 2020 3a74 7970 6520  r.        :type 
-0000b980: 6669 6c65 5f70 6174 683a 2073 7472 2c20  file_path: str, 
-0000b990: 696e 2050 6f73 6978 2066 696c 6520 7061  in Posix file pa
-0000b9a0: 7468 2066 7072 6d61 740a 2020 2020 2020  th fprmat.      
-0000b9b0: 2020 3a70 6172 616d 2074 6c64 3a20 4120    :param tld: A 
-0000b9c0: 6375 7374 6f6d 2074 6f70 2d6c 6576 656c  custom top-level
-0000b9d0: 2064 6972 6563 746f 7279 2077 6869 6368   directory which
-0000b9e0: 2068 6f6c 6473 2074 6865 2078 6163 726f   holds the xacro
-0000b9f0: 2064 6174 612c 0a20 2020 2020 2020 2020   data,.         
-0000ba00: 2020 2064 6566 6175 6c74 7320 746f 204e     defaults to N
-0000ba10: 6f6e 650a 2020 2020 2020 2020 3a74 7970  one.        :typ
-0000ba20: 6520 746c 643a 2073 7472 2c20 6f70 7469  e tld: str, opti
-0000ba30: 6f6e 616c 0a20 2020 2020 2020 203a 7061  onal.        :pa
-0000ba40: 7261 6d20 7861 6372 6f5f 746c 643a 2041  ram xacro_tld: A
-0000ba50: 2063 7573 746f 6d20 746f 702d 6c65 7665   custom top-leve
-0000ba60: 6c20 7769 7468 696e 2074 6865 2078 6163  l within the xac
-0000ba70: 726f 2064 6174 612c 0a20 2020 2020 2020  ro data,.       
-0000ba80: 2020 2020 2064 6566 6175 6c74 7320 746f       defaults to
-0000ba90: 204e 6f6e 650a 2020 2020 2020 2020 3a74   None.        :t
-0000baa0: 7970 6520 7861 6372 6f5f 746c 643a 2073  ype xacro_tld: s
-0000bab0: 7472 2c20 6f70 7469 6f6e 616c 0a20 2020  tr, optional.   
-0000bac0: 2020 2020 203a 7265 7475 726e 3a20 4c69       :return: Li
-0000bad0: 6e6b 7320 616e 6420 726f 626f 7420 6e61  nks and robot na
-0000bae0: 6d65 0a20 2020 2020 2020 203a 7274 7970  me.        :rtyp
-0000baf0: 653a 2074 7570 6c65 284c 696e 6b20 6c69  e: tuple(Link li
-0000bb00: 7374 2c20 7374 7229 0a20 2020 2020 2020  st, str).       
-0000bb10: 2046 696c 6520 7368 6f75 6c64 2062 6520   File should be 
-0000bb20: 7370 6563 6966 6965 6420 7265 6c61 7469  specified relati
-0000bb30: 7665 2074 6f20 6060 5254 4244 4154 412f  ve to ``RTBDATA/
-0000bb40: 5552 4446 2f78 6163 726f 6060 0a0a 2020  URDF/xacro``..  
-0000bb50: 2020 2020 2020 2e2e 206e 6f74 653a 3a20        .. note:: 
-0000bb60: 4966 2060 6074 6c64 6060 2069 7320 6e6f  If ``tld`` is no
-0000bb70: 7420 7375 7070 6c69 6564 2c20 6669 6c65  t supplied, file
-0000bb80: 7061 7468 2070 6f69 6e74 696e 6720 746f  path pointing to
-0000bb90: 2078 6163 726f 2064 6174 6120 7368 6f75   xacro data shou
-0000bba0: 6c64 0a20 2020 2020 2020 2020 2020 2062  ld.            b
-0000bbb0: 6520 6469 7265 6374 6c79 2075 6e64 6572  e directly under
-0000bbc0: 2060 6052 5442 4441 5441 2f55 5244 462f   ``RTBDATA/URDF/
-0000bbd0: 7861 6372 6f60 6020 4f52 2075 6e64 6572  xacro`` OR under
-0000bbe0: 2060 602e 2f78 6163 726f 6060 2072 656c   ``./xacro`` rel
-0000bbf0: 6174 6976 650a 2020 2020 2020 2020 2020  ative.          
-0000bc00: 2020 746f 2074 6865 206d 6f64 656c 2066    to the model f
-0000bc10: 696c 6520 6361 6c6c 696e 6720 7468 6973  ile calling this
-0000bc20: 206d 6574 686f 642e 2049 6620 6060 746c   method. If ``tl
-0000bc30: 6460 6020 6973 2073 7570 706c 6965 642c  d`` is supplied,
-0000bc40: 2074 6865 6e0a 2020 2020 2020 2020 2020   then.          
-0000bc50: 2020 6060 6066 696c 655f 7061 7468 6060    ```file_path``
-0000bc60: 6020 6e65 6564 7320 746f 2062 6520 7265  ` needs to be re
-0000bc70: 6c61 7469 7665 2074 6f20 6060 746c 6460  lative to ``tld`
-0000bc80: 600a 2020 2020 2020 2020 2222 220a 0a20  `.        """.. 
-0000bc90: 2020 2020 2020 2023 2067 6574 2074 6865         # get the
-0000bca0: 2070 6174 6820 746f 2074 6865 2063 6c61   path to the cla
-0000bcb0: 7373 2074 6861 7420 6465 6669 6e65 7320  ss that defines 
-0000bcc0: 7468 6520 726f 626f 740a 2020 2020 2020  the robot.      
-0000bcd0: 2020 6966 2074 6c64 2069 7320 4e6f 6e65    if tld is None
-0000bce0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-0000bcf0: 7365 5f70 6174 6820 3d20 7274 625f 7061  se_path = rtb_pa
-0000bd00: 7468 5f74 6f5f 6461 7461 6669 6c65 2822  th_to_datafile("
-0000bd10: 7861 6372 6f22 290a 2020 2020 2020 2020  xacro").        
-0000bd20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000bd30: 2020 6261 7365 5f70 6174 6820 3d20 5075    base_path = Pu
-0000bd40: 7265 506f 7369 7850 6174 6828 746c 6429  rePosixPath(tld)
-0000bd50: 0a20 2020 2020 2020 2023 2070 7269 6e74  .        # print
-0000bd60: 2822 2a2a 2a20 7572 6466 5f74 6f5f 6574  ("*** urdf_to_et
-0000bd70: 735f 6172 6773 3a20 222c 2063 6c61 7373  s_args: ", class
-0000bd80: 7061 7468 290a 2020 2020 2020 2020 2320  path).        # 
-0000bd90: 6164 6420 6f6e 2072 656c 6174 6976 6520  add on relative 
-0000bda0: 7061 7468 2074 6f20 6765 7420 746f 2074  path to get to t
-0000bdb0: 6865 2055 5244 4620 6f72 2078 6163 726f  he URDF or xacro
-0000bdc0: 2066 696c 650a 2020 2020 2020 2020 2320   file.        # 
-0000bdd0: 6261 7365 5f70 6174 6820 3d20 5075 7265  base_path = Pure
-0000bde0: 5061 7468 2863 6c61 7373 7061 7468 292e  Path(classpath).
-0000bdf0: 7061 7265 6e74 2e70 6172 656e 7420 2f20  parent.parent / 
-0000be00: 2755 5244 4627 202f 2027 7861 6372 6f27  'URDF' / 'xacro'
-0000be10: 0a20 2020 2020 2020 2066 696c 655f 7061  .        file_pa
-0000be20: 7468 203d 2062 6173 655f 7061 7468 202f  th = base_path /
-0000be30: 2050 7572 6550 6f73 6978 5061 7468 2866   PurePosixPath(f
-0000be40: 696c 655f 7061 7468 290a 2020 2020 2020  ile_path).      
-0000be50: 2020 6e61 6d65 2c20 6578 7420 3d20 7370    name, ext = sp
-0000be60: 6c69 7465 7874 2866 696c 655f 7061 7468  litext(file_path
-0000be70: 290a 0a20 2020 2020 2020 2069 6620 6578  )..        if ex
-0000be80: 7420 3d3d 2022 2e78 6163 726f 223a 0a20  t == ".xacro":. 
-0000be90: 2020 2020 2020 2020 2020 2023 2069 7427             # it'
-0000bea0: 7320 6120 7861 6372 6f20 6669 6c65 2c20  s a xacro file, 
-0000beb0: 7072 6570 726f 6365 7373 2069 740a 2020  preprocess it.  
-0000bec0: 2020 2020 2020 2020 2020 6966 2078 6163            if xac
-0000bed0: 726f 5f74 6c64 2069 7320 6e6f 7420 4e6f  ro_tld is not No
-0000bee0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0000bef0: 2020 2020 7861 6372 6f5f 746c 6420 3d20      xacro_tld = 
-0000bf00: 6261 7365 5f70 6174 6820 2f20 5075 7265  base_path / Pure
-0000bf10: 506f 7369 7850 6174 6828 7861 6372 6f5f  PosixPath(xacro_
-0000bf20: 746c 6429 0a20 2020 2020 2020 2020 2020  tld).           
-0000bf30: 2075 7264 665f 7374 7269 6e67 203d 2078   urdf_string = x
-0000bf40: 6163 726f 2e6d 6169 6e28 6669 6c65 5f70  acro.main(file_p
-0000bf50: 6174 682c 2078 6163 726f 5f74 6c64 290a  ath, xacro_tld).
-0000bf60: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0000bf70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bf80: 2075 7264 6620 3d20 5552 4446 2e6c 6f61   urdf = URDF.loa
-0000bf90: 6473 7472 2875 7264 665f 7374 7269 6e67  dstr(urdf_string
-0000bfa0: 2c20 6669 6c65 5f70 6174 682c 2062 6173  , file_path, bas
-0000bfb0: 655f 7061 7468 290a 2020 2020 2020 2020  e_path).        
-0000bfc0: 2020 2020 6578 6365 7074 2042 6173 6545      except BaseE
-0000bfd0: 7863 6570 7469 6f6e 2061 7320 653a 0a20  xception as e:. 
-0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000bff0: 7269 6e74 2822 6572 726f 7220 7061 7273  rint("error pars
-0000c000: 696e 6720 5552 4446 2066 696c 6522 2c20  ing URDF file", 
-0000c010: 6669 6c65 5f70 6174 6829 0a20 2020 2020  file_path).     
-0000c020: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0000c030: 2065 0a20 2020 2020 2020 2065 6c73 653a   e.        else:
-0000c040: 2020 2320 7072 6167 6d61 206e 6f63 6f76    # pragma nocov
-0000c050: 6572 0a20 2020 2020 2020 2020 2020 2075  er.            u
-0000c060: 7264 665f 7374 7269 6e67 203d 206f 7065  rdf_string = ope
-0000c070: 6e28 6669 6c65 5f70 6174 6829 2e72 6561  n(file_path).rea
-0000c080: 6428 290a 2020 2020 2020 2020 2020 2020  d().            
-0000c090: 7572 6466 203d 2055 5244 462e 6c6f 6164  urdf = URDF.load
-0000c0a0: 7374 7228 7572 6466 5f73 7472 696e 672c  str(urdf_string,
-0000c0b0: 2066 696c 655f 7061 7468 2c20 6261 7365   file_path, base
-0000c0c0: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
-0000c0d0: 7265 7475 726e 2075 7264 662e 656c 696e  return urdf.elin
-0000c0e0: 6b73 2c20 7572 6466 2e6e 616d 652c 2075  ks, urdf.name, u
-0000c0f0: 7264 665f 7374 7269 6e67 2c20 6669 6c65  rdf_string, file
-0000c100: 5f70 6174 680a 0a20 2020 2023 202d 2d2d  _path..    # ---
+0000a760: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+0000a770: 2822 496e 7661 6c69 6420 726f 626f 7420  ("Invalid robot 
+0000a780: 6c69 6e6b 2063 6f6e 6669 6775 7261 7469  link configurati
+0000a790: 6f6e 2229 0a20 2020 2020 2020 2065 6c73  on").        els
+0000a7a0: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
+0000a7b0: 696e 6b20 3d20 7365 6c66 2e5f 6765 746c  ink = self._getl
+0000a7c0: 696e 6b28 7374 6172 742c 2073 656c 662e  ink(start, self.
+0000a7d0: 6261 7365 5f6c 696e 6b29 0a0a 2020 2020  base_link)..    
+0000a7e0: 2020 2020 6966 2065 6e64 2069 7320 4e6f      if end is No
+0000a7f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000a800: 6966 206c 656e 2873 656c 662e 6772 6970  if len(self.grip
+0000a810: 7065 7273 2920 3e20 313a 0a20 2020 2020  pers) > 1:.     
+0000a820: 2020 2020 2020 2020 2020 2065 6e64 5f6c             end_l
+0000a830: 696e 6b20 3d20 7365 6c66 2e67 7269 7070  ink = self.gripp
+0000a840: 6572 735b 305d 2e6c 696e 6b73 5b30 5d0a  ers[0].links[0].
+0000a850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a860: 6574 735f 656e 6420 3d20 7365 6c66 2e5f  ets_end = self._
+0000a870: 6772 6970 7065 725f 6574 7328 7365 6c66  gripper_ets(self
+0000a880: 2e67 7269 7070 6572 735b 305d 290a 2020  .grippers[0]).  
+0000a890: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000a8a0: 696e 7428 226d 756c 7469 706c 6520 6772  int("multiple gr
+0000a8b0: 6970 7065 7273 2070 7265 7365 6e74 2c20  ippers present, 
+0000a8c0: 616d 6269 6775 6f75 732c 2075 7369 6e67  ambiguous, using
+0000a8d0: 2073 656c 662e 6772 6970 7065 7273 5b30   self.grippers[0
+0000a8e0: 5d22 290a 2020 2020 2020 2020 2020 2020  ]").            
+0000a8f0: 656c 6966 206c 656e 2873 656c 662e 6772  elif len(self.gr
+0000a900: 6970 7065 7273 2920 3d3d 2031 3a0a 2020  ippers) == 1:.  
+0000a910: 2020 2020 2020 2020 2020 2020 2020 656e                en
+0000a920: 645f 6c69 6e6b 203d 2073 656c 662e 6772  d_link = self.gr
+0000a930: 6970 7065 7273 5b30 5d2e 6c69 6e6b 735b  ippers[0].links[
+0000a940: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
+0000a950: 2020 2065 7473 5f65 6e64 203d 2073 656c     ets_end = sel
+0000a960: 662e 5f67 7269 7070 6572 5f65 7473 2873  f._gripper_ets(s
+0000a970: 656c 662e 6772 6970 7065 7273 5b30 5d29  elf.grippers[0])
+0000a980: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0000a990: 6620 6c65 6e28 7365 6c66 2e65 655f 6c69  f len(self.ee_li
+0000a9a0: 6e6b 7329 203e 2031 3a0a 2020 2020 2020  nks) > 1:.      
+0000a9b0: 2020 2020 2020 2020 2020 656e 645f 6c69            end_li
+0000a9c0: 6e6b 203d 2073 656c 662e 5f67 6574 6c69  nk = self._getli
+0000a9d0: 6e6b 2865 6e64 2c20 7365 6c66 2e65 655f  nk(end, self.ee_
+0000a9e0: 6c69 6e6b 735b 305d 290a 2020 2020 2020  links[0]).      
+0000a9f0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+0000aa00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000aa10: 2020 2020 2022 6d75 6c74 6970 6c65 2065       "multiple e
+0000aa20: 6e64 2d65 6666 6563 746f 7273 2070 7265  nd-effectors pre
+0000aa30: 7365 6e74 2c20 616d 6269 6775 6f75 732c  sent, ambiguous,
+0000aa40: 2075 7369 6e67 2073 656c 662e 6565 5f6c   using self.ee_l
+0000aa50: 696e 6b73 5b30 5d22 0a20 2020 2020 2020  inks[0]".       
+0000aa60: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0000aa70: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000aa80: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+0000aa90: 5f6c 696e 6b20 3d20 7365 6c66 2e5f 6765  _link = self._ge
+0000aaa0: 746c 696e 6b28 656e 642c 2073 656c 662e  tlink(end, self.
+0000aab0: 6565 5f6c 696e 6b73 5b30 5d29 0a20 2020  ee_links[0]).   
+0000aac0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000aad0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0000aae0: 616e 6365 2865 6e64 2c20 4772 6970 7065  ance(end, Grippe
+0000aaf0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0000ab00: 2020 2020 6574 735f 656e 6420 3d20 7365      ets_end = se
+0000ab10: 6c66 2e5f 6772 6970 7065 725f 6574 7328  lf._gripper_ets(
+0000ab20: 656e 6429 0a20 2020 2020 2020 2020 2020  end).           
+0000ab30: 2020 2020 2065 6e64 5f6c 696e 6b20 3d20       end_link = 
+0000ab40: 656e 642e 6c69 6e6b 735b 305d 2e70 6172  end.links[0].par
+0000ab50: 656e 7420 2023 2074 7970 653a 2069 676e  ent  # type: ign
+0000ab60: 6f72 650a 2020 2020 2020 2020 2020 2020  ore.            
+0000ab70: 2020 2020 6966 2065 6e64 5f6c 696e 6b20      if end_link 
+0000ab80: 6973 204e 6f6e 653a 2020 2320 7072 6167  is None:  # prag
+0000ab90: 6d61 206e 6f63 6f76 6572 0a20 2020 2020  ma nocover.     
+0000aba0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000abb0: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+0000abc0: 2249 6e76 616c 6964 2072 6f62 6f74 206c  "Invalid robot l
+0000abd0: 696e 6b20 636f 6e66 6967 7572 6174 696f  ink configuratio
+0000abe0: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+0000abf0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000ac00: 2020 2020 2020 656e 645f 6c69 6e6b 203d        end_link =
+0000ac10: 2073 656c 662e 5f67 6574 6c69 6e6b 2865   self._getlink(e
+0000ac20: 6e64 2c20 7365 6c66 2e65 655f 6c69 6e6b  nd, self.ee_link
+0000ac30: 735b 305d 290a 0a20 2020 2020 2020 2065  s[0])..        e
+0000ac40: 7870 6c6f 7265 6420 3d20 7365 7428 290a  xplored = set().
+0000ac50: 0a20 2020 2020 2020 2069 6620 6c69 6e6b  .        if link
+0000ac60: 2069 7320 656e 645f 6c69 6e6b 3a0a 2020   is end_link:.  
+0000ac70: 2020 2020 2020 2020 2020 6574 7320 3d20            ets = 
+0000ac80: 6c69 6e6b 2e65 7473 0a20 2020 2020 2020  link.ets.       
+0000ac90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000aca0: 2020 2065 7473 203d 2073 656c 662e 5f66     ets = self._f
+0000acb0: 696e 645f 6574 7328 6c69 6e6b 2c20 656e  ind_ets(link, en
+0000acc0: 645f 6c69 6e6b 2c20 6578 706c 6f72 6564  d_link, explored
+0000acd0: 2c20 7061 7468 3d4e 6f6e 6529 0a0a 2020  , path=None)..  
+0000ace0: 2020 2020 2020 6966 2065 7473 2069 7320        if ets is 
+0000acf0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000ad00: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+0000ad10: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
+0000ad20: 2020 2020 2243 6f75 6c64 206e 6f74 2066      "Could not f
+0000ad30: 696e 6420 7468 6520 7265 7175 6573 7465  ind the requeste
+0000ad40: 6420 4554 5320 696e 2074 6869 7320 726f  d ETS in this ro
+0000ad50: 626f 7422 0a20 2020 2020 2020 2020 2020  bot".           
+0000ad60: 2029 2020 2320 7072 6167 6d61 206e 6f63   )  # pragma noc
+0000ad70: 6f76 6572 0a0a 2020 2020 2020 2020 6966  over..        if
+0000ad80: 2065 7473 5f69 6e69 7420 6973 206e 6f74   ets_init is not
+0000ad90: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000ada0: 2020 2065 7473 203d 2065 7473 5f69 6e69     ets = ets_ini
+0000adb0: 7420 2a20 6574 730a 0a20 2020 2020 2020  t * ets..       
+0000adc0: 2069 6620 6574 735f 656e 6420 6973 206e   if ets_end is n
+0000add0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0000ade0: 2020 2020 2065 7473 203d 2065 7473 202a       ets = ets *
+0000adf0: 2065 7473 5f65 6e64 0a0a 2020 2020 2020   ets_end..      
+0000ae00: 2020 7265 7475 726e 2065 7473 0a0a 2020    return ets..  
+0000ae10: 2020 6465 6620 636f 7079 2873 656c 6629    def copy(self)
+0000ae20: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0000ae30: 2064 6565 7063 6f70 7928 7365 6c66 290a   deepcopy(self).
+0000ae40: 0a20 2020 2064 6566 205f 5f64 6565 7063  .    def __deepc
+0000ae50: 6f70 795f 5f28 7365 6c66 2c20 6d65 6d6f  opy__(self, memo
+0000ae60: 293a 0a20 2020 2020 2020 206c 696e 6b73  ):.        links
+0000ae70: 203d 205b 5d0a 0a20 2020 2020 2020 2023   = []..        #
+0000ae80: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0000ae90: 656c 662c 2072 7462 2e44 4852 6f62 6f74  elf, rtb.DHRobot
+0000aea0: 293a 0a20 2020 2020 2020 2023 2020 2020  ):.        #    
+0000aeb0: 2063 6c73 203d 2072 7462 2e44 4852 6f62   cls = rtb.DHRob
+0000aec0: 6f74 0a20 2020 2020 2020 2069 6620 6973  ot.        if is
+0000aed0: 696e 7374 616e 6365 2873 656c 662c 2072  instance(self, r
+0000aee0: 7462 2e52 6f62 6f74 3229 3a0a 2020 2020  tb.Robot2):.    
+0000aef0: 2020 2020 2020 2020 636c 7320 3d20 7274          cls = rt
+0000af00: 622e 526f 626f 7432 0a20 2020 2020 2020  b.Robot2.       
+0000af10: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000af20: 2020 2063 6c73 203d 2072 7462 2e52 6f62     cls = rtb.Rob
+0000af30: 6f74 0a0a 2020 2020 2020 2020 666f 7220  ot..        for 
+0000af40: 6c69 6e6b 2069 6e20 7365 6c66 2e6c 696e  link in self.lin
+0000af50: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
+0000af60: 6c69 6e6b 732e 6170 7065 6e64 2864 6565  links.append(dee
+0000af70: 7063 6f70 7928 6c69 6e6b 2929 0a0a 2020  pcopy(link))..  
+0000af80: 2020 2020 2020 6e61 6d65 203d 2064 6565        name = dee
+0000af90: 7063 6f70 7928 7365 6c66 2e6e 616d 6529  pcopy(self.name)
+0000afa0: 0a20 2020 2020 2020 206d 616e 7566 6163  .        manufac
+0000afb0: 7475 7265 7220 3d20 6465 6570 636f 7079  turer = deepcopy
+0000afc0: 2873 656c 662e 6d61 6e75 6661 6374 7572  (self.manufactur
+0000afd0: 6572 290a 2020 2020 2020 2020 636f 6d6d  er).        comm
+0000afe0: 656e 7420 3d20 6465 6570 636f 7079 2873  ent = deepcopy(s
+0000aff0: 656c 662e 636f 6d6d 656e 7429 0a20 2020  elf.comment).   
+0000b000: 2020 2020 2062 6173 6520 3d20 6465 6570       base = deep
+0000b010: 636f 7079 2873 656c 662e 6261 7365 290a  copy(self.base).
+0000b020: 2020 2020 2020 2020 746f 6f6c 203d 2064          tool = d
+0000b030: 6565 7063 6f70 7928 7365 6c66 2e74 6f6f  eepcopy(self.too
+0000b040: 6c29 0a20 2020 2020 2020 2067 7261 7669  l).        gravi
+0000b050: 7479 203d 2064 6565 7063 6f70 7928 7365  ty = deepcopy(se
+0000b060: 6c66 2e67 7261 7669 7479 290a 2020 2020  lf.gravity).    
+0000b070: 2020 2020 6b65 7977 6f72 6473 203d 2064      keywords = d
+0000b080: 6565 7063 6f70 7928 7365 6c66 2e6b 6579  eepcopy(self.key
+0000b090: 776f 7264 7329 0a20 2020 2020 2020 2073  words).        s
+0000b0a0: 796d 626f 6c69 6320 3d20 6465 6570 636f  ymbolic = deepco
+0000b0b0: 7079 2873 656c 662e 7379 6d62 6f6c 6963  py(self.symbolic
+0000b0c0: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+0000b0d0: 7320 3d20 6465 6570 636f 7079 2873 656c  s = deepcopy(sel
+0000b0e0: 662e 636f 6e66 6967 7329 0a0a 2020 2020  f.configs)..    
+0000b0f0: 2020 2020 7265 7375 6c74 203d 2063 6c73      result = cls
+0000b100: 280a 2020 2020 2020 2020 2020 2020 6c69  (.            li
+0000b110: 6e6b 732c 0a20 2020 2020 2020 2020 2020  nks,.           
+0000b120: 206e 616d 653d 6e61 6d65 2c0a 2020 2020   name=name,.    
+0000b130: 2020 2020 2020 2020 6d61 6e75 6661 6374          manufact
+0000b140: 7572 6572 3d6d 616e 7566 6163 7475 7265  urer=manufacture
+0000b150: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
+0000b160: 6f6d 6d65 6e74 3d63 6f6d 6d65 6e74 2c0a  omment=comment,.
+0000b170: 2020 2020 2020 2020 2020 2020 6261 7365              base
+0000b180: 3d62 6173 652c 2020 2320 7479 7065 3a20  =base,  # type: 
+0000b190: 6967 6e6f 7265 0a20 2020 2020 2020 2020  ignore.         
+0000b1a0: 2020 2074 6f6f 6c3d 746f 6f6c 2c0a 2020     tool=tool,.  
+0000b1b0: 2020 2020 2020 2020 2020 6772 6176 6974            gravit
+0000b1c0: 793d 6772 6176 6974 792c 0a20 2020 2020  y=gravity,.     
+0000b1d0: 2020 2020 2020 206b 6579 776f 7264 733d         keywords=
+0000b1e0: 6b65 7977 6f72 6473 2c0a 2020 2020 2020  keywords,.      
+0000b1f0: 2020 2020 2020 7379 6d62 6f6c 6963 3d73        symbolic=s
+0000b200: 796d 626f 6c69 632c 0a20 2020 2020 2020  ymbolic,.       
+0000b210: 2020 2020 2063 6f6e 6669 6773 3d63 6f6e       configs=con
+0000b220: 6669 6773 2c0a 2020 2020 2020 2020 290a  figs,.        ).
+0000b230: 0a20 2020 2020 2020 2023 2069 6620 6120  .        # if a 
+0000b240: 636f 6e66 6967 7572 6174 696f 6e20 7761  configuration wa
+0000b250: 7320 616e 2061 7474 7269 6275 7465 206f  s an attribute o
+0000b260: 6620 6f72 6967 696e 616c 2072 6f62 6f74  f original robot
+0000b270: 2c20 6d61 6b65 2069 7420 616e 0a20 2020  , make it an.   
+0000b280: 2020 2020 2023 2061 7474 7269 6275 7465       # attribute
+0000b290: 206f 6620 7468 6520 6465 6570 2063 6f70   of the deep cop
+0000b2a0: 790a 2020 2020 2020 2020 666f 7220 636f  y.        for co
+0000b2b0: 6e66 6967 2069 6e20 636f 6e66 6967 733a  nfig in configs:
+0000b2c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000b2d0: 6861 7361 7474 7228 7365 6c66 2c20 636f  hasattr(self, co
+0000b2e0: 6e66 6967 293a 0a20 2020 2020 2020 2020  nfig):.         
+0000b2f0: 2020 2020 2020 2073 6574 6174 7472 2872         setattr(r
+0000b300: 6573 756c 742c 2063 6f6e 6669 672c 2063  esult, config, c
+0000b310: 6f6e 6669 6773 5b63 6f6e 6669 675d 290a  onfigs[config]).
+0000b320: 0a20 2020 2020 2020 206d 656d 6f5b 6964  .        memo[id
+0000b330: 2873 656c 6629 5d20 3d20 7265 7375 6c74  (self)] = result
+0000b340: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000b350: 7265 7375 6c74 0a0a 2020 2020 2320 2d2d  result..    # --
+0000b360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b3a0: 2d2d 2d20 230a 0a20 2020 2064 6566 2074  --- #..    def t
+0000b3b0: 6f64 6567 7265 6573 2873 656c 662c 2071  odegrees(self, q
+0000b3c0: 2920 2d3e 204e 4441 7272 6179 3a0a 2020  ) -> NDArray:.  
+0000b3d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000b3e0: 2020 436f 6e76 6572 7420 6a6f 696e 7420    Convert joint 
+0000b3f0: 616e 676c 6573 2074 6f20 6465 6772 6565  angles to degree
+0000b400: 730a 0a20 2020 2020 2020 2050 6172 616d  s..        Param
+0000b410: 6574 6572 730a 2020 2020 2020 2020 2d2d  eters.        --
+0000b420: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+0000b430: 2071 0a20 2020 2020 2020 2020 2020 2054   q.            T
+0000b440: 6865 206a 6f69 6e74 2063 6f6e 6669 6775  he joint configu
+0000b450: 7261 7469 6f6e 206f 6620 7468 6520 726f  ration of the ro
+0000b460: 626f 740a 0a20 2020 2020 2020 2052 6574  bot..        Ret
+0000b470: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
+0000b480: 2d2d 2d2d 0a20 2020 2020 2020 2071 0a20  ----.        q. 
+0000b490: 2020 2020 2020 2020 2020 2061 2076 6563             a vec
+0000b4a0: 746f 7220 6f66 206a 6f69 6e74 2063 6f6f  tor of joint coo
+0000b4b0: 7264 696e 6174 6573 2069 6e20 6465 6772  rdinates in degr
+0000b4c0: 6565 7320 616e 6420 6d65 7472 6573 0a0a  ees and metres..
+0000b4d0: 2020 2020 2020 2020 6060 726f 626f 742e          ``robot.
+0000b4e0: 746f 6465 6772 6565 7328 7129 6060 2063  todegrees(q)`` c
+0000b4f0: 6f6e 7665 7274 7320 6a6f 696e 7420 636f  onverts joint co
+0000b500: 6f72 6469 6e61 7465 7320 6060 7160 6020  ordinates ``q`` 
+0000b510: 746f 2064 6567 7265 6573 0a20 2020 2020  to degrees.     
+0000b520: 2020 2074 616b 696e 6720 696e 746f 2061     taking into a
+0000b530: 6363 6f75 6e74 2077 6865 7468 6572 2065  ccount whether e
+0000b540: 6c65 6d65 6e74 7320 6f66 2060 6071 6060  lements of ``q``
+0000b550: 2063 6f72 7265 7370 6f6e 6420 746f 2072   correspond to r
+0000b560: 6576 6f6c 7574 650a 2020 2020 2020 2020  evolute.        
+0000b570: 6f72 2070 7269 736d 6174 6963 206a 6f69  or prismatic joi
+0000b580: 6e74 732c 2069 652e 2070 7269 736d 6174  nts, ie. prismat
+0000b590: 6963 206a 6f69 6e74 2076 616c 7565 7320  ic joint values 
+0000b5a0: 6172 6520 6e6f 7420 636f 6e76 6572 7465  are not converte
+0000b5b0: 642e 0a0a 2020 2020 2020 2020 4966 2060  d...        If `
+0000b5c0: 6071 6060 2069 7320 6120 6d61 7472 6978  `q`` is a matrix
+0000b5d0: 2c20 7769 7468 206f 6e65 2063 6f6c 756d  , with one colum
+0000b5e0: 6e20 7065 7220 6a6f 696e 742c 2074 6865  n per joint, the
+0000b5f0: 2063 6f6e 7665 7273 696f 6e20 6973 0a20   conversion is. 
+0000b600: 2020 2020 2020 2070 6572 666f 726d 6564         performed
+0000b610: 2063 6f6c 756d 6e77 6973 652e 0a0a 2020   columnwise...  
+0000b620: 2020 2020 2020 4578 616d 706c 6573 0a20        Examples. 
+0000b630: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+0000b640: 2020 2020 2020 2020 2e2e 2072 756e 626c          .. runbl
+0000b650: 6f63 6b3a 3a20 7079 636f 6e0a 2020 2020  ock:: pycon.    
+0000b660: 2020 2020 3e3e 3e20 696d 706f 7274 2072      >>> import r
+0000b670: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2061  oboticstoolbox a
+0000b680: 7320 7274 620a 2020 2020 2020 2020 3e3e  s rtb.        >>
+0000b690: 3e20 6672 6f6d 206d 6174 6820 696d 706f  > from math impo
+0000b6a0: 7274 2070 690a 2020 2020 2020 2020 3e3e  rt pi.        >>
+0000b6b0: 3e20 7374 616e 666f 7264 203d 2072 7462  > stanford = rtb
+0000b6c0: 2e6d 6f64 656c 732e 4448 2e53 7461 6e66  .models.DH.Stanf
+0000b6d0: 6f72 6428 290a 2020 2020 2020 2020 3e3e  ord().        >>
+0000b6e0: 3e20 7374 616e 666f 7264 2e74 6f64 6567  > stanford.todeg
+0000b6f0: 7265 6573 285b 7069 2f34 2c20 7069 2f38  rees([pi/4, pi/8
+0000b700: 2c20 322c 202d 7069 2f34 2c20 7069 2f36  , 2, -pi/4, pi/6
+0000b710: 2c20 7069 2f33 5d29 0a0a 2020 2020 2020  , pi/3])..      
+0000b720: 2020 2222 220a 0a20 2020 2020 2020 2071    """..        q
+0000b730: 203d 2067 6574 6d61 7472 6978 2871 2c20   = getmatrix(q, 
+0000b740: 284e 6f6e 652c 2073 656c 662e 6e29 290a  (None, self.n)).
+0000b750: 0a20 2020 2020 2020 2066 6f72 206a 2c20  .        for j, 
+0000b760: 7265 766f 6c75 7465 2069 6e20 656e 756d  revolute in enum
+0000b770: 6572 6174 6528 7365 6c66 2e72 6576 6f6c  erate(self.revol
+0000b780: 7574 656a 6f69 6e74 7329 3a0a 2020 2020  utejoints):.    
+0000b790: 2020 2020 2020 2020 6966 2072 6576 6f6c          if revol
+0000b7a0: 7574 653a 0a20 2020 2020 2020 2020 2020  ute:.           
+0000b7b0: 2020 2020 2071 5b3a 2c20 6a5d 202a 3d20       q[:, j] *= 
+0000b7c0: 3138 302e 3020 2f20 6e70 2e70 690a 0a20  180.0 / np.pi.. 
+0000b7d0: 2020 2020 2020 2069 6620 712e 7368 6170         if q.shap
+0000b7e0: 655b 305d 203d 3d20 313a 0a20 2020 2020  e[0] == 1:.     
+0000b7f0: 2020 2020 2020 2072 6574 7572 6e20 715b         return q[
+0000b800: 305d 0a20 2020 2020 2020 2065 6c73 653a  0].        else:
+0000b810: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000b820: 7572 6e20 710a 0a20 2020 2064 6566 2074  urn q..    def t
+0000b830: 6f72 6164 6961 6e73 2873 656c 662c 2071  oradians(self, q
+0000b840: 2920 2d3e 204e 4441 7272 6179 3a0a 2020  ) -> NDArray:.  
+0000b850: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000b860: 2020 436f 6e76 6572 7420 6a6f 696e 7420    Convert joint 
+0000b870: 616e 676c 6573 2074 6f20 7261 6469 616e  angles to radian
+0000b880: 730a 0a20 2020 2020 2020 2060 6072 6f62  s..        ``rob
+0000b890: 6f74 2e74 6f72 6164 6961 6e73 2871 2960  ot.toradians(q)`
+0000b8a0: 6020 636f 6e76 6572 7473 206a 6f69 6e74  ` converts joint
+0000b8b0: 2063 6f6f 7264 696e 6174 6573 2060 6071   coordinates ``q
+0000b8c0: 6060 2074 6f20 7261 6469 616e 730a 2020  `` to radians.  
+0000b8d0: 2020 2020 2020 7461 6b69 6e67 2069 6e74        taking int
+0000b8e0: 6f20 6163 636f 756e 7420 7768 6574 6865  o account whethe
+0000b8f0: 7220 656c 656d 656e 7473 206f 6620 6060  r elements of ``
+0000b900: 7160 6020 636f 7272 6573 706f 6e64 2074  q`` correspond t
+0000b910: 6f20 7265 766f 6c75 7465 0a20 2020 2020  o revolute.     
+0000b920: 2020 206f 7220 7072 6973 6d61 7469 6320     or prismatic 
+0000b930: 6a6f 696e 7473 2c20 6965 2e20 7072 6973  joints, ie. pris
+0000b940: 6d61 7469 6320 6a6f 696e 7420 7661 6c75  matic joint valu
+0000b950: 6573 2061 7265 206e 6f74 2063 6f6e 7665  es are not conve
+0000b960: 7274 6564 2e0a 0a20 2020 2020 2020 2049  rted...        I
+0000b970: 6620 6060 7160 6020 6973 2061 206d 6174  f ``q`` is a mat
+0000b980: 7269 782c 2077 6974 6820 6f6e 6520 636f  rix, with one co
+0000b990: 6c75 6d6e 2070 6572 206a 6f69 6e74 2c20  lumn per joint, 
+0000b9a0: 7468 6520 636f 6e76 6572 7369 6f6e 2069  the conversion i
+0000b9b0: 730a 2020 2020 2020 2020 7065 7266 6f72  s.        perfor
+0000b9c0: 6d65 6420 636f 6c75 6d6e 7769 7365 2e0a  med columnwise..
+0000b9d0: 0a20 2020 2020 2020 2050 6172 616d 6574  .        Paramet
+0000b9e0: 6572 730a 2020 2020 2020 2020 2d2d 2d2d  ers.        ----
+0000b9f0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2071  ------.        q
+0000ba00: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0000ba10: 206a 6f69 6e74 2063 6f6e 6669 6775 7261   joint configura
+0000ba20: 7469 6f6e 206f 6620 7468 6520 726f 626f  tion of the robo
+0000ba30: 740a 0a20 2020 2020 2020 2052 6574 7572  t..        Retur
+0000ba40: 6e73 0a20 2020 2020 2020 202d 2d2d 2d2d  ns.        -----
+0000ba50: 2d2d 0a20 2020 2020 2020 2071 0a20 2020  --.        q.   
+0000ba60: 2020 2020 2020 2020 2061 2076 6563 746f           a vecto
+0000ba70: 7220 6f66 206a 6f69 6e74 2063 6f6f 7264  r of joint coord
+0000ba80: 696e 6174 6573 2069 6e20 7261 6469 616e  inates in radian
+0000ba90: 7320 616e 6420 6d65 7472 6573 0a0a 2020  s and metres..  
+0000baa0: 2020 2020 2020 4578 616d 706c 6573 0a20        Examples. 
+0000bab0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+0000bac0: 2020 2020 2020 2020 2e2e 2072 756e 626c          .. runbl
+0000bad0: 6f63 6b3a 3a20 7079 636f 6e0a 2020 2020  ock:: pycon.    
+0000bae0: 2020 2020 3e3e 3e20 696d 706f 7274 2072      >>> import r
+0000baf0: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2061  oboticstoolbox a
+0000bb00: 7320 7274 620a 2020 2020 2020 2020 3e3e  s rtb.        >>
+0000bb10: 3e20 7374 616e 666f 7264 203d 2072 7462  > stanford = rtb
+0000bb20: 2e6d 6f64 656c 732e 4448 2e53 7461 6e66  .models.DH.Stanf
+0000bb30: 6f72 6428 290a 2020 2020 2020 2020 3e3e  ord().        >>
+0000bb40: 3e20 7374 616e 666f 7264 2e74 6f72 6164  > stanford.torad
+0000bb50: 6961 6e73 285b 3130 2c20 3230 2c20 322c  ians([10, 20, 2,
+0000bb60: 2033 302c 2034 302c 2035 305d 290a 0a20   30, 40, 50]).. 
+0000bb70: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+0000bb80: 2020 2020 7120 3d20 6765 746d 6174 7269      q = getmatri
+0000bb90: 7828 712c 2028 4e6f 6e65 2c20 7365 6c66  x(q, (None, self
+0000bba0: 2e6e 2929 0a0a 2020 2020 2020 2020 666f  .n))..        fo
+0000bbb0: 7220 6a2c 2072 6576 6f6c 7574 6520 696e  r j, revolute in
+0000bbc0: 2065 6e75 6d65 7261 7465 2873 656c 662e   enumerate(self.
+0000bbd0: 7265 766f 6c75 7465 6a6f 696e 7473 293a  revolutejoints):
+0000bbe0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000bbf0: 7265 766f 6c75 7465 3a0a 2020 2020 2020  revolute:.      
+0000bc00: 2020 2020 2020 2020 2020 715b 3a2c 206a            q[:, j
+0000bc10: 5d20 2a3d 206e 702e 7069 202f 2031 3830  ] *= np.pi / 180
+0000bc20: 2e30 0a0a 2020 2020 2020 2020 6966 2071  .0..        if q
+0000bc30: 2e73 6861 7065 5b30 5d20 3d3d 2031 3a0a  .shape[0] == 1:.
+0000bc40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000bc50: 726e 2071 5b30 5d0a 2020 2020 2020 2020  rn q[0].        
+0000bc60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000bc70: 2020 7265 7475 726e 2071 0a0a 2020 2020    return q..    
+0000bc80: 6465 6620 6973 7265 766f 6c75 7465 2873  def isrevolute(s
+0000bc90: 656c 662c 206a 2920 2d3e 2062 6f6f 6c3a  elf, j) -> bool:
+0000bca0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000bcb0: 2020 2020 2043 6865 636b 2069 6620 6a6f       Check if jo
+0000bcc0: 696e 7420 6973 2072 6576 6f6c 7574 650a  int is revolute.
+0000bcd0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0000bce0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000bcf0: 0a20 2020 2020 2020 206a 0a20 2020 2020  .        j.     
+0000bd00: 2020 2020 2020 2054 7275 6520 6966 2072         True if r
+0000bd10: 6576 6f6c 7574 650a 0a20 2020 2020 2020  evolute..       
+0000bd20: 2045 7861 6d70 6c65 730a 2020 2020 2020   Examples.      
+0000bd30: 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020    --------.     
+0000bd40: 2020 202e 2e20 7275 6e62 6c6f 636b 3a3a     .. runblock::
+0000bd50: 2070 7963 6f6e 0a20 2020 2020 2020 203e   pycon.        >
+0000bd60: 3e3e 2069 6d70 6f72 7420 726f 626f 7469  >> import roboti
+0000bd70: 6373 746f 6f6c 626f 7820 6173 2072 7462  cstoolbox as rtb
+0000bd80: 0a20 2020 2020 2020 203e 3e3e 2070 756d  .        >>> pum
+0000bd90: 6120 3d20 7274 622e 6d6f 6465 6c73 2e44  a = rtb.models.D
+0000bda0: 482e 5075 6d61 3536 3028 290a 2020 2020  H.Puma560().    
+0000bdb0: 2020 2020 3e3e 3e20 7075 6d61 2e72 6576      >>> puma.rev
+0000bdc0: 6f6c 7574 656a 6f69 6e74 7328 290a 2020  olutejoints().  
+0000bdd0: 2020 2020 2020 3e3e 3e20 7374 616e 666f        >>> stanfo
+0000bde0: 7264 203d 2072 7462 2e6d 6f64 656c 732e  rd = rtb.models.
+0000bdf0: 4448 2e53 7461 6e66 6f72 6428 290a 2020  DH.Stanford().  
+0000be00: 2020 2020 2020 3e3e 3e20 7374 616e 666f        >>> stanfo
+0000be10: 7264 2e69 7372 6576 6f6c 7574 6528 3129  rd.isrevolute(1)
+0000be20: 0a0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0000be30: 736f 0a20 2020 2020 2020 202d 2d2d 2d2d  so.        -----
+0000be40: 2d2d 2d0a 2020 2020 2020 2020 3a66 756e  ---.        :fun
+0000be50: 633a 604c 696e 6b2e 6973 7265 766f 6c75  c:`Link.isrevolu
+0000be60: 7465 600a 2020 2020 2020 2020 3a66 756e  te`.        :fun
+0000be70: 633a 6072 6576 6f6c 7574 656a 6f69 6e74  c:`revolutejoint
+0000be80: 7360 0a0a 2020 2020 2020 2020 2222 220a  s`..        """.
+0000be90: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000bea0: 656c 662e 7265 766f 6c75 7465 6a6f 696e  elf.revolutejoin
+0000beb0: 7473 5b6a 5d0a 0a20 2020 2064 6566 2069  ts[j]..    def i
+0000bec0: 7370 7269 736d 6174 6963 2873 656c 662c  sprismatic(self,
+0000bed0: 206a 2920 2d3e 2062 6f6f 6c3a 0a20 2020   j) -> bool:.   
+0000bee0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000bef0: 2043 6865 636b 2069 6620 6a6f 696e 7420   Check if joint 
+0000bf00: 6973 2070 7269 736d 6174 6963 0a0a 2020  is prismatic..  
+0000bf10: 2020 2020 2020 5265 7475 726e 730a 2020        Returns.  
+0000bf20: 2020 2020 2020 2d2d 2d2d 2d2d 2d0a 2020        -------.  
+0000bf30: 2020 2020 2020 6a0a 2020 2020 2020 2020        j.        
+0000bf40: 2020 2020 5472 7565 2069 6620 7072 6973      True if pris
+0000bf50: 6d61 7469 630a 0a20 2020 2020 2020 2045  matic..        E
+0000bf60: 7861 6d70 6c65 730a 2020 2020 2020 2020  xamples.        
+0000bf70: 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020 2020  --------.       
+0000bf80: 202e 2e20 7275 6e62 6c6f 636b 3a3a 2070   .. runblock:: p
+0000bf90: 7963 6f6e 0a20 2020 2020 2020 203e 3e3e  ycon.        >>>
+0000bfa0: 2069 6d70 6f72 7420 726f 626f 7469 6373   import robotics
+0000bfb0: 746f 6f6c 626f 7820 6173 2072 7462 0a20  toolbox as rtb. 
+0000bfc0: 2020 2020 2020 203e 3e3e 2070 756d 6120         >>> puma 
+0000bfd0: 3d20 7274 622e 6d6f 6465 6c73 2e44 482e  = rtb.models.DH.
+0000bfe0: 5075 6d61 3536 3028 290a 2020 2020 2020  Puma560().      
+0000bff0: 2020 3e3e 3e20 7075 6d61 2e70 7269 736d    >>> puma.prism
+0000c000: 6174 6963 6a6f 696e 7473 2829 0a20 2020  aticjoints().   
+0000c010: 2020 2020 203e 3e3e 2073 7461 6e66 6f72       >>> stanfor
+0000c020: 6420 3d20 7274 622e 6d6f 6465 6c73 2e44  d = rtb.models.D
+0000c030: 482e 5374 616e 666f 7264 2829 0a20 2020  H.Stanford().   
+0000c040: 2020 2020 203e 3e3e 2073 7461 6e66 6f72       >>> stanfor
+0000c050: 642e 6973 7072 6973 6d61 7469 6328 3129  d.isprismatic(1)
+0000c060: 0a0a 2020 2020 2020 2020 5365 6520 416c  ..        See Al
+0000c070: 736f 0a20 2020 2020 2020 202d 2d2d 2d2d  so.        -----
+0000c080: 2d2d 2d0a 2020 2020 2020 2020 3a66 756e  ---.        :fun
+0000c090: 633a 604c 696e 6b2e 6973 7072 6973 6d61  c:`Link.isprisma
+0000c0a0: 7469 6360 0a20 2020 2020 2020 203a 6675  tic`.        :fu
+0000c0b0: 6e63 3a60 7072 6973 6d61 7469 636a 6f69  nc:`prismaticjoi
+0000c0c0: 6e74 7360 0a0a 2020 2020 2020 2020 2222  nts`..        ""
+0000c0d0: 220a 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+0000c0e0: 6e20 7365 6c66 2e70 7269 736d 6174 6963  n self.prismatic
+0000c0f0: 6a6f 696e 7473 5b6a 5d0a 0a20 2020 2023  joints[j]..    #
+0000c100: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 0000c110: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 0000c130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000c150: 2d2d 2023 0a0a 2020 2020 6465 6620 6765  -- #..    def ge
-0000c160: 745f 7061 7468 2873 656c 662c 2065 6e64  t_path(self, end
-0000c170: 3d4e 6f6e 652c 2073 7461 7274 3d4e 6f6e  =None, start=Non
-0000c180: 6529 3a0a 2020 2020 2020 2020 2222 220a  e):.        """.
-0000c190: 2020 2020 2020 2020 4669 6e64 2061 2070          Find a p
-0000c1a0: 6174 6820 6672 6f6d 2073 7461 7274 2074  ath from start t
-0000c1b0: 6f20 656e 642e 2054 6865 2065 6e64 206d  o end. The end m
-0000c1c0: 7573 7420 636f 6d65 2061 6674 6572 0a20  ust come after. 
-0000c1d0: 2020 2020 2020 2074 6865 2073 7461 7274         the start
-0000c1e0: 2028 6965 2065 6e64 206d 7573 7420 6265   (ie end must be
-0000c1f0: 2066 7572 7468 6572 2061 7761 7920 6672   further away fr
-0000c200: 6f6d 2074 6865 2062 6173 6520 6c69 6e6b  om the base link
-0000c210: 0a20 2020 2020 2020 206f 6620 7468 6520  .        of the 
-0000c220: 726f 626f 7420 7468 616e 2073 7461 7274  robot than start
-0000c230: 2920 696e 2074 6865 206b 696e 656d 6174  ) in the kinemat
-0000c240: 6963 2063 6861 696e 2061 6e64 2062 6f74  ic chain and bot
-0000c250: 6820 6c69 6e6b 730a 2020 2020 2020 2020  h links.        
-0000c260: 6d75 7374 2062 6520 6120 7061 7274 206f  must be a part o
-0000c270: 6620 7468 6520 7361 6d65 2062 7261 6e63  f the same branc
-0000c280: 6820 7769 7468 696e 2074 6865 2072 6f62  h within the rob
-0000c290: 6f74 2073 7472 7563 7475 7265 2e20 5468  ot structure. Th
-0000c2a0: 6973 0a20 2020 2020 2020 206d 6574 686f  is.        metho
-0000c2b0: 6420 6973 2061 2077 6f72 6b20 696e 2070  d is a work in p
-0000c2c0: 726f 6772 6573 7320 7768 696c 6520 616e  rogress while an
-0000c2d0: 2061 7070 726f 6163 6820 7768 6963 6820   approach which 
-0000c2e0: 6765 6e65 7261 6c69 7365 730a 2020 2020  generalises.    
-0000c2f0: 2020 2020 746f 2061 6c6c 2061 7070 6c69      to all appli
-0000c300: 6361 7469 6f6e 7320 6973 2064 6573 6967  cations is desig
-0000c310: 6e65 642e 0a20 2020 2020 2020 203a 7061  ned..        :pa
-0000c320: 7261 6d20 656e 643a 2065 6e64 2d65 6666  ram end: end-eff
-0000c330: 6563 746f 7220 6f72 2067 7269 7070 6572  ector or gripper
-0000c340: 2074 6f20 636f 6d70 7574 6520 666f 7277   to compute forw
-0000c350: 6172 6420 6b69 6e65 6d61 7469 6373 2074  ard kinematics t
-0000c360: 6f0a 2020 2020 2020 2020 3a74 7970 6520  o.        :type 
-0000c370: 656e 643a 2073 7472 206f 7220 4c69 6e6b  end: str or Link
-0000c380: 206f 7220 4772 6970 7065 722c 206f 7074   or Gripper, opt
-0000c390: 696f 6e61 6c0a 2020 2020 2020 2020 3a70  ional.        :p
-0000c3a0: 6172 616d 2073 7461 7274 3a20 6e61 6d65  aram start: name
-0000c3b0: 206f 7220 7265 6665 7265 6e63 6520 746f   or reference to
-0000c3c0: 2061 2062 6173 6520 6c69 6e6b 2c20 6465   a base link, de
-0000c3d0: 6661 756c 7473 2074 6f20 4e6f 6e65 0a20  faults to None. 
-0000c3e0: 2020 2020 2020 203a 7479 7065 2073 7461         :type sta
-0000c3f0: 7274 3a20 7374 7220 6f72 204c 696e 6b2c  rt: str or Link,
-0000c400: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
-0000c410: 2020 3a72 6169 7365 7320 5661 6c75 6545    :raises ValueE
-0000c420: 7272 6f72 3a20 6c69 6e6b 206e 6f74 206b  rror: link not k
-0000c430: 6e6f 776e 206f 7220 616d 6269 6775 6f75  nown or ambiguou
-0000c440: 730a 2020 2020 2020 2020 3a72 6574 7572  s.        :retur
-0000c450: 6e3a 2074 6865 2070 6174 6820 6672 6f6d  n: the path from
-0000c460: 2073 7461 7274 2074 6f20 656e 640a 2020   start to end.  
-0000c470: 2020 2020 2020 3a72 7479 7065 3a20 6c69        :rtype: li
-0000c480: 7374 206f 6620 4c69 6e6b 0a20 2020 2020  st of Link.     
-0000c490: 2020 2022 2222 0a20 2020 2020 2020 2070     """.        p
-0000c4a0: 6174 6820 3d20 5b5d 0a20 2020 2020 2020  ath = [].       
-0000c4b0: 206e 203d 2030 0a0a 2020 2020 2020 2020   n = 0..        
-0000c4c0: 656e 642c 2073 7461 7274 2c20 746f 6f6c  end, start, tool
-0000c4d0: 203d 2073 656c 662e 5f67 6574 5f6c 696d   = self._get_lim
-0000c4e0: 6974 5f6c 696e 6b73 2865 6e64 3d65 6e64  it_links(end=end
-0000c4f0: 2c20 7374 6172 743d 7374 6172 7429 0a0a  , start=start)..
-0000c500: 2020 2020 2020 2020 2320 5468 6973 2069          # This i
-0000c510: 7320 7761 7920 6661 7374 6572 2074 6861  s way faster tha
-0000c520: 6e20 646f 696e 6720 6966 2078 2069 6e20  n doing if x in 
-0000c530: 7920 6d65 7468 6f64 0a20 2020 2020 2020  y method.       
-0000c540: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0000c550: 2020 7265 7475 726e 2073 656c 662e 5f70    return self._p
-0000c560: 6174 685f 6361 6368 655b 7374 6172 742e  ath_cache[start.
-0000c570: 6e61 6d65 5d5b 656e 642e 6e61 6d65 5d0a  name][end.name].
-0000c580: 2020 2020 2020 2020 6578 6365 7074 204b          except K
-0000c590: 6579 4572 726f 723a 0a20 2020 2020 2020  eyError:.       
-0000c5a0: 2020 2020 2070 6173 730a 0a20 2020 2020       pass..     
-0000c5b0: 2020 2069 6620 7374 6172 742e 6e61 6d65     if start.name
-0000c5c0: 206e 6f74 2069 6e20 7365 6c66 2e5f 7061   not in self._pa
-0000c5d0: 7468 5f63 6163 6865 3a0a 2020 2020 2020  th_cache:.      
-0000c5e0: 2020 2020 2020 7365 6c66 2e5f 7061 7468        self._path
-0000c5f0: 5f63 6163 6865 5b73 7461 7274 2e6e 616d  _cache[start.nam
-0000c600: 655d 203d 207b 7d0a 2020 2020 2020 2020  e] = {}.        
-0000c610: 2020 2020 2320 7365 6c66 2e5f 7061 7468      # self._path
-0000c620: 5f63 6163 6865 5f66 6b6e 6d5b 7374 6172  _cache_fknm[star
-0000c630: 742e 6e61 6d65 5d20 3d20 7b7d 0a0a 2020  t.name] = {}..  
-0000c640: 2020 2020 2020 6c69 6e6b 203d 2065 6e64        link = end
-0000c650: 0a0a 2020 2020 2020 2020 7061 7468 2e61  ..        path.a
-0000c660: 7070 656e 6428 6c69 6e6b 290a 2020 2020  ppend(link).    
-0000c670: 2020 2020 6966 206c 696e 6b2e 6973 6a6f      if link.isjo
-0000c680: 696e 743a 0a20 2020 2020 2020 2020 2020  int:.           
-0000c690: 206e 202b 3d20 310a 0a20 2020 2020 2020   n += 1..       
-0000c6a0: 2077 6869 6c65 206c 696e 6b20 213d 2073   while link != s
-0000c6b0: 7461 7274 3a0a 2020 2020 2020 2020 2020  tart:.          
-0000c6c0: 2020 6c69 6e6b 203d 206c 696e 6b2e 7061    link = link.pa
-0000c6d0: 7265 6e74 0a20 2020 2020 2020 2020 2020  rent.           
-0000c6e0: 2069 6620 6c69 6e6b 2069 7320 4e6f 6e65   if link is None
-0000c6f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000c700: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0000c710: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-0000c720: 2020 2020 2020 2020 6622 6361 6e6e 6f74          f"cannot
-0000c730: 2066 696e 6420 7061 7468 2066 726f 6d20   find path from 
-0000c740: 7b73 7461 7274 2e6e 616d 657d 2074 6f22  {start.name} to"
-0000c750: 2066 2220 7b65 6e64 2e6e 616d 657d 220a   f" {end.name}".
-0000c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c770: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
-0000c780: 7468 2e61 7070 656e 6428 6c69 6e6b 290a  th.append(link).
-0000c790: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0000c7a0: 696e 6b2e 6973 6a6f 696e 743a 0a20 2020  ink.isjoint:.   
-0000c7b0: 2020 2020 2020 2020 2020 2020 206e 202b               n +
-0000c7c0: 3d20 310a 0a20 2020 2020 2020 2070 6174  = 1..        pat
-0000c7d0: 682e 7265 7665 7273 6528 290a 2020 2020  h.reverse().    
-0000c7e0: 2020 2020 2320 7061 7468 5f66 6b6e 6d20      # path_fknm 
-0000c7f0: 3d20 5b78 2e5f 666b 6e6d 2066 6f72 2078  = [x._fknm for x
-0000c800: 2069 6e20 7061 7468 5d0a 0a20 2020 2020   in path]..     
-0000c810: 2020 2069 6620 746f 6f6c 2069 7320 4e6f     if tool is No
-0000c820: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0000c830: 746f 6f6c 203d 2053 4533 2829 0a0a 2020  tool = SE3()..  
-0000c840: 2020 2020 2020 7365 6c66 2e5f 7061 7468        self._path
-0000c850: 5f63 6163 6865 5b73 7461 7274 2e6e 616d  _cache[start.nam
-0000c860: 655d 5b65 6e64 2e6e 616d 655d 203d 2028  e][end.name] = (
-0000c870: 7061 7468 2c20 6e2c 2074 6f6f 6c29 0a20  path, n, tool). 
-0000c880: 2020 2020 2020 2023 2073 656c 662e 5f70         # self._p
-0000c890: 6174 685f 6361 6368 655f 666b 6e6d 5b73  ath_cache_fknm[s
-0000c8a0: 7461 7274 2e6e 616d 655d 5b65 6e64 2e6e  tart.name][end.n
-0000c8b0: 616d 655d 203d 2028 7061 7468 5f66 6b6e  ame] = (path_fkn
-0000c8c0: 6d2c 206e 2c20 746f 6f6c 2e41 290a 0a20  m, n, tool.A).. 
-0000c8d0: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
-0000c8e0: 7468 2c20 6e2c 2074 6f6f 6c0a 0a20 2020  th, n, tool..   
-0000c8f0: 2064 6566 2066 6b69 6e65 280a 2020 2020   def fkine(.    
-0000c900: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-0000c910: 2020 713a 2041 7272 6179 4c69 6b65 2c0a    q: ArrayLike,.
-0000c920: 2020 2020 2020 2020 656e 643a 2055 6e69          end: Uni
-0000c930: 6f6e 5b73 7472 2c20 4c69 6e6b 2c20 4772  on[str, Link, Gr
-0000c940: 6970 7065 722c 204e 6f6e 655d 203d 204e  ipper, None] = N
-0000c950: 6f6e 652c 0a20 2020 2020 2020 2073 7461  one,.        sta
-0000c960: 7274 3a20 556e 696f 6e5b 7374 722c 204c  rt: Union[str, L
-0000c970: 696e 6b2c 2047 7269 7070 6572 2c20 4e6f  ink, Gripper, No
-0000c980: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-0000c990: 2020 2020 746f 6f6c 3a20 556e 696f 6e5b      tool: Union[
-0000c9a0: 6e64 6172 7261 792c 2053 4533 2c20 4e6f  ndarray, SE3, No
-0000c9b0: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-0000c9c0: 2020 2020 696e 636c 7564 655f 6261 7365      include_base
-0000c9d0: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-0000c9e0: 2020 2029 202d 3e20 5345 333a 0a20 2020     ) -> SE3:.   
-0000c9f0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0000ca00: 2046 6f72 7761 7264 206b 696e 656d 6174   Forward kinemat
-0000ca10: 6963 730a 0a20 2020 2020 2020 203a 7061  ics..        :pa
-0000ca20: 7261 6d20 713a 204a 6f69 6e74 2063 6f6f  ram q: Joint coo
-0000ca30: 7264 696e 6174 6573 0a20 2020 2020 2020  rdinates.       
-0000ca40: 203a 7479 7065 2071 3a20 4172 7261 794c   :type q: ArrayL
-0000ca50: 696b 650a 2020 2020 2020 2020 3a70 6172  ike.        :par
-0000ca60: 616d 2065 6e64 3a20 656e 642d 6566 6665  am end: end-effe
-0000ca70: 6374 6f72 206f 7220 6772 6970 7065 7220  ctor or gripper 
-0000ca80: 746f 2063 6f6d 7075 7465 2066 6f72 7761  to compute forwa
-0000ca90: 7264 206b 696e 656d 6174 6963 7320 746f  rd kinematics to
-0000caa0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000cab0: 7374 6172 743a 2074 6865 206c 696e 6b20  start: the link 
-0000cac0: 746f 2063 6f6d 7075 7465 2066 6f72 7761  to compute forwa
-0000cad0: 7264 206b 696e 656d 6174 6963 7320 6672  rd kinematics fr
-0000cae0: 6f6d 0a20 2020 2020 2020 203a 7061 7261  om.        :para
-0000caf0: 6d20 746f 6f6c 3a20 746f 6f6c 2074 7261  m tool: tool tra
-0000cb00: 6e73 666f 726d 2c20 6f70 7469 6f6e 616c  nsform, optional
-0000cb10: 0a0a 2020 2020 2020 2020 3a72 6574 7572  ..        :retur
-0000cb20: 6e3a 2054 6865 2074 7261 6e73 666f 726d  n: The transform
-0000cb30: 6174 696f 6e20 6d61 7472 6978 2072 6570  ation matrix rep
-0000cb40: 7265 7365 6e74 696e 6720 7468 6520 706f  resenting the po
-0000cb50: 7365 206f 6620 7468 650a 2020 2020 2020  se of the.      
-0000cb60: 2020 2020 2020 656e 642d 6566 6665 6374        end-effect
-0000cb70: 6f72 0a0a 2020 2020 2020 2020 2d20 6060  or..        - ``
-0000cb80: 5420 3d20 726f 626f 742e 666b 696e 6528  T = robot.fkine(
-0000cb90: 7129 6060 2065 7661 6c75 6174 6573 2066  q)`` evaluates f
-0000cba0: 6f72 7761 7264 206b 696e 656d 6174 6963  orward kinematic
-0000cbb0: 7320 666f 7220 7468 6520 726f 626f 7420  s for the robot 
-0000cbc0: 6174 0a20 2020 2020 2020 2020 206a 6f69  at.          joi
-0000cbd0: 6e74 2063 6f6e 6669 6775 7261 7469 6f6e  nt configuration
-0000cbe0: 2060 6071 6060 2e0a 2020 2020 2020 2020   ``q``..        
-0000cbf0: 2a2a 5472 616a 6563 746f 7279 206f 7065  **Trajectory ope
-0000cc00: 7261 7469 6f6e 2a2a 3a0a 0a20 2020 2020  ration**:..     
-0000cc10: 2020 2049 6620 6060 7160 6020 6861 7320     If ``q`` has 
-0000cc20: 6d75 6c74 6970 6c65 2072 6f77 7320 286d  multiple rows (m
-0000cc30: 786e 292c 2069 7420 6973 2063 6f6e 7369  xn), it is consi
-0000cc40: 6465 7265 6420 6120 7472 616a 6563 746f  dered a trajecto
-0000cc50: 7279 2061 6e64 2074 6865 0a20 2020 2020  ry and the.     
-0000cc60: 2020 2072 6573 756c 7420 6973 2061 6e20     result is an 
-0000cc70: 6060 5345 3360 6020 696e 7374 616e 6365  ``SE3`` instance
-0000cc80: 2077 6974 6820 6060 6d60 6020 7661 6c75   with ``m`` valu
-0000cc90: 6573 2e0a 2020 2020 2020 2020 2e2e 206e  es..        .. n
-0000cca0: 6f74 653a 3a0a 2020 2020 2020 2020 2020  ote::.          
-0000ccb0: 2020 2d20 466f 7220 6120 726f 626f 7420    - For a robot 
-0000ccc0: 7769 7468 2061 2073 696e 676c 6520 656e  with a single en
-0000ccd0: 642d 6566 6665 6374 6f72 2074 6865 7265  d-effector there
-0000cce0: 2069 7320 6e6f 206e 6565 6420 746f 0a20   is no need to. 
-0000ccf0: 2020 2020 2020 2020 2020 2020 2073 7065               spe
-0000cd00: 6369 6679 2060 6065 6e64 6060 0a20 2020  cify ``end``.   
-0000cd10: 2020 2020 2020 2020 202d 2046 6f72 2061           - For a
-0000cd20: 2072 6f62 6f74 2077 6974 6820 6d75 6c74   robot with mult
-0000cd30: 6970 6c65 2065 6e64 2d65 6666 6563 746f  iple end-effecto
-0000cd40: 7273 2c20 7468 6520 6060 656e 6460 6020  rs, the ``end`` 
-0000cd50: 6d75 7374 0a20 2020 2020 2020 2020 2020  must.           
-0000cd60: 2020 2062 6520 7370 6563 6966 6965 642e     be specified.
-0000cd70: 0a20 2020 2020 2020 2020 2020 202d 2054  .            - T
-0000cd80: 6865 2072 6f62 6f74 2773 2062 6173 6520  he robot's base 
-0000cd90: 746f 6f6c 2074 7261 6e73 666f 726d 2c20  tool transform, 
-0000cda0: 6966 2073 6574 2c20 6973 2069 6e63 6f72  if set, is incor
-0000cdb0: 706f 7261 7465 640a 2020 2020 2020 2020  porated.        
-0000cdc0: 2020 2020 2020 696e 746f 2074 6865 2072        into the r
-0000cdd0: 6573 756c 742e 0a20 2020 2020 2020 2020  esult..         
-0000cde0: 2020 202d 2041 2074 6f6f 6c20 7472 616e     - A tool tran
-0000cdf0: 7366 6f72 6d2c 2069 6620 7072 6f76 6964  sform, if provid
-0000ce00: 6564 2c20 6973 2069 6e63 6f72 706f 7261  ed, is incorpora
-0000ce10: 7465 6420 696e 746f 2074 6865 2072 6573  ted into the res
-0000ce20: 756c 742e 0a20 2020 2020 2020 2020 2020  ult..           
-0000ce30: 202d 2057 6f72 6b73 2066 726f 6d20 7468   - Works from th
-0000ce40: 6520 656e 642d 6566 6665 6374 6f72 206c  e end-effector l
-0000ce50: 696e 6b20 746f 2074 6865 2062 6173 650a  ink to the base.
-0000ce60: 0a20 2020 2020 2020 203a 7265 6665 7265  .        :refere
-0000ce70: 6e63 6573 3a0a 2020 2020 2020 2020 2020  nces:.          
-0000ce80: 2020 2d20 4b69 6e65 6d61 7469 6320 4465    - Kinematic De
-0000ce90: 7269 7661 7469 7665 7320 7573 696e 6720  rivatives using 
-0000cea0: 7468 6520 456c 656d 656e 7461 7279 2054  the Elementary T
-0000ceb0: 7261 6e73 666f 726d 0a20 2020 2020 2020  ransform.       
-0000cec0: 2020 2020 2020 2053 6571 7565 6e63 652c         Sequence,
-0000ced0: 204a 2e20 4861 7669 6c61 6e64 2061 6e64   J. Haviland and
-0000cee0: 2050 2e20 436f 726b 650a 2020 2020 2020   P. Corke.      
-0000cef0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-0000cf00: 7475 726e 2053 4533 280a 2020 2020 2020  turn SE3(.      
-0000cf10: 2020 2020 2020 7365 6c66 2e65 7473 2873        self.ets(s
-0000cf20: 7461 7274 2c20 656e 6429 2e66 6b69 6e65  tart, end).fkine
-0000cf30: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000cf40: 2020 712c 2062 6173 653d 7365 6c66 2e5f    q, base=self._
-0000cf50: 542c 2074 6f6f 6c3d 746f 6f6c 2c20 696e  T, tool=tool, in
-0000cf60: 636c 7564 655f 6261 7365 3d69 6e63 6c75  clude_base=inclu
-0000cf70: 6465 5f62 6173 650a 2020 2020 2020 2020  de_base.        
-0000cf80: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
-0000cf90: 2020 2063 6865 636b 3d46 616c 7365 2c0a     check=False,.
-0000cfa0: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
-0000cfb0: 6566 206a 6163 6f62 3028 0a20 2020 2020  ef jacob0(.     
-0000cfc0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0000cfd0: 2071 3a20 4172 7261 794c 696b 652c 0a20   q: ArrayLike,. 
-0000cfe0: 2020 2020 2020 2065 6e64 3a20 556e 696f         end: Unio
-0000cff0: 6e5b 7374 722c 204c 696e 6b2c 2047 7269  n[str, Link, Gri
-0000d000: 7070 6572 2c20 4e6f 6e65 5d20 3d20 4e6f  pper, None] = No
-0000d010: 6e65 2c0a 2020 2020 2020 2020 7374 6172  ne,.        star
-0000d020: 743a 2055 6e69 6f6e 5b73 7472 2c20 4c69  t: Union[str, Li
-0000d030: 6e6b 2c20 4772 6970 7065 722c 204e 6f6e  nk, Gripper, Non
-0000d040: 655d 203d 204e 6f6e 652c 0a20 2020 2020  e] = None,.     
-0000d050: 2020 2074 6f6f 6c3a 2055 6e69 6f6e 5b6e     tool: Union[n
-0000d060: 6461 7272 6179 2c20 5345 332c 204e 6f6e  darray, SE3, Non
-0000d070: 655d 203d 204e 6f6e 652c 0a20 2020 2029  e] = None,.    )
-0000d080: 202d 3e20 6e64 6172 7261 793a 0a20 2020   -> ndarray:.   
-0000d090: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-0000d0a0: 2020 4d61 6e69 7075 6c61 746f 7220 6765    Manipulator ge
-0000d0b0: 6f6d 6574 7269 6320 4a61 636f 6269 616e  ometric Jacobian
-0000d0c0: 2069 6e20 7468 6520 6261 7365 2066 7261   in the base fra
-0000d0d0: 6d65 0a0a 2020 2020 2020 2020 3a70 6172  me..        :par
-0000d0e0: 616d 2071 3a20 4a6f 696e 7420 636f 6f72  am q: Joint coor
-0000d0f0: 6469 6e61 7465 2076 6563 746f 720a 2020  dinate vector.  
-0000d100: 2020 2020 2020 3a74 7970 6520 713a 2041        :type q: A
-0000d110: 7272 6179 4c69 6b65 0a20 2020 2020 2020  rrayLike.       
-0000d120: 203a 7061 7261 6d20 656e 643a 2074 6865   :param end: the
-0000d130: 2070 6172 7469 6375 6c61 7220 6c69 6e6b   particular link
-0000d140: 206f 7220 6772 6970 7065 7220 7768 6f73   or gripper whos
-0000d150: 6520 7665 6c6f 6369 7479 2074 6865 204a  e velocity the J
-0000d160: 6163 6f62 6961 6e0a 2020 2020 2020 2020  acobian.        
-0000d170: 2020 2020 6465 7363 7269 6265 732c 2064      describes, d
-0000d180: 6566 6175 6c74 7320 746f 2074 6865 2065  efaults to the e
-0000d190: 6e64 2d65 6666 6563 746f 7220 6966 206f  nd-effector if o
-0000d1a0: 6e6c 7920 6f6e 6520 6973 2070 7265 7365  nly one is prese
-0000d1b0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0000d1c0: 6d20 7374 6172 743a 2074 6865 206c 696e  m start: the lin
-0000d1d0: 6b20 636f 6e73 6964 6572 6564 2061 7320  k considered as 
-0000d1e0: 7468 6520 6261 7365 2066 7261 6d65 2c20  the base frame, 
-0000d1f0: 6465 6661 756c 7473 2074 6f20 7468 6520  defaults to the 
-0000d200: 726f 626f 7473 2773 2062 6173 6520 6672  robots's base fr
-0000d210: 616d 650a 2020 2020 2020 2020 3a70 6172  ame.        :par
-0000d220: 616d 2074 6f6f 6c3a 2061 2073 7461 7469  am tool: a stati
-0000d230: 6320 746f 6f6c 2074 7261 6e73 666f 726d  c tool transform
-0000d240: 6174 696f 6e20 6d61 7472 6978 2074 6f20  ation matrix to 
-0000d250: 6170 706c 7920 746f 2074 6865 0a20 2020  apply to the.   
-0000d260: 2020 2020 2020 2020 2065 6e64 206f 6620           end of 
-0000d270: 656e 642c 2064 6566 6175 6c74 7320 746f  end, defaults to
-0000d280: 204e 6f6e 650a 0a20 2020 2020 2020 203a   None..        :
-0000d290: 7265 7475 726e 204a 3a20 4d61 6e69 7075  return J: Manipu
-0000d2a0: 6c61 746f 7220 4a61 636f 6269 616e 2069  lator Jacobian i
-0000d2b0: 6e20 7468 6520 6261 7365 2066 7261 6d65  n the base frame
-0000d2c0: 0a0a 2020 2020 2020 2020 2d20 6060 726f  ..        - ``ro
-0000d2d0: 626f 742e 6a61 636f 626f 2871 2960 6020  bot.jacobo(q)`` 
-0000d2e0: 6973 2074 6865 206d 616e 6970 756c 6174  is the manipulat
-0000d2f0: 6f72 204a 6163 6f62 6961 6e20 6d61 7472  or Jacobian matr
-0000d300: 6978 2077 6869 6368 206d 6170 730a 2020  ix which maps.  
-0000d310: 2020 2020 2020 2020 6a6f 696e 7420 2076          joint  v
-0000d320: 656c 6f63 6974 7920 746f 2065 6e64 2d65  elocity to end-e
-0000d330: 6666 6563 746f 7220 7370 6174 6961 6c20  ffector spatial 
-0000d340: 7665 6c6f 6369 7479 2065 7870 7265 7373  velocity express
-0000d350: 6564 2069 6e20 7468 650a 2020 2020 2020  ed in the.      
-0000d360: 2020 2020 656e 642d 6566 6665 6374 6f72      end-effector
-0000d370: 2066 7261 6d65 2e0a 0a20 2020 2020 2020   frame...       
-0000d380: 2045 6e64 2d65 6666 6563 746f 7220 7370   End-effector sp
-0000d390: 6174 6961 6c20 7665 6c6f 6369 7479 203a  atial velocity :
-0000d3a0: 6d61 7468 3a60 5c6e 7520 3d20 2876 5f78  math:`\nu = (v_x
-0000d3b0: 2c20 765f 792c 2076 5f7a 2c20 5c6f 6d65  , v_y, v_z, \ome
-0000d3c0: 6761 5f78 2c20 5c6f 6d65 6761 5f79 2c20  ga_x, \omega_y, 
-0000d3d0: 5c6f 6d65 6761 5f7a 295e 5460 0a20 2020  \omega_z)^T`.   
-0000d3e0: 2020 2020 2069 7320 7265 6c61 7465 6420       is related 
-0000d3f0: 746f 206a 6f69 6e74 2076 656c 6f63 6974  to joint velocit
-0000d400: 7920 6279 203a 6d61 7468 3a60 7b7d 5e7b  y by :math:`{}^{
-0000d410: 457d 5c21 5c6e 7520 3d20 5c6d 6174 6862  E}\!\nu = \mathb
-0000d420: 667b 4a7d 5f6d 2871 2920 5c64 6f74 7b71  f{J}_m(q) \dot{q
-0000d430: 7d60 2e0a 0a20 2020 2020 2020 2045 7861  }`...        Exa
-0000d440: 6d70 6c65 3a0a 2020 2020 2020 2020 2e2e  mple:.        ..
-0000d450: 2072 756e 626c 6f63 6b3a 3a20 7079 636f   runblock:: pyco
-0000d460: 6e0a 2020 2020 2020 2020 2020 2020 3e3e  n.            >>
-0000d470: 3e20 696d 706f 7274 2072 6f62 6f74 6963  > import robotic
-0000d480: 7374 6f6f 6c62 6f78 2061 7320 7274 620a  stoolbox as rtb.
-0000d490: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000d4a0: 7075 6d61 203d 2072 7462 2e6d 6f64 656c  puma = rtb.model
-0000d4b0: 732e 4554 532e 5075 6d61 3536 3028 290a  s.ETS.Puma560().
-0000d4c0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000d4d0: 7075 6d61 2e6a 6163 6f62 6528 5b30 2c20  puma.jacobe([0, 
-0000d4e0: 302c 2030 2c20 302c 2030 2c20 305d 290a  0, 0, 0, 0, 0]).
-0000d4f0: 0a20 2020 2020 2020 202e 2e20 7761 726e  .        .. warn
-0000d500: 696e 673a 3a20 5468 6973 2069 7320 7468  ing:: This is th
-0000d510: 6520 6765 6f6d 6574 7269 6320 4a61 636f  e geometric Jaco
-0000d520: 6269 616e 2061 7320 6465 7363 7269 6265  bian as describe
-0000d530: 6420 696e 2074 6578 7473 2062 790a 2020  d in texts by.  
-0000d540: 2020 2020 2020 2020 2020 436f 726b 652c            Corke,
-0000d550: 2053 706f 6e67 2065 7461 6c2e 2c20 5369   Spong etal., Si
-0000d560: 6369 6c69 616e 6f20 6574 616c 2e20 2054  ciliano etal.  T
-0000d570: 6865 2065 6e64 2d65 6666 6563 746f 7220  he end-effector 
-0000d580: 7665 6c6f 6369 7479 2069 730a 2020 2020  velocity is.    
-0000d590: 2020 2020 2020 2020 6465 7363 7269 6265          describe
-0000d5a0: 6420 696e 2074 6572 6d73 206f 6620 7472  d in terms of tr
-0000d5b0: 616e 736c 6174 696f 6e61 6c20 616e 6420  anslational and 
-0000d5c0: 616e 6775 6c61 7220 7665 6c6f 6369 7479  angular velocity
-0000d5d0: 2c20 6e6f 7420 610a 2020 2020 2020 2020  , not a.        
-0000d5e0: 2020 2020 7665 6c6f 6369 7479 2074 7769      velocity twi
-0000d5f0: 7374 2061 7320 7065 7220 7468 6520 7465  st as per the te
-0000d600: 7874 2062 7920 4c79 6e63 6820 2620 5061  xt by Lynch & Pa
-0000d610: 726b 2e0a 0a20 2020 2020 2020 202e 2e20  rk...        .. 
-0000d620: 7761 726e 696e 673a 3a20 6060 7374 6172  warning:: ``star
-0000d630: 7460 6020 616e 6420 6060 656e 6460 6020  t`` and ``end`` 
-0000d640: 6d75 7374 2062 6520 6f6e 2074 6865 2073  must be on the s
-0000d650: 616d 6520 6272 616e 6368 2c0a 2020 2020  ame branch,.    
-0000d660: 2020 2020 2020 2020 7769 7468 2060 6073          with ``s
-0000d670: 7461 7274 6060 2063 6c6f 7365 7374 2074  tart`` closest t
-0000d680: 6f20 7468 6520 6261 7365 2e0a 2020 2020  o the base..    
-0000d690: 2020 2020 2222 2220 2023 206e 6f71 610a      """  # noqa.
-0000d6a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000d6b0: 656c 662e 6574 7328 7374 6172 742c 2065  elf.ets(start, e
-0000d6c0: 6e64 292e 6a61 636f 6230 2871 2c20 746f  nd).jacob0(q, to
-0000d6d0: 6f6c 3d74 6f6f 6c29 0a0a 2020 2020 6465  ol=tool)..    de
-0000d6e0: 6620 6a61 636f 6265 280a 2020 2020 2020  f jacobe(.      
-0000d6f0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0000d700: 713a 2041 7272 6179 4c69 6b65 2c0a 2020  q: ArrayLike,.  
-0000d710: 2020 2020 2020 656e 643a 2055 6e69 6f6e        end: Union
-0000d720: 5b73 7472 2c20 4c69 6e6b 2c20 4772 6970  [str, Link, Grip
-0000d730: 7065 722c 204e 6f6e 655d 203d 204e 6f6e  per, None] = Non
-0000d740: 652c 0a20 2020 2020 2020 2073 7461 7274  e,.        start
-0000d750: 3a20 556e 696f 6e5b 7374 722c 204c 696e  : Union[str, Lin
-0000d760: 6b2c 2047 7269 7070 6572 2c20 4e6f 6e65  k, Gripper, None
-0000d770: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-0000d780: 2020 746f 6f6c 3a20 556e 696f 6e5b 6e64    tool: Union[nd
-0000d790: 6172 7261 792c 2053 4533 2c20 4e6f 6e65  array, SE3, None
-0000d7a0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2920  ] = None,.    ) 
-0000d7b0: 2d3e 206e 6461 7272 6179 3a0a 2020 2020  -> ndarray:.    
-0000d7c0: 2020 2020 7222 2222 0a20 2020 2020 2020      r""".       
-0000d7d0: 204d 616e 6970 756c 6174 6f72 2067 656f   Manipulator geo
-0000d7e0: 6d65 7472 6963 204a 6163 6f62 6961 6e20  metric Jacobian 
-0000d7f0: 696e 2074 6865 2065 6e64 2d65 6666 6563  in the end-effec
-0000d800: 746f 7220 6672 616d 650a 0a20 2020 2020  tor frame..     
-0000d810: 2020 203a 7061 7261 6d20 713a 204a 6f69     :param q: Joi
-0000d820: 6e74 2063 6f6f 7264 696e 6174 6520 7665  nt coordinate ve
-0000d830: 6374 6f72 0a20 2020 2020 2020 203a 7479  ctor.        :ty
-0000d840: 7065 2071 3a20 4172 7261 794c 696b 650a  pe q: ArrayLike.
-0000d850: 2020 2020 2020 2020 3a70 6172 616d 2065          :param e
-0000d860: 6e64 3a20 7468 6520 7061 7274 6963 756c  nd: the particul
-0000d870: 6172 206c 696e 6b20 6f72 2047 7269 7070  ar link or Gripp
-0000d880: 6572 2077 686f 7365 2076 656c 6f63 6974  er whose velocit
-0000d890: 7920 7468 6520 4a61 636f 6269 616e 0a20  y the Jacobian. 
-0000d8a0: 2020 2020 2020 2020 2020 2064 6573 6372             descr
-0000d8b0: 6962 6573 2c20 6465 6661 756c 7473 2074  ibes, defaults t
-0000d8c0: 6f20 7468 6520 656e 642d 6566 6665 6374  o the end-effect
-0000d8d0: 6f72 2069 6620 6f6e 6c79 206f 6e65 2069  or if only one i
-0000d8e0: 7320 7072 6573 656e 740a 2020 2020 2020  s present.      
-0000d8f0: 2020 3a70 6172 616d 2073 7461 7274 3a20    :param start: 
-0000d900: 7468 6520 6c69 6e6b 2063 6f6e 7369 6465  the link conside
-0000d910: 7265 6420 6173 2074 6865 2062 6173 6520  red as the base 
-0000d920: 6672 616d 652c 2064 6566 6175 6c74 7320  frame, defaults 
-0000d930: 746f 2074 6865 2072 6f62 6f74 7327 7320  to the robots's 
-0000d940: 6261 7365 2066 7261 6d65 0a20 2020 2020  base frame.     
-0000d950: 2020 203a 7061 7261 6d20 746f 6f6c 3a20     :param tool: 
-0000d960: 6120 7374 6174 6963 2074 6f6f 6c20 7472  a static tool tr
-0000d970: 616e 7366 6f72 6d61 7469 6f6e 206d 6174  ansformation mat
-0000d980: 7269 7820 746f 2061 7070 6c79 2074 6f20  rix to apply to 
-0000d990: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
-0000d9a0: 656e 6420 6f66 2065 6e64 2c20 6465 6661  end of end, defa
-0000d9b0: 756c 7473 2074 6f20 4e6f 6e65 0a0a 2020  ults to None..  
-0000d9c0: 2020 2020 2020 3a72 6574 7572 6e20 4a3a        :return J:
-0000d9d0: 204d 616e 6970 756c 6174 6f72 204a 6163   Manipulator Jac
-0000d9e0: 6f62 6961 6e20 696e 2074 6865 2065 6e64  obian in the end
-0000d9f0: 2d65 6666 6563 746f 7220 6672 616d 650a  -effector frame.
-0000da00: 0a20 2020 2020 2020 202d 2060 6072 6f62  .        - ``rob
-0000da10: 6f74 2e6a 6163 6f62 6528 7129 6060 2069  ot.jacobe(q)`` i
-0000da20: 7320 7468 6520 6d61 6e69 7075 6c61 746f  s the manipulato
-0000da30: 7220 4a61 636f 6269 616e 206d 6174 7269  r Jacobian matri
-0000da40: 7820 7768 6963 6820 6d61 7073 0a20 2020  x which maps.   
-0000da50: 2020 2020 2020 206a 6f69 6e74 2020 7665         joint  ve
-0000da60: 6c6f 6369 7479 2074 6f20 656e 642d 6566  locity to end-ef
-0000da70: 6665 6374 6f72 2073 7061 7469 616c 2076  fector spatial v
-0000da80: 656c 6f63 6974 7920 6578 7072 6573 7365  elocity expresse
-0000da90: 6420 696e 2074 6865 0a20 2020 2020 2020  d in the.       
-0000daa0: 2020 2065 6e64 2d65 6666 6563 746f 7220     end-effector 
-0000dab0: 6672 616d 652e 0a20 2020 2020 2020 2045  frame..        E
-0000dac0: 6e64 2d65 6666 6563 746f 7220 7370 6174  nd-effector spat
-0000dad0: 6961 6c20 7665 6c6f 6369 7479 203a 6d61  ial velocity :ma
-0000dae0: 7468 3a60 5c6e 7520 3d20 2876 5f78 2c20  th:`\nu = (v_x, 
-0000daf0: 765f 792c 2076 5f7a 2c20 5c6f 6d65 6761  v_y, v_z, \omega
-0000db00: 5f78 2c20 5c6f 6d65 6761 5f79 2c20 5c6f  _x, \omega_y, \o
-0000db10: 6d65 6761 5f7a 295e 5460 0a20 2020 2020  mega_z)^T`.     
-0000db20: 2020 2069 7320 7265 6c61 7465 6420 746f     is related to
-0000db30: 206a 6f69 6e74 2076 656c 6f63 6974 7920   joint velocity 
-0000db40: 6279 203a 6d61 7468 3a60 7b7d 5e7b 457d  by :math:`{}^{E}
-0000db50: 5c21 5c6e 7520 3d20 5c6d 6174 6862 667b  \!\nu = \mathbf{
-0000db60: 4a7d 5f6d 2871 2920 5c64 6f74 7b71 7d60  J}_m(q) \dot{q}`
-0000db70: 2e0a 0a20 2020 2020 2020 2045 7861 6d70  ...        Examp
-0000db80: 6c65 3a0a 2020 2020 2020 2020 2e2e 2072  le:.        .. r
-0000db90: 756e 626c 6f63 6b3a 3a20 7079 636f 6e0a  unblock:: pycon.
-0000dba0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-0000dbb0: 696d 706f 7274 2072 6f62 6f74 6963 7374  import roboticst
-0000dbc0: 6f6f 6c62 6f78 2061 7320 7274 620a 2020  oolbox as rtb.  
-0000dbd0: 2020 2020 2020 2020 2020 3e3e 3e20 7075            >>> pu
-0000dbe0: 6d61 203d 2072 7462 2e6d 6f64 656c 732e  ma = rtb.models.
-0000dbf0: 4554 532e 5075 6d61 3536 3028 290a 2020  ETS.Puma560().  
-0000dc00: 2020 2020 2020 2020 2020 3e3e 3e20 7075            >>> pu
-0000dc10: 6d61 2e6a 6163 6f62 6528 5b30 2c20 302c  ma.jacobe([0, 0,
-0000dc20: 2030 2c20 302c 2030 2c20 305d 290a 0a20   0, 0, 0, 0]).. 
-0000dc30: 2020 2020 2020 202e 2e20 7761 726e 696e         .. warnin
-0000dc40: 673a 3a20 5468 6973 2069 7320 7468 6520  g:: This is the 
-0000dc50: 2a2a 6765 6f6d 6574 7269 6320 4a61 636f  **geometric Jaco
-0000dc60: 6269 616e 2a2a 2061 7320 6465 7363 7269  bian** as descri
-0000dc70: 6265 6420 696e 2074 6578 7473 2062 790a  bed in texts by.
-0000dc80: 2020 2020 2020 2020 2020 2020 436f 726b              Cork
-0000dc90: 652c 2053 706f 6e67 2065 7461 6c2e 2c20  e, Spong etal., 
-0000dca0: 5369 6369 6c69 616e 6f20 6574 616c 2e20  Siciliano etal. 
-0000dcb0: 2054 6865 2065 6e64 2d65 6666 6563 746f   The end-effecto
-0000dcc0: 7220 7665 6c6f 6369 7479 2069 730a 2020  r velocity is.  
-0000dcd0: 2020 2020 2020 2020 2020 6465 7363 7269            descri
-0000dce0: 6265 6420 696e 2074 6572 6d73 206f 6620  bed in terms of 
-0000dcf0: 7472 616e 736c 6174 696f 6e61 6c20 616e  translational an
-0000dd00: 6420 616e 6775 6c61 7220 7665 6c6f 6369  d angular veloci
-0000dd10: 7479 2c20 6e6f 7420 610a 2020 2020 2020  ty, not a.      
-0000dd20: 2020 2020 2020 7665 6c6f 6369 7479 2074        velocity t
-0000dd30: 7769 7374 2061 7320 7065 7220 7468 6520  wist as per the 
-0000dd40: 7465 7874 2062 7920 4c79 6e63 6820 2620  text by Lynch & 
-0000dd50: 5061 726b 2e0a 0a20 2020 2020 2020 202e  Park...        .
-0000dd60: 2e20 7761 726e 696e 673a 3a20 6060 7374  . warning:: ``st
-0000dd70: 6172 7460 6020 616e 6420 6060 656e 6460  art`` and ``end`
-0000dd80: 6020 6d75 7374 2062 6520 6f6e 2074 6865  ` must be on the
-0000dd90: 2073 616d 6520 6272 616e 6368 2c0a 2020   same branch,.  
-0000dda0: 2020 2020 2020 2020 2020 7769 7468 2060            with `
-0000ddb0: 6073 7461 7274 6060 2063 6c6f 7365 7374  `start`` closest
-0000ddc0: 2074 6f20 7468 6520 6261 7365 2e0a 2020   to the base..  
-0000ddd0: 2020 2020 2020 2222 2220 2023 206e 6f71        """  # noq
-0000dde0: 610a 2020 2020 2020 2020 7265 7475 726e  a.        return
-0000ddf0: 2073 656c 662e 6574 7328 7374 6172 742c   self.ets(start,
-0000de00: 2065 6e64 292e 6a61 636f 6265 2871 2c20   end).jacobe(q, 
-0000de10: 746f 6f6c 3d74 6f6f 6c29 0a0a 2020 2020  tool=tool)..    
-0000de20: 6465 6620 6865 7373 6961 6e30 280a 2020  def hessian0(.  
-0000de30: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-0000de40: 2020 2020 713a 2055 6e69 6f6e 5b41 7272      q: Union[Arr
-0000de50: 6179 4c69 6b65 2c20 4e6f 6e65 5d20 3d20  ayLike, None] = 
-0000de60: 4e6f 6e65 2c0a 2020 2020 2020 2020 656e  None,.        en
-0000de70: 643a 2055 6e69 6f6e 5b73 7472 2c20 4c69  d: Union[str, Li
-0000de80: 6e6b 2c20 4772 6970 7065 722c 204e 6f6e  nk, Gripper, Non
-0000de90: 655d 203d 204e 6f6e 652c 0a20 2020 2020  e] = None,.     
-0000dea0: 2020 2073 7461 7274 3a20 556e 696f 6e5b     start: Union[
-0000deb0: 7374 722c 204c 696e 6b2c 2047 7269 7070  str, Link, Gripp
-0000dec0: 6572 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65  er, None] = None
-0000ded0: 2c0a 2020 2020 2020 2020 4a30 3a20 556e  ,.        J0: Un
-0000dee0: 696f 6e5b 6e64 6172 7261 792c 204e 6f6e  ion[ndarray, Non
-0000def0: 655d 203d 204e 6f6e 652c 0a20 2020 2020  e] = None,.     
-0000df00: 2020 2074 6f6f 6c3a 2055 6e69 6f6e 5b6e     tool: Union[n
-0000df10: 6461 7272 6179 2c20 5345 332c 204e 6f6e  darray, SE3, Non
-0000df20: 655d 203d 204e 6f6e 652c 0a20 2020 2029  e] = None,.    )
-0000df30: 202d 3e20 6e64 6172 7261 793a 0a20 2020   -> ndarray:.   
-0000df40: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-0000df50: 2020 4d61 6e69 7075 6c61 746f 7220 4865    Manipulator He
-0000df60: 7373 6961 6e0a 0a20 2020 2020 2020 2054  ssian..        T
-0000df70: 6865 206d 616e 6970 756c 6174 6f72 2048  he manipulator H
-0000df80: 6573 7369 616e 2074 656e 736f 7220 6d61  essian tensor ma
-0000df90: 7073 206a 6f69 6e74 2061 6363 656c 6572  ps joint acceler
-0000dfa0: 6174 696f 6e20 746f 2065 6e64 2d65 6666  ation to end-eff
-0000dfb0: 6563 746f 720a 2020 2020 2020 2020 7370  ector.        sp
-0000dfc0: 6174 6961 6c20 6163 6365 6c65 7261 7469  atial accelerati
-0000dfd0: 6f6e 2c20 6578 7072 6573 7365 6420 696e  on, expressed in
-0000dfe0: 2074 6865 2077 6f72 6c64 2d63 6f6f 7264   the world-coord
-0000dff0: 696e 6174 6520 6672 616d 652e 2054 6869  inate frame. Thi
-0000e000: 730a 2020 2020 2020 2020 6675 6e63 7469  s.        functi
-0000e010: 6f6e 2063 616c 756c 6361 7465 7320 7468  on calulcates th
-0000e020: 6973 2062 6173 6564 206f 6e20 7468 6520  is based on the 
-0000e030: 4554 5320 6f66 2074 6865 2072 6f62 6f74  ETS of the robot
-0000e040: 2e20 4f6e 6520 6f66 204a 3020 6f72 2071  . One of J0 or q
-0000e050: 0a20 2020 2020 2020 2069 7320 7265 7175  .        is requ
-0000e060: 6972 6564 2e20 5375 7070 6c79 204a 3020  ired. Supply J0 
-0000e070: 6966 2061 6c72 6561 6479 2063 616c 6375  if already calcu
-0000e080: 6c61 7465 6420 746f 2073 6176 6520 636f  lated to save co
-0000e090: 6d70 7574 6174 696f 6e20 7469 6d65 0a0a  mputation time..
-0000e0a0: 2020 2020 2020 2020 3a70 6172 616d 2071          :param q
-0000e0b0: 3a20 5468 6520 6a6f 696e 7420 616e 676c  : The joint angl
-0000e0c0: 6573 2f63 6f6e 6669 6775 7261 7469 6f6e  es/configuration
-0000e0d0: 206f 6620 7468 6520 726f 626f 7420 284f   of the robot (O
-0000e0e0: 7074 696f 6e61 6c2c 0a20 2020 2020 2020  ptional,.       
-0000e0f0: 2020 2020 2069 6620 6e6f 7420 7375 7070       if not supp
-0000e100: 6c69 6564 2077 696c 6c20 7573 6520 7468  lied will use th
-0000e110: 6520 7374 6f72 6564 2071 2076 616c 7565  e stored q value
-0000e120: 7329 2e0a 2020 2020 2020 2020 3a74 7970  s)..        :typ
-0000e130: 6520 713a 2041 7272 6179 4c69 6b65 0a20  e q: ArrayLike. 
-0000e140: 2020 2020 2020 203a 7061 7261 6d20 656e         :param en
-0000e150: 643a 2074 6865 2066 696e 616c 206c 696e  d: the final lin
-0000e160: 6b2f 4772 6970 7065 7220 7768 6963 6820  k/Gripper which 
-0000e170: 7468 6520 4865 7373 6961 6e20 7265 7072  the Hessian repr
-0000e180: 6573 656e 7473 0a20 2020 2020 2020 203a  esents.        :
-0000e190: 7061 7261 6d20 7374 6172 743a 2074 6865  param start: the
-0000e1a0: 2066 6972 7374 206c 696e 6b20 7768 6963   first link whic
-0000e1b0: 6820 7468 6520 4865 7373 6961 6e20 7265  h the Hessian re
-0000e1c0: 7072 6573 656e 7473 0a20 2020 2020 2020  presents.       
-0000e1d0: 203a 7061 7261 6d20 4a30 3a20 5468 6520   :param J0: The 
-0000e1e0: 6d61 6e69 7075 6c61 746f 7220 4a61 636f  manipulator Jaco
-0000e1f0: 6269 616e 2069 6e20 7468 6520 3020 6672  bian in the 0 fr
-0000e200: 616d 650a 2020 2020 2020 2020 3a70 6172  ame.        :par
-0000e210: 616d 2074 6f6f 6c3a 2061 2073 7461 7469  am tool: a stati
-0000e220: 6320 746f 6f6c 2074 7261 6e73 666f 726d  c tool transform
-0000e230: 6174 696f 6e20 6d61 7472 6978 2074 6f20  ation matrix to 
-0000e240: 6170 706c 7920 746f 2074 6865 0a20 2020  apply to the.   
-0000e250: 2020 2020 2020 2020 2065 6e64 206f 6620           end of 
-0000e260: 656e 642c 2064 6566 6175 6c74 7320 746f  end, defaults to
-0000e270: 204e 6f6e 650a 2020 2020 2020 2020 0a20   None.        . 
-0000e280: 2020 2020 2020 203a 7265 7475 726e 3a20         :return: 
-0000e290: 5468 6520 6d61 6e69 7075 6c61 746f 7220  The manipulator 
-0000e2a0: 4865 7373 6961 6e20 696e 2030 2066 7261  Hessian in 0 fra
-0000e2b0: 6d65 0a20 2020 2020 2020 200a 2020 2020  me.        .    
-0000e2c0: 2020 2020 5468 6973 206d 6574 686f 6420      This method 
-0000e2d0: 636f 6d70 7574 6573 2074 6865 206d 616e  computes the man
-0000e2e0: 6970 756c 6174 6f72 2048 6573 7369 616e  ipulator Hessian
-0000e2f0: 2069 6e20 7468 6520 6261 7365 2066 7261   in the base fra
-0000e300: 6d65 2e20 2049 660a 2020 2020 2020 2020  me.  If.        
-0000e310: 7765 2074 616b 6520 7468 6520 7469 6d65  we take the time
-0000e320: 2064 6572 6976 6174 6976 6520 6f66 2074   derivative of t
-0000e330: 6865 2064 6966 6665 7265 6e74 6961 6c20  he differential 
-0000e340: 6b69 6e65 6d61 7469 6320 7265 6c61 7469  kinematic relati
-0000e350: 6f6e 7368 6970 0a20 2020 2020 2020 202e  onship.        .
-0000e360: 2e20 6d61 7468 3a3a 0a20 2020 2020 2020  . math::.       
-0000e370: 2020 2020 205c 6e75 2020 2020 263d 205c       \nu    &= \
-0000e380: 6d61 747b 4a7d 285c 7665 637b 717d 2920  mat{J}(\vec{q}) 
-0000e390: 5c64 7665 637b 717d 205c 5c0a 2020 2020  \dvec{q} \\.    
-0000e3a0: 2020 2020 2020 2020 5c61 6c70 6861 2026          \alpha &
-0000e3b0: 3d20 5c64 6d61 747b 4a7d 205c 6476 6563  = \dmat{J} \dvec
-0000e3c0: 7b71 7d20 2b20 5c6d 6174 7b4a 7d20 5c64  {q} + \mat{J} \d
-0000e3d0: 6476 6563 7b71 7d0a 2020 2020 2020 2020  dvec{q}.        
-0000e3e0: 7768 6572 650a 2020 2020 2020 2020 2e2e  where.        ..
-0000e3f0: 206d 6174 683a 3a0a 2020 2020 2020 2020   math::.        
-0000e400: 2020 2020 5c64 6d61 747b 4a7d 203d 205c      \dmat{J} = \
-0000e410: 6d61 747b 487d 205c 6476 6563 7b71 7d0a  mat{H} \dvec{q}.
-0000e420: 2020 2020 2020 2020 616e 6420 3a6d 6174          and :mat
-0000e430: 683a 605c 6d61 747b 487d 205c 696e 205c  h:`\mat{H} \in \
-0000e440: 6d61 7468 6262 7b52 7d5e 7b36 5c74 696d  mathbb{R}^{6\tim
-0000e450: 6573 206e 205c 7469 6d65 7320 6e7d 6020  es n \times n}` 
-0000e460: 6973 2074 6865 0a20 2020 2020 2020 2048  is the.        H
-0000e470: 6573 7369 616e 2074 656e 736f 722e 0a0a  essian tensor...
-0000e480: 2020 2020 2020 2020 5468 6520 656c 656d          The elem
-0000e490: 656e 7473 206f 6620 7468 6520 4865 7373  ents of the Hess
-0000e4a0: 6961 6e20 6172 650a 2020 2020 2020 2020  ian are.        
-0000e4b0: 2e2e 206d 6174 683a 3a0a 2020 2020 2020  .. math::.      
-0000e4c0: 2020 2020 2020 5c6d 6174 7b48 7d5f 7b69        \mat{H}_{i
-0000e4d0: 2c6a 2c6b 7d20 3d20 205c 6672 6163 7b64  ,j,k} =  \frac{d
-0000e4e0: 5e32 2075 5f69 7d7b 6420 715f 6a20 6420  ^2 u_i}{d q_j d 
-0000e4f0: 715f 6b7d 0a20 2020 2020 2020 2077 6865  q_k}.        whe
-0000e500: 7265 203a 6d61 7468 3a60 7520 3d20 5c7b  re :math:`u = \{
-0000e510: 745f 782c 2074 5f79 2c20 745f 7a2c 2072  t_x, t_y, t_z, r
-0000e520: 5f78 2c20 725f 792c 2072 5f7a 5c7d 6020  _x, r_y, r_z\}` 
-0000e530: 6172 6520 7468 6520 656c 656d 656e 7473  are the elements
-0000e540: 0a20 2020 2020 2020 206f 6620 7468 6520  .        of the 
-0000e550: 7370 6174 6961 6c20 7665 6c6f 6369 7479  spatial velocity
-0000e560: 2076 6563 746f 722e 0a20 2020 2020 2020   vector..       
-0000e570: 2053 696d 696c 6172 6c79 2c20 7765 2063   Similarly, we c
-0000e580: 616e 2077 7269 7465 0a20 2020 2020 2020  an write.       
-0000e590: 202e 2e20 6d61 7468 3a3a 0a20 2020 2020   .. math::.     
-0000e5a0: 2020 2020 2020 205c 6d61 747b 4a7d 5f7b         \mat{J}_{
-0000e5b0: 692c 6a7d 203d 205c 6672 6163 7b64 2075  i,j} = \frac{d u
-0000e5c0: 5f69 7d7b 6420 715f 6a7d 0a20 2020 2020  _i}{d q_j}.     
-0000e5d0: 2020 200a 2020 2020 2020 2020 3a72 6566     .        :ref
-0000e5e0: 6572 656e 6365 733a 0a20 2020 2020 2020  erences:.       
-0000e5f0: 2020 2020 202d 204b 696e 656d 6174 6963       - Kinematic
-0000e600: 2044 6572 6976 6174 6976 6573 2075 7369   Derivatives usi
-0000e610: 6e67 2074 6865 2045 6c65 6d65 6e74 6172  ng the Elementar
-0000e620: 7920 5472 616e 7366 6f72 6d0a 2020 2020  y Transform.    
-0000e630: 2020 2020 2020 2020 2020 5365 7175 656e            Sequen
-0000e640: 6365 2c20 4a2e 2048 6176 696c 616e 6420  ce, J. Haviland 
-0000e650: 616e 6420 502e 2043 6f72 6b65 0a20 2020  and P. Corke.   
-0000e660: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0000e670: 2072 6574 7572 6e20 7365 6c66 2e65 7473   return self.ets
-0000e680: 2873 7461 7274 2c20 656e 6429 2e68 6573  (start, end).hes
-0000e690: 7369 616e 3028 712c 204a 303d 4a30 2c20  sian0(q, J0=J0, 
-0000e6a0: 746f 6f6c 3d74 6f6f 6c29 0a0a 2020 2020  tool=tool)..    
-0000e6b0: 6465 6620 6865 7373 6961 6e65 280a 2020  def hessiane(.  
-0000e6c0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-0000e6d0: 2020 2020 713a 2055 6e69 6f6e 5b41 7272      q: Union[Arr
-0000e6e0: 6179 4c69 6b65 2c20 4e6f 6e65 5d20 3d20  ayLike, None] = 
-0000e6f0: 4e6f 6e65 2c0a 2020 2020 2020 2020 656e  None,.        en
-0000e700: 643a 2055 6e69 6f6e 5b73 7472 2c20 4c69  d: Union[str, Li
-0000e710: 6e6b 2c20 4772 6970 7065 722c 204e 6f6e  nk, Gripper, Non
-0000e720: 655d 203d 204e 6f6e 652c 0a20 2020 2020  e] = None,.     
-0000e730: 2020 2073 7461 7274 3a20 556e 696f 6e5b     start: Union[
-0000e740: 7374 722c 204c 696e 6b2c 2047 7269 7070  str, Link, Gripp
-0000e750: 6572 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65  er, None] = None
-0000e760: 2c0a 2020 2020 2020 2020 4a65 3a20 556e  ,.        Je: Un
-0000e770: 696f 6e5b 6e64 6172 7261 792c 204e 6f6e  ion[ndarray, Non
-0000e780: 655d 203d 204e 6f6e 652c 0a20 2020 2020  e] = None,.     
-0000e790: 2020 2074 6f6f 6c3a 2055 6e69 6f6e 5b6e     tool: Union[n
-0000e7a0: 6461 7272 6179 2c20 5345 332c 204e 6f6e  darray, SE3, Non
-0000e7b0: 655d 203d 204e 6f6e 652c 0a20 2020 2029  e] = None,.    )
-0000e7c0: 202d 3e20 6e64 6172 7261 793a 0a20 2020   -> ndarray:.   
-0000e7d0: 2020 2020 2072 2222 220a 2020 2020 2020       r""".      
-0000e7e0: 2020 4d61 6e69 7075 6c61 746f 7220 4865    Manipulator He
-0000e7f0: 7373 6961 6e0a 0a20 2020 2020 2020 2054  ssian..        T
-0000e800: 6865 206d 616e 6970 756c 6174 6f72 2048  he manipulator H
-0000e810: 6573 7369 616e 2074 656e 736f 7220 6d61  essian tensor ma
-0000e820: 7073 206a 6f69 6e74 2061 6363 656c 6572  ps joint acceler
-0000e830: 6174 696f 6e20 746f 2065 6e64 2d65 6666  ation to end-eff
-0000e840: 6563 746f 720a 2020 2020 2020 2020 7370  ector.        sp
-0000e850: 6174 6961 6c20 6163 6365 6c65 7261 7469  atial accelerati
-0000e860: 6f6e 2c20 6578 7072 6573 7365 6420 696e  on, expressed in
-0000e870: 2074 6865 2065 6520 6672 616d 652e 2054   the ee frame. T
-0000e880: 6869 730a 2020 2020 2020 2020 6675 6e63  his.        func
-0000e890: 7469 6f6e 2063 616c 756c 6361 7465 7320  tion calulcates 
-0000e8a0: 7468 6973 2062 6173 6564 206f 6e20 7468  this based on th
-0000e8b0: 6520 4554 5320 6f66 2074 6865 2072 6f62  e ETS of the rob
-0000e8c0: 6f74 2e20 4f6e 6520 6f66 204a 6520 6f72  ot. One of Je or
-0000e8d0: 2071 0a20 2020 2020 2020 2069 7320 7265   q.        is re
-0000e8e0: 7175 6972 6564 2e20 5375 7070 6c79 204a  quired. Supply J
-0000e8f0: 6520 6966 2061 6c72 6561 6479 2063 616c  e if already cal
-0000e900: 6375 6c61 7465 6420 746f 2073 6176 6520  culated to save 
-0000e910: 636f 6d70 7574 6174 696f 6e20 7469 6d65  computation time
-0000e920: 0a0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-0000e930: 2071 3a20 5468 6520 6a6f 696e 7420 616e   q: The joint an
-0000e940: 676c 6573 2f63 6f6e 6669 6775 7261 7469  gles/configurati
-0000e950: 6f6e 206f 6620 7468 6520 726f 626f 7420  on of the robot 
-0000e960: 284f 7074 696f 6e61 6c2c 0a20 2020 2020  (Optional,.     
-0000e970: 2020 2020 2020 2069 6620 6e6f 7420 7375         if not su
-0000e980: 7070 6c69 6564 2077 696c 6c20 7573 6520  pplied will use 
-0000e990: 7468 6520 7374 6f72 6564 2071 2076 616c  the stored q val
-0000e9a0: 7565 7329 2e0a 2020 2020 2020 2020 3a74  ues)..        :t
-0000e9b0: 7970 6520 713a 2041 7272 6179 4c69 6b65  ype q: ArrayLike
-0000e9c0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000e9d0: 656e 643a 2074 6865 2066 696e 616c 206c  end: the final l
-0000e9e0: 696e 6b2f 4772 6970 7065 7220 7768 6963  ink/Gripper whic
-0000e9f0: 6820 7468 6520 4865 7373 6961 6e20 7265  h the Hessian re
-0000ea00: 7072 6573 656e 7473 0a20 2020 2020 2020  presents.       
-0000ea10: 203a 7061 7261 6d20 7374 6172 743a 2074   :param start: t
-0000ea20: 6865 2066 6972 7374 206c 696e 6b20 7768  he first link wh
-0000ea30: 6963 6820 7468 6520 4865 7373 6961 6e20  ich the Hessian 
-0000ea40: 7265 7072 6573 656e 7473 0a20 2020 2020  represents.     
-0000ea50: 2020 203a 7061 7261 6d20 4a65 3a20 5468     :param Je: Th
-0000ea60: 6520 6d61 6e69 7075 6c61 746f 7220 4a61  e manipulator Ja
-0000ea70: 636f 6269 616e 2069 6e20 7468 6520 6565  cobian in the ee
-0000ea80: 2066 7261 6d65 0a20 2020 2020 2020 203a   frame.        :
-0000ea90: 7061 7261 6d20 746f 6f6c 3a20 6120 7374  param tool: a st
-0000eaa0: 6174 6963 2074 6f6f 6c20 7472 616e 7366  atic tool transf
-0000eab0: 6f72 6d61 7469 6f6e 206d 6174 7269 7820  ormation matrix 
-0000eac0: 746f 2061 7070 6c79 2074 6f20 7468 650a  to apply to the.
-0000ead0: 2020 2020 2020 2020 2020 2020 656e 6420              end 
-0000eae0: 6f66 2065 6e64 2c20 6465 6661 756c 7473  of end, defaults
-0000eaf0: 2074 6f20 4e6f 6e65 0a20 2020 2020 2020   to None.       
-0000eb00: 200a 2020 2020 2020 2020 3a72 6574 7572   .        :retur
-0000eb10: 6e3a 2054 6865 206d 616e 6970 756c 6174  n: The manipulat
-0000eb20: 6f72 2048 6573 7369 616e 2069 6e20 6565  or Hessian in ee
-0000eb30: 2066 7261 6d65 0a20 2020 2020 2020 200a   frame.        .
-0000eb40: 2020 2020 2020 2020 5468 6973 206d 6574          This met
-0000eb50: 686f 6420 636f 6d70 7574 6573 2074 6865  hod computes the
-0000eb60: 206d 616e 6970 756c 6174 6f72 2048 6573   manipulator Hes
-0000eb70: 7369 616e 2069 6e20 7468 6520 6565 2066  sian in the ee f
-0000eb80: 7261 6d65 2e20 2049 660a 2020 2020 2020  rame.  If.      
-0000eb90: 2020 7765 2074 616b 6520 7468 6520 7469    we take the ti
-0000eba0: 6d65 2064 6572 6976 6174 6976 6520 6f66  me derivative of
-0000ebb0: 2074 6865 2064 6966 6665 7265 6e74 6961   the differentia
-0000ebc0: 6c20 6b69 6e65 6d61 7469 6320 7265 6c61  l kinematic rela
-0000ebd0: 7469 6f6e 7368 6970 0a20 2020 2020 2020  tionship.       
-0000ebe0: 202e 2e20 6d61 7468 3a3a 0a20 2020 2020   .. math::.     
-0000ebf0: 2020 2020 2020 205c 6e75 2020 2020 263d         \nu    &=
-0000ec00: 205c 6d61 747b 4a7d 285c 7665 637b 717d   \mat{J}(\vec{q}
-0000ec10: 2920 5c64 7665 637b 717d 205c 5c0a 2020  ) \dvec{q} \\.  
-0000ec20: 2020 2020 2020 2020 2020 5c61 6c70 6861            \alpha
-0000ec30: 2026 3d20 5c64 6d61 747b 4a7d 205c 6476   &= \dmat{J} \dv
-0000ec40: 6563 7b71 7d20 2b20 5c6d 6174 7b4a 7d20  ec{q} + \mat{J} 
-0000ec50: 5c64 6476 6563 7b71 7d0a 2020 2020 2020  \ddvec{q}.      
-0000ec60: 2020 7768 6572 650a 2020 2020 2020 2020    where.        
-0000ec70: 2e2e 206d 6174 683a 3a0a 2020 2020 2020  .. math::.      
-0000ec80: 2020 2020 2020 5c64 6d61 747b 4a7d 203d        \dmat{J} =
-0000ec90: 205c 6d61 747b 487d 205c 6476 6563 7b71   \mat{H} \dvec{q
-0000eca0: 7d0a 2020 2020 2020 2020 616e 6420 3a6d  }.        and :m
-0000ecb0: 6174 683a 605c 6d61 747b 487d 205c 696e  ath:`\mat{H} \in
-0000ecc0: 205c 6d61 7468 6262 7b52 7d5e 7b36 5c74   \mathbb{R}^{6\t
-0000ecd0: 696d 6573 206e 205c 7469 6d65 7320 6e7d  imes n \times n}
-0000ece0: 6020 6973 2074 6865 0a20 2020 2020 2020  ` is the.       
-0000ecf0: 2048 6573 7369 616e 2074 656e 736f 722e   Hessian tensor.
-0000ed00: 0a0a 2020 2020 2020 2020 5468 6520 656c  ..        The el
-0000ed10: 656d 656e 7473 206f 6620 7468 6520 4865  ements of the He
-0000ed20: 7373 6961 6e20 6172 650a 2020 2020 2020  ssian are.      
-0000ed30: 2020 2e2e 206d 6174 683a 3a0a 2020 2020    .. math::.    
-0000ed40: 2020 2020 2020 2020 5c6d 6174 7b48 7d5f          \mat{H}_
-0000ed50: 7b69 2c6a 2c6b 7d20 3d20 205c 6672 6163  {i,j,k} =  \frac
-0000ed60: 7b64 5e32 2075 5f69 7d7b 6420 715f 6a20  {d^2 u_i}{d q_j 
-0000ed70: 6420 715f 6b7d 0a20 2020 2020 2020 2077  d q_k}.        w
-0000ed80: 6865 7265 203a 6d61 7468 3a60 7520 3d20  here :math:`u = 
-0000ed90: 5c7b 745f 782c 2074 5f79 2c20 745f 7a2c  \{t_x, t_y, t_z,
-0000eda0: 2072 5f78 2c20 725f 792c 2072 5f7a 5c7d   r_x, r_y, r_z\}
-0000edb0: 6020 6172 6520 7468 6520 656c 656d 656e  ` are the elemen
-0000edc0: 7473 0a20 2020 2020 2020 206f 6620 7468  ts.        of th
-0000edd0: 6520 7370 6174 6961 6c20 7665 6c6f 6369  e spatial veloci
-0000ede0: 7479 2076 6563 746f 722e 0a20 2020 2020  ty vector..     
-0000edf0: 2020 2053 696d 696c 6172 6c79 2c20 7765     Similarly, we
-0000ee00: 2063 616e 2077 7269 7465 0a20 2020 2020   can write.     
-0000ee10: 2020 202e 2e20 6d61 7468 3a3a 0a20 2020     .. math::.   
-0000ee20: 2020 2020 2020 2020 205c 6d61 747b 4a7d           \mat{J}
-0000ee30: 5f7b 692c 6a7d 203d 205c 6672 6163 7b64  _{i,j} = \frac{d
-0000ee40: 2075 5f69 7d7b 6420 715f 6a7d 0a20 2020   u_i}{d q_j}.   
-0000ee50: 2020 2020 200a 2020 2020 2020 2020 3a72       .        :r
-0000ee60: 6566 6572 656e 6365 733a 0a20 2020 2020  eferences:.     
-0000ee70: 2020 2020 2020 202d 204b 696e 656d 6174         - Kinemat
-0000ee80: 6963 2044 6572 6976 6174 6976 6573 2075  ic Derivatives u
-0000ee90: 7369 6e67 2074 6865 2045 6c65 6d65 6e74  sing the Element
-0000eea0: 6172 7920 5472 616e 7366 6f72 6d0a 2020  ary Transform.  
-0000eeb0: 2020 2020 2020 2020 2020 2020 5365 7175              Sequ
-0000eec0: 656e 6365 2c20 4a2e 2048 6176 696c 616e  ence, J. Havilan
-0000eed0: 6420 616e 6420 502e 2043 6f72 6b65 0a20  d and P. Corke. 
-0000eee0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0000eef0: 2020 2072 6574 7572 6e20 7365 6c66 2e65     return self.e
-0000ef00: 7473 2873 7461 7274 2c20 656e 6429 2e68  ts(start, end).h
-0000ef10: 6573 7369 616e 6528 712c 204a 653d 4a65  essiane(q, Je=Je
-0000ef20: 2c20 746f 6f6c 3d74 6f6f 6c29 0a0a 2020  , tool=tool)..  
-0000ef30: 2020 6465 6620 7061 7274 6961 6c5f 666b    def partial_fk
-0000ef40: 696e 6530 280a 2020 2020 2020 2020 7365  ine0(.        se
-0000ef50: 6c66 2c0a 2020 2020 2020 2020 713a 2041  lf,.        q: A
-0000ef60: 7272 6179 4c69 6b65 2c0a 2020 2020 2020  rrayLike,.      
-0000ef70: 2020 6e3a 2069 6e74 203d 2033 2c0a 2020    n: int = 3,.  
-0000ef80: 2020 2020 2020 656e 643a 2055 6e69 6f6e        end: Union
-0000ef90: 5b73 7472 2c20 4c69 6e6b 2c20 4772 6970  [str, Link, Grip
-0000efa0: 7065 722c 204e 6f6e 655d 203d 204e 6f6e  per, None] = Non
-0000efb0: 652c 0a20 2020 2020 2020 2073 7461 7274  e,.        start
-0000efc0: 3a20 556e 696f 6e5b 7374 722c 204c 696e  : Union[str, Lin
-0000efd0: 6b2c 2047 7269 7070 6572 2c20 4e6f 6e65  k, Gripper, None
-0000efe0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 293a  ] = None,.    ):
-0000eff0: 0a20 2020 2020 2020 2072 2222 220a 2020  .        r""".  
-0000f000: 2020 2020 2020 4d61 6e69 7075 6c61 746f        Manipulato
-0000f010: 7220 466f 7277 6172 6420 4b69 6e65 6d61  r Forward Kinema
-0000f020: 7469 6373 206e 7468 2050 6172 7469 616c  tics nth Partial
-0000f030: 2044 6572 6976 6174 6976 650a 0a20 2020   Derivative..   
-0000f040: 2020 2020 2054 6865 206d 616e 6970 756c       The manipul
-0000f050: 6174 6f72 2048 6573 7369 616e 2074 656e  ator Hessian ten
-0000f060: 736f 7220 6d61 7073 206a 6f69 6e74 2061  sor maps joint a
-0000f070: 6363 656c 6572 6174 696f 6e20 746f 2065  cceleration to e
-0000f080: 6e64 2d65 6666 6563 746f 720a 2020 2020  nd-effector.    
-0000f090: 2020 2020 7370 6174 6961 6c20 6163 6365      spatial acce
-0000f0a0: 6c65 7261 7469 6f6e 2c20 6578 7072 6573  leration, expres
-0000f0b0: 7365 6420 696e 2074 6865 2065 6520 6672  sed in the ee fr
-0000f0c0: 616d 652e 2054 6869 730a 2020 2020 2020  ame. This.      
-0000f0d0: 2020 6675 6e63 7469 6f6e 2063 616c 756c    function calul
-0000f0e0: 6361 7465 7320 7468 6973 2062 6173 6564  cates this based
-0000f0f0: 206f 6e20 7468 6520 4554 5320 6f66 2074   on the ETS of t
-0000f100: 6865 2072 6f62 6f74 2e20 4f6e 6520 6f66  he robot. One of
-0000f110: 204a 6520 6f72 2071 0a20 2020 2020 2020   Je or q.       
-0000f120: 2069 7320 7265 7175 6972 6564 2e20 5375   is required. Su
-0000f130: 7070 6c79 204a 6520 6966 2061 6c72 6561  pply Je if alrea
-0000f140: 6479 2063 616c 6375 6c61 7465 6420 746f  dy calculated to
-0000f150: 2073 6176 6520 636f 6d70 7574 6174 696f   save computatio
-0000f160: 6e20 7469 6d65 0a0a 2020 2020 2020 2020  n time..        
-0000f170: 3a70 6172 616d 2071 3a20 5468 6520 6a6f  :param q: The jo
-0000f180: 696e 7420 616e 676c 6573 2f63 6f6e 6669  int angles/confi
-0000f190: 6775 7261 7469 6f6e 206f 6620 7468 6520  guration of the 
-0000f1a0: 726f 626f 7420 284f 7074 696f 6e61 6c2c  robot (Optional,
-0000f1b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000f1c0: 6e6f 7420 7375 7070 6c69 6564 2077 696c  not supplied wil
-0000f1d0: 6c20 7573 6520 7468 6520 7374 6f72 6564  l use the stored
-0000f1e0: 2071 2076 616c 7565 7329 2e0a 2020 2020   q values)..    
-0000f1f0: 2020 2020 3a74 7970 6520 713a 2041 7272      :type q: Arr
-0000f200: 6179 4c69 6b65 0a20 2020 2020 2020 203a  ayLike.        :
-0000f210: 7061 7261 6d20 656e 643a 2074 6865 2066  param end: the f
-0000f220: 696e 616c 206c 696e 6b2f 4772 6970 7065  inal link/Grippe
-0000f230: 7220 7768 6963 6820 7468 6520 4865 7373  r which the Hess
-0000f240: 6961 6e20 7265 7072 6573 656e 7473 0a20  ian represents. 
-0000f250: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0000f260: 6172 743a 2074 6865 2066 6972 7374 206c  art: the first l
-0000f270: 696e 6b20 7768 6963 6820 7468 6520 4865  ink which the He
-0000f280: 7373 6961 6e20 7265 7072 6573 656e 7473  ssian represents
-0000f290: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000f2a0: 746f 6f6c 3a20 6120 7374 6174 6963 2074  tool: a static t
-0000f2b0: 6f6f 6c20 7472 616e 7366 6f72 6d61 7469  ool transformati
-0000f2c0: 6f6e 206d 6174 7269 7820 746f 2061 7070  on matrix to app
-0000f2d0: 6c79 2074 6f20 7468 650a 2020 2020 2020  ly to the.      
-0000f2e0: 2020 2020 2020 656e 6420 6f66 2065 6e64        end of end
-0000f2f0: 2c20 6465 6661 756c 7473 2074 6f20 4e6f  , defaults to No
-0000f300: 6e65 0a0a 2020 2020 2020 2020 3a72 6574  ne..        :ret
-0000f310: 7572 6e3a 2054 6865 206e 7468 2050 6172  urn: The nth Par
-0000f320: 7469 616c 2044 6572 6976 6174 6976 6520  tial Derivative 
-0000f330: 6f66 2074 6865 2066 6f72 7761 7264 206b  of the forward k
-0000f340: 696e 656d 6174 6963 730a 0a20 2020 2020  inematics..     
-0000f350: 2020 203a 7265 6665 7265 6e63 6573 3a0a     :references:.
-0000f360: 2020 2020 2020 2020 2020 2020 2d20 4b69              - Ki
-0000f370: 6e65 6d61 7469 6320 4465 7269 7661 7469  nematic Derivati
-0000f380: 7665 7320 7573 696e 6720 7468 6520 456c  ves using the El
-0000f390: 656d 656e 7461 7279 2054 7261 6e73 666f  ementary Transfo
-0000f3a0: 726d 0a20 2020 2020 2020 2020 2020 2020  rm.             
-0000f3b0: 2053 6571 7565 6e63 652c 204a 2e20 4861   Sequence, J. Ha
-0000f3c0: 7669 6c61 6e64 2061 6e64 2050 2e20 436f  viland and P. Co
-0000f3d0: 726b 650a 2020 2020 2020 2020 2222 220a  rke.        """.
-0000f3e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000f3f0: 7365 6c66 2e65 7473 2873 7461 7274 2c20  self.ets(start, 
-0000f400: 656e 6429 2e70 6172 7469 616c 5f66 6b69  end).partial_fki
-0000f410: 6e65 3028 712c 206e 3d6e 290a 0a20 2020  ne0(q, n=n)..   
-0000f420: 2064 6566 206c 696e 6b5f 636f 6c6c 6973   def link_collis
-0000f430: 696f 6e5f 6461 6d70 6572 280a 2020 2020  ion_damper(.    
-0000f440: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-0000f450: 2020 7368 6170 652c 0a20 2020 2020 2020    shape,.       
-0000f460: 2071 3d4e 6f6e 652c 0a20 2020 2020 2020   q=None,.       
-0000f470: 2064 693d 302e 332c 0a20 2020 2020 2020   di=0.3,.       
-0000f480: 2064 733d 302e 3035 2c0a 2020 2020 2020   ds=0.05,.      
-0000f490: 2020 7869 3d31 2e30 2c0a 2020 2020 2020    xi=1.0,.      
-0000f4a0: 2020 656e 643d 4e6f 6e65 2c0a 2020 2020    end=None,.    
-0000f4b0: 2020 2020 7374 6172 743d 4e6f 6e65 2c0a      start=None,.
-0000f4c0: 2020 2020 2020 2020 636f 6c6c 6973 696f          collisio
-0000f4d0: 6e5f 6c69 7374 3d4e 6f6e 652c 0a20 2020  n_list=None,.   
-0000f4e0: 2029 3a0a 2020 2020 2020 2020 2222 220a   ):.        """.
-0000f4f0: 2020 2020 2020 2020 466f 726d 756c 6174          Formulat
-0000f500: 6573 2061 6e20 696e 6571 7561 6c69 7479  es an inequality
-0000f510: 2063 6f6e 7472 6169 6e74 2077 6869 6368   contraint which
-0000f520: 2c20 7768 656e 206f 7074 696d 6973 6564  , when optimised
-0000f530: 2066 6f72 2077 696c 6c0a 2020 2020 2020   for will.      
-0000f540: 2020 6d61 6b65 2069 7420 696d 706f 7373    make it imposs
-0000f550: 6962 6c65 2066 6f72 2074 6865 2072 6f62  ible for the rob
-0000f560: 6f74 2074 6f20 7275 6e20 696e 746f 2061  ot to run into a
-0000f570: 2063 6f6c 6c69 7369 6f6e 2e20 5265 7175   collision. Requ
-0000f580: 6972 6573 0a20 2020 2020 2020 2053 6565  ires.        See
-0000f590: 2065 7861 6d70 6c65 732f 6e65 6f2e 7079   examples/neo.py
-0000f5a0: 2066 6f72 2075 7365 2063 6173 650a 2020   for use case.  
-0000f5b0: 2020 2020 2020 3a70 6172 616d 2064 733a        :param ds:
-0000f5c0: 2054 6865 206d 696e 696d 756d 2064 6973   The minimum dis
-0000f5d0: 7461 6e63 6520 696e 2077 6869 6368 2061  tance in which a
-0000f5e0: 206a 6f69 6e74 2069 7320 616c 6c6f 7765   joint is allowe
-0000f5f0: 6420 746f 0a20 2020 2020 2020 2020 2020  d to.           
-0000f600: 2061 7070 726f 6163 6820 7468 6520 636f   approach the co
-0000f610: 6c6c 6973 696f 6e20 6f62 6a65 6374 2073  llision object s
-0000f620: 6861 7065 0a20 2020 2020 2020 203a 7479  hape.        :ty
-0000f630: 7065 2064 733a 2066 6c6f 6174 0a20 2020  pe ds: float.   
-0000f640: 2020 2020 203a 7061 7261 6d20 6469 3a20       :param di: 
-0000f650: 5468 6520 696e 666c 7565 6e63 6520 6469  The influence di
-0000f660: 7374 616e 6365 2069 6e20 7768 6963 6820  stance in which 
-0000f670: 7468 6520 7665 6c6f 6369 7479 0a20 2020  the velocity.   
-0000f680: 2020 2020 2020 2020 2064 616d 7065 7220           damper 
-0000f690: 6265 636f 6d65 7320 6163 7469 7665 0a20  becomes active. 
-0000f6a0: 2020 2020 2020 203a 7479 7065 2064 693a         :type di:
-0000f6b0: 2066 6c6f 6174 0a20 2020 2020 2020 203a   float.        :
-0000f6c0: 7061 7261 6d20 7869 3a20 5468 6520 6761  param xi: The ga
-0000f6d0: 696e 2066 6f72 2074 6865 2076 656c 6f63  in for the veloc
-0000f6e0: 6974 7920 6461 6d70 6572 0a20 2020 2020  ity damper.     
-0000f6f0: 2020 203a 7479 7065 2078 693a 2066 6c6f     :type xi: flo
-0000f700: 6174 0a20 2020 2020 2020 203a 7061 7261  at.        :para
-0000f710: 6d20 6672 6f6d 5f6c 696e 6b3a 2054 6865  m from_link: The
-0000f720: 2066 6972 7374 206c 696e 6b20 746f 2063   first link to c
-0000f730: 6f6e 7369 6465 722c 2064 6566 6175 6c74  onsider, default
-0000f740: 7320 746f 2074 6865 2062 6173 650a 2020  s to the base.  
-0000f750: 2020 2020 2020 2020 2020 6c69 6e6b 0a20            link. 
-0000f760: 2020 2020 2020 203a 7479 7065 2066 726f         :type fro
-0000f770: 6d5f 6c69 6e6b 3a20 4c69 6e6b 0a20 2020  m_link: Link.   
-0000f780: 2020 2020 203a 7061 7261 6d20 746f 5f6c       :param to_l
-0000f790: 696e 6b3a 2054 6865 206c 6173 7420 6c69  ink: The last li
-0000f7a0: 6e6b 2074 6f20 636f 6e73 6964 6572 2c20  nk to consider, 
-0000f7b0: 7769 6c6c 2063 6f6e 7369 6465 7220 616c  will consider al
-0000f7c0: 6c20 6c69 6e6b 730a 2020 2020 2020 2020  l links.        
-0000f7d0: 2020 2020 6265 7477 6565 6e20 6672 6f6d      between from
-0000f7e0: 5f6c 696e 6b20 616e 6420 746f 5f6c 696e  _link and to_lin
-0000f7f0: 6b20 696e 2074 6865 2072 6f62 6f74 2c20  k in the robot, 
-0000f800: 6465 6661 756c 7473 2074 6f20 7468 650a  defaults to the.
-0000f810: 2020 2020 2020 2020 2020 2020 656e 642d              end-
-0000f820: 6566 6665 6374 6f72 206c 696e 6b0a 2020  effector link.  
-0000f830: 2020 2020 2020 3a74 7970 6520 746f 5f6c        :type to_l
-0000f840: 696e 6b3a 204c 696e 6b0a 2020 2020 2020  ink: Link.      
-0000f850: 2020 3a72 6574 7572 6e73 3a20 4169 6e2c    :returns: Ain,
-0000f860: 2042 696e 2061 7320 7468 6520 696e 6571   Bin as the ineq
-0000f870: 7561 6c69 7479 2063 6f6e 7472 6169 6e74  uality contraint
-0000f880: 7320 666f 7220 616e 206f 6d70 7469 6d69  s for an omptimi
-0000f890: 736f 720a 2020 2020 2020 2020 3a72 7479  sor.        :rty
-0000f8a0: 7065 3a20 6e64 6172 7261 7928 3629 2c20  pe: ndarray(6), 
-0000f8b0: 6e64 6172 7261 7928 3629 0a20 2020 2020  ndarray(6).     
-0000f8c0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-0000f8d0: 656e 642c 2073 7461 7274 2c20 5f20 3d20  end, start, _ = 
-0000f8e0: 7365 6c66 2e5f 6765 745f 6c69 6d69 745f  self._get_limit_
-0000f8f0: 6c69 6e6b 7328 7374 6172 743d 7374 6172  links(start=star
-0000f900: 742c 2065 6e64 3d65 6e64 290a 0a20 2020  t, end=end)..   
-0000f910: 2020 2020 206c 696e 6b73 2c20 6e2c 205f       links, n, _
-0000f920: 203d 2073 656c 662e 6765 745f 7061 7468   = self.get_path
-0000f930: 2873 7461 7274 3d73 7461 7274 2c20 656e  (start=start, en
-0000f940: 643d 656e 6429 0a0a 2020 2020 2020 2020  d=end)..        
-0000f950: 2320 6966 2071 2069 7320 4e6f 6e65 3a0a  # if q is None:.
-0000f960: 2020 2020 2020 2020 2320 2020 2020 7120          #     q 
-0000f970: 3d20 636f 7079 2873 656c 662e 7129 0a20  = copy(self.q). 
-0000f980: 2020 2020 2020 2023 2065 6c73 653a 0a20         # else:. 
-0000f990: 2020 2020 2020 2023 2020 2020 2071 203d         #     q =
-0000f9a0: 2067 6574 7665 6374 6f72 2871 2c20 6e29   getvector(q, n)
-0000f9b0: 0a0a 2020 2020 2020 2020 6a20 3d20 300a  ..        j = 0.
-0000f9c0: 2020 2020 2020 2020 4169 6e20 3d20 4e6f          Ain = No
-0000f9d0: 6e65 0a20 2020 2020 2020 2062 696e 203d  ne.        bin =
-0000f9e0: 204e 6f6e 650a 0a20 2020 2020 2020 2064   None..        d
-0000f9f0: 6566 2069 6e64 6976 5f63 616c 6375 6c61  ef indiv_calcula
-0000fa00: 7469 6f6e 286c 696e 6b2c 206c 696e 6b5f  tion(link, link_
-0000fa10: 636f 6c2c 2071 293a 0a20 2020 2020 2020  col, q):.       
-0000fa20: 2020 2020 2064 2c20 7754 6c70 2c20 7754       d, wTlp, wT
-0000fa30: 6370 203d 206c 696e 6b5f 636f 6c2e 636c  cp = link_col.cl
-0000fa40: 6f73 6573 745f 706f 696e 7428 7368 6170  osest_point(shap
-0000fa50: 652c 2064 6929 0a0a 2020 2020 2020 2020  e, di)..        
-0000fa60: 2020 2020 6966 2064 2069 7320 6e6f 7420      if d is not 
-0000fa70: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000fa80: 2020 2020 2020 6c70 5463 7020 3d20 2d77        lpTcp = -w
-0000fa90: 546c 7020 2b20 7754 6370 0a0a 2020 2020  Tlp + wTcp..    
-0000faa0: 2020 2020 2020 2020 2020 2020 6e6f 726d              norm
-0000fab0: 203d 206c 7054 6370 202f 2064 0a20 2020   = lpTcp / d.   
-0000fac0: 2020 2020 2020 2020 2020 2020 206e 6f72               nor
-0000fad0: 6d5f 6820 3d20 6578 7061 6e64 5f64 696d  m_h = expand_dim
-0000fae0: 7328 636f 6e63 6174 656e 6174 6528 286e  s(concatenate((n
-0000faf0: 6f72 6d2c 205b 302c 2030 2c20 305d 2929  orm, [0, 0, 0]))
-0000fb00: 2c20 6178 6973 3d30 290a 0a20 2020 2020  , axis=0)..     
-0000fb10: 2020 2020 2020 2020 2020 2023 2074 6f6f             # too
-0000fb20: 6c20 3d20 2873 656c 662e 666b 696e 6528  l = (self.fkine(
-0000fb30: 712c 2065 6e64 3d6c 696e 6b29 2e69 6e76  q, end=link).inv
-0000fb40: 2829 202a 2053 4533 2877 546c 7029 292e  () * SE3(wTlp)).
-0000fb50: 415b 3a33 2c20 335d 0a0a 2020 2020 2020  A[:3, 3]..      
-0000fb60: 2020 2020 2020 2020 2020 2320 4a65 203d            # Je =
-0000fb70: 2073 656c 662e 6a61 636f 6230 2871 2c20   self.jacob0(q, 
-0000fb80: 656e 643d 6c69 6e6b 2c20 746f 6f6c 3d74  end=link, tool=t
-0000fb90: 6f6f 6c29 0a20 2020 2020 2020 2020 2020  ool).           
-0000fba0: 2020 2020 2023 204a 655b 3a33 2c20 3a5d       # Je[:3, :]
-0000fbb0: 203d 2073 656c 662e 5f54 5b3a 332c 203a   = self._T[:3, :
-0000fbc0: 335d 2040 204a 655b 3a33 2c20 3a5d 0a0a  3] @ Je[:3, :]..
-0000fbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fbe0: 2320 6e5f 6469 6d20 3d20 4a65 2e73 6861  # n_dim = Je.sha
-0000fbf0: 7065 5b31 5d0a 2020 2020 2020 2020 2020  pe[1].          
-0000fc00: 2020 2020 2020 2320 6470 203d 206e 6f72        # dp = nor
-0000fc10: 6d5f 6820 4020 7368 6170 652e 760a 2020  m_h @ shape.v.  
-0000fc20: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000fc30: 6c5f 4169 6e20 3d20 7a65 726f 7328 2831  l_Ain = zeros((1
-0000fc40: 2c20 7365 6c66 2e6e 2929 0a0a 2020 2020  , self.n))..    
-0000fc50: 2020 2020 2020 2020 2020 2020 4a65 203d              Je =
-0000fc60: 2073 656c 662e 6a61 636f 6265 2871 2c20   self.jacobe(q, 
-0000fc70: 7374 6172 743d 7365 6c66 2e62 6173 655f  start=self.base_
-0000fc80: 6c69 6e6b 2c20 656e 643d 6c69 6e6b 2c20  link, end=link, 
-0000fc90: 746f 6f6c 3d6c 696e 6b5f 636f 6c2e 5429  tool=link_col.T)
-0000fca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fcb0: 206e 5f64 696d 203d 204a 652e 7368 6170   n_dim = Je.shap
-0000fcc0: 655b 315d 0a20 2020 2020 2020 2020 2020  e[1].           
-0000fcd0: 2020 2020 2064 7020 3d20 6e6f 726d 5f68       dp = norm_h
-0000fce0: 2040 2073 6861 7065 2e76 0a20 2020 2020   @ shape.v.     
-0000fcf0: 2020 2020 2020 2020 2020 206c 5f41 696e             l_Ain
-0000fd00: 203d 207a 6572 6f73 2828 312c 206e 2929   = zeros((1, n))
-0000fd10: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000fd20: 2020 6c5f 4169 6e5b 302c 203a 6e5f 6469    l_Ain[0, :n_di
-0000fd30: 6d5d 203d 206e 6f72 6d5f 6820 4020 4a65  m] = norm_h @ Je
-0000fd40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fd50: 206c 5f62 696e 203d 2028 7869 202a 2028   l_bin = (xi * (
-0000fd60: 6420 2d20 6473 2920 2f20 2864 6920 2d20  d - ds) / (di - 
-0000fd70: 6473 2929 202b 2064 700a 2020 2020 2020  ds)) + dp.      
-0000fd80: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000fd90: 2020 2020 2020 2020 2020 2020 6c5f 4169              l_Ai
-0000fda0: 6e20 3d20 4e6f 6e65 0a20 2020 2020 2020  n = None.       
-0000fdb0: 2020 2020 2020 2020 206c 5f62 696e 203d           l_bin =
-0000fdc0: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
-0000fdd0: 2020 2072 6574 7572 6e20 6c5f 4169 6e2c     return l_Ain,
-0000fde0: 206c 5f62 696e 0a0a 2020 2020 2020 2020   l_bin..        
-0000fdf0: 666f 7220 6c69 6e6b 2069 6e20 6c69 6e6b  for link in link
-0000fe00: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-0000fe10: 6620 6c69 6e6b 2e69 736a 6f69 6e74 3a0a  f link.isjoint:.
-0000fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fe30: 6a20 2b3d 2031 0a0a 2020 2020 2020 2020  j += 1..        
-0000fe40: 2020 2020 6966 2063 6f6c 6c69 7369 6f6e      if collision
-0000fe50: 5f6c 6973 7420 6973 204e 6f6e 653a 0a20  _list is None:. 
-0000fe60: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000fe70: 6f6c 5f6c 6973 7420 3d20 6c69 6e6b 2e63  ol_list = link.c
-0000fe80: 6f6c 6c69 7369 6f6e 0a20 2020 2020 2020  ollision.       
-0000fe90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0000fea0: 2020 2020 2020 2020 2020 2063 6f6c 5f6c             col_l
-0000feb0: 6973 7420 3d20 636f 6c6c 6973 696f 6e5f  ist = collision_
-0000fec0: 6c69 7374 5b6a 202d 2031 5d0a 0a20 2020  list[j - 1]..   
-0000fed0: 2020 2020 2020 2020 2066 6f72 206c 696e           for lin
-0000fee0: 6b5f 636f 6c20 696e 2063 6f6c 5f6c 6973  k_col in col_lis
-0000fef0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0000ff00: 2020 206c 5f41 696e 2c20 6c5f 6269 6e20     l_Ain, l_bin 
-0000ff10: 3d20 696e 6469 765f 6361 6c63 756c 6174  = indiv_calculat
-0000ff20: 696f 6e28 6c69 6e6b 2c20 6c69 6e6b 5f63  ion(link, link_c
-0000ff30: 6f6c 2c20 7129 0a0a 2020 2020 2020 2020  ol, q)..        
-0000ff40: 2020 2020 2020 2020 6966 206c 5f41 696e          if l_Ain
-0000ff50: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-0000ff60: 206c 5f62 696e 2069 7320 6e6f 7420 4e6f   l_bin is not No
-0000ff70: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0000ff80: 2020 2020 2020 2020 6966 2041 696e 2069          if Ain i
-0000ff90: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0000ffa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ffb0: 4169 6e20 3d20 6c5f 4169 6e0a 2020 2020  Ain = l_Ain.    
-0000ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ffd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000ffe0: 2020 2020 2020 2020 2020 2020 2020 4169                Ai
-0000fff0: 6e20 3d20 636f 6e63 6174 656e 6174 6528  n = concatenate(
-00010000: 2841 696e 2c20 6c5f 4169 6e29 290a 0a20  (Ain, l_Ain)).. 
-00010010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010020: 2020 2069 6620 6269 6e20 6973 204e 6f6e     if bin is Non
-00010030: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00010040: 2020 2020 2020 2020 2020 2062 696e 203d             bin =
-00010050: 2061 7272 6179 286c 5f62 696e 290a 2020   array(l_bin).  
-00010060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010070: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00010080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010090: 6269 6e20 3d20 636f 6e63 6174 656e 6174  bin = concatenat
-000100a0: 6528 2862 696e 2c20 6c5f 6269 6e29 290a  e((bin, l_bin)).
-000100b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000100c0: 4169 6e2c 2062 696e 0a0a 2020 2020 6465  Ain, bin..    de
-000100d0: 6620 7669 7369 6f6e 5f63 6f6c 6c69 7369  f vision_collisi
-000100e0: 6f6e 5f64 616d 7065 7228 0a20 2020 2020  on_damper(.     
-000100f0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00010100: 2073 6861 7065 2c0a 2020 2020 2020 2020   shape,.        
-00010110: 6361 6d65 7261 3d4e 6f6e 652c 0a20 2020  camera=None,.   
-00010120: 2020 2020 2063 616d 6572 615f 6e3d 302c       camera_n=0,
-00010130: 0a20 2020 2020 2020 2071 3d4e 6f6e 652c  .        q=None,
-00010140: 0a20 2020 2020 2020 2064 693d 302e 332c  .        di=0.3,
-00010150: 0a20 2020 2020 2020 2064 733d 302e 3035  .        ds=0.05
-00010160: 2c0a 2020 2020 2020 2020 7869 3d31 2e30  ,.        xi=1.0
-00010170: 2c0a 2020 2020 2020 2020 656e 643d 4e6f  ,.        end=No
-00010180: 6e65 2c0a 2020 2020 2020 2020 7374 6172  ne,.        star
-00010190: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-000101a0: 636f 6c6c 6973 696f 6e5f 6c69 7374 3d4e  collision_list=N
-000101b0: 6f6e 652c 0a20 2020 2029 3a0a 2020 2020  one,.    ):.    
-000101c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000101d0: 466f 726d 756c 6174 6573 2061 6e20 696e  Formulates an in
-000101e0: 6571 7561 6c69 7479 2063 6f6e 7472 6169  equality contrai
-000101f0: 6e74 2077 6869 6368 2c20 7768 656e 206f  nt which, when o
-00010200: 7074 696d 6973 6564 2066 6f72 2077 696c  ptimised for wil
-00010210: 6c0a 2020 2020 2020 2020 6d61 6b65 2069  l.        make i
-00010220: 7420 696d 706f 7373 6962 6c65 2066 6f72  t impossible for
-00010230: 2074 6865 2072 6f62 6f74 2074 6f20 7275   the robot to ru
-00010240: 6e20 696e 746f 2061 206c 696e 6520 6f66  n into a line of
-00010250: 2073 6967 6874 2e0a 2020 2020 2020 2020   sight..        
-00010260: 5365 6520 6578 616d 706c 6573 2f66 6574  See examples/fet
-00010270: 6368 5f76 6973 696f 6e2e 7079 2066 6f72  ch_vision.py for
-00010280: 2075 7365 2063 6173 650a 2020 2020 2020   use case.      
-00010290: 2020 3a70 6172 616d 2063 616d 6572 613a    :param camera:
-000102a0: 2054 6865 2063 616d 6572 6120 6c69 6e6b   The camera link
-000102b0: 2c20 6569 7468 6572 2061 7320 6120 726f  , either as a ro
-000102c0: 626f 7469 6320 6c69 6e6b 206f 7220 5345  botic link or SE
-000102d0: 330a 2020 2020 2020 2020 2020 2020 706f  3.            po
-000102e0: 7365 0a20 2020 2020 2020 203a 7479 7065  se.        :type
-000102f0: 2063 616d 6572 613a 2045 526f 626f 7420   camera: ERobot 
-00010300: 6f72 2053 4533 0a20 2020 2020 2020 203a  or SE3.        :
-00010310: 7061 7261 6d20 6361 6d65 7261 5f6e 3a20  param camera_n: 
-00010320: 4465 6772 6565 7320 6f66 2066 7265 6564  Degrees of freed
-00010330: 6f6d 206f 6620 7468 6520 6361 6d65 7261  om of the camera
-00010340: 206c 696e 6b0a 2020 2020 2020 2020 3a74   link.        :t
-00010350: 7970 6520 6361 6d65 7261 5f6e 3a20 696e  ype camera_n: in
-00010360: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-00010370: 2064 733a 2054 6865 206d 696e 696d 756d   ds: The minimum
-00010380: 2064 6973 7461 6e63 6520 696e 2077 6869   distance in whi
-00010390: 6368 2061 206a 6f69 6e74 2069 7320 616c  ch a joint is al
-000103a0: 6c6f 7765 6420 746f 0a20 2020 2020 2020  lowed to.       
-000103b0: 2020 2020 2061 7070 726f 6163 6820 7468       approach th
-000103c0: 6520 636f 6c6c 6973 696f 6e20 6f62 6a65  e collision obje
-000103d0: 6374 2073 6861 7065 0a20 2020 2020 2020  ct shape.       
-000103e0: 203a 7479 7065 2064 733a 2066 6c6f 6174   :type ds: float
-000103f0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00010400: 6469 3a20 5468 6520 696e 666c 7565 6e63  di: The influenc
-00010410: 6520 6469 7374 616e 6365 2069 6e20 7768  e distance in wh
-00010420: 6963 6820 7468 6520 7665 6c6f 6369 7479  ich the velocity
-00010430: 0a20 2020 2020 2020 2020 2020 2064 616d  .            dam
-00010440: 7065 7220 6265 636f 6d65 7320 6163 7469  per becomes acti
-00010450: 7665 0a20 2020 2020 2020 203a 7479 7065  ve.        :type
-00010460: 2064 693a 2066 6c6f 6174 0a20 2020 2020   di: float.     
-00010470: 2020 203a 7061 7261 6d20 7869 3a20 5468     :param xi: Th
-00010480: 6520 6761 696e 2066 6f72 2074 6865 2076  e gain for the v
-00010490: 656c 6f63 6974 7920 6461 6d70 6572 0a20  elocity damper. 
-000104a0: 2020 2020 2020 203a 7479 7065 2078 693a         :type xi:
-000104b0: 2066 6c6f 6174 0a20 2020 2020 2020 203a   float.        :
-000104c0: 7061 7261 6d20 6672 6f6d 5f6c 696e 6b3a  param from_link:
-000104d0: 2054 6865 2066 6972 7374 206c 696e 6b20   The first link 
-000104e0: 746f 2063 6f6e 7369 6465 722c 2064 6566  to consider, def
-000104f0: 6175 6c74 7320 746f 2074 6865 2062 6173  aults to the bas
-00010500: 650a 2020 2020 2020 2020 2020 2020 6c69  e.            li
-00010510: 6e6b 0a20 2020 2020 2020 203a 7479 7065  nk.        :type
-00010520: 2066 726f 6d5f 6c69 6e6b 3a20 454c 696e   from_link: ELin
-00010530: 6b0a 2020 2020 2020 2020 3a70 6172 616d  k.        :param
-00010540: 2074 6f5f 6c69 6e6b 3a20 5468 6520 6c61   to_link: The la
-00010550: 7374 206c 696e 6b20 746f 2063 6f6e 7369  st link to consi
-00010560: 6465 722c 2077 696c 6c20 636f 6e73 6964  der, will consid
-00010570: 6572 2061 6c6c 206c 696e 6b73 0a20 2020  er all links.   
-00010580: 2020 2020 2020 2020 2062 6574 7765 656e           between
-00010590: 2066 726f 6d5f 6c69 6e6b 2061 6e64 2074   from_link and t
-000105a0: 6f5f 6c69 6e6b 2069 6e20 7468 6520 726f  o_link in the ro
-000105b0: 626f 742c 2064 6566 6175 6c74 7320 746f  bot, defaults to
-000105c0: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
-000105d0: 2065 6e64 2d65 6666 6563 746f 7220 6c69   end-effector li
-000105e0: 6e6b 0a20 2020 2020 2020 203a 7479 7065  nk.        :type
-000105f0: 2074 6f5f 6c69 6e6b 3a20 454c 696e 6b0a   to_link: ELink.
-00010600: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-00010610: 3a20 4169 6e2c 2042 696e 2061 7320 7468  : Ain, Bin as th
-00010620: 6520 696e 6571 7561 6c69 7479 2063 6f6e  e inequality con
-00010630: 7472 6169 6e74 7320 666f 7220 616e 206f  traints for an o
-00010640: 6d70 7469 6d69 736f 720a 2020 2020 2020  mptimisor.      
-00010650: 2020 3a72 7479 7065 3a20 6e64 6172 7261    :rtype: ndarra
-00010660: 7928 3629 2c20 6e64 6172 7261 7928 3629  y(6), ndarray(6)
-00010670: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00010680: 2020 2020 2020 6966 2073 7461 7274 2069        if start i
-00010690: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-000106a0: 2020 2020 7374 6172 7420 3d20 7365 6c66      start = self
-000106b0: 2e62 6173 655f 6c69 6e6b 0a0a 2020 2020  .base_link..    
-000106c0: 2020 2020 6966 2065 6e64 2069 7320 4e6f      if end is No
-000106d0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000106e0: 656e 6420 3d20 7365 6c66 2e65 655f 6c69  end = self.ee_li
-000106f0: 6e6b 0a0a 2020 2020 2020 2020 6c69 6e6b  nk..        link
-00010700: 732c 206e 2c20 5f20 3d20 7365 6c66 2e67  s, n, _ = self.g
-00010710: 6574 5f70 6174 6828 7374 6172 743d 7374  et_path(start=st
-00010720: 6172 742c 2065 6e64 3d65 6e64 290a 0a20  art, end=end).. 
-00010730: 2020 2020 2020 206a 203d 2030 0a20 2020         j = 0.   
-00010740: 2020 2020 2041 696e 203d 204e 6f6e 650a       Ain = None.
-00010750: 2020 2020 2020 2020 6269 6e20 3d20 4e6f          bin = No
-00010760: 6e65 0a0a 2020 2020 2020 2020 6465 6620  ne..        def 
-00010770: 726f 7461 7469 6f6e 5f62 6574 7765 656e  rotation_between
-00010780: 5f76 6563 746f 7273 2861 2c20 6229 3a0a  _vectors(a, b):.
-00010790: 2020 2020 2020 2020 2020 2020 6120 3d20              a = 
-000107a0: 6120 2f20 6e70 6e6f 726d 2861 290a 2020  a / npnorm(a).  
-000107b0: 2020 2020 2020 2020 2020 6220 3d20 6220            b = b 
-000107c0: 2f20 6e70 6e6f 726d 2862 290a 0a20 2020  / npnorm(b)..   
-000107d0: 2020 2020 2020 2020 2061 6e67 6c65 203d           angle =
-000107e0: 2061 7263 636f 7328 646f 7428 612c 2062   arccos(dot(a, b
-000107f0: 2929 0a20 2020 2020 2020 2020 2020 2061  )).            a
-00010800: 7869 7320 3d20 6372 6f73 7328 612c 2062  xis = cross(a, b
-00010810: 290a 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00010820: 6574 7572 6e20 5345 332e 416e 676c 6541  eturn SE3.AngleA
-00010830: 7869 7328 616e 676c 652c 2061 7869 7329  xis(angle, axis)
-00010840: 0a0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-00010850: 6e73 7461 6e63 6528 6361 6d65 7261 2c20  nstance(camera, 
-00010860: 4552 6f62 6f74 293a 0a20 2020 2020 2020  ERobot):.       
-00010870: 2020 2020 2077 5463 7020 3d20 6361 6d65       wTcp = came
-00010880: 7261 2e66 6b69 6e65 2863 616d 6572 612e  ra.fkine(camera.
-00010890: 7129 2e41 5b3a 332c 2033 5d0a 2020 2020  q).A[:3, 3].    
-000108a0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-000108b0: 6e63 6528 6361 6d65 7261 2c20 5345 3329  nce(camera, SE3)
-000108c0: 3a0a 2020 2020 2020 2020 2020 2020 7754  :.            wT
-000108d0: 6370 203d 2063 616d 6572 612e 740a 0a20  cp = camera.t.. 
-000108e0: 2020 2020 2020 2077 5474 7020 3d20 7368         wTtp = sh
-000108f0: 6170 652e 545b 3a33 2c20 2d31 5d0a 0a20  ape.T[:3, -1].. 
-00010900: 2020 2020 2020 2023 2043 7265 6174 6520         # Create 
-00010910: 6c69 6e65 206f 6620 7369 6768 7420 6f62  line of sight ob
-00010920: 6a65 6374 0a20 2020 2020 2020 206c 6f73  ject.        los
-00010930: 5f6d 6964 203d 2053 4533 2828 7754 6370  _mid = SE3((wTcp
-00010940: 202b 2077 5474 7029 202f 2032 290a 2020   + wTtp) / 2).  
-00010950: 2020 2020 2020 6c6f 735f 6f72 6965 6e74        los_orient
-00010960: 6174 696f 6e20 3d20 726f 7461 7469 6f6e  ation = rotation
-00010970: 5f62 6574 7765 656e 5f76 6563 746f 7273  _between_vectors
-00010980: 2861 7272 6179 285b 302e 302c 2030 2e30  (array([0.0, 0.0
-00010990: 2c20 312e 305d 292c 2077 5463 7020 2d20  , 1.0]), wTcp - 
-000109a0: 7754 7470 290a 0a20 2020 2020 2020 206c  wTtp)..        l
-000109b0: 6f73 203d 2043 796c 696e 6465 7228 0a20  os = Cylinder(. 
-000109c0: 2020 2020 2020 2020 2020 2072 6164 6975             radiu
-000109d0: 733d 302e 3030 312c 0a20 2020 2020 2020  s=0.001,.       
-000109e0: 2020 2020 206c 656e 6774 683d 6e70 6e6f       length=npno
-000109f0: 726d 2877 5463 7020 2d20 7754 7470 292c  rm(wTcp - wTtp),
-00010a00: 0a20 2020 2020 2020 2020 2020 2062 6173  .            bas
-00010a10: 653d 286c 6f73 5f6d 6964 202a 206c 6f73  e=(los_mid * los
-00010a20: 5f6f 7269 656e 7461 7469 6f6e 292c 0a20  _orientation),. 
-00010a30: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00010a40: 2020 6465 6620 696e 6469 765f 6361 6c63    def indiv_calc
-00010a50: 756c 6174 696f 6e28 6c69 6e6b 2c20 6c69  ulation(link, li
-00010a60: 6e6b 5f63 6f6c 2c20 7129 3a0a 2020 2020  nk_col, q):.    
-00010a70: 2020 2020 2020 2020 642c 2077 546c 702c          d, wTlp,
-00010a80: 2077 5476 7020 3d20 6c69 6e6b 5f63 6f6c   wTvp = link_col
-00010a90: 2e63 6c6f 7365 7374 5f70 6f69 6e74 286c  .closest_point(l
-00010aa0: 6f73 2c20 6469 290a 0a20 2020 2020 2020  os, di)..       
-00010ab0: 2020 2020 2069 6620 6420 6973 206e 6f74       if d is not
-00010ac0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00010ad0: 2020 2020 2020 206c 7054 7670 203d 202d         lpTvp = -
-00010ae0: 7754 6c70 202b 2077 5476 700a 0a20 2020  wTlp + wTvp..   
-00010af0: 2020 2020 2020 2020 2020 2020 206e 6f72               nor
-00010b00: 6d20 3d20 6c70 5476 7020 2f20 640a 2020  m = lpTvp / d.  
-00010b10: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
-00010b20: 726d 5f68 203d 2065 7870 616e 645f 6469  rm_h = expand_di
-00010b30: 6d73 2863 6f6e 6361 7465 6e61 7465 2828  ms(concatenate((
-00010b40: 6e6f 726d 2c20 5b30 2c20 302c 2030 5d29  norm, [0, 0, 0])
-00010b50: 292c 2061 7869 733d 3029 0a0a 2020 2020  ), axis=0)..    
-00010b60: 2020 2020 2020 2020 2020 2020 746f 6f6c              tool
-00010b70: 203d 2053 4533 2828 696e 7628 7365 6c66   = SE3((inv(self
-00010b80: 2e66 6b69 6e65 2871 2c20 656e 643d 6c69  .fkine(q, end=li
-00010b90: 6e6b 292e 4129 2040 2053 4533 2877 546c  nk).A) @ SE3(wTl
-00010ba0: 7029 2e41 295b 3a33 2c20 335d 290a 0a20  p).A)[:3, 3]).. 
-00010bb0: 2020 2020 2020 2020 2020 2020 2020 204a                 J
-00010bc0: 6520 3d20 7365 6c66 2e6a 6163 6f62 3028  e = self.jacob0(
-00010bd0: 712c 2065 6e64 3d6c 696e 6b2c 2074 6f6f  q, end=link, too
-00010be0: 6c3d 746f 6f6c 2e41 290a 2020 2020 2020  l=tool.A).      
-00010bf0: 2020 2020 2020 2020 2020 4a65 5b3a 332c            Je[:3,
-00010c00: 203a 5d20 3d20 7365 6c66 2e5f 545b 3a33   :] = self._T[:3
-00010c10: 2c20 3a33 5d20 4020 4a65 5b3a 332c 203a  , :3] @ Je[:3, :
-00010c20: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00010c30: 2020 6e5f 6469 6d20 3d20 4a65 2e73 6861    n_dim = Je.sha
-00010c40: 7065 5b31 5d0a 0a20 2020 2020 2020 2020  pe[1]..         
-00010c50: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00010c60: 616e 6365 2863 616d 6572 612c 2045 526f  ance(camera, ERo
-00010c70: 626f 7429 3a0a 2020 2020 2020 2020 2020  bot):.          
-00010c80: 2020 2020 2020 2020 2020 4a76 203d 2063            Jv = c
-00010c90: 616d 6572 612e 6a61 636f 6230 2863 616d  amera.jacob0(cam
-00010ca0: 6572 612e 7129 0a20 2020 2020 2020 2020  era.q).         
-00010cb0: 2020 2020 2020 2020 2020 204a 765b 3a33             Jv[:3
-00010cc0: 2c20 3a5d 203d 2073 656c 662e 5f54 5b3a  , :] = self._T[:
-00010cd0: 332c 203a 335d 2040 204a 765b 3a33 2c20  3, :3] @ Jv[:3, 
-00010ce0: 3a5d 0a0a 2020 2020 2020 2020 2020 2020  :]..            
-00010cf0: 2020 2020 2020 2020 4a76 202a 3d20 6e70          Jv *= np
-00010d00: 6e6f 726d 2877 5476 7020 2d20 7368 6170  norm(wTvp - shap
-00010d10: 652e 545b 3a33 2c20 2d31 5d29 202f 206c  e.T[:3, -1]) / l
-00010d20: 6f73 2e6c 656e 6774 680a 0a20 2020 2020  os.length..     
-00010d30: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00010d40: 7063 203d 206e 6f72 6d5f 6820 4020 4a76  pc = norm_h @ Jv
-00010d50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010d60: 2020 2020 2064 7063 203d 2063 6f6e 6361       dpc = conca
-00010d70: 7465 6e61 7465 280a 2020 2020 2020 2020  tenate(.        
-00010d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010d90: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00010da0: 2020 2020 2020 2020 2020 2020 2020 6470                dp
-00010db0: 635b 302c 203a 2d63 616d 6572 615f 6e5d  c[0, :-camera_n]
-00010dc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00010dd0: 2020 2020 2020 2020 2020 2020 2020 7a65                ze
-00010de0: 726f 7328 7365 6c66 2e6e 202d 2028 6361  ros(self.n - (ca
-00010df0: 6d65 7261 2e6e 202d 2063 616d 6572 615f  mera.n - camera_
-00010e00: 6e29 292c 0a20 2020 2020 2020 2020 2020  n)),.           
-00010e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010e20: 2064 7063 5b30 2c20 2d63 616d 6572 615f   dpc[0, -camera_
-00010e30: 6e3a 5d2c 0a20 2020 2020 2020 2020 2020  n:],.           
-00010e40: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00010e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010e60: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00010e70: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00010e80: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00010e90: 7063 203d 207a 6572 6f73 2828 312c 2073  pc = zeros((1, s
-00010ea0: 656c 662e 6e20 2b20 6361 6d65 7261 5f6e  elf.n + camera_n
-00010eb0: 2929 0a0a 2020 2020 2020 2020 2020 2020  ))..            
-00010ec0: 2020 2020 6470 7420 3d20 6e6f 726d 5f68      dpt = norm_h
-00010ed0: 2040 2073 6861 7065 2e76 0a20 2020 2020   @ shape.v.     
-00010ee0: 2020 2020 2020 2020 2020 2064 7074 202a             dpt *
-00010ef0: 3d20 6e70 6e6f 726d 2877 5476 7020 2d20  = npnorm(wTvp - 
-00010f00: 7754 6370 2920 2f20 6c6f 732e 6c65 6e67  wTcp) / los.leng
-00010f10: 7468 0a0a 2020 2020 2020 2020 2020 2020  th..            
-00010f20: 2020 2020 6c5f 4169 6e20 3d20 7a65 726f      l_Ain = zero
-00010f30: 7328 2831 2c20 7365 6c66 2e6e 202b 2063  s((1, self.n + c
-00010f40: 616d 6572 615f 6e29 290a 2020 2020 2020  amera_n)).      
-00010f50: 2020 2020 2020 2020 2020 6c5f 4169 6e5b            l_Ain[
-00010f60: 302c 203a 6e5f 6469 6d5d 203d 206e 6f72  0, :n_dim] = nor
-00010f70: 6d5f 6820 4020 4a65 0a20 2020 2020 2020  m_h @ Je.       
-00010f80: 2020 2020 2020 2020 206c 5f41 696e 202d           l_Ain -
-00010f90: 3d20 6470 630a 2020 2020 2020 2020 2020  = dpc.          
-00010fa0: 2020 2020 2020 6c5f 6269 6e20 3d20 2878        l_bin = (x
-00010fb0: 6920 2a20 2864 202d 2064 7329 202f 2028  i * (d - ds) / (
-00010fc0: 6469 202d 2064 7329 2920 2b20 6470 740a  di - ds)) + dpt.
-00010fd0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00010fe0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00010ff0: 2020 6c5f 4169 6e20 3d20 4e6f 6e65 0a20    l_Ain = None. 
-00011000: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00011010: 5f62 696e 203d 204e 6f6e 650a 0a20 2020  _bin = None..   
-00011020: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00011030: 6c5f 4169 6e2c 206c 5f62 696e 0a0a 2020  l_Ain, l_bin..  
-00011040: 2020 2020 2020 666f 7220 6c69 6e6b 2069        for link i
-00011050: 6e20 6c69 6e6b 733a 0a20 2020 2020 2020  n links:.       
-00011060: 2020 2020 2069 6620 6c69 6e6b 2e69 736a       if link.isj
-00011070: 6f69 6e74 3a0a 2020 2020 2020 2020 2020  oint:.          
-00011080: 2020 2020 2020 6a20 2b3d 2031 0a0a 2020        j += 1..  
-00011090: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-000110a0: 6c69 7369 6f6e 5f6c 6973 7420 6973 204e  lision_list is N
-000110b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000110c0: 2020 2020 2063 6f6c 5f6c 6973 7420 3d20       col_list = 
-000110d0: 6c69 6e6b 2e63 6f6c 6c69 7369 6f6e 0a20  link.collision. 
-000110e0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000110f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011100: 2063 6f6c 5f6c 6973 7420 3d20 636f 6c6c   col_list = coll
-00011110: 6973 696f 6e5f 6c69 7374 5b6a 202d 2031  ision_list[j - 1
-00011120: 5d0a 0a20 2020 2020 2020 2020 2020 2066  ]..            f
-00011130: 6f72 206c 696e 6b5f 636f 6c20 696e 2063  or link_col in c
-00011140: 6f6c 5f6c 6973 743a 0a20 2020 2020 2020  ol_list:.       
-00011150: 2020 2020 2020 2020 206c 5f41 696e 2c20           l_Ain, 
-00011160: 6c5f 6269 6e20 3d20 696e 6469 765f 6361  l_bin = indiv_ca
-00011170: 6c63 756c 6174 696f 6e28 6c69 6e6b 2c20  lculation(link, 
-00011180: 6c69 6e6b 5f63 6f6c 2c20 7129 0a0a 2020  link_col, q)..  
-00011190: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000111a0: 206c 5f41 696e 2069 7320 6e6f 7420 4e6f   l_Ain is not No
-000111b0: 6e65 2061 6e64 206c 5f62 696e 2069 7320  ne and l_bin is 
-000111c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000111d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000111e0: 2041 696e 2069 7320 4e6f 6e65 3a0a 2020   Ain is None:.  
-000111f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011200: 2020 2020 2020 4169 6e20 3d20 6c5f 4169        Ain = l_Ai
-00011210: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-00011220: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00011230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011240: 2020 2020 4169 6e20 3d20 636f 6e63 6174      Ain = concat
-00011250: 656e 6174 6528 2841 696e 2c20 6c5f 4169  enate((Ain, l_Ai
-00011260: 6e29 290a 0a20 2020 2020 2020 2020 2020  n))..           
-00011270: 2020 2020 2020 2020 2069 6620 6269 6e20           if bin 
-00011280: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00011290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000112a0: 2062 696e 203d 2061 7272 6179 286c 5f62   bin = array(l_b
-000112b0: 696e 290a 2020 2020 2020 2020 2020 2020  in).            
-000112c0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000112d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000112e0: 2020 2020 2020 6269 6e20 3d20 636f 6e63        bin = conc
-000112f0: 6174 656e 6174 6528 2862 696e 2c20 6c5f  atenate((bin, l_
-00011300: 6269 6e29 290a 0a20 2020 2020 2020 2072  bin))..        r
-00011310: 6574 7572 6e20 4169 6e2c 2062 696e 0a0a  eturn Ain, bin..
-00011320: 2020 2020 2320 696e 7665 7273 6520 6479      # inverse dy
-00011330: 6e61 6d69 6373 2028 7265 6375 7273 6976  namics (recursiv
-00011340: 6520 4e65 7774 6f6e 2d45 756c 6572 2920  e Newton-Euler) 
-00011350: 7573 696e 6720 7370 6174 6961 6c20 7665  using spatial ve
-00011360: 6374 6f72 206e 6f74 6174 696f 6e0a 2020  ctor notation.  
-00011370: 2020 6465 6620 726e 6528 7365 6c66 2c20    def rne(self, 
-00011380: 712c 2071 642c 2071 6464 2c20 7379 6d62  q, qd, qdd, symb
-00011390: 6f6c 6963 3d46 616c 7365 2c20 6772 6176  olic=False, grav
-000113a0: 6974 793d 4e6f 6e65 293a 0a0a 2020 2020  ity=None):..    
-000113b0: 2020 2020 6e20 3d20 7365 6c66 2e6e 0a0a      n = self.n..
-000113c0: 2020 2020 2020 2020 2320 616c 6c6f 6361          # alloca
-000113d0: 7465 2069 6e74 6572 6d65 6469 6174 6520  te intermediate 
-000113e0: 7661 7269 6162 6c65 730a 2020 2020 2020  variables.      
-000113f0: 2020 5875 7020 3d20 5345 332e 416c 6c6f    Xup = SE3.Allo
-00011400: 6328 6e29 0a20 2020 2020 2020 2058 7472  c(n).        Xtr
-00011410: 6565 203d 2053 4533 2e41 6c6c 6f63 286e  ee = SE3.Alloc(n
-00011420: 290a 0a20 2020 2020 2020 2076 203d 2053  )..        v = S
-00011430: 7061 7469 616c 5665 6c6f 6369 7479 2e41  patialVelocity.A
-00011440: 6c6c 6f63 286e 290a 2020 2020 2020 2020  lloc(n).        
-00011450: 6120 3d20 5370 6174 6961 6c41 6363 656c  a = SpatialAccel
-00011460: 6572 6174 696f 6e2e 416c 6c6f 6328 6e29  eration.Alloc(n)
-00011470: 0a20 2020 2020 2020 2066 203d 2053 7061  .        f = Spa
-00011480: 7469 616c 466f 7263 652e 416c 6c6f 6328  tialForce.Alloc(
-00011490: 6e29 0a20 2020 2020 2020 2049 203d 2053  n).        I = S
-000114a0: 7061 7469 616c 496e 6572 7469 612e 416c  patialInertia.Al
-000114b0: 6c6f 6328 6e29 2020 2320 6e6f 7161 0a20  loc(n)  # noqa. 
-000114c0: 2020 2020 2020 2073 203d 205b 5d20 2023         s = []  #
-000114d0: 206a 6f69 6e74 206d 6f74 696f 6e20 7375   joint motion su
-000114e0: 6273 7061 6365 0a0a 2020 2020 2020 2020  bspace..        
-000114f0: 6966 2073 796d 626f 6c69 633a 0a20 2020  if symbolic:.   
-00011500: 2020 2020 2020 2020 2051 203d 2065 6d70           Q = emp
-00011510: 7479 2828 6e2c 292c 2064 7479 7065 3d22  ty((n,), dtype="
-00011520: 4f22 2920 2023 206a 6f69 6e74 2074 6f72  O")  # joint tor
-00011530: 7175 652f 666f 7263 650a 2020 2020 2020  que/force.      
-00011540: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00011550: 2020 2020 5120 3d20 656d 7074 7928 286e      Q = empty((n
-00011560: 2c29 2920 2023 206a 6f69 6e74 2074 6f72  ,))  # joint tor
-00011570: 7175 652f 666f 7263 650a 0a20 2020 2020  que/force..     
-00011580: 2020 2023 2054 4f44 4f20 5368 6f75 6c64     # TODO Should
-00011590: 2074 6865 2064 796e 616d 6963 2070 6172   the dynamic par
-000115a0: 616d 6574 6572 7320 6f66 2073 7461 7469  ameters of stati
-000115b0: 6320 6c69 6e6b 7320 7072 6563 6564 696e  c links precedin
-000115c0: 6720 6a6f 696e 7420 6265 0a20 2020 2020  g joint be.     
-000115d0: 2020 2023 2073 6f6d 6568 6f77 206d 6572     # somehow mer
-000115e0: 6765 6420 7769 7468 2074 6865 206a 6f69  ged with the joi
-000115f0: 6e74 3f0a 0a20 2020 2020 2020 2023 2041  nt?..        # A
-00011600: 2074 656d 7020 7661 7269 6162 6c65 2074   temp variable t
-00011610: 6f20 6861 6e64 6c65 2073 7461 7469 6320  o handle static 
-00011620: 6a6f 696e 7473 0a20 2020 2020 2020 2054  joints.        T
-00011630: 7320 3d20 5345 3328 290a 0a20 2020 2020  s = SE3()..     
-00011640: 2020 2023 2041 2063 6f75 6e74 6572 2074     # A counter t
-00011650: 6872 6f75 6768 206a 6f69 6e74 730a 2020  hrough joints.  
-00011660: 2020 2020 2020 6a20 3d20 300a 0a20 2020        j = 0..   
-00011670: 2020 2020 2023 2069 6e69 7469 616c 697a       # initializ
-00011680: 6520 696e 7465 726d 6564 6961 7465 2076  e intermediate v
-00011690: 6172 6961 626c 6573 0a20 2020 2020 2020  ariables.       
-000116a0: 2066 6f72 206c 696e 6b20 696e 2073 656c   for link in sel
-000116b0: 662e 6c69 6e6b 733a 0a20 2020 2020 2020  f.links:.       
-000116c0: 2020 2020 2069 6620 6c69 6e6b 2e69 736a       if link.isj
-000116d0: 6f69 6e74 3a0a 2020 2020 2020 2020 2020  oint:.          
-000116e0: 2020 2020 2020 495b 6a5d 203d 2053 7061        I[j] = Spa
-000116f0: 7469 616c 496e 6572 7469 6128 6d3d 6c69  tialInertia(m=li
-00011700: 6e6b 2e6d 2c20 723d 6c69 6e6b 2e72 290a  nk.m, r=link.r).
-00011710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011720: 6966 2073 796d 626f 6c69 6320 616e 6420  if symbolic and 
-00011730: 6c69 6e6b 2e54 7320 6973 204e 6f6e 653a  link.Ts is None:
-00011740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011750: 2020 2020 2058 7472 6565 5b6a 5d20 3d20       Xtree[j] = 
-00011760: 5345 3328 6579 6528 342c 2064 7479 7065  SE3(eye(4, dtype
-00011770: 3d22 4f22 292c 2063 6865 636b 3d46 616c  ="O"), check=Fal
-00011780: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
-00011790: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000117a0: 2020 2020 2020 2020 2020 2020 2020 5874                Xt
-000117b0: 7265 655b 6a5d 203d 2054 7320 2a20 5345  ree[j] = Ts * SE
-000117c0: 3328 6c69 6e6b 2e54 732c 2063 6865 636b  3(link.Ts, check
-000117d0: 3d46 616c 7365 290a 0a20 2020 2020 2020  =False)..       
-000117e0: 2020 2020 2020 2020 2069 6620 6c69 6e6b           if link
-000117f0: 2e76 2069 7320 6e6f 7420 4e6f 6e65 3a0a  .v is not None:.
-00011800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011810: 2020 2020 732e 6170 7065 6e64 286c 696e      s.append(lin
-00011820: 6b2e 762e 7329 0a0a 2020 2020 2020 2020  k.v.s)..        
-00011830: 2020 2020 2020 2020 2320 496e 6372 656d          # Increm
-00011840: 656e 7420 7468 6520 6a6f 696e 7420 636f  ent the joint co
-00011850: 756e 7465 720a 2020 2020 2020 2020 2020  unter.          
-00011860: 2020 2020 2020 6a20 2b3d 2031 0a0a 2020        j += 1..  
-00011870: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00011880: 5265 7365 7420 7468 6520 5473 2074 7261  Reset the Ts tra
-00011890: 636b 6572 0a20 2020 2020 2020 2020 2020  cker.           
-000118a0: 2020 2020 2054 7320 3d20 5345 3328 290a       Ts = SE3().
-000118b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000118c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000118d0: 2020 2320 544f 444f 204b 6565 7020 7472    # TODO Keep tr
-000118e0: 6163 6b20 6f66 2069 6e65 7274 6961 2061  ack of inertia a
-000118f0: 6e64 2074 7261 6e73 666f 726d 3f3f 3f0a  nd transform???.
-00011900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011910: 5473 202a 3d20 5345 3328 6c69 6e6b 2e54  Ts *= SE3(link.T
-00011920: 732c 2063 6865 636b 3d46 616c 7365 290a  s, check=False).
-00011930: 0a20 2020 2020 2020 2069 6620 6772 6176  .        if grav
-00011940: 6974 7920 6973 204e 6f6e 653a 0a20 2020  ity is None:.   
-00011950: 2020 2020 2020 2020 2061 5f67 7261 7620           a_grav 
-00011960: 3d20 2d53 7061 7469 616c 4163 6365 6c65  = -SpatialAccele
-00011970: 7261 7469 6f6e 2873 656c 662e 6772 6176  ration(self.grav
-00011980: 6974 7929 0a20 2020 2020 2020 2065 6c73  ity).        els
-00011990: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
-000119a0: 5f67 7261 7620 3d20 2d53 7061 7469 616c  _grav = -Spatial
-000119b0: 4163 6365 6c65 7261 7469 6f6e 2867 7261  Acceleration(gra
-000119c0: 7669 7479 290a 0a20 2020 2020 2020 2023  vity)..        #
-000119d0: 2066 6f72 7761 7264 2072 6563 7572 7369   forward recursi
-000119e0: 6f6e 0a20 2020 2020 2020 2066 6f72 206a  on.        for j
-000119f0: 2069 6e20 7261 6e67 6528 302c 206e 293a   in range(0, n):
-00011a00: 0a20 2020 2020 2020 2020 2020 2076 4a20  .            vJ 
-00011a10: 3d20 5370 6174 6961 6c56 656c 6f63 6974  = SpatialVelocit
-00011a20: 7928 735b 6a5d 202a 2071 645b 6a5d 290a  y(s[j] * qd[j]).
-00011a30: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
-00011a40: 7261 6e73 666f 726d 2066 726f 6d20 7061  ransform from pa
-00011a50: 7265 6e74 286a 2920 746f 206a 0a20 2020  rent(j) to j.   
-00011a60: 2020 2020 2020 2020 2058 7570 5b6a 5d20           Xup[j] 
-00011a70: 3d20 5345 3328 7365 6c66 2e6c 696e 6b73  = SE3(self.links
-00011a80: 5b6a 5d2e 4128 715b 6a5d 2929 2e69 6e76  [j].A(q[j])).inv
-00011a90: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-00011aa0: 6966 2073 656c 662e 6c69 6e6b 735b 6a5d  if self.links[j]
-00011ab0: 2e70 6172 656e 7420 6973 204e 6f6e 653a  .parent is None:
-00011ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011ad0: 2076 5b6a 5d20 3d20 764a 0a20 2020 2020   v[j] = vJ.     
-00011ae0: 2020 2020 2020 2020 2020 2061 5b6a 5d20             a[j] 
-00011af0: 3d20 5875 705b 6a5d 202a 2061 5f67 7261  = Xup[j] * a_gra
-00011b00: 7620 2b20 5370 6174 6961 6c41 6363 656c  v + SpatialAccel
-00011b10: 6572 6174 696f 6e28 735b 6a5d 202a 2071  eration(s[j] * q
-00011b20: 6464 5b6a 5d29 0a20 2020 2020 2020 2020  dd[j]).         
-00011b30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00011b40: 2020 2020 2020 2020 206a 7020 3d20 7365           jp = se
-00011b50: 6c66 2e6c 696e 6b73 5b6a 5d2e 7061 7265  lf.links[j].pare
-00011b60: 6e74 2e6a 696e 6465 7820 2023 2074 7970  nt.jindex  # typ
-00011b70: 653a 2069 676e 6f72 650a 2020 2020 2020  e: ignore.      
-00011b80: 2020 2020 2020 2020 2020 765b 6a5d 203d            v[j] =
-00011b90: 2058 7570 5b6a 5d20 2a20 765b 6a70 5d20   Xup[j] * v[jp] 
-00011ba0: 2b20 764a 0a20 2020 2020 2020 2020 2020  + vJ.           
-00011bb0: 2020 2020 2061 5b6a 5d20 3d20 5875 705b       a[j] = Xup[
-00011bc0: 6a5d 202a 2061 5b6a 705d 202b 2053 7061  j] * a[jp] + Spa
-00011bd0: 7469 616c 4163 6365 6c65 7261 7469 6f6e  tialAcceleration
-00011be0: 2873 5b6a 5d20 2a20 7164 645b 6a5d 2920  (s[j] * qdd[j]) 
-00011bf0: 2b20 765b 6a5d 2040 2076 4a0a 0a20 2020  + v[j] @ vJ..   
-00011c00: 2020 2020 2020 2020 2066 5b6a 5d20 3d20           f[j] = 
-00011c10: 495b 6a5d 202a 2061 5b6a 5d20 2b20 765b  I[j] * a[j] + v[
-00011c20: 6a5d 2040 2028 495b 6a5d 202a 2076 5b6a  j] @ (I[j] * v[j
-00011c30: 5d29 0a0a 2020 2020 2020 2020 2320 6261  ])..        # ba
-00011c40: 636b 7761 7264 2072 6563 7572 7369 6f6e  ckward recursion
-00011c50: 0a20 2020 2020 2020 2066 6f72 206a 2069  .        for j i
-00011c60: 6e20 7265 7665 7273 6564 2872 616e 6765  n reversed(range
-00011c70: 2830 2c20 6e29 293a 0a0a 2020 2020 2020  (0, n)):..      
-00011c80: 2020 2020 2020 2320 6e65 7874 206c 696e        # next lin
-00011c90: 6520 636f 756c 6420 6265 2064 6f74 2829  e could be dot()
-00011ca0: 2c20 6275 7420 6661 696c 7320 666f 7220  , but fails for 
-00011cb0: 7379 6d62 6f6c 6963 2061 7267 756d 656e  symbolic argumen
-00011cc0: 7473 0a20 2020 2020 2020 2020 2020 2051  ts.            Q
-00011cd0: 5b6a 5d20 3d20 7375 6d28 665b 6a5d 2e41  [j] = sum(f[j].A
-00011ce0: 202a 2073 5b6a 5d29 0a0a 2020 2020 2020   * s[j])..      
-00011cf0: 2020 2020 2020 6966 2073 656c 662e 6c69        if self.li
-00011d00: 6e6b 735b 6a5d 2e70 6172 656e 7420 6973  nks[j].parent is
-00011d10: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00011d20: 2020 2020 2020 2020 2020 206a 7020 3d20             jp = 
-00011d30: 7365 6c66 2e6c 696e 6b73 5b6a 5d2e 7061  self.links[j].pa
-00011d40: 7265 6e74 2e6a 696e 6465 7820 2023 2074  rent.jindex  # t
-00011d50: 7970 653a 2069 676e 6f72 650a 2020 2020  ype: ignore.    
-00011d60: 2020 2020 2020 2020 2020 2020 665b 6a70              f[jp
-00011d70: 5d20 3d20 665b 6a70 5d20 2b20 5875 705b  ] = f[jp] + Xup[
-00011d80: 6a5d 202a 2066 5b6a 5d0a 0a20 2020 2020  j] * f[j]..     
-00011d90: 2020 2072 6574 7572 6e20 510a 0a20 2020     return Q..   
-00011da0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
-00011db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011de0: 2d2d 2d2d 2d2d 2d2d 2023 0a0a 2020 2020  -------- #..    
-00011df0: 6465 6620 696b 5f6c 6d5f 6368 616e 280a  def ik_lm_chan(.
-00011e00: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00011e10: 2020 2020 2020 5465 703a 2055 6e69 6f6e        Tep: Union
-00011e20: 5b6e 6461 7272 6179 2c20 5345 335d 2c0a  [ndarray, SE3],.
-00011e30: 2020 2020 2020 2020 656e 643a 2055 6e69          end: Uni
-00011e40: 6f6e 5b73 7472 2c20 4c69 6e6b 2c20 4772  on[str, Link, Gr
-00011e50: 6970 7065 722c 204e 6f6e 655d 203d 204e  ipper, None] = N
-00011e60: 6f6e 652c 0a20 2020 2020 2020 2073 7461  one,.        sta
-00011e70: 7274 3a20 556e 696f 6e5b 7374 722c 204c  rt: Union[str, L
-00011e80: 696e 6b2c 2047 7269 7070 6572 2c20 4e6f  ink, Gripper, No
-00011e90: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-00011ea0: 2020 2020 7130 3a20 556e 696f 6e5b 6e64      q0: Union[nd
-00011eb0: 6172 7261 792c 204e 6f6e 655d 203d 204e  array, None] = N
-00011ec0: 6f6e 652c 0a20 2020 2020 2020 2069 6c69  one,.        ili
-00011ed0: 6d69 743a 2069 6e74 203d 2033 302c 0a20  mit: int = 30,. 
-00011ee0: 2020 2020 2020 2073 6c69 6d69 743a 2069         slimit: i
-00011ef0: 6e74 203d 2031 3030 2c0a 2020 2020 2020  nt = 100,.      
-00011f00: 2020 746f 6c3a 2066 6c6f 6174 203d 2031    tol: float = 1
-00011f10: 652d 362c 0a20 2020 2020 2020 2072 656a  e-6,.        rej
-00011f20: 6563 745f 6a6c 3a20 626f 6f6c 203d 2054  ect_jl: bool = T
-00011f30: 7275 652c 0a20 2020 2020 2020 2077 653a  rue,.        we:
-00011f40: 2055 6e69 6f6e 5b6e 6461 7272 6179 2c20   Union[ndarray, 
-00011f50: 4e6f 6e65 5d20 3d20 4e6f 6e65 2c0a 2020  None] = None,.  
-00011f60: 2020 2020 2020 cebb 3a20 666c 6f61 7420        ..: float 
-00011f70: 3d20 312e 302c 0a20 2020 2029 202d 3e20  = 1.0,.    ) -> 
-00011f80: 5475 706c 655b 6e64 6172 7261 792c 2069  Tuple[ndarray, i
-00011f90: 6e74 2c20 696e 742c 2069 6e74 2c20 666c  nt, int, int, fl
-00011fa0: 6f61 745d 3a0a 2020 2020 2020 2020 2222  oat]:.        ""
-00011fb0: 220a 2020 2020 2020 2020 4e75 6d65 7269  ".        Numeri
-00011fc0: 6361 6c20 696e 7665 7273 6520 6b69 6e65  cal inverse kine
-00011fd0: 6d61 7469 6373 2062 7920 4c65 7665 6e62  matics by Levenb
-00011fe0: 6572 672d 4d61 7271 7561 6474 206f 7074  erg-Marquadt opt
-00011ff0: 696d 697a 6174 696f 6e20 2843 6861 6e27  imization (Chan'
-00012000: 7320 4d65 7468 6f64 290a 0a20 2020 2020  s Method)..     
-00012010: 2020 203a 7061 7261 6d20 5465 703a 2054     :param Tep: T
-00012020: 6865 2064 6573 6972 6564 2065 6e64 2d65  he desired end-e
-00012030: 6666 6563 746f 7220 706f 7365 206f 7220  ffector pose or 
-00012040: 706f 7365 2074 7261 6a65 6374 6f72 790a  pose trajectory.
-00012050: 2020 2020 2020 2020 3a70 6172 616d 2065          :param e
-00012060: 6e64 3a20 7468 6520 7061 7274 6963 756c  nd: the particul
-00012070: 6172 206c 696e 6b20 6f72 2067 7269 7070  ar link or gripp
-00012080: 6572 2074 6f20 636f 6d70 7574 6520 7468  er to compute th
-00012090: 6520 706f 7365 206f 660a 2020 2020 2020  e pose of.      
-000120a0: 2020 3a70 6172 616d 2073 7461 7274 3a20    :param start: 
-000120b0: 7468 6520 6c69 6e6b 2063 6f6e 7369 6465  the link conside
-000120c0: 7265 6420 6173 2074 6865 2062 6173 6520  red as the base 
-000120d0: 6672 616d 652c 2064 6566 6175 6c74 7320  frame, defaults 
-000120e0: 746f 2074 6865 2072 6f62 6f74 7327 7320  to the robots's 
-000120f0: 6261 7365 2066 7261 6d65 0a20 2020 2020  base frame.     
-00012100: 2020 203a 7061 7261 6d20 7130 3a20 696e     :param q0: in
-00012110: 6974 6961 6c20 6a6f 696e 7420 636f 6e66  itial joint conf
-00012120: 6967 7572 6174 696f 6e20 2864 6566 6175  iguration (defau
-00012130: 6c74 2074 6f20 7261 6e64 6f6d 2076 616c  lt to random val
-00012140: 6964 206a 6f69 6e74 0a20 2020 2020 2020  id joint.       
-00012150: 2020 2020 2063 6f6e 6669 6775 7261 7469       configurati
-00012160: 6f6e 2063 6f6e 7472 6169 6e65 6420 6279  on contrained by
-00012170: 2074 6865 206a 6f69 6e74 206c 696d 6974   the joint limit
-00012180: 7320 6f66 2074 6865 2072 6f62 6f74 290a  s of the robot).
-00012190: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-000121a0: 6c69 6d69 743a 206d 6178 696d 756d 206e  limit: maximum n
-000121b0: 756d 6265 7220 6f66 2069 7465 7261 7469  umber of iterati
-000121c0: 6f6e 7320 7065 7220 7365 6172 6368 0a20  ons per search. 
-000121d0: 2020 2020 2020 203a 7061 7261 6d20 736c         :param sl
-000121e0: 696d 6974 3a20 6d61 7869 6d75 6d20 6e75  imit: maximum nu
-000121f0: 6d62 6572 206f 6620 7365 6172 6368 2061  mber of search a
-00012200: 7474 656d 7074 730a 2020 2020 2020 2020  ttempts.        
-00012210: 3a70 6172 616d 2074 6f6c 3a20 6669 6e61  :param tol: fina
-00012220: 6c20 6572 726f 7220 746f 6c65 7261 6e63  l error toleranc
-00012230: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00012240: 2072 656a 6563 745f 6a6c 3a20 636f 6e73   reject_jl: cons
-00012250: 7472 6169 6e20 7468 6520 736f 6c75 7469  train the soluti
-00012260: 6f6e 2074 6f20 6265 696e 6720 7769 7468  on to being with
-00012270: 696e 2074 6865 206a 6f69 6e74 206c 696d  in the joint lim
-00012280: 6974 7320 6f66 0a20 2020 2020 2020 2020  its of.         
-00012290: 2020 2074 6865 2072 6f62 6f74 2028 7265     the robot (re
-000122a0: 6a65 6374 2073 6f6c 7574 696f 6e20 7769  ject solution wi
-000122b0: 7468 2069 6e76 616c 6964 206a 6f69 6e74  th invalid joint
-000122c0: 2063 6f6e 6669 6775 7261 7469 6f6e 7320   configurations 
-000122d0: 616e 6420 7065 7266 726f 6d0a 2020 2020  and perfrom.    
-000122e0: 2020 2020 2020 2020 616e 6f74 6865 7220          another 
-000122f0: 7365 6172 6368 2075 7020 746f 2074 6865  search up to the
-00012300: 2073 6c69 6d69 7429 0a20 2020 2020 2020   slimit).       
-00012310: 203a 7061 7261 6d20 7765 3a20 6120 6d61   :param we: a ma
-00012320: 736b 2076 6563 746f 7220 7768 6963 6820  sk vector which 
-00012330: 7765 6967 6874 7320 7468 6520 656e 642d  weights the end-
-00012340: 6566 6665 6374 6f72 2065 7272 6f72 2070  effector error p
-00012350: 7269 6f72 6974 792e 0a20 2020 2020 2020  riority..       
-00012360: 2020 2020 2043 6f72 7265 7370 6f6e 6473       Corresponds
-00012370: 2074 6f20 7472 616e 736c 6174 696f 6e20   to translation 
-00012380: 696e 2058 2c20 5920 616e 6420 5a20 616e  in X, Y and Z an
-00012390: 6420 726f 7461 7469 6f6e 2061 626f 7574  d rotation about
-000123a0: 2058 2c20 5920 616e 6420 5a0a 2020 2020   X, Y and Z.    
-000123b0: 2020 2020 2020 2020 7265 7370 6563 7469          respecti
-000123c0: 7665 6c79 0a20 2020 2020 2020 203a 7061  vely.        :pa
-000123d0: 7261 6d20 cebb 3a20 7661 6c75 6520 6f66  ram ..: value of
-000123e0: 206c 616d 6264 6120 666f 7220 7468 6520   lambda for the 
-000123f0: 6461 6d70 696e 6720 6d61 7472 6978 2057  damping matrix W
-00012400: 6e0a 0a20 2020 2020 2020 203a 7265 7475  n..        :retu
-00012410: 726e 3a20 696e 7665 7273 6520 6b69 6e65  rn: inverse kine
-00012420: 6d61 7469 6320 736f 6c75 7469 6f6e 0a20  matic solution. 
-00012430: 2020 2020 2020 203a 7274 7970 653a 2074         :rtype: t
-00012440: 7570 6c65 2028 712c 2073 7563 6365 7373  uple (q, success
-00012450: 2c20 6974 6572 6174 696f 6e73 2c20 7365  , iterations, se
-00012460: 6172 6368 6573 2c20 7265 7369 6475 616c  arches, residual
-00012470: 290a 0a20 2020 2020 2020 2060 6073 6f6c  )..        ``sol
-00012480: 203d 2065 7473 2e69 6b5f 6c6d 5f63 6861   = ets.ik_lm_cha
-00012490: 6e28 5465 7029 6060 2061 7265 2074 6865  n(Tep)`` are the
-000124a0: 206a 6f69 6e74 2063 6f6f 7264 696e 6174   joint coordinat
-000124b0: 6573 2028 6e29 2063 6f72 7265 7370 6f6e  es (n) correspon
-000124c0: 6469 6e67 0a20 2020 2020 2020 2074 6f20  ding.        to 
-000124d0: 7468 6520 726f 626f 7420 656e 642d 6566  the robot end-ef
-000124e0: 6665 6374 6f72 2070 6f73 6520 6060 5465  fector pose ``Te
-000124f0: 7060 6020 7768 6963 6820 6973 2061 6e20  p`` which is an 
-00012500: 6060 5345 3360 6020 6f72 2060 606e 6461  ``SE3`` or ``nda
-00012510: 7272 6179 6060 206f 626a 6563 742e 0a20  rray`` object.. 
-00012520: 2020 2020 2020 2054 6869 7320 6d65 7468         This meth
-00012530: 6f64 2063 616e 2062 6520 7573 6564 2066  od can be used f
-00012540: 6f72 2072 6f62 6f74 7320 7769 7468 2061  or robots with a
-00012550: 6e79 206e 756d 6265 7220 6f66 2064 6567  ny number of deg
-00012560: 7265 6573 206f 6620 6672 6565 646f 6d2e  rees of freedom.
-00012570: 0a20 2020 2020 2020 2054 6865 2072 6574  .        The ret
-00012580: 7572 6e20 7661 6c75 6520 6060 736f 6c60  urn value ``sol`
-00012590: 6020 6973 2061 2074 7570 6c65 2077 6974  ` is a tuple wit
-000125a0: 6820 656c 656d 656e 7473 3a0a 0a20 2020  h elements:..   
-000125b0: 2020 2020 203d 3d3d 3d3d 3d3d 3d3d 3d3d       ===========
-000125c0: 3d20 2020 203d 3d3d 3d3d 3d3d 3d3d 3d20  =    ========== 
-000125d0: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-000125e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000125f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012600: 0a20 2020 2020 2020 2045 6c65 6d65 6e74  .        Element
-00012610: 2020 2020 2020 2020 2054 7970 6520 2020           Type   
-00012620: 2020 2020 2044 6573 6372 6970 7469 6f6e       Description
-00012630: 0a20 2020 2020 2020 203d 3d3d 3d3d 3d3d  .        =======
-00012640: 3d3d 3d3d 3d20 2020 203d 3d3d 3d3d 3d3d  =====    =======
-00012650: 3d3d 3d20 203d 3d3d 3d3d 3d3d 3d3d 3d3d  ===  ===========
-00012660: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012670: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012680: 3d3d 3d3d 0a20 2020 2020 2020 2060 6071  ====.        ``q
-00012690: 6060 2020 2020 2020 2020 2020 206e 6461  ``           nda
-000126a0: 7272 6179 286e 2920 206a 6f69 6e74 2063  rray(n)  joint c
-000126b0: 6f6f 7264 696e 6174 6573 2069 6e20 756e  oordinates in un
-000126c0: 6974 7320 6f66 2072 6164 6961 6e73 206f  its of radians o
-000126d0: 7220 6d65 7472 6573 0a20 2020 2020 2020  r metres.       
-000126e0: 2060 6073 7563 6365 7373 6060 2020 2020   ``success``    
-000126f0: 2069 6e74 2020 2020 2020 2020 2077 6865   int         whe
-00012700: 7468 6572 2061 2073 6f6c 7574 696f 6e20  ther a solution 
-00012710: 7761 7320 666f 756e 640a 2020 2020 2020  was found.      
-00012720: 2020 6060 6974 6572 6174 696f 6e73 6060    ``iterations``
-00012730: 2020 696e 7420 2020 2020 2020 2020 746f    int         to
-00012740: 7461 6c20 6e75 6d62 6572 206f 6620 6974  tal number of it
-00012750: 6572 6174 696f 6e73 0a20 2020 2020 2020  erations.       
-00012760: 2060 6073 6561 7263 6865 7360 6020 2020   ``searches``   
-00012770: 2069 6e74 2020 2020 2020 2020 2074 6f74   int         tot
-00012780: 616c 206e 756d 6265 7220 6f66 2073 6561  al number of sea
-00012790: 7263 6865 730a 2020 2020 2020 2020 6060  rches.        ``
-000127a0: 7265 7369 6475 616c 6060 2020 2020 666c  residual``    fl
-000127b0: 6f61 7420 2020 2020 2020 6669 6e61 6c20  oat       final 
-000127c0: 7661 6c75 6520 6f66 2063 6f73 7420 6675  value of cost fu
-000127d0: 6e63 7469 6f6e 0a20 2020 2020 2020 203d  nction.        =
-000127e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 2020 203d  ===========    =
-000127f0: 3d3d 3d3d 3d3d 3d3d 3d20 203d 3d3d 3d3d  =========  =====
-00012800: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012810: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012820: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2020 2020  ==========..    
-00012830: 2020 2020 4966 2060 6073 7563 6365 7373      If ``success
-00012840: 203d 3d20 3060 6020 7468 6520 6060 7160   == 0`` the ``q`
-00012850: 6020 7661 6c75 6573 2077 696c 6c20 6265  ` values will be
-00012860: 2076 616c 6964 206e 756d 6265 7273 2c20   valid numbers, 
-00012870: 6275 7420 7468 650a 2020 2020 2020 2020  but the.        
-00012880: 736f 6c75 7469 6f6e 2077 696c 6c20 6265  solution will be
-00012890: 2069 6e20 6572 726f 722e 2020 5468 6520   in error.  The 
-000128a0: 616d 6f75 6e74 206f 6620 6572 726f 7220  amount of error 
-000128b0: 6973 2069 6e64 6963 6174 6564 2062 790a  is indicated by.
-000128c0: 2020 2020 2020 2020 7468 6520 6060 7265          the ``re
-000128d0: 7369 6475 616c 6060 2e0a 0a20 2020 2020  sidual``...     
-000128e0: 2020 202a 2a4a 6f69 6e74 204c 696d 6974     **Joint Limit
-000128f0: 732a 2a3a 0a0a 2020 2020 2020 2020 6060  s**:..        ``
-00012900: 736f 6c20 3d20 726f 626f 742e 696b 696e  sol = robot.ikin
-00012910: 655f 4c4d 2854 2c20 736c 696d 6974 3d31  e_LM(T, slimit=1
-00012920: 3030 2960 6020 7768 6963 6820 6973 2074  00)`` which is t
-00012930: 6865 2064 6561 6675 616c 7420 666f 7220  he deafualt for 
-00012940: 7468 6973 206d 6574 686f 642e 0a20 2020  this method..   
-00012950: 2020 2020 2054 6865 2073 6f6c 7665 7220       The solver 
-00012960: 7769 6c6c 2069 6e69 7469 616c 6973 6520  will initialise 
-00012970: 6120 736f 6c75 7469 6f6e 2061 7474 656d  a solution attem
-00012980: 7074 2077 6974 6820 6120 7261 6e64 6f6d  pt with a random
-00012990: 2076 616c 6964 2071 3020 616e 640a 2020   valid q0 and.  
-000129a0: 2020 2020 2020 7065 7266 6f72 6d20 6120        perform a 
-000129b0: 6d61 7869 6d75 6d20 6f66 2069 6c69 6d69  maximum of ilimi
-000129c0: 7420 7374 6570 7320 7769 7468 696e 2074  t steps within t
-000129d0: 6869 7320 6174 7465 6d70 742e 2049 6620  his attempt. If 
-000129e0: 6120 736f 6c75 7469 6f6e 2069 7320 6e6f  a solution is no
-000129f0: 740a 2020 2020 2020 2020 666f 756e 642c  t.        found,
-00012a00: 2074 6869 7320 7072 6f63 6573 7320 6973   this process is
-00012a10: 2072 6570 6561 7465 6420 7570 2074 6f20   repeated up to 
-00012a20: 736c 696d 6974 2074 696d 6573 2e0a 0a20  slimit times... 
-00012a30: 2020 2020 2020 202a 2a47 6c6f 6261 6c20         **Global 
-00012a40: 7365 6172 6368 2a2a 3a0a 0a20 2020 2020  search**:..     
-00012a50: 2020 2060 6073 6f6c 203d 2072 6f62 6f74     ``sol = robot
-00012a60: 2e69 6b69 6e65 5f4c 4d28 542c 2072 656a  .ikine_LM(T, rej
-00012a70: 6563 745f 6a6c 3d54 7275 6529 6060 2069  ect_jl=True)`` i
-00012a80: 7320 7468 6520 6465 6166 7561 6c74 2066  s the deafualt f
-00012a90: 6f72 2074 6869 7320 6d65 7468 6f64 2e0a  or this method..
-00012aa0: 2020 2020 2020 2020 4279 2073 6574 7469          By setti
-00012ab0: 6e67 2072 656a 6563 745f 6a6c 2074 6f20  ng reject_jl to 
-00012ac0: 5472 7565 2c20 7468 6520 736f 6c76 6572  True, the solver
-00012ad0: 2077 696c 6c20 6469 7363 6172 6420 616e   will discard an
-00012ae0: 7920 736f 6c75 7469 6f6e 2077 6869 6368  y solution which
-00012af0: 0a20 2020 2020 2020 2076 696f 6c61 7465  .        violate
-00012b00: 7320 7468 6520 6465 6669 6e65 6420 6a6f  s the defined jo
-00012b10: 696e 7420 6c69 6d69 7473 206f 6620 7468  int limits of th
-00012b20: 6520 726f 626f 742e 2054 6865 2073 6f6c  e robot. The sol
-00012b30: 7665 7220 7769 6c6c 2074 6865 6e0a 2020  ver will then.  
-00012b40: 2020 2020 2020 7265 2d69 6e69 7469 616c        re-initial
-00012b50: 6973 6520 7769 7468 2061 206e 6577 2072  ise with a new r
-00012b60: 616e 646f 6d20 7130 2061 6e64 2072 6570  andom q0 and rep
-00012b70: 6561 7420 7468 6520 7072 6f63 6573 7320  eat the process 
-00012b80: 7570 2074 6f20 736c 696d 6974 2074 696d  up to slimit tim
-00012b90: 6573 2e0a 2020 2020 2020 2020 4e6f 7465  es..        Note
-00012ba0: 2074 6861 7420 6669 6e64 696e 6720 6120   that finding a 
-00012bb0: 736f 6c75 7469 6f6e 2077 6974 6820 7661  solution with va
-00012bc0: 6c69 6420 6a6f 696e 7420 636f 6f72 6469  lid joint coordi
-00012bd0: 6e61 7465 7320 7461 6b65 7320 6c6f 6e67  nates takes long
-00012be0: 6572 2074 6861 6e0a 2020 2020 2020 2020  er than.        
-00012bf0: 7769 7468 6f75 742e 0a0a 2020 2020 2020  without...      
-00012c00: 2020 2a2a 556e 6465 7261 6374 7561 7465    **Underactuate
-00012c10: 6420 726f 626f 7473 3a2a 2a0a 0a20 2020  d robots:**..   
-00012c20: 2020 2020 2046 6f72 2074 6865 2063 6173       For the cas
-00012c30: 6520 7768 6572 6520 7468 6520 6d61 6e69  e where the mani
-00012c40: 7075 6c61 746f 7220 6861 7320 6665 7765  pulator has fewe
-00012c50: 7220 7468 616e 2036 2044 4f46 2074 6865  r than 6 DOF the
-00012c60: 0a20 2020 2020 2020 2073 6f6c 7574 696f  .        solutio
-00012c70: 6e20 7370 6163 6520 6861 7320 6d6f 7265  n space has more
-00012c80: 2064 696d 656e 7369 6f6e 7320 7468 616e   dimensions than
-00012c90: 2063 616e 2062 6520 7370 616e 6e65 6420   can be spanned 
-00012ca0: 6279 2074 6865 0a20 2020 2020 2020 206d  by the.        m
-00012cb0: 616e 6970 756c 6174 6f72 206a 6f69 6e74  anipulator joint
-00012cc0: 2063 6f6f 7264 696e 6174 6573 2e0a 0a20   coordinates... 
-00012cd0: 2020 2020 2020 2049 6e20 7468 6973 2063         In this c
-00012ce0: 6173 6520 7765 2073 7065 6369 6679 2074  ase we specify t
-00012cf0: 6865 2060 6077 6560 6020 6f70 7469 6f6e  he ``we`` option
-00012d00: 2077 6865 7265 2074 6865 2060 6077 6560   where the ``we`
-00012d10: 6020 7665 6374 6f72 0a20 2020 2020 2020  ` vector.       
-00012d20: 2028 3629 2073 7065 6369 6669 6573 2074   (6) specifies t
-00012d30: 6865 2043 6172 7465 7369 616e 2044 4f46  he Cartesian DOF
-00012d40: 2028 696e 2074 6865 2077 7269 7374 2063   (in the wrist c
-00012d50: 6f6f 7264 696e 6174 6520 6672 616d 6529  oordinate frame)
-00012d60: 2074 6861 740a 2020 2020 2020 2020 7769   that.        wi
-00012d70: 6c6c 2062 6520 6967 6e6f 7265 6420 696e  ll be ignored in
-00012d80: 2072 6561 6368 696e 6720 6120 736f 6c75   reaching a solu
-00012d90: 7469 6f6e 2e20 2054 6865 2077 6520 7665  tion.  The we ve
-00012da0: 6374 6f72 2068 6173 2073 6978 0a20 2020  ctor has six.   
-00012db0: 2020 2020 2065 6c65 6d65 6e74 7320 7468       elements th
-00012dc0: 6174 2063 6f72 7265 7370 6f6e 6420 746f  at correspond to
-00012dd0: 2074 7261 6e73 6c61 7469 6f6e 2069 6e20   translation in 
-00012de0: 582c 2059 2061 6e64 205a 2c20 616e 6420  X, Y and Z, and 
-00012df0: 726f 7461 7469 6f6e 0a20 2020 2020 2020  rotation.       
-00012e00: 2061 626f 7574 2058 2c20 5920 616e 6420   about X, Y and 
-00012e10: 5a20 7265 7370 6563 7469 7665 6c79 2e20  Z respectively. 
-00012e20: 5468 6520 7661 6c75 6520 6361 6e20 6265  The value can be
-00012e30: 2030 2028 666f 7220 6967 6e6f 7265 290a   0 (for ignore).
-00012e40: 2020 2020 2020 2020 6f72 2061 626f 7665          or above
-00012e50: 2074 6f20 6173 7369 676e 2061 2070 7269   to assign a pri
-00012e60: 6f72 6974 7920 7265 6c61 7469 7665 2074  ority relative t
-00012e70: 6f20 6f74 6865 7220 4361 7274 6573 6961  o other Cartesia
-00012e80: 6e20 446f 462e 2054 6865 206e 756d 6265  n DoF. The numbe
-00012e90: 720a 2020 2020 2020 2020 6f66 206e 6f6e  r.        of non
-00012ea0: 2d7a 6572 6f20 656c 656d 656e 7473 206d  -zero elements m
-00012eb0: 7573 7420 6571 7561 6c20 7468 6520 6e75  ust equal the nu
-00012ec0: 6d62 6572 206f 6620 6d61 6e69 7075 6c61  mber of manipula
-00012ed0: 746f 7220 444f 462e 0a0a 2020 2020 2020  tor DOF...      
-00012ee0: 2020 466f 7220 6578 616d 706c 6520 7768    For example wh
-00012ef0: 656e 2075 7369 6e67 2061 2033 2044 4f46  en using a 3 DOF
-00012f00: 206d 616e 6970 756c 6174 6f72 2074 6f6f   manipulator too
-00012f10: 6c20 6f72 6965 6e74 6174 696f 6e20 6d69  l orientation mi
-00012f20: 6768 740a 2020 2020 2020 2020 6265 2075  ght.        be u
-00012f30: 6e69 6d70 6f72 7461 6e74 2c20 696e 2077  nimportant, in w
-00012f40: 6869 6368 2063 6173 6520 7573 6520 7468  hich case use th
-00012f50: 6520 6f70 7469 6f6e 2060 6077 653d 5b31  e option ``we=[1
-00012f60: 2c20 312c 2031 2c20 302c 2030 2c20 305d  , 1, 1, 0, 0, 0]
-00012f70: 6060 2e0a 0a0a 0a20 2020 2020 2020 202e  ``.....        .
-00012f80: 2e20 6e6f 7465 3a3a 0a0a 2020 2020 2020  . note::..      
-00012f90: 2020 2020 2020 2d20 5365 6520 6054 6f6f        - See `Too
-00012fa0: 6c62 6f78 206b 696e 656d 6174 6963 7320  lbox kinematics 
-00012fb0: 7769 6b69 2070 6167 650a 2020 2020 2020  wiki page.      
-00012fc0: 2020 2020 2020 2020 2020 3c68 7474 7073            <https
-00012fd0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7065  ://github.com/pe
-00012fe0: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
-00012ff0: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
-00013000: 2f77 696b 692f 4b69 6e65 6d61 7469 6373  /wiki/Kinematics
-00013010: 3e60 5f0a 2020 2020 2020 2020 2020 2020  >`_.            
-00013020: 2d20 496d 706c 656d 656e 7473 2061 204c  - Implements a L
-00013030: 6576 656e 6265 7267 2d4d 6172 7175 6164  evenberg-Marquad
-00013040: 7420 7661 7269 6162 6c65 2d64 616d 7069  t variable-dampi
-00013050: 6e67 2073 6f6c 7665 722e 0a20 2020 2020  ng solver..     
-00013060: 2020 2020 2020 202d 2054 6865 2074 6f6c         - The tol
-00013070: 6572 616e 6365 2069 7320 636f 6d70 7574  erance is comput
-00013080: 6564 206f 6e20 7468 6520 6e6f 726d 206f  ed on the norm o
-00013090: 6620 7468 6520 6572 726f 7220 6265 7477  f the error betw
-000130a0: 6565 6e0a 2020 2020 2020 2020 2020 2020  een.            
-000130b0: 2020 2020 6375 7272 656e 7420 616e 6420      current and 
-000130c0: 6465 7369 7265 6420 746f 6f6c 2070 6f73  desired tool pos
-000130d0: 652e 2020 5468 6973 206e 6f72 6d20 6973  e.  This norm is
-000130e0: 2063 6f6d 7075 7465 6420 6672 6f6d 0a20   computed from. 
-000130f0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00013100: 6973 7461 6e63 6573 2061 6e64 2061 6e67  istances and ang
-00013110: 6c65 7320 7769 7468 6f75 7420 616e 7920  les without any 
-00013120: 6b69 6e64 206f 6620 7765 6967 6874 696e  kind of weightin
-00013130: 672e 0a20 2020 2020 2020 2020 2020 202d  g..            -
-00013140: 2054 6865 2069 6e76 6572 7365 206b 696e   The inverse kin
-00013150: 656d 6174 6963 2073 6f6c 7574 696f 6e20  ematic solution 
-00013160: 6973 2067 656e 6572 616c 6c79 206e 6f74  is generally not
-00013170: 2075 6e69 7175 652c 2061 6e64 0a20 2020   unique, and.   
-00013180: 2020 2020 2020 2020 2020 2020 2064 6570               dep
-00013190: 656e 6473 206f 6e20 7468 6520 696e 6974  ends on the init
-000131a0: 6961 6c20 6775 6573 7320 6060 7130 6060  ial guess ``q0``
-000131b0: 2e0a 0a20 2020 2020 2020 203a 7265 6665  ...        :refe
-000131c0: 7265 6e63 6573 3a0a 2020 2020 2020 2020  rences:.        
-000131d0: 2020 2020 544f 444f 0a0a 2020 2020 2020      TODO..      
-000131e0: 2020 3a73 6565 616c 736f 3a0a 2020 2020    :seealso:.    
-000131f0: 2020 2020 2020 2020 544f 444f 0a20 2020          TODO.   
-00013200: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00013210: 2020 7265 7475 726e 2073 656c 662e 6574    return self.et
-00013220: 7328 7374 6172 742c 2065 6e64 292e 696b  s(start, end).ik
-00013230: 5f6c 6d5f 6368 616e 2854 6570 2c20 7130  _lm_chan(Tep, q0
-00013240: 2c20 696c 696d 6974 2c20 736c 696d 6974  , ilimit, slimit
-00013250: 2c20 746f 6c2c 2072 656a 6563 745f 6a6c  , tol, reject_jl
-00013260: 2c20 7765 2c20 cebb 290a 0a20 2020 2064  , we, ..)..    d
-00013270: 6566 2069 6b5f 6c6d 5f77 616d 706c 6572  ef ik_lm_wampler
-00013280: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00013290: 2020 2020 2020 2020 5465 703a 2055 6e69          Tep: Uni
-000132a0: 6f6e 5b6e 6461 7272 6179 2c20 5345 335d  on[ndarray, SE3]
-000132b0: 2c0a 2020 2020 2020 2020 656e 643a 2055  ,.        end: U
-000132c0: 6e69 6f6e 5b73 7472 2c20 4c69 6e6b 2c20  nion[str, Link, 
-000132d0: 4772 6970 7065 722c 204e 6f6e 655d 203d  Gripper, None] =
-000132e0: 204e 6f6e 652c 0a20 2020 2020 2020 2073   None,.        s
-000132f0: 7461 7274 3a20 556e 696f 6e5b 7374 722c  tart: Union[str,
-00013300: 204c 696e 6b2c 2047 7269 7070 6572 2c20   Link, Gripper, 
-00013310: 4e6f 6e65 5d20 3d20 4e6f 6e65 2c0a 2020  None] = None,.  
-00013320: 2020 2020 2020 7130 3a20 556e 696f 6e5b        q0: Union[
-00013330: 6e64 6172 7261 792c 204e 6f6e 655d 203d  ndarray, None] =
-00013340: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
-00013350: 6c69 6d69 743a 2069 6e74 203d 2033 302c  limit: int = 30,
-00013360: 0a20 2020 2020 2020 2073 6c69 6d69 743a  .        slimit:
-00013370: 2069 6e74 203d 2031 3030 2c0a 2020 2020   int = 100,.    
-00013380: 2020 2020 746f 6c3a 2066 6c6f 6174 203d      tol: float =
-00013390: 2031 652d 362c 0a20 2020 2020 2020 2072   1e-6,.        r
-000133a0: 656a 6563 745f 6a6c 3a20 626f 6f6c 203d  eject_jl: bool =
-000133b0: 2054 7275 652c 0a20 2020 2020 2020 2077   True,.        w
-000133c0: 653a 2055 6e69 6f6e 5b6e 6461 7272 6179  e: Union[ndarray
-000133d0: 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65 2c0a  , None] = None,.
-000133e0: 2020 2020 2020 2020 cebb 3a20 666c 6f61          ..: floa
-000133f0: 7420 3d20 312e 302c 0a20 2020 2029 202d  t = 1.0,.    ) -
-00013400: 3e20 5475 706c 655b 6e64 6172 7261 792c  > Tuple[ndarray,
-00013410: 2069 6e74 2c20 696e 742c 2069 6e74 2c20   int, int, int, 
-00013420: 666c 6f61 745d 3a0a 2020 2020 2020 2020  float]:.        
-00013430: 2222 220a 2020 2020 2020 2020 4e75 6d65  """.        Nume
-00013440: 7269 6361 6c20 696e 7665 7273 6520 6b69  rical inverse ki
-00013450: 6e65 6d61 7469 6373 2062 7920 4c65 7665  nematics by Leve
-00013460: 6e62 6572 672d 4d61 7271 7561 6474 206f  nberg-Marquadt o
-00013470: 7074 696d 697a 6174 696f 6e20 2857 616d  ptimization (Wam
-00013480: 706c 6572 7327 7320 4d65 7468 6f64 290a  plers's Method).
-00013490: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000134a0: 5465 703a 2054 6865 2064 6573 6972 6564  Tep: The desired
-000134b0: 2065 6e64 2d65 6666 6563 746f 7220 706f   end-effector po
-000134c0: 7365 206f 7220 706f 7365 2074 7261 6a65  se or pose traje
-000134d0: 6374 6f72 790a 2020 2020 2020 2020 3a70  ctory.        :p
-000134e0: 6172 616d 2065 6e64 3a20 7468 6520 7061  aram end: the pa
-000134f0: 7274 6963 756c 6172 206c 696e 6b20 6f72  rticular link or
-00013500: 2067 7269 7070 6572 2074 6f20 636f 6d70   gripper to comp
-00013510: 7574 6520 7468 6520 706f 7365 206f 660a  ute the pose of.
-00013520: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00013530: 7461 7274 3a20 7468 6520 6c69 6e6b 2063  tart: the link c
-00013540: 6f6e 7369 6465 7265 6420 6173 2074 6865  onsidered as the
-00013550: 2062 6173 6520 6672 616d 652c 2064 6566   base frame, def
-00013560: 6175 6c74 7320 746f 2074 6865 2072 6f62  aults to the rob
-00013570: 6f74 7327 7320 6261 7365 2066 7261 6d65  ots's base frame
-00013580: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00013590: 7130 3a20 696e 6974 6961 6c20 6a6f 696e  q0: initial join
-000135a0: 7420 636f 6e66 6967 7572 6174 696f 6e20  t configuration 
-000135b0: 2864 6566 6175 6c74 2074 6f20 7261 6e64  (default to rand
-000135c0: 6f6d 2076 616c 6964 206a 6f69 6e74 0a20  om valid joint. 
-000135d0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-000135e0: 6775 7261 7469 6f6e 2063 6f6e 7472 6169  guration contrai
-000135f0: 6e65 6420 6279 2074 6865 206a 6f69 6e74  ned by the joint
-00013600: 206c 696d 6974 7320 6f66 2074 6865 2072   limits of the r
-00013610: 6f62 6f74 290a 2020 2020 2020 2020 3a70  obot).        :p
-00013620: 6172 616d 2069 6c69 6d69 743a 206d 6178  aram ilimit: max
-00013630: 696d 756d 206e 756d 6265 7220 6f66 2069  imum number of i
-00013640: 7465 7261 7469 6f6e 7320 7065 7220 7365  terations per se
-00013650: 6172 6368 0a20 2020 2020 2020 203a 7061  arch.        :pa
-00013660: 7261 6d20 736c 696d 6974 3a20 6d61 7869  ram slimit: maxi
-00013670: 6d75 6d20 6e75 6d62 6572 206f 6620 7365  mum number of se
-00013680: 6172 6368 2061 7474 656d 7074 730a 2020  arch attempts.  
-00013690: 2020 2020 2020 3a70 6172 616d 2074 6f6c        :param tol
-000136a0: 3a20 6669 6e61 6c20 6572 726f 7220 746f  : final error to
-000136b0: 6c65 7261 6e63 650a 2020 2020 2020 2020  lerance.        
-000136c0: 3a70 6172 616d 2072 656a 6563 745f 6a6c  :param reject_jl
-000136d0: 3a20 636f 6e73 7472 6169 6e20 7468 6520  : constrain the 
-000136e0: 736f 6c75 7469 6f6e 2074 6f20 6265 696e  solution to bein
-000136f0: 6720 7769 7468 696e 2074 6865 206a 6f69  g within the joi
-00013700: 6e74 206c 696d 6974 7320 6f66 0a20 2020  nt limits of.   
-00013710: 2020 2020 2020 2020 2074 6865 2072 6f62           the rob
-00013720: 6f74 2028 7265 6a65 6374 2073 6f6c 7574  ot (reject solut
-00013730: 696f 6e20 7769 7468 2069 6e76 616c 6964  ion with invalid
-00013740: 206a 6f69 6e74 2063 6f6e 6669 6775 7261   joint configura
-00013750: 7469 6f6e 7320 616e 6420 7065 7266 726f  tions and perfro
-00013760: 6d0a 2020 2020 2020 2020 2020 2020 616e  m.            an
-00013770: 6f74 6865 7220 7365 6172 6368 2075 7020  other search up 
-00013780: 746f 2074 6865 2073 6c69 6d69 7429 0a20  to the slimit). 
-00013790: 2020 2020 2020 203a 7061 7261 6d20 7765         :param we
-000137a0: 3a20 6120 6d61 736b 2076 6563 746f 7220  : a mask vector 
-000137b0: 7768 6963 6820 7765 6967 6874 7320 7468  which weights th
-000137c0: 6520 656e 642d 6566 6665 6374 6f72 2065  e end-effector e
-000137d0: 7272 6f72 2070 7269 6f72 6974 792e 0a20  rror priority.. 
-000137e0: 2020 2020 2020 2020 2020 2043 6f72 7265             Corre
-000137f0: 7370 6f6e 6473 2074 6f20 7472 616e 736c  sponds to transl
-00013800: 6174 696f 6e20 696e 2058 2c20 5920 616e  ation in X, Y an
-00013810: 6420 5a20 616e 6420 726f 7461 7469 6f6e  d Z and rotation
-00013820: 2061 626f 7574 2058 2c20 5920 616e 6420   about X, Y and 
-00013830: 5a0a 2020 2020 2020 2020 2020 2020 7265  Z.            re
-00013840: 7370 6563 7469 7665 6c79 0a20 2020 2020  spectively.     
-00013850: 2020 203a 7061 7261 6d20 cebb 3a20 7661     :param ..: va
-00013860: 6c75 6520 6f66 206c 616d 6264 6120 666f  lue of lambda fo
-00013870: 7220 7468 6520 6461 6d70 696e 6720 6d61  r the damping ma
-00013880: 7472 6978 2057 6e0a 0a20 2020 2020 2020  trix Wn..       
-00013890: 203a 7265 7475 726e 3a20 696e 7665 7273   :return: invers
-000138a0: 6520 6b69 6e65 6d61 7469 6320 736f 6c75  e kinematic solu
-000138b0: 7469 6f6e 0a20 2020 2020 2020 203a 7274  tion.        :rt
-000138c0: 7970 653a 2074 7570 6c65 2028 712c 2073  ype: tuple (q, s
-000138d0: 7563 6365 7373 2c20 6974 6572 6174 696f  uccess, iteratio
-000138e0: 6e73 2c20 7365 6172 6368 6573 2c20 7265  ns, searches, re
-000138f0: 7369 6475 616c 290a 0a20 2020 2020 2020  sidual)..       
-00013900: 2060 6073 6f6c 203d 2065 7473 2e69 6b5f   ``sol = ets.ik_
-00013910: 6c6d 5f63 6861 6e28 5465 7029 6060 2061  lm_chan(Tep)`` a
-00013920: 7265 2074 6865 206a 6f69 6e74 2063 6f6f  re the joint coo
-00013930: 7264 696e 6174 6573 2028 6e29 2063 6f72  rdinates (n) cor
-00013940: 7265 7370 6f6e 6469 6e67 0a20 2020 2020  responding.     
-00013950: 2020 2074 6f20 7468 6520 726f 626f 7420     to the robot 
-00013960: 656e 642d 6566 6665 6374 6f72 2070 6f73  end-effector pos
-00013970: 6520 6060 5465 7060 6020 7768 6963 6820  e ``Tep`` which 
-00013980: 6973 2061 6e20 6060 5345 3360 6020 6f72  is an ``SE3`` or
-00013990: 2060 606e 6461 7272 6179 6060 206f 626a   ``ndarray`` obj
-000139a0: 6563 742e 0a20 2020 2020 2020 2054 6869  ect..        Thi
-000139b0: 7320 6d65 7468 6f64 2063 616e 2062 6520  s method can be 
-000139c0: 7573 6564 2066 6f72 2072 6f62 6f74 7320  used for robots 
-000139d0: 7769 7468 2061 6e79 206e 756d 6265 7220  with any number 
-000139e0: 6f66 2064 6567 7265 6573 206f 6620 6672  of degrees of fr
-000139f0: 6565 646f 6d2e 0a20 2020 2020 2020 2054  eedom..        T
-00013a00: 6865 2072 6574 7572 6e20 7661 6c75 6520  he return value 
-00013a10: 6060 736f 6c60 6020 6973 2061 2074 7570  ``sol`` is a tup
-00013a20: 6c65 2077 6974 6820 656c 656d 656e 7473  le with elements
-00013a30: 3a0a 0a20 2020 2020 2020 203d 3d3d 3d3d  :..        =====
-00013a40: 3d3d 3d3d 3d3d 3d20 2020 203d 3d3d 3d3d  =======    =====
-00013a50: 3d3d 3d3d 3d20 203d 3d3d 3d3d 3d3d 3d3d  =====  =========
-00013a60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013a70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013a80: 3d3d 3d3d 3d3d 0a20 2020 2020 2020 2045  ======.        E
-00013a90: 6c65 6d65 6e74 2020 2020 2020 2020 2054  lement         T
-00013aa0: 7970 6520 2020 2020 2020 2044 6573 6372  ype        Descr
-00013ab0: 6970 7469 6f6e 0a20 2020 2020 2020 203d  iption.        =
-00013ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 2020 203d  ===========    =
-00013ad0: 3d3d 3d3d 3d3d 3d3d 3d20 203d 3d3d 3d3d  =========  =====
-00013ae0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013af0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013b00: 3d3d 3d3d 3d3d 3d3d 3d3d 0a20 2020 2020  ==========.     
-00013b10: 2020 2060 6071 6060 2020 2020 2020 2020     ``q``        
-00013b20: 2020 206e 6461 7272 6179 286e 2920 206a     ndarray(n)  j
-00013b30: 6f69 6e74 2063 6f6f 7264 696e 6174 6573  oint coordinates
-00013b40: 2069 6e20 756e 6974 7320 6f66 2072 6164   in units of rad
-00013b50: 6961 6e73 206f 7220 6d65 7472 6573 0a20  ians or metres. 
-00013b60: 2020 2020 2020 2060 6073 7563 6365 7373         ``success
-00013b70: 6060 2020 2020 2069 6e74 2020 2020 2020  ``     int      
-00013b80: 2020 2077 6865 7468 6572 2061 2073 6f6c     whether a sol
-00013b90: 7574 696f 6e20 7761 7320 666f 756e 640a  ution was found.
-00013ba0: 2020 2020 2020 2020 6060 6974 6572 6174          ``iterat
-00013bb0: 696f 6e73 6060 2020 696e 7420 2020 2020  ions``  int     
-00013bc0: 2020 2020 746f 7461 6c20 6e75 6d62 6572      total number
-00013bd0: 206f 6620 6974 6572 6174 696f 6e73 0a20   of iterations. 
-00013be0: 2020 2020 2020 2060 6073 6561 7263 6865         ``searche
-00013bf0: 7360 6020 2020 2069 6e74 2020 2020 2020  s``    int      
-00013c00: 2020 2074 6f74 616c 206e 756d 6265 7220     total number 
-00013c10: 6f66 2073 6561 7263 6865 730a 2020 2020  of searches.    
-00013c20: 2020 2020 6060 7265 7369 6475 616c 6060      ``residual``
-00013c30: 2020 2020 666c 6f61 7420 2020 2020 2020      float       
-00013c40: 6669 6e61 6c20 7661 6c75 6520 6f66 2063  final value of c
-00013c50: 6f73 7420 6675 6e63 7469 6f6e 0a20 2020  ost function.   
-00013c60: 2020 2020 203d 3d3d 3d3d 3d3d 3d3d 3d3d       ===========
-00013c70: 3d20 2020 203d 3d3d 3d3d 3d3d 3d3d 3d20  =    ========== 
-00013c80: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00013c90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013ca0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00013cb0: 0a0a 2020 2020 2020 2020 4966 2060 6073  ..        If ``s
-00013cc0: 7563 6365 7373 203d 3d20 3060 6020 7468  uccess == 0`` th
-00013cd0: 6520 6060 7160 6020 7661 6c75 6573 2077  e ``q`` values w
-00013ce0: 696c 6c20 6265 2076 616c 6964 206e 756d  ill be valid num
-00013cf0: 6265 7273 2c20 6275 7420 7468 650a 2020  bers, but the.  
-00013d00: 2020 2020 2020 736f 6c75 7469 6f6e 2077        solution w
-00013d10: 696c 6c20 6265 2069 6e20 6572 726f 722e  ill be in error.
-00013d20: 2020 5468 6520 616d 6f75 6e74 206f 6620    The amount of 
-00013d30: 6572 726f 7220 6973 2069 6e64 6963 6174  error is indicat
-00013d40: 6564 2062 790a 2020 2020 2020 2020 7468  ed by.        th
-00013d50: 6520 6060 7265 7369 6475 616c 6060 2e0a  e ``residual``..
-00013d60: 0a20 2020 2020 2020 202a 2a4a 6f69 6e74  .        **Joint
-00013d70: 204c 696d 6974 732a 2a3a 0a0a 2020 2020   Limits**:..    
-00013d80: 2020 2020 6060 736f 6c20 3d20 726f 626f      ``sol = robo
-00013d90: 742e 696b 696e 655f 4c4d 2854 2c20 736c  t.ikine_LM(T, sl
-00013da0: 696d 6974 3d31 3030 2960 6020 7768 6963  imit=100)`` whic
-00013db0: 6820 6973 2074 6865 2064 6561 6675 616c  h is the deafual
-00013dc0: 7420 666f 7220 7468 6973 206d 6574 686f  t for this metho
-00013dd0: 642e 0a20 2020 2020 2020 2054 6865 2073  d..        The s
-00013de0: 6f6c 7665 7220 7769 6c6c 2069 6e69 7469  olver will initi
-00013df0: 616c 6973 6520 6120 736f 6c75 7469 6f6e  alise a solution
-00013e00: 2061 7474 656d 7074 2077 6974 6820 6120   attempt with a 
-00013e10: 7261 6e64 6f6d 2076 616c 6964 2071 3020  random valid q0 
-00013e20: 616e 640a 2020 2020 2020 2020 7065 7266  and.        perf
-00013e30: 6f72 6d20 6120 6d61 7869 6d75 6d20 6f66  orm a maximum of
-00013e40: 2069 6c69 6d69 7420 7374 6570 7320 7769   ilimit steps wi
-00013e50: 7468 696e 2074 6869 7320 6174 7465 6d70  thin this attemp
-00013e60: 742e 2049 6620 6120 736f 6c75 7469 6f6e  t. If a solution
-00013e70: 2069 7320 6e6f 740a 2020 2020 2020 2020   is not.        
-00013e80: 666f 756e 642c 2074 6869 7320 7072 6f63  found, this proc
-00013e90: 6573 7320 6973 2072 6570 6561 7465 6420  ess is repeated 
-00013ea0: 7570 2074 6f20 736c 696d 6974 2074 696d  up to slimit tim
-00013eb0: 6573 2e0a 0a20 2020 2020 2020 202a 2a47  es...        **G
-00013ec0: 6c6f 6261 6c20 7365 6172 6368 2a2a 3a0a  lobal search**:.
-00013ed0: 0a20 2020 2020 2020 2060 6073 6f6c 203d  .        ``sol =
-00013ee0: 2072 6f62 6f74 2e69 6b69 6e65 5f4c 4d28   robot.ikine_LM(
-00013ef0: 542c 2072 656a 6563 745f 6a6c 3d54 7275  T, reject_jl=Tru
-00013f00: 6529 6060 2069 7320 7468 6520 6465 6166  e)`` is the deaf
-00013f10: 7561 6c74 2066 6f72 2074 6869 7320 6d65  ualt for this me
-00013f20: 7468 6f64 2e0a 2020 2020 2020 2020 4279  thod..        By
-00013f30: 2073 6574 7469 6e67 2072 656a 6563 745f   setting reject_
-00013f40: 6a6c 2074 6f20 5472 7565 2c20 7468 6520  jl to True, the 
-00013f50: 736f 6c76 6572 2077 696c 6c20 6469 7363  solver will disc
-00013f60: 6172 6420 616e 7920 736f 6c75 7469 6f6e  ard any solution
-00013f70: 2077 6869 6368 0a20 2020 2020 2020 2076   which.        v
-00013f80: 696f 6c61 7465 7320 7468 6520 6465 6669  iolates the defi
-00013f90: 6e65 6420 6a6f 696e 7420 6c69 6d69 7473  ned joint limits
-00013fa0: 206f 6620 7468 6520 726f 626f 742e 2054   of the robot. T
-00013fb0: 6865 2073 6f6c 7665 7220 7769 6c6c 2074  he solver will t
-00013fc0: 6865 6e0a 2020 2020 2020 2020 7265 2d69  hen.        re-i
-00013fd0: 6e69 7469 616c 6973 6520 7769 7468 2061  nitialise with a
-00013fe0: 206e 6577 2072 616e 646f 6d20 7130 2061   new random q0 a
-00013ff0: 6e64 2072 6570 6561 7420 7468 6520 7072  nd repeat the pr
-00014000: 6f63 6573 7320 7570 2074 6f20 736c 696d  ocess up to slim
-00014010: 6974 2074 696d 6573 2e0a 2020 2020 2020  it times..      
-00014020: 2020 4e6f 7465 2074 6861 7420 6669 6e64    Note that find
-00014030: 696e 6720 6120 736f 6c75 7469 6f6e 2077  ing a solution w
-00014040: 6974 6820 7661 6c69 6420 6a6f 696e 7420  ith valid joint 
-00014050: 636f 6f72 6469 6e61 7465 7320 7461 6b65  coordinates take
-00014060: 7320 6c6f 6e67 6572 2074 6861 6e0a 2020  s longer than.  
-00014070: 2020 2020 2020 7769 7468 6f75 742e 0a0a        without...
-00014080: 2020 2020 2020 2020 2a2a 556e 6465 7261          **Undera
-00014090: 6374 7561 7465 6420 726f 626f 7473 3a2a  ctuated robots:*
-000140a0: 2a0a 0a20 2020 2020 2020 2046 6f72 2074  *..        For t
-000140b0: 6865 2063 6173 6520 7768 6572 6520 7468  he case where th
-000140c0: 6520 6d61 6e69 7075 6c61 746f 7220 6861  e manipulator ha
-000140d0: 7320 6665 7765 7220 7468 616e 2036 2044  s fewer than 6 D
-000140e0: 4f46 2074 6865 0a20 2020 2020 2020 2073  OF the.        s
-000140f0: 6f6c 7574 696f 6e20 7370 6163 6520 6861  olution space ha
-00014100: 7320 6d6f 7265 2064 696d 656e 7369 6f6e  s more dimension
-00014110: 7320 7468 616e 2063 616e 2062 6520 7370  s than can be sp
-00014120: 616e 6e65 6420 6279 2074 6865 0a20 2020  anned by the.   
-00014130: 2020 2020 206d 616e 6970 756c 6174 6f72       manipulator
-00014140: 206a 6f69 6e74 2063 6f6f 7264 696e 6174   joint coordinat
-00014150: 6573 2e0a 0a20 2020 2020 2020 2049 6e20  es...        In 
-00014160: 7468 6973 2063 6173 6520 7765 2073 7065  this case we spe
-00014170: 6369 6679 2074 6865 2060 6077 6560 6020  cify the ``we`` 
-00014180: 6f70 7469 6f6e 2077 6865 7265 2074 6865  option where the
-00014190: 2060 6077 6560 6020 7665 6374 6f72 0a20   ``we`` vector. 
-000141a0: 2020 2020 2020 2028 3629 2073 7065 6369         (6) speci
-000141b0: 6669 6573 2074 6865 2043 6172 7465 7369  fies the Cartesi
-000141c0: 616e 2044 4f46 2028 696e 2074 6865 2077  an DOF (in the w
-000141d0: 7269 7374 2063 6f6f 7264 696e 6174 6520  rist coordinate 
-000141e0: 6672 616d 6529 2074 6861 740a 2020 2020  frame) that.    
-000141f0: 2020 2020 7769 6c6c 2062 6520 6967 6e6f      will be igno
-00014200: 7265 6420 696e 2072 6561 6368 696e 6720  red in reaching 
-00014210: 6120 736f 6c75 7469 6f6e 2e20 2054 6865  a solution.  The
-00014220: 2077 6520 7665 6374 6f72 2068 6173 2073   we vector has s
-00014230: 6978 0a20 2020 2020 2020 2065 6c65 6d65  ix.        eleme
-00014240: 6e74 7320 7468 6174 2063 6f72 7265 7370  nts that corresp
-00014250: 6f6e 6420 746f 2074 7261 6e73 6c61 7469  ond to translati
-00014260: 6f6e 2069 6e20 582c 2059 2061 6e64 205a  on in X, Y and Z
-00014270: 2c20 616e 6420 726f 7461 7469 6f6e 0a20  , and rotation. 
-00014280: 2020 2020 2020 2061 626f 7574 2058 2c20         about X, 
-00014290: 5920 616e 6420 5a20 7265 7370 6563 7469  Y and Z respecti
-000142a0: 7665 6c79 2e20 5468 6520 7661 6c75 6520  vely. The value 
-000142b0: 6361 6e20 6265 2030 2028 666f 7220 6967  can be 0 (for ig
-000142c0: 6e6f 7265 290a 2020 2020 2020 2020 6f72  nore).        or
-000142d0: 2061 626f 7665 2074 6f20 6173 7369 676e   above to assign
-000142e0: 2061 2070 7269 6f72 6974 7920 7265 6c61   a priority rela
-000142f0: 7469 7665 2074 6f20 6f74 6865 7220 4361  tive to other Ca
-00014300: 7274 6573 6961 6e20 446f 462e 2054 6865  rtesian DoF. The
-00014310: 206e 756d 6265 720a 2020 2020 2020 2020   number.        
-00014320: 6f66 206e 6f6e 2d7a 6572 6f20 656c 656d  of non-zero elem
-00014330: 656e 7473 206d 7573 7420 6571 7561 6c20  ents must equal 
-00014340: 7468 6520 6e75 6d62 6572 206f 6620 6d61  the number of ma
-00014350: 6e69 7075 6c61 746f 7220 444f 462e 0a0a  nipulator DOF...
-00014360: 2020 2020 2020 2020 466f 7220 6578 616d          For exam
-00014370: 706c 6520 7768 656e 2075 7369 6e67 2061  ple when using a
-00014380: 2033 2044 4f46 206d 616e 6970 756c 6174   3 DOF manipulat
-00014390: 6f72 2074 6f6f 6c20 6f72 6965 6e74 6174  or tool orientat
-000143a0: 696f 6e20 6d69 6768 740a 2020 2020 2020  ion might.      
-000143b0: 2020 6265 2075 6e69 6d70 6f72 7461 6e74    be unimportant
-000143c0: 2c20 696e 2077 6869 6368 2063 6173 6520  , in which case 
-000143d0: 7573 6520 7468 6520 6f70 7469 6f6e 2060  use the option `
-000143e0: 6077 653d 5b31 2c20 312c 2031 2c20 302c  `we=[1, 1, 1, 0,
-000143f0: 2030 2c20 305d 6060 2e0a 0a0a 0a20 2020   0, 0]``.....   
-00014400: 2020 2020 202e 2e20 6e6f 7465 3a3a 0a0a       .. note::..
-00014410: 2020 2020 2020 2020 2020 2020 2d20 5365              - Se
-00014420: 6520 6054 6f6f 6c62 6f78 206b 696e 656d  e `Toolbox kinem
-00014430: 6174 6963 7320 7769 6b69 2070 6167 650a  atics wiki page.
-00014440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014450: 3c68 7474 7073 3a2f 2f67 6974 6875 622e  <https://github.
-00014460: 636f 6d2f 7065 7465 7263 6f72 6b65 2f72  com/petercorke/r
-00014470: 6f62 6f74 6963 732d 746f 6f6c 626f 782d  obotics-toolbox-
-00014480: 7079 7468 6f6e 2f77 696b 692f 4b69 6e65  python/wiki/Kine
-00014490: 6d61 7469 6373 3e60 5f0a 2020 2020 2020  matics>`_.      
-000144a0: 2020 2020 2020 2d20 496d 706c 656d 656e        - Implemen
-000144b0: 7473 2061 204c 6576 656e 6265 7267 2d4d  ts a Levenberg-M
-000144c0: 6172 7175 6164 7420 7661 7269 6162 6c65  arquadt variable
-000144d0: 2d64 616d 7069 6e67 2073 6f6c 7665 722e  -damping solver.
-000144e0: 0a20 2020 2020 2020 2020 2020 202d 2054  .            - T
-000144f0: 6865 2074 6f6c 6572 616e 6365 2069 7320  he tolerance is 
-00014500: 636f 6d70 7574 6564 206f 6e20 7468 6520  computed on the 
-00014510: 6e6f 726d 206f 6620 7468 6520 6572 726f  norm of the erro
-00014520: 7220 6265 7477 6565 6e0a 2020 2020 2020  r between.      
-00014530: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00014540: 7420 616e 6420 6465 7369 7265 6420 746f  t and desired to
-00014550: 6f6c 2070 6f73 652e 2020 5468 6973 206e  ol pose.  This n
-00014560: 6f72 6d20 6973 2063 6f6d 7075 7465 6420  orm is computed 
-00014570: 6672 6f6d 0a20 2020 2020 2020 2020 2020  from.           
-00014580: 2020 2020 2064 6973 7461 6e63 6573 2061       distances a
-00014590: 6e64 2061 6e67 6c65 7320 7769 7468 6f75  nd angles withou
-000145a0: 7420 616e 7920 6b69 6e64 206f 6620 7765  t any kind of we
-000145b0: 6967 6874 696e 672e 0a20 2020 2020 2020  ighting..       
-000145c0: 2020 2020 202d 2054 6865 2069 6e76 6572       - The inver
-000145d0: 7365 206b 696e 656d 6174 6963 2073 6f6c  se kinematic sol
-000145e0: 7574 696f 6e20 6973 2067 656e 6572 616c  ution is general
-000145f0: 6c79 206e 6f74 2075 6e69 7175 652c 2061  ly not unique, a
-00014600: 6e64 0a20 2020 2020 2020 2020 2020 2020  nd.             
-00014610: 2020 2064 6570 656e 6473 206f 6e20 7468     depends on th
-00014620: 6520 696e 6974 6961 6c20 6775 6573 7320  e initial guess 
-00014630: 6060 7130 6060 2e0a 0a20 2020 2020 2020  ``q0``...       
-00014640: 203a 7265 6665 7265 6e63 6573 3a0a 2020   :references:.  
-00014650: 2020 2020 2020 2020 2020 544f 444f 0a0a            TODO..
-00014660: 2020 2020 2020 2020 3a73 6565 616c 736f          :seealso
-00014670: 3a0a 2020 2020 2020 2020 2020 2020 544f  :.            TO
-00014680: 444f 0a20 2020 2020 2020 2022 2222 0a0a  DO.        """..
-00014690: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000146a0: 656c 662e 6574 7328 7374 6172 742c 2065  elf.ets(start, e
-000146b0: 6e64 292e 696b 5f6c 6d5f 7761 6d70 6c65  nd).ik_lm_wample
-000146c0: 7228 5465 702c 2071 302c 2069 6c69 6d69  r(Tep, q0, ilimi
-000146d0: 742c 2073 6c69 6d69 742c 2074 6f6c 2c20  t, slimit, tol, 
-000146e0: 7265 6a65 6374 5f6a 6c2c 2077 652c 20ce  reject_jl, we, .
-000146f0: bb29 0a0a 2020 2020 6465 6620 696b 5f6c  .)..    def ik_l
-00014700: 6d5f 7375 6769 6861 7261 280a 2020 2020  m_sugihara(.    
-00014710: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00014720: 2020 5465 703a 2055 6e69 6f6e 5b6e 6461    Tep: Union[nda
-00014730: 7272 6179 2c20 5345 335d 2c0a 2020 2020  rray, SE3],.    
-00014740: 2020 2020 656e 643a 2055 6e69 6f6e 5b73      end: Union[s
-00014750: 7472 2c20 4c69 6e6b 2c20 4772 6970 7065  tr, Link, Grippe
-00014760: 722c 204e 6f6e 655d 203d 204e 6f6e 652c  r, None] = None,
-00014770: 0a20 2020 2020 2020 2073 7461 7274 3a20  .        start: 
-00014780: 556e 696f 6e5b 7374 722c 204c 696e 6b2c  Union[str, Link,
-00014790: 2047 7269 7070 6572 2c20 4e6f 6e65 5d20   Gripper, None] 
-000147a0: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-000147b0: 7130 3a20 556e 696f 6e5b 6e64 6172 7261  q0: Union[ndarra
-000147c0: 792c 204e 6f6e 655d 203d 204e 6f6e 652c  y, None] = None,
-000147d0: 0a20 2020 2020 2020 2069 6c69 6d69 743a  .        ilimit:
-000147e0: 2069 6e74 203d 2033 302c 0a20 2020 2020   int = 30,.     
-000147f0: 2020 2073 6c69 6d69 743a 2069 6e74 203d     slimit: int =
-00014800: 2031 3030 2c0a 2020 2020 2020 2020 746f   100,.        to
-00014810: 6c3a 2066 6c6f 6174 203d 2031 652d 362c  l: float = 1e-6,
-00014820: 0a20 2020 2020 2020 2072 656a 6563 745f  .        reject_
-00014830: 6a6c 3a20 626f 6f6c 203d 2054 7275 652c  jl: bool = True,
-00014840: 0a20 2020 2020 2020 2077 653a 2055 6e69  .        we: Uni
-00014850: 6f6e 5b6e 6461 7272 6179 2c20 4e6f 6e65  on[ndarray, None
-00014860: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-00014870: 2020 cebb 3a20 666c 6f61 7420 3d20 312e    ..: float = 1.
-00014880: 302c 0a20 2020 2029 202d 3e20 5475 706c  0,.    ) -> Tupl
-00014890: 655b 6e64 6172 7261 792c 2069 6e74 2c20  e[ndarray, int, 
-000148a0: 696e 742c 2069 6e74 2c20 666c 6f61 745d  int, int, float]
-000148b0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-000148c0: 2020 2020 2020 4e75 6d65 7269 6361 6c20        Numerical 
-000148d0: 696e 7665 7273 6520 6b69 6e65 6d61 7469  inverse kinemati
-000148e0: 6373 2062 7920 4c65 7665 6e62 6572 672d  cs by Levenberg-
-000148f0: 4d61 7271 7561 6474 206f 7074 696d 697a  Marquadt optimiz
-00014900: 6174 696f 6e20 2853 7567 6968 6172 6127  ation (Sugihara'
-00014910: 7320 4d65 7468 6f64 290a 0a20 2020 2020  s Method)..     
-00014920: 2020 203a 7061 7261 6d20 5465 703a 2054     :param Tep: T
-00014930: 6865 2064 6573 6972 6564 2065 6e64 2d65  he desired end-e
-00014940: 6666 6563 746f 7220 706f 7365 206f 7220  ffector pose or 
-00014950: 706f 7365 2074 7261 6a65 6374 6f72 790a  pose trajectory.
-00014960: 2020 2020 2020 2020 3a70 6172 616d 2065          :param e
-00014970: 6e64 3a20 7468 6520 7061 7274 6963 756c  nd: the particul
-00014980: 6172 206c 696e 6b20 6f72 2067 7269 7070  ar link or gripp
-00014990: 6572 2074 6f20 636f 6d70 7574 6520 7468  er to compute th
-000149a0: 6520 706f 7365 206f 660a 2020 2020 2020  e pose of.      
-000149b0: 2020 3a70 6172 616d 2073 7461 7274 3a20    :param start: 
-000149c0: 7468 6520 6c69 6e6b 2063 6f6e 7369 6465  the link conside
-000149d0: 7265 6420 6173 2074 6865 2062 6173 6520  red as the base 
-000149e0: 6672 616d 652c 2064 6566 6175 6c74 7320  frame, defaults 
-000149f0: 746f 2074 6865 2072 6f62 6f74 7327 7320  to the robots's 
-00014a00: 6261 7365 2066 7261 6d65 0a20 2020 2020  base frame.     
-00014a10: 2020 203a 7061 7261 6d20 7130 3a20 696e     :param q0: in
-00014a20: 6974 6961 6c20 6a6f 696e 7420 636f 6e66  itial joint conf
-00014a30: 6967 7572 6174 696f 6e20 2864 6566 6175  iguration (defau
-00014a40: 6c74 2074 6f20 7261 6e64 6f6d 2076 616c  lt to random val
-00014a50: 6964 206a 6f69 6e74 0a20 2020 2020 2020  id joint.       
-00014a60: 2020 2020 2063 6f6e 6669 6775 7261 7469       configurati
-00014a70: 6f6e 2063 6f6e 7472 6169 6e65 6420 6279  on contrained by
-00014a80: 2074 6865 206a 6f69 6e74 206c 696d 6974   the joint limit
-00014a90: 7320 6f66 2074 6865 2072 6f62 6f74 290a  s of the robot).
-00014aa0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
-00014ab0: 6c69 6d69 743a 206d 6178 696d 756d 206e  limit: maximum n
-00014ac0: 756d 6265 7220 6f66 2069 7465 7261 7469  umber of iterati
-00014ad0: 6f6e 7320 7065 7220 7365 6172 6368 0a20  ons per search. 
-00014ae0: 2020 2020 2020 203a 7061 7261 6d20 736c         :param sl
-00014af0: 696d 6974 3a20 6d61 7869 6d75 6d20 6e75  imit: maximum nu
-00014b00: 6d62 6572 206f 6620 7365 6172 6368 2061  mber of search a
-00014b10: 7474 656d 7074 730a 2020 2020 2020 2020  ttempts.        
-00014b20: 3a70 6172 616d 2074 6f6c 3a20 6669 6e61  :param tol: fina
-00014b30: 6c20 6572 726f 7220 746f 6c65 7261 6e63  l error toleranc
-00014b40: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-00014b50: 2072 656a 6563 745f 6a6c 3a20 636f 6e73   reject_jl: cons
-00014b60: 7472 6169 6e20 7468 6520 736f 6c75 7469  train the soluti
-00014b70: 6f6e 2074 6f20 6265 696e 6720 7769 7468  on to being with
-00014b80: 696e 2074 6865 206a 6f69 6e74 206c 696d  in the joint lim
-00014b90: 6974 7320 6f66 0a20 2020 2020 2020 2020  its of.         
-00014ba0: 2020 2074 6865 2072 6f62 6f74 2028 7265     the robot (re
-00014bb0: 6a65 6374 2073 6f6c 7574 696f 6e20 7769  ject solution wi
-00014bc0: 7468 2069 6e76 616c 6964 206a 6f69 6e74  th invalid joint
-00014bd0: 2063 6f6e 6669 6775 7261 7469 6f6e 7320   configurations 
-00014be0: 616e 6420 7065 7266 726f 6d0a 2020 2020  and perfrom.    
-00014bf0: 2020 2020 2020 2020 616e 6f74 6865 7220          another 
-00014c00: 7365 6172 6368 2075 7020 746f 2074 6865  search up to the
-00014c10: 2073 6c69 6d69 7429 0a20 2020 2020 2020   slimit).       
-00014c20: 203a 7061 7261 6d20 7765 3a20 6120 6d61   :param we: a ma
-00014c30: 736b 2076 6563 746f 7220 7768 6963 6820  sk vector which 
-00014c40: 7765 6967 6874 7320 7468 6520 656e 642d  weights the end-
-00014c50: 6566 6665 6374 6f72 2065 7272 6f72 2070  effector error p
-00014c60: 7269 6f72 6974 792e 0a20 2020 2020 2020  riority..       
-00014c70: 2020 2020 2043 6f72 7265 7370 6f6e 6473       Corresponds
-00014c80: 2074 6f20 7472 616e 736c 6174 696f 6e20   to translation 
-00014c90: 696e 2058 2c20 5920 616e 6420 5a20 616e  in X, Y and Z an
-00014ca0: 6420 726f 7461 7469 6f6e 2061 626f 7574  d rotation about
-00014cb0: 2058 2c20 5920 616e 6420 5a0a 2020 2020   X, Y and Z.    
-00014cc0: 2020 2020 2020 2020 7265 7370 6563 7469          respecti
-00014cd0: 7665 6c79 0a20 2020 2020 2020 203a 7061  vely.        :pa
-00014ce0: 7261 6d20 cebb 3a20 7661 6c75 6520 6f66  ram ..: value of
-00014cf0: 206c 616d 6264 6120 666f 7220 7468 6520   lambda for the 
-00014d00: 6461 6d70 696e 6720 6d61 7472 6978 2057  damping matrix W
-00014d10: 6e0a 0a20 2020 2020 2020 203a 7265 7475  n..        :retu
-00014d20: 726e 3a20 696e 7665 7273 6520 6b69 6e65  rn: inverse kine
-00014d30: 6d61 7469 6320 736f 6c75 7469 6f6e 0a20  matic solution. 
-00014d40: 2020 2020 2020 203a 7274 7970 653a 2074         :rtype: t
-00014d50: 7570 6c65 2028 712c 2073 7563 6365 7373  uple (q, success
-00014d60: 2c20 6974 6572 6174 696f 6e73 2c20 7365  , iterations, se
-00014d70: 6172 6368 6573 2c20 7265 7369 6475 616c  arches, residual
-00014d80: 290a 0a20 2020 2020 2020 2060 6073 6f6c  )..        ``sol
-00014d90: 203d 2065 7473 2e69 6b5f 6c6d 5f63 6861   = ets.ik_lm_cha
-00014da0: 6e28 5465 7029 6060 2061 7265 2074 6865  n(Tep)`` are the
-00014db0: 206a 6f69 6e74 2063 6f6f 7264 696e 6174   joint coordinat
-00014dc0: 6573 2028 6e29 2063 6f72 7265 7370 6f6e  es (n) correspon
-00014dd0: 6469 6e67 0a20 2020 2020 2020 2074 6f20  ding.        to 
-00014de0: 7468 6520 726f 626f 7420 656e 642d 6566  the robot end-ef
-00014df0: 6665 6374 6f72 2070 6f73 6520 6060 5465  fector pose ``Te
-00014e00: 7060 6020 7768 6963 6820 6973 2061 6e20  p`` which is an 
-00014e10: 6060 5345 3360 6020 6f72 2060 606e 6461  ``SE3`` or ``nda
-00014e20: 7272 6179 6060 206f 626a 6563 742e 0a20  rray`` object.. 
-00014e30: 2020 2020 2020 2054 6869 7320 6d65 7468         This meth
-00014e40: 6f64 2063 616e 2062 6520 7573 6564 2066  od can be used f
-00014e50: 6f72 2072 6f62 6f74 7320 7769 7468 2061  or robots with a
-00014e60: 6e79 206e 756d 6265 7220 6f66 2064 6567  ny number of deg
-00014e70: 7265 6573 206f 6620 6672 6565 646f 6d2e  rees of freedom.
-00014e80: 0a20 2020 2020 2020 2054 6865 2072 6574  .        The ret
-00014e90: 7572 6e20 7661 6c75 6520 6060 736f 6c60  urn value ``sol`
-00014ea0: 6020 6973 2061 2074 7570 6c65 2077 6974  ` is a tuple wit
-00014eb0: 6820 656c 656d 656e 7473 3a0a 0a20 2020  h elements:..   
-00014ec0: 2020 2020 203d 3d3d 3d3d 3d3d 3d3d 3d3d       ===========
-00014ed0: 3d20 2020 203d 3d3d 3d3d 3d3d 3d3d 3d20  =    ========== 
-00014ee0: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00014ef0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014f00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014f10: 0a20 2020 2020 2020 2045 6c65 6d65 6e74  .        Element
-00014f20: 2020 2020 2020 2020 2054 7970 6520 2020           Type   
-00014f30: 2020 2020 2044 6573 6372 6970 7469 6f6e       Description
-00014f40: 0a20 2020 2020 2020 203d 3d3d 3d3d 3d3d  .        =======
-00014f50: 3d3d 3d3d 3d20 2020 203d 3d3d 3d3d 3d3d  =====    =======
-00014f60: 3d3d 3d20 203d 3d3d 3d3d 3d3d 3d3d 3d3d  ===  ===========
-00014f70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014f80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014f90: 3d3d 3d3d 0a20 2020 2020 2020 2060 6071  ====.        ``q
-00014fa0: 6060 2020 2020 2020 2020 2020 206e 6461  ``           nda
-00014fb0: 7272 6179 286e 2920 206a 6f69 6e74 2063  rray(n)  joint c
-00014fc0: 6f6f 7264 696e 6174 6573 2069 6e20 756e  oordinates in un
-00014fd0: 6974 7320 6f66 2072 6164 6961 6e73 206f  its of radians o
-00014fe0: 7220 6d65 7472 6573 0a20 2020 2020 2020  r metres.       
-00014ff0: 2060 6073 7563 6365 7373 6060 2020 2020   ``success``    
-00015000: 2069 6e74 2020 2020 2020 2020 2077 6865   int         whe
-00015010: 7468 6572 2061 2073 6f6c 7574 696f 6e20  ther a solution 
-00015020: 7761 7320 666f 756e 640a 2020 2020 2020  was found.      
-00015030: 2020 6060 6974 6572 6174 696f 6e73 6060    ``iterations``
-00015040: 2020 696e 7420 2020 2020 2020 2020 746f    int         to
-00015050: 7461 6c20 6e75 6d62 6572 206f 6620 6974  tal number of it
-00015060: 6572 6174 696f 6e73 0a20 2020 2020 2020  erations.       
-00015070: 2060 6073 6561 7263 6865 7360 6020 2020   ``searches``   
-00015080: 2069 6e74 2020 2020 2020 2020 2074 6f74   int         tot
-00015090: 616c 206e 756d 6265 7220 6f66 2073 6561  al number of sea
-000150a0: 7263 6865 730a 2020 2020 2020 2020 6060  rches.        ``
-000150b0: 7265 7369 6475 616c 6060 2020 2020 666c  residual``    fl
-000150c0: 6f61 7420 2020 2020 2020 6669 6e61 6c20  oat       final 
-000150d0: 7661 6c75 6520 6f66 2063 6f73 7420 6675  value of cost fu
-000150e0: 6e63 7469 6f6e 0a20 2020 2020 2020 203d  nction.        =
-000150f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 2020 203d  ===========    =
-00015100: 3d3d 3d3d 3d3d 3d3d 3d20 203d 3d3d 3d3d  =========  =====
-00015110: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015120: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015130: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2020 2020  ==========..    
-00015140: 2020 2020 4966 2060 6073 7563 6365 7373      If ``success
-00015150: 203d 3d20 3060 6020 7468 6520 6060 7160   == 0`` the ``q`
-00015160: 6020 7661 6c75 6573 2077 696c 6c20 6265  ` values will be
-00015170: 2076 616c 6964 206e 756d 6265 7273 2c20   valid numbers, 
-00015180: 6275 7420 7468 650a 2020 2020 2020 2020  but the.        
-00015190: 736f 6c75 7469 6f6e 2077 696c 6c20 6265  solution will be
-000151a0: 2069 6e20 6572 726f 722e 2020 5468 6520   in error.  The 
-000151b0: 616d 6f75 6e74 206f 6620 6572 726f 7220  amount of error 
-000151c0: 6973 2069 6e64 6963 6174 6564 2062 790a  is indicated by.
-000151d0: 2020 2020 2020 2020 7468 6520 6060 7265          the ``re
-000151e0: 7369 6475 616c 6060 2e0a 0a20 2020 2020  sidual``...     
-000151f0: 2020 202a 2a4a 6f69 6e74 204c 696d 6974     **Joint Limit
-00015200: 732a 2a3a 0a0a 2020 2020 2020 2020 6060  s**:..        ``
-00015210: 736f 6c20 3d20 726f 626f 742e 696b 696e  sol = robot.ikin
-00015220: 655f 4c4d 2854 2c20 736c 696d 6974 3d31  e_LM(T, slimit=1
-00015230: 3030 2960 6020 7768 6963 6820 6973 2074  00)`` which is t
-00015240: 6865 2064 6561 6675 616c 7420 666f 7220  he deafualt for 
-00015250: 7468 6973 206d 6574 686f 642e 0a20 2020  this method..   
-00015260: 2020 2020 2054 6865 2073 6f6c 7665 7220       The solver 
-00015270: 7769 6c6c 2069 6e69 7469 616c 6973 6520  will initialise 
-00015280: 6120 736f 6c75 7469 6f6e 2061 7474 656d  a solution attem
-00015290: 7074 2077 6974 6820 6120 7261 6e64 6f6d  pt with a random
-000152a0: 2076 616c 6964 2071 3020 616e 640a 2020   valid q0 and.  
-000152b0: 2020 2020 2020 7065 7266 6f72 6d20 6120        perform a 
-000152c0: 6d61 7869 6d75 6d20 6f66 2069 6c69 6d69  maximum of ilimi
-000152d0: 7420 7374 6570 7320 7769 7468 696e 2074  t steps within t
-000152e0: 6869 7320 6174 7465 6d70 742e 2049 6620  his attempt. If 
-000152f0: 6120 736f 6c75 7469 6f6e 2069 7320 6e6f  a solution is no
-00015300: 740a 2020 2020 2020 2020 666f 756e 642c  t.        found,
-00015310: 2074 6869 7320 7072 6f63 6573 7320 6973   this process is
-00015320: 2072 6570 6561 7465 6420 7570 2074 6f20   repeated up to 
-00015330: 736c 696d 6974 2074 696d 6573 2e0a 0a20  slimit times... 
-00015340: 2020 2020 2020 202a 2a47 6c6f 6261 6c20         **Global 
-00015350: 7365 6172 6368 2a2a 3a0a 0a20 2020 2020  search**:..     
-00015360: 2020 2060 6073 6f6c 203d 2072 6f62 6f74     ``sol = robot
-00015370: 2e69 6b69 6e65 5f4c 4d28 542c 2072 656a  .ikine_LM(T, rej
-00015380: 6563 745f 6a6c 3d54 7275 6529 6060 2069  ect_jl=True)`` i
-00015390: 7320 7468 6520 6465 6166 7561 6c74 2066  s the deafualt f
-000153a0: 6f72 2074 6869 7320 6d65 7468 6f64 2e0a  or this method..
-000153b0: 2020 2020 2020 2020 4279 2073 6574 7469          By setti
-000153c0: 6e67 2072 656a 6563 745f 6a6c 2074 6f20  ng reject_jl to 
-000153d0: 5472 7565 2c20 7468 6520 736f 6c76 6572  True, the solver
-000153e0: 2077 696c 6c20 6469 7363 6172 6420 616e   will discard an
-000153f0: 7920 736f 6c75 7469 6f6e 2077 6869 6368  y solution which
-00015400: 0a20 2020 2020 2020 2076 696f 6c61 7465  .        violate
-00015410: 7320 7468 6520 6465 6669 6e65 6420 6a6f  s the defined jo
-00015420: 696e 7420 6c69 6d69 7473 206f 6620 7468  int limits of th
-00015430: 6520 726f 626f 742e 2054 6865 2073 6f6c  e robot. The sol
-00015440: 7665 7220 7769 6c6c 2074 6865 6e0a 2020  ver will then.  
-00015450: 2020 2020 2020 7265 2d69 6e69 7469 616c        re-initial
-00015460: 6973 6520 7769 7468 2061 206e 6577 2072  ise with a new r
-00015470: 616e 646f 6d20 7130 2061 6e64 2072 6570  andom q0 and rep
-00015480: 6561 7420 7468 6520 7072 6f63 6573 7320  eat the process 
-00015490: 7570 2074 6f20 736c 696d 6974 2074 696d  up to slimit tim
-000154a0: 6573 2e0a 2020 2020 2020 2020 4e6f 7465  es..        Note
-000154b0: 2074 6861 7420 6669 6e64 696e 6720 6120   that finding a 
-000154c0: 736f 6c75 7469 6f6e 2077 6974 6820 7661  solution with va
-000154d0: 6c69 6420 6a6f 696e 7420 636f 6f72 6469  lid joint coordi
-000154e0: 6e61 7465 7320 7461 6b65 7320 6c6f 6e67  nates takes long
-000154f0: 6572 2074 6861 6e0a 2020 2020 2020 2020  er than.        
-00015500: 7769 7468 6f75 742e 0a0a 2020 2020 2020  without...      
-00015510: 2020 2a2a 556e 6465 7261 6374 7561 7465    **Underactuate
-00015520: 6420 726f 626f 7473 3a2a 2a0a 0a20 2020  d robots:**..   
-00015530: 2020 2020 2046 6f72 2074 6865 2063 6173       For the cas
-00015540: 6520 7768 6572 6520 7468 6520 6d61 6e69  e where the mani
-00015550: 7075 6c61 746f 7220 6861 7320 6665 7765  pulator has fewe
-00015560: 7220 7468 616e 2036 2044 4f46 2074 6865  r than 6 DOF the
-00015570: 0a20 2020 2020 2020 2073 6f6c 7574 696f  .        solutio
-00015580: 6e20 7370 6163 6520 6861 7320 6d6f 7265  n space has more
-00015590: 2064 696d 656e 7369 6f6e 7320 7468 616e   dimensions than
-000155a0: 2063 616e 2062 6520 7370 616e 6e65 6420   can be spanned 
-000155b0: 6279 2074 6865 0a20 2020 2020 2020 206d  by the.        m
-000155c0: 616e 6970 756c 6174 6f72 206a 6f69 6e74  anipulator joint
-000155d0: 2063 6f6f 7264 696e 6174 6573 2e0a 0a20   coordinates... 
-000155e0: 2020 2020 2020 2049 6e20 7468 6973 2063         In this c
-000155f0: 6173 6520 7765 2073 7065 6369 6679 2074  ase we specify t
-00015600: 6865 2060 6077 6560 6020 6f70 7469 6f6e  he ``we`` option
-00015610: 2077 6865 7265 2074 6865 2060 6077 6560   where the ``we`
-00015620: 6020 7665 6374 6f72 0a20 2020 2020 2020  ` vector.       
-00015630: 2028 3629 2073 7065 6369 6669 6573 2074   (6) specifies t
-00015640: 6865 2043 6172 7465 7369 616e 2044 4f46  he Cartesian DOF
-00015650: 2028 696e 2074 6865 2077 7269 7374 2063   (in the wrist c
-00015660: 6f6f 7264 696e 6174 6520 6672 616d 6529  oordinate frame)
-00015670: 2074 6861 740a 2020 2020 2020 2020 7769   that.        wi
-00015680: 6c6c 2062 6520 6967 6e6f 7265 6420 696e  ll be ignored in
-00015690: 2072 6561 6368 696e 6720 6120 736f 6c75   reaching a solu
-000156a0: 7469 6f6e 2e20 2054 6865 2077 6520 7665  tion.  The we ve
-000156b0: 6374 6f72 2068 6173 2073 6978 0a20 2020  ctor has six.   
-000156c0: 2020 2020 2065 6c65 6d65 6e74 7320 7468       elements th
-000156d0: 6174 2063 6f72 7265 7370 6f6e 6420 746f  at correspond to
-000156e0: 2074 7261 6e73 6c61 7469 6f6e 2069 6e20   translation in 
-000156f0: 582c 2059 2061 6e64 205a 2c20 616e 6420  X, Y and Z, and 
-00015700: 726f 7461 7469 6f6e 0a20 2020 2020 2020  rotation.       
-00015710: 2061 626f 7574 2058 2c20 5920 616e 6420   about X, Y and 
-00015720: 5a20 7265 7370 6563 7469 7665 6c79 2e20  Z respectively. 
-00015730: 5468 6520 7661 6c75 6520 6361 6e20 6265  The value can be
-00015740: 2030 2028 666f 7220 6967 6e6f 7265 290a   0 (for ignore).
-00015750: 2020 2020 2020 2020 6f72 2061 626f 7665          or above
-00015760: 2074 6f20 6173 7369 676e 2061 2070 7269   to assign a pri
-00015770: 6f72 6974 7920 7265 6c61 7469 7665 2074  ority relative t
-00015780: 6f20 6f74 6865 7220 4361 7274 6573 6961  o other Cartesia
-00015790: 6e20 446f 462e 2054 6865 206e 756d 6265  n DoF. The numbe
-000157a0: 720a 2020 2020 2020 2020 6f66 206e 6f6e  r.        of non
-000157b0: 2d7a 6572 6f20 656c 656d 656e 7473 206d  -zero elements m
-000157c0: 7573 7420 6571 7561 6c20 7468 6520 6e75  ust equal the nu
-000157d0: 6d62 6572 206f 6620 6d61 6e69 7075 6c61  mber of manipula
-000157e0: 746f 7220 444f 462e 0a0a 2020 2020 2020  tor DOF...      
-000157f0: 2020 466f 7220 6578 616d 706c 6520 7768    For example wh
-00015800: 656e 2075 7369 6e67 2061 2033 2044 4f46  en using a 3 DOF
-00015810: 206d 616e 6970 756c 6174 6f72 2074 6f6f   manipulator too
-00015820: 6c20 6f72 6965 6e74 6174 696f 6e20 6d69  l orientation mi
-00015830: 6768 740a 2020 2020 2020 2020 6265 2075  ght.        be u
-00015840: 6e69 6d70 6f72 7461 6e74 2c20 696e 2077  nimportant, in w
-00015850: 6869 6368 2063 6173 6520 7573 6520 7468  hich case use th
-00015860: 6520 6f70 7469 6f6e 2060 6077 653d 5b31  e option ``we=[1
-00015870: 2c20 312c 2031 2c20 302c 2030 2c20 305d  , 1, 1, 0, 0, 0]
-00015880: 6060 2e0a 0a0a 0a20 2020 2020 2020 202e  ``.....        .
-00015890: 2e20 6e6f 7465 3a3a 0a0a 2020 2020 2020  . note::..      
-000158a0: 2020 2020 2020 2d20 5365 6520 6054 6f6f        - See `Too
-000158b0: 6c62 6f78 206b 696e 656d 6174 6963 7320  lbox kinematics 
-000158c0: 7769 6b69 2070 6167 650a 2020 2020 2020  wiki page.      
-000158d0: 2020 2020 2020 2020 2020 3c68 7474 7073            <https
-000158e0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7065  ://github.com/pe
-000158f0: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
-00015900: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
-00015910: 2f77 696b 692f 4b69 6e65 6d61 7469 6373  /wiki/Kinematics
-00015920: 3e60 5f0a 2020 2020 2020 2020 2020 2020  >`_.            
-00015930: 2d20 496d 706c 656d 656e 7473 2061 204c  - Implements a L
-00015940: 6576 656e 6265 7267 2d4d 6172 7175 6164  evenberg-Marquad
-00015950: 7420 7661 7269 6162 6c65 2d64 616d 7069  t variable-dampi
-00015960: 6e67 2073 6f6c 7665 722e 0a20 2020 2020  ng solver..     
-00015970: 2020 2020 2020 202d 2054 6865 2074 6f6c         - The tol
-00015980: 6572 616e 6365 2069 7320 636f 6d70 7574  erance is comput
-00015990: 6564 206f 6e20 7468 6520 6e6f 726d 206f  ed on the norm o
-000159a0: 6620 7468 6520 6572 726f 7220 6265 7477  f the error betw
-000159b0: 6565 6e0a 2020 2020 2020 2020 2020 2020  een.            
-000159c0: 2020 2020 6375 7272 656e 7420 616e 6420      current and 
-000159d0: 6465 7369 7265 6420 746f 6f6c 2070 6f73  desired tool pos
-000159e0: 652e 2020 5468 6973 206e 6f72 6d20 6973  e.  This norm is
-000159f0: 2063 6f6d 7075 7465 6420 6672 6f6d 0a20   computed from. 
-00015a00: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00015a10: 6973 7461 6e63 6573 2061 6e64 2061 6e67  istances and ang
-00015a20: 6c65 7320 7769 7468 6f75 7420 616e 7920  les without any 
-00015a30: 6b69 6e64 206f 6620 7765 6967 6874 696e  kind of weightin
-00015a40: 672e 0a20 2020 2020 2020 2020 2020 202d  g..            -
-00015a50: 2054 6865 2069 6e76 6572 7365 206b 696e   The inverse kin
-00015a60: 656d 6174 6963 2073 6f6c 7574 696f 6e20  ematic solution 
-00015a70: 6973 2067 656e 6572 616c 6c79 206e 6f74  is generally not
-00015a80: 2075 6e69 7175 652c 2061 6e64 0a20 2020   unique, and.   
-00015a90: 2020 2020 2020 2020 2020 2020 2064 6570               dep
-00015aa0: 656e 6473 206f 6e20 7468 6520 696e 6974  ends on the init
-00015ab0: 6961 6c20 6775 6573 7320 6060 7130 6060  ial guess ``q0``
-00015ac0: 2e0a 0a20 2020 2020 2020 203a 7265 6665  ...        :refe
-00015ad0: 7265 6e63 6573 3a0a 2020 2020 2020 2020  rences:.        
-00015ae0: 2020 2020 544f 444f 0a0a 2020 2020 2020      TODO..      
-00015af0: 2020 3a73 6565 616c 736f 3a0a 2020 2020    :seealso:.    
-00015b00: 2020 2020 2020 2020 544f 444f 0a20 2020          TODO.   
-00015b10: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00015b20: 2020 7265 7475 726e 2073 656c 662e 6574    return self.et
-00015b30: 7328 7374 6172 742c 2065 6e64 292e 696b  s(start, end).ik
-00015b40: 5f6c 6d5f 7375 6769 6861 7261 2854 6570  _lm_sugihara(Tep
-00015b50: 2c20 7130 2c20 696c 696d 6974 2c20 736c  , q0, ilimit, sl
-00015b60: 696d 6974 2c20 746f 6c2c 2072 656a 6563  imit, tol, rejec
-00015b70: 745f 6a6c 2c20 7765 2c20 cebb 290a 0a20  t_jl, we, ..).. 
-00015b80: 2020 2064 6566 2069 6b5f 6e72 280a 2020     def ik_nr(.  
-00015b90: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00015ba0: 2020 2020 5465 703a 2055 6e69 6f6e 5b6e      Tep: Union[n
-00015bb0: 6461 7272 6179 2c20 5345 335d 2c0a 2020  darray, SE3],.  
-00015bc0: 2020 2020 2020 656e 643a 2055 6e69 6f6e        end: Union
-00015bd0: 5b73 7472 2c20 4c69 6e6b 2c20 4772 6970  [str, Link, Grip
-00015be0: 7065 722c 204e 6f6e 655d 203d 204e 6f6e  per, None] = Non
-00015bf0: 652c 0a20 2020 2020 2020 2073 7461 7274  e,.        start
-00015c00: 3a20 556e 696f 6e5b 7374 722c 204c 696e  : Union[str, Lin
-00015c10: 6b2c 2047 7269 7070 6572 2c20 4e6f 6e65  k, Gripper, None
-00015c20: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-00015c30: 2020 7130 3a20 556e 696f 6e5b 6e64 6172    q0: Union[ndar
-00015c40: 7261 792c 204e 6f6e 655d 203d 204e 6f6e  ray, None] = Non
-00015c50: 652c 0a20 2020 2020 2020 2069 6c69 6d69  e,.        ilimi
-00015c60: 743a 2069 6e74 203d 2033 302c 0a20 2020  t: int = 30,.   
-00015c70: 2020 2020 2073 6c69 6d69 743a 2069 6e74       slimit: int
-00015c80: 203d 2031 3030 2c0a 2020 2020 2020 2020   = 100,.        
-00015c90: 746f 6c3a 2066 6c6f 6174 203d 2031 652d  tol: float = 1e-
-00015ca0: 362c 0a20 2020 2020 2020 2072 656a 6563  6,.        rejec
-00015cb0: 745f 6a6c 3a20 626f 6f6c 203d 2054 7275  t_jl: bool = Tru
-00015cc0: 652c 0a20 2020 2020 2020 2077 653a 2055  e,.        we: U
-00015cd0: 6e69 6f6e 5b6e 6461 7272 6179 2c20 4e6f  nion[ndarray, No
-00015ce0: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-00015cf0: 2020 2020 7573 655f 7069 6e76 3a20 696e      use_pinv: in
-00015d00: 7420 3d20 5472 7565 2c0a 2020 2020 2020  t = True,.      
-00015d10: 2020 7069 6e76 5f64 616d 7069 6e67 3a20    pinv_damping: 
-00015d20: 666c 6f61 7420 3d20 302e 302c 0a20 2020  float = 0.0,.   
-00015d30: 2029 202d 3e20 5475 706c 655b 6e64 6172   ) -> Tuple[ndar
-00015d40: 7261 792c 2069 6e74 2c20 696e 742c 2069  ray, int, int, i
-00015d50: 6e74 2c20 666c 6f61 745d 3a0a 2020 2020  nt, float]:.    
-00015d60: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00015d70: 4e75 6d65 7269 6361 6c20 696e 7665 7273  Numerical invers
-00015d80: 6520 6b69 6e65 6d61 7469 6373 2062 7920  e kinematics by 
-00015d90: 4c65 7665 6e62 6572 672d 4d61 7271 7561  Levenberg-Marqua
-00015da0: 6474 206f 7074 696d 697a 6174 696f 6e20  dt optimization 
-00015db0: 284e 6577 746f 6e2d 5261 7068 736f 6e20  (Newton-Raphson 
-00015dc0: 4d65 7468 6f64 290a 0a20 2020 2020 2020  Method)..       
-00015dd0: 203a 7061 7261 6d20 5465 703a 2054 6865   :param Tep: The
-00015de0: 2064 6573 6972 6564 2065 6e64 2d65 6666   desired end-eff
-00015df0: 6563 746f 7220 706f 7365 206f 7220 706f  ector pose or po
-00015e00: 7365 2074 7261 6a65 6374 6f72 790a 2020  se trajectory.  
-00015e10: 2020 2020 2020 3a70 6172 616d 2065 6e64        :param end
-00015e20: 3a20 7468 6520 7061 7274 6963 756c 6172  : the particular
-00015e30: 206c 696e 6b20 6f72 2067 7269 7070 6572   link or gripper
-00015e40: 2074 6f20 636f 6d70 7574 6520 7468 6520   to compute the 
-00015e50: 706f 7365 206f 660a 2020 2020 2020 2020  pose of.        
-00015e60: 3a70 6172 616d 2073 7461 7274 3a20 7468  :param start: th
-00015e70: 6520 6c69 6e6b 2063 6f6e 7369 6465 7265  e link considere
-00015e80: 6420 6173 2074 6865 2062 6173 6520 6672  d as the base fr
-00015e90: 616d 652c 2064 6566 6175 6c74 7320 746f  ame, defaults to
-00015ea0: 2074 6865 2072 6f62 6f74 7327 7320 6261   the robots's ba
-00015eb0: 7365 2066 7261 6d65 0a20 2020 2020 2020  se frame.       
-00015ec0: 203a 7061 7261 6d20 7130 3a20 696e 6974   :param q0: init
-00015ed0: 6961 6c20 6a6f 696e 7420 636f 6e66 6967  ial joint config
-00015ee0: 7572 6174 696f 6e20 2864 6566 6175 6c74  uration (default
-00015ef0: 2074 6f20 7261 6e64 6f6d 2076 616c 6964   to random valid
-00015f00: 206a 6f69 6e74 0a20 2020 2020 2020 2020   joint.         
-00015f10: 2020 2063 6f6e 6669 6775 7261 7469 6f6e     configuration
-00015f20: 2063 6f6e 7472 6169 6e65 6420 6279 2074   contrained by t
-00015f30: 6865 206a 6f69 6e74 206c 696d 6974 7320  he joint limits 
-00015f40: 6f66 2074 6865 2072 6f62 6f74 290a 2020  of the robot).  
-00015f50: 2020 2020 2020 3a70 6172 616d 2069 6c69        :param ili
-00015f60: 6d69 743a 206d 6178 696d 756d 206e 756d  mit: maximum num
-00015f70: 6265 7220 6f66 2069 7465 7261 7469 6f6e  ber of iteration
-00015f80: 7320 7065 7220 7365 6172 6368 0a20 2020  s per search.   
-00015f90: 2020 2020 203a 7061 7261 6d20 736c 696d       :param slim
-00015fa0: 6974 3a20 6d61 7869 6d75 6d20 6e75 6d62  it: maximum numb
-00015fb0: 6572 206f 6620 7365 6172 6368 2061 7474  er of search att
-00015fc0: 656d 7074 730a 2020 2020 2020 2020 3a70  empts.        :p
-00015fd0: 6172 616d 2074 6f6c 3a20 6669 6e61 6c20  aram tol: final 
-00015fe0: 6572 726f 7220 746f 6c65 7261 6e63 650a  error tolerance.
-00015ff0: 2020 2020 2020 2020 3a70 6172 616d 2072          :param r
-00016000: 656a 6563 745f 6a6c 3a20 636f 6e73 7472  eject_jl: constr
-00016010: 6169 6e20 7468 6520 736f 6c75 7469 6f6e  ain the solution
-00016020: 2074 6f20 6265 696e 6720 7769 7468 696e   to being within
-00016030: 2074 6865 206a 6f69 6e74 206c 696d 6974   the joint limit
-00016040: 7320 6f66 0a20 2020 2020 2020 2020 2020  s of.           
-00016050: 2074 6865 2072 6f62 6f74 2028 7265 6a65   the robot (reje
-00016060: 6374 2073 6f6c 7574 696f 6e20 7769 7468  ct solution with
-00016070: 2069 6e76 616c 6964 206a 6f69 6e74 2063   invalid joint c
-00016080: 6f6e 6669 6775 7261 7469 6f6e 7320 616e  onfigurations an
-00016090: 6420 7065 7266 726f 6d0a 2020 2020 2020  d perfrom.      
-000160a0: 2020 2020 2020 616e 6f74 6865 7220 7365        another se
-000160b0: 6172 6368 2075 7020 746f 2074 6865 2073  arch up to the s
-000160c0: 6c69 6d69 7429 0a20 2020 2020 2020 203a  limit).        :
-000160d0: 7061 7261 6d20 7765 3a20 6120 6d61 736b  param we: a mask
-000160e0: 2076 6563 746f 7220 7768 6963 6820 7765   vector which we
-000160f0: 6967 6874 7320 7468 6520 656e 642d 6566  ights the end-ef
-00016100: 6665 6374 6f72 2065 7272 6f72 2070 7269  fector error pri
-00016110: 6f72 6974 792e 0a20 2020 2020 2020 2020  ority..         
-00016120: 2020 2043 6f72 7265 7370 6f6e 6473 2074     Corresponds t
-00016130: 6f20 7472 616e 736c 6174 696f 6e20 696e  o translation in
-00016140: 2058 2c20 5920 616e 6420 5a20 616e 6420   X, Y and Z and 
-00016150: 726f 7461 7469 6f6e 2061 626f 7574 2058  rotation about X
-00016160: 2c20 5920 616e 6420 5a0a 2020 2020 2020  , Y and Z.      
-00016170: 2020 2020 2020 7265 7370 6563 7469 7665        respective
-00016180: 6c79 0a20 2020 2020 2020 203a 7061 7261  ly.        :para
-00016190: 6d20 cebb 3a20 7661 6c75 6520 6f66 206c  m ..: value of l
-000161a0: 616d 6264 6120 666f 7220 7468 6520 6461  ambda for the da
-000161b0: 6d70 696e 6720 6d61 7472 6978 2057 6e0a  mping matrix Wn.
-000161c0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-000161d0: 3a20 696e 7665 7273 6520 6b69 6e65 6d61  : inverse kinema
-000161e0: 7469 6320 736f 6c75 7469 6f6e 0a20 2020  tic solution.   
-000161f0: 2020 2020 203a 7274 7970 653a 2074 7570       :rtype: tup
-00016200: 6c65 2028 712c 2073 7563 6365 7373 2c20  le (q, success, 
-00016210: 6974 6572 6174 696f 6e73 2c20 7365 6172  iterations, sear
-00016220: 6368 6573 2c20 7265 7369 6475 616c 290a  ches, residual).
-00016230: 0a20 2020 2020 2020 2060 6073 6f6c 203d  .        ``sol =
-00016240: 2065 7473 2e69 6b5f 6c6d 5f63 6861 6e28   ets.ik_lm_chan(
-00016250: 5465 7029 6060 2061 7265 2074 6865 206a  Tep)`` are the j
-00016260: 6f69 6e74 2063 6f6f 7264 696e 6174 6573  oint coordinates
-00016270: 2028 6e29 2063 6f72 7265 7370 6f6e 6469   (n) correspondi
-00016280: 6e67 0a20 2020 2020 2020 2074 6f20 7468  ng.        to th
-00016290: 6520 726f 626f 7420 656e 642d 6566 6665  e robot end-effe
-000162a0: 6374 6f72 2070 6f73 6520 6060 5465 7060  ctor pose ``Tep`
-000162b0: 6020 7768 6963 6820 6973 2061 6e20 6060  ` which is an ``
-000162c0: 5345 3360 6020 6f72 2060 606e 6461 7272  SE3`` or ``ndarr
-000162d0: 6179 6060 206f 626a 6563 742e 0a20 2020  ay`` object..   
-000162e0: 2020 2020 2054 6869 7320 6d65 7468 6f64       This method
-000162f0: 2063 616e 2062 6520 7573 6564 2066 6f72   can be used for
-00016300: 2072 6f62 6f74 7320 7769 7468 2061 6e79   robots with any
-00016310: 206e 756d 6265 7220 6f66 2064 6567 7265   number of degre
-00016320: 6573 206f 6620 6672 6565 646f 6d2e 0a20  es of freedom.. 
-00016330: 2020 2020 2020 2054 6865 2072 6574 7572         The retur
-00016340: 6e20 7661 6c75 6520 6060 736f 6c60 6020  n value ``sol`` 
-00016350: 6973 2061 2074 7570 6c65 2077 6974 6820  is a tuple with 
-00016360: 656c 656d 656e 7473 3a0a 0a20 2020 2020  elements:..     
-00016370: 2020 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d20     ============ 
-00016380: 2020 203d 3d3d 3d3d 3d3d 3d3d 3d20 203d     ==========  =
-00016390: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000163a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000163b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20  ==============. 
-000163c0: 2020 2020 2020 2045 6c65 6d65 6e74 2020         Element  
-000163d0: 2020 2020 2020 2054 7970 6520 2020 2020         Type     
-000163e0: 2020 2044 6573 6372 6970 7469 6f6e 0a20     Description. 
-000163f0: 2020 2020 2020 203d 3d3d 3d3d 3d3d 3d3d         =========
-00016400: 3d3d 3d20 2020 203d 3d3d 3d3d 3d3d 3d3d  ===    =========
-00016410: 3d20 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  =  =============
-00016420: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016430: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016440: 3d3d 0a20 2020 2020 2020 2060 6071 6060  ==.        ``q``
-00016450: 2020 2020 2020 2020 2020 206e 6461 7272             ndarr
-00016460: 6179 286e 2920 206a 6f69 6e74 2063 6f6f  ay(n)  joint coo
-00016470: 7264 696e 6174 6573 2069 6e20 756e 6974  rdinates in unit
-00016480: 7320 6f66 2072 6164 6961 6e73 206f 7220  s of radians or 
-00016490: 6d65 7472 6573 0a20 2020 2020 2020 2060  metres.        `
-000164a0: 6073 7563 6365 7373 6060 2020 2020 2069  `success``     i
-000164b0: 6e74 2020 2020 2020 2020 2077 6865 7468  nt         wheth
-000164c0: 6572 2061 2073 6f6c 7574 696f 6e20 7761  er a solution wa
-000164d0: 7320 666f 756e 640a 2020 2020 2020 2020  s found.        
-000164e0: 6060 6974 6572 6174 696f 6e73 6060 2020  ``iterations``  
-000164f0: 696e 7420 2020 2020 2020 2020 746f 7461  int         tota
-00016500: 6c20 6e75 6d62 6572 206f 6620 6974 6572  l number of iter
-00016510: 6174 696f 6e73 0a20 2020 2020 2020 2060  ations.        `
-00016520: 6073 6561 7263 6865 7360 6020 2020 2069  `searches``    i
-00016530: 6e74 2020 2020 2020 2020 2074 6f74 616c  nt         total
-00016540: 206e 756d 6265 7220 6f66 2073 6561 7263   number of searc
-00016550: 6865 730a 2020 2020 2020 2020 6060 7265  hes.        ``re
-00016560: 7369 6475 616c 6060 2020 2020 666c 6f61  sidual``    floa
-00016570: 7420 2020 2020 2020 6669 6e61 6c20 7661  t       final va
-00016580: 6c75 6520 6f66 2063 6f73 7420 6675 6e63  lue of cost func
-00016590: 7469 6f6e 0a20 2020 2020 2020 203d 3d3d  tion.        ===
-000165a0: 3d3d 3d3d 3d3d 3d3d 3d20 2020 203d 3d3d  =========    ===
-000165b0: 3d3d 3d3d 3d3d 3d20 203d 3d3d 3d3d 3d3d  =======  =======
-000165c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000165d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000165e0: 3d3d 3d3d 3d3d 3d3d 0a0a 2020 2020 2020  ========..      
-000165f0: 2020 4966 2060 6073 7563 6365 7373 203d    If ``success =
-00016600: 3d20 3060 6020 7468 6520 6060 7160 6020  = 0`` the ``q`` 
-00016610: 7661 6c75 6573 2077 696c 6c20 6265 2076  values will be v
-00016620: 616c 6964 206e 756d 6265 7273 2c20 6275  alid numbers, bu
-00016630: 7420 7468 650a 2020 2020 2020 2020 736f  t the.        so
-00016640: 6c75 7469 6f6e 2077 696c 6c20 6265 2069  lution will be i
-00016650: 6e20 6572 726f 722e 2020 5468 6520 616d  n error.  The am
-00016660: 6f75 6e74 206f 6620 6572 726f 7220 6973  ount of error is
-00016670: 2069 6e64 6963 6174 6564 2062 790a 2020   indicated by.  
-00016680: 2020 2020 2020 7468 6520 6060 7265 7369        the ``resi
-00016690: 6475 616c 6060 2e0a 0a20 2020 2020 2020  dual``...       
-000166a0: 202a 2a4a 6f69 6e74 204c 696d 6974 732a   **Joint Limits*
-000166b0: 2a3a 0a0a 2020 2020 2020 2020 6060 736f  *:..        ``so
-000166c0: 6c20 3d20 726f 626f 742e 696b 696e 655f  l = robot.ikine_
-000166d0: 4c4d 2854 2c20 736c 696d 6974 3d31 3030  LM(T, slimit=100
-000166e0: 2960 6020 7768 6963 6820 6973 2074 6865  )`` which is the
-000166f0: 2064 6561 6675 616c 7420 666f 7220 7468   deafualt for th
-00016700: 6973 206d 6574 686f 642e 0a20 2020 2020  is method..     
-00016710: 2020 2054 6865 2073 6f6c 7665 7220 7769     The solver wi
-00016720: 6c6c 2069 6e69 7469 616c 6973 6520 6120  ll initialise a 
-00016730: 736f 6c75 7469 6f6e 2061 7474 656d 7074  solution attempt
-00016740: 2077 6974 6820 6120 7261 6e64 6f6d 2076   with a random v
-00016750: 616c 6964 2071 3020 616e 640a 2020 2020  alid q0 and.    
-00016760: 2020 2020 7065 7266 6f72 6d20 6120 6d61      perform a ma
-00016770: 7869 6d75 6d20 6f66 2069 6c69 6d69 7420  ximum of ilimit 
-00016780: 7374 6570 7320 7769 7468 696e 2074 6869  steps within thi
-00016790: 7320 6174 7465 6d70 742e 2049 6620 6120  s attempt. If a 
-000167a0: 736f 6c75 7469 6f6e 2069 7320 6e6f 740a  solution is not.
-000167b0: 2020 2020 2020 2020 666f 756e 642c 2074          found, t
-000167c0: 6869 7320 7072 6f63 6573 7320 6973 2072  his process is r
-000167d0: 6570 6561 7465 6420 7570 2074 6f20 736c  epeated up to sl
-000167e0: 696d 6974 2074 696d 6573 2e0a 0a20 2020  imit times...   
-000167f0: 2020 2020 202a 2a47 6c6f 6261 6c20 7365       **Global se
-00016800: 6172 6368 2a2a 3a0a 0a20 2020 2020 2020  arch**:..       
-00016810: 2060 6073 6f6c 203d 2072 6f62 6f74 2e69   ``sol = robot.i
-00016820: 6b69 6e65 5f4c 4d28 542c 2072 656a 6563  kine_LM(T, rejec
-00016830: 745f 6a6c 3d54 7275 6529 6060 2069 7320  t_jl=True)`` is 
-00016840: 7468 6520 6465 6166 7561 6c74 2066 6f72  the deafualt for
-00016850: 2074 6869 7320 6d65 7468 6f64 2e0a 2020   this method..  
-00016860: 2020 2020 2020 4279 2073 6574 7469 6e67        By setting
-00016870: 2072 656a 6563 745f 6a6c 2074 6f20 5472   reject_jl to Tr
-00016880: 7565 2c20 7468 6520 736f 6c76 6572 2077  ue, the solver w
-00016890: 696c 6c20 6469 7363 6172 6420 616e 7920  ill discard any 
-000168a0: 736f 6c75 7469 6f6e 2077 6869 6368 0a20  solution which. 
-000168b0: 2020 2020 2020 2076 696f 6c61 7465 7320         violates 
-000168c0: 7468 6520 6465 6669 6e65 6420 6a6f 696e  the defined join
-000168d0: 7420 6c69 6d69 7473 206f 6620 7468 6520  t limits of the 
-000168e0: 726f 626f 742e 2054 6865 2073 6f6c 7665  robot. The solve
-000168f0: 7220 7769 6c6c 2074 6865 6e0a 2020 2020  r will then.    
-00016900: 2020 2020 7265 2d69 6e69 7469 616c 6973      re-initialis
-00016910: 6520 7769 7468 2061 206e 6577 2072 616e  e with a new ran
-00016920: 646f 6d20 7130 2061 6e64 2072 6570 6561  dom q0 and repea
-00016930: 7420 7468 6520 7072 6f63 6573 7320 7570  t the process up
-00016940: 2074 6f20 736c 696d 6974 2074 696d 6573   to slimit times
-00016950: 2e0a 2020 2020 2020 2020 4e6f 7465 2074  ..        Note t
-00016960: 6861 7420 6669 6e64 696e 6720 6120 736f  hat finding a so
-00016970: 6c75 7469 6f6e 2077 6974 6820 7661 6c69  lution with vali
-00016980: 6420 6a6f 696e 7420 636f 6f72 6469 6e61  d joint coordina
-00016990: 7465 7320 7461 6b65 7320 6c6f 6e67 6572  tes takes longer
-000169a0: 2074 6861 6e0a 2020 2020 2020 2020 7769   than.        wi
-000169b0: 7468 6f75 742e 0a0a 2020 2020 2020 2020  thout...        
-000169c0: 2a2a 556e 6465 7261 6374 7561 7465 6420  **Underactuated 
-000169d0: 726f 626f 7473 3a2a 2a0a 0a20 2020 2020  robots:**..     
-000169e0: 2020 2046 6f72 2074 6865 2063 6173 6520     For the case 
-000169f0: 7768 6572 6520 7468 6520 6d61 6e69 7075  where the manipu
-00016a00: 6c61 746f 7220 6861 7320 6665 7765 7220  lator has fewer 
-00016a10: 7468 616e 2036 2044 4f46 2074 6865 0a20  than 6 DOF the. 
-00016a20: 2020 2020 2020 2073 6f6c 7574 696f 6e20         solution 
-00016a30: 7370 6163 6520 6861 7320 6d6f 7265 2064  space has more d
-00016a40: 696d 656e 7369 6f6e 7320 7468 616e 2063  imensions than c
-00016a50: 616e 2062 6520 7370 616e 6e65 6420 6279  an be spanned by
-00016a60: 2074 6865 0a20 2020 2020 2020 206d 616e   the.        man
-00016a70: 6970 756c 6174 6f72 206a 6f69 6e74 2063  ipulator joint c
-00016a80: 6f6f 7264 696e 6174 6573 2e0a 0a20 2020  oordinates...   
-00016a90: 2020 2020 2049 6e20 7468 6973 2063 6173       In this cas
-00016aa0: 6520 7765 2073 7065 6369 6679 2074 6865  e we specify the
-00016ab0: 2060 6077 6560 6020 6f70 7469 6f6e 2077   ``we`` option w
-00016ac0: 6865 7265 2074 6865 2060 6077 6560 6020  here the ``we`` 
-00016ad0: 7665 6374 6f72 0a20 2020 2020 2020 2028  vector.        (
-00016ae0: 3629 2073 7065 6369 6669 6573 2074 6865  6) specifies the
-00016af0: 2043 6172 7465 7369 616e 2044 4f46 2028   Cartesian DOF (
-00016b00: 696e 2074 6865 2077 7269 7374 2063 6f6f  in the wrist coo
-00016b10: 7264 696e 6174 6520 6672 616d 6529 2074  rdinate frame) t
-00016b20: 6861 740a 2020 2020 2020 2020 7769 6c6c  hat.        will
-00016b30: 2062 6520 6967 6e6f 7265 6420 696e 2072   be ignored in r
-00016b40: 6561 6368 696e 6720 6120 736f 6c75 7469  eaching a soluti
-00016b50: 6f6e 2e20 2054 6865 2077 6520 7665 6374  on.  The we vect
-00016b60: 6f72 2068 6173 2073 6978 0a20 2020 2020  or has six.     
-00016b70: 2020 2065 6c65 6d65 6e74 7320 7468 6174     elements that
-00016b80: 2063 6f72 7265 7370 6f6e 6420 746f 2074   correspond to t
-00016b90: 7261 6e73 6c61 7469 6f6e 2069 6e20 582c  ranslation in X,
-00016ba0: 2059 2061 6e64 205a 2c20 616e 6420 726f   Y and Z, and ro
-00016bb0: 7461 7469 6f6e 0a20 2020 2020 2020 2061  tation.        a
-00016bc0: 626f 7574 2058 2c20 5920 616e 6420 5a20  bout X, Y and Z 
-00016bd0: 7265 7370 6563 7469 7665 6c79 2e20 5468  respectively. Th
-00016be0: 6520 7661 6c75 6520 6361 6e20 6265 2030  e value can be 0
-00016bf0: 2028 666f 7220 6967 6e6f 7265 290a 2020   (for ignore).  
-00016c00: 2020 2020 2020 6f72 2061 626f 7665 2074        or above t
-00016c10: 6f20 6173 7369 676e 2061 2070 7269 6f72  o assign a prior
-00016c20: 6974 7920 7265 6c61 7469 7665 2074 6f20  ity relative to 
-00016c30: 6f74 6865 7220 4361 7274 6573 6961 6e20  other Cartesian 
-00016c40: 446f 462e 2054 6865 206e 756d 6265 720a  DoF. The number.
-00016c50: 2020 2020 2020 2020 6f66 206e 6f6e 2d7a          of non-z
-00016c60: 6572 6f20 656c 656d 656e 7473 206d 7573  ero elements mus
-00016c70: 7420 6571 7561 6c20 7468 6520 6e75 6d62  t equal the numb
-00016c80: 6572 206f 6620 6d61 6e69 7075 6c61 746f  er of manipulato
-00016c90: 7220 444f 462e 0a0a 2020 2020 2020 2020  r DOF...        
-00016ca0: 466f 7220 6578 616d 706c 6520 7768 656e  For example when
-00016cb0: 2075 7369 6e67 2061 2033 2044 4f46 206d   using a 3 DOF m
-00016cc0: 616e 6970 756c 6174 6f72 2074 6f6f 6c20  anipulator tool 
-00016cd0: 6f72 6965 6e74 6174 696f 6e20 6d69 6768  orientation migh
-00016ce0: 740a 2020 2020 2020 2020 6265 2075 6e69  t.        be uni
-00016cf0: 6d70 6f72 7461 6e74 2c20 696e 2077 6869  mportant, in whi
-00016d00: 6368 2063 6173 6520 7573 6520 7468 6520  ch case use the 
-00016d10: 6f70 7469 6f6e 2060 6077 653d 5b31 2c20  option ``we=[1, 
-00016d20: 312c 2031 2c20 302c 2030 2c20 305d 6060  1, 1, 0, 0, 0]``
-00016d30: 2e0a 0a0a 0a20 2020 2020 2020 202e 2e20  .....        .. 
-00016d40: 6e6f 7465 3a3a 0a0a 2020 2020 2020 2020  note::..        
-00016d50: 2020 2020 2d20 5365 6520 6054 6f6f 6c62      - See `Toolb
-00016d60: 6f78 206b 696e 656d 6174 6963 7320 7769  ox kinematics wi
-00016d70: 6b69 2070 6167 650a 2020 2020 2020 2020  ki page.        
-00016d80: 2020 2020 2020 2020 3c68 7474 7073 3a2f          <https:/
-00016d90: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-00016da0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00016db0: 746f 6f6c 626f 782d 7079 7468 6f6e 2f77  toolbox-python/w
-00016dc0: 696b 692f 4b69 6e65 6d61 7469 6373 3e60  iki/Kinematics>`
-00016dd0: 5f0a 2020 2020 2020 2020 2020 2020 2d20  _.            - 
-00016de0: 496d 706c 656d 656e 7473 2061 204c 6576  Implements a Lev
-00016df0: 656e 6265 7267 2d4d 6172 7175 6164 7420  enberg-Marquadt 
-00016e00: 7661 7269 6162 6c65 2d64 616d 7069 6e67  variable-damping
-00016e10: 2073 6f6c 7665 722e 0a20 2020 2020 2020   solver..       
-00016e20: 2020 2020 202d 2054 6865 2074 6f6c 6572       - The toler
-00016e30: 616e 6365 2069 7320 636f 6d70 7574 6564  ance is computed
-00016e40: 206f 6e20 7468 6520 6e6f 726d 206f 6620   on the norm of 
-00016e50: 7468 6520 6572 726f 7220 6265 7477 6565  the error betwee
-00016e60: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-00016e70: 2020 6375 7272 656e 7420 616e 6420 6465    current and de
-00016e80: 7369 7265 6420 746f 6f6c 2070 6f73 652e  sired tool pose.
-00016e90: 2020 5468 6973 206e 6f72 6d20 6973 2063    This norm is c
-00016ea0: 6f6d 7075 7465 6420 6672 6f6d 0a20 2020  omputed from.   
-00016eb0: 2020 2020 2020 2020 2020 2020 2064 6973               dis
-00016ec0: 7461 6e63 6573 2061 6e64 2061 6e67 6c65  tances and angle
-00016ed0: 7320 7769 7468 6f75 7420 616e 7920 6b69  s without any ki
-00016ee0: 6e64 206f 6620 7765 6967 6874 696e 672e  nd of weighting.
-00016ef0: 0a20 2020 2020 2020 2020 2020 202d 2054  .            - T
-00016f00: 6865 2069 6e76 6572 7365 206b 696e 656d  he inverse kinem
-00016f10: 6174 6963 2073 6f6c 7574 696f 6e20 6973  atic solution is
-00016f20: 2067 656e 6572 616c 6c79 206e 6f74 2075   generally not u
-00016f30: 6e69 7175 652c 2061 6e64 0a20 2020 2020  nique, and.     
-00016f40: 2020 2020 2020 2020 2020 2064 6570 656e             depen
-00016f50: 6473 206f 6e20 7468 6520 696e 6974 6961  ds on the initia
-00016f60: 6c20 6775 6573 7320 6060 7130 6060 2e0a  l guess ``q0``..
-00016f70: 0a20 2020 2020 2020 203a 7265 6665 7265  .        :refere
-00016f80: 6e63 6573 3a0a 2020 2020 2020 2020 2020  nces:.          
-00016f90: 2020 544f 444f 0a0a 2020 2020 2020 2020    TODO..        
-00016fa0: 3a73 6565 616c 736f 3a0a 2020 2020 2020  :seealso:.      
-00016fb0: 2020 2020 2020 544f 444f 0a20 2020 2020        TODO.     
-00016fc0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-00016fd0: 7265 7475 726e 2073 656c 662e 6574 7328  return self.ets(
-00016fe0: 7374 6172 742c 2065 6e64 292e 696b 5f6e  start, end).ik_n
-00016ff0: 7228 5465 702c 2071 302c 2069 6c69 6d69  r(Tep, q0, ilimi
-00017000: 742c 2073 6c69 6d69 742c 2074 6f6c 2c20  t, slimit, tol, 
-00017010: 7265 6a65 6374 5f6a 6c2c 2077 652c 2075  reject_jl, we, u
-00017020: 7365 5f70 696e 762c 2070 696e 765f 6461  se_pinv, pinv_da
-00017030: 6d70 696e 6729 0a0a 2020 2020 6465 6620  mping)..    def 
-00017040: 696b 5f67 6e28 0a20 2020 2020 2020 2073  ik_gn(.        s
-00017050: 656c 662c 0a20 2020 2020 2020 2054 6570  elf,.        Tep
-00017060: 3a20 556e 696f 6e5b 6e64 6172 7261 792c  : Union[ndarray,
-00017070: 2053 4533 5d2c 0a20 2020 2020 2020 2065   SE3],.        e
-00017080: 6e64 3a20 556e 696f 6e5b 7374 722c 204c  nd: Union[str, L
-00017090: 696e 6b2c 2047 7269 7070 6572 2c20 4e6f  ink, Gripper, No
-000170a0: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-000170b0: 2020 2020 7374 6172 743a 2055 6e69 6f6e      start: Union
-000170c0: 5b73 7472 2c20 4c69 6e6b 2c20 4772 6970  [str, Link, Grip
-000170d0: 7065 722c 204e 6f6e 655d 203d 204e 6f6e  per, None] = Non
-000170e0: 652c 0a20 2020 2020 2020 2071 303a 2055  e,.        q0: U
-000170f0: 6e69 6f6e 5b6e 6461 7272 6179 2c20 4e6f  nion[ndarray, No
-00017100: 6e65 5d20 3d20 4e6f 6e65 2c0a 2020 2020  ne] = None,.    
-00017110: 2020 2020 696c 696d 6974 3a20 696e 7420      ilimit: int 
-00017120: 3d20 3330 2c0a 2020 2020 2020 2020 736c  = 30,.        sl
-00017130: 696d 6974 3a20 696e 7420 3d20 3130 302c  imit: int = 100,
-00017140: 0a20 2020 2020 2020 2074 6f6c 3a20 666c  .        tol: fl
-00017150: 6f61 7420 3d20 3165 2d36 2c0a 2020 2020  oat = 1e-6,.    
-00017160: 2020 2020 7265 6a65 6374 5f6a 6c3a 2062      reject_jl: b
-00017170: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
-00017180: 2020 2020 7765 3a20 556e 696f 6e5b 6e64      we: Union[nd
-00017190: 6172 7261 792c 204e 6f6e 655d 203d 204e  array, None] = N
-000171a0: 6f6e 652c 0a20 2020 2020 2020 2075 7365  one,.        use
-000171b0: 5f70 696e 763a 2069 6e74 203d 2054 7275  _pinv: int = Tru
-000171c0: 652c 0a20 2020 2020 2020 2070 696e 765f  e,.        pinv_
-000171d0: 6461 6d70 696e 673a 2066 6c6f 6174 203d  damping: float =
-000171e0: 2030 2e30 2c0a 2020 2020 2920 2d3e 2054   0.0,.    ) -> T
-000171f0: 7570 6c65 5b6e 6461 7272 6179 2c20 696e  uple[ndarray, in
-00017200: 742c 2069 6e74 2c20 696e 742c 2066 6c6f  t, int, int, flo
-00017210: 6174 5d3a 0a20 2020 2020 2020 2022 2222  at]:.        """
-00017220: 0a20 2020 2020 2020 204e 756d 6572 6963  .        Numeric
-00017230: 616c 2069 6e76 6572 7365 206b 696e 656d  al inverse kinem
-00017240: 6174 6963 7320 6279 204c 6576 656e 6265  atics by Levenbe
-00017250: 7267 2d4d 6172 7175 6164 7420 6f70 7469  rg-Marquadt opti
-00017260: 6d69 7a61 7469 6f6e 2028 4761 7573 732d  mization (Gauss-
-00017270: 4e65 7774 6f6e 4d65 7468 6f64 290a 0a20  NewtonMethod).. 
-00017280: 2020 2020 2020 203a 7061 7261 6d20 5465         :param Te
-00017290: 703a 2054 6865 2064 6573 6972 6564 2065  p: The desired e
-000172a0: 6e64 2d65 6666 6563 746f 7220 706f 7365  nd-effector pose
-000172b0: 206f 7220 706f 7365 2074 7261 6a65 6374   or pose traject
-000172c0: 6f72 790a 2020 2020 2020 2020 3a70 6172  ory.        :par
-000172d0: 616d 2065 6e64 3a20 7468 6520 7061 7274  am end: the part
-000172e0: 6963 756c 6172 206c 696e 6b20 6f72 2067  icular link or g
-000172f0: 7269 7070 6572 2074 6f20 636f 6d70 7574  ripper to comput
-00017300: 6520 7468 6520 706f 7365 206f 660a 2020  e the pose of.  
-00017310: 2020 2020 2020 3a70 6172 616d 2073 7461        :param sta
-00017320: 7274 3a20 7468 6520 6c69 6e6b 2063 6f6e  rt: the link con
-00017330: 7369 6465 7265 6420 6173 2074 6865 2062  sidered as the b
-00017340: 6173 6520 6672 616d 652c 2064 6566 6175  ase frame, defau
-00017350: 6c74 7320 746f 2074 6865 2072 6f62 6f74  lts to the robot
-00017360: 7327 7320 6261 7365 2066 7261 6d65 0a20  s's base frame. 
-00017370: 2020 2020 2020 203a 7061 7261 6d20 7130         :param q0
-00017380: 3a20 696e 6974 6961 6c20 6a6f 696e 7420  : initial joint 
-00017390: 636f 6e66 6967 7572 6174 696f 6e20 2864  configuration (d
-000173a0: 6566 6175 6c74 2074 6f20 7261 6e64 6f6d  efault to random
-000173b0: 2076 616c 6964 206a 6f69 6e74 0a20 2020   valid joint.   
-000173c0: 2020 2020 2020 2020 2063 6f6e 6669 6775           configu
-000173d0: 7261 7469 6f6e 2063 6f6e 7472 6169 6e65  ration contraine
-000173e0: 6420 6279 2074 6865 206a 6f69 6e74 206c  d by the joint l
-000173f0: 696d 6974 7320 6f66 2074 6865 2072 6f62  imits of the rob
-00017400: 6f74 290a 2020 2020 2020 2020 3a70 6172  ot).        :par
-00017410: 616d 2069 6c69 6d69 743a 206d 6178 696d  am ilimit: maxim
-00017420: 756d 206e 756d 6265 7220 6f66 2069 7465  um number of ite
-00017430: 7261 7469 6f6e 7320 7065 7220 7365 6172  rations per sear
-00017440: 6368 0a20 2020 2020 2020 203a 7061 7261  ch.        :para
-00017450: 6d20 736c 696d 6974 3a20 6d61 7869 6d75  m slimit: maximu
-00017460: 6d20 6e75 6d62 6572 206f 6620 7365 6172  m number of sear
-00017470: 6368 2061 7474 656d 7074 730a 2020 2020  ch attempts.    
-00017480: 2020 2020 3a70 6172 616d 2074 6f6c 3a20      :param tol: 
-00017490: 6669 6e61 6c20 6572 726f 7220 746f 6c65  final error tole
-000174a0: 7261 6e63 650a 2020 2020 2020 2020 3a70  rance.        :p
-000174b0: 6172 616d 2072 656a 6563 745f 6a6c 3a20  aram reject_jl: 
-000174c0: 636f 6e73 7472 6169 6e20 7468 6520 736f  constrain the so
-000174d0: 6c75 7469 6f6e 2074 6f20 6265 696e 6720  lution to being 
-000174e0: 7769 7468 696e 2074 6865 206a 6f69 6e74  within the joint
-000174f0: 206c 696d 6974 7320 6f66 0a20 2020 2020   limits of.     
-00017500: 2020 2020 2020 2074 6865 2072 6f62 6f74         the robot
-00017510: 2028 7265 6a65 6374 2073 6f6c 7574 696f   (reject solutio
-00017520: 6e20 7769 7468 2069 6e76 616c 6964 206a  n with invalid j
-00017530: 6f69 6e74 2063 6f6e 6669 6775 7261 7469  oint configurati
-00017540: 6f6e 7320 616e 6420 7065 7266 726f 6d0a  ons and perfrom.
-00017550: 2020 2020 2020 2020 2020 2020 616e 6f74              anot
-00017560: 6865 7220 7365 6172 6368 2075 7020 746f  her search up to
-00017570: 2074 6865 2073 6c69 6d69 7429 0a20 2020   the slimit).   
-00017580: 2020 2020 203a 7061 7261 6d20 7765 3a20       :param we: 
-00017590: 6120 6d61 736b 2076 6563 746f 7220 7768  a mask vector wh
-000175a0: 6963 6820 7765 6967 6874 7320 7468 6520  ich weights the 
-000175b0: 656e 642d 6566 6665 6374 6f72 2065 7272  end-effector err
-000175c0: 6f72 2070 7269 6f72 6974 792e 0a20 2020  or priority..   
-000175d0: 2020 2020 2020 2020 2043 6f72 7265 7370           Corresp
-000175e0: 6f6e 6473 2074 6f20 7472 616e 736c 6174  onds to translat
-000175f0: 696f 6e20 696e 2058 2c20 5920 616e 6420  ion in X, Y and 
-00017600: 5a20 616e 6420 726f 7461 7469 6f6e 2061  Z and rotation a
-00017610: 626f 7574 2058 2c20 5920 616e 6420 5a0a  bout X, Y and Z.
-00017620: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-00017630: 6563 7469 7665 6c79 0a20 2020 2020 2020  ectively.       
-00017640: 203a 7061 7261 6d20 cebb 3a20 7661 6c75   :param ..: valu
-00017650: 6520 6f66 206c 616d 6264 6120 666f 7220  e of lambda for 
-00017660: 7468 6520 6461 6d70 696e 6720 6d61 7472  the damping matr
-00017670: 6978 2057 6e0a 0a20 2020 2020 2020 203a  ix Wn..        :
-00017680: 7265 7475 726e 3a20 696e 7665 7273 6520  return: inverse 
-00017690: 6b69 6e65 6d61 7469 6320 736f 6c75 7469  kinematic soluti
-000176a0: 6f6e 0a20 2020 2020 2020 203a 7274 7970  on.        :rtyp
-000176b0: 653a 2074 7570 6c65 2028 712c 2073 7563  e: tuple (q, suc
-000176c0: 6365 7373 2c20 6974 6572 6174 696f 6e73  cess, iterations
-000176d0: 2c20 7365 6172 6368 6573 2c20 7265 7369  , searches, resi
-000176e0: 6475 616c 290a 0a20 2020 2020 2020 2060  dual)..        `
-000176f0: 6073 6f6c 203d 2065 7473 2e69 6b5f 6c6d  `sol = ets.ik_lm
-00017700: 5f63 6861 6e28 5465 7029 6060 2061 7265  _chan(Tep)`` are
-00017710: 2074 6865 206a 6f69 6e74 2063 6f6f 7264   the joint coord
-00017720: 696e 6174 6573 2028 6e29 2063 6f72 7265  inates (n) corre
-00017730: 7370 6f6e 6469 6e67 0a20 2020 2020 2020  sponding.       
-00017740: 2074 6f20 7468 6520 726f 626f 7420 656e   to the robot en
-00017750: 642d 6566 6665 6374 6f72 2070 6f73 6520  d-effector pose 
-00017760: 6060 5465 7060 6020 7768 6963 6820 6973  ``Tep`` which is
-00017770: 2061 6e20 6060 5345 3360 6020 6f72 2060   an ``SE3`` or `
-00017780: 606e 6461 7272 6179 6060 206f 626a 6563  `ndarray`` objec
-00017790: 742e 0a20 2020 2020 2020 2054 6869 7320  t..        This 
-000177a0: 6d65 7468 6f64 2063 616e 2062 6520 7573  method can be us
-000177b0: 6564 2066 6f72 2072 6f62 6f74 7320 7769  ed for robots wi
-000177c0: 7468 2061 6e79 206e 756d 6265 7220 6f66  th any number of
-000177d0: 2064 6567 7265 6573 206f 6620 6672 6565   degrees of free
-000177e0: 646f 6d2e 0a20 2020 2020 2020 2054 6865  dom..        The
-000177f0: 2072 6574 7572 6e20 7661 6c75 6520 6060   return value ``
-00017800: 736f 6c60 6020 6973 2061 2074 7570 6c65  sol`` is a tuple
-00017810: 2077 6974 6820 656c 656d 656e 7473 3a0a   with elements:.
-00017820: 0a20 2020 2020 2020 203d 3d3d 3d3d 3d3d  .        =======
-00017830: 3d3d 3d3d 3d20 2020 203d 3d3d 3d3d 3d3d  =====    =======
-00017840: 3d3d 3d20 203d 3d3d 3d3d 3d3d 3d3d 3d3d  ===  ===========
-00017850: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017860: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017870: 3d3d 3d3d 0a20 2020 2020 2020 2045 6c65  ====.        Ele
-00017880: 6d65 6e74 2020 2020 2020 2020 2054 7970  ment         Typ
-00017890: 6520 2020 2020 2020 2044 6573 6372 6970  e        Descrip
-000178a0: 7469 6f6e 0a20 2020 2020 2020 203d 3d3d  tion.        ===
-000178b0: 3d3d 3d3d 3d3d 3d3d 3d20 2020 203d 3d3d  =========    ===
-000178c0: 3d3d 3d3d 3d3d 3d20 203d 3d3d 3d3d 3d3d  =======  =======
-000178d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000178e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000178f0: 3d3d 3d3d 3d3d 3d3d 0a20 2020 2020 2020  ========.       
-00017900: 2060 6071 6060 2020 2020 2020 2020 2020   ``q``          
-00017910: 206e 6461 7272 6179 286e 2920 206a 6f69   ndarray(n)  joi
-00017920: 6e74 2063 6f6f 7264 696e 6174 6573 2069  nt coordinates i
-00017930: 6e20 756e 6974 7320 6f66 2072 6164 6961  n units of radia
-00017940: 6e73 206f 7220 6d65 7472 6573 0a20 2020  ns or metres.   
-00017950: 2020 2020 2060 6073 7563 6365 7373 6060       ``success``
-00017960: 2020 2020 2069 6e74 2020 2020 2020 2020       int        
-00017970: 2077 6865 7468 6572 2061 2073 6f6c 7574   whether a solut
-00017980: 696f 6e20 7761 7320 666f 756e 640a 2020  ion was found.  
-00017990: 2020 2020 2020 6060 6974 6572 6174 696f        ``iteratio
-000179a0: 6e73 6060 2020 696e 7420 2020 2020 2020  ns``  int       
-000179b0: 2020 746f 7461 6c20 6e75 6d62 6572 206f    total number o
-000179c0: 6620 6974 6572 6174 696f 6e73 0a20 2020  f iterations.   
-000179d0: 2020 2020 2060 6073 6561 7263 6865 7360       ``searches`
-000179e0: 6020 2020 2069 6e74 2020 2020 2020 2020  `    int        
-000179f0: 2074 6f74 616c 206e 756d 6265 7220 6f66   total number of
-00017a00: 2073 6561 7263 6865 730a 2020 2020 2020   searches.      
-00017a10: 2020 6060 7265 7369 6475 616c 6060 2020    ``residual``  
-00017a20: 2020 666c 6f61 7420 2020 2020 2020 6669    float       fi
-00017a30: 6e61 6c20 7661 6c75 6520 6f66 2063 6f73  nal value of cos
-00017a40: 7420 6675 6e63 7469 6f6e 0a20 2020 2020  t function.     
-00017a50: 2020 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d20     ============ 
-00017a60: 2020 203d 3d3d 3d3d 3d3d 3d3d 3d20 203d     ==========  =
-00017a70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017a80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00017a90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
-00017aa0: 2020 2020 2020 2020 4966 2060 6073 7563          If ``suc
-00017ab0: 6365 7373 203d 3d20 3060 6020 7468 6520  cess == 0`` the 
-00017ac0: 6060 7160 6020 7661 6c75 6573 2077 696c  ``q`` values wil
-00017ad0: 6c20 6265 2076 616c 6964 206e 756d 6265  l be valid numbe
-00017ae0: 7273 2c20 6275 7420 7468 650a 2020 2020  rs, but the.    
-00017af0: 2020 2020 736f 6c75 7469 6f6e 2077 696c      solution wil
-00017b00: 6c20 6265 2069 6e20 6572 726f 722e 2020  l be in error.  
-00017b10: 5468 6520 616d 6f75 6e74 206f 6620 6572  The amount of er
-00017b20: 726f 7220 6973 2069 6e64 6963 6174 6564  ror is indicated
-00017b30: 2062 790a 2020 2020 2020 2020 7468 6520   by.        the 
-00017b40: 6060 7265 7369 6475 616c 6060 2e0a 0a20  ``residual``... 
-00017b50: 2020 2020 2020 202a 2a4a 6f69 6e74 204c         **Joint L
-00017b60: 696d 6974 732a 2a3a 0a0a 2020 2020 2020  imits**:..      
-00017b70: 2020 6060 736f 6c20 3d20 726f 626f 742e    ``sol = robot.
-00017b80: 696b 696e 655f 4c4d 2854 2c20 736c 696d  ikine_LM(T, slim
-00017b90: 6974 3d31 3030 2960 6020 7768 6963 6820  it=100)`` which 
-00017ba0: 6973 2074 6865 2064 6561 6675 616c 7420  is the deafualt 
-00017bb0: 666f 7220 7468 6973 206d 6574 686f 642e  for this method.
-00017bc0: 0a20 2020 2020 2020 2054 6865 2073 6f6c  .        The sol
-00017bd0: 7665 7220 7769 6c6c 2069 6e69 7469 616c  ver will initial
-00017be0: 6973 6520 6120 736f 6c75 7469 6f6e 2061  ise a solution a
-00017bf0: 7474 656d 7074 2077 6974 6820 6120 7261  ttempt with a ra
-00017c00: 6e64 6f6d 2076 616c 6964 2071 3020 616e  ndom valid q0 an
-00017c10: 640a 2020 2020 2020 2020 7065 7266 6f72  d.        perfor
-00017c20: 6d20 6120 6d61 7869 6d75 6d20 6f66 2069  m a maximum of i
-00017c30: 6c69 6d69 7420 7374 6570 7320 7769 7468  limit steps with
-00017c40: 696e 2074 6869 7320 6174 7465 6d70 742e  in this attempt.
-00017c50: 2049 6620 6120 736f 6c75 7469 6f6e 2069   If a solution i
-00017c60: 7320 6e6f 740a 2020 2020 2020 2020 666f  s not.        fo
-00017c70: 756e 642c 2074 6869 7320 7072 6f63 6573  und, this proces
-00017c80: 7320 6973 2072 6570 6561 7465 6420 7570  s is repeated up
-00017c90: 2074 6f20 736c 696d 6974 2074 696d 6573   to slimit times
-00017ca0: 2e0a 0a20 2020 2020 2020 202a 2a47 6c6f  ...        **Glo
-00017cb0: 6261 6c20 7365 6172 6368 2a2a 3a0a 0a20  bal search**:.. 
-00017cc0: 2020 2020 2020 2060 6073 6f6c 203d 2072         ``sol = r
-00017cd0: 6f62 6f74 2e69 6b69 6e65 5f4c 4d28 542c  obot.ikine_LM(T,
-00017ce0: 2072 656a 6563 745f 6a6c 3d54 7275 6529   reject_jl=True)
-00017cf0: 6060 2069 7320 7468 6520 6465 6166 7561  `` is the deafua
-00017d00: 6c74 2066 6f72 2074 6869 7320 6d65 7468  lt for this meth
-00017d10: 6f64 2e0a 2020 2020 2020 2020 4279 2073  od..        By s
-00017d20: 6574 7469 6e67 2072 656a 6563 745f 6a6c  etting reject_jl
-00017d30: 2074 6f20 5472 7565 2c20 7468 6520 736f   to True, the so
-00017d40: 6c76 6572 2077 696c 6c20 6469 7363 6172  lver will discar
-00017d50: 6420 616e 7920 736f 6c75 7469 6f6e 2077  d any solution w
-00017d60: 6869 6368 0a20 2020 2020 2020 2076 696f  hich.        vio
-00017d70: 6c61 7465 7320 7468 6520 6465 6669 6e65  lates the define
-00017d80: 6420 6a6f 696e 7420 6c69 6d69 7473 206f  d joint limits o
-00017d90: 6620 7468 6520 726f 626f 742e 2054 6865  f the robot. The
-00017da0: 2073 6f6c 7665 7220 7769 6c6c 2074 6865   solver will the
-00017db0: 6e0a 2020 2020 2020 2020 7265 2d69 6e69  n.        re-ini
-00017dc0: 7469 616c 6973 6520 7769 7468 2061 206e  tialise with a n
-00017dd0: 6577 2072 616e 646f 6d20 7130 2061 6e64  ew random q0 and
-00017de0: 2072 6570 6561 7420 7468 6520 7072 6f63   repeat the proc
-00017df0: 6573 7320 7570 2074 6f20 736c 696d 6974  ess up to slimit
-00017e00: 2074 696d 6573 2e0a 2020 2020 2020 2020   times..        
-00017e10: 4e6f 7465 2074 6861 7420 6669 6e64 696e  Note that findin
-00017e20: 6720 6120 736f 6c75 7469 6f6e 2077 6974  g a solution wit
-00017e30: 6820 7661 6c69 6420 6a6f 696e 7420 636f  h valid joint co
-00017e40: 6f72 6469 6e61 7465 7320 7461 6b65 7320  ordinates takes 
-00017e50: 6c6f 6e67 6572 2074 6861 6e0a 2020 2020  longer than.    
-00017e60: 2020 2020 7769 7468 6f75 742e 0a0a 2020      without...  
-00017e70: 2020 2020 2020 2a2a 556e 6465 7261 6374        **Underact
-00017e80: 7561 7465 6420 726f 626f 7473 3a2a 2a0a  uated robots:**.
-00017e90: 0a20 2020 2020 2020 2046 6f72 2074 6865  .        For the
-00017ea0: 2063 6173 6520 7768 6572 6520 7468 6520   case where the 
-00017eb0: 6d61 6e69 7075 6c61 746f 7220 6861 7320  manipulator has 
-00017ec0: 6665 7765 7220 7468 616e 2036 2044 4f46  fewer than 6 DOF
-00017ed0: 2074 6865 0a20 2020 2020 2020 2073 6f6c   the.        sol
-00017ee0: 7574 696f 6e20 7370 6163 6520 6861 7320  ution space has 
-00017ef0: 6d6f 7265 2064 696d 656e 7369 6f6e 7320  more dimensions 
-00017f00: 7468 616e 2063 616e 2062 6520 7370 616e  than can be span
-00017f10: 6e65 6420 6279 2074 6865 0a20 2020 2020  ned by the.     
-00017f20: 2020 206d 616e 6970 756c 6174 6f72 206a     manipulator j
-00017f30: 6f69 6e74 2063 6f6f 7264 696e 6174 6573  oint coordinates
-00017f40: 2e0a 0a20 2020 2020 2020 2049 6e20 7468  ...        In th
-00017f50: 6973 2063 6173 6520 7765 2073 7065 6369  is case we speci
-00017f60: 6679 2074 6865 2060 6077 6560 6020 6f70  fy the ``we`` op
-00017f70: 7469 6f6e 2077 6865 7265 2074 6865 2060  tion where the `
-00017f80: 6077 6560 6020 7665 6374 6f72 0a20 2020  `we`` vector.   
-00017f90: 2020 2020 2028 3629 2073 7065 6369 6669       (6) specifi
-00017fa0: 6573 2074 6865 2043 6172 7465 7369 616e  es the Cartesian
-00017fb0: 2044 4f46 2028 696e 2074 6865 2077 7269   DOF (in the wri
-00017fc0: 7374 2063 6f6f 7264 696e 6174 6520 6672  st coordinate fr
-00017fd0: 616d 6529 2074 6861 740a 2020 2020 2020  ame) that.      
-00017fe0: 2020 7769 6c6c 2062 6520 6967 6e6f 7265    will be ignore
-00017ff0: 6420 696e 2072 6561 6368 696e 6720 6120  d in reaching a 
-00018000: 736f 6c75 7469 6f6e 2e20 2054 6865 2077  solution.  The w
-00018010: 6520 7665 6374 6f72 2068 6173 2073 6978  e vector has six
-00018020: 0a20 2020 2020 2020 2065 6c65 6d65 6e74  .        element
-00018030: 7320 7468 6174 2063 6f72 7265 7370 6f6e  s that correspon
-00018040: 6420 746f 2074 7261 6e73 6c61 7469 6f6e  d to translation
-00018050: 2069 6e20 582c 2059 2061 6e64 205a 2c20   in X, Y and Z, 
-00018060: 616e 6420 726f 7461 7469 6f6e 0a20 2020  and rotation.   
-00018070: 2020 2020 2061 626f 7574 2058 2c20 5920       about X, Y 
-00018080: 616e 6420 5a20 7265 7370 6563 7469 7665  and Z respective
-00018090: 6c79 2e20 5468 6520 7661 6c75 6520 6361  ly. The value ca
-000180a0: 6e20 6265 2030 2028 666f 7220 6967 6e6f  n be 0 (for igno
-000180b0: 7265 290a 2020 2020 2020 2020 6f72 2061  re).        or a
-000180c0: 626f 7665 2074 6f20 6173 7369 676e 2061  bove to assign a
-000180d0: 2070 7269 6f72 6974 7920 7265 6c61 7469   priority relati
-000180e0: 7665 2074 6f20 6f74 6865 7220 4361 7274  ve to other Cart
-000180f0: 6573 6961 6e20 446f 462e 2054 6865 206e  esian DoF. The n
-00018100: 756d 6265 720a 2020 2020 2020 2020 6f66  umber.        of
-00018110: 206e 6f6e 2d7a 6572 6f20 656c 656d 656e   non-zero elemen
-00018120: 7473 206d 7573 7420 6571 7561 6c20 7468  ts must equal th
-00018130: 6520 6e75 6d62 6572 206f 6620 6d61 6e69  e number of mani
-00018140: 7075 6c61 746f 7220 444f 462e 0a0a 2020  pulator DOF...  
-00018150: 2020 2020 2020 466f 7220 6578 616d 706c        For exampl
-00018160: 6520 7768 656e 2075 7369 6e67 2061 2033  e when using a 3
-00018170: 2044 4f46 206d 616e 6970 756c 6174 6f72   DOF manipulator
-00018180: 2074 6f6f 6c20 6f72 6965 6e74 6174 696f   tool orientatio
-00018190: 6e20 6d69 6768 740a 2020 2020 2020 2020  n might.        
-000181a0: 6265 2075 6e69 6d70 6f72 7461 6e74 2c20  be unimportant, 
-000181b0: 696e 2077 6869 6368 2063 6173 6520 7573  in which case us
-000181c0: 6520 7468 6520 6f70 7469 6f6e 2060 6077  e the option ``w
-000181d0: 653d 5b31 2c20 312c 2031 2c20 302c 2030  e=[1, 1, 1, 0, 0
-000181e0: 2c20 305d 6060 2e0a 0a0a 0a20 2020 2020  , 0]``.....     
-000181f0: 2020 202e 2e20 6e6f 7465 3a3a 0a0a 2020     .. note::..  
-00018200: 2020 2020 2020 2020 2020 2d20 5365 6520            - See 
-00018210: 6054 6f6f 6c62 6f78 206b 696e 656d 6174  `Toolbox kinemat
-00018220: 6963 7320 7769 6b69 2070 6167 650a 2020  ics wiki page.  
-00018230: 2020 2020 2020 2020 2020 2020 2020 3c68                <h
-00018240: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00018250: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-00018260: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00018270: 7468 6f6e 2f77 696b 692f 4b69 6e65 6d61  thon/wiki/Kinema
-00018280: 7469 6373 3e60 5f0a 2020 2020 2020 2020  tics>`_.        
-00018290: 2020 2020 2d20 496d 706c 656d 656e 7473      - Implements
-000182a0: 2061 204c 6576 656e 6265 7267 2d4d 6172   a Levenberg-Mar
-000182b0: 7175 6164 7420 7661 7269 6162 6c65 2d64  quadt variable-d
-000182c0: 616d 7069 6e67 2073 6f6c 7665 722e 0a20  amping solver.. 
-000182d0: 2020 2020 2020 2020 2020 202d 2054 6865             - The
-000182e0: 2074 6f6c 6572 616e 6365 2069 7320 636f   tolerance is co
-000182f0: 6d70 7574 6564 206f 6e20 7468 6520 6e6f  mputed on the no
-00018300: 726d 206f 6620 7468 6520 6572 726f 7220  rm of the error 
-00018310: 6265 7477 6565 6e0a 2020 2020 2020 2020  between.        
-00018320: 2020 2020 2020 2020 6375 7272 656e 7420          current 
-00018330: 616e 6420 6465 7369 7265 6420 746f 6f6c  and desired tool
-00018340: 2070 6f73 652e 2020 5468 6973 206e 6f72   pose.  This nor
-00018350: 6d20 6973 2063 6f6d 7075 7465 6420 6672  m is computed fr
-00018360: 6f6d 0a20 2020 2020 2020 2020 2020 2020  om.             
-00018370: 2020 2064 6973 7461 6e63 6573 2061 6e64     distances and
-00018380: 2061 6e67 6c65 7320 7769 7468 6f75 7420   angles without 
-00018390: 616e 7920 6b69 6e64 206f 6620 7765 6967  any kind of weig
-000183a0: 6874 696e 672e 0a20 2020 2020 2020 2020  hting..         
-000183b0: 2020 202d 2054 6865 2069 6e76 6572 7365     - The inverse
-000183c0: 206b 696e 656d 6174 6963 2073 6f6c 7574   kinematic solut
-000183d0: 696f 6e20 6973 2067 656e 6572 616c 6c79  ion is generally
-000183e0: 206e 6f74 2075 6e69 7175 652c 2061 6e64   not unique, and
-000183f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018400: 2064 6570 656e 6473 206f 6e20 7468 6520   depends on the 
-00018410: 696e 6974 6961 6c20 6775 6573 7320 6060  initial guess ``
-00018420: 7130 6060 2e0a 0a20 2020 2020 2020 203a  q0``...        :
-00018430: 7265 6665 7265 6e63 6573 3a0a 2020 2020  references:.    
-00018440: 2020 2020 2020 2020 544f 444f 0a0a 2020          TODO..  
-00018450: 2020 2020 2020 3a73 6565 616c 736f 3a0a        :seealso:.
-00018460: 2020 2020 2020 2020 2020 2020 544f 444f              TODO
-00018470: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00018480: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00018490: 662e 6574 7328 7374 6172 742c 2065 6e64  f.ets(start, end
-000184a0: 292e 696b 5f67 6e28 5465 702c 2071 302c  ).ik_gn(Tep, q0,
-000184b0: 2069 6c69 6d69 742c 2073 6c69 6d69 742c   ilimit, slimit,
-000184c0: 2074 6f6c 2c20 7265 6a65 6374 5f6a 6c2c   tol, reject_jl,
-000184d0: 2077 652c 2075 7365 5f70 696e 762c 2070   we, use_pinv, p
-000184e0: 696e 765f 6461 6d70 696e 6729 0a0a 0a0a  inv_damping)....
-000184f0: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  # ==============
-00018500: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018510: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018520: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018530: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 230a  ============= #.
-00018540: 0a0a 636c 6173 7320 4552 6f62 6f74 3228  ..class ERobot2(
-00018550: 4261 7365 4552 6f62 6f74 293a 0a20 2020  BaseERobot):.   
-00018560: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-00018570: 6c66 2c20 6172 672c 202a 2a6b 7761 7267  lf, arg, **kwarg
-00018580: 7329 3a0a 0a20 2020 2020 2020 2069 6620  s):..        if 
-00018590: 6973 696e 7374 616e 6365 2861 7267 2c20  isinstance(arg, 
-000185a0: 4554 5332 293a 0a20 2020 2020 2020 2020  ETS2):.         
-000185b0: 2020 2023 2077 6527 7265 2070 6173 7365     # we're passe
-000185c0: 6420 616e 2045 5453 2073 7472 696e 670a  d an ETS string.
-000185d0: 2020 2020 2020 2020 2020 2020 6c69 6e6b              link
-000185e0: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
-000185f0: 2020 2023 2063 686f 7020 6974 2075 7020     # chop it up 
-00018600: 696e 746f 2073 6567 6d65 6e74 732c 2061  into segments, a
-00018610: 206c 696e 6b20 6672 616d 6520 6166 7465   link frame afte
-00018620: 7220 6576 6572 7920 6a6f 696e 740a 2020  r every joint.  
-00018630: 2020 2020 2020 2020 2020 7061 7265 6e74            parent
-00018640: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00018650: 2020 2020 666f 7220 6a2c 2065 7473 5f6a      for j, ets_j
-00018660: 2069 6e20 656e 756d 6572 6174 6528 6172   in enumerate(ar
-00018670: 672e 7370 6c69 7428 2929 3a0a 2020 2020  g.split()):.    
-00018680: 2020 2020 2020 2020 2020 2020 656c 696e              elin
-00018690: 6b20 3d20 4c69 6e6b 3228 4554 5332 2865  k = Link2(ETS2(e
-000186a0: 7473 5f6a 292c 2070 6172 656e 743d 7061  ts_j), parent=pa
-000186b0: 7265 6e74 2c20 6e61 6d65 3d66 226c 696e  rent, name=f"lin
-000186c0: 6b7b 6a3a 647d 2229 0a20 2020 2020 2020  k{j:d}").       
-000186d0: 2020 2020 2020 2020 2070 6172 656e 7420           parent 
-000186e0: 3d20 656c 696e 6b0a 2020 2020 2020 2020  = elink.        
-000186f0: 2020 2020 2020 2020 6966 2028 0a20 2020          if (.   
-00018700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018710: 2065 6c69 6e6b 2e71 6c69 6d20 6973 204e   elink.qlim is N
-00018720: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00018730: 2020 2020 2020 2020 616e 6420 656c 696e          and elin
-00018740: 6b2e 7620 6973 206e 6f74 204e 6f6e 650a  k.v is not None.
-00018750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018760: 2020 2020 616e 6420 656c 696e 6b2e 762e      and elink.v.
-00018770: 716c 696d 2069 7320 6e6f 7420 4e6f 6e65  qlim is not None
-00018780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018790: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-000187a0: 2020 2020 2020 2020 656c 696e 6b2e 716c          elink.ql
-000187b0: 696d 203d 2065 6c69 6e6b 2e76 2e71 6c69  im = elink.v.qli
-000187c0: 6d0a 2020 2020 2020 2020 2020 2020 2020  m.              
-000187d0: 2020 6c69 6e6b 732e 6170 7065 6e64 2865    links.append(e
-000187e0: 6c69 6e6b 290a 0a20 2020 2020 2020 2065  link)..        e
-000187f0: 6c69 6620 6973 6c69 7374 6f66 2861 7267  lif islistof(arg
-00018800: 2c20 4c69 6e6b 3229 3a0a 2020 2020 2020  , Link2):.      
-00018810: 2020 2020 2020 6c69 6e6b 7320 3d20 6172        links = ar
-00018820: 670a 2020 2020 2020 2020 656c 7365 3a0a  g.        else:.
-00018830: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00018840: 6520 5479 7065 4572 726f 7228 2263 6f6e  e TypeError("con
-00018850: 7374 7275 6374 6f72 2061 7267 756d 656e  structor argumen
-00018860: 7420 6d75 7374 2062 6520 4554 5332 206f  t must be ETS2 o
-00018870: 7220 6c69 7374 206f 6620 4c69 6e6b 3222  r list of Link2"
-00018880: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
-00018890: 2829 2e5f 5f69 6e69 745f 5f28 6c69 6e6b  ().__init__(link
-000188a0: 732c 202a 2a6b 7761 7267 7329 0a0a 2020  s, **kwargs)..  
-000188b0: 2020 2020 2020 2320 7368 6f75 6c64 206a        # should j
-000188c0: 7573 7420 7365 7420 6974 2074 6f20 4e6f  ust set it to No
-000188d0: 6e65 0a20 2020 2020 2020 2073 656c 662e  ne.        self.
-000188e0: 6261 7365 203d 2053 4532 2829 2020 2320  base = SE2()  # 
-000188f0: 6f76 6572 7269 6465 2073 7570 6572 636c  override supercl
-00018900: 6173 730a 0a20 2020 2040 7072 6f70 6572  ass..    @proper
-00018910: 7479 0a20 2020 2064 6566 2062 6173 6528  ty.    def base(
-00018920: 7365 6c66 2920 2d3e 2053 4532 3a0a 2020  self) -> SE2:.  
-00018930: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00018940: 2020 4765 742f 7365 7420 726f 626f 7420    Get/set robot 
-00018950: 6261 7365 2074 7261 6e73 666f 726d 2028  base transform (
-00018960: 526f 626f 7420 7375 7065 7263 6c61 7373  Robot superclass
-00018970: 290a 0a20 2020 2020 2020 202d 2060 6072  )..        - ``r
-00018980: 6f62 6f74 2e62 6173 6560 6020 6973 2074  obot.base`` is t
-00018990: 6865 2072 6f62 6f74 2062 6173 6520 7472  he robot base tr
-000189a0: 616e 7366 6f72 6d0a 0a20 2020 2020 2020  ansform..       
-000189b0: 203a 7265 7475 726e 3a20 726f 626f 7420   :return: robot 
-000189c0: 746f 6f6c 2074 7261 6e73 666f 726d 0a20  tool transform. 
-000189d0: 2020 2020 2020 203a 7274 7970 653a 2053         :rtype: S
-000189e0: 4532 2069 6e73 7461 6e63 650a 0a20 2020  E2 instance..   
-000189f0: 2020 2020 202d 2060 6072 6f62 6f74 2e62       - ``robot.b
-00018a00: 6173 6520 3d20 2e2e 2e60 6020 6368 6563  ase = ...`` chec
-00018a10: 6b73 2061 6e64 2073 6574 7320 7468 6520  ks and sets the 
-00018a20: 726f 626f 7420 6261 7365 2074 7261 6e73  robot base trans
-00018a30: 666f 726d 0a0a 2020 2020 2020 2020 2e2e  form..        ..
-00018a40: 206e 6f74 653a 3a20 5468 6520 7072 6976   note:: The priv
-00018a50: 6174 6520 6174 7472 6962 7574 6520 6060  ate attribute ``
-00018a60: 5f62 6173 6560 6020 7769 6c6c 2062 6520  _base`` will be 
-00018a70: 4e6f 6e65 2069 6e20 7468 6520 6361 7365  None in the case
-00018a80: 206f 660a 2020 2020 2020 2020 2020 2020   of.            
-00018a90: 6e6f 2062 6173 6520 7472 616e 7366 6f72  no base transfor
-00018aa0: 6d2c 2062 7574 2074 6869 7320 7072 6f70  m, but this prop
-00018ab0: 6572 7479 2077 696c 6c20 7265 7475 726e  erty will return
-00018ac0: 2060 6053 4533 2829 6060 2077 6869 6368   ``SE3()`` which
-00018ad0: 0a20 2020 2020 2020 2020 2020 2069 7320  .            is 
-00018ae0: 616e 2069 6465 6e74 6974 7920 6d61 7472  an identity matr
-00018af0: 6978 2e0a 2020 2020 2020 2020 2222 220a  ix..        """.
-00018b00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00018b10: 5f62 6173 6520 6973 204e 6f6e 653a 0a20  _base is None:. 
-00018b20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00018b30: 5f62 6173 6520 3d20 5345 3228 290a 0a20  _base = SE2().. 
-00018b40: 2020 2020 2020 2023 2072 6574 7572 6e20         # return 
-00018b50: 6120 636f 7079 2c20 6f74 6865 7277 6973  a copy, otherwis
-00018b60: 6520 736f 6d65 626f 6479 2077 6974 680a  e somebody with.
-00018b70: 2020 2020 2020 2020 2320 7265 6665 7265          # refere
-00018b80: 6e63 6520 746f 2074 6865 2062 6173 6520  nce to the base 
-00018b90: 6361 6e20 6368 616e 6765 2069 740a 2020  can change it.  
-00018ba0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00018bb0: 662e 5f62 6173 652e 636f 7079 2829 0a0a  f._base.copy()..
-00018bc0: 2020 2020 4062 6173 652e 7365 7474 6572      @base.setter
-00018bd0: 0a20 2020 2064 6566 2062 6173 6528 7365  .    def base(se
-00018be0: 6c66 2c20 5429 3a0a 2020 2020 2020 2020  lf, T):.        
-00018bf0: 6966 2054 2069 7320 4e6f 6e65 3a0a 2020  if T is None:.  
-00018c00: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00018c10: 6261 7365 203d 2054 0a20 2020 2020 2020  base = T.       
-00018c20: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00018c30: 2873 656c 662c 2045 526f 626f 7432 293a  (self, ERobot2):
-00018c40: 0a20 2020 2020 2020 2020 2020 2023 2032  .            # 2
-00018c50: 4420 726f 626f 740a 2020 2020 2020 2020  D robot.        
-00018c60: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00018c70: 6528 542c 2053 4532 293a 0a20 2020 2020  e(T, SE2):.     
-00018c80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00018c90: 5f62 6173 6520 3d20 540a 2020 2020 2020  _base = T.      
-00018ca0: 2020 2020 2020 656c 6966 2053 4532 2e69        elif SE2.i
-00018cb0: 7376 616c 6964 2854 293a 0a20 2020 2020  svalid(T):.     
-00018cc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00018cd0: 5f74 6f6f 6c20 3d20 5345 3228 542c 2063  _tool = SE2(T, c
-00018ce0: 6865 636b 3d54 7275 6529 0a20 2020 2020  heck=True).     
-00018cf0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00018d00: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00018d10: 4572 726f 7228 2262 6173 6520 6d75 7374  Error("base must
-00018d20: 2062 6520 7365 7420 746f 204e 6f6e 6520   be set to None 
-00018d30: 286e 6f20 746f 6f6c 2920 6f72 2053 4532  (no tool) or SE2
-00018d40: 2229 0a0a 2020 2020 6465 6620 6a61 636f  ")..    def jaco
-00018d50: 6230 2873 656c 662c 2071 2c20 7374 6172  b0(self, q, star
-00018d60: 743d 4e6f 6e65 2c20 656e 643d 4e6f 6e65  t=None, end=None
-00018d70: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00018d80: 6e20 7365 6c66 2e65 7473 2873 7461 7274  n self.ets(start
-00018d90: 2c20 656e 6429 2e6a 6163 6f62 3028 7129  , end).jacob0(q)
-00018da0: 0a0a 2020 2020 6465 6620 6a61 636f 6265  ..    def jacobe
-00018db0: 2873 656c 662c 2071 2c20 7374 6172 743d  (self, q, start=
-00018dc0: 4e6f 6e65 2c20 656e 643d 4e6f 6e65 293a  None, end=None):
-00018dd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00018de0: 7365 6c66 2e65 7473 2873 7461 7274 2c20  self.ets(start, 
-00018df0: 656e 6429 2e6a 6163 6f62 6528 7129 0a0a  end).jacobe(q)..
-00018e00: 2020 2020 6465 6620 666b 696e 6528 7365      def fkine(se
-00018e10: 6c66 2c20 712c 2065 6e64 3d4e 6f6e 652c  lf, q, end=None,
-00018e20: 2073 7461 7274 3d4e 6f6e 6529 3a0a 0a20   start=None):.. 
-00018e30: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00018e40: 6c66 2e65 7473 2873 7461 7274 2c20 656e  lf.ets(start, en
-00018e50: 6429 2e66 6b69 6e65 2871 290a 0a0a 2320  d).fkine(q)...# 
-00018e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018ea0: 2d2d 2d2d 2d20 230a 0a23 2064 6566 2074  ----- #..# def t
-00018eb0: 6561 6368 280a 2320 2020 2020 2020 2020  each(.#         
-00018ec0: 7365 6c66 2c0a 2320 2020 2020 2020 2020  self,.#         
-00018ed0: 713d 4e6f 6e65 2c0a 2320 2020 2020 2020  q=None,.#       
-00018ee0: 2020 626c 6f63 6b3d 5472 7565 2c0a 2320    block=True,.# 
-00018ef0: 2020 2020 2020 2020 6c69 6d69 7473 3d4e          limits=N
-00018f00: 6f6e 652c 0a23 2020 2020 2020 2020 2076  one,.#         v
-00018f10: 656c 6c69 7073 653d 4661 6c73 652c 0a23  ellipse=False,.#
-00018f20: 2020 2020 2020 2020 2066 656c 6c69 7073           fellips
-00018f30: 653d 4661 6c73 652c 0a23 2020 2020 2020  e=False,.#      
-00018f40: 2020 2065 6566 7261 6d65 3d54 7275 652c     eeframe=True,
-00018f50: 0a23 2020 2020 2020 2020 206e 616d 653d  .#         name=
-00018f60: 4661 6c73 652c 0a23 2020 2020 2020 2020  False,.#        
-00018f70: 2075 6e69 743d 2772 6164 272c 0a23 2020   unit='rad',.#  
-00018f80: 2020 2020 2020 2062 6163 6b65 6e64 3d27         backend='
-00018f90: 7079 706c 6f74 3227 293a 0a23 2020 2020  pyplot2'):.#    
-00018fa0: 2022 2222 0a23 2020 2020 2032 4420 4772   """.#     2D Gr
-00018fb0: 6170 6869 6361 6c20 7465 6163 6820 7065  aphical teach pe
-00018fc0: 6e64 616e 740a 2320 2020 2020 3a70 6172  ndant.#     :par
-00018fd0: 616d 2062 6c6f 636b 3a20 426c 6f63 6b20  am block: Block 
-00018fe0: 6f70 6572 6174 696f 6e20 6f66 2074 6865  operation of the
-00018ff0: 2063 6f64 6520 616e 6420 6b65 6570 2074   code and keep t
-00019000: 6865 2066 6967 7572 6520 6f70 656e 0a23  he figure open.#
-00019010: 2020 2020 203a 7479 7065 2062 6c6f 636b       :type block
-00019020: 3a20 626f 6f6c 0a23 2020 2020 203a 7061  : bool.#     :pa
-00019030: 7261 6d20 713a 2054 6865 206a 6f69 6e74  ram q: The joint
-00019040: 2063 6f6e 6669 6775 7261 7469 6f6e 206f   configuration o
-00019050: 6620 7468 6520 726f 626f 7420 284f 7074  f the robot (Opt
-00019060: 696f 6e61 6c2c 0a23 2020 2020 2020 2020  ional,.#        
-00019070: 2069 6620 6e6f 7420 7375 7070 6c69 6564   if not supplied
-00019080: 2077 696c 6c20 7573 6520 7468 6520 7374   will use the st
-00019090: 6f72 6564 2071 2076 616c 7565 7329 2e0a  ored q values)..
-000190a0: 2320 2020 2020 3a74 7970 6520 713a 2066  #     :type q: f
-000190b0: 6c6f 6174 206e 6461 7272 6179 286e 290a  loat ndarray(n).
-000190c0: 2320 2020 2020 3a70 6172 616d 206c 696d  #     :param lim
-000190d0: 6974 733a 2043 7573 746f 6d20 7669 6577  its: Custom view
-000190e0: 206c 696d 6974 7320 666f 7220 7468 6520   limits for the 
-000190f0: 706c 6f74 2e20 4966 206e 6f74 2073 7570  plot. If not sup
-00019100: 706c 6965 6420 7769 6c6c 0a23 2020 2020  plied will.#    
-00019110: 2020 2020 2061 7574 6f73 6361 6c65 2c20       autoscale, 
-00019120: 5b78 312c 2078 322c 2079 312c 2079 325d  [x1, x2, y1, y2]
-00019130: 0a23 2020 2020 203a 7479 7065 206c 696d  .#     :type lim
-00019140: 6974 733a 2061 7272 6179 5f6c 696b 6528  its: array_like(
-00019150: 3429 0a23 2020 2020 203a 7061 7261 6d20  4).#     :param 
-00019160: 7665 6c6c 6970 7365 3a20 2850 6c6f 7420  vellipse: (Plot 
-00019170: 4f70 7469 6f6e 2920 506c 6f74 2074 6865  Option) Plot the
-00019180: 2076 656c 6f63 6974 7920 656c 6c69 7073   velocity ellips
-00019190: 6520 6174 2074 6865 0a23 2020 2020 2020  e at the.#      
-000191a0: 2020 2065 6e64 2d65 6666 6563 746f 720a     end-effector.
-000191b0: 2320 2020 2020 3a74 7970 6520 7665 6c6c  #     :type vell
-000191c0: 6970 7365 3a20 626f 6f6c 0a23 2020 2020  ipse: bool.#    
-000191d0: 203a 7061 7261 6d20 7665 6c6c 6970 7365   :param vellipse
-000191e0: 3a20 2850 6c6f 7420 4f70 7469 6f6e 2920  : (Plot Option) 
-000191f0: 506c 6f74 2074 6865 2066 6f72 6365 2065  Plot the force e
-00019200: 6c6c 6970 7365 2061 7420 7468 650a 2320  llipse at the.# 
-00019210: 2020 2020 2020 2020 656e 642d 6566 6665          end-effe
-00019220: 6374 6f72 0a23 2020 2020 203a 7479 7065  ctor.#     :type
-00019230: 2076 656c 6c69 7073 653a 2062 6f6f 6c0a   vellipse: bool.
-00019240: 2320 2020 2020 3a70 6172 616d 2065 6566  #     :param eef
-00019250: 7261 6d65 3a20 2850 6c6f 7420 4f70 7469  rame: (Plot Opti
-00019260: 6f6e 2920 506c 6f74 2074 6865 2065 6e64  on) Plot the end
-00019270: 2d65 6666 6563 746f 7220 636f 6f72 6469  -effector coordi
-00019280: 6e61 7465 2066 7261 6d65 0a23 2020 2020  nate frame.#    
-00019290: 2020 2020 2061 7420 7468 6520 6c6f 6361       at the loca
-000192a0: 7469 6f6e 206f 6620 7468 6520 656e 642d  tion of the end-
-000192b0: 6566 6665 6374 6f72 2e20 5573 6573 2074  effector. Uses t
-000192c0: 6872 6565 2061 7272 6f77 732c 2072 6564  hree arrows, red
-000192d0: 2c0a 2320 2020 2020 2020 2020 6772 6565  ,.#         gree
-000192e0: 6e20 616e 6420 626c 7565 2074 6f20 696e  n and blue to in
-000192f0: 6469 6361 7465 2074 6865 2078 2c20 792c  dicate the x, y,
-00019300: 2061 6e64 207a 2d61 7865 732e 0a23 2020   and z-axes..#  
-00019310: 2020 203a 7479 7065 2065 6566 7261 6d65     :type eeframe
-00019320: 3a20 626f 6f6c 0a23 2020 2020 203a 7061  : bool.#     :pa
-00019330: 7261 6d20 6e61 6d65 3a20 2850 6c6f 7420  ram name: (Plot 
-00019340: 4f70 7469 6f6e 2920 506c 6f74 2074 6865  Option) Plot the
-00019350: 206e 616d 6520 6f66 2074 6865 2072 6f62   name of the rob
-00019360: 6f74 206e 6561 7220 6974 7320 6261 7365  ot near its base
-00019370: 0a23 2020 2020 203a 7479 7065 206e 616d  .#     :type nam
-00019380: 653a 2062 6f6f 6c0a 2320 2020 2020 3a70  e: bool.#     :p
-00019390: 6172 616d 2075 6e69 743a 2061 6e67 756c  aram unit: angul
-000193a0: 6172 2075 6e69 7473 3a20 2772 6164 2720  ar units: 'rad' 
-000193b0: 5b64 6566 6175 6c74 5d2c 206f 7220 2764  [default], or 'd
-000193c0: 6567 270a 2320 2020 2020 3a74 7970 6520  eg'.#     :type 
-000193d0: 756e 6974 3a20 7374 720a 0a23 2020 2020  unit: str..#    
-000193e0: 203a 7265 7475 726e 3a20 4120 7265 6665   :return: A refe
-000193f0: 7265 6e63 6520 746f 2074 6865 2050 7950  rence to the PyP
-00019400: 6c6f 7420 6f62 6a65 6374 2077 6869 6368  lot object which
-00019410: 2063 6f6e 7472 6f6c 7320 7468 650a 2320   controls the.# 
-00019420: 2020 2020 2020 2020 6d61 7470 6c6f 746c          matplotl
-00019430: 6962 2066 6967 7572 650a 2320 2020 2020  ib figure.#     
-00019440: 3a72 7479 7065 3a20 5079 506c 6f74 0a23  :rtype: PyPlot.#
-00019450: 2020 2020 202d 2060 6072 6f62 6f74 2e74       - ``robot.t
-00019460: 6561 6368 3228 7129 6060 2063 7265 6174  each2(q)`` creat
-00019470: 6573 2061 2032 4420 6d61 7470 6c6f 746c  es a 2D matplotl
-00019480: 6962 2070 6c6f 7420 7768 6963 6820 616c  ib plot which al
-00019490: 6c6f 7773 2074 6865 0a23 2020 2020 2020  lows the.#      
-000194a0: 2075 7365 7220 746f 2022 6472 6976 6522   user to "drive"
-000194b0: 2061 2067 7261 7068 6963 616c 2072 6f62   a graphical rob
-000194c0: 6f74 2075 7369 6e67 2061 2067 7261 7068  ot using a graph
-000194d0: 6963 616c 2073 6c69 6465 7220 7061 6e65  ical slider pane
-000194e0: 6c2e 0a23 2020 2020 2020 2054 6865 2072  l..#       The r
-000194f0: 6f62 6f74 2773 2069 6e69 7461 6c20 6a6f  obot's inital jo
-00019500: 696e 7420 636f 6e66 6967 7572 6174 696f  int configuratio
-00019510: 6e20 6973 2060 6071 6060 2e20 5468 6520  n is ``q``. The 
-00019520: 706c 6f74 2077 696c 6c0a 2320 2020 2020  plot will.#     
-00019530: 2020 6175 746f 7363 616c 6520 7769 7468    autoscale with
-00019540: 2061 6e20 6173 7065 6374 2072 6174 696f   an aspect ratio
-00019550: 206f 6620 312e 0a23 2020 2020 202d 2060   of 1..#     - `
-00019560: 6072 6f62 6f74 2e74 6561 6368 3228 2960  `robot.teach2()`
-00019570: 6020 6173 2061 626f 7665 2065 7863 6570  ` as above excep
-00019580: 7420 7468 6520 726f 626f 7427 7320 7374  t the robot's st
-00019590: 6f72 6564 2076 616c 7565 206f 6620 6060  ored value of ``
-000195a0: 7160 600a 2320 2020 2020 2020 6973 2075  q``.#       is u
-000195b0: 7365 642e 0a23 2020 2020 202e 2e20 6e6f  sed..#     .. no
-000195c0: 7465 3a3a 0a23 2020 2020 2020 2020 202d  te::.#         -
-000195d0: 2050 726f 6772 616d 2065 7865 6375 7469   Program executi
-000195e0: 6f6e 2069 7320 626c 6f63 6b65 6420 756e  on is blocked un
-000195f0: 7469 6c20 7468 6520 7465 6163 6820 7769  til the teach wi
-00019600: 6e64 6f77 2069 730a 2320 2020 2020 2020  ndow is.#       
-00019610: 2020 2020 6469 736d 6973 7365 642e 2020      dismissed.  
-00019620: 4966 2060 6062 6c6f 636b 3d46 616c 7365  If ``block=False
-00019630: 6060 2074 6865 206d 6574 686f 6420 6973  `` the method is
-00019640: 206e 6f6e 2d62 6c6f 636b 696e 6720 6275   non-blocking bu
-00019650: 740a 2320 2020 2020 2020 2020 2020 796f  t.#           yo
-00019660: 7520 6e65 6564 2074 6f20 706f 6c6c 2074  u need to poll t
-00019670: 6865 2077 696e 646f 7720 6d61 6e61 6765  he window manage
-00019680: 7220 746f 2065 6e73 7572 6520 7468 6174  r to ensure that
-00019690: 2074 6865 2077 696e 646f 770a 2320 2020   the window.#   
-000196a0: 2020 2020 2020 2020 7265 6d61 696e 7320          remains 
-000196b0: 7265 7370 6f6e 7369 7665 2e0a 2320 2020  responsive..#   
-000196c0: 2020 2020 2020 2d20 5468 6520 736c 6964        - The slid
-000196d0: 6572 206c 696d 6974 7320 6172 6520 6465  er limits are de
-000196e0: 7269 7665 6420 6672 6f6d 2074 6865 206a  rived from the j
-000196f0: 6f69 6e74 206c 696d 6974 2070 726f 7065  oint limit prope
-00019700: 7274 6965 732e 0a23 2020 2020 2020 2020  rties..#        
-00019710: 2020 2049 6620 6e6f 7420 7365 7420 7468     If not set th
-00019720: 656e 3a0a 2320 2020 2020 2020 2020 2020  en:.#           
-00019730: 2020 2d20 466f 7220 7265 766f 6c75 7465    - For revolute
-00019740: 206a 6f69 6e74 7320 7468 6579 2061 7265   joints they are
-00019750: 2061 7373 756d 6564 2074 6f20 6265 205b   assumed to be [
-00019760: 2d70 692c 202b 7069 5d0a 2320 2020 2020  -pi, +pi].#     
-00019770: 2020 2020 2020 2020 2d20 466f 7220 7072          - For pr
-00019780: 6973 6d61 7469 6320 6a6f 696e 7420 7468  ismatic joint th
-00019790: 6579 2061 7265 2061 7373 756d 6564 2075  ey are assumed u
-000197a0: 6e6b 6e6f 776e 2061 6e64 2061 6e20 6572  nknown and an er
-000197b0: 726f 720a 2320 2020 2020 2020 2020 2020  ror.#           
-000197c0: 2020 2020 6f63 6375 7273 2e0a 2320 2020      occurs..#   
-000197d0: 2020 2020 2020 2020 4966 206e 6f74 2073          If not s
-000197e0: 6574 2074 6865 6e0a 2320 2020 2020 2020  et then.#       
-000197f0: 2020 2020 2020 2d20 466f 7220 7265 766f        - For revo
-00019800: 6c75 7465 206a 6f69 6e74 7320 7468 6579  lute joints they
-00019810: 2061 7265 2061 7373 756d 6564 2074 6f20   are assumed to 
-00019820: 6265 205b 2d70 692c 202b 7069 5d0a 2320  be [-pi, +pi].# 
-00019830: 2020 2020 2020 2020 2020 2020 2d20 466f              - Fo
-00019840: 7220 7072 6973 6d61 7469 6320 6a6f 696e  r prismatic join
-00019850: 7420 7468 6579 2061 7265 2061 7373 756d  t they are assum
-00019860: 6564 2075 6e6b 6e6f 776e 2061 6e64 2061  ed unknown and a
-00019870: 6e20 6572 726f 720a 2320 2020 2020 2020  n error.#       
-00019880: 2020 2020 2020 2020 6f63 6375 7273 2e0a          occurs..
-00019890: 2320 2020 2020 2222 220a 0a23 2020 2020  #     """..#    
-000198a0: 2069 6620 7120 6973 204e 6f6e 653a 0a23   if q is None:.#
-000198b0: 2020 2020 2020 2020 2071 203d 207a 6572           q = zer
-000198c0: 6f73 2828 7365 6c66 2e6e 2c29 290a 2320  os((self.n,)).# 
-000198d0: 2020 2020 656c 7365 3a0a 2320 2020 2020      else:.#     
-000198e0: 2020 2020 7120 3d20 6765 7476 6563 746f      q = getvecto
-000198f0: 7228 712c 2073 656c 662e 6e29 0a0a 2320  r(q, self.n)..# 
-00019900: 2020 2020 6966 2075 6e69 7420 3d3d 2027      if unit == '
-00019910: 6465 6727 3a0a 2320 2020 2020 2020 2020  deg':.#         
-00019920: 7120 3d20 7365 6c66 2e74 6f72 6164 6961  q = self.toradia
-00019930: 6e73 2871 290a 0a23 2020 2020 2023 204d  ns(q)..#     # M
-00019940: 616b 6520 616e 2065 6d70 7479 2033 4420  ake an empty 3D 
-00019950: 6669 6775 7265 0a23 2020 2020 2065 6e76  figure.#     env
-00019960: 203d 2073 656c 662e 5f67 6574 5f67 7261   = self._get_gra
-00019970: 7068 6963 616c 5f62 6163 6b65 6e64 2862  phical_backend(b
-00019980: 6163 6b65 6e64 290a 0a23 2020 2020 2023  ackend)..#     #
-00019990: 2041 6464 2074 6865 2072 6f62 6f74 2074   Add the robot t
-000199a0: 6f20 7468 6520 6669 6775 7265 2069 6e20  o the figure in 
-000199b0: 7265 6164 6f6e 6c79 206d 6f64 650a 2320  readonly mode.# 
-000199c0: 2020 2020 656e 762e 6c61 756e 6368 2827      env.launch('
-000199d0: 5465 6163 6820 2720 2b20 7365 6c66 2e6e  Teach ' + self.n
-000199e0: 616d 652c 206c 696d 6974 733d 6c69 6d69  ame, limits=limi
-000199f0: 7473 290a 2320 2020 2020 656e 762e 6164  ts).#     env.ad
-00019a00: 6428 0a23 2020 2020 2020 2020 2073 656c  d(.#         sel
-00019a10: 662c 2072 6561 646f 6e6c 793d 5472 7565  f, readonly=True
-00019a20: 2c0a 2320 2020 2020 2020 2020 6565 6672  ,.#         eefr
-00019a30: 616d 653d 6565 6672 616d 652c 206e 616d  ame=eeframe, nam
-00019a40: 653d 6e61 6d65 290a 0a23 2020 2020 2065  e=name)..#     e
-00019a50: 6e76 2e5f 6164 645f 7465 6163 685f 7061  nv._add_teach_pa
-00019a60: 6e65 6c28 7365 6c66 2c20 7129 0a0a 2320  nel(self, q)..# 
-00019a70: 2020 2020 6966 206c 696d 6974 7320 6973      if limits is
-00019a80: 204e 6f6e 653a 0a23 2020 2020 2020 2020   None:.#        
-00019a90: 206c 696d 6974 7320 3d20 725f 5b2d 312c   limits = r_[-1,
-00019aa0: 2031 2c20 2d31 2c20 315d 202a 2073 656c   1, -1, 1] * sel
-00019ab0: 662e 7265 6163 6820 2a20 312e 350a 2320  f.reach * 1.5.# 
-00019ac0: 2020 2020 2020 2020 656e 762e 6178 2e73          env.ax.s
-00019ad0: 6574 5f78 6c69 6d28 5b6c 696d 6974 735b  et_xlim([limits[
-00019ae0: 305d 2c20 6c69 6d69 7473 5b31 5d5d 290a  0], limits[1]]).
-00019af0: 2320 2020 2020 2020 2020 656e 762e 6178  #         env.ax
-00019b00: 2e73 6574 5f79 6c69 6d28 5b6c 696d 6974  .set_ylim([limit
-00019b10: 735b 325d 2c20 6c69 6d69 7473 5b33 5d5d  s[2], limits[3]]
-00019b20: 290a 0a23 2020 2020 2069 6620 7665 6c6c  )..#     if vell
-00019b30: 6970 7365 3a0a 2320 2020 2020 2020 2020  ipse:.#         
-00019b40: 7665 6c6c 203d 2073 656c 662e 7665 6c6c  vell = self.vell
-00019b50: 6970 7365 2863 656e 7472 653d 2765 6527  ipse(centre='ee'
-00019b60: 2c20 7363 616c 653d 302e 3529 0a23 2020  , scale=0.5).#  
-00019b70: 2020 2020 2020 2065 6e76 2e61 6464 2876         env.add(v
-00019b80: 656c 6c29 0a0a 2320 2020 2020 6966 2066  ell)..#     if f
-00019b90: 656c 6c69 7073 653a 0a23 2020 2020 2020  ellipse:.#      
-00019ba0: 2020 2066 656c 6c20 3d20 7365 6c66 2e66     fell = self.f
-00019bb0: 656c 6c69 7073 6528 6365 6e74 7265 3d27  ellipse(centre='
-00019bc0: 6565 2729 0a23 2020 2020 2020 2020 2065  ee').#         e
-00019bd0: 6e76 2e61 6464 2866 656c 6c29 0a0a 2320  nv.add(fell)..# 
-00019be0: 2020 2020 2320 4b65 6570 2074 6865 2070      # Keep the p
-00019bf0: 6c6f 7420 6f70 656e 0a23 2020 2020 2069  lot open.#     i
-00019c00: 6620 626c 6f63 6b3a 2020 2020 2020 2020  f block:        
-00019c10: 2020 2023 2070 7261 676d 613a 206e 6f20     # pragma: no 
-00019c20: 636f 7665 720a 2320 2020 2020 2020 2020  cover.#         
-00019c30: 656e 762e 686f 6c64 2829 0a0a 2320 2020  env.hold()..#   
-00019c40: 2020 7265 7475 726e 2065 6e76 0a0a 0a69    return env...i
-00019c50: 6620 5f5f 6e61 6d65 5f5f 203d 3d20 225f  f __name__ == "_
-00019c60: 5f6d 6169 6e5f 5f22 3a20 2023 2070 7261  _main__":  # pra
-00019c70: 676d 6120 6e6f 636f 7665 720a 0a20 2020  gma nocover..   
-00019c80: 2065 3120 3d20 4c69 6e6b 2845 5453 2845   e1 = Link(ETS(E
-00019c90: 542e 527a 2829 292c 206a 696e 6465 783d  T.Rz()), jindex=
-00019ca0: 3029 0a20 2020 2065 3220 3d20 4c69 6e6b  0).    e2 = Link
-00019cb0: 2845 5453 2845 542e 527a 2829 292c 206a  (ETS(ET.Rz()), j
-00019cc0: 696e 6465 783d 312c 2070 6172 656e 743d  index=1, parent=
-00019cd0: 6531 290a 2020 2020 6533 203d 204c 696e  e1).    e3 = Lin
-00019ce0: 6b28 4554 5328 4554 2e52 7a28 2929 2c20  k(ETS(ET.Rz()), 
-00019cf0: 6a69 6e64 6578 3d32 2c20 7061 7265 6e74  jindex=2, parent
-00019d00: 3d65 3229 0a20 2020 2065 3420 3d20 4c69  =e2).    e4 = Li
-00019d10: 6e6b 2845 5453 2845 542e 527a 2829 292c  nk(ETS(ET.Rz()),
-00019d20: 206a 696e 6465 783d 352c 2070 6172 656e   jindex=5, paren
-00019d30: 743d 6533 290a 0a20 2020 2045 526f 626f  t=e3)..    ERobo
-00019d40: 7428 5b65 312c 2065 322c 2065 332c 2065  t([e1, e2, e3, e
-00019d50: 345d 290a                                4]).
+0000c140: 2d2d 2d2d 2d2d 2023 0a0a 2020 2020 6465  ------ #..    de
+0000c150: 6620 6466 735f 6c69 6e6b 7328 0a20 2020  f dfs_links(.   
+0000c160: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000c170: 2020 2073 7461 7274 3a20 4c69 6e6b 5479     start: LinkTy
+0000c180: 7065 2c0a 2020 2020 2020 2020 6675 6e63  pe,.        func
+0000c190: 3a20 556e 696f 6e5b 4e6f 6e65 2c20 4361  : Union[None, Ca
+0000c1a0: 6c6c 6162 6c65 5b5b 4c69 6e6b 5479 7065  llable[[LinkType
+0000c1b0: 5d2c 2041 6e79 5d5d 203d 204e 6f6e 652c  ], Any]] = None,
+0000c1c0: 0a20 2020 2029 202d 3e20 4c69 7374 5b4c  .    ) -> List[L
+0000c1d0: 696e 6b54 7970 655d 3a0a 2020 2020 2020  inkType]:.      
+0000c1e0: 2020 2222 220a 2020 2020 2020 2020 4120    """.        A 
+0000c1f0: 6c69 6e6b 2073 6561 7263 6820 6d65 7468  link search meth
+0000c200: 6f64 0a0a 2020 2020 2020 2020 5669 7369  od..        Visi
+0000c210: 7420 616c 6c20 6c69 6e6b 7320 6672 6f6d  t all links from
+0000c220: 2073 7461 7274 2069 6e20 6465 7074 682d   start in depth-
+0000c230: 6669 7273 7420 6f72 6465 7220 616e 6420  first order and 
+0000c240: 7769 6c6c 2061 7070 6c79 0a20 2020 2020  will apply.     
+0000c250: 2020 2066 756e 6320 746f 2065 6163 6820     func to each 
+0000c260: 7669 7369 7465 6420 6c69 6e6b 0a0a 2020  visited link..  
+0000c270: 2020 2020 2020 5061 7261 6d65 7465 7273        Parameters
+0000c280: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000c290: 2d2d 2d0a 2020 2020 2020 2020 7374 6172  ---.        star
+0000c2a0: 740a 2020 2020 2020 2020 2020 2020 5468  t.            Th
+0000c2b0: 6520 6c69 6e6b 2074 6f20 7374 6172 7420  e link to start 
+0000c2c0: 6174 0a20 2020 2020 2020 2066 756e 630a  at.        func.
+0000c2d0: 2020 2020 2020 2020 2020 2020 416e 206f              An o
+0000c2e0: 7074 696f 6e61 6c20 6675 6e63 7469 6f6e  ptional function
+0000c2f0: 2074 6f20 6170 706c 7920 746f 2065 6163   to apply to eac
+0000c300: 6820 6c69 6e6b 2061 7320 6974 2069 7320  h link as it is 
+0000c310: 666f 756e 640a 0a20 2020 2020 2020 2052  found..        R
+0000c320: 6574 7572 6e73 0a20 2020 2020 2020 202d  eturns.        -
+0000c330: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 206c  ------.        l
+0000c340: 696e 6b73 0a20 2020 2020 2020 2020 2020  inks.           
+0000c350: 2041 206c 6973 7420 6f66 206c 696e 6b73   A list of links
+0000c360: 0a0a 2020 2020 2020 2020 2222 220a 0a20  ..        """.. 
+0000c370: 2020 2020 2020 2076 6973 6974 6564 203d         visited =
+0000c380: 205b 5d0a 0a20 2020 2020 2020 2064 6566   []..        def
+0000c390: 2076 6973 5f63 6869 6c64 7265 6e28 6c69   vis_children(li
+0000c3a0: 6e6b 293a 0a20 2020 2020 2020 2020 2020  nk):.           
+0000c3b0: 2076 6973 6974 6564 2e61 7070 656e 6428   visited.append(
+0000c3c0: 6c69 6e6b 290a 2020 2020 2020 2020 2020  link).          
+0000c3d0: 2020 6966 2066 756e 6320 6973 206e 6f74    if func is not
+0000c3e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000c3f0: 2020 2020 2020 2066 756e 6328 6c69 6e6b         func(link
+0000c400: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
+0000c410: 6f72 206c 6920 696e 206c 696e 6b2e 6368  or li in link.ch
+0000c420: 696c 6472 656e 3a0a 2020 2020 2020 2020  ildren:.        
+0000c430: 2020 2020 2020 2020 6966 206c 6920 6e6f          if li no
+0000c440: 7420 696e 2076 6973 6974 6564 3a0a 2020  t in visited:.  
+0000c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c460: 2020 7669 735f 6368 696c 6472 656e 286c    vis_children(l
+0000c470: 6929 0a0a 2020 2020 2020 2020 7669 735f  i)..        vis_
+0000c480: 6368 696c 6472 656e 2873 7461 7274 290a  children(start).
+0000c490: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000c4a0: 7669 7369 7465 640a 0a20 2020 2064 6566  visited..    def
+0000c4b0: 2061 6464 636f 6e66 6967 7572 6174 696f   addconfiguratio
+0000c4c0: 6e5f 6174 7472 2873 656c 662c 206e 616d  n_attr(self, nam
+0000c4d0: 653a 2073 7472 2c20 713a 2041 7272 6179  e: str, q: Array
+0000c4e0: 4c69 6b65 2c20 756e 6974 3a20 7374 7220  Like, unit: str 
+0000c4f0: 3d20 2272 6164 2229 3a0a 2020 2020 2020  = "rad"):.      
+0000c500: 2020 2222 220a 2020 2020 2020 2020 4164    """.        Ad
+0000c510: 6420 6120 6e61 6d65 6420 6a6f 696e 7420  d a named joint 
+0000c520: 636f 6e66 6967 7572 6174 696f 6e20 6173  configuration as
+0000c530: 2061 6e20 6174 7472 6962 7574 650a 0a20   an attribute.. 
+0000c540: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+0000c550: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+0000c560: 2d2d 2d2d 0a20 2020 2020 2020 206e 616d  ----.        nam
+0000c570: 650a 2020 2020 2020 2020 2020 2020 4e61  e.            Na
+0000c580: 6d65 206f 6620 7468 6520 6a6f 696e 7420  me of the joint 
+0000c590: 636f 6e66 6967 7572 6174 696f 6e0a 2020  configuration.  
+0000c5a0: 2020 2020 2020 710a 2020 2020 2020 2020        q.        
+0000c5b0: 2020 2020 4a6f 696e 7420 636f 6e66 6967      Joint config
+0000c5c0: 7572 6174 696f 6e0a 0a20 2020 2020 2020  uration..       
+0000c5d0: 2045 7861 6d70 6c65 730a 2020 2020 2020   Examples.      
+0000c5e0: 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020    --------.     
+0000c5f0: 2020 202e 2e20 7275 6e62 6c6f 636b 3a3a     .. runblock::
+0000c600: 2070 7963 6f6e 0a20 2020 2020 2020 203e   pycon.        >
+0000c610: 3e3e 2069 6d70 6f72 7420 726f 626f 7469  >> import roboti
+0000c620: 6373 746f 6f6c 626f 7820 6173 2072 7462  cstoolbox as rtb
+0000c630: 0a20 2020 2020 2020 203e 3e3e 2072 6f62  .        >>> rob
+0000c640: 6f74 203d 2072 7462 2e6d 6f64 656c 732e  ot = rtb.models.
+0000c650: 4448 2e50 756d 6135 3630 2829 0a20 2020  DH.Puma560().   
+0000c660: 2020 2020 203e 3e3e 2072 6f62 6f74 2e61       >>> robot.a
+0000c670: 6464 636f 6e66 6967 7572 6174 696f 6e5f  ddconfiguration_
+0000c680: 6174 7472 2822 6d79 706f 7322 2c20 5b30  attr("mypos", [0
+0000c690: 2e31 2c20 302e 322c 2030 2e33 2c20 302e  .1, 0.2, 0.3, 0.
+0000c6a0: 342c 2030 2e35 2c20 302e 365d 290a 2020  4, 0.5, 0.6]).  
+0000c6b0: 2020 2020 2020 3e3e 3e20 726f 626f 742e        >>> robot.
+0000c6c0: 6d79 706f 730a 2020 2020 2020 2020 3e3e  mypos.        >>
+0000c6d0: 3e20 726f 626f 742e 636f 6e66 6967 735b  > robot.configs[
+0000c6e0: 226d 7970 6f73 225d 0a0a 2020 2020 2020  "mypos"]..      
+0000c6f0: 2020 4e6f 7465 730a 2020 2020 2020 2020    Notes.        
+0000c700: 2d2d 2d2d 2d0a 2020 2020 2020 2020 2d20  -----.        - 
+0000c710: 5573 6564 2069 6e20 726f 626f 7420 6d6f  Used in robot mo
+0000c720: 6465 6c20 696e 6974 206d 6574 686f 6420  del init method 
+0000c730: 746f 2073 746f 7265 2074 6865 2060 6071  to store the ``q
+0000c740: 7260 6020 636f 6e66 6967 7572 6174 696f  r`` configuratio
+0000c750: 6e0a 2020 2020 2020 2020 2d20 4479 6e61  n.        - Dyna
+0000c760: 6d69 6361 6c6c 7920 6164 6469 6e67 2061  mically adding a
+0000c770: 7474 7269 6275 7465 7320 746f 206f 626a  ttributes to obj
+0000c780: 6563 7473 2063 616e 2063 6175 7365 2069  ects can cause i
+0000c790: 7373 7565 7320 7769 7468 0a20 2020 2020  ssues with.     
+0000c7a0: 2020 2020 2020 2050 7974 686f 6e20 7479         Python ty
+0000c7b0: 7065 2063 6865 636b 696e 672e 0a20 2020  pe checking..   
+0000c7c0: 2020 2020 202d 2043 6f6e 6669 6775 7261       - Configura
+0000c7d0: 7469 6f6e 2069 7320 616c 736f 2061 6464  tion is also add
+0000c7e0: 6564 2074 6f20 7468 6520 726f 626f 7420  ed to the robot 
+0000c7f0: 696e 7374 616e 6365 2773 2064 6963 7469  instance's dicti
+0000c800: 6f6e 6172 7920 6f66 0a20 2020 2020 2020  onary of.       
+0000c810: 2020 2020 206e 616d 6564 2063 6f6e 6669       named confi
+0000c820: 6775 7261 7469 6f6e 732e 0a0a 2020 2020  gurations...    
+0000c830: 2020 2020 5365 6520 416c 736f 0a20 2020      See Also.   
+0000c840: 2020 2020 202d 2d2d 2d2d 2d2d 2d0a 2020       --------.  
+0000c850: 2020 2020 2020 3a6d 6574 683a 6061 6464        :meth:`add
+0000c860: 636f 6e66 6967 7572 6174 696f 6e60 0a0a  configuration`..
+0000c870: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0000c880: 2020 2020 2076 203d 2067 6574 756e 6974       v = getunit
+0000c890: 2871 2c20 756e 6974 2c20 6469 6d3d 7365  (q, unit, dim=se
+0000c8a0: 6c66 2e6e 290a 2020 2020 2020 2020 7365  lf.n).        se
+0000c8b0: 6c66 2e5f 636f 6e66 6967 735b 6e61 6d65  lf._configs[name
+0000c8c0: 5d20 3d20 760a 2020 2020 2020 2020 7365  ] = v.        se
+0000c8d0: 7461 7474 7228 7365 6c66 2c20 6e61 6d65  tattr(self, name
+0000c8e0: 2c20 7629 0a0a 2020 2020 6465 6620 6164  , v)..    def ad
+0000c8f0: 6463 6f6e 6669 6775 7261 7469 6f6e 2873  dconfiguration(s
+0000c900: 656c 662c 206e 616d 653a 2073 7472 2c20  elf, name: str, 
+0000c910: 713a 204e 4441 7272 6179 293a 0a20 2020  q: NDArray):.   
+0000c920: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000c930: 2041 6464 2061 206e 616d 6564 206a 6f69   Add a named joi
+0000c940: 6e74 2063 6f6e 6669 6775 7261 7469 6f6e  nt configuration
+0000c950: 0a0a 2020 2020 2020 2020 4164 6420 6120  ..        Add a 
+0000c960: 6e61 6d65 6420 636f 6e66 6967 7572 6174  named configurat
+0000c970: 696f 6e20 746f 2074 6865 2072 6f62 6f74  ion to the robot
+0000c980: 2069 6e73 7461 6e63 6527 7320 6469 6374   instance's dict
+0000c990: 696f 6e61 7279 206f 6620 6e61 6d65 640a  ionary of named.
+0000c9a0: 2020 2020 2020 2020 636f 6e66 6967 7572          configur
+0000c9b0: 6174 696f 6e73 2e0a 0a20 2020 2020 2020  ations...       
+0000c9c0: 2050 6172 616d 6574 6572 730a 2020 2020   Parameters.    
+0000c9d0: 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20      ----------. 
+0000c9e0: 2020 2020 2020 206e 616d 650a 2020 2020         name.    
+0000c9f0: 2020 2020 2020 2020 4e61 6d65 206f 6620          Name of 
+0000ca00: 7468 6520 6a6f 696e 7420 636f 6e66 6967  the joint config
+0000ca10: 7572 6174 696f 6e0a 2020 2020 2020 2020  uration.        
+0000ca20: 710a 2020 2020 2020 2020 2020 2020 4a6f  q.            Jo
+0000ca30: 696e 7420 636f 6e66 6967 7572 6174 696f  int configuratio
+0000ca40: 6e0a 0a0a 0a20 2020 2020 2020 2045 7861  n....        Exa
+0000ca50: 6d70 6c65 730a 2020 2020 2020 2020 2d2d  mples.        --
+0000ca60: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 202e  ------.        .
+0000ca70: 2e20 7275 6e62 6c6f 636b 3a3a 2070 7963  . runblock:: pyc
+0000ca80: 6f6e 0a20 2020 2020 2020 203e 3e3e 2069  on.        >>> i
+0000ca90: 6d70 6f72 7420 726f 626f 7469 6373 746f  mport roboticsto
+0000caa0: 6f6c 626f 7820 6173 2072 7462 0a20 2020  olbox as rtb.   
+0000cab0: 2020 2020 203e 3e3e 2072 6f62 6f74 203d       >>> robot =
+0000cac0: 2072 7462 2e6d 6f64 656c 732e 4448 2e50   rtb.models.DH.P
+0000cad0: 756d 6135 3630 2829 0a20 2020 2020 2020  uma560().       
+0000cae0: 203e 3e3e 2072 6f62 6f74 2e61 6464 636f   >>> robot.addco
+0000caf0: 6e66 6967 7572 6174 696f 6e5f 6174 7472  nfiguration_attr
+0000cb00: 2822 6d79 706f 7322 2c20 5b30 2e31 2c20  ("mypos", [0.1, 
+0000cb10: 302e 322c 2030 2e33 2c20 302e 342c 2030  0.2, 0.3, 0.4, 0
+0000cb20: 2e35 2c20 302e 365d 290a 2020 2020 2020  .5, 0.6]).      
+0000cb30: 2020 3e3e 3e20 726f 626f 742e 636f 6e66    >>> robot.conf
+0000cb40: 6967 735b 226d 7970 6f73 225d 0a0a 2020  igs["mypos"]..  
+0000cb50: 2020 2020 2020 5365 6520 416c 736f 0a20        See Also. 
+0000cb60: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+0000cb70: 2020 2020 2020 2020 3a6d 6574 683a 6061          :meth:`a
+0000cb80: 6464 636f 6e66 6967 7572 6174 696f 6e60  ddconfiguration`
+0000cb90: 0a0a 2020 2020 2020 2020 2222 220a 0a20  ..        """.. 
+0000cba0: 2020 2020 2020 2073 656c 662e 5f63 6f6e         self._con
+0000cbb0: 6669 6773 5b6e 616d 655d 203d 2071 0a0a  figs[name] = q..
+0000cbc0: 2020 2020 6465 6620 636f 6e66 6967 7572      def configur
+0000cbd0: 6174 696f 6e73 5f73 7472 2873 656c 662c  ations_str(self,
+0000cbe0: 2062 6f72 6465 723d 2274 6869 6e22 293a   border="thin"):
+0000cbf0: 0a20 2020 2020 2020 2064 6567 203d 2031  .        deg = 1
+0000cc00: 3830 202f 206e 702e 7069 0a0a 2020 2020  80 / np.pi..    
+0000cc10: 2020 2020 2320 544f 444f 3a20 6661 6374      # TODO: fact
+0000cc20: 6f72 2074 6869 7320 6f75 7420 6f66 2044  or this out of D
+0000cc30: 4852 6f62 6f74 0a20 2020 2020 2020 2064  HRobot.        d
+0000cc40: 6566 2061 6e67 6c65 2874 6865 7461 2c20  ef angle(theta, 
+0000cc50: 666d 743d 4e6f 6e65 293a 0a20 2020 2020  fmt=None):.     
+0000cc60: 2020 2020 2020 2069 6620 666d 7420 6973         if fmt is
+0000cc70: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000cc80: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+0000cc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cca0: 2020 2020 7265 7475 726e 2066 6d74 2e66      return fmt.f
+0000ccb0: 6f72 6d61 7428 7468 6574 6120 2a20 6465  ormat(theta * de
+0000ccc0: 6729 202b 2022 5c75 3030 6230 220a 2020  g) + "\u00b0".  
+0000ccd0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+0000cce0: 6365 7074 2054 7970 6545 7272 6f72 3a20  cept TypeError: 
+0000ccf0: 2023 2070 7261 676d 6120 6e6f 636f 7665   # pragma nocove
+0000cd00: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
+0000cd10: 2020 2020 2020 7061 7373 0a0a 2020 2020        pass..    
+0000cd20: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000cd30: 7472 2874 6865 7461 202a 2064 6567 2920  tr(theta * deg) 
+0000cd40: 2b20 225c 7530 3062 3022 2020 2320 7072  + "\u00b0"  # pr
+0000cd50: 6167 6d61 206e 6f63 6f76 6572 0a0a 2020  agma nocover..  
+0000cd60: 2020 2020 2020 2320 7368 6f77 206e 616d        # show nam
+0000cd70: 6564 2063 6f6e 6669 6775 7261 7469 6f6e  ed configuration
+0000cd80: 730a 2020 2020 2020 2020 6966 206c 656e  s.        if len
+0000cd90: 2873 656c 662e 5f63 6f6e 6669 6773 2920  (self._configs) 
+0000cda0: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
+0000cdb0: 2074 6162 6c65 203d 2041 4e53 4954 6162   table = ANSITab
+0000cdc0: 6c65 280a 2020 2020 2020 2020 2020 2020  le(.            
+0000cdd0: 2020 2020 436f 6c75 6d6e 2822 6e61 6d65      Column("name
+0000cde0: 222c 2063 6f6c 616c 6967 6e3d 223e 2229  ", colalign=">")
+0000cdf0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000ce00: 2020 2a5b 0a20 2020 2020 2020 2020 2020    *[.           
+0000ce10: 2020 2020 2020 2020 2043 6f6c 756d 6e28           Column(
+0000ce20: 6622 717b 6a3a 647d 222c 2063 6f6c 616c  f"q{j:d}", colal
+0000ce30: 6967 6e3d 223c 222c 2068 6561 6461 6c69  ign="<", headali
+0000ce40: 676e 3d22 3c22 290a 2020 2020 2020 2020  gn="<").        
+0000ce50: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0000ce60: 6a20 696e 2072 616e 6765 2873 656c 662e  j in range(self.
+0000ce70: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
+0000ce80: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+0000ce90: 2020 2020 2020 626f 7264 6572 3d62 6f72        border=bor
+0000cea0: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+0000ceb0: 2029 0a0a 2020 2020 2020 2020 2020 2020   )..            
+0000cec0: 666f 7220 6e61 6d65 2c20 7120 696e 2073  for name, q in s
+0000ced0: 656c 662e 5f63 6f6e 6669 6773 2e69 7465  elf._configs.ite
+0000cee0: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+0000cef0: 2020 2020 2020 716c 6973 7420 3d20 5b5d        qlist = []
+0000cf00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cf10: 2066 6f72 206a 2c20 6320 696e 2065 6e75   for j, c in enu
+0000cf20: 6d65 7261 7465 2873 656c 662e 7374 7275  merate(self.stru
+0000cf30: 6374 7572 6529 3a0a 2020 2020 2020 2020  cture):.        
+0000cf40: 2020 2020 2020 2020 2020 2020 6966 2063              if c
+0000cf50: 203d 3d20 2250 223a 0a20 2020 2020 2020   == "P":.       
+0000cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf70: 2071 6c69 7374 2e61 7070 656e 6428 6622   qlist.append(f"
+0000cf80: 7b71 5b6a 5d3a 202e 3367 7d22 290a 2020  {q[j]: .3g}").  
+0000cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cfa0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000cfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cfc0: 716c 6973 742e 6170 7065 6e64 2861 6e67  qlist.append(ang
+0000cfd0: 6c65 2871 5b6a 5d2c 2022 7b3a 202e 3367  le(q[j], "{: .3g
+0000cfe0: 7d22 2929 0a20 2020 2020 2020 2020 2020  }")).           
+0000cff0: 2020 2020 2074 6162 6c65 2e72 6f77 286e       table.row(n
+0000d000: 616d 652c 202a 716c 6973 7429 0a0a 2020  ame, *qlist)..  
+0000d010: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000d020: 2022 5c6e 2220 2b20 7374 7228 7461 626c   "\n" + str(tabl
+0000d030: 6529 0a20 2020 2020 2020 2065 6c73 653a  e).        else:
+0000d040: 2020 2320 7072 6167 6d61 206e 6f63 6f76    # pragma nocov
+0000d050: 6572 0a20 2020 2020 2020 2020 2020 2072  er.            r
+0000d060: 6574 7572 6e20 2222 0a0a 2020 2020 6465  eturn ""..    de
+0000d070: 6620 7261 6e64 6f6d 5f71 2873 656c 6629  f random_q(self)
+0000d080: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0000d090: 2020 2020 2020 5265 7475 726e 2061 2072        Return a r
+0000d0a0: 616e 646f 6d20 6a6f 696e 7420 636f 6e66  andom joint conf
+0000d0b0: 6967 7572 6174 696f 6e0a 0a20 2020 2020  iguration..     
+0000d0c0: 2020 2054 6865 2076 616c 7565 2066 6f72     The value for
+0000d0d0: 2065 6163 6820 6a6f 696e 7420 6973 2075   each joint is u
+0000d0e0: 6e69 666f 726d 2072 616e 646f 6d6c 7920  niform randomly 
+0000d0f0: 6469 7374 7269 6275 7465 6420 2062 6574  distributed  bet
+0000d100: 7765 656e 2074 6865 0a20 2020 2020 2020  ween the.       
+0000d110: 206c 696d 6974 7320 7365 7420 666f 7220   limits set for 
+0000d120: 7468 6520 726f 626f 742e 0a0a 2020 2020  the robot...    
+0000d130: 2020 2020 4e6f 7465 0a20 2020 2020 2020      Note.       
+0000d140: 202d 2d2d 2d0a 2020 2020 2020 2020 5468   ----.        Th
+0000d150: 6520 6a6f 696e 7420 6c69 6d69 7420 666f  e joint limit fo
+0000d160: 7220 616c 6c20 6a6f 696e 7473 206d 7573  r all joints mus
+0000d170: 7420 6265 2073 6574 2e0a 0a20 2020 2020  t be set...     
+0000d180: 2020 2052 6574 7572 6e73 0a20 2020 2020     Returns.     
+0000d190: 2020 202d 2d2d 2d2d 2d2d 0a20 2020 2020     -------.     
+0000d1a0: 2020 2071 0a20 2020 2020 2020 2020 2020     q.           
+0000d1b0: 2052 616e 646f 6d20 6a6f 696e 7420 636f   Random joint co
+0000d1c0: 6e66 6967 7572 6174 696f 6e20 3a72 7479  nfiguration :rty
+0000d1d0: 7065 3a20 6e64 6172 7261 7928 6e29 0a0a  pe: ndarray(n)..
+0000d1e0: 2020 2020 2020 2020 5365 6520 416c 736f          See Also
+0000d1f0: 0a20 2020 2020 2020 202d 2d2d 2d2d 2d2d  .        -------
+0000d200: 2d0a 2020 2020 2020 2020 3a66 756e 633a  -.        :func:
+0000d210: 6052 6f62 6f74 2e71 6c69 6d60 0a20 2020  `Robot.qlim`.   
+0000d220: 2020 2020 203a 6675 6e63 3a60 4c69 6e6b       :func:`Link
+0000d230: 2e71 6c69 6d60 0a0a 2020 2020 2020 2020  .qlim`..        
+0000d240: 2222 220a 0a20 2020 2020 2020 2071 6c69  """..        qli
+0000d250: 6d20 3d20 7365 6c66 2e71 6c69 6d0a 2020  m = self.qlim.  
+0000d260: 2020 2020 2020 6966 206e 702e 616e 7928        if np.any(
+0000d270: 6e70 2e69 736e 616e 2871 6c69 6d29 293a  np.isnan(qlim)):
+0000d280: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0000d290: 7365 2056 616c 7565 4572 726f 7228 2273  se ValueError("s
+0000d2a0: 6f6d 6520 6a6f 696e 7420 6c69 6d69 7473  ome joint limits
+0000d2b0: 206e 6f74 2064 6566 696e 6564 2229 2020   not defined")  
+0000d2c0: 2320 7072 6167 6d61 206e 6f63 6f76 6572  # pragma nocover
+0000d2d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000d2e0: 6e70 2e72 616e 646f 6d2e 756e 6966 6f72  np.random.unifor
+0000d2f0: 6d28 6c6f 773d 716c 696d 5b30 2c20 3a5d  m(low=qlim[0, :]
+0000d300: 2c20 6869 6768 3d71 6c69 6d5b 312c 203a  , high=qlim[1, :
+0000d310: 5d2c 2073 697a 653d 2873 656c 662e 6e2c  ], size=(self.n,
+0000d320: 2929 0a0a 2020 2020 6465 6620 6c69 6e6b  ))..    def link
+0000d330: 636f 6c6f 726d 6170 2873 656c 662c 206c  colormap(self, l
+0000d340: 696e 6b63 6f6c 6f72 733a 2055 6e69 6f6e  inkcolors: Union
+0000d350: 5b4c 6973 745b 416e 795d 2c20 7374 725d  [List[Any], str]
+0000d360: 203d 2022 7669 7269 6469 7322 293a 0a20   = "viridis"):. 
+0000d370: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000d380: 2020 2043 7265 6174 6520 6120 636f 6c6f     Create a colo
+0000d390: 726d 6170 2066 6f72 2072 6f62 6f74 206a  rmap for robot j
+0000d3a0: 6f69 6e74 730a 0a20 2020 2020 2020 202d  oints..        -
+0000d3b0: 2060 6063 6d20 3d20 726f 626f 742e 6c69   ``cm = robot.li
+0000d3c0: 6e6b 636f 6c6f 726d 6170 2829 6060 2069  nkcolormap()`` i
+0000d3d0: 7320 616e 206e 2d65 6c65 6d65 6e74 2063  s an n-element c
+0000d3e0: 6f6c 6f72 6d61 7020 7468 6174 2067 6976  olormap that giv
+0000d3f0: 6573 2061 0a20 2020 2020 2020 2020 2075  es a.          u
+0000d400: 6e69 7175 6520 636f 6c6f 7220 666f 7220  nique color for 
+0000d410: 6576 6572 7920 6c69 6e6b 2e20 2054 6865  every link.  The
+0000d420: 2052 4742 4120 636f 6c6f 7273 2066 6f72   RGBA colors for
+0000d430: 206c 696e 6b20 6060 6a60 6020 6172 650a   link ``j`` are.
+0000d440: 2020 2020 2020 2020 2020 6060 636d 286a            ``cm(j
+0000d450: 2960 602e 0a20 2020 2020 2020 202d 2060  )``..        - `
+0000d460: 6063 6d20 3d20 726f 626f 742e 6c69 6e6b  `cm = robot.link
+0000d470: 636f 6c6f 726d 6170 2863 6d61 7029 6060  colormap(cmap)``
+0000d480: 2061 7320 6162 6f76 6520 6275 7420 6060   as above but ``
+0000d490: 636d 6170 6060 2069 7320 7468 6520 6e61  cmap`` is the na
+0000d4a0: 6d65 0a20 2020 2020 2020 2020 206f 6620  me.          of 
+0000d4b0: 6120 7661 6c69 6420 6d61 7470 6c6f 746c  a valid matplotl
+0000d4c0: 6962 2063 6f6c 6f72 6d61 702e 2020 5468  ib colormap.  Th
+0000d4d0: 6520 6465 6661 756c 742c 2065 7861 6d70  e default, examp
+0000d4e0: 6c65 2061 626f 7665 2c20 6973 2074 6865  le above, is the
+0000d4f0: 0a20 2020 2020 2020 2020 2060 6076 6972  .          ``vir
+0000d500: 6964 6973 6060 2063 6f6c 6f72 6d61 702e  idis`` colormap.
+0000d510: 0a20 2020 2020 2020 202d 2060 6063 6d20  .        - ``cm 
+0000d520: 3d20 726f 626f 742e 6c69 6e6b 636f 6c6f  = robot.linkcolo
+0000d530: 726d 6170 286c 6973 7420 6f66 2063 6f6c  rmap(list of col
+0000d540: 6f72 7329 6060 2061 7320 6162 6f76 6520  ors)`` as above 
+0000d550: 6275 7420 610a 2020 2020 2020 2020 2020  but a.          
+0000d560: 636f 6c6f 726d 6170 2069 7320 6372 6561  colormap is crea
+0000d570: 7465 6420 6672 6f6d 2061 206c 6973 7420  ted from a list 
+0000d580: 6f66 206e 2063 6f6c 6f72 206e 616d 6573  of n color names
+0000d590: 2067 6976 656e 2061 7320 7374 7269 6e67   given as string
+0000d5a0: 732c 0a20 2020 2020 2020 2020 2074 7570  s,.          tup
+0000d5b0: 6c65 7320 6f72 2068 6578 7374 7269 6e67  les or hexstring
+0000d5c0: 732e 0a0a 2020 2020 2020 2020 5061 7261  s...        Para
+0000d5d0: 6d65 7465 7273 0a20 2020 2020 2020 202d  meters.        -
+0000d5e0: 2d2d 2d2d 2d2d 2d2d 2d0a 2020 2020 2020  ---------.      
+0000d5f0: 2020 6c69 6e6b 636f 6c6f 7273 0a20 2020    linkcolors.   
+0000d600: 2020 2020 2020 2020 206c 6973 7420 6f66           list of
+0000d610: 2063 6f6c 6f72 7320 6f72 2063 6f6c 6f72   colors or color
+0000d620: 6d61 702c 2064 6566 6175 6c74 7320 746f  map, defaults to
+0000d630: 2022 7669 7269 6469 7322 0a0a 2020 2020   "viridis"..    
+0000d640: 2020 2020 5265 7475 726e 730a 2020 2020      Returns.    
+0000d650: 2020 2020 2d2d 2d2d 2d2d 2d0a 2020 2020      -------.    
+0000d660: 2020 2020 636f 6c6f 7220 6d61 700a 2020      color map.  
+0000d670: 2020 2020 2020 2020 2020 7468 6520 636f            the co
+0000d680: 6c6f 7220 6d61 700a 0a0a 2020 2020 2020  lor map...      
+0000d690: 2020 4578 616d 706c 6573 0a20 2020 2020    Examples.     
+0000d6a0: 2020 202d 2d2d 2d2d 2d2d 2d0a 2020 2020     --------.    
+0000d6b0: 2020 2020 2e2e 2072 756e 626c 6f63 6b3a      .. runblock:
+0000d6c0: 3a20 7079 636f 6e0a 2020 2020 2020 2020  : pycon.        
+0000d6d0: 3e3e 3e20 696d 706f 7274 2072 6f62 6f74  >>> import robot
+0000d6e0: 6963 7374 6f6f 6c62 6f78 2061 7320 7274  icstoolbox as rt
+0000d6f0: 620a 2020 2020 2020 2020 3e3e 3e20 726f  b.        >>> ro
+0000d700: 626f 7420 3d20 7274 622e 6d6f 6465 6c73  bot = rtb.models
+0000d710: 2e44 482e 5075 6d61 3536 3028 290a 2020  .DH.Puma560().  
+0000d720: 2020 2020 2020 3e3e 3e20 636d 203d 2072        >>> cm = r
+0000d730: 6f62 6f74 2e6c 696e 6b63 6f6c 6f72 6d61  obot.linkcolorma
+0000d740: 7028 2269 6e66 6572 6e6f 2229 0a20 2020  p("inferno").   
+0000d750: 2020 2020 203e 3e3e 2070 7269 6e74 2863       >>> print(c
+0000d760: 6d28 7261 6e67 6528 3629 2929 2023 2063  m(range(6))) # c
+0000d770: 6d28 6929 2069 7320 3372 6420 636f 6c6f  m(i) is 3rd colo
+0000d780: 7220 696e 2063 6f6c 6f72 6d61 700a 2020  r in colormap.  
+0000d790: 2020 2020 2020 3e3e 3e20 636d 203d 2072        >>> cm = r
+0000d7a0: 6f62 6f74 2e6c 696e 6b63 6f6c 6f72 6d61  obot.linkcolorma
+0000d7b0: 7028 0a20 2020 2020 2020 203e 3e3e 2020  p(.        >>>  
+0000d7c0: 2020 205b 2772 6564 272c 2027 6727 2c20     ['red', 'g', 
+0000d7d0: 2830 2c30 2e35 2c30 292c 2027 2330 6638  (0,0.5,0), '#0f8
+0000d7e0: 3034 3027 2c20 2779 656c 6c6f 7727 2c20  040', 'yellow', 
+0000d7f0: 2763 7961 6e27 5d29 0a20 2020 2020 2020  'cyan']).       
+0000d800: 203e 3e3e 2070 7269 6e74 2863 6d28 7261   >>> print(cm(ra
+0000d810: 6e67 6528 3629 2929 0a0a 2020 2020 2020  nge(6)))..      
+0000d820: 2020 4e6f 7465 730a 2020 2020 2020 2020    Notes.        
+0000d830: 2d2d 2d2d 2d0a 2020 2020 2020 2020 2d20  -----.        - 
+0000d840: 436f 6c6f 726d 6170 7320 6861 7665 2034  Colormaps have 4
+0000d850: 2d65 6c65 6d65 6e74 733a 2072 6564 2c20  -elements: red, 
+0000d860: 6772 6565 6e2c 2062 6c75 652c 2061 6c70  green, blue, alp
+0000d870: 6861 2028 5247 4241 290a 2020 2020 2020  ha (RGBA).      
+0000d880: 2020 2d20 4e61 6d65 7320 6f66 2073 7570    - Names of sup
+0000d890: 706f 7274 6564 2063 6f6c 6f72 7320 616e  ported colors an
+0000d8a0: 6420 636f 6c6f 726d 6170 7320 6172 6520  d colormaps are 
+0000d8b0: 6465 6669 6e65 6420 696e 2074 6865 0a20  defined in the. 
+0000d8c0: 2020 2020 2020 2020 206d 6174 706c 6f74           matplot
+0000d8d0: 6c69 6220 646f 6375 6d65 6e74 6174 696f  lib documentatio
+0000d8e0: 6e2e 0a20 2020 2020 2020 2020 2020 202d  n..            -
+0000d8f0: 2060 5370 6563 6966 7969 6e67 2063 6f6c   `Specifying col
+0000d900: 6f72 730a 2020 2020 2020 2020 2020 2020  ors.            
+0000d910: 3c68 7474 7073 3a2f 2f6d 6174 706c 6f74  <https://matplot
+0000d920: 6c69 622e 6f72 672f 332e 312e 302f 7475  lib.org/3.1.0/tu
+0000d930: 746f 7269 616c 732f 636f 6c6f 7273 2f63  torials/colors/c
+0000d940: 6f6c 6f72 732e 6874 6d6c 2373 7068 782d  olors.html#sphx-
+0000d950: 676c 722d 7475 746f 7269 616c 732d 636f  glr-tutorials-co
+0000d960: 6c6f 7273 2d63 6f6c 6f72 732d 7079 3e60  lors-colors-py>`
+0000d970: 5f0a 2020 2020 2020 2020 2020 2020 2d20  _.            - 
+0000d980: 6043 6f6c 6f72 6d61 7073 0a20 2020 2020  `Colormaps.     
+0000d990: 2020 2020 2020 203c 6874 7470 733a 2f2f         <https://
+0000d9a0: 6d61 7470 6c6f 746c 6962 2e6f 7267 2f33  matplotlib.org/3
+0000d9b0: 2e31 2e30 2f74 7574 6f72 6961 6c73 2f63  .1.0/tutorials/c
+0000d9c0: 6f6c 6f72 732f 636f 6c6f 726d 6170 732e  olors/colormaps.
+0000d9d0: 6874 6d6c 2373 7068 782d 676c 722d 7475  html#sphx-glr-tu
+0000d9e0: 746f 7269 616c 732d 636f 6c6f 7273 2d63  torials-colors-c
+0000d9f0: 6f6c 6f72 6d61 7073 2d70 793e 605f 0a0a  olormaps-py>`_..
+0000da00: 2020 2020 2020 2020 2222 2220 2023 206e          """  # n
+0000da10: 6f71 610a 0a20 2020 2020 2020 2069 6620  oqa..        if 
+0000da20: 6973 696e 7374 616e 6365 286c 696e 6b63  isinstance(linkc
+0000da30: 6f6c 6f72 732c 206c 6973 7429 2061 6e64  olors, list) and
+0000da40: 206c 656e 286c 696e 6b63 6f6c 6f72 7329   len(linkcolors)
+0000da50: 203d 3d20 7365 6c66 2e6e 3a20 2023 2070   == self.n:  # p
+0000da60: 7261 676d 6120 6e6f 636f 7665 720a 2020  ragma nocover.  
+0000da70: 2020 2020 2020 2020 2020 2320 7072 6f76            # prov
+0000da80: 6964 6564 2061 206c 6973 7420 6f66 2063  ided a list of c
+0000da90: 6f6c 6f72 206e 616d 6573 0a20 2020 2020  olor names.     
+0000daa0: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
+0000dab0: 6c6f 7273 2e4c 6973 7465 6443 6f6c 6f72  lors.ListedColor
+0000dac0: 6d61 7028 6c69 6e6b 636f 6c6f 7273 2920  map(linkcolors) 
+0000dad0: 2023 2074 7970 653a 2069 676e 6f72 650a   # type: ignore.
+0000dae0: 2020 2020 2020 2020 656c 7365 3a20 2023          else:  #
+0000daf0: 2070 7261 676d 6120 6e6f 636f 7665 720a   pragma nocover.
+0000db00: 2020 2020 2020 2020 2020 2020 2320 6173              # as
+0000db10: 7375 6d65 2069 7420 6973 2061 2063 6f6c  sume it is a col
+0000db20: 6f72 6d61 7020 6e61 6d65 0a20 2020 2020  ormap name.     
+0000db30: 2020 2020 2020 2072 6574 7572 6e20 636d         return cm
+0000db40: 2e67 6574 5f63 6d61 7028 6c69 6e6b 636f  .get_cmap(linkco
+0000db50: 6c6f 7273 2c20 3629 2020 2320 7479 7065  lors, 6)  # type
+0000db60: 3a20 6967 6e6f 7265 0a0a 2020 2020 6465  : ignore..    de
+0000db70: 6620 6869 6572 6172 6368 7928 7365 6c66  f hierarchy(self
+0000db80: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0000db90: 2020 2022 2222 0a20 2020 2020 2020 2050     """.        P
+0000dba0: 7265 7474 7920 7072 696e 7420 7468 6520  retty print the 
+0000dbb0: 726f 626f 7420 6c69 6e6b 2068 6965 7261  robot link hiera
+0000dbc0: 6368 790a 0a20 2020 2020 2020 2052 6574  chy..        Ret
+0000dbd0: 7572 6e73 0a20 2020 2020 2020 202d 2d2d  urns.        ---
+0000dbe0: 2d2d 2d2d 0a20 2020 2020 2020 2050 7265  ----.        Pre
+0000dbf0: 7474 7920 7072 696e 7420 6f66 2074 6865  tty print of the
+0000dc00: 2072 6f62 6f74 206d 6f64 656c 0a0a 2020   robot model..  
+0000dc10: 2020 2020 2020 4578 616d 706c 6573 0a20        Examples. 
+0000dc20: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+0000dc30: 2020 2020 2020 2020 4d61 6b65 7320 6120          Makes a 
+0000dc40: 726f 626f 7420 616e 6420 7072 696e 7473  robot and prints
+0000dc50: 2074 6865 2068 6569 7261 6368 790a 0a20   the heirachy.. 
+0000dc60: 2020 2020 2020 202e 2e20 7275 6e62 6c6f         .. runblo
+0000dc70: 636b 3a3a 2070 7963 6f6e 0a20 2020 2020  ck:: pycon.     
+0000dc80: 2020 203e 3e3e 2069 6d70 6f72 7420 726f     >>> import ro
+0000dc90: 626f 7469 6373 746f 6f6c 626f 7820 6173  boticstoolbox as
+0000dca0: 2072 7462 0a20 2020 2020 2020 203e 3e3e   rtb.        >>>
+0000dcb0: 2072 6f62 6f74 203d 2072 7462 2e6d 6f64   robot = rtb.mod
+0000dcc0: 656c 732e 5552 4446 2e50 616e 6461 2829  els.URDF.Panda()
+0000dcd0: 0a20 2020 2020 2020 203e 3e3e 2072 6f62  .        >>> rob
+0000dce0: 6f74 2e68 6965 7261 7263 6879 2829 0a0a  ot.hierarchy()..
+0000dcf0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0000dd00: 2020 2020 2064 6566 2072 6563 7572 7365       def recurse
+0000dd10: 286c 696e 6b2c 2069 6e64 656e 743d 3029  (link, indent=0)
+0000dd20: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+0000dd30: 696e 7428 2220 2220 2a20 696e 6465 6e74  int(" " * indent
+0000dd40: 202a 2032 2c20 6c69 6e6b 2e6e 616d 6529   * 2, link.name)
+0000dd50: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000dd60: 6c69 6e6b 2e63 6869 6c64 7265 6e20 6973  link.children is
+0000dd70: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000dd80: 2020 2020 2020 2020 2020 2066 6f72 2063             for c
+0000dd90: 6869 6c64 2069 6e20 6c69 6e6b 2e63 6869  hild in link.chi
+0000dda0: 6c64 7265 6e3a 0a20 2020 2020 2020 2020  ldren:.         
+0000ddb0: 2020 2020 2020 2020 2020 2072 6563 7572             recur
+0000ddc0: 7365 2863 6869 6c64 2c20 696e 6465 6e74  se(child, indent
+0000ddd0: 202b 2031 290a 0a20 2020 2020 2020 2072   + 1)..        r
+0000dde0: 6563 7572 7365 2873 656c 662e 6261 7365  ecurse(self.base
+0000ddf0: 5f6c 696e 6b29 0a0a 2020 2020 6465 6620  _link)..    def 
+0000de00: 7365 676d 656e 7473 2873 656c 6629 202d  segments(self) -
+0000de10: 3e20 4c69 7374 5b4c 6973 745b 556e 696f  > List[List[Unio
+0000de20: 6e5b 4c69 6e6b 5479 7065 2c20 4e6f 6e65  n[LinkType, None
+0000de30: 5d5d 5d3a 0a20 2020 2020 2020 2022 2222  ]]]:.        """
+0000de40: 0a20 2020 2020 2020 2053 6567 6d65 6e74  .        Segment
+0000de50: 7320 6f66 2062 7261 6e63 6865 6420 726f  s of branched ro
+0000de60: 626f 740a 0a20 2020 2020 2020 2046 6f72  bot..        For
+0000de70: 2061 2073 696e 676c 652d 6368 6169 6e20   a single-chain 
+0000de80: 726f 626f 7420 7769 7468 2073 7472 7563  robot with struc
+0000de90: 7475 7265 3a3a 0a0a 2020 2020 2020 2020  ture::..        
+0000dea0: 2020 2020 4c31 202d 204c 3220 2d20 4c33      L1 - L2 - L3
+0000deb0: 0a0a 2020 2020 2020 2020 7468 6520 7265  ..        the re
+0000dec0: 7475 726e 2069 7320 6060 5b5b 4e6f 6e65  turn is ``[[None
+0000ded0: 2c20 4c31 2c20 4c32 2c20 4c33 5d5d 6060  , L1, L2, L3]]``
+0000dee0: 0a0a 2020 2020 2020 2020 466f 7220 6120  ..        For a 
+0000def0: 726f 626f 7420 7769 7468 2073 7472 7563  robot with struc
+0000df00: 7475 7265 3a3a 0a0a 2020 2020 2020 2020  ture::..        
+0000df10: 2020 2020 4c31 202d 204c 3220 2b2d 2020      L1 - L2 +-  
+0000df20: 4c33 202d 204c 340a 2020 2020 2020 2020  L3 - L4.        
+0000df30: 2020 2020 2020 2020 2020 2020 2b2d 204c              +- L
+0000df40: 3520 2d20 4c36 0a0a 2020 2020 2020 2020  5 - L6..        
+0000df50: 7468 6520 7265 7475 726e 2069 7320 6060  the return is ``
+0000df60: 5b5b 4e6f 6e65 2c20 4c31 2c20 4c32 5d2c  [[None, L1, L2],
+0000df70: 205b 4c32 2c20 4c33 2c20 4c34 5d2c 205b   [L2, L3, L4], [
+0000df80: 4c32 2c20 4c35 2c20 4c36 5d5d 6060 0a0a  L2, L5, L6]]``..
+0000df90: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
+0000dfa0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
+0000dfb0: 2020 2020 2020 2020 7365 676d 656e 7473          segments
+0000dfc0: 0a20 2020 2020 2020 2020 2020 2053 6567  .            Seg
+0000dfd0: 6d65 6e74 206c 6973 740a 0a20 2020 2020  ment list..     
+0000dfe0: 2020 204e 6f74 6573 0a20 2020 2020 2020     Notes.       
+0000dff0: 202d 2d2d 2d2d 0a20 2020 2020 2020 202d   -----.        -
+0000e000: 2074 6865 206c 656e 6774 6820 6f66 2074   the length of t
+0000e010: 6865 206c 6973 7420 6973 2074 6865 206e  he list is the n
+0000e020: 756d 6265 7220 6f66 2073 6567 6d65 6e74  umber of segment
+0000e030: 7320 696e 2074 6865 2072 6f62 6f74 0a20  s in the robot. 
+0000e040: 2020 2020 2020 202d 2074 6865 2066 6972         - the fir
+0000e050: 7374 2073 6567 6d65 6e74 2061 6c77 6179  st segment alway
+0000e060: 7320 7374 6172 7473 2077 6974 6820 6060  s starts with ``
+0000e070: 4e6f 6e65 6060 2077 6869 6368 2072 6570  None`` which rep
+0000e080: 7265 7365 6e74 730a 2020 2020 2020 2020  resents.        
+0000e090: 2020 2020 7468 6520 6261 7365 2074 7261      the base tra
+0000e0a0: 6e73 666f 726d 2028 7369 6e63 6520 7468  nsform (since th
+0000e0b0: 6572 6520 6973 206e 6f20 6261 7365 206c  ere is no base l
+0000e0c0: 696e 6b29 0a20 2020 2020 2020 202d 2074  ink).        - t
+0000e0d0: 6865 206c 6173 7420 6c69 6e6b 206f 6620  he last link of 
+0000e0e0: 6f6e 6520 7365 676d 656e 7420 6973 2061  one segment is a
+0000e0f0: 6c73 6f20 7468 6520 6669 7273 7420 6c69  lso the first li
+0000e100: 6e6b 206f 6620 7375 6273 6571 7565 6e74  nk of subsequent
+0000e110: 0a20 2020 2020 2020 2020 2020 2073 6567  .            seg
+0000e120: 6d65 6e74 730a 2020 2020 2020 2020 2222  ments.        ""
+0000e130: 220a 0a20 2020 2020 2020 2064 6566 2072  "..        def r
+0000e140: 6563 7572 7365 286c 696e 6b3a 204c 696e  ecurse(link: Lin
+0000e150: 6b29 3a0a 2020 2020 2020 2020 2020 2020  k):.            
+0000e160: 7365 6773 203d 205b 6c69 6e6b 2e70 6172  segs = [link.par
+0000e170: 656e 745d 0a20 2020 2020 2020 2020 2020  ent].           
+0000e180: 2077 6869 6c65 2054 7275 653a 0a20 2020   while True:.   
+0000e190: 2020 2020 2020 2020 2020 2020 2073 6567               seg
+0000e1a0: 732e 6170 7065 6e64 286c 696e 6b29 0a20  s.append(link). 
+0000e1b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000e1c0: 6620 6c69 6e6b 2e6e 6368 696c 6472 656e  f link.nchildren
+0000e1d0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+0000e1e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000e1f0: 6e20 5b73 6567 735d 0a20 2020 2020 2020  n [segs].       
+0000e200: 2020 2020 2020 2020 2065 6c69 6620 6c69           elif li
+0000e210: 6e6b 2e6e 6368 696c 6472 656e 203d 3d20  nk.nchildren == 
+0000e220: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+0000e230: 2020 2020 2020 206c 696e 6b20 3d20 6c69         link = li
+0000e240: 6e6b 2e63 6869 6c64 7265 6e5b 305d 2020  nk.children[0]  
+0000e250: 2320 7479 7065 3a20 6967 6e6f 7265 0a20  # type: ignore. 
+0000e260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e270: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+0000e280: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0000e290: 206c 696e 6b2e 6e63 6869 6c64 7265 6e20   link.nchildren 
+0000e2a0: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
+0000e2b0: 2020 2020 2020 2020 2073 6567 7320 3d20           segs = 
+0000e2c0: 5b73 6567 735d 0a0a 2020 2020 2020 2020  [segs]..        
+0000e2d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0000e2e0: 6368 696c 6420 696e 206c 696e 6b2e 6368  child in link.ch
+0000e2f0: 696c 6472 656e 3a20 2023 2074 7970 653a  ildren:  # type:
+0000e300: 2069 676e 6f72 650a 2020 2020 2020 2020   ignore.        
+0000e310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e320: 7365 6773 2e65 7874 656e 6428 7265 6375  segs.extend(recu
+0000e330: 7273 6528 6368 696c 6429 290a 0a20 2020  rse(child))..   
+0000e340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e350: 2072 6574 7572 6e20 7365 6773 0a0a 2020   return segs..  
+0000e360: 2020 2020 2020 7265 7475 726e 2072 6563        return rec
+0000e370: 7572 7365 2873 656c 662e 6c69 6e6b 735b  urse(self.links[
+0000e380: 305d 2920 2023 2074 7970 653a 2069 676e  0])  # type: ign
+0000e390: 6f72 650a 0a20 2020 2023 202d 2d2d 2d2d  ore..    # -----
+0000e3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e3d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e3e0: 2023 0a20 2020 2023 2053 6365 6e65 2047   #.    # Scene G
+0000e3f0: 7261 7068 2073 6563 7469 6f6e 0a20 2020  raph section.   
+0000e400: 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   # -------------
+0000e410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e440: 2d2d 2d2d 2d2d 2d2d 2023 0a0a 2020 2020  -------- #..    
+0000e450: 6465 6620 5f75 7064 6174 655f 6c69 6e6b  def _update_link
+0000e460: 5f74 6628 7365 6c66 2c20 713a 2055 6e69  _tf(self, q: Uni
+0000e470: 6f6e 5b41 7272 6179 4c69 6b65 2c20 4e6f  on[ArrayLike, No
+0000e480: 6e65 5d20 3d20 4e6f 6e65 293a 0a20 2020  ne] = None):.   
+0000e490: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000e4a0: 2054 6869 7320 7072 6976 6174 6520 6d65   This private me
+0000e4b0: 7468 6f64 2075 7064 6174 6573 2074 6865  thod updates the
+0000e4c0: 206c 6f63 616c 2074 7261 6e73 666f 726d   local transform
+0000e4d0: 206f 6620 6561 6368 206c 696e 6b20 7769   of each link wi
+0000e4e0: 7468 696e 0a20 2020 2020 2020 2074 6869  thin.        thi
+0000e4f0: 7320 726f 626f 7420 6163 636f 7264 696e  s robot accordin
+0000e500: 6720 746f 2071 2028 6f72 2073 656c 662e  g to q (or self.
+0000e510: 7120 6966 2071 2069 7320 6e6f 6e65 290a  q if q is none).
+0000e520: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0000e530: 2020 2020 2040 6c72 755f 6361 6368 6528       @lru_cache(
+0000e540: 6d61 7873 697a 653d 3229 0a20 2020 2020  maxsize=2).     
+0000e550: 2020 2064 6566 2067 6574 5f6c 696e 6b5f     def get_link_
+0000e560: 6574 7328 293a 0a20 2020 2020 2020 2020  ets():.         
+0000e570: 2020 2072 6574 7572 6e20 5b6c 696e 6b2e     return [link.
+0000e580: 6574 732e 5f66 6b6e 6d20 666f 7220 6c69  ets._fknm for li
+0000e590: 6e6b 2069 6e20 7365 6c66 2e6c 696e 6b73  nk in self.links
+0000e5a0: 5d0a 0a20 2020 2020 2020 2040 6c72 755f  ]..        @lru_
+0000e5b0: 6361 6368 6528 6d61 7873 697a 653d 3229  cache(maxsize=2)
+0000e5c0: 0a20 2020 2020 2020 2064 6566 2067 6574  .        def get
+0000e5d0: 5f6c 696e 6b5f 7363 656e 655f 6e6f 6465  _link_scene_node
+0000e5e0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0000e5f0: 7265 7475 726e 205b 6c69 6e6b 2e5f 545f  return [link._T_
+0000e600: 7265 6665 7265 6e63 6520 666f 7220 6c69  reference for li
+0000e610: 6e6b 2069 6e20 7365 6c66 2e6c 696e 6b73  nk in self.links
+0000e620: 5d0a 0a20 2020 2020 2020 2052 6f62 6f74  ]..        Robot
+0000e630: 5f6c 696e 6b5f 5428 6765 745f 6c69 6e6b  _link_T(get_link
+0000e640: 5f65 7473 2829 2c20 6765 745f 6c69 6e6b  _ets(), get_link
+0000e650: 5f73 6365 6e65 5f6e 6f64 6528 292c 2073  _scene_node(), s
+0000e660: 656c 662e 5f71 2c20 7129 0a0a 2020 2020  elf._q, q)..    
+0000e670: 2020 2020 5b67 7269 7070 6572 2e5f 7570      [gripper._up
+0000e680: 6461 7465 5f6c 696e 6b5f 7466 2829 2066  date_link_tf() f
+0000e690: 6f72 2067 7269 7070 6572 2069 6e20 7365  or gripper in se
+0000e6a0: 6c66 2e67 7269 7070 6572 735d 0a0a 2020  lf.grippers]..  
+0000e6b0: 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    # ------------
+0000e6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e6f0: 2d2d 2d2d 2d2d 2d2d 2d20 230a 2020 2020  --------- #.    
+0000e700: 2320 2d2d 2d2d 2d2d 2d2d 2d20 5079 506c  # --------- PyPl
+0000e710: 6f74 204d 6574 686f 6473 202d 2d2d 2d2d  ot Methods -----
+0000e720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e740: 2d2d 2d2d 2d2d 2d20 230a 2020 2020 2320  ------- #.    # 
+0000e750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000e790: 2d2d 2d2d 2d20 230a 0a20 2020 2064 6566  ----- #..    def
+0000e7a0: 205f 6765 745f 6772 6170 6869 6361 6c5f   _get_graphical_
+0000e7b0: 6261 636b 656e 6428 0a20 2020 2020 2020  backend(.       
+0000e7c0: 2073 656c 662c 2062 6163 6b65 6e64 3a20   self, backend: 
+0000e7d0: 556e 696f 6e5b 4c5b 2273 7769 6674 222c  Union[L["swift",
+0000e7e0: 2022 7079 706c 6f74 222c 2022 7079 706c   "pyplot", "pypl
+0000e7f0: 6f74 3222 5d2c 204e 6f6e 655d 203d 204e  ot2"], None] = N
+0000e800: 6f6e 650a 2020 2020 2920 2d3e 2055 6e69  one.    ) -> Uni
+0000e810: 6f6e 5b53 7769 6674 2c20 5079 506c 6f74  on[Swift, PyPlot
+0000e820: 2c20 5079 506c 6f74 325d 3a0a 2020 2020  , PyPlot2]:.    
+0000e830: 2020 2020 6465 6661 756c 7420 3d20 7365      default = se
+0000e840: 6c66 2e64 6566 6175 6c74 5f62 6163 6b65  lf.default_backe
+0000e850: 6e64 0a0a 2020 2020 2020 2020 2320 6669  nd..        # fi
+0000e860: 6775 7265 206f 7574 2074 6865 2072 6967  gure out the rig
+0000e870: 6874 2064 6566 6175 6c74 0a20 2020 2020  ht default.     
+0000e880: 2020 2069 6620 6261 636b 656e 6420 6973     if backend is
+0000e890: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000e8a0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000e8b0: 2873 656c 662c 2072 7462 2e44 4852 6f62  (self, rtb.DHRob
+0000e8c0: 6f74 293a 0a20 2020 2020 2020 2020 2020  ot):.           
+0000e8d0: 2020 2020 2064 6566 6175 6c74 203d 2022       default = "
+0000e8e0: 7079 706c 6f74 220a 2020 2020 2020 2020  pyplot".        
+0000e8f0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0000e900: 6e63 6528 7365 6c66 2c20 7274 622e 526f  nce(self, rtb.Ro
+0000e910: 626f 7432 293a 0a20 2020 2020 2020 2020  bot2):.         
+0000e920: 2020 2020 2020 2064 6566 6175 6c74 203d         default =
+0000e930: 2022 7079 706c 6f74 3222 0a20 2020 2020   "pyplot2".     
+0000e940: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+0000e950: 7374 616e 6365 2873 656c 662c 2072 7462  stance(self, rtb
+0000e960: 2e52 6f62 6f74 293a 0a20 2020 2020 2020  .Robot):.       
+0000e970: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0000e980: 2e68 6173 6765 6f6d 6574 7279 3a0a 2020  .hasgeometry:.  
+0000e990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e9a0: 2020 6465 6661 756c 7420 3d20 2273 7769    default = "swi
+0000e9b0: 6674 220a 2020 2020 2020 2020 2020 2020  ft".            
+0000e9c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000e9d0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+0000e9e0: 6661 756c 7420 3d20 2270 7970 6c6f 7422  fault = "pyplot"
+0000e9f0: 0a0a 2020 2020 2020 2020 6966 2062 6163  ..        if bac
+0000ea00: 6b65 6e64 2069 7320 6e6f 7420 4e6f 6e65  kend is not None
+0000ea10: 3a0a 2020 2020 2020 2020 2020 2020 7573  :.            us
+0000ea20: 696e 675f 6261 636b 656e 6420 3d20 6261  ing_backend = ba
+0000ea30: 636b 656e 642e 6c6f 7765 7228 290a 2020  ckend.lower().  
+0000ea40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000ea50: 2020 2020 2020 2020 7573 696e 675f 6261          using_ba
+0000ea60: 636b 656e 6420 3d20 6261 636b 656e 640a  ckend = backend.
+0000ea70: 0a20 2020 2020 2020 2023 2046 696e 6420  .        # Find 
+0000ea80: 7468 6520 7269 6768 7420 6261 636b 656e  the right backen
+0000ea90: 642c 206d 6f64 756c 6573 2061 7265 2069  d, modules are i
+0000eaa0: 6d70 6f72 7465 6420 6865 7265 206f 6e20  mported here on 
+0000eab0: 616e 2061 7320 6e65 6564 730a 2020 2020  an as needs.    
+0000eac0: 2020 2020 2320 6261 7369 730a 2020 2020      # basis.    
+0000ead0: 2020 2020 6966 2075 7369 6e67 5f62 6163      if using_bac
+0000eae0: 6b65 6e64 203d 3d20 2273 7769 6674 2220  kend == "swift" 
+0000eaf0: 6f72 2064 6566 6175 6c74 203d 3d20 2273  or default == "s
+0000eb00: 7769 6674 223a 2020 2320 7072 6167 6d61  wift":  # pragma
+0000eb10: 206e 6f63 6f76 6572 0a20 2020 2020 2020   nocover.       
+0000eb20: 2020 2020 2023 2073 7769 6674 2077 6173       # swift was
+0000eb30: 2072 6571 7565 7374 6564 2c20 6973 2069   requested, is i
+0000eb40: 7420 696e 7374 616c 6c65 643f 0a20 2020  t installed?.   
+0000eb50: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0000eb60: 7374 616e 6365 2873 656c 662c 2072 7462  stance(self, rtb
+0000eb70: 2e44 4852 6f62 6f74 293a 0a20 2020 2020  .DHRobot):.     
+0000eb80: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000eb90: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
+0000eba0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+0000ebb0: 2020 2020 2020 2020 2020 2250 6c6f 7474            "Plott
+0000ebc0: 696e 6720 696e 2053 7769 6674 2069 7320  ing in Swift is 
+0000ebd0: 6e6f 7420 696d 706c 656d 656e 7465 6420  not implemented 
+0000ebe0: 666f 7220 4448 526f 626f 7473 2079 6574  for DHRobots yet
+0000ebf0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0000ec00: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0000ec10: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0000ec20: 2020 2020 2023 2079 6573 2c20 7573 6520       # yes, use 
+0000ec30: 6974 0a20 2020 2020 2020 2020 2020 2020  it.             
+0000ec40: 2020 2066 726f 6d20 726f 626f 7469 6373     from robotics
+0000ec50: 746f 6f6c 626f 782e 6261 636b 656e 6473  toolbox.backends
+0000ec60: 2e73 7769 6674 2069 6d70 6f72 7420 5377  .swift import Sw
+0000ec70: 6966 740a 0a20 2020 2020 2020 2020 2020  ift..           
+0000ec80: 2020 2020 2065 6e76 203d 2053 7769 6674       env = Swift
+0000ec90: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+0000eca0: 2020 2072 6574 7572 6e20 656e 760a 2020     return env.  
+0000ecb0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0000ecc0: 204d 6f64 756c 654e 6f74 466f 756e 6445   ModuleNotFoundE
+0000ecd0: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+0000ece0: 2020 2020 2020 6966 2075 7369 6e67 5f62        if using_b
+0000ecf0: 6163 6b65 6e64 203d 3d20 2273 7769 6674  ackend == "swift
+0000ed00: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+0000ed10: 2020 2020 2020 2070 7269 6e74 2822 5377         print("Sw
+0000ed20: 6966 7420 6973 206e 6f74 2069 6e73 7461  ift is not insta
+0000ed30: 6c6c 6564 2c20 696e 7374 616c 6c20 6974  lled, install it
+0000ed40: 2075 7369 6e67 2070 6970 206f 7220 636f   using pip or co
+0000ed50: 6e64 6122 290a 2020 2020 2020 2020 2020  nda").          
+0000ed60: 2020 2020 2020 7573 696e 675f 6261 636b        using_back
+0000ed70: 656e 6420 3d20 2270 7970 6c6f 7422 0a0a  end = "pyplot"..
+0000ed80: 2020 2020 2020 2020 6966 2075 7369 6e67          if using
+0000ed90: 5f62 6163 6b65 6e64 2069 7320 4e6f 6e65  _backend is None
+0000eda0: 3a0a 2020 2020 2020 2020 2020 2020 7573  :.            us
+0000edb0: 696e 675f 6261 636b 656e 6420 3d20 6465  ing_backend = de
+0000edc0: 6661 756c 740a 0a20 2020 2020 2020 2069  fault..        i
+0000edd0: 6620 7573 696e 675f 6261 636b 656e 6420  f using_backend 
+0000ede0: 3d3d 2022 7079 706c 6f74 223a 0a20 2020  == "pyplot":.   
+0000edf0: 2020 2020 2020 2020 2066 726f 6d20 726f           from ro
+0000ee00: 626f 7469 6373 746f 6f6c 626f 782e 6261  boticstoolbox.ba
+0000ee10: 636b 656e 6473 2e50 7950 6c6f 7420 696d  ckends.PyPlot im
+0000ee20: 706f 7274 2050 7950 6c6f 740a 0a20 2020  port PyPlot..   
+0000ee30: 2020 2020 2020 2020 2065 6e76 203d 2050           env = P
+0000ee40: 7950 6c6f 7428 290a 0a20 2020 2020 2020  yPlot()..       
+0000ee50: 2065 6c69 6620 7573 696e 675f 6261 636b   elif using_back
+0000ee60: 656e 6420 3d3d 2022 7079 706c 6f74 3222  end == "pyplot2"
+0000ee70: 3a0a 2020 2020 2020 2020 2020 2020 6672  :.            fr
+0000ee80: 6f6d 2072 6f62 6f74 6963 7374 6f6f 6c62  om roboticstoolb
+0000ee90: 6f78 2e62 6163 6b65 6e64 732e 5079 506c  ox.backends.PyPl
+0000eea0: 6f74 2069 6d70 6f72 7420 5079 506c 6f74  ot import PyPlot
+0000eeb0: 320a 0a20 2020 2020 2020 2020 2020 2065  2..            e
+0000eec0: 6e76 203d 2050 7950 6c6f 7432 2829 0a0a  nv = PyPlot2()..
+0000eed0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000eee0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000eef0: 5661 6c75 6545 7272 6f72 2822 756e 6b6e  ValueError("unkn
+0000ef00: 6f77 6e20 6261 636b 656e 6422 2c20 6261  own backend", ba
+0000ef10: 636b 656e 6429 2020 2320 7072 6167 6d61  ckend)  # pragma
+0000ef20: 206e 6f63 6f76 6572 0a0a 2020 2020 2020   nocover..      
+0000ef30: 2020 7265 7475 726e 2065 6e76 0a0a 2020    return env..  
+0000ef40: 2020 6465 6620 706c 6f74 280a 2020 2020    def plot(.    
+0000ef50: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0000ef60: 2020 713a 2041 7272 6179 4c69 6b65 2c0a    q: ArrayLike,.
+0000ef70: 2020 2020 2020 2020 6261 636b 656e 643a          backend:
+0000ef80: 2055 6e69 6f6e 5b4c 5b22 7377 6966 7422   Union[L["swift"
+0000ef90: 2c20 2270 7970 6c6f 7422 2c20 2270 7970  , "pyplot", "pyp
+0000efa0: 6c6f 7432 225d 2c20 4e6f 6e65 5d20 3d20  lot2"], None] = 
+0000efb0: 4e6f 6e65 2c0a 2020 2020 2020 2020 626c  None,.        bl
+0000efc0: 6f63 6b3a 2062 6f6f 6c20 3d20 4661 6c73  ock: bool = Fals
+0000efd0: 652c 0a20 2020 2020 2020 2064 743a 2066  e,.        dt: f
+0000efe0: 6c6f 6174 203d 2030 2e30 3530 2c0a 2020  loat = 0.050,.  
+0000eff0: 2020 2020 2020 6c69 6d69 7473 3a20 556e        limits: Un
+0000f000: 696f 6e5b 4172 7261 794c 696b 652c 204e  ion[ArrayLike, N
+0000f010: 6f6e 655d 203d 204e 6f6e 652c 0a20 2020  one] = None,.   
+0000f020: 2020 2020 2076 656c 6c69 7073 653a 2062       vellipse: b
+0000f030: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
+0000f040: 2020 2020 2066 656c 6c69 7073 653a 2062       fellipse: b
+0000f050: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
+0000f060: 2020 2020 2066 6967 3a20 556e 696f 6e5b       fig: Union[
+0000f070: 7374 722c 204e 6f6e 655d 203d 204e 6f6e  str, None] = Non
+0000f080: 652c 0a20 2020 2020 2020 206d 6f76 6965  e,.        movie
+0000f090: 3a20 556e 696f 6e5b 7374 722c 204e 6f6e  : Union[str, Non
+0000f0a0: 655d 203d 204e 6f6e 652c 0a20 2020 2020  e] = None,.     
+0000f0b0: 2020 206c 6f6f 703a 2062 6f6f 6c20 3d20     loop: bool = 
+0000f0c0: 4661 6c73 652c 0a20 2020 2020 2020 202a  False,.        *
+0000f0d0: 2a6b 7761 7267 732c 0a20 2020 2029 202d  *kwargs,.    ) -
+0000f0e0: 3e20 556e 696f 6e5b 5377 6966 742c 2050  > Union[Swift, P
+0000f0f0: 7950 6c6f 742c 2050 7950 6c6f 7432 5d3a  yPlot, PyPlot2]:
+0000f100: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000f110: 2020 2020 2047 7261 7068 6963 616c 2064       Graphical d
+0000f120: 6973 706c 6179 2061 6e64 2061 6e69 6d61  isplay and anima
+0000f130: 7469 6f6e 0a0a 2020 2020 2020 2020 6060  tion..        ``
+0000f140: 726f 626f 742e 706c 6f74 2871 2c20 2770  robot.plot(q, 'p
+0000f150: 7970 6c6f 7427 2960 6020 6469 7370 6c61  yplot')`` displa
+0000f160: 7973 2061 2067 7261 7068 6963 616c 2076  ys a graphical v
+0000f170: 6965 7720 6f66 2061 2072 6f62 6f74 0a20  iew of a robot. 
+0000f180: 2020 2020 2020 2062 6173 6564 206f 6e20         based on 
+0000f190: 7468 6520 6b69 6e65 6d61 7469 6320 6d6f  the kinematic mo
+0000f1a0: 6465 6c20 616e 6420 7468 6520 6a6f 696e  del and the join
+0000f1b0: 7420 636f 6e66 6967 7572 6174 696f 6e20  t configuration 
+0000f1c0: 6060 7160 602e 0a20 2020 2020 2020 2054  ``q``..        T
+0000f1d0: 6869 7320 6973 2061 2073 7469 636b 2066  his is a stick f
+0000f1e0: 6967 7572 6520 706f 6c79 6c69 6e65 2077  igure polyline w
+0000f1f0: 6869 6368 206a 6f69 6e73 2074 6865 206f  hich joins the o
+0000f200: 7269 6769 6e73 206f 6620 7468 650a 2020  rigins of the.  
+0000f210: 2020 2020 2020 6c69 6e6b 2063 6f6f 7264        link coord
+0000f220: 696e 6174 6520 6672 616d 6573 2e20 5468  inate frames. Th
+0000f230: 6520 706c 6f74 2077 696c 6c20 6175 746f  e plot will auto
+0000f240: 7363 616c 6520 7769 7468 2061 6e20 6173  scale with an as
+0000f250: 7065 6374 0a20 2020 2020 2020 2072 6174  pect.        rat
+0000f260: 696f 206f 6620 312e 0a0a 2020 2020 2020  io of 1...      
+0000f270: 2020 4966 2060 6071 6060 2028 6d2c 6e29    If ``q`` (m,n)
+0000f280: 2072 6570 7265 7365 6e74 696e 6720 6120   representing a 
+0000f290: 6a6f 696e 742d 7370 6163 6520 7472 616a  joint-space traj
+0000f2a0: 6563 746f 7279 2069 7420 7769 6c6c 2063  ectory it will c
+0000f2b0: 7265 6174 6520 616e 0a20 2020 2020 2020  reate an.       
+0000f2c0: 2061 6e69 6d61 7469 6f6e 2077 6974 6820   animation with 
+0000f2d0: 6120 7061 7573 6520 6f66 2060 6064 7460  a pause of ``dt`
+0000f2e0: 6020 7365 636f 6e64 7320 6265 7477 6565  ` seconds betwee
+0000f2f0: 6e20 6561 6368 2066 7261 6d65 2e0a 0a20  n each frame... 
+0000f300: 2020 2020 2020 2041 7474 7269 6275 7465         Attribute
+0000f310: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+0000f320: 2d2d 2d2d 0a20 2020 2020 2020 2071 0a20  ----.        q. 
+0000f330: 2020 2020 2020 2020 2020 2054 6865 206a             The j
+0000f340: 6f69 6e74 2063 6f6e 6669 6775 7261 7469  oint configurati
+0000f350: 6f6e 206f 6620 7468 6520 726f 626f 742e  on of the robot.
+0000f360: 0a20 2020 2020 2020 2062 6163 6b65 6e64  .        backend
+0000f370: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0000f380: 2067 7261 7068 6963 616c 2062 6163 6b65   graphical backe
+0000f390: 6e64 2074 6f20 7573 652c 2063 7572 7265  nd to use, curre
+0000f3a0: 6e74 6c79 2027 7377 6966 7427 0a20 2020  ntly 'swift'.   
+0000f3b0: 2020 2020 2020 2020 2061 6e64 2027 7079           and 'py
+0000f3c0: 706c 6f74 2720 6172 6520 696d 706c 656d  plot' are implem
+0000f3d0: 656e 7465 642e 2044 6566 6175 6c74 7320  ented. Defaults 
+0000f3e0: 746f 2027 7377 6966 7427 206f 6620 6120  to 'swift' of a 
+0000f3f0: 6060 526f 626f 7460 600a 2020 2020 2020  ``Robot``.      
+0000f400: 2020 2020 2020 616e 6420 2770 7970 6c6f        and 'pyplo
+0000f410: 7460 2066 6f72 2061 2060 6044 4852 6f62  t` for a ``DHRob
+0000f420: 6f74 6060 0a20 2020 2020 2020 2062 6c6f  ot``.        blo
+0000f430: 636b 0a20 2020 2020 2020 2020 2020 2042  ck.            B
+0000f440: 6c6f 636b 206f 7065 7261 7469 6f6e 206f  lock operation o
+0000f450: 6620 7468 6520 636f 6465 2061 6e64 206b  f the code and k
+0000f460: 6565 7020 7468 6520 6669 6775 7265 206f  eep the figure o
+0000f470: 7065 6e0a 2020 2020 2020 2020 6474 0a20  pen.        dt. 
+0000f480: 2020 2020 2020 2020 2020 2069 6620 7120             if q 
+0000f490: 6973 2061 2074 7261 6a65 6374 6f72 792c  is a trajectory,
+0000f4a0: 2074 6869 7320 6465 7363 7269 6265 7320   this describes 
+0000f4b0: 7468 6520 6465 6c61 7920 696e 0a20 2020  the delay in.   
+0000f4c0: 2020 2020 2020 2020 2073 6563 6f6e 6473           seconds
+0000f4d0: 2062 6574 7765 656e 2066 7261 6d65 730a   between frames.
+0000f4e0: 2020 2020 2020 2020 6c69 6d69 7473 0a20          limits. 
+0000f4f0: 2020 2020 2020 2020 2020 2043 7573 746f             Custo
+0000f500: 6d20 7669 6577 206c 696d 6974 7320 666f  m view limits fo
+0000f510: 7220 7468 6520 706c 6f74 2e20 4966 206e  r the plot. If n
+0000f520: 6f74 2073 7570 706c 6965 6420 7769 6c6c  ot supplied will
+0000f530: 0a20 2020 2020 2020 2020 2020 2061 7574  .            aut
+0000f540: 6f73 6361 6c65 2c20 5b78 312c 2078 322c  oscale, [x1, x2,
+0000f550: 2079 312c 2079 322c 207a 312c 207a 325d   y1, y2, z1, z2]
+0000f560: 0a20 2020 2020 2020 2020 2020 2028 7468  .            (th
+0000f570: 6973 206f 7074 696f 6e20 6973 2066 6f72  is option is for
+0000f580: 2027 7079 706c 6f74 2720 6f6e 6c79 290a   'pyplot' only).
+0000f590: 2020 2020 2020 2020 7665 6c6c 6970 7365          vellipse
+0000f5a0: 0a20 2020 2020 2020 2020 2020 2028 506c  .            (Pl
+0000f5b0: 6f74 204f 7074 696f 6e29 2050 6c6f 7420  ot Option) Plot 
+0000f5c0: 7468 6520 7665 6c6f 6369 7479 2065 6c6c  the velocity ell
+0000f5d0: 6970 7365 2061 7420 7468 650a 2020 2020  ipse at the.    
+0000f5e0: 2020 2020 2020 2020 656e 642d 6566 6665          end-effe
+0000f5f0: 6374 6f72 2028 7468 6973 206f 7074 696f  ctor (this optio
+0000f600: 6e20 6973 2066 6f72 2027 7079 706c 6f74  n is for 'pyplot
+0000f610: 2720 6f6e 6c79 290a 2020 2020 2020 2020  ' only).        
+0000f620: 6665 6c6c 6970 7365 0a20 2020 2020 2020  fellipse.       
+0000f630: 2020 2020 2028 506c 6f74 204f 7074 696f       (Plot Optio
+0000f640: 6e29 2050 6c6f 7420 7468 6520 666f 7263  n) Plot the forc
+0000f650: 6520 656c 6c69 7073 6520 6174 2074 6865  e ellipse at the
+0000f660: 0a20 2020 2020 2020 2020 2020 2065 6e64  .            end
+0000f670: 2d65 6666 6563 746f 7220 2874 6869 7320  -effector (this 
+0000f680: 6f70 7469 6f6e 2069 7320 666f 7220 2770  option is for 'p
+0000f690: 7970 6c6f 7427 206f 6e6c 7929 0a20 2020  yplot' only).   
+0000f6a0: 2020 2020 2066 6967 0a20 2020 2020 2020       fig.       
+0000f6b0: 2020 2020 2028 506c 6f74 204f 7074 696f       (Plot Optio
+0000f6c0: 6e29 2054 6865 2066 6967 7572 6520 6c61  n) The figure la
+0000f6d0: 6265 6c20 746f 2070 6c6f 7420 696e 2028  bel to plot in (
+0000f6e0: 7468 6973 206f 7074 696f 6e20 6973 2066  this option is f
+0000f6f0: 6f72 0a20 2020 2020 2020 2020 2020 2027  or.            '
+0000f700: 7079 706c 6f74 2720 6f6e 6c79 290a 2020  pyplot' only).  
+0000f710: 2020 2020 2020 6d6f 7669 650a 2020 2020        movie.    
+0000f720: 2020 2020 2020 2020 2850 6c6f 7420 4f70          (Plot Op
+0000f730: 7469 6f6e 2920 5468 6520 6669 6c65 6e61  tion) The filena
+0000f740: 6d65 2074 6f20 7361 7665 2074 6865 206d  me to save the m
+0000f750: 6f76 6965 2074 6f20 2874 6869 7320 6f70  ovie to (this op
+0000f760: 7469 6f6e 2069 7320 666f 720a 2020 2020  tion is for.    
+0000f770: 2020 2020 2020 2020 2770 7970 6c6f 7427          'pyplot'
+0000f780: 206f 6e6c 7929 0a20 2020 2020 2020 206c   only).        l
+0000f790: 6f6f 700a 2020 2020 2020 2020 2020 2020  oop.            
+0000f7a0: 2850 6c6f 7420 4f70 7469 6f6e 2920 4c6f  (Plot Option) Lo
+0000f7b0: 6f70 2074 6865 206d 6f76 6965 2028 7468  op the movie (th
+0000f7c0: 6973 206f 7074 696f 6e20 6973 2066 6f72  is option is for
+0000f7d0: 0a20 2020 2020 2020 2020 2020 2027 7079  .            'py
+0000f7e0: 706c 6f74 2720 6f6e 6c79 290a 2020 2020  plot' only).    
+0000f7f0: 2020 2020 6a6f 696e 7461 7865 730a 2020      jointaxes.  
+0000f800: 2020 2020 2020 2020 2020 2850 6c6f 7420            (Plot 
+0000f810: 4f70 7469 6f6e 2920 506c 6f74 2061 6e20  Option) Plot an 
+0000f820: 6172 726f 7720 696e 6469 6361 7469 6e67  arrow indicating
+0000f830: 2074 6865 2061 7865 7320 696e 0a20 2020   the axes in.   
+0000f840: 2020 2020 2020 2020 2077 6869 6368 2074           which t
+0000f850: 6865 206a 6f69 6e74 2072 6576 6f6c 7665  he joint revolve
+0000f860: 7320 6172 6f75 6e64 2872 6576 6f6c 7574  s around(revolut
+0000f870: 6520 6a6f 696e 7429 206f 7220 7472 616e  e joint) or tran
+0000f880: 736c 6174 6573 0a20 2020 2020 2020 2020  slates.         
+0000f890: 2020 2061 6c6f 6e67 2028 7072 6f73 6d61     along (prosma
+0000f8a0: 7469 6320 6a6f 696e 7429 2028 7468 6973  tic joint) (this
+0000f8b0: 206f 7074 696f 6e20 6973 2066 6f72 2027   option is for '
+0000f8c0: 7079 706c 6f74 2720 6f6e 6c79 290a 2020  pyplot' only).  
+0000f8d0: 2020 2020 2020 6565 6672 616d 650a 2020        eeframe.  
+0000f8e0: 2020 2020 2020 2020 2020 2850 6c6f 7420            (Plot 
+0000f8f0: 4f70 7469 6f6e 2920 506c 6f74 2074 6865  Option) Plot the
+0000f900: 2065 6e64 2d65 6666 6563 746f 7220 636f   end-effector co
+0000f910: 6f72 6469 6e61 7465 2066 7261 6d65 0a20  ordinate frame. 
+0000f920: 2020 2020 2020 2020 2020 2061 7420 7468             at th
+0000f930: 6520 6c6f 6361 7469 6f6e 206f 6620 7468  e location of th
+0000f940: 6520 656e 642d 6566 6665 6374 6f72 2e20  e end-effector. 
+0000f950: 5573 6573 2074 6872 6565 2061 7272 6f77  Uses three arrow
+0000f960: 732c 2072 6564 2c0a 2020 2020 2020 2020  s, red,.        
+0000f970: 2020 2020 6772 6565 6e20 616e 6420 626c      green and bl
+0000f980: 7565 2074 6f20 696e 6469 6361 7465 2074  ue to indicate t
+0000f990: 6865 2078 2c20 792c 2061 6e64 207a 2d61  he x, y, and z-a
+0000f9a0: 7865 732e 0a20 2020 2020 2020 2020 2020  xes..           
+0000f9b0: 2028 7468 6973 206f 7074 696f 6e20 6973   (this option is
+0000f9c0: 2066 6f72 2027 7079 706c 6f74 2720 6f6e   for 'pyplot' on
+0000f9d0: 6c79 290a 2020 2020 2020 2020 7368 6164  ly).        shad
+0000f9e0: 6f77 0a20 2020 2020 2020 2020 2020 2028  ow.            (
+0000f9f0: 506c 6f74 204f 7074 696f 6e29 2050 6c6f  Plot Option) Plo
+0000fa00: 7420 6120 7368 6164 6f77 206f 6620 7468  t a shadow of th
+0000fa10: 6520 726f 626f 7420 696e 2074 6865 2078  e robot in the x
+0000fa20: 2d79 0a20 2020 2020 2020 2020 2020 2070  -y.            p
+0000fa30: 6c61 6e65 2e20 2874 6869 7320 6f70 7469  lane. (this opti
+0000fa40: 6f6e 2069 7320 666f 7220 2770 7970 6c6f  on is for 'pyplo
+0000fa50: 7427 206f 6e6c 7929 0a20 2020 2020 2020  t' only).       
+0000fa60: 206e 616d 650a 2020 2020 2020 2020 2020   name.          
+0000fa70: 2020 2850 6c6f 7420 4f70 7469 6f6e 2920    (Plot Option) 
+0000fa80: 506c 6f74 2074 6865 206e 616d 6520 6f66  Plot the name of
+0000fa90: 2074 6865 2072 6f62 6f74 206e 6561 7220   the robot near 
+0000faa0: 6974 7320 6261 7365 0a20 2020 2020 2020  its base.       
+0000fab0: 2020 2020 2028 7468 6973 206f 7074 696f       (this optio
+0000fac0: 6e20 6973 2066 6f72 2027 7079 706c 6f74  n is for 'pyplot
+0000fad0: 2720 6f6e 6c79 290a 0a20 2020 2020 2020  ' only)..       
+0000fae0: 2052 6574 7572 6e73 0a20 2020 2020 2020   Returns.       
+0000faf0: 202d 2d2d 2d2d 2d2d 0a20 2020 2020 2020   -------.       
+0000fb00: 2065 6e76 0a20 2020 2020 2020 2020 2020   env.           
+0000fb10: 2041 2072 6566 6572 656e 6365 2074 6f20   A reference to 
+0000fb20: 7468 6520 656e 7669 726f 6e6d 656e 7420  the environment 
+0000fb30: 6f62 6a65 6374 2077 6869 6368 2063 6f6e  object which con
+0000fb40: 7472 6f6c 7320 7468 650a 2020 2020 2020  trols the.      
+0000fb50: 2020 2020 2020 6669 6775 7265 0a0a 2020        figure..  
+0000fb60: 2020 2020 2020 4e6f 7465 730a 2020 2020        Notes.    
+0000fb70: 2020 2020 2d2d 2d2d 2d0a 2020 2020 2020      -----.      
+0000fb80: 2020 2d20 4279 2064 6566 6175 6c74 2074    - By default t
+0000fb90: 6869 7320 6d65 7468 6f64 2077 696c 6c20  his method will 
+0000fba0: 626c 6f63 6b20 756e 7469 6c20 7468 6520  block until the 
+0000fbb0: 6669 6775 7265 2069 7320 6469 736d 6973  figure is dismis
+0000fbc0: 7365 642e 0a20 2020 2020 2020 2020 2020  sed..           
+0000fbd0: 2054 6f20 6176 6f69 6420 7468 6973 2073   To avoid this s
+0000fbe0: 6574 2060 6062 6c6f 636b 3d46 616c 7365  et ``block=False
+0000fbf0: 6060 2e0a 2020 2020 2020 2020 2d20 466f  ``..        - Fo
+0000fc00: 7220 5079 506c 6f74 2c20 7468 6520 706f  r PyPlot, the po
+0000fc10: 6c79 6c69 6e65 206a 6f69 6e73 2074 6865  lyline joins the
+0000fc20: 206f 7269 6769 6e73 206f 6620 7468 6520   origins of the 
+0000fc30: 6c69 6e6b 2066 7261 6d65 732c 0a20 2020  link frames,.   
+0000fc40: 2020 2020 2020 2020 2062 7574 2066 6f72           but for
+0000fc50: 2073 6f6d 6520 4465 6e61 7669 742d 4861   some Denavit-Ha
+0000fc60: 7274 656e 6265 7267 206d 6f64 656c 7320  rtenberg models 
+0000fc70: 7468 6f73 6520 6672 616d 6573 206d 6179  those frames may
+0000fc80: 206e 6f74 0a20 2020 2020 2020 2020 2020   not.           
+0000fc90: 2061 6374 7561 6c6c 7920 6265 206f 6e20   actually be on 
+0000fca0: 7468 6520 726f 626f 742c 2069 652e 2074  the robot, ie. t
+0000fcb0: 6865 206c 696e 6573 2074 6f20 6e6f 7420  he lines to not 
+0000fcc0: 6e65 6363 6573 7361 7269 6c79 0a20 2020  neccessarily.   
+0000fcd0: 2020 2020 2020 2020 2072 6570 7265 7365           represe
+0000fce0: 6e74 2074 6865 206c 696e 6b73 206f 6620  nt the links of 
+0000fcf0: 7468 6520 726f 626f 742e 0a0a 2020 2020  the robot...    
+0000fd00: 2020 2020 5365 6520 416c 736f 0a20 2020      See Also.   
+0000fd10: 2020 2020 202d 2d2d 2d2d 2d2d 2d0a 2020       --------.  
+0000fd20: 2020 2020 2020 3a66 756e 633a 6074 6561        :func:`tea
+0000fd30: 6368 600a 0a20 2020 2020 2020 2022 2222  ch`..        """
+0000fd40: 2020 2320 6e6f 7161 0a0a 2020 2020 2020    # noqa..      
+0000fd50: 2020 656e 7620 3d20 4e6f 6e65 0a0a 2020    env = None..  
+0000fd60: 2020 2020 2020 656e 7620 3d20 7365 6c66        env = self
+0000fd70: 2e5f 6765 745f 6772 6170 6869 6361 6c5f  ._get_graphical_
+0000fd80: 6261 636b 656e 6428 6261 636b 656e 6429  backend(backend)
+0000fd90: 0a0a 2020 2020 2020 2020 7120 3d20 6e70  ..        q = np
+0000fda0: 2e61 7272 6179 2867 6574 6d61 7472 6978  .array(getmatrix
+0000fdb0: 2871 2c20 284e 6f6e 652c 2073 656c 662e  (q, (None, self.
+0000fdc0: 6e29 2929 0a20 2020 2020 2020 2073 656c  n))).        sel
+0000fdd0: 662e 7120 3d20 715b 302c 203a 5d0a 0a20  f.q = q[0, :].. 
+0000fde0: 2020 2020 2020 2023 2041 6464 2074 6865         # Add the
+0000fdf0: 2073 656c 6620 746f 2074 6865 2066 6967   self to the fig
+0000fe00: 7572 6520 696e 2072 6561 646f 6e6c 7920  ure in readonly 
+0000fe10: 6d6f 6465 0a20 2020 2020 2020 2069 6620  mode.        if 
+0000fe20: 712e 7368 6170 655b 305d 203d 3d20 313a  q.shape[0] == 1:
+0000fe30: 0a20 2020 2020 2020 2020 2020 2065 6e76  .            env
+0000fe40: 2e6c 6175 6e63 6828 6e61 6d65 3d73 656c  .launch(name=sel
+0000fe50: 662e 6e61 6d65 202b 2022 2050 6c6f 7422  f.name + " Plot"
+0000fe60: 2c20 6c69 6d69 7473 3d6c 696d 6974 732c  , limits=limits,
+0000fe70: 2066 6967 3d66 6967 290a 2020 2020 2020   fig=fig).      
+0000fe80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000fe90: 2020 2020 656e 762e 6c61 756e 6368 286e      env.launch(n
+0000fea0: 616d 653d 7365 6c66 2e6e 616d 6520 2b20  ame=self.name + 
+0000feb0: 2220 5472 616a 6563 746f 7279 2050 6c6f  " Trajectory Plo
+0000fec0: 7422 2c20 6c69 6d69 7473 3d6c 696d 6974  t", limits=limit
+0000fed0: 732c 2066 6967 3d66 6967 290a 0a20 2020  s, fig=fig)..   
+0000fee0: 2020 2020 2065 6e76 2e61 6464 2873 656c       env.add(sel
+0000fef0: 662c 2072 6561 646f 6e6c 793d 5472 7565  f, readonly=True
+0000ff00: 2c20 2a2a 6b77 6172 6773 290a 0a20 2020  , **kwargs)..   
+0000ff10: 2020 2020 2069 6620 7665 6c6c 6970 7365       if vellipse
+0000ff20: 3a0a 2020 2020 2020 2020 2020 2020 7665  :.            ve
+0000ff30: 6c6c 203d 2073 656c 662e 7665 6c6c 6970  ll = self.vellip
+0000ff40: 7365 2871 5b30 5d2c 2063 656e 7472 653d  se(q[0], centre=
+0000ff50: 2265 6522 290a 2020 2020 2020 2020 2020  "ee").          
+0000ff60: 2020 656e 762e 6164 6428 7665 6c6c 290a    env.add(vell).
+0000ff70: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000ff80: 2020 2020 2020 2020 2020 7665 6c6c 203d            vell =
+0000ff90: 204e 6f6e 650a 0a20 2020 2020 2020 2069   None..        i
+0000ffa0: 6620 6665 6c6c 6970 7365 3a0a 2020 2020  f fellipse:.    
+0000ffb0: 2020 2020 2020 2020 6665 6c6c 203d 2073          fell = s
+0000ffc0: 656c 662e 6665 6c6c 6970 7365 2871 5b30  elf.fellipse(q[0
+0000ffd0: 5d2c 2063 656e 7472 653d 2265 6522 290a  ], centre="ee").
+0000ffe0: 2020 2020 2020 2020 2020 2020 656e 762e              env.
+0000fff0: 6164 6428 6665 6c6c 290a 2020 2020 2020  add(fell).      
+00010000: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00010010: 2020 2020 6665 6c6c 203d 204e 6f6e 650a      fell = None.
+00010020: 0a20 2020 2020 2020 2023 204c 6973 7420  .        # List 
+00010030: 6f66 2069 6d61 6765 7320 7361 7665 6420  of images saved 
+00010040: 6672 6f6d 2065 6163 6820 706c 6f74 0a20  from each plot. 
+00010050: 2020 2020 2020 2069 6d61 6765 7320 3d20         images = 
+00010060: 5b5d 0a0a 2020 2020 2020 2020 6966 206d  []..        if m
+00010070: 6f76 6965 2069 7320 6e6f 7420 4e6f 6e65  ovie is not None
+00010080: 3a20 2023 2070 7261 676d 613a 206e 6f63  :  # pragma: noc
+00010090: 6f76 6572 0a20 2020 2020 2020 2020 2020  over.           
+000100a0: 206c 6f6f 7020 3d20 4661 6c73 650a 0a20   loop = False.. 
+000100b0: 2020 2020 2020 2077 6869 6c65 2054 7275         while Tru
+000100c0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+000100d0: 6f72 2071 6b20 696e 2071 3a0a 2020 2020  or qk in q:.    
+000100e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000100f0: 2e71 203d 2071 6b0a 2020 2020 2020 2020  .q = qk.        
+00010100: 2020 2020 2020 2020 6966 2076 656c 6c20          if vell 
+00010110: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00010120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010130: 2076 656c 6c2e 7120 3d20 716b 0a20 2020   vell.q = qk.   
+00010140: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00010150: 6665 6c6c 2069 7320 6e6f 7420 4e6f 6e65  fell is not None
+00010160: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010170: 2020 2020 2020 6665 6c6c 2e71 203d 2071        fell.q = q
+00010180: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
+00010190: 2020 656e 762e 7374 6570 2864 7429 0a0a    env.step(dt)..
+000101a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000101b0: 6966 206d 6f76 6965 2069 7320 6e6f 7420  if movie is not 
+000101c0: 4e6f 6e65 2061 6e64 2069 7369 6e73 7461  None and isinsta
+000101d0: 6e63 6528 656e 762c 2050 7950 6c6f 7429  nce(env, PyPlot)
+000101e0: 3a20 2023 2070 7261 676d 6120 6e6f 636f  :  # pragma noco
+000101f0: 7665 720a 2020 2020 2020 2020 2020 2020  ver.            
+00010200: 2020 2020 2020 2020 696d 6167 6573 2e61          images.a
+00010210: 7070 656e 6428 656e 762e 6765 7466 7261  ppend(env.getfra
+00010220: 6d65 2829 290a 0a20 2020 2020 2020 2020  me())..         
+00010230: 2020 2069 6620 6d6f 7669 6520 6973 206e     if movie is n
+00010240: 6f74 204e 6f6e 653a 2020 2320 7072 6167  ot None:  # prag
+00010250: 6d61 206e 6f63 6f76 6572 0a20 2020 2020  ma nocover.     
+00010260: 2020 2020 2020 2020 2020 2023 2073 6176             # sav
+00010270: 6520 6974 2061 7320 616e 2061 6e69 6d61  e it as an anima
+00010280: 7465 6420 4749 460a 2020 2020 2020 2020  ted GIF.        
+00010290: 2020 2020 2020 2020 696d 6167 6573 5b30          images[0
+000102a0: 5d2e 7361 7665 280a 2020 2020 2020 2020  ].save(.        
+000102b0: 2020 2020 2020 2020 2020 2020 6d6f 7669              movi
+000102c0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+000102d0: 2020 2020 2020 2073 6176 655f 616c 6c3d         save_all=
+000102e0: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
+000102f0: 2020 2020 2020 2020 2020 6170 7065 6e64            append
+00010300: 5f69 6d61 6765 733d 696d 6167 6573 5b31  _images=images[1
+00010310: 3a5d 2c0a 2020 2020 2020 2020 2020 2020  :],.            
+00010320: 2020 2020 2020 2020 6f70 7469 6d69 7a65          optimize
+00010330: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00010340: 2020 2020 2020 2020 2020 2020 6475 7261              dura
+00010350: 7469 6f6e 3d64 742c 0a20 2020 2020 2020  tion=dt,.       
+00010360: 2020 2020 2020 2020 2020 2020 206c 6f6f               loo
+00010370: 703d 302c 0a20 2020 2020 2020 2020 2020  p=0,.           
+00010380: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00010390: 2020 2069 6620 6e6f 7420 6c6f 6f70 3a0a     if not loop:.
+000103a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000103b0: 6272 6561 6b0a 0a20 2020 2020 2020 2023  break..        #
+000103c0: 204b 6565 7020 7468 6520 706c 6f74 206f   Keep the plot o
+000103d0: 7065 6e0a 2020 2020 2020 2020 6966 2062  pen.        if b
+000103e0: 6c6f 636b 3a20 2023 2070 7261 676d 6120  lock:  # pragma 
+000103f0: 6e6f 636f 7665 720a 2020 2020 2020 2020  nocover.        
+00010400: 2020 2020 656e 762e 686f 6c64 2829 0a0a      env.hold()..
+00010410: 2020 2020 2020 2020 7265 7475 726e 2065          return e
+00010420: 6e76 0a0a 2020 2020 6465 6620 6665 6c6c  nv..    def fell
+00010430: 6970 7365 280a 2020 2020 2020 2020 7365  ipse(.        se
+00010440: 6c66 2c0a 2020 2020 2020 2020 713a 2041  lf,.        q: A
+00010450: 7272 6179 4c69 6b65 2c0a 2020 2020 2020  rrayLike,.      
+00010460: 2020 6f70 743a 204c 5b22 7472 616e 7322    opt: L["trans"
+00010470: 2c20 2272 6f74 225d 203d 2022 7472 616e  , "rot"] = "tran
+00010480: 7322 2c0a 2020 2020 2020 2020 756e 6974  s",.        unit
+00010490: 3a20 4c5b 2272 6164 222c 2022 6465 6722  : L["rad", "deg"
+000104a0: 5d20 3d20 2272 6164 222c 0a20 2020 2020  ] = "rad",.     
+000104b0: 2020 2063 656e 7472 653a 2055 6e69 6f6e     centre: Union
+000104c0: 5b4c 5b22 6565 225d 2c20 4172 7261 794c  [L["ee"], ArrayL
+000104d0: 696b 655d 203d 205b 302c 2030 2c20 305d  ike] = [0, 0, 0]
+000104e0: 2c0a 2020 2020 2920 2d3e 2045 6c6c 6970  ,.    ) -> Ellip
+000104f0: 7365 506c 6f74 3a0a 2020 2020 2020 2020  sePlot:.        
+00010500: 2222 220a 2020 2020 2020 2020 4372 6561  """.        Crea
+00010510: 7465 2061 2066 6f72 6365 2065 6c6c 6970  te a force ellip
+00010520: 736f 6964 206f 626a 6563 7420 666f 7220  soid object for 
+00010530: 706c 6f74 7469 6e67 2077 6974 6820 5079  plotting with Py
+00010540: 506c 6f74 0a0a 2020 2020 2020 2020 6060  Plot..        ``
+00010550: 726f 626f 742e 6665 6c6c 6970 7365 2871  robot.fellipse(q
+00010560: 2960 6020 6372 6561 7465 7320 6120 666f  )`` creates a fo
+00010570: 7263 6520 656c 6c69 7073 6f69 6420 666f  rce ellipsoid fo
+00010580: 7220 7468 6520 726f 626f 7420 6174 0a20  r the robot at. 
+00010590: 2020 2020 2020 2070 6f73 6520 6060 7160         pose ``q`
+000105a0: 602e 2054 6865 2065 6c6c 6970 736f 6964  `. The ellipsoid
+000105b0: 2069 7320 6365 6e74 6572 6564 2061 7420   is centered at 
+000105c0: 7468 6520 6f72 6967 696e 2e0a 0a20 2020  the origin...   
+000105d0: 2020 2020 2041 7474 7269 6275 7465 730a       Attributes.
+000105e0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+000105f0: 2d2d 0a20 2020 2020 2020 2071 0a20 2020  --.        q.   
+00010600: 2020 2020 2020 2020 2054 6865 206a 6f69           The joi
+00010610: 6e74 2063 6f6e 6669 6775 7261 7469 6f6e  nt configuration
+00010620: 206f 6620 7468 6520 726f 626f 742e 0a20   of the robot.. 
+00010630: 2020 2020 2020 206f 7074 0a20 2020 2020         opt.     
+00010640: 2020 2020 2020 2027 7472 616e 7327 206f         'trans' o
+00010650: 7220 2772 6f74 2720 7769 6c6c 2070 6c6f  r 'rot' will plo
+00010660: 7420 6569 7468 6572 2074 6865 2074 7261  t either the tra
+00010670: 6e73 6c61 7469 6f6e 616c 206f 720a 2020  nslational or.  
+00010680: 2020 2020 2020 2020 2020 726f 7461 7469            rotati
+00010690: 6f6e 616c 2066 6f72 6365 2065 6c6c 6970  onal force ellip
+000106a0: 736f 6964 0a20 2020 2020 2020 2075 6e69  soid.        uni
+000106b0: 740a 2020 2020 2020 2020 2020 2020 2772  t.            'r
+000106c0: 6164 2720 6f72 2027 6465 6727 2077 696c  ad' or 'deg' wil
+000106d0: 6c20 706c 6f74 2074 6865 2065 6c6c 6970  l plot the ellip
+000106e0: 736f 6964 2069 6e20 7261 6469 616e 7320  soid in radians 
+000106f0: 6f72 0a20 2020 2020 2020 2020 2020 2064  or.            d
+00010700: 6567 7265 6573 0a20 2020 2020 2020 2063  egrees.        c
+00010710: 656e 7472 650a 2020 2020 2020 2020 2020  entre.          
+00010720: 2020 5468 6520 6365 6e74 7265 206f 6620    The centre of 
+00010730: 7468 6520 656c 6c69 7073 6f69 642c 2065  the ellipsoid, e
+00010740: 6974 6865 7220 2765 6527 2066 6f72 2074  ither 'ee' for t
+00010750: 6865 2065 6e64 2d65 6666 6563 746f 720a  he end-effector.
+00010760: 2020 2020 2020 2020 2020 2020 6f72 2061              or a
+00010770: 2033 2d76 6563 746f 7220 5b78 2c20 792c   3-vector [x, y,
+00010780: 207a 5d20 696e 2074 6865 2077 6f72 6c64   z] in the world
+00010790: 2066 7261 6d65 0a0a 2020 2020 2020 2020   frame..        
+000107a0: 5265 7475 726e 730a 2020 2020 2020 2020  Returns.        
+000107b0: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+000107c0: 656e 760a 2020 2020 2020 2020 2020 2020  env.            
+000107d0: 416e 2045 6c6c 6970 7365 506c 6f74 206f  An EllipsePlot o
+000107e0: 626a 6563 740a 0a20 2020 2020 2020 204e  bject..        N
+000107f0: 6f74 6573 0a20 2020 2020 2020 202d 2d2d  otes.        ---
+00010800: 2d2d 0a20 2020 2020 2020 202d 2042 7920  --.        - By 
+00010810: 6465 6661 756c 7420 7468 6520 656c 6c69  default the elli
+00010820: 7073 6f69 6420 7265 6c61 7465 6420 746f  psoid related to
+00010830: 2074 7261 6e73 6c61 7469 6f6e 616c 206d   translational m
+00010840: 6f74 696f 6e20 6973 0a20 2020 2020 2020  otion is.       
+00010850: 2020 2020 2064 7261 776e 2e20 2055 7365       drawn.  Use
+00010860: 2060 606f 7074 3d27 726f 7427 6060 2074   ``opt='rot'`` t
+00010870: 6f20 6472 6177 2074 6865 2072 6f74 6174  o draw the rotat
+00010880: 696f 6e61 6c20 7665 6c6f 6369 7479 0a20  ional velocity. 
+00010890: 2020 2020 2020 2020 2020 2065 6c6c 6970             ellip
+000108a0: 736f 6964 2e0a 2020 2020 2020 2020 2d20  soid..        - 
+000108b0: 4279 2064 6566 6175 6c74 2074 6865 2065  By default the e
+000108c0: 6c6c 6970 736f 6964 2069 7320 6472 6177  llipsoid is draw
+000108d0: 6e20 6174 2074 6865 206f 7269 6769 6e2e  n at the origin.
+000108e0: 2020 5468 6520 6f70 7469 6f6e 0a20 2020    The option.   
+000108f0: 2020 2020 2020 2020 2060 6063 656e 7472           ``centr
+00010900: 6560 6020 616c 6c6f 7773 2069 7473 206f  e`` allows its o
+00010910: 7269 6769 6e20 746f 2073 6574 2074 6f20  rigin to set to 
+00010920: 7365 7420 746f 2074 6865 2073 7065 6369  set to the speci
+00010930: 6669 6564 0a20 2020 2020 2020 2020 2020  fied.           
+00010940: 2033 2d76 6563 746f 722c 206f 7220 7468   3-vector, or th
+00010950: 6520 7374 7269 6e67 2022 6565 2220 656e  e string "ee" en
+00010960: 7375 7265 7320 6974 2069 7320 6472 6177  sures it is draw
+00010970: 6e20 6174 2074 6865 0a20 2020 2020 2020  n at the.       
+00010980: 2020 2020 2065 6e64 2d65 6666 6563 746f       end-effecto
+00010990: 7220 706f 7369 7469 6f6e 2e0a 0a20 2020  r position...   
+000109a0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+000109b0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+000109c0: 7365 6c66 2c20 7274 622e 4552 6f62 6f74  self, rtb.ERobot
+000109d0: 293a 2020 2320 7072 6167 6d61 206e 6f63  ):  # pragma noc
+000109e0: 6f76 6572 0a20 2020 2020 2020 2020 2020  over.           
+000109f0: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+00010a00: 656e 7465 6445 7272 6f72 2822 4552 6f62  entedError("ERob
+00010a10: 6f74 2066 656c 6c69 7073 6520 6e6f 7420  ot fellipse not 
+00010a20: 696d 706c 656d 656e 7465 6420 7965 7422  implemented yet"
+00010a30: 290a 0a20 2020 2020 2020 2071 203d 2067  )..        q = g
+00010a40: 6574 756e 6974 2871 2c20 756e 6974 290a  etunit(q, unit).
+00010a50: 2020 2020 2020 2020 656c 6c20 3d20 456c          ell = El
+00010a60: 6c69 7073 6550 6c6f 7428 7365 6c66 2c20  lipsePlot(self, 
+00010a70: 712c 2022 6622 2c20 6f70 742c 2063 656e  q, "f", opt, cen
+00010a80: 7472 653d 6365 6e74 7265 290a 2020 2020  tre=centre).    
+00010a90: 2020 2020 7265 7475 726e 2065 6c6c 0a0a      return ell..
+00010aa0: 2020 2020 6465 6620 7665 6c6c 6970 7365      def vellipse
+00010ab0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00010ac0: 2020 2020 2020 2020 713a 2041 7272 6179          q: Array
+00010ad0: 4c69 6b65 2c0a 2020 2020 2020 2020 6f70  Like,.        op
+00010ae0: 743a 204c 5b22 7472 616e 7322 2c20 2272  t: L["trans", "r
+00010af0: 6f74 225d 203d 2022 7472 616e 7322 2c0a  ot"] = "trans",.
+00010b00: 2020 2020 2020 2020 756e 6974 3a20 4c5b          unit: L[
+00010b10: 2272 6164 222c 2022 6465 6722 5d20 3d20  "rad", "deg"] = 
+00010b20: 2272 6164 222c 0a20 2020 2020 2020 2063  "rad",.        c
+00010b30: 656e 7472 653a 2055 6e69 6f6e 5b4c 5b22  entre: Union[L["
+00010b40: 6565 225d 2c20 4172 7261 794c 696b 655d  ee"], ArrayLike]
+00010b50: 203d 205b 302c 2030 2c20 305d 2c0a 2020   = [0, 0, 0],.  
+00010b60: 2020 2020 2020 7363 616c 653a 2066 6c6f        scale: flo
+00010b70: 6174 203d 2030 2e31 2c0a 2020 2020 2920  at = 0.1,.    ) 
+00010b80: 2d3e 2045 6c6c 6970 7365 506c 6f74 3a0a  -> EllipsePlot:.
+00010b90: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00010ba0: 2020 2020 4372 6561 7465 2061 2076 656c      Create a vel
+00010bb0: 6f63 6974 7920 656c 6c69 7073 6f69 6420  ocity ellipsoid 
+00010bc0: 6f62 6a65 6374 2066 6f72 2070 6c6f 7474  object for plott
+00010bd0: 696e 6720 7769 7468 2050 7950 6c6f 740a  ing with PyPlot.
+00010be0: 0a20 2020 2020 2020 2060 6072 6f62 6f74  .        ``robot
+00010bf0: 2e76 656c 6c69 7073 6528 7129 6060 2063  .vellipse(q)`` c
+00010c00: 7265 6174 6573 2061 2066 6f72 6365 2065  reates a force e
+00010c10: 6c6c 6970 736f 6964 2066 6f72 2074 6865  llipsoid for the
+00010c20: 2072 6f62 6f74 2061 740a 2020 2020 2020   robot at.      
+00010c30: 2020 706f 7365 2060 6071 6060 2e20 5468    pose ``q``. Th
+00010c40: 6520 656c 6c69 7073 6f69 6420 6973 2063  e ellipsoid is c
+00010c50: 656e 7465 7265 6420 6174 2074 6865 206f  entered at the o
+00010c60: 7269 6769 6e2e 0a0a 2020 2020 2020 2020  rigin...        
+00010c70: 4174 7472 6962 7574 6573 0a20 2020 2020  Attributes.     
+00010c80: 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0a 2020     ----------.  
+00010c90: 2020 2020 2020 710a 2020 2020 2020 2020        q.        
+00010ca0: 2020 2020 5468 6520 6a6f 696e 7420 636f      The joint co
+00010cb0: 6e66 6967 7572 6174 696f 6e20 6f66 2074  nfiguration of t
+00010cc0: 6865 2072 6f62 6f74 2e0a 2020 2020 2020  he robot..      
+00010cd0: 2020 6f70 740a 2020 2020 2020 2020 2020    opt.          
+00010ce0: 2020 2774 7261 6e73 2720 6f72 2027 726f    'trans' or 'ro
+00010cf0: 7427 2077 696c 6c20 706c 6f74 2065 6974  t' will plot eit
+00010d00: 6865 7220 7468 6520 7472 616e 736c 6174  her the translat
+00010d10: 696f 6e61 6c20 6f72 0a20 2020 2020 2020  ional or.       
+00010d20: 2020 2020 2072 6f74 6174 696f 6e61 6c20       rotational 
+00010d30: 666f 7263 6520 656c 6c69 7073 6f69 640a  force ellipsoid.
+00010d40: 2020 2020 2020 2020 756e 6974 0a20 2020          unit.   
+00010d50: 2020 2020 2020 2020 2027 7261 6427 206f           'rad' o
+00010d60: 7220 2764 6567 2720 7769 6c6c 2070 6c6f  r 'deg' will plo
+00010d70: 7420 7468 6520 656c 6c69 7073 6f69 6420  t the ellipsoid 
+00010d80: 696e 2072 6164 6961 6e73 206f 720a 2020  in radians or.  
+00010d90: 2020 2020 2020 2020 2020 6465 6772 6565            degree
+00010da0: 730a 2020 2020 2020 2020 6365 6e74 7265  s.        centre
+00010db0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+00010dc0: 2063 656e 7472 6520 6f66 2074 6865 2065   centre of the e
+00010dd0: 6c6c 6970 736f 6964 2c20 6569 7468 6572  llipsoid, either
+00010de0: 2027 6565 2720 666f 7220 7468 6520 656e   'ee' for the en
+00010df0: 642d 6566 6665 6374 6f72 0a20 2020 2020  d-effector.     
+00010e00: 2020 2020 2020 206f 7220 6120 332d 7665         or a 3-ve
+00010e10: 6374 6f72 205b 782c 2079 2c20 7a5d 2069  ctor [x, y, z] i
+00010e20: 6e20 7468 6520 776f 726c 6420 6672 616d  n the world fram
+00010e30: 650a 2020 2020 2020 2020 7363 616c 650a  e.        scale.
+00010e40: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00010e50: 7363 616c 6520 6661 6374 6f72 2066 6f72  scale factor for
+00010e60: 2074 6865 2065 6c6c 6970 736f 6964 0a0a   the ellipsoid..
+00010e70: 2020 2020 2020 2020 5265 7475 726e 730a          Returns.
+00010e80: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
+00010e90: 2020 2020 2020 2020 656e 760a 2020 2020          env.    
+00010ea0: 2020 2020 2020 2020 416e 2045 6c6c 6970          An Ellip
+00010eb0: 7365 506c 6f74 206f 626a 6563 740a 0a20  sePlot object.. 
+00010ec0: 2020 2020 2020 204e 6f74 6573 0a20 2020         Notes.   
+00010ed0: 2020 2020 202d 2d2d 2d2d 0a20 2020 2020       -----.     
+00010ee0: 2020 202d 2042 7920 6465 6661 756c 7420     - By default 
+00010ef0: 7468 6520 656c 6c69 7073 6f69 6420 7265  the ellipsoid re
+00010f00: 6c61 7465 6420 746f 2074 7261 6e73 6c61  lated to transla
+00010f10: 7469 6f6e 616c 206d 6f74 696f 6e20 6973  tional motion is
+00010f20: 0a20 2020 2020 2020 2020 2020 2064 7261  .            dra
+00010f30: 776e 2e20 2055 7365 2060 606f 7074 3d27  wn.  Use ``opt='
+00010f40: 726f 7427 6060 2074 6f20 6472 6177 2074  rot'`` to draw t
+00010f50: 6865 2072 6f74 6174 696f 6e61 6c20 7665  he rotational ve
+00010f60: 6c6f 6369 7479 0a20 2020 2020 2020 2020  locity.         
+00010f70: 2020 2065 6c6c 6970 736f 6964 2e0a 2020     ellipsoid..  
+00010f80: 2020 2020 2020 2d20 4279 2064 6566 6175        - By defau
+00010f90: 6c74 2074 6865 2065 6c6c 6970 736f 6964  lt the ellipsoid
+00010fa0: 2069 7320 6472 6177 6e20 6174 2074 6865   is drawn at the
+00010fb0: 206f 7269 6769 6e2e 2020 5468 6520 6f70   origin.  The op
+00010fc0: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
+00010fd0: 2060 6063 656e 7472 6560 6020 616c 6c6f   ``centre`` allo
+00010fe0: 7773 2069 7473 206f 7269 6769 6e20 746f  ws its origin to
+00010ff0: 2073 6574 2074 6f20 7365 7420 746f 2074   set to set to t
+00011000: 6865 2073 7065 6369 6669 6564 0a20 2020  he specified.   
+00011010: 2020 2020 2020 2020 2033 2d76 6563 746f           3-vecto
+00011020: 722c 206f 7220 7468 6520 7374 7269 6e67  r, or the string
+00011030: 2022 6565 2220 656e 7375 7265 7320 6974   "ee" ensures it
+00011040: 2069 7320 6472 6177 6e20 6174 2074 6865   is drawn at the
+00011050: 0a20 2020 2020 2020 2020 2020 2065 6e64  .            end
+00011060: 2d65 6666 6563 746f 7220 706f 7369 7469  -effector positi
+00011070: 6f6e 2e0a 0a20 2020 2020 2020 2022 2222  on...        """
+00011080: 0a0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
+00011090: 6e73 7461 6e63 6528 7365 6c66 2c20 7274  nstance(self, rt
+000110a0: 622e 4552 6f62 6f74 293a 2020 2320 7072  b.ERobot):  # pr
+000110b0: 6167 6d61 206e 6f63 6f76 6572 0a20 2020  agma nocover.   
+000110c0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
+000110d0: 6f74 496d 706c 656d 656e 7465 6445 7272  otImplementedErr
+000110e0: 6f72 2822 4552 6f62 6f74 2076 656c 6c69  or("ERobot velli
+000110f0: 7073 6520 6e6f 7420 696d 706c 656d 656e  pse not implemen
+00011100: 7465 6420 7965 7422 290a 0a20 2020 2020  ted yet")..     
+00011110: 2020 2071 203d 2067 6574 756e 6974 2871     q = getunit(q
+00011120: 2c20 756e 6974 290a 2020 2020 2020 2020  , unit).        
+00011130: 656c 6c20 3d20 456c 6c69 7073 6550 6c6f  ell = EllipsePlo
+00011140: 7428 7365 6c66 2c20 712c 2022 7622 2c20  t(self, q, "v", 
+00011150: 6f70 742c 2063 656e 7472 653d 6365 6e74  opt, centre=cent
+00011160: 7265 2c20 7363 616c 653d 7363 616c 6529  re, scale=scale)
+00011170: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00011180: 656c 6c0a 0a20 2020 2064 6566 2070 6c6f  ell..    def plo
+00011190: 745f 656c 6c69 7073 6528 0a20 2020 2020  t_ellipse(.     
+000111a0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+000111b0: 2065 6c6c 6970 7365 3a20 456c 6c69 7073   ellipse: Ellips
+000111c0: 6550 6c6f 742c 0a20 2020 2020 2020 2062  ePlot,.        b
+000111d0: 6c6f 636b 3a20 626f 6f6c 203d 2054 7275  lock: bool = Tru
+000111e0: 652c 0a20 2020 2020 2020 206c 696d 6974  e,.        limit
+000111f0: 733a 2055 6e69 6f6e 5b41 7272 6179 4c69  s: Union[ArrayLi
+00011200: 6b65 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65  ke, None] = None
+00011210: 2c0a 2020 2020 2020 2020 6a6f 696e 7461  ,.        jointa
+00011220: 7865 733a 2062 6f6f 6c20 3d20 5472 7565  xes: bool = True
+00011230: 2c0a 2020 2020 2020 2020 6565 6672 616d  ,.        eefram
+00011240: 653a 2062 6f6f 6c20 3d20 5472 7565 2c0a  e: bool = True,.
+00011250: 2020 2020 2020 2020 7368 6164 6f77 3a20          shadow: 
+00011260: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
+00011270: 2020 2020 206e 616d 653a 2062 6f6f 6c20       name: bool 
+00011280: 3d20 5472 7565 2c0a 2020 2020 293a 0a20  = True,.    ):. 
+00011290: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000112a0: 2020 2050 6c6f 7420 7468 6520 616e 2065     Plot the an e
+000112b0: 6c6c 6970 736f 6964 0a0a 2020 2020 2020  llipsoid..      
+000112c0: 2020 6060 726f 626f 742e 706c 6f74 5f65    ``robot.plot_e
+000112d0: 6c6c 6970 7365 2865 6c6c 6970 736f 6964  llipse(ellipsoid
+000112e0: 2960 6020 6469 7370 6c61 7973 2074 6865  )`` displays the
+000112f0: 2065 6c6c 6970 736f 6964 2e0a 0a20 2020   ellipsoid...   
+00011300: 2020 2020 2041 7474 7269 6275 7465 730a       Attributes.
+00011310: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00011320: 2d2d 0a20 2020 2020 2020 2065 6c6c 6970  --.        ellip
+00011330: 7365 0a20 2020 2020 2020 2020 2020 2074  se.            t
+00011340: 6865 2065 6c6c 6970 736f 6964 2074 6f20  he ellipsoid to 
+00011350: 706c 6f74 0a20 2020 2020 2020 2062 6c6f  plot.        blo
+00011360: 636b 0a20 2020 2020 2020 2020 2020 2042  ck.            B
+00011370: 6c6f 636b 206f 7065 7261 7469 6f6e 206f  lock operation o
+00011380: 6620 7468 6520 636f 6465 2061 6e64 206b  f the code and k
+00011390: 6565 7020 7468 6520 6669 6775 7265 206f  eep the figure o
+000113a0: 7065 6e0a 2020 2020 2020 2020 6c69 6d69  pen.        limi
+000113b0: 7473 0a20 2020 2020 2020 2020 2020 2043  ts.            C
+000113c0: 7573 746f 6d20 7669 6577 206c 696d 6974  ustom view limit
+000113d0: 7320 666f 7220 7468 6520 706c 6f74 2e20  s for the plot. 
+000113e0: 4966 206e 6f74 2073 7570 706c 6965 6420  If not supplied 
+000113f0: 7769 6c6c 0a20 2020 2020 2020 2020 2020  will.           
+00011400: 2061 7574 6f73 6361 6c65 2c20 5b78 312c   autoscale, [x1,
+00011410: 2078 322c 2079 312c 2079 322c 207a 312c   x2, y1, y2, z1,
+00011420: 207a 325d 0a20 2020 2020 2020 206a 6f69   z2].        joi
+00011430: 6e74 6178 6573 0a20 2020 2020 2020 2020  ntaxes.         
+00011440: 2020 2028 506c 6f74 204f 7074 696f 6e29     (Plot Option)
+00011450: 2050 6c6f 7420 616e 2061 7272 6f77 2069   Plot an arrow i
+00011460: 6e64 6963 6174 696e 6720 7468 6520 6178  ndicating the ax
+00011470: 6573 2069 6e0a 2020 2020 2020 2020 2020  es in.          
+00011480: 2020 7768 6963 6820 7468 6520 6a6f 696e    which the join
+00011490: 7420 7265 766f 6c76 6573 2061 726f 756e  t revolves aroun
+000114a0: 6428 7265 766f 6c75 7465 206a 6f69 6e74  d(revolute joint
+000114b0: 2920 6f72 2074 7261 6e73 6c61 7465 730a  ) or translates.
+000114c0: 2020 2020 2020 2020 2020 2020 616c 6f6e              alon
+000114d0: 6720 2870 726f 736d 6174 6963 206a 6f69  g (prosmatic joi
+000114e0: 6e74 290a 2020 2020 2020 2020 6565 6672  nt).        eefr
+000114f0: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00011500: 2850 6c6f 7420 4f70 7469 6f6e 2920 506c  (Plot Option) Pl
+00011510: 6f74 2074 6865 2065 6e64 2d65 6666 6563  ot the end-effec
+00011520: 746f 7220 636f 6f72 6469 6e61 7465 2066  tor coordinate f
+00011530: 7261 6d65 0a20 2020 2020 2020 2020 2020  rame.           
+00011540: 2061 7420 7468 6520 6c6f 6361 7469 6f6e   at the location
+00011550: 206f 6620 7468 6520 656e 642d 6566 6665   of the end-effe
+00011560: 6374 6f72 2e20 5573 6573 2074 6872 6565  ctor. Uses three
+00011570: 2061 7272 6f77 732c 2072 6564 2c0a 2020   arrows, red,.  
+00011580: 2020 2020 2020 2020 2020 6772 6565 6e20            green 
+00011590: 616e 6420 626c 7565 2074 6f20 696e 6469  and blue to indi
+000115a0: 6361 7465 2074 6865 2078 2c20 792c 2061  cate the x, y, a
+000115b0: 6e64 207a 2d61 7865 732e 0a20 2020 2020  nd z-axes..     
+000115c0: 2020 2073 6861 646f 770a 2020 2020 2020     shadow.      
+000115d0: 2020 2020 2020 2850 6c6f 7420 4f70 7469        (Plot Opti
+000115e0: 6f6e 2920 506c 6f74 2061 2073 6861 646f  on) Plot a shado
+000115f0: 7720 6f66 2074 6865 2072 6f62 6f74 2069  w of the robot i
+00011600: 6e20 7468 6520 782d 790a 2020 2020 2020  n the x-y.      
+00011610: 2020 2020 2020 706c 616e 650a 2020 2020        plane.    
+00011620: 2020 2020 6e61 6d65 0a20 2020 2020 2020      name.       
+00011630: 2020 2020 2028 506c 6f74 204f 7074 696f       (Plot Optio
+00011640: 6e29 2050 6c6f 7420 7468 6520 6e61 6d65  n) Plot the name
+00011650: 206f 6620 7468 6520 726f 626f 7420 6e65   of the robot ne
+00011660: 6172 2069 7473 2062 6173 650a 0a20 2020  ar its base..   
+00011670: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+00011680: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+00011690: 2020 2020 2065 6e76 0a20 2020 2020 2020       env.       
+000116a0: 2020 2020 2041 2072 6566 6572 656e 6365       A reference
+000116b0: 2074 6f20 7468 6520 5079 506c 6f74 206f   to the PyPlot o
+000116c0: 626a 6563 7420 7768 6963 6820 636f 6e74  bject which cont
+000116d0: 726f 6c73 2074 6865 0a20 2020 2020 2020  rols the.       
+000116e0: 2020 2020 206d 6174 706c 6f74 6c69 6220       matplotlib 
+000116f0: 6669 6775 7265 0a0a 2020 2020 2020 2020  figure..        
+00011700: 2222 220a 0a20 2020 2020 2020 2069 6620  """..        if 
+00011710: 6e6f 7420 6973 696e 7374 616e 6365 2865  not isinstance(e
+00011720: 6c6c 6970 7365 2c20 456c 6c69 7073 6550  llipse, EllipseP
+00011730: 6c6f 7429 3a20 2023 2070 7261 676d 6120  lot):  # pragma 
+00011740: 6e6f 636f 7665 720a 2020 2020 2020 2020  nocover.        
+00011750: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
+00011760: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+00011770: 2020 2020 2022 656c 6c69 7073 6520 6d75       "ellipse mu
+00011780: 7374 2062 6520 6f66 2074 7970 6520 726f  st be of type ro
+00011790: 626f 7469 6373 746f 6f6c 626f 782e 6261  boticstoolbox.ba
+000117a0: 636b 656e 642e 5079 506c 6f74 2e45 6c6c  ckend.PyPlot.Ell
+000117b0: 6970 7365 506c 6f74 220a 2020 2020 2020  ipsePlot".      
+000117c0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000117d0: 2065 6e76 203d 2050 7950 6c6f 7428 290a   env = PyPlot().
+000117e0: 0a20 2020 2020 2020 2023 2041 6464 2074  .        # Add t
+000117f0: 6865 2072 6f62 6f74 2074 6f20 7468 6520  he robot to the 
+00011800: 6669 6775 7265 2069 6e20 7265 6164 6f6e  figure in readon
+00011810: 6c79 206d 6f64 650a 2020 2020 2020 2020  ly mode.        
+00011820: 656e 762e 6c61 756e 6368 2865 6c6c 6970  env.launch(ellip
+00011830: 7365 2e72 6f62 6f74 2e6e 616d 6520 2b20  se.robot.name + 
+00011840: 2220 2220 2b20 656c 6c69 7073 652e 6e61  " " + ellipse.na
+00011850: 6d65 2c20 6c69 6d69 7473 3d6c 696d 6974  me, limits=limit
+00011860: 7329 0a0a 2020 2020 2020 2020 656e 762e  s)..        env.
+00011870: 6164 6428 656c 6c69 7073 652c 206a 6f69  add(ellipse, joi
+00011880: 6e74 6178 6573 3d6a 6f69 6e74 6178 6573  ntaxes=jointaxes
+00011890: 2c20 6565 6672 616d 653d 6565 6672 616d  , eeframe=eefram
+000118a0: 652c 2073 6861 646f 773d 7368 6164 6f77  e, shadow=shadow
+000118b0: 2c20 6e61 6d65 3d6e 616d 6529 0a0a 2020  , name=name)..  
+000118c0: 2020 2020 2020 2320 4b65 6570 2074 6865        # Keep the
+000118d0: 2070 6c6f 7420 6f70 656e 0a20 2020 2020   plot open.     
+000118e0: 2020 2069 6620 626c 6f63 6b3a 2020 2320     if block:  # 
+000118f0: 7072 6167 6d61 206e 6f63 6f76 6572 0a20  pragma nocover. 
+00011900: 2020 2020 2020 2020 2020 2065 6e76 2e68             env.h
+00011910: 6f6c 6428 290a 0a20 2020 2020 2020 2072  old()..        r
+00011920: 6574 7572 6e20 656e 760a 0a20 2020 2064  eturn env..    d
+00011930: 6566 2070 6c6f 745f 6665 6c6c 6970 7365  ef plot_fellipse
+00011940: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00011950: 2020 2020 2020 2020 713a 2055 6e69 6f6e          q: Union
+00011960: 5b41 7272 6179 4c69 6b65 2c20 4e6f 6e65  [ArrayLike, None
+00011970: 5d2c 0a20 2020 2020 2020 2062 6c6f 636b  ],.        block
+00011980: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
+00011990: 2020 2020 2020 2066 656c 6c69 7073 653a         fellipse:
+000119a0: 2055 6e69 6f6e 5b45 6c6c 6970 7365 506c   Union[EllipsePl
+000119b0: 6f74 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65  ot, None] = None
+000119c0: 2c0a 2020 2020 2020 2020 6c69 6d69 7473  ,.        limits
+000119d0: 3a20 556e 696f 6e5b 4172 7261 794c 696b  : Union[ArrayLik
+000119e0: 652c 204e 6f6e 655d 203d 204e 6f6e 652c  e, None] = None,
+000119f0: 0a20 2020 2020 2020 206f 7074 3a20 4c5b  .        opt: L[
+00011a00: 2274 7261 6e73 222c 2022 726f 7422 5d20  "trans", "rot"] 
+00011a10: 3d20 2274 7261 6e73 222c 0a20 2020 2020  = "trans",.     
+00011a20: 2020 2063 656e 7472 653a 2055 6e69 6f6e     centre: Union
+00011a30: 5b4c 5b22 6565 225d 2c20 4172 7261 794c  [L["ee"], ArrayL
+00011a40: 696b 655d 203d 205b 302c 2030 2c20 305d  ike] = [0, 0, 0]
+00011a50: 2c0a 2020 2020 2020 2020 6a6f 696e 7461  ,.        jointa
+00011a60: 7865 733a 2062 6f6f 6c20 3d20 5472 7565  xes: bool = True
+00011a70: 2c0a 2020 2020 2020 2020 6565 6672 616d  ,.        eefram
+00011a80: 653a 2062 6f6f 6c20 3d20 5472 7565 2c0a  e: bool = True,.
+00011a90: 2020 2020 2020 2020 7368 6164 6f77 3a20          shadow: 
+00011aa0: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
+00011ab0: 2020 2020 206e 616d 653a 2062 6f6f 6c20       name: bool 
+00011ac0: 3d20 5472 7565 2c0a 2020 2020 2920 2d3e  = True,.    ) ->
+00011ad0: 2050 7950 6c6f 743a 0a20 2020 2020 2020   PyPlot:.       
+00011ae0: 2022 2222 0a20 2020 2020 2020 2050 6c6f   """.        Plo
+00011af0: 7420 7468 6520 666f 7263 6520 656c 6c69  t the force elli
+00011b00: 7073 6f69 6420 666f 7220 6d61 6e69 7075  psoid for manipu
+00011b10: 6c61 746f 720a 0a20 2020 2020 2020 2060  lator..        `
+00011b20: 6072 6f62 6f74 2e70 6c6f 745f 6665 6c6c  `robot.plot_fell
+00011b30: 6970 7365 2871 2960 6020 6469 7370 6c61  ipse(q)`` displa
+00011b40: 7973 2074 6865 2076 656c 6f63 6974 7920  ys the velocity 
+00011b50: 656c 6c69 7073 6f69 6420 666f 7220 7468  ellipsoid for th
+00011b60: 650a 2020 2020 2020 2020 726f 626f 7420  e.        robot 
+00011b70: 6174 2070 6f73 6520 6060 7160 602e 2054  at pose ``q``. T
+00011b80: 6865 2070 6c6f 7420 7769 6c6c 2061 7574  he plot will aut
+00011b90: 6f73 6361 6c65 2077 6974 6820 616e 2061  oscale with an a
+00011ba0: 7370 6563 7420 7261 7469 6f0a 2020 2020  spect ratio.    
+00011bb0: 2020 2020 6f66 2031 2e0a 0a20 2020 2020      of 1...     
+00011bc0: 2020 2060 6072 6f62 6f74 2e70 6c6f 745f     ``robot.plot_
+00011bd0: 6665 6c6c 6970 7365 2876 656c 6c69 7073  fellipse(vellips
+00011be0: 6529 6060 2073 7065 6369 6669 6573 2061  e)`` specifies a
+00011bf0: 2063 7573 746f 6e20 656c 6c69 7073 6520   custon ellipse 
+00011c00: 746f 2070 6c6f 742e 0a0a 2020 2020 2020  to plot...      
+00011c10: 2020 4174 7472 6962 7574 6573 0a20 2020    Attributes.   
+00011c20: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2d0a       ----------.
+00011c30: 2020 2020 2020 2020 710a 2020 2020 2020          q.      
+00011c40: 2020 2020 2020 5468 6520 6a6f 696e 7420        The joint 
+00011c50: 636f 6e66 6967 7572 6174 696f 6e20 6f66  configuration of
+00011c60: 2074 6865 2072 6f62 6f74 0a20 2020 2020   the robot.     
+00011c70: 2020 2062 6c6f 636b 0a20 2020 2020 2020     block.       
+00011c80: 2020 2020 2042 6c6f 636b 206f 7065 7261       Block opera
+00011c90: 7469 6f6e 206f 6620 7468 6520 636f 6465  tion of the code
+00011ca0: 2061 6e64 206b 6565 7020 7468 6520 6669   and keep the fi
+00011cb0: 6775 7265 206f 7065 6e0a 2020 2020 2020  gure open.      
+00011cc0: 2020 6665 6c6c 6970 7365 0a20 2020 2020    fellipse.     
+00011cd0: 2020 2020 2020 2074 6865 2076 656c 6c6f         the vello
+00011ce0: 6369 7479 2065 6c6c 6970 736f 6964 2074  city ellipsoid t
+00011cf0: 6f20 706c 6f74 0a20 2020 2020 2020 206c  o plot.        l
+00011d00: 696d 6974 730a 2020 2020 2020 2020 2020  imits.          
+00011d10: 2020 4375 7374 6f6d 2076 6965 7720 6c69    Custom view li
+00011d20: 6d69 7473 2066 6f72 2074 6865 2070 6c6f  mits for the plo
+00011d30: 742e 2049 6620 6e6f 7420 7375 7070 6c69  t. If not suppli
+00011d40: 6564 2077 696c 6c0a 2020 2020 2020 2020  ed will.        
+00011d50: 2020 2020 6175 746f 7363 616c 652c 205b      autoscale, [
+00011d60: 7831 2c20 7832 2c20 7931 2c20 7932 2c20  x1, x2, y1, y2, 
+00011d70: 7a31 2c20 7a32 5d0a 2020 2020 2020 2020  z1, z2].        
+00011d80: 6f70 740a 2020 2020 2020 2020 2020 2020  opt.            
+00011d90: 2774 7261 6e73 2720 6f72 2027 726f 7427  'trans' or 'rot'
+00011da0: 2077 696c 6c20 706c 6f74 2065 6974 6865   will plot eithe
+00011db0: 7220 7468 6520 7472 616e 736c 6174 696f  r the translatio
+00011dc0: 6e61 6c20 6f72 0a20 2020 2020 2020 2020  nal or.         
+00011dd0: 2020 2072 6f74 6174 696f 6e61 6c20 666f     rotational fo
+00011de0: 7263 6520 656c 6c69 7073 6f69 640a 2020  rce ellipsoid.  
+00011df0: 2020 2020 2020 6365 6e74 7265 0a20 2020        centre.   
+00011e00: 2020 2020 2020 2020 2054 6865 2063 6f6f           The coo
+00011e10: 7264 696e 6174 6573 2074 6f20 706c 6f74  rdinates to plot
+00011e20: 2074 6865 2066 656c 6c69 7073 6520 5b78   the fellipse [x
+00011e30: 2c20 792c 207a 5d20 6f72 2022 6565 220a  , y, z] or "ee".
+00011e40: 2020 2020 2020 2020 2020 2020 746f 2070              to p
+00011e50: 6c6f 7420 6174 2074 6865 2065 6e64 2d65  lot at the end-e
+00011e60: 6666 6563 746f 7220 6c6f 6361 7469 6f6e  ffector location
+00011e70: 0a20 2020 2020 2020 206a 6f69 6e74 6178  .        jointax
+00011e80: 6573 0a20 2020 2020 2020 2020 2020 2028  es.            (
+00011e90: 506c 6f74 204f 7074 696f 6e29 2050 6c6f  Plot Option) Plo
+00011ea0: 7420 616e 2061 7272 6f77 2069 6e64 6963  t an arrow indic
+00011eb0: 6174 696e 6720 7468 6520 6178 6573 2069  ating the axes i
+00011ec0: 6e0a 2020 2020 2020 2020 2020 2020 7768  n.            wh
+00011ed0: 6963 6820 7468 6520 6a6f 696e 7420 7265  ich the joint re
+00011ee0: 766f 6c76 6573 2061 726f 756e 6428 7265  volves around(re
+00011ef0: 766f 6c75 7465 206a 6f69 6e74 2920 6f72  volute joint) or
+00011f00: 2074 7261 6e73 6c61 7465 730a 2020 2020   translates.    
+00011f10: 2020 2020 2020 2020 616c 6f6e 6720 2870          along (p
+00011f20: 726f 736d 6174 6963 206a 6f69 6e74 290a  rosmatic joint).
+00011f30: 2020 2020 2020 2020 6565 6672 616d 650a          eeframe.
+00011f40: 2020 2020 2020 2020 2020 2020 2850 6c6f              (Plo
+00011f50: 7420 4f70 7469 6f6e 2920 506c 6f74 2074  t Option) Plot t
+00011f60: 6865 2065 6e64 2d65 6666 6563 746f 7220  he end-effector 
+00011f70: 636f 6f72 6469 6e61 7465 2066 7261 6d65  coordinate frame
+00011f80: 0a20 2020 2020 2020 2020 2020 2061 7420  .            at 
+00011f90: 7468 6520 6c6f 6361 7469 6f6e 206f 6620  the location of 
+00011fa0: 7468 6520 656e 642d 6566 6665 6374 6f72  the end-effector
+00011fb0: 2e20 5573 6573 2074 6872 6565 2061 7272  . Uses three arr
+00011fc0: 6f77 732c 2072 6564 2c0a 2020 2020 2020  ows, red,.      
+00011fd0: 2020 2020 2020 6772 6565 6e20 616e 6420        green and 
+00011fe0: 626c 7565 2074 6f20 696e 6469 6361 7465  blue to indicate
+00011ff0: 2074 6865 2078 2c20 792c 2061 6e64 207a   the x, y, and z
+00012000: 2d61 7865 732e 0a20 2020 2020 2020 2073  -axes..        s
+00012010: 6861 646f 770a 2020 2020 2020 2020 2020  hadow.          
+00012020: 2020 2850 6c6f 7420 4f70 7469 6f6e 2920    (Plot Option) 
+00012030: 506c 6f74 2061 2073 6861 646f 7720 6f66  Plot a shadow of
+00012040: 2074 6865 2072 6f62 6f74 2069 6e20 7468   the robot in th
+00012050: 6520 782d 790a 2020 2020 2020 2020 2020  e x-y.          
+00012060: 2020 706c 616e 650a 2020 2020 2020 2020    plane.        
+00012070: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
+00012080: 2028 506c 6f74 204f 7074 696f 6e29 2050   (Plot Option) P
+00012090: 6c6f 7420 7468 6520 6e61 6d65 206f 6620  lot the name of 
+000120a0: 7468 6520 726f 626f 7420 6e65 6172 2069  the robot near i
+000120b0: 7473 2062 6173 650a 0a20 2020 2020 2020  ts base..       
+000120c0: 2052 6169 7365 730a 2020 2020 2020 2020   Raises.        
+000120d0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 2056  ------.        V
+000120e0: 616c 7565 4572 726f 720a 2020 2020 2020  alueError.      
+000120f0: 2020 2020 2020 7120 6f72 2066 656c 6c69        q or felli
+00012100: 7073 6520 6d75 7374 2062 6520 7375 7070  pse must be supp
+00012110: 6c69 6564 0a0a 2020 2020 2020 2020 5265  lied..        Re
+00012120: 7475 726e 730a 2020 2020 2020 2020 2d2d  turns.        --
+00012130: 2d2d 2d2d 2d0a 2020 2020 2020 2020 656e  -----.        en
+00012140: 760a 2020 2020 2020 2020 2020 2020 4120  v.            A 
+00012150: 7265 6665 7265 6e63 6520 746f 2074 6865  reference to the
+00012160: 2050 7950 6c6f 7420 6f62 6a65 6374 2077   PyPlot object w
+00012170: 6869 6368 2063 6f6e 7472 6f6c 7320 7468  hich controls th
+00012180: 650a 2020 2020 2020 2020 2020 2020 6d61  e.            ma
+00012190: 7470 6c6f 746c 6962 2066 6967 7572 650a  tplotlib figure.
+000121a0: 0a20 2020 2020 2020 204e 6f74 6573 0a20  .        Notes. 
+000121b0: 2020 2020 2020 202d 2d2d 2d2d 0a20 2020         -----.   
+000121c0: 2020 2020 202d 2042 7920 6465 6661 756c       - By defaul
+000121d0: 7420 7468 6520 656c 6c69 7073 6f69 6420  t the ellipsoid 
+000121e0: 7265 6c61 7465 6420 746f 2074 7261 6e73  related to trans
+000121f0: 6c61 7469 6f6e 616c 206d 6f74 696f 6e20  lational motion 
+00012200: 6973 0a20 2020 2020 2020 2020 2020 2064  is.            d
+00012210: 7261 776e 2e20 2055 7365 2060 606f 7074  rawn.  Use ``opt
+00012220: 3d27 726f 7427 6060 2074 6f20 6472 6177  ='rot'`` to draw
+00012230: 2074 6865 2072 6f74 6174 696f 6e61 6c20   the rotational 
+00012240: 7665 6c6f 6369 7479 0a20 2020 2020 2020  velocity.       
+00012250: 2020 2020 2065 6c6c 6970 736f 6964 2e0a       ellipsoid..
+00012260: 2020 2020 2020 2020 2d20 4279 2064 6566          - By def
+00012270: 6175 6c74 2074 6865 2065 6c6c 6970 736f  ault the ellipso
+00012280: 6964 2069 7320 6472 6177 6e20 6174 2074  id is drawn at t
+00012290: 6865 206f 7269 6769 6e2e 2020 5468 6520  he origin.  The 
+000122a0: 6f70 7469 6f6e 0a20 2020 2020 2020 2020  option.         
+000122b0: 2020 2060 6063 656e 7472 6560 6020 616c     ``centre`` al
+000122c0: 6c6f 7773 2069 7473 206f 7269 6769 6e20  lows its origin 
+000122d0: 746f 2073 6574 2074 6f20 7365 7420 746f  to set to set to
+000122e0: 2074 6865 2073 7065 6369 6669 6564 0a20   the specified. 
+000122f0: 2020 2020 2020 2020 2020 2033 2d76 6563             3-vec
+00012300: 746f 722c 206f 7220 7468 6520 7374 7269  tor, or the stri
+00012310: 6e67 2022 6565 2220 656e 7375 7265 7320  ng "ee" ensures 
+00012320: 6974 2069 7320 6472 6177 6e20 6174 2074  it is drawn at t
+00012330: 6865 0a20 2020 2020 2020 2020 2020 2065  he.            e
+00012340: 6e64 2d65 6666 6563 746f 7220 706f 7369  nd-effector posi
+00012350: 7469 6f6e 2e0a 0a20 2020 2020 2020 2022  tion...        "
+00012360: 2222 0a0a 2020 2020 2020 2020 6966 2069  ""..        if i
+00012370: 7369 6e73 7461 6e63 6528 7365 6c66 2c20  sinstance(self, 
+00012380: 7274 622e 4552 6f62 6f74 293a 2020 2320  rtb.ERobot):  # 
+00012390: 7072 6167 6d61 206e 6f63 6f76 6572 0a20  pragma nocover. 
+000123a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000123b0: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
+000123c0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+000123d0: 2020 2020 2020 2245 6c6c 6970 7365 2050        "Ellipse P
+000123e0: 6c6f 7474 696e 6720 6f66 2045 526f 626f  lotting of ERobo
+000123f0: 7427 7320 6e6f 7420 696d 706c 656d 656e  t's not implemen
+00012400: 7465 6420 7965 7422 0a20 2020 2020 2020  ted yet".       
+00012410: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00012420: 6966 2066 656c 6c69 7073 6520 6973 204e  if fellipse is N
+00012430: 6f6e 6520 616e 6420 7120 6973 206e 6f74  one and q is not
+00012440: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00012450: 2020 2066 656c 6c69 7073 6520 3d20 7365     fellipse = se
+00012460: 6c66 2e66 656c 6c69 7073 6528 712c 206f  lf.fellipse(q, o
+00012470: 7074 3d6f 7074 2c20 6365 6e74 7265 3d63  pt=opt, centre=c
+00012480: 656e 7472 6529 0a20 2020 2020 2020 2065  entre).        e
+00012490: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000124a0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+000124b0: 7228 224d 7573 7420 7370 6563 6966 7920  r("Must specify 
+000124c0: 6569 7468 6572 2071 206f 7220 6665 6c6c  either q or fell
+000124d0: 6970 7365 2229 2020 2320 7072 6167 6d61  ipse")  # pragma
+000124e0: 3a20 6e6f 636f 7665 720a 0a20 2020 2020  : nocover..     
+000124f0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+00012500: 6c6f 745f 656c 6c69 7073 6528 0a20 2020  lot_ellipse(.   
+00012510: 2020 2020 2020 2020 2066 656c 6c69 7073           fellips
+00012520: 652c 0a20 2020 2020 2020 2020 2020 2062  e,.            b
+00012530: 6c6f 636b 3d62 6c6f 636b 2c0a 2020 2020  lock=block,.    
+00012540: 2020 2020 2020 2020 6c69 6d69 7473 3d6c          limits=l
+00012550: 696d 6974 732c 0a20 2020 2020 2020 2020  imits,.         
+00012560: 2020 206a 6f69 6e74 6178 6573 3d6a 6f69     jointaxes=joi
+00012570: 6e74 6178 6573 2c0a 2020 2020 2020 2020  ntaxes,.        
+00012580: 2020 2020 6565 6672 616d 653d 6565 6672      eeframe=eefr
+00012590: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+000125a0: 2073 6861 646f 773d 7368 6164 6f77 2c0a   shadow=shadow,.
+000125b0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+000125c0: 3d6e 616d 652c 0a20 2020 2020 2020 2029  =name,.        )
+000125d0: 0a0a 2020 2020 6465 6620 706c 6f74 5f76  ..    def plot_v
+000125e0: 656c 6c69 7073 6528 0a20 2020 2020 2020  ellipse(.       
+000125f0: 2073 656c 662c 0a20 2020 2020 2020 2071   self,.        q
+00012600: 3a20 556e 696f 6e5b 4172 7261 794c 696b  : Union[ArrayLik
+00012610: 652c 204e 6f6e 655d 2c0a 2020 2020 2020  e, None],.      
+00012620: 2020 626c 6f63 6b3a 2062 6f6f 6c20 3d20    block: bool = 
+00012630: 5472 7565 2c0a 2020 2020 2020 2020 7665  True,.        ve
+00012640: 6c6c 6970 7365 3a20 556e 696f 6e5b 456c  llipse: Union[El
+00012650: 6c69 7073 6550 6c6f 742c 204e 6f6e 655d  lipsePlot, None]
+00012660: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+00012670: 206c 696d 6974 733a 2055 6e69 6f6e 5b41   limits: Union[A
+00012680: 7272 6179 4c69 6b65 2c20 4e6f 6e65 5d20  rrayLike, None] 
+00012690: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+000126a0: 6f70 743a 204c 5b22 7472 616e 7322 2c20  opt: L["trans", 
+000126b0: 2272 6f74 225d 203d 2022 7472 616e 7322  "rot"] = "trans"
+000126c0: 2c0a 2020 2020 2020 2020 6365 6e74 7265  ,.        centre
+000126d0: 3a20 556e 696f 6e5b 4c5b 2265 6522 5d2c  : Union[L["ee"],
+000126e0: 2041 7272 6179 4c69 6b65 5d20 3d20 5b30   ArrayLike] = [0
+000126f0: 2c20 302c 2030 5d2c 0a20 2020 2020 2020  , 0, 0],.       
+00012700: 206a 6f69 6e74 6178 6573 3a20 626f 6f6c   jointaxes: bool
+00012710: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
+00012720: 2065 6566 7261 6d65 3a20 626f 6f6c 203d   eeframe: bool =
+00012730: 2054 7275 652c 0a20 2020 2020 2020 2073   True,.        s
+00012740: 6861 646f 773a 2062 6f6f 6c20 3d20 5472  hadow: bool = Tr
+00012750: 7565 2c0a 2020 2020 2020 2020 6e61 6d65  ue,.        name
+00012760: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
+00012770: 2020 2029 202d 3e20 5079 506c 6f74 3a0a     ) -> PyPlot:.
+00012780: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00012790: 2020 2020 506c 6f74 2074 6865 2076 656c      Plot the vel
+000127a0: 6f63 6974 7920 656c 6c69 7073 6f69 6420  ocity ellipsoid 
+000127b0: 666f 7220 6d61 6e69 7075 6c61 746f 720a  for manipulator.
+000127c0: 0a20 2020 2020 2020 2060 6072 6f62 6f74  .        ``robot
+000127d0: 2e70 6c6f 745f 7665 6c6c 6970 7365 2871  .plot_vellipse(q
+000127e0: 2960 6020 6469 7370 6c61 7973 2074 6865  )`` displays the
+000127f0: 2076 656c 6f63 6974 7920 656c 6c69 7073   velocity ellips
+00012800: 6f69 6420 666f 7220 7468 650a 2020 2020  oid for the.    
+00012810: 2020 2020 726f 626f 7420 6174 2070 6f73      robot at pos
+00012820: 6520 6060 7160 602e 2054 6865 2070 6c6f  e ``q``. The plo
+00012830: 7420 7769 6c6c 2061 7574 6f73 6361 6c65  t will autoscale
+00012840: 2077 6974 6820 616e 2061 7370 6563 7420   with an aspect 
+00012850: 7261 7469 6f0a 2020 2020 2020 2020 6f66  ratio.        of
+00012860: 2031 2e0a 0a20 2020 2020 2020 2060 6072   1...        ``r
+00012870: 6f62 6f74 2e70 6c6f 745f 7665 6c6c 6970  obot.plot_vellip
+00012880: 7365 2876 656c 6c69 7073 6529 6060 2073  se(vellipse)`` s
+00012890: 7065 6369 6669 6573 2061 2063 7573 746f  pecifies a custo
+000128a0: 6e20 656c 6c69 7073 6520 746f 2070 6c6f  n ellipse to plo
+000128b0: 742e 0a0a 2020 2020 2020 2020 626c 6f63  t...        bloc
+000128c0: 6b0a 2020 2020 2020 2020 2020 2020 426c  k.            Bl
+000128d0: 6f63 6b20 6f70 6572 6174 696f 6e20 6f66  ock operation of
+000128e0: 2074 6865 2063 6f64 6520 616e 6420 6b65   the code and ke
+000128f0: 6570 2074 6865 2066 6967 7572 6520 6f70  ep the figure op
+00012900: 656e 0a20 2020 2020 2020 2071 0a20 2020  en.        q.   
+00012910: 2020 2020 2020 2020 2054 6865 206a 6f69           The joi
+00012920: 6e74 2063 6f6e 6669 6775 7261 7469 6f6e  nt configuration
+00012930: 206f 6620 7468 6520 726f 626f 740a 2020   of the robot.  
+00012940: 2020 2020 2020 7665 6c6c 6970 7365 0a20        vellipse. 
+00012950: 2020 2020 2020 2020 2020 2074 6865 2076             the v
+00012960: 656c 6c6f 6369 7479 2065 6c6c 6970 736f  ellocity ellipso
+00012970: 6964 2074 6f20 706c 6f74 0a20 2020 2020  id to plot.     
+00012980: 2020 206c 696d 6974 730a 2020 2020 2020     limits.      
+00012990: 2020 2020 2020 4375 7374 6f6d 2076 6965        Custom vie
+000129a0: 7720 6c69 6d69 7473 2066 6f72 2074 6865  w limits for the
+000129b0: 2070 6c6f 742e 2049 6620 6e6f 7420 7375   plot. If not su
+000129c0: 7070 6c69 6564 2077 696c 6c0a 2020 2020  pplied will.    
+000129d0: 2020 2020 2020 2020 6175 746f 7363 616c          autoscal
+000129e0: 652c 205b 7831 2c20 7832 2c20 7931 2c20  e, [x1, x2, y1, 
+000129f0: 7932 2c20 7a31 2c20 7a32 5d0a 2020 2020  y2, z1, z2].    
+00012a00: 2020 2020 6f70 740a 2020 2020 2020 2020      opt.        
+00012a10: 2020 2020 2774 7261 6e73 2720 6f72 2027      'trans' or '
+00012a20: 726f 7427 2077 696c 6c20 706c 6f74 2065  rot' will plot e
+00012a30: 6974 6865 7220 7468 6520 7472 616e 736c  ither the transl
+00012a40: 6174 696f 6e61 6c20 6f72 0a20 2020 2020  ational or.     
+00012a50: 2020 2020 2020 2072 6f74 6174 696f 6e61         rotationa
+00012a60: 6c20 7665 6c6f 6369 7479 2065 6c6c 6970  l velocity ellip
+00012a70: 736f 6964 0a20 2020 2020 2020 2063 656e  soid.        cen
+00012a80: 7472 650a 2020 2020 2020 2020 2020 2020  tre.            
+00012a90: 5468 6520 636f 6f72 6469 6e61 7465 7320  The coordinates 
+00012aa0: 746f 2070 6c6f 7420 7468 6520 7665 6c6c  to plot the vell
+00012ab0: 6970 7365 205b 782c 2079 2c20 7a5d 206f  ipse [x, y, z] o
+00012ac0: 7220 2265 6522 0a20 2020 2020 2020 2020  r "ee".         
+00012ad0: 2020 2074 6f20 706c 6f74 2061 7420 7468     to plot at th
+00012ae0: 6520 656e 642d 6566 6665 6374 6f72 206c  e end-effector l
+00012af0: 6f63 6174 696f 6e0a 2020 2020 2020 2020  ocation.        
+00012b00: 6a6f 696e 7461 7865 730a 2020 2020 2020  jointaxes.      
+00012b10: 2020 2020 2020 2850 6c6f 7420 4f70 7469        (Plot Opti
+00012b20: 6f6e 2920 506c 6f74 2061 6e20 6172 726f  on) Plot an arro
+00012b30: 7720 696e 6469 6361 7469 6e67 2074 6865  w indicating the
+00012b40: 2061 7865 7320 696e 0a20 2020 2020 2020   axes in.       
+00012b50: 2020 2020 2077 6869 6368 2074 6865 206a       which the j
+00012b60: 6f69 6e74 2072 6576 6f6c 7665 7320 6172  oint revolves ar
+00012b70: 6f75 6e64 2872 6576 6f6c 7574 6520 6a6f  ound(revolute jo
+00012b80: 696e 7429 206f 7220 7472 616e 736c 6174  int) or translat
+00012b90: 6573 0a20 2020 2020 2020 2020 2020 2061  es.            a
+00012ba0: 6c6f 6e67 2028 7072 6f73 6d61 7469 6320  long (prosmatic 
+00012bb0: 6a6f 696e 7429 0a20 2020 2020 2020 2065  joint).        e
+00012bc0: 6566 7261 6d65 0a20 2020 2020 2020 2020  eframe.         
+00012bd0: 2020 2028 506c 6f74 204f 7074 696f 6e29     (Plot Option)
+00012be0: 2050 6c6f 7420 7468 6520 656e 642d 6566   Plot the end-ef
+00012bf0: 6665 6374 6f72 2063 6f6f 7264 696e 6174  fector coordinat
+00012c00: 6520 6672 616d 650a 2020 2020 2020 2020  e frame.        
+00012c10: 2020 2020 6174 2074 6865 206c 6f63 6174      at the locat
+00012c20: 696f 6e20 6f66 2074 6865 2065 6e64 2d65  ion of the end-e
+00012c30: 6666 6563 746f 722e 2055 7365 7320 7468  ffector. Uses th
+00012c40: 7265 6520 6172 726f 7773 2c20 7265 642c  ree arrows, red,
+00012c50: 0a20 2020 2020 2020 2020 2020 2067 7265  .            gre
+00012c60: 656e 2061 6e64 2062 6c75 6520 746f 2069  en and blue to i
+00012c70: 6e64 6963 6174 6520 7468 6520 782c 2079  ndicate the x, y
+00012c80: 2c20 616e 6420 7a2d 6178 6573 2e0a 2020  , and z-axes..  
+00012c90: 2020 2020 2020 7368 6164 6f77 0a20 2020        shadow.   
+00012ca0: 2020 2020 2020 2020 2028 506c 6f74 204f           (Plot O
+00012cb0: 7074 696f 6e29 2050 6c6f 7420 6120 7368  ption) Plot a sh
+00012cc0: 6164 6f77 206f 6620 7468 6520 726f 626f  adow of the robo
+00012cd0: 7420 696e 2074 6865 2078 2d79 0a20 2020  t in the x-y.   
+00012ce0: 2020 2020 2020 2020 2070 6c61 6e65 0a20           plane. 
+00012cf0: 2020 2020 2020 206e 616d 650a 2020 2020         name.    
+00012d00: 2020 2020 2020 2020 2850 6c6f 7420 4f70          (Plot Op
+00012d10: 7469 6f6e 2920 506c 6f74 2074 6865 206e  tion) Plot the n
+00012d20: 616d 6520 6f66 2074 6865 2072 6f62 6f74  ame of the robot
+00012d30: 206e 6561 7220 6974 7320 6261 7365 0a0a   near its base..
+00012d40: 2020 2020 2020 2020 5261 6973 6573 0a20          Raises. 
+00012d50: 2020 2020 2020 202d 2d2d 2d2d 2d0a 2020         ------.  
+00012d60: 2020 2020 2020 5661 6c75 6545 7272 6f72        ValueError
+00012d70: 0a20 2020 2020 2020 2020 2020 2071 206f  .            q o
+00012d80: 7220 6665 6c6c 6970 7365 206d 7573 7420  r fellipse must 
+00012d90: 6265 2073 7570 706c 6965 640a 0a20 2020  be supplied..   
+00012da0: 2020 2020 2052 6574 7572 6e73 0a20 2020       Returns.   
+00012db0: 2020 2020 202d 2d2d 2d2d 2d2d 0a20 2020       -------.   
+00012dc0: 2020 2020 2065 6e76 0a20 2020 2020 2020       env.       
+00012dd0: 2020 2020 2041 2072 6566 6572 656e 6365       A reference
+00012de0: 2074 6f20 7468 6520 5079 506c 6f74 206f   to the PyPlot o
+00012df0: 626a 6563 7420 7768 6963 6820 636f 6e74  bject which cont
+00012e00: 726f 6c73 2074 6865 0a20 2020 2020 2020  rols the.       
+00012e10: 2020 2020 206d 6174 706c 6f74 6c69 6220       matplotlib 
+00012e20: 6669 6775 7265 0a0a 2020 2020 2020 2020  figure..        
+00012e30: 4e6f 7465 730a 2020 2020 2020 2020 2d2d  Notes.        --
+00012e40: 2d2d 2d0a 2020 2020 2020 2020 2d20 4279  ---.        - By
+00012e50: 2064 6566 6175 6c74 2074 6865 2065 6c6c   default the ell
+00012e60: 6970 736f 6964 2072 656c 6174 6564 2074  ipsoid related t
+00012e70: 6f20 7472 616e 736c 6174 696f 6e61 6c20  o translational 
+00012e80: 6d6f 7469 6f6e 2069 730a 2020 2020 2020  motion is.      
+00012e90: 2020 2020 2020 6472 6177 6e2e 2020 5573        drawn.  Us
+00012ea0: 6520 6060 6f70 743d 2772 6f74 2760 6020  e ``opt='rot'`` 
+00012eb0: 746f 2064 7261 7720 7468 6520 726f 7461  to draw the rota
+00012ec0: 7469 6f6e 616c 2076 656c 6f63 6974 790a  tional velocity.
+00012ed0: 2020 2020 2020 2020 2020 2020 656c 6c69              elli
+00012ee0: 7073 6f69 642e 0a20 2020 2020 2020 202d  psoid..        -
+00012ef0: 2042 7920 6465 6661 756c 7420 7468 6520   By default the 
+00012f00: 656c 6c69 7073 6f69 6420 6973 2064 7261  ellipsoid is dra
+00012f10: 776e 2061 7420 7468 6520 6f72 6967 696e  wn at the origin
+00012f20: 2e20 2054 6865 206f 7074 696f 6e0a 2020  .  The option.  
+00012f30: 2020 2020 2020 2020 2020 6060 6365 6e74            ``cent
+00012f40: 7265 6060 2061 6c6c 6f77 7320 6974 7320  re`` allows its 
+00012f50: 6f72 6967 696e 2074 6f20 7365 7420 746f  origin to set to
+00012f60: 2073 6574 2074 6f20 7468 6520 7370 6563   set to the spec
+00012f70: 6966 6965 640a 2020 2020 2020 2020 2020  ified.          
+00012f80: 2020 332d 7665 6374 6f72 2c20 6f72 2074    3-vector, or t
+00012f90: 6865 2073 7472 696e 6720 2265 6522 2065  he string "ee" e
+00012fa0: 6e73 7572 6573 2069 7420 6973 2064 7261  nsures it is dra
+00012fb0: 776e 2061 7420 7468 650a 2020 2020 2020  wn at the.      
+00012fc0: 2020 2020 2020 656e 642d 6566 6665 6374        end-effect
+00012fd0: 6f72 2070 6f73 6974 696f 6e2e 0a0a 2020  or position...  
+00012fe0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
+00012ff0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00013000: 2873 656c 662c 2072 7462 2e45 526f 626f  (self, rtb.ERobo
+00013010: 7429 3a20 2023 2070 7261 676d 6120 6e6f  t):  # pragma no
+00013020: 636f 7665 720a 2020 2020 2020 2020 2020  cover.          
+00013030: 2020 7261 6973 6520 4e6f 7449 6d70 6c65    raise NotImple
+00013040: 6d65 6e74 6564 4572 726f 7228 0a20 2020  mentedError(.   
+00013050: 2020 2020 2020 2020 2020 2020 2022 456c               "El
+00013060: 6c69 7073 6520 506c 6f74 7469 6e67 206f  lipse Plotting o
+00013070: 6620 4552 6f62 6f74 2773 206e 6f74 2069  f ERobot's not i
+00013080: 6d70 6c65 6d65 6e74 6564 2079 6574 220a  mplemented yet".
+00013090: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+000130a0: 2020 2020 2020 2069 6620 7665 6c6c 6970         if vellip
+000130b0: 7365 2069 7320 4e6f 6e65 2061 6e64 2071  se is None and q
+000130c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000130d0: 2020 2020 2020 2020 2020 7665 6c6c 6970            vellip
+000130e0: 7365 203d 2073 656c 662e 7665 6c6c 6970  se = self.vellip
+000130f0: 7365 2871 3d71 2c20 6f70 743d 6f70 742c  se(q=q, opt=opt,
+00013100: 2063 656e 7472 653d 6365 6e74 7265 290a   centre=centre).
+00013110: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00013120: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00013130: 5661 6c75 6545 7272 6f72 2822 4d75 7374  ValueError("Must
+00013140: 2073 7065 6369 6679 2065 6974 6865 7220   specify either 
+00013150: 7120 6f72 2066 656c 6c69 7073 6522 2920  q or fellipse") 
+00013160: 2023 2070 7261 676d 613a 206e 6f63 6f76   # pragma: nocov
+00013170: 6572 0a0a 2020 2020 2020 2020 7265 7475  er..        retu
+00013180: 726e 2073 656c 662e 706c 6f74 5f65 6c6c  rn self.plot_ell
+00013190: 6970 7365 280a 2020 2020 2020 2020 2020  ipse(.          
+000131a0: 2020 7665 6c6c 6970 7365 2c0a 2020 2020    vellipse,.    
+000131b0: 2020 2020 2020 2020 626c 6f63 6b3d 626c          block=bl
+000131c0: 6f63 6b2c 0a20 2020 2020 2020 2020 2020  ock,.           
+000131d0: 206c 696d 6974 733d 6c69 6d69 7473 2c0a   limits=limits,.
+000131e0: 2020 2020 2020 2020 2020 2020 6a6f 696e              join
+000131f0: 7461 7865 733d 6a6f 696e 7461 7865 732c  taxes=jointaxes,
+00013200: 0a20 2020 2020 2020 2020 2020 2065 6566  .            eef
+00013210: 7261 6d65 3d65 6566 7261 6d65 2c0a 2020  rame=eeframe,.  
+00013220: 2020 2020 2020 2020 2020 7368 6164 6f77            shadow
+00013230: 3d73 6861 646f 772c 0a20 2020 2020 2020  =shadow,.       
+00013240: 2020 2020 206e 616d 653d 6e61 6d65 2c0a       name=name,.
+00013250: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
+00013260: 6566 2074 6561 6368 280a 2020 2020 2020  ef teach(.      
+00013270: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+00013280: 713a 2055 6e69 6f6e 5b41 7272 6179 4c69  q: Union[ArrayLi
+00013290: 6b65 2c20 4e6f 6e65 5d2c 0a20 2020 2020  ke, None],.     
+000132a0: 2020 2062 6c6f 636b 3a20 626f 6f6c 203d     block: bool =
+000132b0: 2054 7275 652c 0a20 2020 2020 2020 206c   True,.        l
+000132c0: 696d 6974 733a 2055 6e69 6f6e 5b41 7272  imits: Union[Arr
+000132d0: 6179 4c69 6b65 2c20 4e6f 6e65 5d20 3d20  ayLike, None] = 
+000132e0: 4e6f 6e65 2c0a 2020 2020 2020 2020 7665  None,.        ve
+000132f0: 6c6c 6970 7365 3a20 626f 6f6c 203d 2046  llipse: bool = F
+00013300: 616c 7365 2c0a 2020 2020 2020 2020 6665  alse,.        fe
+00013310: 6c6c 6970 7365 3a20 626f 6f6c 203d 2046  llipse: bool = F
+00013320: 616c 7365 2c0a 2020 2020 2020 2020 6261  alse,.        ba
+00013330: 636b 656e 643a 2055 6e69 6f6e 5b4c 5b22  ckend: Union[L["
+00013340: 7079 706c 6f74 222c 2022 7079 706c 6f74  pyplot", "pyplot
+00013350: 3222 5d2c 204e 6f6e 655d 203d 204e 6f6e  2"], None] = Non
+00013360: 652c 0a20 2020 2029 202d 3e20 556e 696f  e,.    ) -> Unio
+00013370: 6e5b 5079 506c 6f74 2c20 5079 506c 6f74  n[PyPlot, PyPlot
+00013380: 325d 3a0a 2020 2020 2020 2020 2222 220a  2]:.        """.
+00013390: 2020 2020 2020 2020 4772 6170 6869 6361          Graphica
+000133a0: 6c20 7465 6163 6820 7065 6e64 616e 740a  l teach pendant.
+000133b0: 0a20 2020 2020 2020 2060 6072 6f62 6f74  .        ``robot
+000133c0: 2e74 6561 6368 2871 2960 6020 6372 6561  .teach(q)`` crea
+000133d0: 7465 7320 6120 6d61 7470 6c6f 746c 6962  tes a matplotlib
+000133e0: 2070 6c6f 7420 7768 6963 6820 616c 6c6f   plot which allo
+000133f0: 7773 2074 6865 2075 7365 7220 746f 0a20  ws the user to. 
+00013400: 2020 2020 2020 2022 6472 6976 6522 2061         "drive" a
+00013410: 2067 7261 7068 6963 616c 2072 6f62 6f74   graphical robot
+00013420: 2075 7369 6e67 2061 2067 7261 7068 6963   using a graphic
+00013430: 616c 2073 6c69 6465 7220 7061 6e65 6c2e  al slider panel.
+00013440: 2054 6865 2072 6f62 6f74 2773 0a20 2020   The robot's.   
+00013450: 2020 2020 2069 6e69 7461 6c20 6a6f 696e       inital join
+00013460: 7420 636f 6e66 6967 7572 6174 696f 6e20  t configuration 
+00013470: 6973 2060 6071 6060 2e20 5468 6520 706c  is ``q``. The pl
+00013480: 6f74 2077 696c 6c20 6175 746f 7363 616c  ot will autoscal
+00013490: 6520 7769 7468 2061 6e0a 2020 2020 2020  e with an.      
+000134a0: 2020 6173 7065 6374 2072 6174 696f 206f    aspect ratio o
+000134b0: 6620 312e 0a0a 2020 2020 2020 2020 6060  f 1...        ``
+000134c0: 726f 626f 742e 7465 6163 6828 2960 6020  robot.teach()`` 
+000134d0: 6173 2061 626f 7665 2065 7863 6570 7420  as above except 
+000134e0: 7468 6520 726f 626f 7427 7320 7374 6f72  the robot's stor
+000134f0: 6564 2076 616c 7565 206f 6620 6060 7160  ed value of ``q`
+00013500: 600a 2020 2020 2020 2020 6973 2075 7365  `.        is use
+00013510: 642e 0a0a 2020 2020 2020 2020 710a 2020  d...        q.  
+00013520: 2020 2020 2020 2020 2020 5468 6520 6a6f            The jo
+00013530: 696e 7420 636f 6e66 6967 7572 6174 696f  int configuratio
+00013540: 6e20 6f66 2074 6865 2072 6f62 6f74 2028  n of the robot (
+00013550: 4f70 7469 6f6e 616c 2c0a 2020 2020 2020  Optional,.      
+00013560: 2020 2020 2020 6966 206e 6f74 2073 7570        if not sup
+00013570: 706c 6965 6420 7769 6c6c 2075 7365 2074  plied will use t
+00013580: 6865 2073 746f 7265 6420 7120 7661 6c75  he stored q valu
+00013590: 6573 292e 0a20 2020 2020 2020 2062 6c6f  es)..        blo
+000135a0: 636b 0a20 2020 2020 2020 2020 2020 2042  ck.            B
+000135b0: 6c6f 636b 206f 7065 7261 7469 6f6e 206f  lock operation o
+000135c0: 6620 7468 6520 636f 6465 2061 6e64 206b  f the code and k
+000135d0: 6565 7020 7468 6520 6669 6775 7265 206f  eep the figure o
+000135e0: 7065 6e0a 2020 2020 2020 2020 6c69 6d69  pen.        limi
+000135f0: 7473 0a20 2020 2020 2020 2020 2020 2043  ts.            C
+00013600: 7573 746f 6d20 7669 6577 206c 696d 6974  ustom view limit
+00013610: 7320 666f 7220 7468 6520 706c 6f74 2e20  s for the plot. 
+00013620: 4966 206e 6f74 2073 7570 706c 6965 6420  If not supplied 
+00013630: 7769 6c6c 0a20 2020 2020 2020 2020 2020  will.           
+00013640: 2061 7574 6f73 6361 6c65 2c20 5b78 312c   autoscale, [x1,
+00013650: 2078 322c 2079 312c 2079 322c 207a 312c   x2, y1, y2, z1,
+00013660: 207a 325d 0a20 2020 2020 2020 2076 656c   z2].        vel
+00013670: 6c69 7073 650a 2020 2020 2020 2020 2020  lipse.          
+00013680: 2020 2850 6c6f 7420 4f70 7469 6f6e 2920    (Plot Option) 
+00013690: 506c 6f74 2074 6865 2076 656c 6f63 6974  Plot the velocit
+000136a0: 7920 656c 6c69 7073 6520 6174 2074 6865  y ellipse at the
+000136b0: 0a20 2020 2020 2020 2020 2020 2065 6e64  .            end
+000136c0: 2d65 6666 6563 746f 7220 2874 6869 7320  -effector (this 
+000136d0: 6f70 7469 6f6e 2069 7320 666f 7220 2770  option is for 'p
+000136e0: 7970 6c6f 7427 206f 6e6c 7929 0a20 2020  yplot' only).   
+000136f0: 2020 2020 2066 656c 6c69 7073 650a 2020       fellipse.  
+00013700: 2020 2020 2020 2020 2020 2850 6c6f 7420            (Plot 
+00013710: 4f70 7469 6f6e 2920 506c 6f74 2074 6865  Option) Plot the
+00013720: 2066 6f72 6365 2065 6c6c 6970 7365 2061   force ellipse a
+00013730: 7420 7468 650a 2020 2020 2020 2020 2020  t the.          
+00013740: 2020 656e 642d 6566 6665 6374 6f72 2028    end-effector (
+00013750: 7468 6973 206f 7074 696f 6e20 6973 2066  this option is f
+00013760: 6f72 2027 7079 706c 6f74 2720 6f6e 6c79  or 'pyplot' only
+00013770: 290a 0a20 2020 2020 2020 2052 6574 7572  )..        Retur
+00013780: 6e73 0a20 2020 2020 2020 202d 2d2d 2d2d  ns.        -----
+00013790: 2d2d 0a20 2020 2020 2020 2065 6e76 0a20  --.        env. 
+000137a0: 2020 2020 2020 2020 2020 2041 2072 6566             A ref
+000137b0: 6572 656e 6365 2074 6f20 7468 6520 5079  erence to the Py
+000137c0: 506c 6f74 206f 626a 6563 7420 7768 6963  Plot object whic
+000137d0: 6820 636f 6e74 726f 6c73 2074 6865 0a20  h controls the. 
+000137e0: 2020 2020 2020 2020 2020 206d 6174 706c             matpl
+000137f0: 6f74 6c69 6220 6669 6775 7265 0a0a 2020  otlib figure..  
+00013800: 2020 2020 2020 4e6f 7465 730a 2020 2020        Notes.    
+00013810: 2020 2020 2d2d 2d2d 2d0a 2020 2020 2020      -----.      
+00013820: 2020 2d20 5072 6f67 7261 6d20 6578 6563    - Program exec
+00013830: 7574 696f 6e20 6973 2062 6c6f 636b 6564  ution is blocked
+00013840: 2075 6e74 696c 2074 6865 2074 6561 6368   until the teach
+00013850: 2077 696e 646f 7720 6973 0a20 2020 2020   window is.     
+00013860: 2020 2020 2020 2064 6973 6d69 7373 6564         dismissed
+00013870: 2e20 2049 6620 6060 626c 6f63 6b3d 4661  .  If ``block=Fa
+00013880: 6c73 6560 6020 7468 6520 6d65 7468 6f64  lse`` the method
+00013890: 2069 7320 6e6f 6e2d 626c 6f63 6b69 6e67   is non-blocking
+000138a0: 2062 7574 0a20 2020 2020 2020 2020 2020   but.           
+000138b0: 2079 6f75 206e 6565 6420 746f 2070 6f6c   you need to pol
+000138c0: 6c20 7468 6520 7769 6e64 6f77 206d 616e  l the window man
+000138d0: 6167 6572 2074 6f20 656e 7375 7265 2074  ager to ensure t
+000138e0: 6861 7420 7468 6520 7769 6e64 6f77 0a20  hat the window. 
+000138f0: 2020 2020 2020 2020 2020 2072 656d 6169             remai
+00013900: 6e73 2072 6573 706f 6e73 6976 652e 0a20  ns responsive.. 
+00013910: 2020 2020 2020 202d 2054 6865 2073 6c69         - The sli
+00013920: 6465 7220 6c69 6d69 7473 2061 7265 2064  der limits are d
+00013930: 6572 6976 6564 2066 726f 6d20 7468 6520  erived from the 
+00013940: 6a6f 696e 7420 6c69 6d69 7420 7072 6f70  joint limit prop
+00013950: 6572 7469 6573 2e0a 2020 2020 2020 2020  erties..        
+00013960: 2020 2020 4966 206e 6f74 2073 6574 2074      If not set t
+00013970: 6865 6e3a 0a20 2020 2020 2020 2020 2020  hen:.           
+00013980: 202d 2046 6f72 2072 6576 6f6c 7574 6520   - For revolute 
+00013990: 6a6f 696e 7473 2074 6865 7920 6172 6520  joints they are 
+000139a0: 6173 7375 6d65 6420 746f 2062 6520 5b2d  assumed to be [-
+000139b0: 7069 2c20 2b70 695d 0a20 2020 2020 2020  pi, +pi].       
+000139c0: 2020 2020 202d 2046 6f72 2070 7269 736d       - For prism
+000139d0: 6174 6963 206a 6f69 6e74 2074 6865 7920  atic joint they 
+000139e0: 6172 6520 6173 7375 6d65 6420 756e 6b6e  are assumed unkn
+000139f0: 6f77 6e20 616e 6420 616e 2065 7272 6f72  own and an error
+00013a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013a10: 206f 6363 7572 732e 0a0a 2020 2020 2020   occurs...      
+00013a20: 2020 2222 220a 0a20 2020 2020 2020 2069    """..        i
+00013a30: 6620 7120 6973 204e 6f6e 653a 0a20 2020  f q is None:.   
+00013a40: 2020 2020 2020 2020 2071 203d 206e 702e           q = np.
+00013a50: 7a65 726f 7328 2873 656c 662e 6e2c 2929  zeros((self.n,))
+00013a60: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00013a70: 2020 2020 2020 2020 2020 2071 203d 2067             q = g
+00013a80: 6574 7665 6374 6f72 2871 2c20 7365 6c66  etvector(q, self
+00013a90: 2e6e 290a 0a20 2020 2020 2020 2023 204d  .n)..        # M
+00013aa0: 616b 6520 616e 2065 6d70 7479 2033 4420  ake an empty 3D 
+00013ab0: 6669 6775 7265 0a20 2020 2020 2020 2065  figure.        e
+00013ac0: 6e76 203d 2073 656c 662e 5f67 6574 5f67  nv = self._get_g
+00013ad0: 7261 7068 6963 616c 5f62 6163 6b65 6e64  raphical_backend
+00013ae0: 2862 6163 6b65 6e64 290a 0a20 2020 2020  (backend)..     
+00013af0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00013b00: 2865 6e76 2c20 5377 6966 7429 3a20 2023  (env, Swift):  #
+00013b10: 2070 7261 676d 613a 206e 6f63 6f76 6572   pragma: nocover
+00013b20: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00013b30: 7365 2054 7970 6545 7272 6f72 2822 7465  se TypeError("te
+00013b40: 6163 6828 2920 6e6f 7420 7375 7070 6f72  ach() not suppor
+00013b50: 7465 6420 666f 7220 5377 6966 7420 6261  ted for Swift ba
+00013b60: 636b 656e 6422 290a 0a20 2020 2020 2020  ckend")..       
+00013b70: 2023 2041 6464 2074 6865 2073 656c 6620   # Add the self 
+00013b80: 746f 2074 6865 2066 6967 7572 6520 696e  to the figure in
+00013b90: 2072 6561 646f 6e6c 7920 6d6f 6465 0a20   readonly mode. 
+00013ba0: 2020 2020 2020 2065 6e76 2e6c 6175 6e63         env.launc
+00013bb0: 6828 2254 6561 6368 2022 202b 2073 656c  h("Teach " + sel
+00013bc0: 662e 6e61 6d65 2c20 6c69 6d69 7473 3d6c  f.name, limits=l
+00013bd0: 696d 6974 7329 0a20 2020 2020 2020 2065  imits).        e
+00013be0: 6e76 2e61 6464 280a 2020 2020 2020 2020  nv.add(.        
+00013bf0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00013c00: 2020 2020 2020 7265 6164 6f6e 6c79 3d54        readonly=T
+00013c10: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+00013c20: 2023 206a 6f69 6e74 6178 6573 3d6a 6f69   # jointaxes=joi
+00013c30: 6e74 6178 6573 2c0a 2020 2020 2020 2020  ntaxes,.        
+00013c40: 2020 2020 2320 6a6f 696e 746c 6162 656c      # jointlabel
+00013c50: 733d 6a6f 696e 746c 6162 656c 732c 0a20  s=jointlabels,. 
+00013c60: 2020 2020 2020 2020 2020 2023 2065 6566             # eef
+00013c70: 7261 6d65 3d65 6566 7261 6d65 2c0a 2020  rame=eeframe,.  
+00013c80: 2020 2020 2020 2020 2020 2320 7368 6164            # shad
+00013c90: 6f77 3d73 6861 646f 772c 0a20 2020 2020  ow=shadow,.     
+00013ca0: 2020 2020 2020 2023 206e 616d 653d 6e61         # name=na
+00013cb0: 6d65 2c0a 2020 2020 2020 2020 290a 0a20  me,.        ).. 
+00013cc0: 2020 2020 2020 2065 6e76 2e5f 6164 645f         env._add_
+00013cd0: 7465 6163 685f 7061 6e65 6c28 7365 6c66  teach_panel(self
+00013ce0: 2c20 7129 0a0a 2020 2020 2020 2020 6966  , q)..        if
+00013cf0: 2076 656c 6c69 7073 653a 0a20 2020 2020   vellipse:.     
+00013d00: 2020 2020 2020 2076 656c 6c20 3d20 7365         vell = se
+00013d10: 6c66 2e76 656c 6c69 7073 6528 712c 2063  lf.vellipse(q, c
+00013d20: 656e 7472 653d 2265 6522 2c20 7363 616c  entre="ee", scal
+00013d30: 653d 302e 3529 0a20 2020 2020 2020 2020  e=0.5).         
+00013d40: 2020 2065 6e76 2e61 6464 2876 656c 6c29     env.add(vell)
+00013d50: 0a0a 2020 2020 2020 2020 6966 2066 656c  ..        if fel
+00013d60: 6c69 7073 653a 0a20 2020 2020 2020 2020  lipse:.         
+00013d70: 2020 2066 656c 6c20 3d20 7365 6c66 2e66     fell = self.f
+00013d80: 656c 6c69 7073 6528 712c 2063 656e 7472  ellipse(q, centr
+00013d90: 653d 2265 6522 290a 2020 2020 2020 2020  e="ee").        
+00013da0: 2020 2020 656e 762e 6164 6428 6665 6c6c      env.add(fell
+00013db0: 290a 0a20 2020 2020 2020 2023 204b 6565  )..        # Kee
+00013dc0: 7020 7468 6520 706c 6f74 206f 7065 6e0a  p the plot open.
+00013dd0: 2020 2020 2020 2020 6966 2062 6c6f 636b          if block
+00013de0: 3a20 2023 2070 7261 676d 6120 6e6f 636f  :  # pragma noco
+00013df0: 7665 720a 2020 2020 2020 2020 2020 2020  ver.            
+00013e00: 656e 762e 686f 6c64 2829 0a0a 2020 2020  env.hold()..    
+00013e10: 2020 2020 7265 7475 726e 2065 6e76 0a0a      return env..
+00013e20: 2020 2020 2320 2d2d 2d2d 2d2d 2d2d 2d2d      # ----------
+00013e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 230a 0a20  ----------- #.. 
+00013e70: 2020 2023 202d 2d2d 2d2d 2d2d 2d2d 2d2d     # -----------
+00013e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013ea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2023 0a20 2020  ---------- #.   
+00013ec0: 2023 202d 2d2d 2d2d 2d2d 2d2d 2055 7469   # --------- Uti
+00013ed0: 6c69 7479 204d 6574 686f 6473 202d 2d2d  lity Methods ---
+00013ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013f00: 2d2d 2d2d 2d2d 2d2d 2023 0a20 2020 2023  -------- #.    #
+00013f10: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00013f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00013f50: 2d2d 2d2d 2d2d 2023 0a0a 2020 2020 6465  ------ #..    de
+00013f60: 6620 7368 6f77 6772 6170 6828 7365 6c66  f showgraph(self
+00013f70: 2c20 6469 7370 6c61 795f 6772 6170 683a  , display_graph:
+00013f80: 2062 6f6f 6c20 3d20 5472 7565 2c20 2a2a   bool = True, **
+00013f90: 6b77 6172 6773 2920 2d3e 2055 6e69 6f6e  kwargs) -> Union
+00013fa0: 5b4e 6f6e 652c 2073 7472 5d3a 0a20 2020  [None, str]:.   
+00013fb0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00013fc0: 2044 6973 706c 6179 2061 206c 696e 6b20   Display a link 
+00013fd0: 7472 616e 7366 6f72 6d20 6772 6170 6820  transform graph 
+00013fe0: 696e 2062 726f 7773 6572 0a0a 2020 2020  in browser..    
+00013ff0: 2020 2020 6060 726f 626f 742e 7368 6f77      ``robot.show
+00014000: 6772 6170 6828 2960 6020 6469 7370 6c61  graph()`` displa
+00014010: 7973 2061 2067 7261 7068 206f 6620 7468  ys a graph of th
+00014020: 6520 726f 626f 7427 7320 6c69 6e6b 2066  e robot's link f
+00014030: 7261 6d65 730a 2020 2020 2020 2020 616e  rames.        an
+00014040: 6420 7468 6520 4554 5320 6265 7477 6565  d the ETS betwee
+00014050: 6e20 7468 656d 2e20 2049 7420 7573 6573  n them.  It uses
+00014060: 2047 7261 7068 5669 7a20 646f 742e 0a0a   GraphViz dot...
+00014070: 2020 2020 2020 2020 5468 6520 6e6f 6465          The node
+00014080: 7320 6172 653a 0a20 2020 2020 2020 2020  s are:.         
+00014090: 2020 202d 2042 6173 6520 6973 2073 686f     - Base is sho
+000140a0: 776e 2061 7320 6120 6772 6579 2073 7175  wn as a grey squ
+000140b0: 6172 652e 2054 6869 7320 6973 2074 6865  are. This is the
+000140c0: 2077 6f72 6c64 2066 7261 6d65 206f 7269   world frame ori
+000140d0: 6769 6e2c 0a20 2020 2020 2020 2020 2020  gin,.           
+000140e0: 2020 2062 7574 2063 616e 2062 6520 6368     but can be ch
+000140f0: 616e 6765 6420 7573 696e 6720 7468 6520  anged using the 
+00014100: 6060 6261 7365 6060 2061 7474 7269 6275  ``base`` attribu
+00014110: 7465 206f 6620 7468 6520 726f 626f 742e  te of the robot.
+00014120: 0a20 2020 2020 2020 2020 2020 202d 204c  .            - L
+00014130: 696e 6b20 6672 616d 6573 2061 7265 2069  ink frames are i
+00014140: 6e64 6963 6174 6564 2062 7920 6369 7263  ndicated by circ
+00014150: 6c65 730a 2020 2020 2020 2020 2020 2020  les.            
+00014160: 2d20 4554 5320 7472 616e 7366 6f72 6d73  - ETS transforms
+00014170: 2061 7265 2069 6e64 6963 6174 6564 2062   are indicated b
+00014180: 7920 726f 756e 6465 6420 626f 7865 730a  y rounded boxes.
+00014190: 0a20 2020 2020 2020 2054 6865 2065 6467  .        The edg
+000141a0: 6573 2061 7265 3a0a 2020 2020 2020 2020  es are:.        
+000141b0: 2020 2020 2d20 616e 2061 7272 6f77 2069      - an arrow i
+000141c0: 6620 606a 7479 7065 6020 6973 2046 616c  f `jtype` is Fal
+000141d0: 7365 206f 7220 7468 6520 6a6f 696e 7420  se or the joint 
+000141e0: 6973 2066 6978 6564 0a20 2020 2020 2020  is fixed.       
+000141f0: 2020 2020 202d 2061 6e20 6172 726f 7720       - an arrow 
+00014200: 7769 7468 2061 2072 6f75 6e64 2068 6561  with a round hea
+00014210: 6420 6966 2060 6a74 7970 6560 2069 7320  d if `jtype` is 
+00014220: 5472 7565 2061 6e64 2074 6865 206a 6f69  True and the joi
+00014230: 6e74 2069 730a 2020 2020 2020 2020 2020  nt is.          
+00014240: 2020 2020 7265 766f 6c75 7465 0a20 2020      revolute.   
+00014250: 2020 2020 2020 2020 202d 2061 6e20 6172           - an ar
+00014260: 726f 7720 7769 7468 2061 2062 6f78 2068  row with a box h
+00014270: 6561 6420 6966 2060 6a74 7970 6560 2069  ead if `jtype` i
+00014280: 7320 5472 7565 2061 6e64 2074 6865 206a  s True and the j
+00014290: 6f69 6e74 2069 730a 2020 2020 2020 2020  oint is.        
+000142a0: 2020 2020 2020 7072 6973 6d61 7469 630a        prismatic.
+000142b0: 0a20 2020 2020 2020 2045 6467 6520 6c61  .        Edge la
+000142c0: 6265 6c73 206f 7220 6e6f 6465 7320 696e  bels or nodes in
+000142d0: 2062 6c75 6520 6861 7665 2061 2066 6978   blue have a fix
+000142e0: 6564 2074 7261 6e73 666f 726d 6174 696f  ed transformatio
+000142f0: 6e20 746f 2074 6865 0a20 2020 2020 2020  n to the.       
+00014300: 2070 7265 6365 6469 6e67 206c 696e 6b2e   preceding link.
+00014310: 0a0a 2020 2020 2020 2020 5061 7261 6d65  ..        Parame
+00014320: 7465 7273 0a20 2020 2020 2020 202d 2d2d  ters.        ---
+00014330: 2d2d 2d2d 2d2d 2d0a 2020 2020 2020 2020  -------.        
+00014340: 6469 7370 6c61 795f 6772 6170 680a 2020  display_graph.  
+00014350: 2020 2020 2020 2020 2020 4f70 656e 2074            Open t
+00014360: 6865 2067 7261 7068 2069 6e20 6120 6272  he graph in a br
+00014370: 6f77 7365 7220 6966 2054 7275 652e 204f  owser if True. O
+00014380: 7468 6572 7769 7365 2077 696c 6c20 7265  therwise will re
+00014390: 7475 726e 2074 6865 0a20 2020 2020 2020  turn the.       
+000143a0: 2020 2020 2066 696c 6520 7061 7468 0a20       file path. 
+000143b0: 2020 2020 2020 2065 7473 626f 780a 2020         etsbox.  
+000143c0: 2020 2020 2020 2020 2020 5075 7420 7468            Put th
+000143d0: 6520 6c69 6e6b 2045 5453 2069 6e20 6120  e link ETS in a 
+000143e0: 626f 782c 206f 7468 6572 7769 7365 2061  box, otherwise a
+000143f0: 6e20 6564 6765 206c 6162 656c 0a20 2020  n edge label.   
+00014400: 2020 2020 206a 7479 7065 0a20 2020 2020       jtype.     
+00014410: 2020 2020 2020 2041 7272 6f77 6865 6164         Arrowhead
+00014420: 2074 6f20 6e6f 6465 2069 6e64 6963 6174   to node indicat
+00014430: 6573 2072 6576 6f6c 7574 6520 6f72 2070  es revolute or p
+00014440: 7269 736d 6174 6963 2074 7970 650a 2020  rismatic type.  
+00014450: 2020 2020 2020 7374 6174 6963 0a20 2020        static.   
+00014460: 2020 2020 2020 2020 2053 686f 7720 7374           Show st
+00014470: 6174 6963 206a 6f69 6e74 7320 696e 2062  atic joints in b
+00014480: 6c75 6520 616e 6420 626f 6c64 0a0a 2020  lue and bold..  
+00014490: 2020 2020 2020 4578 616d 706c 6573 0a20        Examples. 
+000144a0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d0a         --------.
+000144b0: 2020 2020 2020 2020 3e3e 3e20 696d 706f          >>> impo
+000144c0: 7274 2072 6f62 6f74 6963 7374 6f6f 6c62  rt roboticstoolb
+000144d0: 6f78 2061 7320 7274 620a 2020 2020 2020  ox as rtb.      
+000144e0: 2020 3e3e 3e20 7061 6e64 6120 3d20 7274    >>> panda = rt
+000144f0: 622e 6d6f 6465 6c73 2e55 5244 462e 5061  b.models.URDF.Pa
+00014500: 6e64 6128 290a 2020 2020 2020 2020 3e3e  nda().        >>
+00014510: 3e20 7061 6e64 612e 7368 6f77 6772 6170  > panda.showgrap
+00014520: 6828 290a 0a20 2020 2020 2020 202e 2e20  h()..        .. 
+00014530: 696d 6167 653a 3a20 2e2e 2f66 6967 732f  image:: ../figs/
+00014540: 7061 6e64 612d 6772 6170 682e 7376 670a  panda-graph.svg.
+00014550: 2020 2020 2020 2020 2020 2020 3a77 6964              :wid
+00014560: 7468 3a20 3630 300a 0a20 2020 2020 2020  th: 600..       
+00014570: 2053 6565 2041 6c73 6f0a 2020 2020 2020   See Also.      
+00014580: 2020 2d2d 2d2d 2d2d 2d2d 0a20 2020 2020    --------.     
+00014590: 2020 203a 6675 6e63 3a60 646f 7466 696c     :func:`dotfil
+000145a0: 6560 0a0a 2020 2020 2020 2020 2222 220a  e`..        """.
+000145b0: 0a20 2020 2020 2020 2023 204c 617a 7920  .        # Lazy 
+000145c0: 696d 706f 7274 0a20 2020 2020 2020 2069  import.        i
+000145d0: 6d70 6f72 7420 7465 6d70 6669 6c65 0a20  mport tempfile. 
+000145e0: 2020 2020 2020 2069 6d70 6f72 7420 7375         import su
+000145f0: 6270 726f 6365 7373 0a20 2020 2020 2020  bprocess.       
+00014600: 2069 6d70 6f72 7420 7765 6262 726f 7773   import webbrows
+00014610: 6572 0a0a 2020 2020 2020 2020 2320 6372  er..        # cr
+00014620: 6561 7465 2074 6865 2074 656d 706f 7261  eate the tempora
+00014630: 7279 2064 6f74 6669 6c65 0a20 2020 2020  ry dotfile.     
+00014640: 2020 2064 6f74 6669 6c65 203d 2074 656d     dotfile = tem
+00014650: 7066 696c 652e 5465 6d70 6f72 6172 7946  pfile.TemporaryF
+00014660: 696c 6528 6d6f 6465 3d22 7722 290a 2020  ile(mode="w").  
+00014670: 2020 2020 2020 7365 6c66 2e64 6f74 6669        self.dotfi
+00014680: 6c65 2864 6f74 6669 6c65 2c20 2a2a 6b77  le(dotfile, **kw
+00014690: 6172 6773 290a 0a20 2020 2020 2020 2023  args)..        #
+000146a0: 2072 6577 696e 6420 7468 6520 646f 7420   rewind the dot 
+000146b0: 6669 6c65 2c20 6372 6561 7465 2050 4446  file, create PDF
+000146c0: 2066 696c 6520 696e 2074 6865 2066 696c   file in the fil
+000146d0: 6573 7973 7465 6d2c 2072 756e 2064 6f74  esystem, run dot
+000146e0: 0a20 2020 2020 2020 2064 6f74 6669 6c65  .        dotfile
+000146f0: 2e73 6565 6b28 3029 0a20 2020 2020 2020  .seek(0).       
+00014700: 2070 6466 6669 6c65 203d 2074 656d 7066   pdffile = tempf
+00014710: 696c 652e 4e61 6d65 6454 656d 706f 7261  ile.NamedTempora
+00014720: 7279 4669 6c65 2873 7566 6669 783d 222e  ryFile(suffix=".
+00014730: 7064 6622 2c20 6465 6c65 7465 3d46 616c  pdf", delete=Fal
+00014740: 7365 290a 2020 2020 2020 2020 7375 6270  se).        subp
+00014750: 726f 6365 7373 2e72 756e 2822 646f 7420  rocess.run("dot 
+00014760: 2d54 7064 6622 2c20 7368 656c 6c3d 5472  -Tpdf", shell=Tr
+00014770: 7565 2c20 7374 6469 6e3d 646f 7466 696c  ue, stdin=dotfil
+00014780: 652c 2073 7464 6f75 743d 7064 6666 696c  e, stdout=pdffil
+00014790: 6529 0a0a 2020 2020 2020 2020 2320 6f70  e)..        # op
+000147a0: 656e 2074 6865 2050 4446 2066 696c 6520  en the PDF file 
+000147b0: 696e 2062 726f 7773 6572 2028 686f 7065  in browser (hope
+000147c0: 6675 6c6c 7920 706f 7274 6162 6c65 292c  fully portable),
+000147d0: 2074 6865 6e20 636c 6561 6e75 700a 2020   then cleanup.  
+000147e0: 2020 2020 2020 6966 2064 6973 706c 6179        if display
+000147f0: 5f67 7261 7068 3a20 2023 2070 7261 676d  _graph:  # pragm
+00014800: 6120 6e6f 636f 7665 720a 2020 2020 2020  a nocover.      
+00014810: 2020 2020 2020 7765 6262 726f 7773 6572        webbrowser
+00014820: 2e6f 7065 6e28 6622 6669 6c65 3a2f 2f7b  .open(f"file://{
+00014830: 7064 6666 696c 652e 6e61 6d65 7d22 290a  pdffile.name}").
+00014840: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00014850: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00014860: 2070 6466 6669 6c65 2e6e 616d 650a 0a20   pdffile.name.. 
+00014870: 2020 2064 6566 2064 6f74 6669 6c65 280a     def dotfile(.
+00014880: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00014890: 2020 2020 2020 6669 6c65 6e61 6d65 3a20        filename: 
+000148a0: 556e 696f 6e5b 7374 722c 2049 4f5b 7374  Union[str, IO[st
+000148b0: 725d 5d2c 0a20 2020 2020 2020 2065 7473  r]],.        ets
+000148c0: 626f 783a 2062 6f6f 6c20 3d20 4661 6c73  box: bool = Fals
+000148d0: 652c 0a20 2020 2020 2020 2065 7473 3a20  e,.        ets: 
+000148e0: 4c5b 2266 756c 6c22 2c20 2262 7269 6566  L["full", "brief
+000148f0: 225d 203d 2022 6675 6c6c 222c 0a20 2020  "] = "full",.   
+00014900: 2020 2020 206a 7479 7065 3a20 626f 6f6c       jtype: bool
+00014910: 203d 2046 616c 7365 2c0a 2020 2020 2020   = False,.      
+00014920: 2020 7374 6174 6963 3a20 626f 6f6c 203d    static: bool =
+00014930: 2054 7275 652c 0a20 2020 2029 3a0a 2020   True,.    ):.  
+00014940: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00014950: 2020 5772 6974 6520 6120 6c69 6e6b 2074    Write a link t
+00014960: 7261 6e73 666f 726d 2067 7261 7068 2061  ransform graph a
+00014970: 7320 6120 4772 6170 6856 697a 2064 6f74  s a GraphViz dot
+00014980: 2066 696c 650a 0a20 2020 2020 2020 2054   file..        T
+00014990: 6865 2066 696c 6520 6361 6e20 6265 2070  he file can be p
+000149a0: 726f 6365 7373 6564 2075 7369 6e67 2064  rocessed using d
+000149b0: 6f74 3a0a 2020 2020 2020 2020 2020 2020  ot:.            
+000149c0: 2520 646f 7420 2d54 706e 6720 2d6f 206f  % dot -Tpng -o o
+000149d0: 7574 2e70 6e67 2064 6f74 6669 6c65 2e64  ut.png dotfile.d
+000149e0: 6f74 0a0a 2020 2020 2020 2020 5468 6520  ot..        The 
+000149f0: 6e6f 6465 7320 6172 653a 0a20 2020 2020  nodes are:.     
+00014a00: 2020 2020 2020 202d 2042 6173 6520 6973         - Base is
+00014a10: 2073 686f 776e 2061 7320 6120 6772 6579   shown as a grey
+00014a20: 2073 7175 6172 652e 2020 5468 6973 2069   square.  This i
+00014a30: 7320 7468 6520 776f 726c 6420 6672 616d  s the world fram
+00014a40: 6520 6f72 6967 696e 2c0a 2020 2020 2020  e origin,.      
+00014a50: 2020 2020 2020 2020 6275 7420 6361 6e20          but can 
+00014a60: 6265 2063 6861 6e67 6564 2075 7369 6e67  be changed using
+00014a70: 2074 6865 2060 6062 6173 6560 6020 6174   the ``base`` at
+00014a80: 7472 6962 7574 6520 6f66 2074 6865 2072  tribute of the r
+00014a90: 6f62 6f74 2e0a 2020 2020 2020 2020 2020  obot..          
+00014aa0: 2020 2d20 4c69 6e6b 2066 7261 6d65 7320    - Link frames 
+00014ab0: 6172 6520 696e 6469 6361 7465 6420 6279  are indicated by
+00014ac0: 2063 6972 636c 6573 0a20 2020 2020 2020   circles.       
+00014ad0: 2020 2020 202d 2045 5453 2074 7261 6e73       - ETS trans
+00014ae0: 666f 726d 7320 6172 6520 696e 6469 6361  forms are indica
+00014af0: 7465 6420 6279 2072 6f75 6e64 6564 2062  ted by rounded b
+00014b00: 6f78 6573 0a0a 2020 2020 2020 2020 5468  oxes..        Th
+00014b10: 6520 6564 6765 7320 6172 653a 0a20 2020  e edges are:.   
+00014b20: 2020 2020 2020 2020 202d 2061 6e20 6172           - an ar
+00014b30: 726f 7720 6966 2060 6a74 7970 6560 2069  row if `jtype` i
+00014b40: 7320 4661 6c73 6520 6f72 2074 6865 206a  s False or the j
+00014b50: 6f69 6e74 2069 7320 6669 7865 640a 2020  oint is fixed.  
+00014b60: 2020 2020 2020 2020 2020 2d20 616e 2061            - an a
+00014b70: 7272 6f77 2077 6974 6820 6120 726f 756e  rrow with a roun
+00014b80: 6420 6865 6164 2069 6620 606a 7479 7065  d head if `jtype
+00014b90: 6020 6973 2054 7275 6520 616e 6420 7468  ` is True and th
+00014ba0: 6520 6a6f 696e 7420 6973 0a20 2020 2020  e joint is.     
+00014bb0: 2020 2020 2020 2020 2072 6576 6f6c 7574           revolut
+00014bc0: 650a 2020 2020 2020 2020 2020 2020 2d20  e.            - 
+00014bd0: 616e 2061 7272 6f77 2077 6974 6820 6120  an arrow with a 
+00014be0: 626f 7820 6865 6164 2069 6620 606a 7479  box head if `jty
+00014bf0: 7065 6020 6973 2054 7275 6520 616e 6420  pe` is True and 
+00014c00: 7468 6520 6a6f 696e 7420 6973 0a20 2020  the joint is.   
+00014c10: 2020 2020 2020 2020 2020 2070 7269 736d             prism
+00014c20: 6174 6963 0a0a 2020 2020 2020 2020 4564  atic..        Ed
+00014c30: 6765 206c 6162 656c 7320 6f72 206e 6f64  ge labels or nod
+00014c40: 6573 2069 6e20 626c 7565 2068 6176 6520  es in blue have 
+00014c50: 6120 6669 7865 6420 7472 616e 7366 6f72  a fixed transfor
+00014c60: 6d61 7469 6f6e 2074 6f20 7468 650a 2020  mation to the.  
+00014c70: 2020 2020 2020 7072 6563 6564 696e 6720        preceding 
+00014c80: 6c69 6e6b 2e0a 0a20 2020 2020 2020 204e  link...        N
+00014c90: 6f74 650a 2020 2020 2020 2020 2d2d 2d2d  ote.        ----
+00014ca0: 0a20 2020 2020 2020 2049 6620 6060 6669  .        If ``fi
+00014cb0: 6c65 6e61 6d65 6060 2069 7320 6120 6669  lename`` is a fi
+00014cc0: 6c65 206f 626a 6563 7420 7468 656e 2074  le object then t
+00014cd0: 6865 2066 696c 6520 7769 6c6c 202a 6e6f  he file will *no
+00014ce0: 742a 0a20 2020 2020 2020 2020 2020 2062  t*.            b
+00014cf0: 6520 636c 6f73 6564 2061 6674 6572 2074  e closed after t
+00014d00: 6865 2047 7261 7068 5669 7a20 6d6f 6465  he GraphViz mode
+00014d10: 6c20 6973 2077 7269 7474 656e 2e0a 0a20  l is written... 
+00014d20: 2020 2020 2020 2050 6172 616d 6574 6572         Parameter
+00014d30: 730a 2020 2020 2020 2020 2d2d 2d2d 2d2d  s.        ------
+00014d40: 2d2d 2d2d 0a20 2020 2020 2020 2066 696c  ----.        fil
+00014d50: 650a 2020 2020 2020 2020 2020 2020 4e61  e.            Na
+00014d60: 6d65 206f 6620 6669 6c65 2074 6f20 7772  me of file to wr
+00014d70: 6974 6520 746f 0a20 2020 2020 2020 2065  ite to.        e
+00014d80: 7473 626f 780a 2020 2020 2020 2020 2020  tsbox.          
+00014d90: 2020 5075 7420 7468 6520 6c69 6e6b 2045    Put the link E
+00014da0: 5453 2069 6e20 6120 626f 782c 206f 7468  TS in a box, oth
+00014db0: 6572 7769 7365 2061 6e20 6564 6765 206c  erwise an edge l
+00014dc0: 6162 656c 0a20 2020 2020 2020 2065 7473  abel.        ets
+00014dd0: 0a20 2020 2020 2020 2020 2020 2044 6973  .            Dis
+00014de0: 706c 6179 2074 6865 2066 756c 6c20 6574  play the full et
+00014df0: 7320 7769 7468 2022 6675 6c6c 2220 6f72  s with "full" or
+00014e00: 2061 2062 7269 6566 2076 6572 7369 6f6e   a brief version
+00014e10: 2077 6974 6820 2262 7269 6566 220a 2020   with "brief".  
+00014e20: 2020 2020 2020 6a74 7970 650a 2020 2020        jtype.    
+00014e30: 2020 2020 2020 2020 4172 726f 7768 6561          Arrowhea
+00014e40: 6420 746f 206e 6f64 6520 696e 6469 6361  d to node indica
+00014e50: 7465 7320 7265 766f 6c75 7465 206f 7220  tes revolute or 
+00014e60: 7072 6973 6d61 7469 6320 7479 7065 0a20  prismatic type. 
+00014e70: 2020 2020 2020 2073 7461 7469 630a 2020         static.  
+00014e80: 2020 2020 2020 2020 2020 5368 6f77 2073            Show s
+00014e90: 7461 7469 6320 6a6f 696e 7473 2069 6e20  tatic joints in 
+00014ea0: 626c 7565 2061 6e64 2062 6f6c 640a 0a20  blue and bold.. 
+00014eb0: 2020 2020 2020 2053 6565 2041 6c73 6f0a         See Also.
+00014ec0: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d2d          --------
+00014ed0: 0a20 2020 2020 2020 203a 6675 6e63 3a60  .        :func:`
+00014ee0: 7368 6f77 6772 6170 6860 0a0a 2020 2020  showgraph`..    
+00014ef0: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00014f00: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+00014f10: 696c 656e 616d 652c 2073 7472 293a 0a20  ilename, str):. 
+00014f20: 2020 2020 2020 2020 2020 2066 696c 6520             file 
+00014f30: 3d20 6f70 656e 2866 696c 656e 616d 652c  = open(filename,
+00014f40: 2022 7722 290a 2020 2020 2020 2020 656c   "w").        el
+00014f50: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00014f60: 6669 6c65 203d 2066 696c 656e 616d 650a  file = filename.
+00014f70: 0a20 2020 2020 2020 2068 6561 6465 7220  .        header 
+00014f80: 3d20 7222 2222 6469 6772 6170 6820 4720  = r"""digraph G 
+00014f90: 7b0a 6772 6170 6820 5b72 616e 6b64 6972  {.graph [rankdir
+00014fa0: 3d4c 525d 3b0a 2222 220a 0a20 2020 2020  =LR];."""..     
+00014fb0: 2020 2064 6566 2064 7261 775f 6564 6765     def draw_edge
+00014fc0: 286c 696e 6b2c 2065 7473 626f 782c 206a  (link, etsbox, j
+00014fd0: 7479 7065 2c20 7374 6174 6963 293a 0a20  type, static):. 
+00014fe0: 2020 2020 2020 2020 2020 2023 2064 7261             # dra
+00014ff0: 7720 7468 6520 6564 6765 0a20 2020 2020  w the edge.     
+00015000: 2020 2020 2020 2069 6620 6a74 7970 653a         if jtype:
+00015010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015020: 2069 6620 6c69 6e6b 2e69 7370 7269 736d   if link.isprism
+00015030: 6174 6963 3a0a 2020 2020 2020 2020 2020  atic:.          
+00015040: 2020 2020 2020 2020 2020 6564 6765 5f6f            edge_o
+00015050: 7074 696f 6e73 203d 2027 6172 726f 7768  ptions = 'arrowh
+00015060: 6561 643d 2262 6f78 222c 2061 7272 6f77  ead="box", arrow
+00015070: 7461 696c 3d22 696e 7622 2c20 6469 723d  tail="inv", dir=
+00015080: 2262 6f74 6822 270a 2020 2020 2020 2020  "both"'.        
+00015090: 2020 2020 2020 2020 656c 6966 206c 696e          elif lin
+000150a0: 6b2e 6973 7265 766f 6c75 7465 3a0a 2020  k.isrevolute:.  
+000150b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000150c0: 2020 6564 6765 5f6f 7074 696f 6e73 203d    edge_options =
+000150d0: 2027 6172 726f 7768 6561 643d 2264 6f74   'arrowhead="dot
+000150e0: 222c 2061 7272 6f77 7461 696c 3d22 696e  ", arrowtail="in
+000150f0: 7622 2c20 6469 723d 2262 6f74 6822 270a  v", dir="both"'.
+00015100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015110: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00015120: 2020 2020 2020 2020 2020 6564 6765 5f6f            edge_o
+00015130: 7074 696f 6e73 203d 2027 6172 726f 7768  ptions = 'arrowh
+00015140: 6561 643d 226e 6f72 6d61 6c22 270a 2020  ead="normal"'.  
+00015150: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00015160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015170: 6564 6765 5f6f 7074 696f 6e73 203d 2027  edge_options = '
+00015180: 6172 726f 7768 6561 643d 226e 6f72 6d61  arrowhead="norma
+00015190: 6c22 270a 0a20 2020 2020 2020 2020 2020  l"'..           
+000151a0: 2069 6620 6c69 6e6b 2e70 6172 656e 7420   if link.parent 
+000151b0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+000151c0: 2020 2020 2020 2020 2070 6172 656e 7420           parent 
+000151d0: 3d20 2242 4153 4522 0a20 2020 2020 2020  = "BASE".       
+000151e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000151f0: 2020 2020 2020 2020 2020 2070 6172 656e             paren
+00015200: 7420 3d20 6c69 6e6b 2e70 6172 656e 742e  t = link.parent.
+00015210: 6e61 6d65 0a0a 2020 2020 2020 2020 2020  name..          
+00015220: 2020 6966 2065 7473 626f 783a 0a20 2020    if etsbox:.   
+00015230: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+00015240: 7574 2074 6865 2065 7473 2066 7261 676d  ut the ets fragm
+00015250: 656e 7420 696e 2061 2062 6f78 0a20 2020  ent in a box.   
+00015260: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00015270: 6e6f 7420 6c69 6e6b 2e69 736a 6f69 6e74  not link.isjoint
+00015280: 2061 6e64 2073 7461 7469 633a 0a20 2020   and static:.   
+00015290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000152a0: 206e 6f64 655f 6f70 7469 6f6e 7320 3d20   node_options = 
+000152b0: 272c 2066 6f6e 7463 6f6c 6f72 3d22 626c  ', fontcolor="bl
+000152c0: 7565 2227 0a20 2020 2020 2020 2020 2020  ue"'.           
+000152d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000152e0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000152f0: 6f64 655f 6f70 7469 6f6e 7320 3d20 2222  ode_options = ""
+00015300: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015310: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00015320: 2020 2020 2020 2020 2020 2066 696c 652e             file.
+00015330: 7772 6974 6528 0a20 2020 2020 2020 2020  write(.         
+00015340: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00015350: 2020 7b7d 5f65 7473 205b 7368 6170 653d    {}_ets [shape=
+00015360: 626f 782c 2073 7479 6c65 3d72 6f75 6e64  box, style=round
+00015370: 6564 2c20 6c61 6265 6c3d 227b 7d22 7b7d  ed, label="{}"{}
+00015380: 5d3b 5c6e 272e 666f 726d 6174 280a 2020  ];\n'.format(.  
+00015390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000153a0: 2020 2020 2020 2020 2020 6c69 6e6b 2e6e            link.n
+000153b0: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+000153c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000153d0: 206c 696e 6b2e 6574 732e 5f5f 7374 725f   link.ets.__str_
+000153e0: 5f28 713d 6622 717b 6c69 6e6b 2e6a 696e  _(q=f"q{link.jin
+000153f0: 6465 787d 2229 2c0a 2020 2020 2020 2020  dex}"),.        
+00015400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015410: 2020 2020 6e6f 6465 5f6f 7074 696f 6e73      node_options
+00015420: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00015430: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00015440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015450: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00015460: 2020 6578 6365 7074 2055 6e69 636f 6465    except Unicode
+00015470: 456e 636f 6465 4572 726f 723a 2020 2320  EncodeError:  # 
+00015480: 7072 6167 6d61 206e 6f63 6f76 6572 0a20  pragma nocover. 
+00015490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000154a0: 2020 2066 696c 652e 7772 6974 6528 0a20     file.write(. 
+000154b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000154c0: 2020 2020 2020 2027 2020 7b7d 5f65 7473         '  {}_ets
+000154d0: 205b 7368 6170 653d 626f 782c 2073 7479   [shape=box, sty
+000154e0: 6c65 3d72 6f75 6e64 6564 2c20 6c61 6265  le=rounded, labe
+000154f0: 6c3d 227b 7d22 7b7d 5d3b 5c6e 272e 666f  l="{}"{}];\n'.fo
+00015500: 726d 6174 280a 2020 2020 2020 2020 2020  rmat(.          
+00015510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015520: 2020 6c69 6e6b 2e6e 616d 652c 0a20 2020    link.name,.   
+00015530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015540: 2020 2020 2020 2020 206c 696e 6b2e 6574           link.et
+00015550: 732e 5f5f 7374 725f 5f28 713d 6622 717b  s.__str__(q=f"q{
+00015560: 6c69 6e6b 2e6a 696e 6465 787d 2229 0a20  link.jindex}"). 
+00015570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015580: 2020 2020 2020 2020 2020 202e 656e 636f             .enco
+00015590: 6465 2822 6173 6369 6922 2c20 2269 676e  de("ascii", "ign
+000155a0: 6f72 6522 290a 2020 2020 2020 2020 2020  ore").          
+000155b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000155c0: 2020 2e64 6563 6f64 6528 2261 7363 6969    .decode("ascii
+000155d0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+000155e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000155f0: 6e6f 6465 5f6f 7074 696f 6e73 2c0a 2020  node_options,.  
+00015600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015610: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00015620: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00015630: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00015640: 696c 652e 7772 6974 6528 2220 207b 7d20  ile.write("  {} 
+00015650: 2d3e 207b 7d5f 6574 733b 5c6e 222e 666f  -> {}_ets;\n".fo
+00015660: 726d 6174 2870 6172 656e 742c 206c 696e  rmat(parent, lin
+00015670: 6b2e 6e61 6d65 2929 0a20 2020 2020 2020  k.name)).       
+00015680: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
+00015690: 6974 6528 0a20 2020 2020 2020 2020 2020  ite(.           
+000156a0: 2020 2020 2020 2020 2022 2020 7b7d 5f65           "  {}_e
+000156b0: 7473 202d 3e20 7b7d 205b 7b7d 5d3b 5c6e  ts -> {} [{}];\n
+000156c0: 222e 666f 726d 6174 286c 696e 6b2e 6e61  ".format(link.na
+000156d0: 6d65 2c20 6c69 6e6b 2e6e 616d 652c 2065  me, link.name, e
+000156e0: 6467 655f 6f70 7469 6f6e 7329 0a20 2020  dge_options).   
+000156f0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+00015700: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00015710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015720: 2023 2070 7574 2074 6865 2065 7473 2066   # put the ets f
+00015730: 7261 676d 656e 7420 6173 2061 6e20 6564  ragment as an ed
+00015740: 6765 206c 6162 656c 0a20 2020 2020 2020  ge label.       
+00015750: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00015760: 6c69 6e6b 2e69 736a 6f69 6e74 2061 6e64  link.isjoint and
+00015770: 2073 7461 7469 633a 0a20 2020 2020 2020   static:.       
+00015780: 2020 2020 2020 2020 2020 2020 2065 6467               edg
+00015790: 655f 6f70 7469 6f6e 7320 2b3d 2027 666f  e_options += 'fo
+000157a0: 6e74 636f 6c6f 723d 2262 6c75 6522 270a  ntcolor="blue"'.
+000157b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157c0: 6966 2065 7473 203d 3d20 2266 756c 6c22  if ets == "full"
+000157d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000157e0: 2020 2020 2020 6573 7472 203d 206c 696e        estr = lin
+000157f0: 6b2e 6574 732e 5f5f 7374 725f 5f28 713d  k.ets.__str__(q=
+00015800: 6622 717b 6c69 6e6b 2e6a 696e 6465 787d  f"q{link.jindex}
+00015810: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00015820: 2020 2065 6c69 6620 6574 7320 3d3d 2022     elif ets == "
+00015830: 6272 6965 6622 3a0a 2020 2020 2020 2020  brief":.        
+00015840: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00015850: 696e 6b2e 6a69 6e64 6578 2069 7320 4e6f  ink.jindex is No
+00015860: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00015870: 2020 2020 2020 2020 2020 2020 6573 7472              estr
+00015880: 203d 2022 220a 2020 2020 2020 2020 2020   = "".          
+00015890: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000158a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000158b0: 2020 2020 2020 2020 6573 7472 203d 2066          estr = f
+000158c0: 222e 2e2e 717b 6c69 6e6b 2e6a 696e 6465  "...q{link.jinde
+000158d0: 787d 220a 2020 2020 2020 2020 2020 2020  x}".            
+000158e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000158f0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00015900: 7475 726e 0a20 2020 2020 2020 2020 2020  turn.           
+00015910: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00015920: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00015930: 6c65 2e77 7269 7465 280a 2020 2020 2020  le.write(.      
+00015940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015950: 2020 2720 207b 7d20 2d3e 207b 7d20 5b6c    '  {} -> {} [l
+00015960: 6162 656c 3d22 7b7d 222c 207b 7d5d 3b5c  abel="{}", {}];\
+00015970: 6e27 2e66 6f72 6d61 7428 0a20 2020 2020  n'.format(.     
+00015980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015990: 2020 2020 2020 2070 6172 656e 742c 0a20         parent,. 
+000159a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000159b0: 2020 2020 2020 2020 2020 206c 696e 6b2e             link.
+000159c0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+000159d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000159e0: 2020 6573 7472 2c0a 2020 2020 2020 2020    estr,.        
+000159f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015a00: 2020 2020 6564 6765 5f6f 7074 696f 6e73      edge_options
+00015a10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00015a20: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00015a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015a40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00015a50: 2020 6578 6365 7074 2055 6e69 636f 6465    except Unicode
+00015a60: 456e 636f 6465 4572 726f 723a 2020 2320  EncodeError:  # 
+00015a70: 7072 6167 6d61 206e 6f63 6f76 6572 0a20  pragma nocover. 
+00015a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015a90: 2020 2066 696c 652e 7772 6974 6528 0a20     file.write(. 
+00015aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ab0: 2020 2020 2020 2027 2020 7b7d 202d 3e20         '  {} -> 
+00015ac0: 7b7d 205b 6c61 6265 6c3d 227b 7d22 2c20  {} [label="{}", 
+00015ad0: 7b7d 5d3b 5c6e 272e 666f 726d 6174 280a  {}];\n'.format(.
+00015ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015af0: 2020 2020 2020 2020 2020 2020 7061 7265              pare
+00015b00: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+00015b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b20: 6c69 6e6b 2e6e 616d 652c 0a20 2020 2020  link.name,.     
+00015b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b40: 2020 2020 2020 2065 7374 722e 656e 636f         estr.enco
+00015b50: 6465 2822 6173 6369 6922 2c20 2269 676e  de("ascii", "ign
+00015b60: 6f72 6522 292e 6465 636f 6465 2822 6173  ore").decode("as
+00015b70: 6369 6922 292c 0a20 2020 2020 2020 2020  cii"),.         
+00015b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b90: 2020 2065 6467 655f 6f70 7469 6f6e 732c     edge_options,
+00015ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015bb0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00015bc0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00015bd0: 0a0a 2020 2020 2020 2020 6669 6c65 2e77  ..        file.w
+00015be0: 7269 7465 2868 6561 6465 7229 0a0a 2020  rite(header)..  
+00015bf0: 2020 2020 2020 2320 6164 6420 7468 6520        # add the 
+00015c00: 6261 7365 206c 696e 6b0a 2020 2020 2020  base link.      
+00015c10: 2020 6669 6c65 2e77 7269 7465 2822 2020    file.write("  
+00015c20: 4241 5345 205b 7368 6170 653d 7371 7561  BASE [shape=squa
+00015c30: 7265 2c20 7374 796c 653d 6669 6c6c 6564  re, style=filled
+00015c40: 2c20 6669 6c6c 636f 6c6f 723d 6772 6179  , fillcolor=gray
+00015c50: 5d5c 6e22 290a 0a20 2020 2020 2020 2023  ]\n")..        #
+00015c60: 2061 6464 2074 6865 206c 696e 6b73 0a20   add the links. 
+00015c70: 2020 2020 2020 2066 6f72 206c 696e 6b20         for link 
+00015c80: 696e 2073 656c 663a 0a20 2020 2020 2020  in self:.       
+00015c90: 2020 2020 2023 2064 7261 7720 7468 6520       # draw the 
+00015ca0: 6c69 6e6b 2066 7261 6d65 206e 6f64 6520  link frame node 
+00015cb0: 2863 6972 636c 6529 206f 7220 6565 206e  (circle) or ee n
+00015cc0: 6f64 6520 2864 6f75 626c 6563 6972 636c  ode (doublecircl
+00015cd0: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
+00015ce0: 6620 6c69 6e6b 2069 6e20 7365 6c66 2e65  f link in self.e
+00015cf0: 655f 6c69 6e6b 733a 0a20 2020 2020 2020  e_links:.       
+00015d00: 2020 2020 2020 2020 2023 2065 6e64 2d65           # end-e
+00015d10: 6666 6563 746f 720a 2020 2020 2020 2020  ffector.        
+00015d20: 2020 2020 2020 2020 6e6f 6465 5f6f 7074          node_opt
+00015d30: 696f 6e73 203d 2027 7368 6170 653d 2264  ions = 'shape="d
+00015d40: 6f75 626c 6563 6972 636c 6522 2c20 636f  oublecircle", co
+00015d50: 6c6f 723d 2262 6c75 6522 2c20 666f 6e74  lor="blue", font
+00015d60: 636f 6c6f 723d 2262 6c75 6522 270a 2020  color="blue"'.  
+00015d70: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00015d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d90: 6e6f 6465 5f6f 7074 696f 6e73 203d 2027  node_options = '
+00015da0: 7368 6170 653d 2263 6972 636c 6522 270a  shape="circle"'.
+00015db0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+00015dc0: 652e 7772 6974 6528 2220 207b 7d20 5b7b  e.write("  {} [{
+00015dd0: 7d5d 3b5c 6e22 2e66 6f72 6d61 7428 6c69  }];\n".format(li
+00015de0: 6e6b 2e6e 616d 652c 206e 6f64 655f 6f70  nk.name, node_op
+00015df0: 7469 6f6e 7329 290a 0a20 2020 2020 2020  tions))..       
+00015e00: 2020 2020 2064 7261 775f 6564 6765 286c       draw_edge(l
+00015e10: 696e 6b2c 2065 7473 626f 782c 206a 7479  ink, etsbox, jty
+00015e20: 7065 2c20 7374 6174 6963 290a 0a20 2020  pe, static)..   
+00015e30: 2020 2020 2066 6f72 2067 7269 7070 6572       for gripper
+00015e40: 2069 6e20 7365 6c66 2e67 7269 7070 6572   in self.gripper
+00015e50: 733a 0a20 2020 2020 2020 2020 2020 2066  s:.            f
+00015e60: 6f72 206c 696e 6b20 696e 2067 7269 7070  or link in gripp
+00015e70: 6572 2e6c 696e 6b73 3a0a 2020 2020 2020  er.links:.      
+00015e80: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
+00015e90: 7269 7465 2822 2020 7b7d 205b 7368 6170  rite("  {} [shap
+00015ea0: 653d 6364 735d 3b5c 6e22 2e66 6f72 6d61  e=cds];\n".forma
+00015eb0: 7428 6c69 6e6b 2e6e 616d 6529 290a 2020  t(link.name)).  
+00015ec0: 2020 2020 2020 2020 2020 2020 2020 6472                dr
+00015ed0: 6177 5f65 6467 6528 6c69 6e6b 2c20 6574  aw_edge(link, et
+00015ee0: 7362 6f78 2c20 6a74 7970 652c 2073 7461  sbox, jtype, sta
+00015ef0: 7469 6329 0a0a 2020 2020 2020 2020 6669  tic)..        fi
+00015f00: 6c65 2e77 7269 7465 2822 7d5c 6e22 290a  le.write("}\n").
+00015f10: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00015f20: 7374 616e 6365 2866 696c 656e 616d 652c  stance(filename,
+00015f30: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
+00015f40: 2020 2066 696c 652e 636c 6f73 6528 2920     file.close() 
+00015f50: 2023 206e 6f71 610a                       # noqa.
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ET.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ET.py`

 * *Files 24% similar despite different names*

```diff
@@ -17,26 +17,25 @@
     transl2,
     tr2xyt,
 )
 from copy import deepcopy
 from roboticstoolbox.fknm import ET_T, ET_init, ET_update
 from spatialmath.base import getvector
 from spatialmath import SE3, SE2
-from typing import Optional, Callable, Union
+from typing import Optional, Callable, Union, TYPE_CHECKING
 
-ArrayLike = Union[list, ndarray, tuple, set]
+# from spatialmath.base.types import ArrayLike
+from roboticstoolbox.tools.types import ArrayLike, NDArray
 
-try:  # pragma: no cover
+if TYPE_CHECKING:  # pragma: nocover
     import sympy
 
-    # Sym = sympy.Expr
     Sym = sympy.core.symbol.Symbol
-
-except ImportError:  # pragma: no cover
-    Sym = float
+else:  # pragma: nocover
+    Sym = None
 
 
 class BaseET:
     def __init__(
         self,
         axis: str,
         eta: Union[float, Sym, None] = None,
@@ -45,42 +44,50 @@
         jindex: Optional[int] = None,
         unit: str = "rad",
         flip: bool = False,
         qlim: Optional[ArrayLike] = None,
     ):
         self._axis = axis
 
+        # A flag to check if the ET is a static joint with a symbolic value
+        # Defaults to False as is set to True if eta is a symbol below
+        self._isstaticsym = False
+
         if eta is None:
             self._eta = None
         else:
             if axis[0] == "R" and unit.lower().startswith("deg"):
                 if not issymbol(eta):
                     self.eta = deg2rad(float(eta))
             else:
                 self.eta = eta
 
         self._axis_func = axis_func
         self._flip = flip
         self._jindex = jindex
 
         if qlim is not None:
-            self._qlim = array(getvector(qlim, 2, out="array"))
+            self._qlim: Union[NDArray, None] = getvector(qlim, 2, out="array")
         else:
-            self._qlim = None
+            self._qlim: Union[NDArray, None] = None
 
         if self.eta is None:
             if T is None:
                 self._joint = True
                 self._T = eye(4).copy(order="F")
                 if axis_func is None:
                     raise TypeError("For a variable joint, axis_func must be specified")
             else:
                 self._joint = False
                 self._T = T.copy(order="F")
         else:
+            # This is a static joint
+            if issymbol(eta):
+                self._isstaticsym = True
+
             self._joint = False
             if axis_func is not None:
                 self._T = axis_func(self.eta).copy(order="F")
             else:
                 raise TypeError(
                     "For a static joint either both `eta` and `axis_func` "
                     "must be specified otherwise `T` must be supplied"
@@ -96,19 +103,23 @@
         """
         if self.jindex is None:
             jindex = 0
         else:
             jindex = self.jindex
 
         if self.qlim is None:
-            qlim = array([0, 0])
+            if self.axis[0] == "R":
+                qlim = array([-pi, pi])
+            else:
+                qlim = array([0, 1])
         else:
             qlim = self.qlim
 
         return ET_init(
+            self._isstaticsym,
             self.isjoint,
             self.isflip,
             jindex,
             self.__axis_to_number(self.axis),
             self._T,
             qlim,
         )
@@ -119,30 +130,33 @@
         """
         if self.jindex is None:
             jindex = 0
         else:
             jindex = self.jindex
 
         if self.qlim is None:
-            qlim = array([0, 0])
+            if self.axis[0] == "R":
+                qlim = array([-pi, pi])
+            else:
+                qlim = array([0, 1])
         else:
             qlim = self.qlim
 
         ET_update(
             self.fknm,
+            self._isstaticsym,
             self.isjoint,
             self.isflip,
             jindex,
             self.__axis_to_number(self.axis),
             self._T,
             qlim,
         )
 
     def __str__(self):
-
         eta_str = ""
 
         if self.isjoint:
             if self.jindex is None:
                 eta_str = "q"
             else:
                 eta_str = f"q{self.jindex}"
@@ -152,15 +166,18 @@
         elif self.isrotation and self.eta is not None:
             eta_str = f"{self.eta * (180.0/pi):.4g}"
         elif not self.iselementary:
             if isinstance(self, ET):
                 T = self.A()
                 rpy = tr2rpy(T) * 180.0 / pi
                 if T[:3, -1].any() and rpy.any():
-                    eta_str = f"{T[0, -1]:.4g}, {T[1, -1]:.4g}, {T[2, -1]:.4g}; {rpy[0]:.4g}, {rpy[1]:.4g}, {rpy[2]:.4g}"
+                    eta_str = (
+                        f"{T[0, -1]:.4g}, {T[1, -1]:.4g}, {T[2, -1]:.4g};"
+                        f" {rpy[0]:.4g}, {rpy[1]:.4g}, {rpy[2]:.4g}"
+                    )
                 elif T[:3, -1].any():
                     eta_str = f"{T[0, -1]:.4g}, {T[1, -1]:.4g}, {T[2, -1]:.4g}"
                 elif rpy.any():
                     eta_str = f"{rpy[0]:.4g}, {rpy[1]:.4g}, {rpy[2]:.4g}"
                 else:
                     eta_str = ""  # pragma: nocover
             elif isinstance(self, ET2):
@@ -171,15 +188,14 @@
 
         else:
             eta_str = f"{self.eta:.4g}"
 
         return f"{self.axis}({eta_str})"
 
     def __repr__(self):
-
         s_eta = "" if self.eta is None else f"eta={self.eta}"
         s_T = (
             f"T={repr(self._T)}"
             if (self.eta is None and self.axis_func is None)
             else ""
         )
         s_flip = "" if not self.isflip else f"flip={self.isflip}"
@@ -204,15 +220,15 @@
         a line by itself.
 
         Example::
 
             [In [1]: e
             Out [1]: tx(1)
         """
-        p.text(str(self))
+        p.text(str(self))  # pragma: nocover
 
     def __deepcopy__(self, memo):
         cls = self.__class__
         result = cls.__new__(cls)
         memo[id(self)] = result
 
         for k, v in self.__dict__.items():
@@ -254,41 +270,50 @@
         return self.__fknm
 
     @property
     def eta(self) -> Union[float, Sym, None]:
         """
         Get the transform constant
 
-        :return: The constant  if set
-
-        Example:
+        Returns
+        -------
+        ets
+            The constant  if set
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx(1)
-            >>> e.eta
-            >>> e = ET.Rx(90, 'deg')
-            >>> e.eta
-            >>> e = ET.ty()
-            >>> e.eta
-
-        .. note:: If the value was given in degrees it will be converted and
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx(1)
+        >>> e.eta
+        >>> e = ET.Rx(90, 'deg')
+        >>> e.eta
+        >>> e = ET.ty()
+        >>> e.eta
+
+        Notes
+        -----
+        - If the value was given in degrees it will be converted and
             stored internally in radians
         """
         return self._eta
 
     @eta.setter
     def eta(self, value: Union[float, Sym]) -> None:
         """
         Set the transform constant
 
-        :param value: The transform constant 
-
-        .. note:: No unit conversions are applied, it is assumed to be in
+        Parameters
+        ----------
+        value
+            The transform constant 
+
+        Notes
+        -----
+        - No unit conversions are applied, it is assumed to be in
             radians.
         """
         self._eta = value if issymbol(value) else float(value)
 
     @property
     def axis_func(
         self,
@@ -296,178 +321,210 @@
         return self._axis_func
 
     @property
     def axis(self) -> str:
         """
         The transform type and axis
 
-        :return: The transform type and axis
-
-        Example:
+        Returns
+        -------
+        axis
+            The transform type and axis
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx(1)
-            >>> e.axis
-            >>> e = ET.Rx(90, 'deg')
-            >>> e.axis
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx(1)
+        >>> e.axis
+        >>> e = ET.Rx(90, 'deg')
+        >>> e.axis
 
         """
         return self._axis
 
     @property
     def isjoint(self) -> bool:
         """
         Test if ET is a joint
 
-        :return: True if a joint
-
-        Example:
+        Returns
+        -------
+        isjoint
+            True if a joint
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx(1)
+        >>> e.isjoint
+        >>> e = ET.tx()
+        >>> e.isjoint
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx(1)
-            >>> e.isjoint
-            >>> e = ET.tx()
-            >>> e.isjoint
         """
         return self._joint
 
     @property
     def isflip(self) -> bool:
         """
         Test if ET joint is flipped
 
-        :return: True if joint is flipped
-
         A flipped joint uses the negative of the joint variable, ie. it rotates
         or moves in the opposite direction.
 
-        Example:
+        Returns
+        -------
+        isflip
+            True if joint is flipped
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx()
+        >>> e.T(1)
+        >>> eflip = ET.tx(flip=True)
+        >>> eflip.T(1)
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx()
-            >>> e.T(1)
-            >>> eflip = ET.tx(flip=True)
-            >>> eflip.T(1)
         """
+
         return self._flip
 
     @property
     def isrotation(self) -> bool:
         """
         Test if ET is a rotation
 
-        :return: True if a rotation
-
-        Example:
+        Returns
+        -------
+        isrotation
+            True if a rotation
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx(1)
+        >>> e.isrotation
+        >>> e = ET.rx()
+        >>> e.isrotation
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx(1)
-            >>> e.isrotation
-            >>> e = ET.rx()
-            >>> e.isrotation
         """
+
         return self.axis[0] == "R"
 
     @property
     def istranslation(self) -> bool:
         """
         Test if ET is a translation
 
-        :return: True if a translation
-
-        Example:
+        Returns
+        -------
+        istranslation
+            True if a translation
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx(1)
+        >>> e.istranslation
+        >>> e = ET.rx()
+        >>> e.istranslation
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx(1)
-            >>> e.istranslation
-            >>> e = ET.rx()
-            >>> e.istranslation
         """
+
         return self.axis[0] == "t"
 
     @property
     def qlim(self) -> Union[ndarray, None]:
         return self._qlim
 
     @qlim.setter
     def qlim(self, qlim_new: Union[ArrayLike, None]) -> None:
         if qlim_new is not None:
-            qlim_new = array(getvector(qlim_new, 2, out="array"))
+            qlim_new = getvector(qlim_new, 2, out="array")
         self._qlim = qlim_new
         self.__update_c()
 
     @property
     def jindex(self) -> Union[int, None]:
         """
         Get ET joint index
 
-        :return: The assigmed joint index
+        Returns
+        -------
+        jindex
+            The assigmed joint index
 
         Allows an ET to be associated with a numbered joint in a robot.
 
-        Example:
-
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx()
+        >>> print(e)
+        >>> e = ET.tx(j=3)
+        >>> print(e)
+        >>> print(e.jindex)
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx()
-            >>> print(e)
-            >>> e = ET.tx(j=3)
-            >>> print(e)
-            >>> print(e.jindex)
         """
+
         return self._jindex
 
     @jindex.setter
     def jindex(self, j):
         if not isinstance(j, int) or j < 0:
             raise ValueError(f"jindex is {j}, must be an int >= 0")
         self._jindex = j
         self.__update_c()
 
     @property
     def iselementary(self) -> bool:
         """
         Test if ET is an elementary transform
 
-        :return: True if an elementary transform
-
-        .. note:: ET's may not actually be "elementary", it can be a complex
+        Returns
+        -------
+        iselementary
+            True if an elementary transform
+
+        Notes
+        -----
+        - ET's may not actually be "elementary", it can be a complex
             mix of rotations and translations.
 
-        :seealso: :func:`compile`
+        See Also
+        --------
+        :func:`compile`
+
         """
+
         return self.axis[0] != "S"
 
     def inv(self):
         r"""
         Inverse of ET
 
-        :return: Inverse of the ET
-
         The inverse of a given ET.
 
-        Example:
+        Returns
+        -------
+        inv
+            Inverse of the ET
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz(2.5)
-            >>> print(e)
-            >>> print(e.inv())
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz(2.5)
+        >>> print(e)
+        >>> print(e.inv())
 
         """  # noqa
 
         inv = deepcopy(self)
 
         if inv.isjoint:
             inv._flip ^= True
@@ -481,37 +538,42 @@
 
         return inv
 
     def A(self, q: Union[float, Sym] = 0.0) -> ndarray:
         """
         Evaluate an elementary transformation
 
-        :param q: Is used if this ET is variable (a joint)
-
-        :return: The SE(3) or SE(2) matrix value of the ET
-
-        Example:
+        Parameters
+        ----------
+        q
+            Is used if this ET is variable (a joint)
+
+        Returns
+        -------
+        T
+            The SE(3) or SE(2) matrix value of the ET
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tx(1)
-            >>> e.A()
-            >>> e = ET.tx()
-            >>> e.A(0.7)
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tx(1)
+        >>> e.A()
+        >>> e = ET.tx()
+        >>> e.A(0.7)
 
         """
         try:
             # Try and use the C implementation, flip is handled in C
             return ET_T(self.__fknm, q)
         except TypeError:
             # We can't use the fast version, lets use Python instead
             if self.isjoint:
                 if self.isflip:
-                    q = -1.0 * q
+                    q = -q  # type: ignore
 
                 if self.axis_func is not None:
                     return self.axis_func(q)
                 else:  # pragma: no cover
                     raise TypeError("axis_func not defined")
             else:  # pragma: no cover
                 return self._T
@@ -548,101 +610,152 @@
     @classmethod
     def Rx(
         cls, eta: Union[float, Sym, None] = None, unit: str = "rad", **kwargs
     ) -> "ET":
         """
         Pure rotation about the x-axis
 
-        :param : rotation about the x-axis
-        :param unit: angular unit, "rad" [default] or "deg"
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET.Rx()`` is an elementary rotation about the x-axis by a
           constant angle 
         - ``ET.Rx()`` is an elementary rotation about the x-axis by a variable
           angle, i.e. a revolute robot joint. ``j`` or ``flip`` can be set in
           this case.
 
-        :seealso: :func:`ET`, :func:`isrotation`
+        Parameters
+        ----------
+        
+            rotation about the x-axis
+        unit
+            angular unit, "rad" [default] or "deg"
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        Rx
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        :func:`isrotation`
+
         :SymPy: supported
         """
 
         return cls(axis="Rx", eta=eta, axis_func=trotx, unit=unit, **kwargs)
 
     @classmethod
     def Ry(
         cls, eta: Union[float, Sym, None] = None, unit: str = "rad", **kwargs
     ) -> "ET":
         """
         Pure rotation about the y-axis
 
-        :param : rotation about the y-axis
-        :param unit: angular unit, "rad" [default] or "deg"
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET.Ry()`` is an elementary rotation about the y-axis by a
           constant angle 
         - ``ET.Ry()`` is an elementary rotation about the y-axis by a variable
           angle, i.e. a revolute robot joint. ``j`` or ``flip`` can be set in
           this case.
 
-        :seealso: :func:`ET`, :func:`isrotation`
+        Parameters
+        ----------
+        
+            rotation about the y-axis
+        unit
+            angular unit, "rad" [default] or "deg"
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        Ry
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        :func:`isrotation`
+
         :SymPy: supported
         """
         return cls(axis="Ry", eta=eta, axis_func=troty, unit=unit, **kwargs)
 
     @classmethod
     def Rz(
         cls, eta: Union[float, Sym, None] = None, unit: str = "rad", **kwargs
     ) -> "ET":
         """
         Pure rotation about the z-axis
 
-        :param : rotation about the z-axis
-        :param unit: angular unit, "rad" [default] or "deg"
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET.Rz()`` is an elementary rotation about the z-axis by a
           constant angle 
         - ``ET.Rz()`` is an elementary rotation about the z-axis by a variable
           angle, i.e. a revolute robot joint. ``j`` or ``flip`` can be set in
           this case.
 
-        :seealso: :func:`ET`, :func:`isrotation`
+        Parameters
+        ----------
+        
+            rotation about the z-axis
+        unit
+            angular unit, "rad" [default] or "deg"
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        Rz
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        :func:`isrotation`
+
         :SymPy: supported
         """
         return cls(axis="Rz", eta=eta, axis_func=trotz, unit=unit, **kwargs)
 
     @classmethod
     def tx(cls, eta: Union[float, Sym, None] = None, **kwargs) -> "ET":
         """
         Pure translation along the x-axis
 
-        :param : translation distance along the z-axis
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET.tx()`` is an elementary translation along the x-axis by a
           distance constant 
         - ``ET.tx()`` is an elementary translation along the x-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET`, :func:`istranslation`
+        Parameters
+        ----------
+        
+            translation distance along the z-axis
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        tx
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        :func:`istranslation`
+
         :SymPy: supported
         """
 
         # this method is 3x faster than using lambda x: transl(x, 0, 0)
         def axis_func(eta):
             # fmt: off
             return array([
@@ -656,27 +769,39 @@
         return cls(axis="tx", axis_func=axis_func, eta=eta, **kwargs)
 
     @classmethod
     def ty(cls, eta: Union[float, Sym, None] = None, **kwargs) -> "ET":
         """
         Pure translation along the y-axis
 
-        :param : translation distance along the y-axis
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET.ty()`` is an elementary translation along the y-axis by a
           distance constant 
         - ``ET.ty()`` is an elementary translation along the y-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET`, :func:`istranslation`
+        Parameters
+        ----------
+        
+            translation distance along the y-axis
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        ty
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        :func:`istranslation`
+
         :SymPy: supported
         """
 
         def axis_func(eta):
             # fmt: off
             return array([
                 [1, 0, 0, 0],
@@ -689,27 +814,39 @@
         return cls(axis="ty", eta=eta, axis_func=axis_func, **kwargs)
 
     @classmethod
     def tz(cls, eta: Union[float, Sym, None] = None, **kwargs) -> "ET":
         """
         Pure translation along the z-axis
 
-        :param : translation distance along the z-axis
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET.tz()`` is an elementary translation along the z-axis by a
           distance constant 
         - ``ET.tz()`` is an elementary translation along the z-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET`, :func:`istranslation`
+        Parameters
+        ----------
+        
+            translation distance along the z-axis
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        tz
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        func:`istranslation`
+
         :SymPy: supported
         """
 
         def axis_func(eta):
             # fmt: off
             return array([
                 [1, 0, 0, 0],
@@ -722,25 +859,35 @@
         return cls(axis="tz", axis_func=axis_func, eta=eta, **kwargs)
 
     @classmethod
     def SE3(cls, T: Union[ndarray, SE3], **kwargs) -> "ET":
         """
         A static SE3
 
-        :param T: The SE3 trnasformation matrix
-
-        :return: An elementary transform
-
         - ``ET.T()`` is an elementary translation along the z-axis by a
           distance constant 
         - ``ET.tz()`` is an elementary translation along the z-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET`, :func:`istranslation`
+        Parameters
+        ----------
+        T
+            The SE3 trnasformation matrix
+
+        Returns
+        -------
+        SE3
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET`
+        :func:`istranslation`
+
         :SymPy: supported
         """
 
         trans = T.A if isinstance(T, SE3) else T
 
         return cls(axis="SE3", T=trans, **kwargs)
 
@@ -769,123 +916,179 @@
     @classmethod
     def R(
         cls, eta: Union[float, Sym, None] = None, unit: str = "rad", **kwargs
     ) -> "ET2":
         """
         Pure rotation
 
-        :param : rotation angle
-        :param unit: angular unit, "rad" [default] or "deg"
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET2.R()`` is an elementary rotation by a constant angle 
         - ``ET2.R()`` is an elementary rotation by a variable angle, i.e. a
           revolute robot joint. ``j`` or ``flip`` can be set in
           this case.
 
-        .. note:: In the 2D case this is rotation around the normal to the
+        Parameters
+        ----------
+        
+            rotation angle
+        unit
+            angular unit, "rad" [default] or "deg"
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        R
+            An elementary transform
+
+        Notes
+        -----
+        - In the 2D case this is rotation around the normal to the
             xy-plane.
 
-        :seealso: :func:`ET2`, :func:`isrotation`
+        See Also
+        --------
+        :func:`ET2`, :func:`isrotation`
+
         """
+
         return cls(
             axis="R", eta=eta, axis_func=lambda theta: trot2(theta), unit=unit, **kwargs
         )
 
     @classmethod
     def tx(
         cls, eta: Union[float, Sym, None] = None, unit: str = "rad", **kwargs
     ) -> "ET2":
         """
         Pure translation along the x-axis
 
-        :param : translation distance along the z-axis
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET2.tx()`` is an elementary translation along the x-axis by a
           distance constant 
         - ``ET2.tx()`` is an elementary translation along the x-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET2`, :func:`istranslation`
+        Parameters
+        ----------
+        
+            translation distance along the x-axis
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        tx
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET2`
+        :func:`istranslation`
+
         """
+
         return cls(axis="tx", eta=eta, axis_func=lambda x: transl2(x, 0), **kwargs)
 
     @classmethod
     def ty(
         cls, eta: Union[float, Sym, None] = None, unit: str = "rad", **kwargs
     ) -> "ET2":
         """
         Pure translation along the y-axis
 
-        :param : translation distance along the y-axis
-        :param j: Explicit joint number within the robot
-        :param flip: Joint moves in opposite direction
-
-        :return: An elementary transform
-
         - ``ET2.tx()`` is an elementary translation along the y-axis by a
           distance constant 
         - ``ET2.tx()`` is an elementary translation along the y-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET2`
+        Parameters
+        ----------
+        
+            translation distance along the y-axis
+        j
+            Explicit joint number within the robot
+        flip
+            Joint moves in opposite direction
+
+        Returns
+        -------
+        ty
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET2`
+
         """
+
         return cls(axis="ty", eta=eta, axis_func=lambda y: transl2(0, y), **kwargs)
 
     @classmethod
     def SE2(cls, T: Union[ndarray, SE2], **kwargs) -> "ET2":
         """
         A static SE2
 
-        :param T: The SE2 trnasformation matrix
-
-        :return: An elementary transform
-
         - ``ET2.T()`` is an elementary translation along the z-axis by a
           distance constant 
         - ``ET2.tz()`` is an elementary translation along the z-axis by a
           variable distance, i.e. a prismatic robot joint. ``j`` or ``flip``
           can be set in this case.
 
-        :seealso: :func:`ET2`, :func:`istranslation`
+        Parameters
+        ----------
+        T
+            The SE2 trnasformation matrix
+
+        Returns
+        -------
+        SE2
+            An elementary transform
+
+        See Also
+        --------
+        :func:`ET2`
+        :func:`istranslation`
+
         :SymPy: supported
         """
 
         trans = T.A if isinstance(T, SE2) else T
 
         return cls(axis="SE2", T=trans, **kwargs)
 
     def A(self, q: Union[float, Sym] = 0.0) -> ndarray:
         """
         Evaluate an elementary transformation
 
-        :param q: Is used if this ET2 is variable (a joint)
-
-        :return: The SE(2) matrix value of the ET2
-
-        Example:
+        Parameters
+        ----------
+        q
+            Is used if this ET2 is variable (a joint)
+
+        Returns
+        -------
+        T
+            The SE(2) matrix value of the ET2
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET2
-            >>> e = ET2.tx(1)
-            >>> e.A()
-            >>> e = ET2.tx()
-            >>> e.A(0.7)
+        >>> from roboticstoolbox import ET2
+        >>> e = ET2.tx(1)
+        >>> e.A()
+        >>> e = ET2.tx()
+        >>> e.A(0.7)
 
         """
+
         if self.isjoint:
             if self.isflip:
                 q = -1.0 * q
 
             if self.axis_func is not None:
                 return self.axis_func(q)
             else:  # pragma: no cover
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ETS.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/ETS.py`

 * *Files 25% similar despite different names*

```diff
@@ -2,78 +2,57 @@
 
 """
 @author: Jesse Haviland
 @author: Peter Corke
 """
 
 from collections import UserList
-from numpy import (
-    pi,
-    where,
-    all,
-    ndarray,
-    zeros,
-    array,
-    eye,
-    array_equal,
-    sqrt,
-    min,
-    max,
-    where,
-    cross,
-    flip,
-    concatenate,
-)
+import numpy as np
 from numpy.random import uniform
-from numpy.linalg import inv, det, cond, pinv, matrix_rank, svd, eig
+from numpy.linalg import inv, det, cond, svd
 from spatialmath import SE3, SE2
 from spatialmath.base import (
     getvector,
     issymbol,
     tr2jac,
     verifymatrix,
     tr2jac2,
     t2r,
     rotvelxform,
     simplify,
+    getmatrix,
 )
 from roboticstoolbox import rtb_get_param
+from roboticstoolbox.robot.IK import IK_GN, IK_LM, IK_NR, IK_QP
 
-from collections import UserList
-from spatialmath.base import issymbol, getmatrix
 from roboticstoolbox.fknm import (
     ETS_init,
     ETS_fkine,
     ETS_jacob0,
     ETS_jacobe,
     ETS_hessian0,
     ETS_hessiane,
-    IK_NR,
-    IK_GN,
-    IK_LM_Chan,
-    IK_LM_Wampler,
-    IK_LM_Sugihara,
+    IK_NR_c,
+    IK_GN_c,
+    IK_LM_c,
 )
 from copy import deepcopy
-from roboticstoolbox import rtb_get_param
 from roboticstoolbox.robot.ET import ET, ET2
-from spatialmath.base import getvector
-from spatialmath import SE3
 from typing import Union, overload, List, Set, Tuple
+from typing_extensions import Literal as L
 from sys import version_info
-
-ArrayLike = Union[list, ndarray, tuple, set]
+from roboticstoolbox.tools.types import ArrayLike, NDArray
 
 py_ver = version_info
 
 if version_info >= (3, 9):
     from functools import cached_property
 
     c_property = cached_property
-else:
+else:  # pragma: nocover
     c_property = property
 
 
 class BaseETS(UserList):
     def __init__(self, *args):
         super().__init__(*args)
 
@@ -87,81 +66,86 @@
         )
         # self._fknm = [et.fknm for et in self.data]
 
     def __str__(self, q: Union[str, None] = None):
         """
         Pretty prints the ETS
 
-        :param q: control how joint variables are displayed
-        :type q: ArrayLike
-        :return: Pretty printed ETS
-
         ``q`` controls how the joint variables are displayed:
 
         - None, format depends on number of joint variables
             - one, display joint variable as q
             - more, display joint variables as q0, q1, ...
             - if a joint index was provided, use this value
         - "", display all joint variables as empty parentheses ``()``
         - "", display all joint variables as ``()``
         - format string with passed joint variables ``(j, j+1)``, so "{0}"
           would display joint variables as 0, 1, ... while "{1}" would
           display joint variables as 1, 2, ...  ``j`` is either the joint
           index, if provided, otherwise a sequential value.
 
-        Example:
+        Parameters
+        ----------
+        q
+            control how joint variables are displayed
+
+        Returns
+        -------
+        str
+            Pretty printed ETS
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz() * ET.tx(1) * ET.Rz()
+        >>> print(e[:2])
+        >>> print(e)
+        >>> print(e.__str__(""))
+        >>> print(e.__str__("{0}"))  # numbering from 0
+        >>> print(e.__str__("{1}"))  # numbering from 1
+        >>> # explicit joint indices
+        >>> e = ET.Rz(jindex=3) * ET.tx(1) * ET.Rz(jindex=4)
+        >>> print(e)
+        >>> print(e.__str__("{0}"))
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz() * ET.tx(1) * ET.Rz()
-            >>> print(e[:2])
-            >>> print(e)
-            >>> print(e.__str__(""))
-            >>> print(e.__str__("{0}"))  # numbering from 0
-            >>> print(e.__str__("{1}"))  # numbering from 1
-            >>> # explicit joint indices
-            >>> e = ET.Rz(jindex=3) * ET.tx(1) * ET.Rz(jindex=4)
-            >>> print(e)
-            >>> print(e.__str__("{0}"))
-
-        .. note:: Angular parameters are converted to degrees, except if they
-            are symbolic.
-
-        Example:
+        Angular parameters are converted to degrees, except if they
+        are symbolic.
 
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> from spatialmath.base import symbol
+        >>> theta, d = symbol('theta, d')
+        >>> e = ET.Rx(theta) * ET.tx(2) * ET.Rx(45, 'deg') * ET.Ry(0.2) * ET.ty(d)
+        >>> str(e)
 
-            >>> from roboticstoolbox import ET
-            >>> from spatialmath.base import symbol
-            >>> theta, d = symbol('theta, d')
-            >>> e = ET.Rx(theta) * ET.tx(2) * ET.Rx(45, 'deg') * ET.Ry(0.2) * ET.ty(d)
-            >>> str(e)
-
-        :SymPy: supported
         """
+
         es = []
         j = 0
         c = 0
         s = None
         unicode = rtb_get_param("unicode")
 
+        # An empty SE3
+        if len(self.data) == 0:
+            return "SE3()"
+
         if q is None:
             if len(self.joints()) > 1:
                 q = "q{0}"
             else:
                 q = "q"
 
         # For et in the object, display it, data comes from properties
         # which come from the named tuple
         for et in self.data:
-
             if et.isjoint:
                 if q is not None:
-                    if et.jindex is None:
+                    if et.jindex is None:  # pragma: nocover  this is no longer possible
                         _j = j
                     else:
                         _j = et.jindex
                     qvar = q.format(  # lgtm [py/str-format/surplus-argument]  # noqa
                         _j, _j + 1
                     )
                 # else:
@@ -173,20 +157,20 @@
                     s = f"{et.axis}({qvar})"
                 j += 1
 
             elif et.isrotation:
                 if issymbol(et.eta):
                     s = f"{et.axis}({et.eta})"
                 else:
-                    s = f"{et.axis}({et.eta * 180 / pi:.4g})"
+                    s = f"{et.axis}({et.eta * 180 / np.pi:.4g})"
 
             elif et.istranslation:
                 try:
                     s = f"{et.axis}({et.eta:.4g})"
-                except TypeError:
+                except TypeError:  # pragma: nocover
                     s = f"{et.axis}({et.eta})"
 
             elif not et.iselementary:
                 s = str(et)
                 c += 1
 
             es.append(s)
@@ -196,276 +180,355 @@
         else:  # pragma: nocover
             return " * ".join(es)
 
     def _repr_pretty_(self, p, cycle):
         """
         Pretty string for IPython
 
-        :param p: pretty printer handle (ignored)
-        :param cycle: pretty printer flag (ignored)
-
         Print stringified version when variable is displayed in IPython, ie. on
         a line by itself.
 
-        Example::
+        Parameters
+        ----------
+        p
+            pretty printer handle (ignored)
+        cycle
+            pretty printer flag (ignored)
+
+        Examples
+        --------
+        In [1]: e
+        Out [1]: R(q0)  tx(1)  R(q1)  tx(1)
 
-            [In [1]: e
-            Out [1]: R(q0)  tx(1)  R(q1)  tx(1)
         """
-        print(self.__str__())
+
+        print(self.__str__())  # pragma: nocover
 
     def joint_idx(self) -> List[int]:
         """
         Get index of joint transforms
 
-        :return: indices of transforms that are joints
-
-        Example:
+        Returns
+        -------
+        joint_idx
+            indices of transforms that are joints
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
-            >>> e.joint_idx()
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
+        >>> e.joint_idx()
 
         """
-        return where([e.isjoint for e in self])[0]
+
+        return np.where([e.isjoint for e in self])[0]  # type: ignore
 
     def joints(self) -> List[ET]:
         """
         Get a list of the variable ETs with this ETS
 
-        :return: list of ETs that are joints
-
-        Example:
+        Returns
+        -------
+        joints
+            list of ETs that are joints
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
-            >>> e.joints()
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
+        >>> e.joints()
 
         """
+
         return [e for e in self if e.isjoint]
 
     def jindex_set(self) -> Set[int]:  #
         """
         Get set of joint indices
 
-        :return: set of unique joint indices
-
-        Example:
+        Returns
+        -------
+        jindex_set
+            set of unique joint indices
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz(jindex=1) * ET.tx(jindex=2) * ET.Rz(jindex=1) * ET.tx(1)
+        >>> e.jointset()
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz(jindex=1) * ET.tx(jindex=2) * ET.Rz(jindex=1) * ET.tx(1)
-            >>> e.jointset()
         """
+
         return set([self[j].jindex for j in self.joint_idx()])  # type: ignore
 
     @c_property
-    def jindices(self) -> ndarray:
+    def jindices(self) -> NDArray:
         """
         Get an array of joint indices
 
-        :return: array of unique joint indices
-
-        Example:
+        Returns
+        -------
+        jindices
+            array of unique joint indices
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz(jindex=1) * ET.tx(jindex=2) * ET.Rz(jindex=1) * ET.tx(1)
+        >>> e.jointset()
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz(jindex=1) * ET.tx(jindex=2) * ET.Rz(jindex=1) * ET.tx(1)
-            >>> e.jointset()
         """
-        return array([j.jindex for j in self.joints()])  # type: ignore
 
-    @c_property
+        return np.array([j.jindex for j in self.joints()])  # type: ignore
+
+    @property
     def qlim(self):
         r"""
-        Joint limits
-
-        :return: Array of joint limit values
-        :rtype: ndarray(2,n)
-        :exception ValueError: unset limits for a prismatic joint
+        Get/Set Joint limits
 
         Limits are extracted from the link objects.  If joints limits are
         not set for:
 
-            - a revolute joint [-. ] is returned
-            - a prismatic joint an exception is raised
+        - a revolute joint [-. ] is returned
+        - a prismatic joint an exception is raised
 
-        Example:
+        Parameters
+        ----------
+        new_qlim
+            An ndarray(2, n) of the new joint limits to set
 
+        Returns
+        -------
+        :return: Array of joint limit values
+        :rtype: ndarray(2,n)
+
+        Raises
+        ------
+        ValueError
+            unset limits for a prismatic joint
+
+        Examples
+        --------
         .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> robot = rtb.models.DH.Puma560()
+        >>> robot.qlim
 
-            >>> import roboticstoolbox as rtb
-            >>> robot = rtb.models.DH.Puma560()
-            >>> robot.qlim
         """
-        limits = zeros((2, self.n))
+
+        limits = np.zeros((2, self.n))
 
         for i, et in enumerate(self.joints()):
             if et.isrotation:
                 if et.qlim is None:
-                    v = [-pi, pi]
+                    v = [-np.pi, np.pi]
                 else:
                     v = et.qlim
             elif et.istranslation:
                 if et.qlim is None:
                     raise ValueError("undefined prismatic joint limit")
                 else:
                     v = et.qlim
             else:
-                raise ValueError("Undefined Joint Type")
+                raise ValueError("Undefined Joint Type")  # pragma: nocover
             limits[:, i] = v
 
         return limits
 
+    @qlim.setter
+    def qlim(self, new_qlim: ArrayLike):
+        new_qlim = np.array(new_qlim)
+
+        if new_qlim.shape == (2,) and self.n == 1:
+            new_qlim = new_qlim.reshape(2, 1)
+
+        if new_qlim.shape != (2, self.n):
+            raise ValueError("new_qlim must be of shape (2, n)")
+
+        for j, i in enumerate(self.joint_idx()):
+            et = self[i]
+            et.qlim = new_qlim[:, j]
+
+            self[i] = et
+
+        self._update_internals()
+
     @property
     def structure(self) -> str:
         """
         Joint structure string
 
-        :return: A string indicating the joint types
-
         A string comprising the characters 'R' or 'P' which indicate the types
         of joints in order from left to right.
 
-        Example:
+        Returns
+        -------
+        structure
+            A string indicating the joint types
 
-        .. runblock:: pycon
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.tz() * ET.tx(1) * ET.Rz() * ET.tx(1)
-            >>> e.structure
+
+        Examples
+        --------
+        .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.tz() * ET.tx(1) * ET.Rz() * ET.tx(1)
+        >>> e.structure
 
         """
+
         return "".join(
             ["R" if self.data[i].isrotation else "P" for i in self.joint_idx()]
         )
 
     @property
     def n(self) -> int:
         """
         Number of joints
 
-        :return: the number of joints in the ETS
-
         Counts the number of joints in the ETS.
 
-        Example:
+        Returns
+        -------
+        n
+            the number of joints in the ETS
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rx() * ET.tx(1) * ET.tz()
+        >>> e.n
+
+        See Also
+        --------
+        :func:`joints`
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rx() * ET.tx(1) * ET.tz()
-            >>> e.n
-
-        :seealso: :func:`joints`
         """
 
         return self._n
 
     @property
     def m(self) -> int:
         """
         Number of transforms
 
-        :return: the number of transforms in the ETS
-
         Counts the number of transforms in the ETS.
 
-        Example:
+        Returns
+        -------
+        m
+            the number of transforms in the ETS
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rx() * ET.tx(1) * ET.tz()
-            >>> e.m
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rx() * ET.tx(1) * ET.tz()
+        >>> e.m
 
         """
 
         return self._m
 
     @overload
-    def data(self: "ETS") -> List[ET]:  # pragma: nocover
-        ...
+    def data(self: "ETS") -> List[ET]:
+        ...  # pragma: nocover
 
     @overload
-    def data(self: "ETS2") -> List[ET2]:  # pragma: nocover
-        ...
+    def data(self: "ETS2") -> List[ET2]:
+        ...  # pragma: nocover
 
     @property
     def data(self):
         return self._data
 
     @data.setter
     @overload
-    def data(self: "ETS", new_data: List[ET]):  # pragma: nocover
-        ...
+    def data(self: "ETS", new_data: List[ET]):
+        ...  # pragma: nocover
 
     @data.setter
     @overload
-    def data(self: "ETS", new_data: List[ET2]):  # pragma: nocover
-        ...
+    def data(self: "ETS", new_data: List[ET2]):
+        ...  # pragma: nocover
 
     @data.setter
     def data(self, new_data):
         self._data = new_data
 
     @overload
-    def pop(self: "ETS", i: int = -1) -> ET:  # pragma: nocover
-        ...
+    def pop(self: "ETS", i: int = -1) -> ET:
+        ...  # pragma: nocover
 
     @overload
-    def pop(self: "ETS2", i: int = -1) -> ET2:  # pragma: nocover
-        ...
+    def pop(self: "ETS2", i: int = -1) -> ET2:
+        ...  # pragma: nocover
 
     def pop(self, i=-1):
         """
         Pop value
 
-        :param i: item in the list to pop, default is last
-        :return: the popped value
-        :raises IndexError: if there are no values to pop
-
         Removes a value from the value list and returns it.  The original
         instance is modified.
 
-        Example:
+        Parameters
+        ----------
+        i
+            item in the list to pop, default is last
+
+        Returns
+        -------
+        pop
+            the popped value
+
+        Raises
+        ------
+        IndexError
+            if there are no values to pop
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
+        >>> tail = e.pop()
+        >>> tail
+        >>> e
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
-            >>> tail = e.pop()
-            >>> tail
-            >>> e
         """
+
         item = super().pop(i)
         self._update_internals()
         return item
 
     @overload
-    def split(self: "ETS") -> List["ETS"]:  # pragma: nocover
-        ...
+    def split(self: "ETS") -> List["ETS"]:
+        ...  # pragma: nocover
 
     @overload
-    def split(self: "ETS2") -> List["ETS2"]:  # pragma: nocover
-        ...
+    def split(self: "ETS2") -> List["ETS2"]:
+        ...  # pragma: nocover
 
     def split(self):
         """
         Split ETS into link segments
 
-        Returns a list of ETS, each one, apart from the last,
-        ends with a variable ET.
+        Returns
+        -------
+        split
+            a list of ETS, each one, apart from the last,
+            ends with a variable ET.
+
         """
+
         segments = []
         start = 0
 
         for j, k in enumerate(self.joint_idx()):
             ets_j = self.data[start : k + 1]
             start = k + 1
             segments.append(ets_j)
@@ -481,187 +544,212 @@
 
         if tail_len > 0:
             segments.append(tail)
 
         return segments
 
     @overload
-    def inv(self: "ETS") -> "ETS":  # pragma: nocover
-        ...
+    def inv(self: "ETS") -> "ETS":
+        ...  # pragma: nocover
 
     @overload
-    def inv(self: "ETS2") -> "ETS2":  # pragma: nocover
-        ...
+    def inv(self: "ETS2") -> "ETS2":
+        ...  # pragma: nocover
 
     def inv(self):
         r"""
         Inverse of ETS
 
-        :return: Inverse of the ETS
-
         The inverse of a given ETS.  It is computed as the inverse of the
         individual ETs in the reverse order.
 
         .. math::
 
             (\mathbf{E}_0, \mathbf{E}_1 \cdots \mathbf{E}_{n-1} )^{-1} = (\mathbf{E}_{n-1}^{-1}, \mathbf{E}_{n-2}^{-1} \cdots \mathbf{E}_0^{-1}{n-1} )
 
-        Example:
+        Returns
+        -------
+        inv
+            Inverse of the ETS
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz(jindex=2) * ET.tx(1) * ET.Rx(jindex=3,flip=True) * ET.tx(1)
-            >>> print(e)
-            >>> print(e.inv())
-
-        .. note:: It is essential to use explicit joint indices to account for
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz(jindex=2) * ET.tx(1) * ET.Rx(jindex=3,flip=True) * ET.tx(1)
+        >>> print(e)
+        >>> print(e.inv())
+
+        Notes
+        -----
+        - It is essential to use explicit joint indices to account for
             the reversed order of the transforms.
+
         """  # noqa
 
         return self.__class__([et.inv() for et in reversed(self.data)])
 
     @overload
-    def __getitem__(self: "ETS", i: int) -> ET:  # pragma: nocover
-        ...
+    def __getitem__(self: "ETS", i: int) -> ET:
+        ...  # pragma: nocover
 
     @overload
-    def __getitem__(self: "ETS", i: slice) -> List[ET]:  # pragma: nocover
-        ...
+    def __getitem__(self: "ETS", i: slice) -> List[ET]:
+        ...  # pragma: nocover
 
     @overload
-    def __getitem__(self: "ETS2", i: int) -> ET2:  # pragma: nocover
-        ...
+    def __getitem__(self: "ETS2", i: int) -> ET2:
+        ...  # pragma: nocover
 
     @overload
-    def __getitem__(self: "ETS2", i: slice) -> List[ET2]:  # pragma: nocover
-        ...
+    def __getitem__(self: "ETS2", i: slice) -> List[ET2]:
+        ...  # pragma: nocover
 
     def __getitem__(self, i):
         """
         Index or slice an ETS
 
-        :param i: the index or slince
-        :return: Elementary transform
-
-        Example:
+        Parameters
+        ----------
+        i
+            the index or slince
+
+        Returns
+        -------
+        et
+            Elementary transform
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
-            >>> e[0]
-            >>> e[1]
-            >>> e[1:3]
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
+        >>> e[0]
+        >>> e[1]
+        >>> e[1:3]
 
         """
         return self.data[i]  # can be [2] or slice, eg. [3:5]
 
     def __deepcopy__(self, memo):
-
         new_data = []
 
         for data in self:
             new_data.append(deepcopy(data))
 
         cls = self.__class__
         result = cls(new_data)
         memo[id(self)] = result
         return result
 
     def plot(self, *args, **kwargs):
-        from roboticstoolbox.robot.ERobot import ERobot, ERobot2
+        from roboticstoolbox.robot.Robot import Robot, Robot2
 
         if isinstance(self, ETS):
-            robot = ERobot(self)
+            robot = Robot(self)
         else:
-            robot = ERobot2(self)
+            robot = Robot2(self)
 
         robot.plot(*args, **kwargs)
 
     def teach(self, *args, **kwargs):
-        from roboticstoolbox.robot.ERobot import ERobot, ERobot2
+        from roboticstoolbox.robot.Robot import Robot, Robot2
 
         if isinstance(self, ETS):
-            robot = ERobot(self)
+            robot = Robot(self)
         else:
-            robot = ERobot2(self)
+            robot = Robot2(self)
 
         robot.teach(*args, **kwargs)
 
-    def random_q(self, i: int = 1) -> ndarray:
+    def random_q(self, i: int = 1) -> NDArray:
         """
         Generate a random valid joint configuration
 
-        :param i: number of configurations to generate
-
         Generates a random q vector within the joint limits defined by
         `self.qlim`.
 
-        Example:
+        Parameters
+        ----------
+        i
+            number of configurations to generate
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> robot = rtb.models.Panda()
-            >>> ets = robot.ets()
-            >>> q = ets.random_q()
-            >>> q
+        >>> import roboticstoolbox as rtb
+        >>> robot = rtb.models.Panda()
+        >>> ets = robot.ets()
+        >>> q = ets.random_q()
+        >>> q
 
         """
 
         if i == 1:
-            q = zeros(self.n)
+            q = np.zeros(self.n)
 
             for i in range(self.n):
                 q[i] = uniform(self.qlim[0, i], self.qlim[1, i])
 
         else:
-            q = zeros((i, self.n))
+            q = np.zeros((i, self.n))
 
             for j in range(i):
                 for i in range(self.n):
                     q[j, i] = uniform(self.qlim[0, i], self.qlim[1, i])
 
         return q
 
 
 class ETS(BaseETS):
     """
     This class implements an elementary transform sequence (ETS) for 3D
 
-    :param arg: Function to compute ET value
-
     An instance can contain an elementary transform (ET) or an elementary
     transform sequence (ETS). It has list-like properties by subclassing
     UserList, which means we can perform indexing, slicing pop, insert, as well
     as using it as an iterator over its values.
 
     - ``ETS()`` an empty ETS list
     - ``ETS(et)`` an ETS containing a single ET
     - ``ETS([et0, et1, et2])`` an ETS consisting of three ET's
 
-    Example:
-
-        .. runblock:: pycon
-
-            >>> from roboticstoolbox import ETS, ET
-            >>> e = ET.Rz(0.3) # a single ET, rotation about z
-            >>> ets1 = ETS(e)
-            >>> len(ets1)
-            >>> ets2 = ET.Rz(0.3) * ET.tx(2) # an ETS
-            >>> len(ets2)                    # of length 2
-            >>> ets2[1]                      # an ET sliced from the ETS
-
-    :references:
-        - Kinematic Derivatives using the Elementary Transform Sequence,
-          J. Haviland and P. Corke
+    Parameters
+    ----------
+    arg
+        Function to compute ET value
+
+    Examples
+    --------
+    .. runblock:: pycon
+    >>> from roboticstoolbox import ETS, ET
+    >>> e = ET.Rz(0.3) # a single ET, rotation about z
+    >>> ets1 = ETS(e)
+    >>> len(ets1)
+    >>> ets2 = ET.Rz(0.3) * ET.tx(2) # an ETS
+    >>> len(ets2)                    # of length 2
+    >>> ets2[1]                      # an ET sliced from the ETS
+
+    References
+    ----------
+    - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+        Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+    - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+        Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+
+    See Also
+    --------
+    :func:`rx`
+    :func:`ry`
+    :func:`rz`
+    :func:`tx`
+    :func:`ty`
+    :func:`tz`
 
-    :seealso: :func:`rx`, :func:`ry`, :func:`rz`, :func:`tx`,
-        :func:`ty`, :func:`tz`
     """
 
     def __init__(
         self,
         arg: Union[
             List[Union["ETS", ET]], List[ET], List["ETS"], ET, "ETS", None
         ] = None,
@@ -713,16 +801,17 @@
         ):
             # ets has sequential jindicies, except for the last.
             joints[-1].jindex = self.n - 1
             self._auto_jindex = True
 
         elif jindices > 0 and not jindices == self.n:
             raise ValueError(
-                "You can not have some jindices set for the ET's in arg. It must be all or none"
-            )
+                "You can not have some jindices set for the ET's in arg. It must be all"
+                " or none"
+            )  # pragma: nocover
         elif jindices == 0 and self.n > 0:
             # Set them ourself
             for j, joint in enumerate(joints):
                 joint.jindex = j
 
             self._auto_jindex = True
 
@@ -741,81 +830,88 @@
     def __add__(self, rest) -> "ETS":
         return self.__mul__(rest)  # pragma: nocover
 
     def compile(self) -> "ETS":
         """
         Compile an ETS
 
-        :return: optimised ETS
-
         Perform constant folding for faster evaluation.  Consecutive constant
         ETs are compounded, leading to a constant ET which is denoted by
         ``SE3`` when displayed.
 
-        Example:
+        Returns
+        -------
+        compile
+            optimised ETS
 
+        Examples
+        --------
         .. runblock:: pycon
-
-            >>> import roboticstoolbox as rtb
-            >>> robot = rtb.models.ETS.Panda()
-            >>> ets = robot.ets()
-            >>> ets
-            >>> ets.compile()
-
-        :seealso: :func:`isconstant`
+        >>> import roboticstoolbox as rtb
+        >>> robot = rtb.models.ETS.Panda()
+        >>> ets = robot.ets()
+        >>> ets
+        >>> ets.compile()
+
+        See Also
+        --------
+        :func:`isconstant`
         """
         const = None
         ets = ETS()
 
         for et in self:
-
             if et.isjoint:
                 # a joint
                 if const is not None:
                     # flush the constant
-                    if not array_equal(const, eye(4)):
+                    if not np.array_equal(const, np.eye(4)):
                         ets *= ET.SE3(const)
                     const = None
                 ets *= et  # emit the joint ET
             else:
                 # not a joint
                 if const is None:
                     const = et.A()
                 else:
                     const = const @ et.A()
 
         if const is not None:
             # flush the constant, tool transform
-            if not array_equal(const, eye(4)):
+            if not np.array_equal(const, np.eye(4)):
                 ets *= ET.SE3(const)
         return ets
 
     def insert(
         self,
         arg: Union[ET, "ETS"],
         i: int = -1,
     ) -> None:
         """
         Insert value
 
-        :param i: insert an ET or ETS into the ETS, default is at the end
-        :param arg: the elementary transform or sequence to insert
-
         Inserts an ET or ETS into the ET sequence.  The inserted value is at position
         ``i``.
 
-        Example:
+        Parameters
+        ----------
+        i
+            insert an ET or ETS into the ETS, default is at the end
+        arg
+            the elementary transform or sequence to insert
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> from roboticstoolbox import ET
+        >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
+        >>> f = ET.Ry()
+        >>> e.insert(f, 2)
+        >>> e
 
-            >>> from roboticstoolbox import ET
-            >>> e = ET.Rz() * ET.tx(1) * ET.Rz() * ET.tx(1)
-            >>> f = ET.Ry()
-            >>> e.insert(f, 2)
-            >>> e
         """
 
         if isinstance(arg, ET):
             if i == -1:
                 self.data.append(arg)
             else:
                 self.data.insert(i, arg)
@@ -827,125 +923,168 @@
                 for j, et in enumerate(arg):
                     self.data.insert(i + j, et)
         self._update_internals()
 
     def fkine(
         self,
         q: ArrayLike,
-        base: Union[ndarray, SE3, None] = None,
-        tool: Union[ndarray, SE3, None] = None,
+        base: Union[NDArray, SE3, None] = None,
+        tool: Union[NDArray, SE3, None] = None,
         include_base: bool = True,
     ) -> SE3:
         """
         Forward kinematics
 
-        :param q: Joint coordinates
-        :type q: ArrayLike
-        :param base: base transform, optional
-        :param tool: tool transform, optional
-
-        :return: The transformation matrix representing the pose of the
-            end-effector
+        ``T = ets.fkine(q)`` evaluates forward kinematics for the ets at
+        joint configuration ``q``.
 
-        - ``T = ets.fkine(q)`` evaluates forward kinematics for the robot at
-          joint configuration ``q``.
         **Trajectory operation**:
         If ``q`` has multiple rows (mxn), it is considered a trajectory and the
         result is an ``SE3`` instance with ``m`` values.
-        .. note::
-            - The robot's base tool transform, if set, is incorporated
-              into the result.
-            - A tool transform, if provided, is incorporated into the result.
-            - Works from the end-effector link to the base
-        :references:
-            - Kinematic Derivatives using the Elementary Transform
-              Sequence, J. Haviland and P. Corke
-        """
+
+        Attributes
+        ----------
+        q
+            Joint coordinates
+        base
+            A base transform applied before the ETS
+        tool
+            tool transform, optional
+        include_base
+            set to True if the base transform should be considered
+
+        Returns
+        -------
+            The transformation matrix representing the pose of the
+            end-effector
+
+        Examples
+        --------
+        The following example makes a ``panda`` robot object, gets the ets, and
+        solves for the forward kinematics at the listed configuration.
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+
+        Notes
+        -----
+        - A tool transform, if provided, is incorporated into the result.
+        - Works from the end-effector link to the base
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+
+        """  # noqa
 
         ret = SE3.Empty()
         fk = self.eval(q, base, tool, include_base)
 
         if fk.dtype == "O":
             # symbolic
-            fk = array(simplify(fk))
+            fk = np.array(simplify(fk))
 
         if fk.ndim == 3:
             for T in fk:
                 ret.append(SE3(T, check=False))  # type: ignore
         else:
             ret = SE3(fk, check=False)
 
         return ret
 
     def eval(
         self,
         q: ArrayLike,
-        base: Union[ndarray, SE3, None] = None,
-        tool: Union[ndarray, SE3, None] = None,
+        base: Union[NDArray, SE3, None] = None,
+        tool: Union[NDArray, SE3, None] = None,
         include_base: bool = True,
-    ) -> ndarray:
+    ) -> NDArray:
         """
         Forward kinematics
 
-        :param q: Joint coordinates
-        :type q: ArrayLike
-        :param base: base transform, optional
-        :param tool: tool transform, optional
-
-        :return: The transformation matrix representing the pose of the
-            end-effector
+        ``T = ets.fkine(q)`` evaluates forward kinematics for the ets at
+        joint configuration ``q``.
 
-        - ``T = ets.fkine(q)`` evaluates forward kinematics for the robot at
-          joint configuration ``q``.
         **Trajectory operation**:
         If ``q`` has multiple rows (mxn), it is considered a trajectory and the
         result is an ``SE3`` instance with ``m`` values.
-        .. note::
-            - The robot's base tool transform, if set, is incorporated
-              into the result.
-            - A tool transform, if provided, is incorporated into the result.
-            - Works from the end-effector link to the base
-        :references:
-            - Kinematic Derivatives using the Elementary Transform
-              Sequence, J. Haviland and P. Corke
-        """
+
+        Attributes
+        ----------
+        q
+            Joint coordinates
+        base
+            A base transform applied before the ETS
+        tool
+            tool transform, optional
+        include_base
+            set to True if the base transform should be considered
+        Returns
+        -------
+            The transformation matrix representing the pose of the
+            end-effector
+
+        Examples
+        --------
+        The following example makes a ``panda`` robot object, gets the ets, and
+        solves for the forward kinematics at the listed configuration.
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+
+        Notes
+        -----
+        - A tool transform, if provided, is incorporated into the result.
+        - Works from the end-effector link to the base
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+
+        """  # noqa
 
         try:
             return ETS_fkine(self._fknm, q, base, tool, include_base)
         except BaseException:
             pass
 
         q = getmatrix(q, (None, None))
         l, _ = q.shape  # type: ignore
         end = self.data[-1]
 
         if isinstance(tool, SE3):
-            tool = array(tool.A)
+            tool = np.array(tool.A)
 
         if isinstance(base, SE3):
-            base = array(base.A)
+            base = np.array(base.A)
 
         if base is None:
             bases = None
-        elif array_equal(base, eye(3)):  # pragma: nocover
+        elif np.array_equal(base, np.eye(3)):  # pragma: nocover
             bases = None
         else:  # pragma: nocover
             bases = base
 
         if tool is None:
             tools = None
-        elif array_equal(tool, eye(3)):  # pragma: nocover
+        elif np.array_equal(tool, np.eye(3)):  # pragma: nocover
             tools = None
         else:  # pragma: nocover
             tools = tool
 
         if l > 1:
-            T = zeros((l, 4, 4), dtype=object)
+            T = np.zeros((l, 4, 4), dtype=object)
         else:
-            T = zeros((4, 4), dtype=object)
+            T = np.zeros((4, 4), dtype=object)
 
         # Tk = None
 
         for k, qk in enumerate(q):  # type: ignore
             link = end  # start with last link
 
             jindex = 0 if link.jindex is None and link.isjoint else link.jindex
@@ -962,84 +1101,99 @@
                 jindex = 0 if link.jindex is None and link.isjoint else link.jindex
                 A = link.A(qk[jindex])
 
                 if A is not None:
                     Tk = A @ Tk
 
             # add base transform if it is set
-            if include_base == True and bases is not None:
+            if include_base is True and bases is not None:
                 Tk = bases @ Tk
 
             # append
             if l > 1:
                 T[k, :, :] = Tk
             else:
                 T = Tk
 
         return T
 
     def jacob0(
         self,
         q: ArrayLike,
-        tool: Union[ndarray, SE3, None] = None,
-    ) -> ndarray:
+        tool: Union[NDArray, SE3, None] = None,
+    ) -> NDArray:
         r"""
-        Jacobian in base frame
-        :param q: Joint coordinate vector
-        :type q: ArrayLike
-        :param tool: a static tool transformation matrix to apply to the
+        Manipulator geometric Jacobian in the base frame
+
+        ``robot.jacobo(q)`` is the manipulator Jacobian matrix which maps
+        joint  velocity to end-effector spatial velocity expressed in the
+        base frame.
+
+        End-effector spatial velocity :math:`\nu = (v_x, v_y, v_z, \omega_x, \omega_y, \omega_z)^T`
+        is related to joint velocity by :math:`{}^{E}\!\nu = \mathbf{J}_m(q) \dot{q}`.
+
+        Parameters
+        ----------
+        q
+            Joint coordinate vector
+        tool
+            a static tool transformation matrix to apply to the
             end of end, defaults to None
-        :return J: Manipulator Jacobian in the base frame
-        ``jacob0(q)`` is the ETS Jacobian matrix which maps joint
-        velocity to spatial velocity in the {0} frame.
-        End-effector spatial velocity :math:`\nu = (v_x, v_y, v_z, \omega_x,
-        \omega_y, \omega_z)^T` is related to joint velocity by
-        :math:`{}^{e}\nu = {}^{e}\mathbf{J}_0(q) \dot{q}`.
-        If ``ets.eval(q)`` is already computed it can be passed in as ``T`` to
-        reduce computation time.
-        An ETS represents the relative pose from the {0} frame to the end frame
-        {e}. This is the composition of mAny relative poses, some constant and
-        some functions of the joint variables, which we can write as
-        :math:`\mathbf{E}(q)`.
-        .. math::
-            {}^0 T_e = \mathbf{E}(q) \in \mbox{SE}(3)
-        The temporal derivative of this is the spatial
-        velocity :math:`\nu` which is a 6-vector is related to the rate of
-        change of joint coordinates by the Jacobian matrix.
-        .. math::
-           {}^0 \nu = {}^0 \mathbf{J}(q) \dot{q} \in \mathbb{R}^6
-        This velocity can be expressed relative to the {0} frame or the {e}
-        frame.
-        :references:
-            - `Kinematic Derivatives using the Elementary Transform Sequence, J. Haviland and P. Corke <https://arxiv.org/abs/2010.08696>`_
-        :seealso: :func:`jacobe`, :func:`hessian0`
+
+        Returns
+        -------
+        J0
+            Manipulator Jacobian in the base frame
+
+        Examples
+        --------
+        The following example makes a ``Puma560`` robot object, and solves for the
+        base-frame Jacobian at the zero joint angle configuration
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.Puma560().ets()
+        >>> puma.jacob0([0, 0, 0, 0, 0, 0])
+
+        Notes
+        -----
+        - This is the geometric Jacobian as described in texts by
+            Corke, Spong etal., Siciliano etal.  The end-effector velocity is
+            described in terms of translational and angular velocity, not a
+            velocity twist as per the text by Lynch & Park.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+
         """  # noqa
 
         # Use c extension
         try:
             return ETS_jacob0(self._fknm, q, tool)
         except TypeError:
             pass
 
         # Otherwise use Python
         if tool is None:
-            tools = eye(4)
+            tools = np.eye(4)
         elif isinstance(tool, SE3):
-            tools = array(tool.A)
+            tools = np.array(tool.A)
         else:  # pragma: nocover
-            tools = eye(4)
+            tools = np.eye(4)
 
         q = getvector(q, None)
 
         T = self.eval(q, include_base=False) @ tools
 
-        U = eye(4)
+        U = np.eye(4)
         j = 0
-        J = zeros((6, self.n), dtype="object")
-        zero = array([0, 0, 0])
+        J = np.zeros((6, self.n), dtype="object")
+        zero = np.array([0, 0, 0])
         end = self.data[-1]
 
         for link in self.data:
             jindex = 0 if link.jindex is None and link.isjoint else link.jindex
 
             if link.isjoint:
                 U = U @ link.A(q[jindex])  # type: ignore
@@ -1086,453 +1240,581 @@
                     U = U @ A
 
         return J
 
     def jacobe(
         self,
         q: ArrayLike,
-        tool: Union[ndarray, SE3, None] = None,
-    ) -> ndarray:
+        tool: Union[NDArray, SE3, None] = None,
+    ) -> NDArray:
         r"""
         Manipulator geometric Jacobian in the end-effector frame
 
-        :param q: Joint coordinate vector
-        :type q: ArrayLike
-        :param tool: a static tool transformation matrix to apply to the
-            end of end, defaults to None
-
-        :return J: Manipulator Jacobian in the end-effector frame
+        ``robot.jacobe(q)`` is the manipulator Jacobian matrix which maps
+        joint  velocity to end-effector spatial velocity expressed in the
+        ``end`` frame.
 
-        - ``ets.jacobe(q)`` is the manipulator Jacobian matrix which maps
-          joint  velocity to end-effector spatial velocity expressed in the
-          end-effector frame.
         End-effector spatial velocity :math:`\nu = (v_x, v_y, v_z, \omega_x, \omega_y, \omega_z)^T`
         is related to joint velocity by :math:`{}^{E}\!\nu = \mathbf{J}_m(q) \dot{q}`.
 
-        .. warning:: This is the **geometric Jacobian** as described in texts by
+        Parameters
+        ----------
+        q
+            Joint coordinate vector
+        end
+            the particular link or gripper whose velocity the Jacobian
+            describes, defaults to the end-effector if only one is present
+        start
+            the link considered as the base frame, defaults to the robots's base frame
+        tool
+            a static tool transformation matrix to apply to the
+            end of end, defaults to None
+
+        Returns
+        -------
+        Je
+            Manipulator Jacobian in the ``end`` frame
+
+        Examples
+        --------
+        The following example makes a ``Puma560`` robot object, and solves for the
+        end-effector frame Jacobian at the zero joint angle configuration
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.Puma560().ets()
+        >>> puma.jacobe([0, 0, 0, 0, 0, 0])
+
+        Notes
+        -----
+        - This is the geometric Jacobian as described in texts by
             Corke, Spong etal., Siciliano etal.  The end-effector velocity is
             described in terms of translational and angular velocity, not a
             velocity twist as per the text by Lynch & Park.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+
         """  # noqa
 
         # Use c extension
         try:
             return ETS_jacobe(self._fknm, q, tool)
         except TypeError:
             pass
 
         T = self.eval(q, tool=tool, include_base=False)
         return tr2jac(T.T) @ self.jacob0(q, tool=tool)
 
     def hessian0(
         self,
         q: Union[ArrayLike, None] = None,
-        J0: Union[ndarray, None] = None,
-        tool: Union[ndarray, SE3, None] = None,
-    ) -> ndarray:
+        J0: Union[NDArray, None] = None,
+        tool: Union[NDArray, SE3, None] = None,
+    ) -> NDArray:
         r"""
         Manipulator Hessian
 
         The manipulator Hessian tensor maps joint acceleration to end-effector
-        spatial acceleration, expressed in the world-coordinate frame. This
-        function calulcates this based on the ETS of the robot.
-        
-        One of J0 or q
+        spatial acceleration, expressed in the base frame. This
+        function calulcates this based on the ETS of the robot. One of J0 or q
         is required. Supply J0 if already calculated to save computation time
 
-        :param q: The joint angles/configuration of the robot.
-        :type q: ArrayLike
-        :param J0: The manipulator Jacobian in the 0 frame
-        :param tool: a static tool transformation matrix to apply to the
-            end frame, defaults to None
+        Parameters
+        ----------
+        q
+            The joint angles/configuration of the robot (Optional,
+            if not supplied will use the stored q values).
+        J0
+            The manipulator Jacobian in the base frame
+        tool
+            a static tool transformation matrix to apply to the
+            end of end, defaults to None
 
-        :return: The manipulator Hessian in 0 frame
+        Returns
+        -------
+        h0
+            The manipulator Hessian in the base frame
 
+        Synopsis
+        --------
         This method computes the manipulator Hessian in the base frame.  If
         we take the time derivative of the differential kinematic relationship
         .. math::
             \nu    &= \mat{J}(\vec{q}) \dvec{q} \\
             \alpha &= \dmat{J} \dvec{q} + \mat{J} \ddvec{q}
         where
         .. math::
             \dmat{J} = \mat{H} \dvec{q}
         and :math:`\mat{H} \in \mathbb{R}^{6\times n \times n}` is the
         Hessian tensor.
+
         The elements of the Hessian are
         .. math::
             \mat{H}_{i,j,k} =  \frac{d^2 u_i}{d q_j d q_k}
         where :math:`u = \{t_x, t_y, t_z, r_x, r_y, r_z\}` are the elements
         of the spatial velocity vector.
+
         Similarly, we can write
         .. math::
             \mat{J}_{i,j} = \frac{d u_i}{d q_j}
-        :references:
-            - Kinematic Derivatives using the Elementary Transform
-              Sequence, J. Haviland and P. Corke
-        """
+
+        Examples
+        --------
+        The following example makes a ``Panda`` robot object, and solves for the
+        base frame Hessian at the given joint angle configuration
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> panda.hessian0([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        """  # noqa
 
         # Use c extension
         try:
             return ETS_hessian0(self._fknm, q, J0, tool)
         except TypeError:
             pass
 
         def cross(a, b):
             x = a[1] * b[2] - a[2] * b[1]
             y = a[2] * b[0] - a[0] * b[2]
             z = a[0] * b[1] - a[1] * b[0]
-            return array([x, y, z])
+            return np.array([x, y, z])
 
         n = self.n
 
         if J0 is None:
             q = getvector(q, None)
             J0 = self.jacob0(q, tool=tool)
         else:
             verifymatrix(J0, (6, self.n))
 
-        H = zeros((n, 6, n))
+        H = np.zeros((n, 6, n))
 
         for j in range(n):
             for i in range(j, n):
-
                 H[j, :3, i] = cross(J0[3:, j], J0[:3, i])
                 H[j, 3:, i] = cross(J0[3:, j], J0[3:, i])
 
                 if i != j:
                     H[i, :3, j] = H[j, :3, i]
 
         return H
 
     def hessiane(
         self,
         q: Union[ArrayLike, None] = None,
-        Je: Union[ndarray, None] = None,
-        tool: Union[ndarray, SE3, None] = None,
-    ) -> ndarray:
+        Je: Union[NDArray, None] = None,
+        tool: Union[NDArray, SE3, None] = None,
+    ) -> NDArray:
         r"""
         Manipulator Hessian
 
         The manipulator Hessian tensor maps joint acceleration to end-effector
-        spatial acceleration, expressed in the world-coordinate frame. This
-        function calulcates this based on the ETS of the robot.
-        
-        One of Je or q
-        is required. Supply Je if already calculated to save computation time
-
-        :param q: The joint angles/configuration of the robot.
-        :type q: ArrayLike
-        :param Je: The manipulator Jacobian in the ee frame
-        :param tool: a static tool transformation matrix to apply to the
-            end frame, defaults to None
+        spatial acceleration, expressed in the end-effector coordinate frame. This
+        function calulcates this based on the ETS of the robot. One of J0 or q
+        is required. Supply J0 if already calculated to save computation time
 
-        :return: The manipulator Hessian in ee frame
+        Parameters
+        ----------
+        q
+            The joint angles/configuration of the robot (Optional,
+            if not supplied will use the stored q values).
+        J0
+            The manipulator Jacobian in the end-effector frame
+        tool
+            a static tool transformation matrix to apply to the
+            end of end, defaults to None
 
-        This method computes the manipulator Hessian in the ee frame.  If
+        Returns
+        -------
+        he
+            The manipulator Hessian in end-effector frame
+
+        Synopsis
+        --------
+        This method computes the manipulator Hessian in the end-effector frame.  If
         we take the time derivative of the differential kinematic relationship
         .. math::
             \nu    &= \mat{J}(\vec{q}) \dvec{q} \\
             \alpha &= \dmat{J} \dvec{q} + \mat{J} \ddvec{q}
         where
         .. math::
             \dmat{J} = \mat{H} \dvec{q}
         and :math:`\mat{H} \in \mathbb{R}^{6\times n \times n}` is the
         Hessian tensor.
+
         The elements of the Hessian are
         .. math::
             \mat{H}_{i,j,k} =  \frac{d^2 u_i}{d q_j d q_k}
         where :math:`u = \{t_x, t_y, t_z, r_x, r_y, r_z\}` are the elements
         of the spatial velocity vector.
+
         Similarly, we can write
         .. math::
             \mat{J}_{i,j} = \frac{d u_i}{d q_j}
-        :references:
-            - Kinematic Derivatives using the Elementary Transform
-              Sequence, J. Haviland and P. Corke
-        """
+
+        Examples
+        --------
+        The following example makes a ``Panda`` robot object, and solves for the
+        end-effector frame Hessian at the given joint angle configuration
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> panda.hessiane([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        """  # noqa
 
         # Use c extension
         try:
             return ETS_hessiane(self._fknm, q, Je, tool)
         except TypeError:
             pass
 
         def cross(a, b):
             x = a[1] * b[2] - a[2] * b[1]
             y = a[2] * b[0] - a[0] * b[2]
             z = a[0] * b[1] - a[1] * b[0]
-            return array([x, y, z])
+            return np.array([x, y, z])
 
         n = self.n
 
         if Je is None:
             q = getvector(q, None)
             Je = self.jacobe(q, tool=tool)
         else:
             verifymatrix(Je, (6, self.n))
 
-        H = zeros((n, 6, n))
+        H = np.zeros((n, 6, n))
 
         for j in range(n):
             for i in range(j, n):
-
                 H[j, :3, i] = cross(Je[3:, j], Je[:3, i])
                 H[j, 3:, i] = cross(Je[3:, j], Je[3:, i])
 
                 if i != j:
                     H[i, :3, j] = H[j, :3, i]
 
         return H
 
     def jacob0_analytical(
         self,
         q: ArrayLike,
         representation: str = "rpy/xyz",
-        tool: Union[ndarray, SE3, None] = None,
+        tool: Union[NDArray, SE3, None] = None,
     ):
         r"""
         Manipulator analytical Jacobian in the base frame
 
-        :param q: Joint coordinate vector
-        :type q: ArrayLike
-        :param tool: a static tool transformation matrix to apply to the
+        ``robot.jacob0_analytical(q)`` is the manipulator Jacobian matrix which maps
+        joint  velocity to end-effector spatial velocity expressed in the
+        base frame.
+
+        Parameters
+        ----------
+        q
+            Joint coordinate vector
+        representation
+            angular representation
+        tool
+            a static tool transformation matrix to apply to the
             end of end, defaults to None
-        :param representation: describes the rotational representation
 
-        :return J: Manipulator Jacobian in the base frame
+        Returns
+        -------
+        jacob0
+            Manipulator Jacobian in the base frame
 
+        Synopsis
+        --------
         End-effector spatial velocity :math:`\nu = (v_x, v_y, v_z, \omega_x, \omega_y, \omega_z)^T`
         is related to joint velocity by :math:`{}^{E}\!\nu = \mathbf{J}_m(q) \dot{q}`.
 
-        ==================   ==================================
-        ``representation``          Rotational representation
-        ==================   ==================================
-        ``'rpy/xyz'``        RPY angular rates in XYZ order
-        ``'rpy/zyx'``        RPY angular rates in XYZ order
-        ``'eul'``            Euler angular rates in ZYZ order
-        ``'exp'``            exponential coordinate rates
-        ==================   ==================================
+        |``representation``   |       Rotational representation     |
+        |---------------------|-------------------------------------|
+        |``'rpy/xyz'``        |   RPY angular rates in XYZ order    |
+        |``'rpy/zyx'``        |   RPY angular rates in XYZ order    |
+        |``'eul'``            |   Euler angular rates in ZYZ order  |
+        |``'exp'``            |   exponential coordinate rates      |
+
+        Examples
+        --------
+        Makes a robot object and computes the analytic Jacobian for the given
+        joint configuration
 
-        Example:
         .. runblock:: pycon
-            >>> import roboticstoolbox as rtb
-            >>> puma = rtb.models.ETS.Puma560()
-            >>> puma.jacob0_analytical([0, 0, 0, 0, 0, 0])
+        >>> import roboticstoolbox as rtb
+        >>> puma = rtb.models.ETS.Puma560().ets()
+        >>> puma.jacob0_analytical([0, 0, 0, 0, 0, 0])
 
         """  # noqa
 
         T = self.eval(q, tool=tool)
         J = self.jacob0(q, tool=tool)
         A = rotvelxform(t2r(T), full=True, inverse=True, representation=representation)
         return A @ J
 
-    def jacobm(self, q: ArrayLike) -> ndarray:
+    def jacobm(self, q: ArrayLike) -> NDArray:
         r"""
-        Calculates the manipulability Jacobian. This measure relates the rate
-        of change of the manipulability to the joint velocities of the robot.
+        The manipulability Jacobian
 
-        :param q: The joint angles/configuration of the robot (Optional,
+        This measure relates the rate of change of the manipulability to the
+        joint velocities of the robot. One of J or q is required. Supply J
+        and H if already calculated to save computation time
+
+        Parameters
+        ----------
+        q
+            The joint angles/configuration of the robot (Optional,
             if not supplied will use the stored q values).
 
-        :return: The manipulability Jacobian
-        :rtype: float ndarray(n)
+        Returns
+        -------
+        jacobm
+            The manipulability Jacobian
 
+        Synopsis
+        --------
         Yoshikawa's manipulability measure
 
         .. math::
 
             m(\vec{q}) = \sqrt{\mat{J}(\vec{q}) \mat{J}(\vec{q})^T}
 
         This method returns its Jacobian with respect to configuration
 
         .. math::
 
             \frac{\partial m(\vec{q})}{\partial \vec{q}}
 
-        :references:
-            - Kinematic Derivatives using the Elementary Transform
-              Sequence, J. Haviland and P. Corke
-        """
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        """  # noqa
 
         J = self.jacob0(q)
         H = self.hessian0(q)
 
         manipulability = self.manipulability(q)
 
         # J = J[axes, :]
         # H = H[:, axes, :]
 
         b = inv(J @ J.T)
-        Jm = zeros((self.n, 1))
+        Jm = np.zeros((self.n, 1))
 
         for i in range(self.n):
             c = J @ H[i, :, :].T
             Jm[i, 0] = manipulability * (c.flatten("F")).T @ b.flatten("F")
 
         return Jm
 
-    def manipulability(self, q, method="yoshikawa"):
+    def manipulability(
+        self,
+        q,
+        method: L["yoshikawa", "minsingular", "invcondition"] = "yoshikawa",
+        axes: Union[L["all", "trans", "rot"], List[bool]] = "all",
+    ):
         """
         Manipulability measure
 
-        :param q: Joint coordinates, one of J or q required
-        :type q: ndarray(n), or ndarray(m,n)
-        :param J: Jacobian in world frame if already computed, one of J or
-            q required
-        :type J: ndarray(6,n)
-        :param method: method to use, "yoshikawa" (default), "condition",
-            "minsingular"  or "asada"
-        :type method: str
-        :param axes: Task space axes to consider: "all" [default],
-            "trans", "rot" or "both"
-        :type axes: str
-        :param kwargs: extra arguments to pass to ``jacob0``
-        :return: manipulability
-        :rtype: float or ndarray(m)
-
-        - ``manipulability(q)`` is the scalar manipulability index
-          for the robot at the joint configuration ``q``.  It indicates
-          dexterity, that is, how well conditioned the robot is for motion
-          with respect to the 6 degrees of Cartesian motion.  The values is
-          zero if the robot is at a singularity.
+        ``manipulability(q)`` is the scalar manipulability index
+        for the ets at the joint configuration ``q``.  It indicates
+        dexterity, that is, how well conditioned the ets is for motion
+        with respect to the 6 degrees of Cartesian motion.  The values is
+        zero if the ets is at a singularity.
+
+        Parameters
+        ----------
+        q
+            Joint coordinates, one of J or q required
+        method
+            method to use, "yoshikawa" (default), "invcondition",
+            "minsingular"
+        axes
+            Task space axes to consider: "all" [default],
+            "trans", or "rot"
+
+        Returns
+        -------
+        manipulability
+            the manipulability metric
+
+        Synopsis
+        --------
 
         Various measures are supported:
 
-        +-------------------+-------------------------------------------------+
         | Measure           |       Description                               |
-        +-------------------+-------------------------------------------------+
+        |-------------------|-------------------------------------------------|
         | ``"yoshikawa"``   | Volume of the velocity ellipsoid, *distance*    |
         |                   | from singularity [Yoshikawa85]_                 |
-        +-------------------+-------------------------------------------------+
         | ``"invcondition"``| Inverse condition number of Jacobian, isotropy  |
         |                   | of the velocity ellipsoid [Klein87]_            |
-        +-------------------+-------------------------------------------------+
         | ``"minsingular"`` | Minimum singular value of the Jacobian,         |
         |                   | *distance*  from singularity [Klein87]_         |
-        +-------------------+-------------------------------------------------+
-        | ``"asada"``       | Isotropy of the task-space acceleration         |
-        |                   | ellipsoid which is a function of the Cartesian  |
-        |                   | inertia matrix which depends on the inertial    |
-        |                   | parameters [Asada83]_                           |
-        +-------------------+-------------------------------------------------+
 
         **Trajectory operation**:
 
         If ``q`` is a matrix (m,n) then the result (m,) is a vector of
         manipulability indices for each joint configuration specified by a row
         of ``q``.
 
-        .. note::
-
-            - Invokes the ``jacob0`` method of the robot if ``J`` is not passed
-            - The "all" option includes rotational and translational
-              dexterity, but this involves adding different units. It can be
-              more useful to look at the translational and rotational
-              manipulability separately.
-            - Examples in the RVC book (1st edition) can be replicated by
-              using the "all" option
-            - Asada's measure requires inertial a robot model with inertial
-              parameters.
-
-        :references:
+        Notes
+        -----
+        - Invokes the ``jacob0`` method of the robot if ``J`` is not passed
+        - The "all" option includes rotational and translational
+            dexterity, but this involves adding different units. It can be
+            more useful to look at the translational and rotational
+            manipulability separately.
+        - Examples in the RVC book (1st edition) can be replicated by
+            using the "all" option
+        - Asada's measure requires inertial a robot model with inertial
+            parameters.
 
+        References
+        ----------
         .. [Yoshikawa85] Manipulability of Robotic Mechanisms. Yoshikawa T.,
                 The International Journal of Robotics Research.
                 1985;4(2):3-9. doi:10.1177/027836498500400201
-        .. [Asada83] A geometrical representation of manipulator dynamics and
-                its application to arm design, H. Asada,
-                Journal of Dynamic Systems, Measurement, and Control,
-                vol. 105, p. 131, 1983.
         .. [Klein87] Dexterity Measures for the Design and Control of
                 Kinematically Redundant Manipulators. Klein CA, Blaho BE.
                 The International Journal of Robotics Research.
                 1987;6(2):72-83. doi:10.1177/027836498700600206
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 7.
 
-        - Robotics, Vision & Control, Chap 8, P. Corke, Springer 2011.
+
+        .. versionchanged:: 1.0.4
+            Removed 'both' option for axes, added a custom list option.
 
         """
 
+        axes_list: List[bool] = []
+
+        if isinstance(axes, list):
+            axes_list = axes
+        elif axes == "all":
+            axes_list = [True, True, True, True, True, True]
+        elif axes.startswith("trans"):
+            axes_list = [True, True, True, False, False, False]
+        elif axes.startswith("rot"):
+            axes_list = [False, False, False, True, True, True]
+        else:
+            raise ValueError("axes must be all, trans, rot or both")
+
         def yoshikawa(robot, J, q, axes, **kwargs):
             J = J[axes, :]
             if J.shape[0] == J.shape[1]:
                 # simplified case for square matrix
                 return abs(det(J))
             else:
                 m2 = det(J @ J.T)
-                return sqrt(abs(m2))
+                return np.sqrt(abs(m2))
 
         def condition(robot, J, q, axes, **kwargs):
             J = J[axes, :]
             return 1 / cond(J)
 
         def minsingular(robot, J, q, axes, **kwargs):
             J = J[axes, :]
             s = svd(J, compute_uv=False)
             return s[-1]  # return last/smallest singular value of J
 
-        def asada(robot, J, q, axes, **kwargs):
-            # dof = np.sum(axes)
-            if matrix_rank(J) < 6:
-                return 0
-            Ji = pinv(J)
-            Mx = Ji.T @ robot.inertia(q) @ Ji
-            d = where(axes)[0]
-            Mx = Mx[d]
-            Mx = Mx[:, d.tolist()]
-            e, _ = eig(Mx)
-            return min(e) / max(e)
-
         # choose the handler function
         if method == "yoshikawa":
             mfunc = yoshikawa
         elif method == "invcondition":
             mfunc = condition
         elif method == "minsingular":
             mfunc = minsingular
-        elif method == "asada":
-            mfunc = asada
         else:
             raise ValueError("Invalid method chosen")
 
-        # q = getmatrix(q, (None, self.n))
-        # w = zeros(q.shape[0])
-        axes = [True, True, True, True, True, True]
-
-        # for k, qk in enumerate(q):
-        J = self.jacob0(q)
-        w = mfunc(self, J, q, axes)
+        # Otherwise use the q vector/matrix
+        q = np.array(getmatrix(q, (None, self.n)))
+        w = np.zeros(q.shape[0])
+
+        for k, qk in enumerate(q):
+            Jk = self.jacob0(qk)
+            w[k] = mfunc(self, Jk, qk, axes_list)
 
-        # if len(w) == 1:
-        #     return w[0]
-        # else:
-        return w
+        if len(w) == 1:
+            return w[0]
+        else:
+            return w
 
-    def partial_fkine0(self, q: ArrayLike, n: int) -> ndarray:
+    def partial_fkine0(self, q: ArrayLike, n: int) -> NDArray:
         r"""
         Manipulator Forward Kinematics nth Partial Derivative
 
-        The manipulator Hessian tensor maps joint acceleration to end-effector
-        spatial acceleration, expressed in the ee frame. This
-        function calulcates this based on the ETS of the robot. One of Je or q
-        is required. Supply Je if already calculated to save computation time
-
-        :param q: The joint angles/configuration of the robot (Optional,
+        This method computes the nth derivative of the forward kinematics where ``n`` is
+        greater than or equal to 3. This is an extension of the differential kinematics
+        where the Jacobian is the first partial derivative and the Hessian is the
+        second.
+
+        Parameters
+        ----------
+        q
+            The joint angles/configuration of the robot (Optional,
             if not supplied will use the stored q values).
-        :type q: ArrayLike
-        :param end: the final link/Gripper which the Hessian represents
-        :param start: the first link which the Hessian represents
-        :param tool: a static tool transformation matrix to apply to the
+        end
+            the final link/Gripper which the Hessian represents
+        start
+            the first link which the Hessian represents
+        tool
+            a static tool transformation matrix to apply to the
             end of end, defaults to None
 
-        :return: The nth Partial Derivative of the forward kinematics
+        Returns
+        -------
+        A
+            The nth Partial Derivative of the forward kinematics
+
+        Examples
+        --------
+        The following example makes a ``Panda`` robot object, and solves for the
+        base-effector frame 4th defivative of the forward kinematics at the given
+        joint angle configuration
 
-        :references:
-            - Kinematic Derivatives using the Elementary Transform
-                Sequence, J. Haviland and P. Corke
-        """
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> panda.partial_fkine0([0, -0.3, 0, -2.2, 0, 2, 0.7854], n=4)
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        """  # noqa
 
         # Calculate the Jacobian and Hessian
         J = self.jacob0(q)
         H = self.hessian0(q)
 
         # A list of derivatives, starting with the jacobian and hessian
         dT = [J, H]
@@ -1541,15 +1823,15 @@
         # Set to the current size of the Hessian
         size = [self.n, 6, self.n]
 
         # An array which keeps track of the index of the partial derivative
         # we are calculating
         # It stores the indices in the order: "j, k, l. m, n, o, ..."
         # where count is extended to match oder of the partial derivative
-        count = array([0, 0])
+        count = np.array([0, 0])
 
         # The order of derivative for which we are calculating
         # The Hessian is the 2nd-order so we start with c = 2
         c = 2
 
         def add_indices(indices, c):
             total = len(indices * 2)
@@ -1594,226 +1876,308 @@
 
         # The partial derivative indices (pdi)
         # the are the pd indices used in the cross products
         pdi = [[0, 0]]
 
         # The length of dT correspods to the number of derivatives we have calculated
         while len(dT) != n:
-
             # Add to the start of the tensor size list
             size.insert(0, self.n)
 
             # Add an axis to the count array
-            count = concatenate(([0], count))
+            count = np.concatenate(([0], count))
 
-            # This variables corresponds to indices within the previous partial derivatives
+            # This variables corresponds to indices within the previous
+            # partial derivatives
             # to be cross prodded
             # The order is: "[j, k, l, m, n, o, ...]"
-            # Although, our partial derivatives have the order: pd[..., o, n, m, l, k, cartesian DoF, j]
-            # For example, consider the Hessian Tensor H[n, 6, n], the index H[k, :, j]. This corrsponds
-            # to the second partial derivative of the kinematics of joint j with respect to joint k.
+            # Although, our partial derivatives have the order:
+            # pd[..., o, n, m, l, k, cartesian DoF, j]
+            # For example, consider the Hessian Tensor H[n, 6, n],
+            # the index H[k, :, j]. This corrsponds
+            # to the second partial derivative of the kinematics of joint j with
+            # respect to joint k.
             indices = add_indices(indices, c)
 
             # This variable corresponds to the indices in Td which corresponds to the
             # partial derivatives we need to use
             pdi = add_pdi(pdi)
 
             c += 1
 
             # Allocate our new partial derivative tensor
-            pd = zeros(size)
+            pd = np.zeros(size)
 
             # We need to loop n^c times
             # There are n^c columns to calculate
             for _ in range(self.n**c):
-
                 # Allocate the rotation and translation components
-                rot = zeros(3)
-                trn = zeros(3)
+                rot = np.zeros(3)
+                trn = np.zeros(3)
 
-                # This loop calculates a single column ([trn, rot]) of the tensor for dT(x)
+                # This loop calculates a single column ([trn, rot])
+                # of the tensor for dT(x)
                 for j in range(len(indices)):
                     pdr0 = dT[pdi[j][0]]
                     pdr1 = dT[pdi[j][1]]
 
                     idx0 = count[indices[j][0]]
                     idx1 = count[indices[j][1]]
 
-                    # This is a list of indices selecting the slices of the previous tensor
-                    idx0_slices = flip(idx0[1:])
-                    idx1_slices = flip(idx1[1:])
+                    # This is a list of indices selecting the slices of the
+                    # previous tensor
+                    idx0_slices = np.flip(idx0[1:])
+                    idx1_slices = np.flip(idx1[1:])
 
-                    # This index selecting the column within the 2d slice of the previous tensor
+                    # This index selecting the column within the 2d slice of the
+                    # previous tensor
                     idx0_n = idx0[0]
                     idx1_n = idx1[0]
 
                     # Use our indices to select the rotational column from pdr0 and pdr1
                     col0_rot = pdr0[(*idx0_slices, slice(3, 6), idx0_n)]
                     col1_rot = pdr1[(*idx1_slices, slice(3, 6), idx1_n)]
 
                     # Use our indices to select the translational column from pdr1
                     col1_trn = pdr1[(*idx1_slices, slice(0, 3), idx1_n)]
 
                     # Perform the cross product as described in the maths above
-                    rot += cross(col0_rot, col1_rot)
-                    trn += cross(col0_rot, col1_trn)
+                    rot += np.cross(col0_rot, col1_rot)
+                    trn += np.cross(col0_rot, col1_trn)
 
-                pd[(*flip(count[1:]), slice(0, 3), count[0])] = trn
-                pd[(*flip(count[1:]), slice(3, 6), count[0])] = rot
+                pd[(*np.flip(count[1:]), slice(0, 3), count[0])] = trn
+                pd[(*np.flip(count[1:]), slice(3, 6), count[0])] = rot
 
                 count[0] += 1
                 for j in range(len(count)):
                     if count[j] == self.n:
                         count[j] = 0
                         if j != len(count) - 1:
                             count[j + 1] += 1
 
             dT.append(pd)
 
         return dT[-1]
 
-    def ik_lm_chan(
+    def ik_LM(
         self,
-        Tep: Union[ndarray, SE3],
-        q0: Union[ndarray, None] = None,
+        Tep: Union[NDArray, SE3],
+        q0: Union[NDArray, None] = None,
         ilimit: int = 30,
         slimit: int = 100,
         tol: float = 1e-6,
-        reject_jl: bool = True,
-        we: Union[ndarray, None] = None,
-        : float = 1.0,
-    ) -> Tuple[ndarray, int, int, int, float]:
-        """
-        Numerical inverse kinematics by Levenberg-Marquadt optimization (Chan's Method)
+        mask: Union[NDArray, None] = None,
+        joint_limits: bool = True,
+        k: float = 1.0,
+        method: L["chan", "wampler", "sugihara"] = "chan",
+    ) -> Tuple[NDArray, int, int, int, float]:
+        r"""
+        Fast levenberg-Marquadt Numerical Inverse Kinematics Solver
 
-        :param Tep: The desired end-effector pose or pose trajectory
-        :param q0: initial joint configuration (default to random valid joint
-            configuration contrained by the joint limits of the robot)
-        :param ilimit: maximum number of iterations per search
-        :param slimit: maximum number of search attempts
-        :param tol: final error tolerance
-        :param reject_jl: constrain the solution to being within the joint limits of
-            the robot (reject solution with invalid joint configurations and perfrom
-            another search up to the slimit)
-        :param we: a mask vector which weights the end-effector error priority.
-            Corresponds to translation in X, Y and Z and rotation about X, Y and Z
-            respectively
-        :param : value of lambda for the damping matrix Wn
+        A method which provides functionality to perform numerical inverse kinematics (IK)
+        using the Levemberg-Marquadt method. This
+        is a fast solver implemented in C++.
+
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
+
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose
+        q0
+            The initial joint coordinate vector
+        ilimit
+            How many iterations are allowed within a search before a new search
+            is started
+        slimit
+            How many searches are allowed before being deemed unsuccessful
+        tol
+            Maximum allowed residual error E
+        mask
+            A 6 vector which assigns weights to Cartesian degrees-of-freedom
+            error priority
+        joint_limits
+            Reject solutions with joint limit violations
+        seed
+            A seed for the private RNG used to generate random joint coordinate
+            vectors
+        k
+            Sets the gain value for the damping matrix Wn in the next iteration. See
+            synopsis
+        method
+            One of "chan", "sugihara" or "wampler". Defines which method is used
+            to calculate the damping matrix Wn in the ``step`` method
+
+        Synopsis
+        --------
+        The operation is defined by the choice of the ``method`` kwarg.
 
-        :return: inverse kinematic solution
-        :rtype: tuple (q, success, iterations, searches, residual)
+        The step is deined as
 
-        ``sol = ets.ik_lm_chan(Tep)`` are the joint coordinates (n) corresponding
-        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
-        This method can be used for robots with any number of degrees of freedom.
-        The return value ``sol`` is a tuple with elements:
+        .. math::
 
-        ============    ==========  ===============================================
-        Element         Type        Description
-        ============    ==========  ===============================================
-        ``q``           ndarray(n)  joint coordinates in units of radians or metres
-        ``success``     int         whether a solution was found
-        ``iterations``  int         total number of iterations
-        ``searches``    int         total number of searches
-        ``residual``    float       final value of cost function
-        ============    ==========  ===============================================
+            \vec{q}_{k+1}
+            &=
+            \vec{q}_k +
+            \left(
+                \mat{A}_k
+            \right)^{-1}
+            \bf{g}_k \\
+            %
+            \mat{A}_k
+            &=
+            {\mat{J}(\vec{q}_k)}^\top
+            \mat{W}_e \
+            {\mat{J}(\vec{q}_k)}
+            +
+            \mat{W}_n
+
+        where :math:`\mat{W}_n = \text{diag}(\vec{w_n})(\vec{w_n} \in \mathbb{R}^n_{>0})` is a
+        diagonal damping matrix. The damping matrix ensures that :math:`\mat{A}_k` is
+        non-singular and positive definite. The performance of the LM method largely depends
+        on the choice of :math:`\mat{W}_n`.
 
-        If ``success == 0`` the ``q`` values will be valid numbers, but the
-        solution will be in error.  The amount of error is indicated by
-        the ``residual``.
+        *Chan's Method*
+
+        Chan proposed
 
-        **Joint Limits**:
+        .. math::
 
-        ``sol = robot.ikine_LM(T, slimit=100)`` which is the deafualt for this method.
-        The solver will initialise a solution attempt with a random valid q0 and
-        perform a maximum of ilimit steps within this attempt. If a solution is not
-        found, this process is repeated up to slimit times.
-
-        **Global search**:
-
-        ``sol = robot.ikine_LM(T, reject_jl=True)`` is the deafualt for this method.
-        By setting reject_jl to True, the solver will discard any solution which
-        violates the defined joint limits of the robot. The solver will then
-        re-initialise with a new random q0 and repeat the process up to slimit times.
-        Note that finding a solution with valid joint coordinates takes longer than
-        without.
-
-        **Underactuated robots:**
-
-        For the case where the manipulator has fewer than 6 DOF the
-        solution space has more dimensions than can be spanned by the
-        manipulator joint coordinates.
-
-        In this case we specify the ``we`` option where the ``we`` vector
-        (6) specifies the Cartesian DOF (in the wrist coordinate frame) that
-        will be ignored in reaching a solution.  The we vector has six
-        elements that correspond to translation in X, Y and Z, and rotation
-        about X, Y and Z respectively. The value can be 0 (for ignore)
-        or above to assign a priority relative to other Cartesian DoF. The number
-        of non-zero elements must equal the number of manipulator DOF.
+            \mat{W}_n
+            =
+             E_k \mat{1}_n
 
-        For example when using a 3 DOF manipulator tool orientation might
-        be unimportant, in which case use the option ``we=[1, 1, 1, 0, 0, 0]``.
+        where  is a constant which reportedly does not have much influence on performance.
+        Use the kwarg `k` to adjust the weighting term .
 
+        *Sugihara's Method*
 
+        Sugihara proposed
 
-        .. note::
+        .. math::
 
-            - See `Toolbox kinematics wiki page
-                <https://github.com/petercorke/robotics-toolbox-python/wiki/Kinematics>`_
-            - Implements a Levenberg-Marquadt variable-damping solver.
-            - The tolerance is computed on the norm of the error between
-                current and desired tool pose.  This norm is computed from
-                distances and angles without any kind of weighting.
-            - The inverse kinematic solution is generally not unique, and
-                depends on the initial guess ``q0``.
+            \mat{W}_n
+            =
+            E_k \mat{1}_n + \text{diag}(\hat{\vec{w}}_n)
+
+        where :math:`\hat{\vec{w}}_n \in \mathbb{R}^n`, :math:`\hat{w}_{n_i} = l^2 \sim 0.01 l^2`,
+        and :math:`l` is the length of a typical link within the manipulator. We provide the
+        variable `k` as a kwarg to adjust the value of :math:`w_n`.
+
+        *Wampler's Method*
+
+        Wampler proposed :math:`\vec{w_n}` to be a constant. This is set through the `k` kwarg.
+
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_LM` method.
 
-        :references:
-            TODO
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ikine_LM(Tep)
+
+        Notes
+        -----
+        The value for the ``k`` kwarg will depend on the ``method`` chosen and the arm you are
+        using. Use the following as a rough guide ``chan, k = 1.0 - 0.01``,
+        ``wampler, k = 0.01 - 0.0001``, and ``sugihara, k = 0.1 - 0.0001``
+
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        This class supports null-space motion to assist with maximising manipulability and
+        avoiding joint limits. These are enabled by setting kq and km to non-zero values.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        ik_NR
+            A fast numerical inverse kinematics solver using Newton-Raphson optimisation
+        ik_GN
+            A fast numerical inverse kinematics solver using Gauss-Newton optimisation
 
-        :seealso:
-            TODO
-        """
 
-        return IK_LM_Chan(self._fknm, Tep, q0, ilimit, slimit, tol, reject_jl, we, )
+        .. versionchanged:: 1.0.4
+            Merged the Levemberg-Marquadt IK solvers into the ik_LM method
 
-    def ik_lm_wampler(
+        """  # noqa
+
+        return IK_LM_c(
+            self._fknm, Tep, q0, ilimit, slimit, tol, joint_limits, mask, k, method
+        )
+
+    def ik_NR(
         self,
-        Tep: Union[ndarray, SE3],
-        q0: Union[ndarray, None] = None,
+        Tep: Union[NDArray, SE3],
+        q0: Union[NDArray, None] = None,
         ilimit: int = 30,
         slimit: int = 100,
         tol: float = 1e-6,
-        reject_jl: bool = True,
-        we: Union[ndarray, None] = None,
-        : float = 1.0,
-    ) -> Tuple[ndarray, int, int, int, float]:
-        """
-        Numerical inverse kinematics by Levenberg-Marquadt optimization (Chan's Method)
+        mask: Union[NDArray, None] = None,
+        joint_limits: bool = True,
+        pinv: int = True,
+        pinv_damping: float = 0.0,
+    ) -> Tuple[NDArray, int, int, int, float]:
+        r"""
+        Fast numerical inverse kinematics using Newton-Raphson optimization
 
-        :param Tep: The desired end-effector pose or pose trajectory
-        :param q0: initial joint configuration (default to random valid joint
+        ``sol = ets.ik_NR(Tep)`` are the joint coordinates (n) corresponding
+        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
+        This method can be used for robots with any number of degrees of freedom. This
+        is a fast solver implemented in C++.
+
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
+
+        Note
+        ----
+        When using this method with redundant robots (>6 DoF), ``pinv`` must be set to ``True``
+
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose or pose trajectory
+        q0
+            initial joint configuration (default to random valid joint
             configuration contrained by the joint limits of the robot)
-        :param ilimit: maximum number of iterations per search
-        :param slimit: maximum number of search attempts
-        :param tol: final error tolerance
-        :param reject_jl: constrain the solution to being within the joint limits of
-            the robot (reject solution with invalid joint configurations and perfrom
-            another search up to the slimit)
-        :param we: a mask vector which weights the end-effector error priority.
+        ilimit
+            maximum number of iterations per search
+        slimit
+            maximum number of search attempts
+        tol
+            final error tolerance
+        mask
+            a mask vector which weights the end-effector error priority.
             Corresponds to translation in X, Y and Z and rotation about X, Y and Z
             respectively
-        :param : value of lambda for the damping matrix Wn
-
-        :return: inverse kinematic solution
-        :rtype: tuple (q, success, iterations, searches, residual)
+        joint_limits
+            constrain the solution to being within the joint limits of
+            the robot (reject solution with invalid joint configurations and perfrom
+            another search up to the slimit)
+        pinv
+            Use the psuedo-inverse instad of the normal matrix inverse
+        pinv_damping
+            Damping factor for the psuedo-inverse
+
+        Returns
+        -------
+        sol
+            tuple (q, success, iterations, searches, residual)
 
-        ``sol = ets.ik_lm_chan(Tep)`` are the joint coordinates (n) corresponding
-        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
-        This method can be used for robots with any number of degrees of freedom.
         The return value ``sol`` is a tuple with elements:
 
         ============    ==========  ===============================================
         Element         Type        Description
         ============    ==========  ===============================================
         ``q``           ndarray(n)  joint coordinates in units of radians or metres
         ``success``     int         whether a solution was found
@@ -1822,103 +2186,126 @@
         ``residual``    float       final value of cost function
         ============    ==========  ===============================================
 
         If ``success == 0`` the ``q`` values will be valid numbers, but the
         solution will be in error.  The amount of error is indicated by
         the ``residual``.
 
-        **Joint Limits**:
-
-        ``sol = robot.ikine_LM(T, slimit=100)`` which is the deafualt for this method.
-        The solver will initialise a solution attempt with a random valid q0 and
-        perform a maximum of ilimit steps within this attempt. If a solution is not
-        found, this process is repeated up to slimit times.
-
-        **Global search**:
-
-        ``sol = robot.ikine_LM(T, reject_jl=True)`` is the deafualt for this method.
-        By setting reject_jl to True, the solver will discard any solution which
-        violates the defined joint limits of the robot. The solver will then
-        re-initialise with a new random q0 and repeat the process up to slimit times.
-        Note that finding a solution with valid joint coordinates takes longer than
-        without.
-
-        **Underactuated robots:**
-
-        For the case where the manipulator has fewer than 6 DOF the
-        solution space has more dimensions than can be spanned by the
-        manipulator joint coordinates.
-
-        In this case we specify the ``we`` option where the ``we`` vector
-        (6) specifies the Cartesian DOF (in the wrist coordinate frame) that
-        will be ignored in reaching a solution.  The we vector has six
-        elements that correspond to translation in X, Y and Z, and rotation
-        about X, Y and Z respectively. The value can be 0 (for ignore)
-        or above to assign a priority relative to other Cartesian DoF. The number
-        of non-zero elements must equal the number of manipulator DOF.
-
-        For example when using a 3 DOF manipulator tool orientation might
-        be unimportant, in which case use the option ``we=[1, 1, 1, 0, 0, 0]``.
-
+        Synopsis
+        --------
+        Each iteration uses the Newton-Raphson optimisation method
 
+        .. math::
 
-        .. note::
+            \vec{q}_{k+1} = \vec{q}_k + {^0\mat{J}(\vec{q}_k)}^{-1} \vec{e}_k
 
-            - See `Toolbox kinematics wiki page
-                <https://github.com/petercorke/robotics-toolbox-python/wiki/Kinematics>`_
-            - Implements a Levenberg-Marquadt variable-damping solver.
-            - The tolerance is computed on the norm of the error between
-                current and desired tool pose.  This norm is computed from
-                distances and angles without any kind of weighting.
-            - The inverse kinematic solution is generally not unique, and
-                depends on the initial guess ``q0``.
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_GN` method.
 
-        :references:
-            TODO
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ik_NR(Tep)
+
+        Notes
+        -----
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        ik_LM
+            A fast numerical inverse kinematics solver using Levenberg-Marquadt optimisation
+        ik_GN
+            A fast numerical inverse kinematics solver using Gauss-Newton optimisation
 
-        :seealso:
-            TODO
-        """
+        """  # noqa
 
-        return IK_LM_Wampler(self._fknm, Tep, q0, ilimit, slimit, tol, reject_jl, we, )
+        return IK_NR_c(
+            self._fknm,
+            Tep,
+            q0,
+            ilimit,
+            slimit,
+            tol,
+            joint_limits,
+            mask,
+            pinv,
+            pinv_damping,
+        )
 
-    def ik_lm_sugihara(
+    def ik_GN(
         self,
-        Tep: Union[ndarray, SE3],
-        q0: Union[ndarray, None] = None,
+        Tep: Union[NDArray, SE3],
+        q0: Union[NDArray, None] = None,
         ilimit: int = 30,
         slimit: int = 100,
         tol: float = 1e-6,
-        reject_jl: bool = True,
-        we: Union[ndarray, None] = None,
-        : float = 1.0,
-    ) -> Tuple[ndarray, int, int, int, float]:
-        """
-        Numerical inverse kinematics by Levenberg-Marquadt optimization (Chan's Method)
+        mask: Union[NDArray, None] = None,
+        joint_limits: bool = True,
+        pinv: int = True,
+        pinv_damping: float = 0.0,
+    ) -> Tuple[NDArray, int, int, int, float]:
+        r"""
+        Fast numerical inverse kinematics by Gauss-Newton optimization
 
-        :param Tep: The desired end-effector pose or pose trajectory
-        :param q0: initial joint configuration (default to random valid joint
+        ``sol = ets.ik_GN(Tep)`` are the joint coordinates (n) corresponding
+        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
+        This method can be used for robots with any number of degrees of freedom. This
+        is a fast solver implemented in C++.
+
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
+
+        Note
+        ----
+        When using this method with redundant robots (>6 DoF), ``pinv`` must be set to ``True``
+
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose or pose trajectory
+        q0
+            initial joint configuration (default to random valid joint
             configuration contrained by the joint limits of the robot)
-        :param ilimit: maximum number of iterations per search
-        :param slimit: maximum number of search attempts
-        :param tol: final error tolerance
-        :param reject_jl: constrain the solution to being within the joint limits of
-            the robot (reject solution with invalid joint configurations and perfrom
-            another search up to the slimit)
-        :param we: a mask vector which weights the end-effector error priority.
+        ilimit
+            maximum number of iterations per search
+        slimit
+            maximum number of search attempts
+        tol
+            final error tolerance
+        mask
+            a mask vector which weights the end-effector error priority.
             Corresponds to translation in X, Y and Z and rotation about X, Y and Z
             respectively
-        :param : value of lambda for the damping matrix Wn
-
-        :return: inverse kinematic solution
-        :rtype: tuple (q, success, iterations, searches, residual)
+        joint_limits
+            constrain the solution to being within the joint limits of
+            the robot (reject solution with invalid joint configurations and perfrom
+            another search up to the slimit)
+        pinv
+            Use the psuedo-inverse instad of the normal matrix inverse
+        pinv_damping
+            Damping factor for the psuedo-inverse
+
+        Returns
+        -------
+        sol
+            tuple (q, success, iterations, searches, residual)
 
-        ``sol = ets.ik_lm_chan(Tep)`` are the joint coordinates (n) corresponding
-        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
-        This method can be used for robots with any number of degrees of freedom.
         The return value ``sol`` is a tuple with elements:
 
         ============    ==========  ===============================================
         Element         Type        Description
         ============    ==========  ===============================================
         ``q``           ndarray(n)  joint coordinates in units of radians or metres
         ``success``     int         whether a solution was found
@@ -1927,304 +2314,768 @@
         ``residual``    float       final value of cost function
         ============    ==========  ===============================================
 
         If ``success == 0`` the ``q`` values will be valid numbers, but the
         solution will be in error.  The amount of error is indicated by
         the ``residual``.
 
-        **Joint Limits**:
+        Synopsis
+        --------
+        Each iteration uses the Gauss-Newton optimisation method
 
-        ``sol = robot.ikine_LM(T, slimit=100)`` which is the deafualt for this method.
-        The solver will initialise a solution attempt with a random valid q0 and
-        perform a maximum of ilimit steps within this attempt. If a solution is not
-        found, this process is repeated up to slimit times.
-
-        **Global search**:
-
-        ``sol = robot.ikine_LM(T, reject_jl=True)`` is the deafualt for this method.
-        By setting reject_jl to True, the solver will discard any solution which
-        violates the defined joint limits of the robot. The solver will then
-        re-initialise with a new random q0 and repeat the process up to slimit times.
-        Note that finding a solution with valid joint coordinates takes longer than
-        without.
-
-        **Underactuated robots:**
-
-        For the case where the manipulator has fewer than 6 DOF the
-        solution space has more dimensions than can be spanned by the
-        manipulator joint coordinates.
-
-        In this case we specify the ``we`` option where the ``we`` vector
-        (6) specifies the Cartesian DOF (in the wrist coordinate frame) that
-        will be ignored in reaching a solution.  The we vector has six
-        elements that correspond to translation in X, Y and Z, and rotation
-        about X, Y and Z respectively. The value can be 0 (for ignore)
-        or above to assign a priority relative to other Cartesian DoF. The number
-        of non-zero elements must equal the number of manipulator DOF.
+        .. math::
 
-        For example when using a 3 DOF manipulator tool orientation might
-        be unimportant, in which case use the option ``we=[1, 1, 1, 0, 0, 0]``.
+            \vec{q}_{k+1} &= \vec{q}_k +
+            \left(
+            {\mat{J}(\vec{q}_k)}^\top
+            \mat{W}_e \
+            {\mat{J}(\vec{q}_k)}
+            \right)^{-1}
+            \bf{g}_k \\
+            \bf{g}_k &=
+            {\mat{J}(\vec{q}_k)}^\top
+            \mat{W}_e
+            \vec{e}_k
+
+        where :math:`\mat{J} = {^0\mat{J}}` is the base-frame manipulator Jacobian. If
+        :math:`\mat{J}(\vec{q}_k)` is non-singular, and :math:`\mat{W}_e = \mat{1}_n`, then
+        the above provides the pseudoinverse solution. However, if :math:`\mat{J}(\vec{q}_k)`
+        is singular, the above can not be computed and the GN solution is infeasible.
+
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_GN` method.
 
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ik_GN(Tep)
+
+        Notes
+        -----
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        ik_NR
+            A fast numerical inverse kinematics solver using Newton-Raphson optimisation
+        ik_GN
+            A fast numerical inverse kinematics solver using Gauss-Newton optimisation
 
+        """  # noqa
 
-        .. note::
+        return IK_GN_c(
+            self._fknm,
+            Tep,
+            q0,
+            ilimit,
+            slimit,
+            tol,
+            joint_limits,
+            mask,
+            pinv,
+            pinv_damping,
+        )
 
-            - See `Toolbox kinematics wiki page
-                <https://github.com/petercorke/robotics-toolbox-python/wiki/Kinematics>`_
-            - Implements a Levenberg-Marquadt variable-damping solver.
-            - The tolerance is computed on the norm of the error between
-                current and desired tool pose.  This norm is computed from
-                distances and angles without any kind of weighting.
-            - The inverse kinematic solution is generally not unique, and
-                depends on the initial guess ``q0``.
+    def ikine_LM(
+        self,
+        Tep: Union[NDArray, SE3],
+        q0: Union[ArrayLike, None] = None,
+        ilimit: int = 30,
+        slimit: int = 100,
+        tol: float = 1e-6,
+        mask: Union[ArrayLike, None] = None,
+        joint_limits: bool = True,
+        seed: Union[int, None] = None,
+        k: float = 1.0,
+        method: L["chan", "wampler", "sugihara"] = "chan",
+        kq: float = 0.0,
+        km: float = 0.0,
+        ps: float = 0.0,
+        pi: Union[NDArray, float] = 0.3,
+        **kwargs,
+    ):
+        r"""
+        Levemberg-Marquadt Numerical Inverse Kinematics Solver
 
-        :references:
-            TODO
+        A method which provides functionality to perform numerical inverse kinematics (IK)
+        using the Levemberg-Marquadt method.
 
-        :seealso:
-            TODO
-        """
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a 
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
+
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose
+        q0
+            The initial joint coordinate vector
+        ilimit
+            How many iterations are allowed within a search before a new search
+            is started
+        slimit
+            How many searches are allowed before being deemed unsuccessful
+        tol
+            Maximum allowed residual error E
+        mask
+            A 6 vector which assigns weights to Cartesian degrees-of-freedom
+            error priority
+        joint_limits
+            Reject solutions with joint limit violations
+        seed
+            A seed for the private RNG used to generate random joint coordinate
+            vectors
+        k
+            Sets the gain value for the damping matrix Wn in the next iteration. See
+            synopsis
+        method
+            One of "chan", "sugihara" or "wampler". Defines which method is used
+            to calculate the damping matrix Wn in the ``step`` method
+        kq
+            The gain for joint limit avoidance. Setting to 0.0 will remove this
+            completely from the solution
+        km
+            The gain for maximisation. Setting to 0.0 will remove this completely
+            from the solution
+        ps
+            The minimum angle/distance (in radians or metres) in which the joint is
+            allowed to approach to its limit
+        pi
+            The influence angle/distance (in radians or metres) in null space motion
+            becomes active
+
+        Synopsis
+        --------
+        The operation is defined by the choice of the ``method`` kwarg. 
+
+        The step is deined as
+
+        .. math::
+
+            \vec{q}_{k+1} 
+            &= 
+            \vec{q}_k +
+            \left(
+                \mat{A}_k
+            \right)^{-1}
+            \bf{g}_k \\
+            %
+            \mat{A}_k
+            &=
+            {\mat{J}(\vec{q}_k)}^\top
+            \mat{W}_e \
+            {\mat{J}(\vec{q}_k)}
+            +
+            \mat{W}_n
+
+        where :math:`\mat{W}_n = \text{diag}(\vec{w_n})(\vec{w_n} \in \mathbb{R}^n_{>0})` is a
+        diagonal damping matrix. The damping matrix ensures that :math:`\mat{A}_k` is
+        non-singular and positive definite. The performance of the LM method largely depends
+        on the choice of :math:`\mat{W}_n`.
+
+        *Chan's Method*
+
+        Chan proposed
+
+        .. math::
+
+            \mat{W}_n
+            =
+             E_k \mat{1}_n
+
+        where  is a constant which reportedly does not have much influence on performance.
+        Use the kwarg `k` to adjust the weighting term .
+
+        *Sugihara's Method*
+
+        Sugihara proposed
+
+        .. math::
 
-        return IK_LM_Sugihara(
-            self._fknm, Tep, q0, ilimit, slimit, tol, reject_jl, we, 
+            \mat{W}_n
+            =
+            E_k \mat{1}_n + \text{diag}(\hat{\vec{w}}_n)
+
+        where :math:`\hat{\vec{w}}_n \in \mathbb{R}^n`, :math:`\hat{w}_{n_i} = l^2 \sim 0.01 l^2`,
+        and :math:`l` is the length of a typical link within the manipulator. We provide the
+        variable `k` as a kwarg to adjust the value of :math:`w_n`.
+
+        *Wampler's Method*
+
+        Wampler proposed :math:`\vec{w_n}` to be a constant. This is set through the `k` kwarg.
+
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_LM` method.
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ikine_LM(Tep)
+
+        Notes
+        -----
+        The value for the ``k`` kwarg will depend on the ``method`` chosen and the arm you are
+        using. Use the following as a rough guide ``chan, k = 1.0 - 0.01``,
+        ``wampler, k = 0.01 - 0.0001``, and ``sugihara, k = 0.1 - 0.0001``
+        
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        This class supports null-space motion to assist with maximising manipulability and
+        avoiding joint limits. These are enabled by setting kq and km to non-zero values.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        :py:class:`~roboticstoolbox.robot.IK.IK_LM`
+            An IK Solver class which implements the Levemberg Marquadt optimisation technique
+        ikine_NR
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_NR` class as a method within the :py:class:`ETS` class
+        ikine_GN
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_GN` class as a method within the :py:class:`ETS` class
+        ikine_QP
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_QP` class as a method within the :py:class:`ETS` class
+
+
+        .. versionchanged:: 1.0.4
+            Added the Levemberg-Marquadt IK solver method on the `ETS` class
+
+        """  # noqa
+
+        solver = IK_LM(
+            ilimit=ilimit,
+            slimit=slimit,
+            tol=tol,
+            joint_limits=joint_limits,
+            mask=mask,
+            seed=seed,
+            k=k,
+            method=method,
+            kq=kq,
+            km=km,
+            ps=ps,
+            pi=pi,
+            **kwargs,
         )
 
-    def ik_nr(
+        # if isinstance(Tep, SE3):
+        #     Tep = Tep.A
+
+        return solver.solve(ets=self, Tep=Tep, q0=q0)
+
+    def ikine_NR(
         self,
-        Tep: Union[ndarray, SE3],
-        q0: Union[ndarray, None] = None,
+        Tep: Union[NDArray, SE3],
+        q0: Union[ArrayLike, None] = None,
         ilimit: int = 30,
         slimit: int = 100,
         tol: float = 1e-6,
-        reject_jl: bool = True,
-        we: Union[ndarray, None] = None,
-        use_pinv: int = True,
-        pinv_damping: float = 0.0,
-    ) -> Tuple[ndarray, int, int, int, float]:
-        """
-        Numerical inverse kinematics by Levenberg-Marquadt optimization (Chan's Method)
+        mask: Union[ArrayLike, None] = None,
+        joint_limits: bool = True,
+        seed: Union[int, None] = None,
+        pinv: bool = False,
+        kq: float = 0.0,
+        km: float = 0.0,
+        ps: float = 0.0,
+        pi: Union[NDArray, float] = 0.3,
+        **kwargs,
+    ):
+        r"""
+        Newton-Raphson Numerical Inverse Kinematics Solver
 
-        :param Tep: The desired end-effector pose or pose trajectory
-        :param q0: initial joint configuration (default to random valid joint
-            configuration contrained by the joint limits of the robot)
-        :param ilimit: maximum number of iterations per search
-        :param slimit: maximum number of search attempts
-        :param tol: final error tolerance
-        :param reject_jl: constrain the solution to being within the joint limits of
-            the robot (reject solution with invalid joint configurations and perfrom
-            another search up to the slimit)
-        :param we: a mask vector which weights the end-effector error priority.
-            Corresponds to translation in X, Y and Z and rotation about X, Y and Z
-            respectively
-        :param : value of lambda for the damping matrix Wn
+        A method which provides functionality to perform numerical inverse kinematics (IK)
+        using the Newton-Raphson method.
 
-        :return: inverse kinematic solution
-        :rtype: tuple (q, success, iterations, searches, residual)
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
 
-        ``sol = ets.ik_lm_chan(Tep)`` are the joint coordinates (n) corresponding
-        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
-        This method can be used for robots with any number of degrees of freedom.
-        The return value ``sol`` is a tuple with elements:
+        Note
+        ----
+        When using this method with redundant robots (>6 DoF), ``pinv`` must be set to ``True``
+
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose
+        q0
+            The initial joint coordinate vector
+        ilimit
+            How many iterations are allowed within a search before a new search
+            is started
+        slimit
+            How many searches are allowed before being deemed unsuccessful
+        tol
+            Maximum allowed residual error E
+        mask
+            A 6 vector which assigns weights to Cartesian degrees-of-freedom
+            error priority
+        joint_limits
+            Reject solutions with joint limit violations
+        seed
+            A seed for the private RNG used to generate random joint coordinate
+            vectors
+        pinv
+            If True, will use the psuedoinverse in the `step` method instead of
+            the normal inverse
+        kq
+            The gain for joint limit avoidance. Setting to 0.0 will remove this
+            completely from the solution
+        km
+            The gain for maximisation. Setting to 0.0 will remove this completely
+            from the solution
+        ps
+            The minimum angle/distance (in radians or metres) in which the joint is
+            allowed to approach to its limit
+        pi
+            The influence angle/distance (in radians or metres) in null space motion
+            becomes active
+
+        Synopsis
+        --------
+        Each iteration uses the Newton-Raphson optimisation method
 
-        ============    ==========  ===============================================
-        Element         Type        Description
-        ============    ==========  ===============================================
-        ``q``           ndarray(n)  joint coordinates in units of radians or metres
-        ``success``     int         whether a solution was found
-        ``iterations``  int         total number of iterations
-        ``searches``    int         total number of searches
-        ``residual``    float       final value of cost function
-        ============    ==========  ===============================================
+        .. math::
 
-        If ``success == 0`` the ``q`` values will be valid numbers, but the
-        solution will be in error.  The amount of error is indicated by
-        the ``residual``.
+            \vec{q}_{k+1} = \vec{q}_k + {^0\mat{J}(\vec{q}_k)}^{-1} \vec{e}_k
 
-        **Joint Limits**:
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_NR` method.
 
-        ``sol = robot.ikine_LM(T, slimit=100)`` which is the deafualt for this method.
-        The solver will initialise a solution attempt with a random valid q0 and
-        perform a maximum of ilimit steps within this attempt. If a solution is not
-        found, this process is repeated up to slimit times.
-
-        **Global search**:
-
-        ``sol = robot.ikine_LM(T, reject_jl=True)`` is the deafualt for this method.
-        By setting reject_jl to True, the solver will discard any solution which
-        violates the defined joint limits of the robot. The solver will then
-        re-initialise with a new random q0 and repeat the process up to slimit times.
-        Note that finding a solution with valid joint coordinates takes longer than
-        without.
-
-        **Underactuated robots:**
-
-        For the case where the manipulator has fewer than 6 DOF the
-        solution space has more dimensions than can be spanned by the
-        manipulator joint coordinates.
-
-        In this case we specify the ``we`` option where the ``we`` vector
-        (6) specifies the Cartesian DOF (in the wrist coordinate frame) that
-        will be ignored in reaching a solution.  The we vector has six
-        elements that correspond to translation in X, Y and Z, and rotation
-        about X, Y and Z respectively. The value can be 0 (for ignore)
-        or above to assign a priority relative to other Cartesian DoF. The number
-        of non-zero elements must equal the number of manipulator DOF.
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ikine_NR(Tep)
+
+        Notes
+        -----
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        This class supports null-space motion to assist with maximising manipulability and
+        avoiding joint limits. These are enabled by setting kq and km to non-zero values.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        :py:class:`~roboticstoolbox.robot.IK.IK_NR`
+            An IK Solver class which implements the Newton-Raphson optimisation technique
+        ikine_LM
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_LM` class as a method within the :py:class:`ETS` class
+        ikine_GN
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_GN` class as a method within the :py:class:`ETS` class
+        ikine_QP
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_QP` class as a method within the :py:class:`ETS` class
 
-        For example when using a 3 DOF manipulator tool orientation might
-        be unimportant, in which case use the option ``we=[1, 1, 1, 0, 0, 0]``.
 
+        .. versionchanged:: 1.0.4
+            Added the Newton-Raphson IK solver method on the `ETS` class
 
+        """  # noqa
 
-        .. note::
+        solver = IK_NR(
+            ilimit=ilimit,
+            slimit=slimit,
+            tol=tol,
+            joint_limits=joint_limits,
+            mask=mask,
+            seed=seed,
+            pinv=pinv,
+            kq=kq,
+            km=km,
+            ps=ps,
+            pi=pi,
+            **kwargs,
+        )
 
-            - See `Toolbox kinematics wiki page
-                <https://github.com/petercorke/robotics-toolbox-python/wiki/Kinematics>`_
-            - Implements a Levenberg-Marquadt variable-damping solver.
-            - The tolerance is computed on the norm of the error between
-                current and desired tool pose.  This norm is computed from
-                distances and angles without any kind of weighting.
-            - The inverse kinematic solution is generally not unique, and
-                depends on the initial guess ``q0``.
+        # if isinstance(Tep, SE3):
+        #     Tep = Tep.A
 
-        :references:
-            TODO
+        return solver.solve(ets=self, Tep=Tep, q0=q0)
 
-        :seealso:
-            TODO
-        """
+    def ikine_GN(
+        self,
+        Tep: Union[NDArray, SE3],
+        q0: Union[ArrayLike, None] = None,
+        ilimit: int = 30,
+        slimit: int = 100,
+        tol: float = 1e-6,
+        mask: Union[ArrayLike, None] = None,
+        joint_limits: bool = True,
+        seed: Union[int, None] = None,
+        pinv: bool = False,
+        kq: float = 0.0,
+        km: float = 0.0,
+        ps: float = 0.0,
+        pi: Union[NDArray, float] = 0.3,
+        **kwargs,
+    ):
+        r"""
+        Gauss-Newton Numerical Inverse Kinematics Solver
 
-        return IK_NR(
-            self._fknm,
-            Tep,
-            q0,
-            ilimit,
-            slimit,
-            tol,
-            reject_jl,
-            we,
-            use_pinv,
-            pinv_damping,
+        A method which provides functionality to perform numerical inverse kinematics (IK)
+        using the Gauss-Newton method.
+
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
+
+        Note
+        ----
+        When using this method with redundant robots (>6 DoF), ``pinv`` must be set to ``True``
+
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose
+        q0
+            The initial joint coordinate vector
+        ilimit
+            How many iterations are allowed within a search before a new search
+            is started
+        slimit
+            How many searches are allowed before being deemed unsuccessful
+        tol
+            Maximum allowed residual error E
+        mask
+            A 6 vector which assigns weights to Cartesian degrees-of-freedom
+            error priority
+        joint_limits
+            Reject solutions with joint limit violations
+        seed
+            A seed for the private RNG used to generate random joint coordinate
+            vectors
+        pinv
+            If True, will use the psuedoinverse in the `step` method instead of
+            the normal inverse
+        kq
+            The gain for joint limit avoidance. Setting to 0.0 will remove this
+            completely from the solution
+        km
+            The gain for maximisation. Setting to 0.0 will remove this completely
+            from the solution
+        ps
+            The minimum angle/distance (in radians or metres) in which the joint is
+            allowed to approach to its limit
+        pi
+            The influence angle/distance (in radians or metres) in null space motion
+            becomes active
+
+        Synopsis
+        --------
+        Each iteration uses the Gauss-Newton optimisation method
+
+        .. math::
+
+            \vec{q}_{k+1} &= \vec{q}_k +
+            \left(
+            {\mat{J}(\vec{q}_k)}^\top
+            \mat{W}_e \
+            {\mat{J}(\vec{q}_k)}
+            \right)^{-1}
+            \bf{g}_k \\
+            \bf{g}_k &=
+            {\mat{J}(\vec{q}_k)}^\top
+            \mat{W}_e
+            \vec{e}_k
+
+        where :math:`\mat{J} = {^0\mat{J}}` is the base-frame manipulator Jacobian. If
+        :math:`\mat{J}(\vec{q}_k)` is non-singular, and :math:`\mat{W}_e = \mat{1}_n`, then
+        the above provides the pseudoinverse solution. However, if :math:`\mat{J}(\vec{q}_k)`
+        is singular, the above can not be computed and the GN solution is infeasible.
+
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_GN` method.
+
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ikine_GN(Tep)
+
+        Notes
+        -----
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        This class supports null-space motion to assist with maximising manipulability and
+        avoiding joint limits. These are enabled by setting kq and km to non-zero values.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        :py:class:`~roboticstoolbox.robot.IK.IK_NR`
+            An IK Solver class which implements the Newton-Raphson optimisation technique
+        ikine_LM
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_LM` class as a method within the :py:class:`ETS` class
+        ikine_NR
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_NR` class as a method within the :py:class:`ETS` class
+        ikine_QP
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_QP` class as a method within the :py:class:`ETS` class
+
+
+        .. versionchanged:: 1.0.4
+            Added the Gauss-Newton IK solver method on the `ETS` class
+
+        """  # noqa
+
+        solver = IK_GN(
+            ilimit=ilimit,
+            slimit=slimit,
+            tol=tol,
+            joint_limits=joint_limits,
+            mask=mask,
+            seed=seed,
+            pinv=pinv,
+            kq=kq,
+            km=km,
+            ps=ps,
+            pi=pi,
+            **kwargs,
         )
 
-    def ik_gn(
+        # if isinstance(Tep, SE3):
+        #     Tep = Tep.A
+
+        return solver.solve(ets=self, Tep=Tep, q0=q0)
+
+    def ikine_QP(
         self,
-        Tep: Union[ndarray, SE3],
-        q0: Union[ndarray, None] = None,
+        Tep: Union[NDArray, SE3],
+        q0: Union[ArrayLike, None] = None,
         ilimit: int = 30,
         slimit: int = 100,
         tol: float = 1e-6,
-        reject_jl: bool = True,
-        we: Union[ndarray, None] = None,
-        use_pinv: int = True,
-        pinv_damping: float = 0.0,
-    ) -> Tuple[ndarray, int, int, int, float]:
-        """
-        Numerical inverse kinematics by Levenberg-Marquadt optimization (Chan's Method)
-
-        :param Tep: The desired end-effector pose or pose trajectory
-        :param q0: initial joint configuration (default to random valid joint
-            configuration contrained by the joint limits of the robot)
-        :param ilimit: maximum number of iterations per search
-        :param slimit: maximum number of search attempts
-        :param tol: final error tolerance
-        :param reject_jl: constrain the solution to being within the joint limits of
-            the robot (reject solution with invalid joint configurations and perfrom
-            another search up to the slimit)
-        :param we: a mask vector which weights the end-effector error priority.
-            Corresponds to translation in X, Y and Z and rotation about X, Y and Z
-            respectively
-        :param : value of lambda for the damping matrix Wn
+        mask: Union[ArrayLike, None] = None,
+        joint_limits: bool = True,
+        seed: Union[int, None] = None,
+        kj=1.0,
+        ks=1.0,
+        kq: float = 0.0,
+        km: float = 0.0,
+        ps: float = 0.0,
+        pi: Union[NDArray, float] = 0.3,
+        **kwargs,
+    ):
+        r"""
+        Quadratic Programming Numerical Inverse Kinematics Solver
 
-        :return: inverse kinematic solution
-        :rtype: tuple (q, success, iterations, searches, residual)
+        A method that provides functionality to perform numerical inverse kinematics
+        (IK) using a quadratic progamming approach.
 
-        ``sol = ets.ik_lm_chan(Tep)`` are the joint coordinates (n) corresponding
-        to the robot end-effector pose ``Tep`` which is an ``SE3`` or ``ndarray`` object.
-        This method can be used for robots with any number of degrees of freedom.
-        The return value ``sol`` is a tuple with elements:
+        See the :ref:`Inverse Kinematics Docs Page <IK>` for more details and for a
+        **tutorial** on numerical IK, see `here <https://bit.ly/3ak5GDi>`_.
 
-        ============    ==========  ===============================================
-        Element         Type        Description
-        ============    ==========  ===============================================
-        ``q``           ndarray(n)  joint coordinates in units of radians or metres
-        ``success``     int         whether a solution was found
-        ``iterations``  int         total number of iterations
-        ``searches``    int         total number of searches
-        ``residual``    float       final value of cost function
-        ============    ==========  ===============================================
+        Parameters
+        ----------
+        Tep
+            The desired end-effector pose
+        q0
+            The initial joint coordinate vector
+        ilimit
+            How many iterations are allowed within a search before a new search
+            is started
+        slimit
+            How many searches are allowed before being deemed unsuccessful
+        tol
+            Maximum allowed residual error E
+        mask
+            A 6 vector which assigns weights to Cartesian degrees-of-freedom
+            error priority
+        joint_limits
+            Reject solutions with joint limit violations
+        seed
+            A seed for the private RNG used to generate random joint coordinate
+            vectors
+        kj
+            A gain for joint velocity norm minimisation
+        ks
+            A gain which adjusts the cost of slack (intentional error)
+        kq
+            The gain for joint limit avoidance. Setting to 0.0 will remove this
+            completely from the solution
+        km
+            The gain for maximisation. Setting to 0.0 will remove this completely
+            from the solution
+        ps
+            The minimum angle/distance (in radians or metres) in which the joint is
+            allowed to approach to its limit
+        pi
+            The influence angle/distance (in radians or metres) in null space motion
+            becomes active
+
+        Raises
+        ------
+        ImportError
+            If the package ``qpsolvers`` is not installed
+
+        Synopsis
+        --------
+        Each iteration uses the following approach
 
-        If ``success == 0`` the ``q`` values will be valid numbers, but the
-        solution will be in error.  The amount of error is indicated by
-        the ``residual``.
+        .. math::
 
-        **Joint Limits**:
+            \vec{q}_{k+1} = \vec{q}_{k} + \dot{\vec{q}}.
 
-        ``sol = robot.ikine_LM(T, slimit=100)`` which is the deafualt for this method.
-        The solver will initialise a solution attempt with a random valid q0 and
-        perform a maximum of ilimit steps within this attempt. If a solution is not
-        found, this process is repeated up to slimit times.
-
-        **Global search**:
-
-        ``sol = robot.ikine_LM(T, reject_jl=True)`` is the deafualt for this method.
-        By setting reject_jl to True, the solver will discard any solution which
-        violates the defined joint limits of the robot. The solver will then
-        re-initialise with a new random q0 and repeat the process up to slimit times.
-        Note that finding a solution with valid joint coordinates takes longer than
-        without.
-
-        **Underactuated robots:**
-
-        For the case where the manipulator has fewer than 6 DOF the
-        solution space has more dimensions than can be spanned by the
-        manipulator joint coordinates.
-
-        In this case we specify the ``we`` option where the ``we`` vector
-        (6) specifies the Cartesian DOF (in the wrist coordinate frame) that
-        will be ignored in reaching a solution.  The we vector has six
-        elements that correspond to translation in X, Y and Z, and rotation
-        about X, Y and Z respectively. The value can be 0 (for ignore)
-        or above to assign a priority relative to other Cartesian DoF. The number
-        of non-zero elements must equal the number of manipulator DOF.
+        where the QP is defined as
 
-        For example when using a 3 DOF manipulator tool orientation might
-        be unimportant, in which case use the option ``we=[1, 1, 1, 0, 0, 0]``.
+        .. math::
 
+            \min_x \quad f_o(\vec{x}) &= \frac{1}{2} \vec{x}^\top \mathcal{Q} \vec{x}+ \mathcal{C}^\top \vec{x}, \\
+            \text{subject to} \quad \mathcal{J} \vec{x} &= \vec{\nu},  \\
+            \mathcal{A} \vec{x} &\leq \mathcal{B},  \\
+            \vec{x}^- &\leq \vec{x} \leq \vec{x}^+
 
+        with
 
-        .. note::
+        .. math::
 
-            - See `Toolbox kinematics wiki page
-                <https://github.com/petercorke/robotics-toolbox-python/wiki/Kinematics>`_
-            - Implements a Levenberg-Marquadt variable-damping solver.
-            - The tolerance is computed on the norm of the error between
-                current and desired tool pose.  This norm is computed from
-                distances and angles without any kind of weighting.
-            - The inverse kinematic solution is generally not unique, and
-                depends on the initial guess ``q0``.
+            \vec{x} &=
+            \begin{pmatrix}
+                \dvec{q} \\ \vec{\delta}
+            \end{pmatrix} \in \mathbb{R}^{(n+6)}  \\
+            \mathcal{Q} &=
+            \begin{pmatrix}
+                \lambda_q \mat{1}_{n} & \mathbf{0}_{6 \times 6} \\ \mathbf{0}_{n \times n} & \lambda_\delta \mat{1}_{6}
+            \end{pmatrix} \in \mathbb{R}^{(n+6) \times (n+6)} \\
+            \mathcal{J} &=
+            \begin{pmatrix}
+                \mat{J}(\vec{q}) & \mat{1}_{6}
+            \end{pmatrix} \in \mathbb{R}^{6 \times (n+6)} \\
+            \mathcal{C} &=
+            \begin{pmatrix}
+                \mat{J}_m \\ \bf{0}_{6 \times 1}
+            \end{pmatrix} \in \mathbb{R}^{(n + 6)} \\
+            \mathcal{A} &=
+            \begin{pmatrix}
+                \mat{1}_{n \times n + 6} \\
+            \end{pmatrix} \in \mathbb{R}^{(l + n) \times (n + 6)} \\
+            \mathcal{B} &=
+            \eta
+            \begin{pmatrix}
+                \frac{\rho_0 - \rho_s}
+                        {\rho_i - \rho_s} \\
+                \vdots \\
+                \frac{\rho_n - \rho_s}
+                        {\rho_i - \rho_s}
+            \end{pmatrix} \in \mathbb{R}^{n} \\
+            \vec{x}^{-, +} &=
+            \begin{pmatrix}
+                \dvec{q}^{-, +} \\
+                \vec{\delta}^{-, +}
+            \end{pmatrix} \in \mathbb{R}^{(n+6)},
+
+        where :math:`\vec{\delta} \in \mathbb{R}^6` is the slack vector,
+        :math:`\lambda_\delta \in \mathbb{R}^+` is a gain term which adjusts the
+        cost of the norm of the slack vector in the optimiser,
+        :math:`\dvec{q}^{-,+}` are the minimum and maximum joint velocities, and
+        :math:`\dvec{\delta}^{-,+}` are the minimum and maximum slack velocities.
+
+        Examples
+        --------
+        The following example gets the ``ets`` of a ``panda`` robot object, makes a goal
+        pose ``Tep``, and then solves for the joint coordinates which result in the pose
+        ``Tep`` using the `ikine_QP` method.
 
-        :references:
-            TODO
+        .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> panda = rtb.models.Panda().ets()
+        >>> Tep = panda.fkine([0, -0.3, 0, -2.2, 0, 2, 0.7854])
+        >>> panda.ikine_QP(Tep)
+
+        Notes
+        -----
+        When using the this method, the initial joint coordinates :math:`q_0`, should correspond
+        to a non-singular manipulator pose, since it uses the manipulator Jacobian.
+
+        This class supports null-space motion to assist with maximising manipulability and
+        avoiding joint limits. These are enabled by setting kq and km to non-zero values.
+
+        References
+        ----------
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part I:
+          Kinematics, Velocity, and Applications." arXiv preprint arXiv:2207.01796 (2022).
+        - J. Haviland, and P. Corke. "Manipulator Differential Kinematics Part II:
+          Acceleration and Advanced Applications." arXiv preprint arXiv:2207.01794 (2022).
+
+        See Also
+        --------
+        :py:class:`~roboticstoolbox.robot.IK.IK_NR`
+            An IK Solver class which implements the Newton-Raphson optimisation technique
+        ikine_LM
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_LM` class as a method within the :py:class:`ETS` class
+        ikine_GN
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_GN` class as a method within the :py:class:`ETS` class
+        ikine_NR
+            Implements the :py:class:`~roboticstoolbox.robot.IK.IK_NR` class as a method within the :py:class:`ETS` class
+
+
+        .. versionchanged:: 1.0.4
+            Added the Quadratic Programming IK solver method on the `ETS` class
+
+        """  # noqa: E501
+
+        solver = IK_QP(
+            ilimit=ilimit,
+            slimit=slimit,
+            tol=tol,
+            joint_limits=joint_limits,
+            mask=mask,
+            seed=seed,
+            kj=kj,
+            ks=ks,
+            kq=kq,
+            km=km,
+            ps=ps,
+            pi=pi,
+            **kwargs,
+        )
 
-        :seealso:
-            TODO
-        """
+        # if isinstance(Tep, SE3):
+        #     Tep = Tep.A
 
-        return IK_GN(
-            self._fknm,
-            Tep,
-            q0,
-            ilimit,
-            slimit,
-            tol,
-            reject_jl,
-            we,
-            use_pinv,
-            pinv_damping,
-        )
+        return solver.solve(ets=self, Tep=Tep, q0=q0)
 
 
 class ETS2(BaseETS):
     """
     This class implements an elementary transform sequence (ETS) for 2D
 
     :param arg: Function to compute ET value
@@ -2315,16 +3166,17 @@
             and joints[-1].jindex is None
         ):
             # ets has sequential jindicies, except for the last.
             joints[-1].jindex = self.n - 1
             self._auto_jindex = True
         elif jindices > 0 and not jindices == self.n:
             raise ValueError(
-                "You can not have some jindices set for the ET's in arg. It must be all or none"
-            )
+                "You can not have some jindices set for the ET's in arg. It must be all"
+                " or none"
+            )  # pragma: nocover
         elif jindices == 0 and self.n > 0:
             # Set them ourself
             for j, joint in enumerate(joints):
                 joint.jindex = j
             self._auto_jindex = True
 
     def __mul__(self, other: Union[ET2, "ETS2"]) -> "ETS2":
@@ -2354,33 +3206,32 @@
 
         :seealso: :func:`isconstant`
         """
         const = None
         ets = ETS2()
 
         for et in self:
-
             if et.isjoint:
                 # a joint
                 if const is not None:
                     # flush the constant
-                    if not array_equal(const, eye(3)):
+                    if not np.array_equal(const, np.eye(3)):
                         ets *= ET2.SE2(const)
                     const = None
                 ets *= et  # emit the joint ET
             else:
                 # not a joint
                 if const is None:
                     const = et.A()
                 else:
                     const = const @ et.A()
 
         if const is not None:
             # flush the constant, tool transform
-            if not array_equal(const, eye(3)):
+            if not np.array_equal(const, np.eye(3)):
                 ets *= ET2.SE2(const)
         return ets
 
     def insert(
         self,
         arg: Union[ET2, "ETS2"],
         i: int = -1,
@@ -2418,16 +3269,16 @@
                 for j, et in enumerate(arg):
                     self.data.insert(i + j, et)
         self._update_internals()
 
     def fkine(
         self,
         q: ArrayLike,
-        base: Union[ndarray, SE2, None] = None,
-        tool: Union[ndarray, SE2, None] = None,
+        base: Union[NDArray, SE2, None] = None,
+        tool: Union[NDArray, SE2, None] = None,
         include_base: bool = True,
     ) -> SE2:
         """
         Forward kinematics
         :param q: Joint coordinates
         :type q: ArrayLike
         :param base: base transform, optional
@@ -2452,31 +3303,31 @@
         """
 
         ret = SE2.Empty()
         fk = self.eval(q, base, tool, include_base)
 
         if fk.dtype == "O":
             # symbolic
-            fk = array(simplify(fk))
+            fk = np.array(simplify(fk))
 
         if fk.ndim == 3:
             for T in fk:
                 ret.append(SE2(T, check=False))  # type: ignore
         else:
             ret = SE2(fk, check=False)
 
         return ret
 
     def eval(
         self,
         q: ArrayLike,
-        base: Union[ndarray, SE2, None] = None,
-        tool: Union[ndarray, SE2, None] = None,
+        base: Union[NDArray, SE2, None] = None,
+        tool: Union[NDArray, SE2, None] = None,
         include_base: bool = True,
-    ) -> ndarray:
+    ) -> NDArray:
         """
         Forward kinematics
         :param q: Joint coordinates
         :type q: ArrayLike
         :param base: base transform, optional
         :param tool: tool transform, optional
 
@@ -2501,33 +3352,33 @@
         q = getmatrix(q, (None, None))
         l, _ = q.shape  # type: ignore
         end = self[-1]
 
         if base is None:
             bases = None
         elif isinstance(base, SE2):
-            bases = array(base.A)
-        elif array_equal(base, eye(3)):  # pragma: nocover
+            bases = np.array(base.A)
+        elif np.array_equal(base, np.eye(3)):  # pragma: nocover
             bases = None
         else:  # pragma: nocover
             bases = base
 
         if tool is None:
             tools = None
         elif isinstance(tool, SE2):
-            tools = array(tool.A)
-        elif array_equal(tool, eye(3)):  # pragma: nocover
+            tools = np.array(tool.A)
+        elif np.array_equal(tool, np.eye(3)):  # pragma: nocover
             tools = None
         else:  # pragma: nocover
             tools = tool
 
         if l > 1:
-            T = zeros((l, 3, 3), dtype=object)
+            T = np.zeros((l, 3, 3), dtype=object)
         else:
-            T = zeros((3, 3), dtype=object)
+            T = np.zeros((3, 3), dtype=object)
 
         for k, qk in enumerate(q):  # type: ignore
             link = end  # start with last link
 
             jindex = 0 if link.jindex is None and link.isjoint else link.jindex
             Tk = link.A(qk[jindex])
 
@@ -2541,15 +3392,15 @@
                 jindex = 0 if link.jindex is None and link.isjoint else link.jindex
                 A = link.A(qk[jindex])
 
                 if A is not None:
                     Tk = A @ Tk
 
             # add base transform if it is set
-            if include_base == True and bases is not None:
+            if include_base is True and bases is not None:
                 Tk = bases @ Tk
 
             # append
             if l > 1:
                 T[k, :, :] = Tk
                 # ret.append(SE2(Tk, check=False))  # type: ignore
             else:
@@ -2557,25 +3408,24 @@
                 # ret = SE2(Tk, check=False)
 
         return T
 
     def jacob0(
         self,
         q: ArrayLike,
-    ):
-
+    ) -> NDArray:
         # very inefficient implementation, just put a 1 in last row
         # if its a rotation joint
         q = getvector(q)
 
         j = 0
-        J = zeros((3, self.n))
+        J = np.zeros((3, self.n))
         etjoints = self.joint_idx()
 
-        if not all(array([self[i].jindex for i in etjoints])):
+        if not np.all(np.array([self[i].jindex for i in etjoints])):
             # not all joints have a jindex it is required, set them
             for j in range(self.n):
                 i = etjoints[j]
                 self[i].jindex = j
 
         for j in range(self.n):
             i = etjoints[j]
@@ -2585,21 +3435,21 @@
             else:
                 jindex = 0  # pragma: nocover
 
             # jindex = 0 if self[i].jindex is None else self[i].jindex
 
             axis = self[i].axis
             if axis == "R":
-                dTdq = array([[0, -1, 0], [1, 0, 0], [0, 0, 0]]) @ self[i].A(
+                dTdq = np.array([[0, -1, 0], [1, 0, 0], [0, 0, 0]]) @ self[i].A(
                     q[jindex]  # type: ignore
                 )
             elif axis == "tx":
-                dTdq = array([[0, 0, 1], [0, 0, 0], [0, 0, 0]])
+                dTdq = np.array([[0, 0, 1], [0, 0, 0], [0, 0, 0]])
             elif axis == "ty":
-                dTdq = array([[0, 0, 0], [0, 0, 1], [0, 0, 0]])
+                dTdq = np.array([[0, 0, 0], [0, 0, 1], [0, 0, 0]])
             else:  # pragma: nocover
                 raise TypeError("Invalid axes")
 
             E0 = ETS2(self[:i])
             if len(E0) > 0:
                 dTdq = E0.fkine(q).A @ dTdq
 
@@ -2633,18 +3483,7 @@
         is related to joint velocity by :math:`{}^{e}\nu = {}^{e}\mathbf{J}_0(q) \dot{q}`.
 
         :seealso: :func:`jacob`, :func:`hessian0`
         """  # noqa
 
         T = self.fkine(q, include_base=False).A
         return tr2jac2(T.T) @ self.jacob0(q)
-
-
-# if __name__ == "__main__":
-
-#     from roboticstoolbox import models
-
-#     ur5 = models.URDF.UR5()
-
-#     ur5.fkine(ur5.qz)
-#     ur5.jacob0(ur5.qz)
-#     ur5.jacob0_analytic(ur5.qz)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/Link.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/Link.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,24 +1,30 @@
-from copy import copy as ccopy, deepcopy
+from copy import deepcopy
 from abc import ABC
+from typing_extensions import Self
+
 # from multiprocessing.sharedctypes import Value
 import numpy as np
 from functools import wraps
 from spatialmath.base import getvector, isscalar, isvector, ismatrix
 from spatialmath import SE3, SE2
 from ansitable import ANSITable, Column
 from spatialgeometry import Shape, SceneNode, SceneGroup
 from typing import List, Union, Tuple, overload
+
 import roboticstoolbox as rtb
 from roboticstoolbox.robot.ETS import ETS, ETS2
 from roboticstoolbox.robot.ET import ET, ET2
-from numpy import eye, ndarray, array, diag
 from warnings import warn
 
-ArrayLike = Union[list, ndarray, tuple, set]
+from roboticstoolbox.tools.types import ArrayLike, NDArray
+
+# A generic type variable representing any subclass of BaseETS
+# ETSType = TypeVar("ETSType", bound=BaseETS)
+# ETType = TypeVar("ETType", bound=BaseET)
 
 
 def _listen_dyn(func):
     """
     @_listen_dyn
 
     Decorator for property setters
@@ -51,67 +57,79 @@
         return func(*args)
 
     return wrapper_listen_dyn
 
 
 class BaseLink(SceneNode, ABC):
     """
-    Link superclass
-
-    :param name: name of the link
-    :type name: str
+    An abstract link superclass for all link types.
 
-    :param qlim: joint variable limits [min, max]
-    :type qlim: float ndarray(1,2)
-    :param flip: joint moves in opposite direction
-    :type flip: bool
-
-    :param m: dynamic - link mass
-    :type m: float
-    :param r: dynamic - position of COM with respect to link frame
-    :type r:  float ndarray(3)
-    :param I: dynamic - inertia of link with respect to COM
-    :type I: ndarray
-
-    :param Jm: dynamic - motor inertia
-    :type Jm: float
-    :param B: dynamic - motor viscous friction
-    :type B: float, or ndarray(2,)
-    :param Tc: dynamic - motor Coulomb friction [Tc, Tc]
-    :type Tc: ndarray(2,)
-    :param G: dynamic - gear ratio
-    :type G: float
+    Parameters
+    ----------
+    ets
+        kinematic - The elementary transforms which make up the link
+    name
+        name of the link
+    parent
+        a reference to the parent link in the kinematic chain
+    joint_name
+        the name of the joint variable
+    m
+        dynamic - link mass
+    r
+        dynamic - position of COM with respect to link frame
+    I
+        dynamic - inertia of link with respect to COM
+    Jm
+        dynamic - motor inertia
+    B
+        dynamic - motor viscous friction
+    Tc
+        dynamic - motor Coulomb friction [Tc, Tc]
+    G
+        dynamic - gear ratio
+    qlim
+        joint variable limits [min, max]
+    geometry
+        the visual geometry which represents the link. This is used
+        to display the link in Swift
+    collision
+        the collision geometry which represents the link in collision
+        checkers
 
-    An abstract link superclass for all link types.
 
     .. inheritance-diagram:: roboticstoolbox.RevoluteDH
         roboticstoolbox.PrismaticDH roboticstoolbox.RevoluteMDH
         roboticstoolbox.PrismaticMDH roboticstoolbox.Link
         :top-classes: roboticstoolbox.robot.Link
         :parts: 2
 
+    Synopsis
+    --------
+
     It holds metadata related to:
 
     - a robot link, such as rigid-body inertial parameters defined in the link
       frame, and link name
     - a robot joint, that connects this link to its parent, such as joint
       limits, direction of motion, motor and transmission parameters.
 
-    .. note::
-        - For a more sophisticated actuator model use the ``actuator``
-          attribute which is not initialized or used by this Toolbox.
-        - There is no ability to name a joint as supported by URDF
+    Notes
+    -----
+    - For a more sophisticated actuator model use the ``actuator``
+        attribute which is not initialized or used by this Toolbox.
+    - There is no ability to name a joint as supported by URDF
 
     """
 
     def __init__(
         self,
         ets: Union[ETS, ETS2, ET, ET2] = ETS(),
         name=None,
-        parent: Union["BaseLink", str, None] = None,
+        parent: Union[Self, str, None] = None,
         joint_name: Union[str, None] = None,
         m: Union[float, None] = None,
         r: Union[ArrayLike, None] = None,
         I: Union[ArrayLike, None] = None,  # noqa
         Jm: Union[float, None] = None,
         B: Union[float, None] = None,
         Tc: Union[ArrayLike, None] = None,
@@ -177,95 +195,124 @@
             print(ets)
             raise TypeError("The ets argument must be of type ETS or ET")
 
         self.ets = ets
 
         # Check parent argument
         if parent is not None:
-            if isinstance(parent, BaseLink):
-                self._parent = parent
-                self._parent_name = None
-            elif isinstance(parent, str):
-                self._parent = None
+            if isinstance(parent, str):
+                self.parent = None
                 self._parent_name = parent
+            elif isinstance(parent, BaseLink):
+                self.parent = parent
+                self._parent_name = None
+
             else:
                 raise TypeError("parent must be BaseLink subclass")
         else:
             self._parent = None
             self._parent_name = None
 
         self._joint_name = joint_name
         self._children = []
 
+        self.number = 0
+
         # Set the qlim if provided
         if qlim is not None and self.v:
             self.v.qlim = qlim
 
     # -------------------------------------------------------------------------- #
 
     def _init_Ts(self):
         # Compute the leading, constant, part of the ETS
 
-        # Ts can not be equal to None otherwise things seem
-        # to break everywhere, so initialise Ts np be identity
-
         if isinstance(self, Link2):
-            T = eye(3)
+            T = None
         else:
-            T = eye(4)
+            T = None
 
         for et in self._ets:
             # constant transforms only
             if et.isjoint:
                 break
             else:
-                T = T @ et.A()
+                if T is None:
+                    T = et.A()
+                else:
+                    T = T @ et.A()
 
         self._Ts = T
 
     @property
-    def Ts(self) -> ndarray:
+    def Ts(self) -> Union[NDArray, None]:
         """
         Constant part of link ETS
-        :return: constant part of link transform
-        :rtype: SE3 instance
+
         The ETS for each Link comprises a constant part (possible the
         identity) followed by an optional joint variable transform.
         This property returns the constant part.  If no constant part
         is given, this returns an identity matrix.
+
+        Returns
+        -------
+        Ts
+            constant part of link transform
+
+        Examples
+        --------
         .. runblock:: pycon
-            >>> from roboticstoolbox import Link, ET
-            >>> link = Link( ET.tz(0.333) * ET.Rx(90, 'deg') * ET.Rz() )
-            >>> link.Ts
-            >>> link = Link( ET.Rz() )
-            >>> link.Ts
+        >>> from roboticstoolbox import Link, ET
+        >>> link = Link( ET.tz(0.333) * ET.Rx(90, 'deg') * ET.Rz() )
+        >>> link.Ts
+        >>> link = Link( ET.Rz() )
+        >>> link.Ts
+
         """
         return self._Ts
 
     @overload
     def ets(self: "Link") -> ETS:
-        ...
+        ...  # pragma: nocover
 
     @overload
     def ets(self: "Link2") -> ETS2:
-        ...
+        ...  # pragma: nocover
 
     @property
-    def ets(self):
+    def ets(self) -> ETS:
+        """
+        Get/set link ets
+
+        - ``link.ets`` is the link ets
+        - ``link.ets = ...`` checks and sets the link ets
+
+        Parameters
+        ----------
+        ets
+            the new link ets
+
+        Returns
+        -------
+        ets
+            the current link ets
+
+        """
+
         return self._ets
 
     @ets.setter
     @overload
     def ets(self: "Link", new_ets: ETS):
-        ...
+        ...  # pragma: nocover
 
     @ets.setter
     @overload
     def ets(self: "Link2", new_ets: ETS2):
-        ...
+        ...  # pragma: nocover
 
     @ets.setter
     def ets(self, new_ets):
         if new_ets.n > 1:
             raise ValueError("An elementary link can only have one joint variable")
 
         if new_ets.n == 1 and not new_ets[-1].isjoint:
@@ -277,28 +324,35 @@
         if self._ets.n:
             self._v = self._ets[-1]
             self._isjoint = True
         else:
             self._v = None
             self._isjoint = False
 
-    def __repr__(self):
+    def __repr__(self) -> str:
         s = self.__class__.__name__ + "("
         if len(self.ets) > 0:
             s += repr(self.ets) + ", "
         s += ", ".join(self._params())
         s += ")"
         return s
 
-    def __str__(self):
+    def __str__(self) -> str:
         """
-        Pretty prints the ETS Model of the link. Will output angles in degrees
-        :return: Pretty print of the robot link
-        :rtype: str
+        Pretty prints the ETS Model of the link
+
+        Will output angles in degrees
+
+        Returns
+        -------
+        str
+            pretty print of the robot link
+
         """
+
         s = self.__class__.__name__ + "("
         if self.name is not None:
             s += f'"{self.name}"'
 
         ets = self.ets
         if len(ets) > 0:
             s += f", {ets}"
@@ -309,63 +363,63 @@
         #         parent = ""
         #     elif isinstance(self.parent, str):
         #         parent = f" [{self.parent}]"
         #     else:
         #         parent = f" [{self.parent.name}]"
         params = self._params(name=False)
         if len(params) > 0:
-            s += ", "
+            s += ", "  # pragma: nocover
         s += ", ".join(params)
         s += ")"
         return s
 
     def _repr_pretty_(self, p, cycle):
         """
-        Pretty string for IPython (superclass method)
-
-        :param p: pretty printer handle (ignored)
-        :param cycle: pretty printer flag (ignored)
+        Pretty string for IPython
 
         Print colorized output when variable is displayed in IPython, ie. on a line by
         itself.
 
-        Example::
-
-            In [1]: x
+        Parameters
+        ----------
+        p
+            pretty printer handle (ignored)
+        cycle
+            pretty printer flag (ignored)
 
         """
-        # see https://ipython.org/ipython-doc/stable/api/generated/IPython.lib.pretty.html
+        # see
+        # https://ipython.org/ipython-doc/stable/api/generated/IPython.lib.pretty.html
 
-        p.text(str(self))
+        p.text(str(self))  # pragma: nocover
 
     # -------------------------------------------------------------------------- #
 
-    def copy(self, parent: Union["BaseLink", None] = None):
+    @overload
+    def copy(self: "Link") -> "Link":
+        ...  # pragma: nocover
+
+    @overload
+    def copy(self: "Link2") -> "Link2":
+        ...  # pragma: nocover
+
+    def copy(self):
         """
         Copy of link object
 
-        :return: Shallow copy of link object
-        :rtype: Link
-
         ``link.copy()`` is a new Link subclass instance with a copy of all
         the parameters.
+
+        Returns
+        -------
+        link
+            copy of link object
+
         """
-        # new = ccopy(self)
-        # for k, v in self.__dict__.items():
-        #     # print(k)
-        #     if k.startswith("_") and isinstance(v, np.ndarray):
-        #         setattr(new, k, np.copy(v))
-
-        # new._geometry = [shape.copy() for shape in self._geometry]
-        # new._collision = [shape.copy() for shape in self._collision]
-
-        # # invalidate references to parent, child
-        # new._parent = parent
-        # new._children = []
-        # return new
+
         return deepcopy(self)
 
     def _copy(self):
         raise DeprecationWarning("Use copy method of Link class")
 
     def __deepcopy__(self, memo):
         ets = deepcopy(self.ets)
@@ -393,305 +447,348 @@
             r=r,
             I=I,
             Jm=Jm,
             B=B,
             Tc=Tc,
             G=G,
             qlim=qlim,
-            geometry=geometry,
-            collision=collision,
+            geometry=geometry,  # type: ignore
+            collision=collision,  # type: ignore
         )
 
         if self._children:
             result._children = self._children.copy()
 
         result._robot = self.robot
 
         memo[id(self)] = result
         return result
 
     # -------------------------------------------------------------------------- #
 
     @overload
     def v(self: "Link") -> Union["ET", None]:
-        ...
+        ...  # pragma: nocover
 
     @overload
     def v(self: "Link2") -> Union["ET2", None]:
-        ...
+        ...  # pragma: nocover
 
     @property
     def v(self):
         """
         Variable part of link ETS
-        :return: joint variable transform
-        :rtype: ET instance
+
         The ETS for each Link comprises a constant part (possible the
         identity) followed by an optional joint variable transform.
         This property returns the latter.
+
+        Returns
+        -------
+        v
+            joint variable transform
+
+        Examples
+        --------
         .. runblock:: pycon
-            >>> from roboticstoolbox import Link, ETS
-            >>> link = Link( ET.tz(0.333) * ET.Rx(90, 'deg') * ETS.Rz() )
-            >>> print(link.v)
+        >>> from roboticstoolbox import Link, ETS
+        >>> link = Link( ET.tz(0.333) * ET.Rx(90, 'deg') * ETS.Rz() )
+        >>> print(link.v)
+
         """
         return self._v
 
     # -------------------------------------------------------------------------- #
 
     @property
     def name(self) -> str:
         """
         Get/set link name
 
         - ``link.name`` is the link name
+        - ``link.name = ...`` checks and sets the link name
 
-        :return: link name
-        :rtype: str
+        Returns
+        -------
+        name
+            link name
 
-        - ``link.name = ...`` checks and sets the link name
         """
         return self._name
 
     @name.setter
-    def name(self, name):
+    def name(self, name: str):
         self._name = name
 
     # -------------------------------------------------------------------------- #
 
     @property
-    def robot(self) -> Union["rtb.Robot", None]:
+    def robot(self) -> Union["rtb.BaseRobot", None]:
         """
         Get forward reference to the robot which owns this link
 
-        :return: The robot object
+        - ``link.robot`` is the robot reference
+        - ``link.robot = ...`` checks and sets the robot reference
+
+        Returns
+        -------
+        robot
+            The robot object
+
         """
         return self._robot
 
     @robot.setter
-    def robot(self, robot_ref: "rtb.Robot"):
+    def robot(self, robot_ref: "rtb.BaseRobot"):
         """
         Set the forward reference to the robot which owns this link
         """
         self._robot = robot_ref
 
     # -------------------------------------------------------------------------- #
 
     @property
-    def qlim(self) -> Union[ndarray, None]:
+    def qlim(self) -> Union[NDArray, None]:
         """
         Get/set joint limits
 
         - ``link.qlim`` is the joint limits
-
-        :return: joint limits
-        :rtype: ndarray(2,) or Nine
-
         - ``link.qlim = ...`` checks and sets the joint limits
 
-        .. note::
-            - The limits are not widely enforced within the toolbox.
-            - If no joint limits are specified the value is ``None``
+        Returns
+        -------
+        qlim
+            joint limits
+
+        Notes
+        -----
+        - The limits are not widely enforced within the toolbox.
+        - If no joint limits are specified the value is ``None``
+
+        See Also
+        --------
+        :func:`~islimit`
 
-        :seealso: :func:`~islimit`
         """
+
         if self.v:
             return self.v.qlim
         else:
             return None
 
     @qlim.setter
     def qlim(self, qlim_new: ArrayLike):
         if self.v:
-            self.v.qlim = qlim_new
+            self.ets.qlim = qlim_new
         else:
             raise ValueError("Can not set qlim on a static joint")
 
     @property
     def hasdynamics(self) -> bool:
         """
         Link has dynamic parameters (Link superclass)
 
-        :return: Link has dynamic parameters
-        :rtype: bool
-
         Link has some assigned (non-default) dynamic parameters.  These could
         have been assigned:
 
         - at constructor time, eg. ``m=1.2``
         - by invoking a setter method, eg. ``link.m = 1.2``
 
-        Example:
+        Returns
+        -------
+        hasdynamics
+            Link has dynamic parameters
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> robot = rtb.models.DH.Puma560()
+        >>> robot[1].hasdynamics
 
-            >>> import roboticstoolbox as rtb
-            >>> robot = rtb.models.DH.Puma560()
-            >>> robot[1].hasdynamics
         """
         return self._hasdynamics
 
     # -------------------------------------------------------------------------- #
 
     @property
     def isflip(self) -> bool:
         """
         Get/set joint flip
 
         - ``link.flip`` is the joint flip status
-
-        :return: joint flip
-        :rtype: bool
-
         - ``link.flip = ...`` checks and sets the joint flip status
 
         Joint flip defines the direction of motion of the joint.
 
         ``flip = False`` is conventional motion direction:
 
             - revolute motion is a positive rotation about the z-axis
             - prismatic motion is a positive translation along the z-axis
 
         ``flip = True`` is the opposite motion direction:
 
             - revolute motion is a negative rotation about the z-axis
             - prismatic motion is a negative translation along the z-axis
 
+        Returns
+        -------
+        isflip
+            joint flip
+
         """
+
         return self.v.isflip if self.v else False
 
     # -------------------------------------------------------------------------- #
 
     @property
     def m(self) -> float:
         """
         Get/set link mass
 
         - ``link.m`` is the link mass
-
-        :return: link mass
-        :rtype: float
-
         - ``link.m = ...`` checks and sets the link mass
 
+        Returns
+        -------
+        m
+            link mass
+
         """
+
         return self._m
 
     @m.setter
     @_listen_dyn
     def m(self, m_new: float):
         self._m = m_new
 
     # -------------------------------------------------------------------------- #
 
     @property
-    def r(self) -> ndarray:
+    def r(self) -> NDArray:
         """
         Get/set link centre of mass
 
-        - ``link.r`` is the link centre of mass
-
-        :return: link centre of mass
-        :rtype: ndarray(3,)
+        The link centre of mass is a 3-vector defined with respect to the link
+        frame.
 
+        - ``link.r`` is the link centre of mass
         - ``link.r = ...`` checks and sets the link centre of mass
 
-        The link centre of mass is a 3-vector defined with respect to the link
-        frame.
+        Returns
+        -------
+        r
+            link centre of mass
+
         """
+
         return self._r  # type: ignore
 
     @r.setter
     @_listen_dyn
     def r(self, r_new: ArrayLike):
         self._r = getvector(r_new, 3)
 
     # -------------------------------------------------------------------------- #
 
     @property
-    def I(self) -> ndarray:  # noqa
+    def I(self) -> NDArray:  # noqa
         r"""
         Get/set link inertia
 
-        - ``link.I`` is the link inertia
-
-        :return: link inertia
-        :rtype: ndarray(3,3)
-
-        - ``link.I = ...`` checks and sets the link inertia
-
         Link inertia is a symmetric 3x3 matrix describing the inertia with
         respect to a frame with its origin at the centre of mass, and with
         axes parallel to those of the link frame.
 
+        - ``link.I`` is the link inertia
+        - ``link.I = ...`` checks and sets the link inertia
+
+        Returns
+        -------
+        I
+            link inertia
+
+        Synopsis
+        --------
+
         The inertia matrix is
 
         :math:`\begin{bmatrix} I_{xx} & I_{xy} & I_{xz} \\ I_{xy} & I_{yy} & I_{yz} \\I_{xz} & I_{yz} & I_{zz} \end{bmatrix}`
 
-
         and can be specified as either:
 
         - a 3  3 symmetric matrix
         - a 3-vector :math:`(I_{xx}, I_{yy}, I_{zz})`
         - a 6-vector :math:`(I_{xx}, I_{yy}, I_{zz}, I_{xy}, I_{yz}, I_{xz})`
 
-        .. note:: Referred to the link side of the gearbox.
+        Notes
+        -----
+        - Referred to the link side of the gearbox.
+
         """  # noqa
+
         return self._I  # type: ignore
 
     @I.setter
     @_listen_dyn
     def I(self, I_new: ArrayLike):  # noqa
-
         if ismatrix(I_new, (3, 3)):
             # 3x3 matrix passed
             if np.any(np.abs(I_new - I_new.T) > 1e-8):  # type: ignore
                 raise ValueError("3x3 matrix is not symmetric")
 
         elif isvector(I_new, 9):
             # 3x3 matrix passed as a 1d vector
             I_new = I_new.reshape(3, 3)  # type: ignore
             if np.any(np.abs(I_new - I_new.T) > 1e-8):  # type: ignore
                 raise ValueError("3x3 matrix is not symmetric")
 
         elif isvector(I_new, 6):
             # 6-vector passed, moments and products of inertia,
             # [Ixx Iyy Izz Ixy Iyz Ixz]
-            I_new = array(
+            I_new = np.array(
                 [
                     [I_new[0], I_new[3], I_new[5]],  # type: ignore
                     [I_new[3], I_new[1], I_new[4]],  # type: ignore
                     [I_new[5], I_new[4], I_new[2]],  # type: ignore
                 ]
             )
 
         elif isvector(I_new, 3):
             # 3-vector passed, moments of inertia [Ixx Iyy Izz]
-            I_new = diag(I_new)
+            I_new = np.diag(I_new)  # type: ignore
 
         else:
             raise ValueError("invalid shape passed: must be (3,3), (6,), (3,)")
 
         self._I = I_new
 
     # -------------------------------------------------------------------------- #
 
     @property
     def Jm(self) -> float:
         """
         Get/set motor inertia
 
         - ``link.Jm`` is the motor inertia
-
-        :return: motor inertia
-        :rtype: float
-
         - ``link.Jm = ...`` checks and sets the motor inertia
 
-        .. note:: Referred to the motor side of the gearbox.
+        Returns
+        -------
+        Jm
+            motor inertia
+
+        Notes
+        -----
+        - Referred to the motor side of the gearbox.
+
         """
+
         return self._Jm
 
     @Jm.setter
     @_listen_dyn
     def Jm(self, Jm_new: float):
         self._Jm = Jm_new
 
@@ -699,64 +796,71 @@
 
     @property
     def B(self) -> float:
         """
         Get/set motor viscous friction
 
         - ``link.B`` is the motor viscous friction
-
-        :return: motor viscous friction
-        :rtype: float
-
         - ``link.B = ...`` checks and sets the motor viscous friction
 
-        .. note::
-            - Referred to the motor side of the gearbox.
-            - Viscous friction is the same for positive and negative motion.
+        Returns
+        -------
+        B
+            motor viscous friction
+
+        Notes
+        -----
+        - Referred to the motor side of the gearbox.
+        - Viscous friction is the same for positive and negative motion.
+
         """
         return self._B
 
     @B.setter
     @_listen_dyn
     def B(self, B_new: float):
         if isscalar(B_new):
             self._B = B_new
         else:
             raise TypeError("B must be a scalar")
 
     # -------------------------------------------------------------------------- #
 
     @property
-    def Tc(self) -> ndarray:
+    def Tc(self) -> NDArray:
         r"""
         Get/set motor Coulomb friction
 
         - ``link.Tc`` is the motor Coulomb friction
-
-        :return: motor Coulomb friction
-        :rtype: ndarray(2)
-
         - ``link.Tc = ...`` checks and sets the motor Coulomb friction. If a
           scalar is given the value is set to [T, -T], if a 2-vector it is
           assumed to be in the order [Tc, Tc]
 
         Coulomb friction is a non-linear friction effect defined by two
         parameters such that
 
         .. math::
 
             \tau = \left\{ \begin{array}{ll}
                 \tau_C^+ & \mbox{if $\dot{q} > 0$} \\
                 \tau_C^- & \mbox{if $\dot{q} < 0$} \end{array} \right.
 
-        .. note::
-            -  Referred to the motor side of the gearbox.
-            - :math:`\tau_C^+` must be :math:`> 0`, and :math:`\tau_C^-` must
-              be :math:`< 0`.
+        Returns
+        -------
+        Tc
+            motor Coulomb friction
+
+        Notes
+        -----
+        -  Referred to the motor side of the gearbox.
+        - :math:`\tau_C^+` must be :math:`> 0`, and :math:`\tau_C^-` must
+            be :math:`< 0`.
+
         """
+
         return self._Tc
 
     @Tc.setter
     @_listen_dyn
     def Tc(self, Tc_new: ArrayLike):
         try:
             # sets Coulomb friction parameters to [F -F], for a symmetric
@@ -764,230 +868,300 @@
             Tc = getvector(Tc_new, 1)
             Tc_new = np.array([Tc[0], -Tc[0]])  # type: ignore
         except ValueError:
             # [FP FM] sets Coulomb friction to [FP FM], for an asymmetric
             # Coulomb friction model. FP>0 and FM<0.  FP is applied for a
             # positive joint velocity and FM for a negative joint
             # velocity.
-            Tc_new = array(getvector(Tc_new, 2))
+            Tc_new = np.array(getvector(Tc_new, 2))
 
         self._Tc = Tc_new
 
     # -------------------------------------------------------------------------- #
 
     @property
     def G(self) -> float:
         """
         Get/set gear ratio
 
         - ``link.G`` is the transmission gear ratio
-
-        :return: gear ratio
-        :rtype: float
-
         - ``link.G = ...`` checks and sets the gear ratio
 
-        .. note::
-            - The ratio of motor motion : link motion
-            - The gear ratio can be negative, see also the ``flip`` attribute.
+        Returns
+        -------
+        G
+            gear ratio
+
+        Notes
+        -----
+        - The ratio of motor motion : link motion
+        - The gear ratio can be negative, see also the ``flip`` attribute.
+
+        See Also
+        --------
+        :func:`flip`
 
-        :seealso: :func:`flip`
         """
+
         return self._G
 
     @G.setter
     @_listen_dyn
     def G(self, G_new: float):
         self._G = G_new
 
     # -------------------------------------------------------------------------- #
 
     @property
     def geometry(self) -> SceneGroup:
         """
         Get/set joint visual geometry
+
         - ``link.geometry`` is the list of the visual geometries which
             represent the shape of the link
             :return: the visual geometries
             :rtype: list of Shape
         - ``link.geometry = ...`` checks and sets the geometry
         - ``link.geometry.append(...)`` add geometry
+
         """
         return self._geometry
 
     @property
     def collision(self) -> SceneGroup:
         """
         Get/set joint collision geometry
+
+        The collision geometries are what is used to check for collisions.
+
         - ``link.collision`` is the list of the collision geometries which
             represent the collidable shape of the link.
             :return: the collision geometries
             :rtype: list of Shape
         - ``link.collision = ...`` checks and sets the collision geometry
         - ``link.collision.append(...)`` add collision geometry
-        The collision geometries are what is used to check for collisions.
+
         """
+
         return self._collision
 
     @collision.setter
     def collision(self, coll: Union[SceneGroup, List[Shape], Shape]):
-
         if isinstance(coll, list):
             self.collision.scene_children = coll  # type: ignore
         elif isinstance(coll, Shape):
             self.collision.scene_children.append(coll)
         elif isinstance(coll, SceneGroup):
             self._collision = coll
 
     @geometry.setter
     def geometry(self, geom: Union[SceneGroup, List[Shape], Shape]):
-
         if isinstance(geom, list):
             self.geometry.scene_children = geom  # type: ignore
         elif isinstance(geom, Shape):
             self.geometry.scene_children.append(geom)
         elif isinstance(geom, SceneGroup):
             self._geometry = geom
 
     # -------------------------------------------------------------------------- #
 
     @property
     def isjoint(self) -> bool:
         """
         Test if link has joint
-        :return: test if link has a joint
-        :rtype: bool
+
         The ETS for each Link comprises a constant part (possible the
         identity) followed by an optional joint variable transform.
-        This property returns the whether the
+        This property returns the whether the Link contains the
+        variable transform.
+
+        Returns
+        -------
+        isjoint
+            test if link has a joint
+
+        Examples
+        --------
         .. runblock:: pycon
-            >>> from roboticstoolbox import models
-            >>> robot = models.URDF.Panda()
-            >>> robot[1].isjoint  # link with joint
-            >>> robot[8].isjoint  # static link
+        >>> from roboticstoolbox import models
+        >>> robot = models.URDF.Panda()
+        >>> robot[1].isjoint  # link with joint
+        >>> robot[8].isjoint  # static link
+
         """
+
         # return self.v.isjoint if self.v else False
         return self._isjoint
 
     @property
     def jindex(self) -> Union[None, int]:
         """
         Get/set joint index
+
         - ``link.jindex`` is the joint index
-            :return: joint index
-            :rtype: int
         - ``link.jindex = ...`` checks and sets the joint index
+
         For a serial-link manipulator the joints are numbered starting at zero
         and increasing sequentially toward the end-effector.  For branched
         mechanisms this is not so straightforward.
         The link's ``jindex`` property specifies the index of its joint
         variable within a vector of joint coordinates.
-        .. note:: ``jindex`` values must be a sequence of integers starting
+
+        Returns
+        -------
+        jindex
+            joint index
+
+        Notes
+        -----
+        - ``jindex`` values must be a sequence of integers starting
             at zero.
+
         """
         return None if not self.v else self.v._jindex
 
     @jindex.setter
     def jindex(self, j: int):
         if self.v:
             self.v.jindex = j
             self.ets._auto_jindex = False
 
     @property
     def isprismatic(self) -> bool:
         """
         Checks if the joint is of prismatic type
+
+        Returns
+        -------
         :return: True if is prismatic
         :rtype: bool
         """
         return self.v.istranslation if self.v else False
 
     @property
     def isrevolute(self) -> bool:
         """
         Checks if the joint is of revolute type
-        :return: True if is revolute
-        :rtype: bool
-        """
-        return self.v.isrotation if self.v else False
 
-    @overload
-    def parent(self: "Link") -> Union["Link", None]:
-        ...
+        Returns
+        -------
+        isrevolute
+            True if is revolute
 
-    @overload
-    def parent(self: "Link2") -> Union["Link2", None]:
-        ...
+        """
+
+        return self.v.isrotation if self.v else False
 
     @property
-    def parent(self):
+    def parent(self) -> Union[Self, None]:
         """
         Parent link
-        :return: Link's parent
-        :rtype: Link instance
-        This is a reference to
+
+        This is a reference to the links parent in the kinematic
+        chain
+
+        Returns
+        -------
+        parent
+            Link's parent
+
+        Examples
+        --------
         .. runblock:: pycon
-            >>> from roboticstoolbox import models
-            >>> robot = models.URDF.Panda()
-            >>> robot[0].parent  # base link has no parent
-            >>> robot[1].parent  # second link's parent
+        >>> from roboticstoolbox import models
+        >>> robot = models.URDF.Panda()
+        >>> robot[0].parent  # base link has no parent
+        >>> robot[1].parent  # second link's parent
+
         """
+
         return self._parent
 
+    @parent.setter
+    def parent(self, parent: Union[Self, None]):
+        self._parent = parent
+
     @property
     def parent_name(self) -> Union[str, None]:
         """
         Parent link name
 
-        :return: Link's parent name
+        Returns
+        -------
+        parent_name
+            Link's parent name
+
         """
-        if self._parent is not None:
-            return self._parent.name
+
+        if isinstance(self.parent, BaseLink):
+            return self.parent.name
         else:
             return self._parent_name
 
     @property
     def children(self) -> Union[List["Link"], None]:
         """
         List of child links
-        :return: child links
-        :rtype: list of ``Link`` instances
+
         The list will be empty for a end-effector link
+
+        Returns
+        -------
+        children
+            child links
+
         """
+
         return self._children
 
     @property
     def nchildren(self) -> int:
         """
         Number of child links
-        :return: number of child links
-        :rtype: int
+
         Will be zero for an end-effector link
+
+        Returns
+        -------
+        nchildren
+            number of child links
+
         """
         return len(self._children)
 
     def closest_point(
         self, shape: Shape, inf_dist: float = 1.0, skip: bool = False
-    ) -> Tuple[Union[int, None], Union[np.ndarray, None], Union[np.ndarray, None],]:
+    ) -> Tuple[Union[int, None], Union[NDArray, None], Union[NDArray, None],]:
         """
+        Finds the closest point to a shape
+
         closest_point(shape, inf_dist) returns the minimum euclidean
         distance between this link and shape, provided it is less than
         inf_dist. It will also return the points on self and shape in the
         world frame which connect the line of length distance between the
         shapes. If the distance is negative then the shapes are collided.
 
+        Parameters
+        ----------
         :param shape: The shape to compare distance to
         :param inf_dist: The minimum distance within which to consider
             the shape
         :param skip: Skip setting all shape transforms
 
-        :returns: d, p1, p2 where d is the distance between the shapes,
-            p1 and p2 are the points in the world frame on the respective
-            shapes. The points returned are [x, y, z].
-        :rtype: float, ndarray(1x3), ndarray(1x3)
+        Returns
+        -------
+        d
+            d is the distance between the shapes
+        p1
+            the points in the world frame on the link
+            shape. The points returned are [x, y, z].
+        p2
+            the points in the world frame the
+            shape. The points returned are [x, y, z].
+
         """
 
         if not skip:
             self.robot._update_link_tf(self.robot.q)  # type: ignore
             self._propogate_scene_tree()
             shape._propogate_scene_tree()
 
@@ -1006,20 +1180,30 @@
         if d == 10000:
             d = None
 
         return d, p1, p2
 
     def iscollided(self, shape: Shape, skip: bool = False) -> bool:
         """
-        collided(shape) checks if this link and shape have collided
+        Checks for collision with a shape
 
-        :param shape: The shape to compare distance to
-        :param skip: Skip setting all shape transforms
+        ``iscollided(shape)`` checks if this link and shape have collided
+
+        Parameters
+        ----------
+        shape
+            The shape to compare distance to
+        skip
+            Skip setting all shape transforms
+
+        Returns
+        -------
+        iscollided
+            True if shapes have collided
 
-        :returns: True if shapes have collided
         """
 
         if not skip:
             self.robot._update_link_tf(self.robot.q)  # type: ignore
             self._propogate_scene_tree()
             shape._propogate_scene_tree()
 
@@ -1027,47 +1211,63 @@
             if col.iscollided(shape):
                 return True
 
         return False
 
     def collided(self, shape: Shape, skip: bool = False):
         """
-        collided(shape) checks if this link and shape have collided
+        Checks for collision with a shape
 
-        :param shape: The shape to compare distance to
-        :param skip: Skip setting all shape transforms
+        ``iscollided(shape)`` checks if this link and shape have collided
+
+        Parameters
+        ----------
+        shape
+            The shape to compare distance to
+        skip
+            Skip setting all shape transforms
+
+        Returns
+        -------
+        iscollided
+            True if shapes have collided
 
-        :returns: True if shapes have collided
         """
+
         warn("base kwarg is deprecated, use pose instead", FutureWarning)
         return self.iscollided(shape=shape, skip=skip)
 
     def dyn(self, indent=0):
         """
         Inertial properties of link as a string
 
-        :param indent: indent each line by this many spaces
-        :type indent: int
-        :return: The string representation of the link dynamics
-        :rtype: string
-
         ``link.dyn()`` is a string representation the inertial properties of
         the link object in a multi-line format. The properties shown are mass,
         centre of mass, inertia, friction, gear ratio and motor properties.
 
-        Example:
+        Parameters
+        ----------
+        indent
+            indent each line by this many spaces
+        :type indent: int
+        :return: The string representation of the link dynamics
+        :rtype: string
 
+        Examples
+        --------
         .. runblock:: pycon
+        >>> import roboticstoolbox as rtb
+        >>> robot = rtb.models.DH.Puma560()
+        >>> print(robot.links[2])        # kinematic parameters
+        >>> print(robot.links[2].dyn())  # dynamic parameters
+
+        See Also
+        --------
+        :func:`~dyntable`
 
-            >>> import roboticstoolbox as rtb
-            >>> robot = rtb.models.DH.Puma560()
-            >>> print(robot.links[2])        # kinematic parameters
-            >>> print(robot.links[2].dyn())  # dynamic parameters
-
-        :seealso: :func:`~dyntable`
         """
 
         qlim = [0, 0] if self.qlim is None else self.qlim
 
         s = (
             "m     =  {:8.2g} \n"
             "r     =  {:8.2g} {:8.2g} {:8.2g} \n"
@@ -1111,151 +1311,175 @@
 
         return s
 
     def _dyn2list(self, fmt="{: .3g}"):
         """
         Inertial properties of link as a string
 
-        :param fmt: conversion format for each number
-        :type fmt: str
-        :return: The string representation of the link dynamics
-        :rtype: string
-
-        ``link.)_dyn2list()`` returns a list of pretty-printed inertial
+        ``link._dyn2list()`` returns a list of pretty-printed inertial
         properties of the link The properties included are mass, centre of
         mass, inertia, friction, gear ratio and motor properties.
 
-        :seealso: :func:`~dyn`
+        Parameters
+        ----------
+        :param fmt: conversion format for each number
+
+        Returns
+        -------
+        dyn2list
+            The string representation of the link dynamics
+
+        See Also
+        --------
+        :func:`~dyn`
+
         """
+
         ANSITable(
             Column("Parameter", headalign="^"),
             Column("Value", headalign="^", colalign="<"),
             border="thin",
         )
 
         def format(l, fmt, val):  # noqa
             if isinstance(val, np.ndarray):
                 try:
                     s = ", ".join([fmt.format(v) for v in val])
-                except TypeError:
+                except TypeError:  # pragma: nocover
                     # handle symbolic case
                     s = ", ".join([str(v) for v in val])
             else:
                 try:
                     s = fmt.format(val)
-                except TypeError:
+                except TypeError:  # pragma: nocover
                     # handle symbolic case
                     s = str(val)
             l.append(s)
 
         dyn = []
         format(dyn, fmt, self.m)
         format(dyn, fmt, self.r)
         I = self.I.flatten()  # noqa
-        format(dyn, fmt, np.r_[[I[k] for k in [0, 4, 8, 1, 2, 5]]])
+        format(dyn, fmt, np.r_[[I[k] for k in [0, 4, 8, 1, 5, 2]]])
         format(dyn, fmt, self.Jm)
         format(dyn, fmt, self.B)
         format(dyn, fmt, self.Tc)
         format(dyn, fmt, self.G)
 
         return dyn
 
-    def _params(self, name=True):  # pragma nocover
-        def format_param(
-            self, l, name, symbol=None, ignorevalue=None, indices=None
-        ):  # noqa  # pragma nocover
-            # if value == ignorevalue then don't display it
-
-            v = getattr(self, name)
-            s = None
-            if v is None:
-                return
-            if isinstance(v, str):
-                s = f'{name} = "{v}"'
-            elif isscalar(v) and v != ignorevalue:
-                if symbol is not None:
-                    s = f"{symbol}={v:.3g}"
-                else:
-                    try:
-                        s = f"{name}={v:.3g}"
-                    except TypeError:
-                        s = f"{name}={v}"
-            elif isinstance(v, np.ndarray):
-                # if np.linalg.norm(v, ord=np.inf) > 0:
-                #     if indices is not None:
-                #         flat = v.flatten()
-                #         v = np.r_[[flat[k] for k in indices]]
-                #     s = f"{name}=[" + ", ".join([f"{x:.3g}" for x in v]) + "]"
-                if indices is not None:
-                    v = v.ravel()[indices]
-                s = f"{name}=" + np.array2string(
-                    v,
-                    separator=", ",
-                    suppress_small=True,
-                    formatter={"float": lambda x: f"{x:.3g}"},
-                )
-            if s is not None:
-                l.append(s)
+    def _format_param(
+        self, l, name, symbol=None, ignorevalue=None, indices=None
+    ):  # noqa  # pragma nocover
+        # if value == ignorevalue then don't display it
+
+        v = getattr(self, name)
+        s = None
+        if v is None:
+            return
+        if isinstance(v, str):
+            s = f'{name} = "{v}"'
+        elif isscalar(v) and v != ignorevalue:
+            if symbol is not None:
+                s = f"{symbol}={v:.3g}"
+            else:  # pragma: nocover
+                try:
+                    s = f"{name}={v:.3g}"
+                except TypeError:
+                    s = f"{name}={v}"
+        elif isinstance(v, np.ndarray):
+            # if np.linalg.norm(v, ord=np.inf) > 0:
+            #     if indices is not None:
+            #         flat = v.flatten()
+            #         v = np.r_[[flat[k] for k in indices]]
+            #     s = f"{name}=[" + ", ".join([f"{x:.3g}" for x in v]) + "]"
+            if indices is not None:
+                v = v.ravel()[indices]
+            s = f"{name}=" + np.array2string(
+                v,
+                separator=", ",
+                suppress_small=True,
+                formatter={"float": lambda x: f"{x:.3g}"},
+            )
+        if s is not None:
+            l.append(s)
+
+    def _params(self, name: bool = True):  # pragma nocover
 
         l = []  # noqa
         if name:
-            format_param(self, l, "name")
+            self._format_param(l, "name")
         if self.parent_name is not None:
             l.append('parent="' + self.parent_name + '"')
-        elif self.parent is not None:
+        elif isinstance(self.parent, BaseLink):
             l.append('parent="' + self.parent.name + '"')
-        format_param(self, l, "parent")
-        format_param(self, l, "isflip", ignorevalue=False)
-        format_param(self, l, "qlim")
+        self._format_param(l, "parent")
+        self._format_param(l, "isflip", ignorevalue=False)
+        self._format_param(l, "qlim")
         if self._hasdynamics:
-            format_param(self, l, "m")
-            format_param(self, l, "r")
-            format_param(self, l, "I", indices=[0, 4, 8, 1, 2, 5])
-            format_param(self, l, "Jm")
-            format_param(self, l, "B")
-            format_param(self, l, "Tc")
-            format_param(self, l, "G")
+            self._format_param(l, "m")
+            self._format_param(l, "r")
+            self._format_param(l, "I", indices=[0, 4, 8, 1, 2, 5])
+            self._format_param(l, "Jm")
+            self._format_param(l, "B")
+            self._format_param(l, "Tc")
+            self._format_param(l, "G")
 
         return l
 
-    def islimit(self, q):
+    def islimit(self, q: float):
         """
         Checks if joint exceeds limit
 
-        :param q: joint coordinate
-        :type q: float
-        :return: True if joint is exceeded
-        :rtype: bool
-
         ``link.islimit(q)`` is True if ``q`` exceeds the joint limits defined
         by ``link``.
 
-        .. note:: If no limits are set always return False.
+        Parameters
+        ----------
+        q
+            joint coordinate
+
+        Returns
+        -------
+        islimit
+            True if joint is exceeded
+
+        Notes
+        -----
+        - If no limits are set always return False.
+
+        See Also
+        --------
+        :func:`qlim`
 
-        :seealso: :func:`qlim`
         """
+
         if self.qlim is None:
             return False
         else:
             return q < self.qlim[0] or q > self.qlim[1]
 
-    def nofriction(self, coulomb=True, viscous=False):
+    def nofriction(self, coulomb: bool = True, viscous: bool = False):
         """
         Clone link without friction
 
-        :param coulomb: if True, will set the Coulomb friction to 0
-        :type coulomb: bool
-        :param viscous: if True, will set the viscous friction to 0
-        :type viscous: bool
-
         ``link.nofriction()`` is a copy of the link instance with the same
         parameters except, the Coulomb and/or viscous friction parameters are
         set to zero.
 
-        .. note:: For simulation it can be useful to remove Couloumb friction
+        Parameters
+        ----------
+        coulomb
+            if True, will set the Coulomb friction to 0
+        viscous
+            if True, will set the viscous friction to 0
+
+        Notes
+        -----
+        - For simulation it can be useful to remove Couloumb friction
             which can cause problems for numerical integration.
 
         """
 
         # Copy the Link
         link = self.copy()
 
@@ -1263,55 +1487,60 @@
             link.B = 0.0
 
         if coulomb:
             link.Tc = [0.0, 0.0]
 
         return link
 
-    def friction(self, qd, coulomb=True):
+    def friction(self, qd: float, coulomb: bool = True):
         r"""
         Compute joint friction
 
-        :param qd: The joint velocity
-        :type qd: float
-        :param coulomb: include Coulomb friction
-        :type coloumb: bool, default True
-        :return tau: the friction force/torque
-        :rtype tau: float
-
         ``friction(qd)`` is the joint friction force/torque
         for joint velocity ``qd``. The friction model includes:
 
         - Viscous friction which is a linear function of velocity.
         - Coulomb friction which is proportional to sign(qd).
 
         .. math::
 
             \tau = G^2 B \dot{q} + |G| \left\{ \begin{array}{ll}
                 \tau_C^+ & \mbox{if $\dot{q} > 0$} \\
                 \tau_C^- & \mbox{if $\dot{q} < 0$} \end{array} \right.
 
-        .. note::
-
-            - The friction value should be added to the motor output torque to
-              determine the nett torque. It has a negative value when qd > 0.
-            - The returned friction value is referred to the output of the
-              gearbox.
-            - The friction parameters in the Link object are referred to the
-              motor.
-            - Motor viscous friction is scaled up by :math:`G^2`.
-            - Motor Coulomb friction is scaled up by math:`G`.
-            - The appropriate Coulomb friction value to use in the
-              non-symmetric case depends on the sign of the joint velocity,
-              not the motor velocity.
-            - Coulomb friction is zero for zero joint velocity, stiction is
-              not modeled.
-            - The absolute value of the gear ratio is used.  Negative gear
-              ratios are tricky: the Puma560 robot has negative gear ratio for
-              joints 1 and 3.
+        Parameters
+        ----------
+        qd
+            The joint velocity
+        coulomb
+            include Coulomb friction
+
+        Returns
+        -------
+        tau
+            the friction force/torque
+
+        Notes
+        -----
+        - The friction value should be added to the motor output torque to
+            determine the nett torque. It has a negative value when qd > 0.
+        - The returned friction value is referred to the output of the
+            gearbox.
+        - The friction parameters in the Link object are referred to the
+            motor.
+        - Motor viscous friction is scaled up by :math:`G^2`.
+        - Motor Coulomb friction is scaled up by math:`G`.
+        - The appropriate Coulomb friction value to use in the
+            non-symmetric case depends on the sign of the joint velocity,
+            not the motor velocity.
+        - Coulomb friction is zero for zero joint velocity, stiction is
+            not modeled.
+        - The absolute value of the gear ratio is used.  Negative gear
+            ratios are tricky: the Puma560 robot has negative gear ratio for
+            joints 1 and 3.
 
         """
 
         tau = self.B * np.abs(self.G) * qd
 
         if coulomb:
             if qd > 0:
@@ -1325,203 +1554,153 @@
         return tau
 
 
 class Link(BaseLink):
     """
     ETS link class
 
-    :param ets: kinematic - The elementary transforms which make up the link
-    :param qlim: joint variable limits [min max]
-    :type qlim: float ndarray(2)
-    :param m: dynamic - link mass
-    :type m: float
-    :param r: dynamic - position of COM with respect to link frame
-    :type r:  SE3
-    :param I: dynamic - inertia of link with respect to COM
-    :type I: float ndarray(3,3)
-    :param Jm: dynamic - motor inertia
-    :type Jm: float
-    :param B: dynamic - motor viscous friction
-    :type B: float
-    :param Tc: dynamic - motor Coulomb friction (1x2 or 2x1)
-    :type Tc: float ndarray(2)
-    :param G: dynamic - gear ratio
-    :type G: float
-
     The Link object holds all information related to a robot link and can form
     a serial-connected chain or a rigid-body tree.
     It inherits from the Link class which provides common functionality such
     as joint and link such as kinematics parameters,
     The transform to the next link is given as an ETS with the joint
     variable, if present, as the last term.  This is preprocessed and
     the object stores:
-        * ``Ts`` the constant part as a NumPy array, or None
-        * ``v`` a pointer to an ETS object representing the joint variable.
-          or None
-
-    :references:
-        - Kinematic Derivatives using the Elementary Transform Sequence,
-          J. Haviland and P. Corke
+    - ``Ts`` the constant part as a NumPy array, or None
+    - ``v`` a pointer to an ETS object representing the joint variable.
+        or None
+
+    Parameters
+    ----------
+    ets
+        kinematic - The elementary transforms which make up the link
+    jindex
+        the joint variable index
+    name
+        name of the link
+    parent
+        a reference to the parent link in the kinematic chain
+    joint_name
+        the name of the joint variable
+    m
+        dynamic - link mass
+    r
+        dynamic - position of COM with respect to link frame
+    I
+        dynamic - inertia of link with respect to COM
+    Jm
+        dynamic - motor inertia
+    B
+        dynamic - motor viscous friction
+    Tc
+        dynamic - motor Coulomb friction [Tc, Tc]
+    G
+        dynamic - gear ratio
+    qlim
+        joint variable limits [min, max]
+    geometry
+        the visual geometry which represents the link. This is used
+        to display the link in Swift
+    collision
+        the collision geometry which represents the link in collision
+        checkers
+
+    See Also
+    --------
+    :class:`Link2`
+    :class:`DHLink`
 
-    :seealso: :class:`Link`, :class:`DHLink`
     """
 
     def __init__(
         self, ets: Union[ETS, ET] = ETS(), jindex: Union[None, int] = None, **kwargs
     ):
-
         # process common options
         super().__init__(ets=ets, **kwargs)
 
         # check we have an ETS
-        if not isinstance(self._ets, ETS):
+        if not isinstance(self._ets, ETS):  # pragma: nocover
             raise TypeError("The ets argument must be of type ETS")
 
         # Set the jindex
         if len(self._ets) > 0 and self._ets[-1].isjoint:
             if jindex is not None:
                 self._ets[-1].jindex = jindex
                 self._ets._auto_jindex = False
 
-    # @property
-    # def ets(self: "Link") -> "ETS":
-    #     """
-    #     Link transform in ETS form
-
-    #     :return: elementary transform sequence for link transform
-    #     :rtype: ETS or ETS2 instance
-
-    #     The sequence:
-    #         - has at least one element
-    #         - may include zero or more constant transforms
-    #         - no more than one variable transform, which if present will
-    #           be last in the sequence
-    #     """
-    #     return self._ets  # type: ignore
-
-    # @ets.setter
-    # def ets(self, new_ets: ETS):
-    #     if new_ets.n > 1:
-    #         raise ValueError("An elementary link can only have one joint variable")
-
-    #     if new_ets.n == 1 and not new_ets[-1].isjoint:
-    #         raise ValueError("Variable link must be at the end of the ETS")
-
-    #     self._ets = new_ets
-
-    #     if self._ets.n:
-    #         self._v = self._ets[-1]
-    #         self._isjoint = True
-    #     else:
-    #         self._v = None
-    #         self._isjoint = False
-
     def A(self, q: float = 0.0) -> SE3:
         """
         Link transform matrix
-        :param q: Joint coordinate (radians or metres). Not required for links
+
+        ``link.A(q)`` is an SE(3) matrix that describes the rigid-body
+        transformation from the previous to the current link frame to
+        the next, which depends on the joint coordinate ``q``.
+
+        Parameters
+        ----------
+        q
+            Joint coordinate (radians or metres). Not required for links
             with no variable
 
-        :return T: link frame transformation matrix
+        Returns
+        -------
+        T
+            link frame transformation matrix
 
-        ``LINK.A(q)`` is an SE(3) matrix that describes the rigid-body
-          transformation from the previous to the current link frame to
-          the next, which depends on the joint coordinate ``q``.
         """
         if self.isjoint:
-            return SE3(self._Ts @ self._ets[-1].A(q), check=False)
-        else:
+            if self._Ts is not None:
+                return SE3(self._Ts @ self._ets[-1].A(q), check=False)
+            else:
+                return SE3(self._ets[-1].A(q), check=False)
+
+        elif self._Ts is not None:
             return SE3(self._Ts, check=False)
+        else:
+            return SE3()
 
 
 class Link2(BaseLink):
     def __init__(self, ets: ETS2 = ETS2(), jindex: Union[int, None] = None, **kwargs):
-
         # process common options
         super().__init__(ets=ets, **kwargs)
 
         # check we have an ETS
-        if not isinstance(self._ets, ETS2):
+        if not isinstance(self._ets, ETS2):  # pragma: nocover
             raise TypeError("The self._ets argument must be of type ETS2")
 
         # Set the jindex
         if len(self._ets) > 0 and self._ets[-1].isjoint:
             if jindex is not None:
-                self._ets[-1].jindex = jindex
-
-    # @property
-    # def ets(self) -> "ETS2":
-    #     """
-    #     Link transform in ETS form
-
-    #     :return: elementary transform sequence for link transform
-    #     :rtype: ETS or ETS2 instance
-
-    #     The sequence:
-    #         - has at least one element
-    #         - may include zero or more constant transforms
-    #         - no more than one variable transform, which if present will
-    #           be last in the sequence
-    #     """
-    #     return self._ets
-
-    # @ets.setter
-    # def ets(self, new_ets: ETS2):
-    #     if new_ets.n > 1:
-    #         raise ValueError("An elementary link can only have one joint variable")
-
-    #     if new_ets.n == 1 and not new_ets[-1].isjoint:
-    #         raise ValueError("Variable link must be at the end of the ETS")
-
-    #     self._ets = new_ets
-
-    #     if self._ets.n:
-    #         self._v = self._ets[-1]
-    #         self._isjoint = True
-    #     else:
-    #         self._v = None
-    #         self._isjoint = False
+                self._ets[-1].jindex = jindex  # pragma: nocover
 
     def A(self, q: float = 0.0) -> SE2:
         """
         Link transform matrix
 
-        :param q: Joint coordinate (radians or metres). Not required for links
+        ``link.A(q)`` is an SE(2) matrix that describes the rigid-body
+        transformation from the previous to the current link frame to
+        the next, which depends on the joint coordinate ``q``.
+
+        Parameters
+        ----------
+        q
+            Joint coordinate (radians or metres). Not required for links
             with no variable
 
-        :return T: link frame transformation matrix
+        Returns
+        -------
+        T
+            link frame transformation matrix
 
-        ``LINK.A(q)`` is an SE(3) matrix that describes the rigid-body
-          transformation from the previous to the current link frame to
-          the next, which depends on the joint coordinate ``q``.
         """
 
         if self.isjoint:
-            return SE2(self._Ts @ self._ets[-1].A(q), check=False)
-        else:
-            return SE2(self._Ts, check=False)
-
-
-if __name__ == "__main__":  # pragma nocover
-
-    import sympy
-    from roboticstoolbox import *
+            if self._Ts is not None:
+                return SE2(self._Ts @ self._ets[-1].A(q), check=False)
+            else:
+                return SE2(self._ets[-1].A(q), check=False)
 
-    a1, a2, r1, r2, m1, m2, g = sympy.symbols("a1 a2 r1 r2 m1 m2 g")
-    link1 = Link(ET.Ry(flip=True), m=m1, r=[r1, 0, 0], name="link0")
-    link2 = Link(ET.tx(a1) * ET.Ry(flip=True), m=m2, r=[r2, 0, 0], name="link1")
-    print(link1)
-    robot = ERobot([link1, link2])
-    print(robot)
-    robot.dynamics()
-
-    # a = Link(name='bob')
-    # print(a)
-    # print(repr(a))
-
-    # a = Link(name='bob', parent='foo')
-    # print(a)
-    # print(repr(a))
-
-    # a = rtb.models.URDF.UR5()
-    # print(a[3])
-    # print(repr(a[3]))
+        elif self._Ts is not None:
+            return SE2(self._Ts, check=False)
+        else:
+            return SE2()
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/PoERobot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/PoERobot.py`

 * *Files 11% similar despite different names*

```diff
@@ -29,28 +29,16 @@
     def __str__(self):
         s = f"{self.__class__.__name__}[twist={self.S}"
         if self.name is not None:
             s += f', name="{self.name}"'
         s += "]"
         return s
 
-    def _repr_pretty_(self, p, cycle):
-        """
-        Pretty string for IPython (superclass method)
-
-        :param p: pretty printer handle (ignored)
-        :param cycle: pretty printer flag (ignored)
-
-        """
-        # see https://ipython.org/ipython-doc/stable/api/generated/IPython.lib.pretty.html
-
-        p.text(f"{i}:\n{str(x)}")
 
 class PoERevolute(PoELink):
-
     def __init__(self, axis, point, **kwargs):
         """
         Construct revolute product of exponential link
 
         :param axis: axis of rotation
         :type axis: array_like(3)
         :param point: point on axis of rotation
@@ -58,31 +46,32 @@
 
         Construct a link and revolute joint for a PoE Robot.
 
         :seealso: :class:`Link` :class:`Robot`
         """
 
         super().__init__(Twist3.UnitRevolute(axis, point), **kwargs)
-class PoEPrismatic(PoELink):
 
 
+class PoEPrismatic(PoELink):
     def __init__(self, axis, **kwargs):
         """
         Construct prismatic product of exponential link
 
         :param axis: direction of motion
         :type axis: array_like(3)
 
         Construct a link and prismatic joint for a PoE Robot.
 
         :seealso: :class:`Link` :class:`Robot`
         """
         super().__init__(Twist3.UnitPrismatic(axis), **kwargs)
-class PoERobot(Robot):
 
+
+class PoERobot(Robot):
     def __init__(self, links, T0, **kwargs):
         """
         Product of exponential robot class
 
         :param links: robot links
         :type links: list of ``PoELink``
         :param T0: end effector pose for zero joint coordinates
@@ -95,50 +84,37 @@
         """
 
         self._n = len(links)
 
         super().__init__(links, **kwargs)
         self.T0 = T0
 
-
     def __str__(self):
         """
         Pretty prints the PoE Model of the robot.
         :return: Pretty print of the robot model
         :rtype: str
         """
         s = "PoERobot:\n"
         for j, link in enumerate(self):
             s += f"  {j}: {link.S}\n"
 
         s += f"  T0: {self.T0.strline()}"
         return s
 
     def __repr__(self):
-        s = "PoERobot([\n    "
-        for j, link in enumerate(self):
-            s += repr(link) + ","
-        s += "],\n"
+        s = "PoERobot([\n"
+        s += "\n".join(["    " + repr(link) + "," for link in self])
+        s += "\n    ],\n"
         s += f"    T0=SE3({np.array_repr(self.T0.A)}),\n"
-        s += f"    name={self.name},\n"
+        s += f"    name=\"{self.name}\",\n"
         s += ")"
         return s
 
-    def _repr_pretty_(self, p, cycle):
-        """
-        Pretty string for IPython (superclass method)
 
-        :param p: pretty printer handle (ignored)
-        :param cycle: pretty printer flag (ignored)
-
-        """
-        # see https://ipython.org/ipython-doc/stable/api/generated/IPython.lib.pretty.html
-
-        p.text(f"{i}:\n{str(x)}")
-        
     def nbranches(self):
         return 0
 
     def fkine(self, q):
         """
         Forward kinematics
 
@@ -200,31 +176,32 @@
 
         # convert velocity twist from world frame to EE frame
         return T.inv().Ad() @ J
 
     def ets(self):
         return NotImplemented
 
+
 if __name__ == "__main__":  # pragma nocover
 
     T0 = SE3.Trans(2, 0, 0)
 
     # rotate about z-axis, through (0,0,0)
-    link1 = PoERevolute([0, 0, 1], [0, 0, 0], name='foo')
+    link1 = PoERevolute([0, 0, 1], [0, 0, 0], name="foo")
     # rotate about z-axis, through (1,0,0)
     link2 = PoERevolute([0, 0, 1], [1, 0, 0])
     # end-effector pose when q=[0,0]
     TE0 = SE3.Trans(2, 0, 0)
 
     print(repr(link1))
     print(link1)
 
     robot = PoERobot([link1, link2], T0)
 
-    q = [0, np.pi/2]
+    q = [0, np.pi / 2]
     # q = [0, 0]
 
     # robot.fkine(q).printline()
     # print(robot.jacob0(q))
     # print(robot.jacobe(q))
     print(repr(robot))
     print(robot)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/robot/__init__.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,54 +1,54 @@
-from roboticstoolbox.robot.Robot import Robot
+from roboticstoolbox.robot.Robot import BaseRobot, Robot, Robot2
 from roboticstoolbox.robot.Link import Link, Link2
 from roboticstoolbox.robot.DHRobot import SerialLink, DHRobot
 from roboticstoolbox.robot.DHLink import (
     DHLink,
     RevoluteDH,
     PrismaticDH,
     RevoluteMDH,
     PrismaticMDH,
 )
-from roboticstoolbox.robot.PoERobot import (
-    PoELink,
-    PoERobot,
-    PoERevolute, 
-    PoEPrismatic
-)
+from roboticstoolbox.robot.PoERobot import PoELink, PoERobot, PoERevolute, PoEPrismatic
 from roboticstoolbox.robot.ERobot import ERobot, ERobot2
-# from roboticstoolbox.robot.FastRobot import FastRobot
 
 from roboticstoolbox.robot.ELink import ELink, ELink2
 from roboticstoolbox.robot.ETS import ETS, ETS2
 from roboticstoolbox.robot.Gripper import Gripper
-# from roboticstoolbox.robot.KinematicCache import KinematicCache
 from roboticstoolbox.robot.ET import ET, ET2
 
+from roboticstoolbox.robot.IK import IKSolution, IKSolver, IK_LM, IK_NR, IK_GN, IK_QP
+
 __all__ = [
     "Robot",
+    "Robot2",
     "SerialLink",
     "DHRobot",
     "Link",
     "DHLink",
     "RevoluteDH",
     "PrismaticDH",
     "RevoluteMDH",
     "PrismaticMDH",
-    "ERobot",
+    "BaseRobot",
     "ELink",
     "ELink2",
     "Link",
     "Link2",
     "ERobot",
     "ERobot2",
-    # "FastRobot",
     "ETS",
     "ETS2",
     "Gripper",
-    # "KinematicCache",
     "PoERobot",
     "PoELink",
     "PoEPrismatic",
     "PoERevolute",
     "ET",
     "ET2",
+    "IKSolution",
+    "IKSolver",
+    "IK_LM",
+    "IK_NR",
+    "IK_GN",
+    "IK_QP",
 ]
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ikine_evaluate.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ikine_evaluate.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/robot/ikine_evaluate2.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/examples/ikine_evaluate2.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/DHFactor.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/DHFactor.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/Ticker.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/Ticker.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/__init__.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 from roboticstoolbox.tools.null import null
-from roboticstoolbox.tools.p_servo import p_servo, angle_axis
+from roboticstoolbox.tools.p_servo import p_servo, angle_axis, angle_axis_python
 from roboticstoolbox.tools.Ticker import Ticker
 from roboticstoolbox.tools.urdf import *  # noqa
 from roboticstoolbox.tools.trajectory import (
     quintic,
     quintic_func,
     jtraj,
     mtraj,
@@ -18,18 +18,20 @@
     rtb_load_data,
     rtb_load_matfile,
     rtb_load_jsonfile,
     rtb_path_to_datafile,
 )
 from roboticstoolbox.tools.plot import xplot
 from roboticstoolbox.tools.params import rtb_set_param, rtb_get_param
+from roboticstoolbox.tools.types import ArrayLike, NDArray, PyArrayLike
 
 __all__ = [
     "null",
     "p_servo",
+    "angle_axis_python",
     "angle_axis",
     "Ticker",
     "quintic",
     "quintic_func",
     "jtraj",
     "ctraj",
     "trapezoidal",
@@ -42,8 +44,11 @@
     "hessian_numerical",
     "rtb_load_data",
     "rtb_load_matfile",
     "rtb_load_jsonfile",
     "rtb_path_to_datafile",
     "rtb_set_param",
     "rtb_get_param",
+    "PyArrayLike",
+    "ArrayLike",
+    "NDArray",
 ]
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/data.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/data.py`

 * *Files 2% similar despite different names*

```diff
@@ -99,15 +99,15 @@
 
     
     .. note:: If the filename has no path component, eg. ``foo.dat``, it will 
         first be looked for in the folder ``roboticstoolbox/data``.
 
     :seealso: :func:`path_to_datafile`
     """
-    path = rtb_path_to_datafile(filename)
+    path = rtb_path_to_datafile(filename, local=False)
     return handler(path, **kwargs)
 
 def rtb_path_to_datafile(*filename, local=True):
     """
     Get absolute path to datafile
 
     :param filename: pathname of datafile
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/jsingu.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/jsingu.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/null.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/null.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/numerical.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/numerical.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/p_servo.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/p_servo.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,18 +1,29 @@
 #!/usr/bin/env python
 
 import numpy as np
 from spatialmath import SE3, base
 import math
 from typing import Union
+from roboticstoolbox.fknm import Angle_Axis
 
 ArrayLike = Union[list, np.ndarray, tuple, set]
 
 
 def angle_axis(T, Td):
+
+    try:
+        e = Angle_Axis(T, Td)
+    except BaseException:
+        e = angle_axis_python(T, Td)
+
+    return e
+
+
+def angle_axis_python(T, Td):
     e = np.empty(6)
     e[:3] = Td[:3, -1] - T[:3, -1]
     R = Td[:3, :3] @ T[:3, :3].T
     li = np.array([R[2, 1] - R[1, 2], R[0, 2] - R[2, 0], R[1, 0] - R[0, 1]])
 
     if base.iszerovec(li):
         # diagonal matrix case
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/plot.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/plot.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 import numpy as np
 import matplotlib.pyplot as plt
 
+
 def xplot(
     x,
     y=None,
     wrist=False,
     unwrap=False,
     block=False,
     labels=None,
@@ -97,12 +98,12 @@
             plt.plot(t, q, **kwargs)
 
         ax.legend(labels, loc=loc)
 
         plt.grid(grid)
         ax.set_xlabel("Time (s)")
         ax.set_ylabel("Joint coordinates (rad,m)")
-        ax.set_xlim(t[0], t[-1])
+        # ax.set_xlim(t[0], t[-1])  fails with RVC3 Sec 3.3.3
 
     plt.show(block=block)
 
     return fig.get_axes()
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/trajectory.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/trajectory.py`

 * *Files 6% similar despite different names*

```diff
@@ -44,24 +44,31 @@
         - ``sdd``  the acceleration
 
         If ``t`` is time, ie. ``istime`` is True, then the units of ``sd`` and
         ``sdd`` are :math:`s^{-1}` and :math:`s^{-2}` respectively, otherwise
         with respect to ``t``.
 
         .. note:: Data is stored with timesteps as rows and axes as columns.
+
+        :References:
+
+            - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
         """
         self.name = name
         self.t = t
         self.s = s
         self.sd = sd
         self.sdd = sdd
         self.istime = istime
 
     def __str__(self):
-        s = f"Trajectory created by {self.name}: {len(self)} time steps x {self.naxes} axes"
+        s = (
+            f"Trajectory created by {self.name}: {len(self)} time steps x"
+            f" {self.naxes} axes"
+        )
         return s
 
     def __repr__(self):
         return str(self)
 
     def __len__(self):
         """
@@ -158,19 +165,23 @@
         plotopts = {"marker": "o", "markersize": 3}
         if plotargs is not None:
             plotopts = {**plotopts, **plotargs}
         textopts = {"fontsize": 12}
         if textargs is not None:
             textopts = {**textopts, **textargs}
 
+        nplots = 3
+        if self.name == "mstraj":
+            nplots = 1
+
         plt.figure()
-        ax = plt.subplot(3, 1, 1)
+        ax = plt.subplot(nplots, 1, 1)
 
         # plot position
-        if self.name == "quintic":
+        if self.name in "quintic":
             ax.plot(self.t, self.s, **plotopts)
 
         elif self.name == "trapezoidal":
             # accel phase
             tf = self.t[-1]
             k = self.t <= self.tblend
             ax.plot(self.t[k], self.s[k], color="red", label="acceleration", **plotopts)
@@ -210,37 +221,38 @@
         ax.set_xlim(0, max(self.t))
 
         if self.istime:
             ax.set_ylabel("$q(t)$", **textopts)
         else:
             ax.set_ylabel("$q(k)$", **textopts)
 
-        # plot velocity
-        ax = plt.subplot(3, 1, 2)
-        ax.plot(self.t, self.sd, **plotopts)
-        ax.grid(True)
-        ax.set_xlim(0, max(self.t))
+        if nplots > 1:
+            # plot velocity
+            ax = plt.subplot(3, 1, 2)
+            ax.plot(self.t, self.sd, **plotopts)
+            ax.grid(True)
+            ax.set_xlim(0, max(self.t))
 
-        if self.istime:
-            ax.set_ylabel("$\dot{{q}}(t)$", **textopts)
-        else:
-            ax.set_ylabel("$dq/dk$", **textopts)
+            if self.istime:
+                ax.set_ylabel("$\dot{{q}}(t)$", **textopts)
+            else:
+                ax.set_ylabel("$dq/dk$", **textopts)
 
-        # plot acceleration
-        ax = plt.subplot(3, 1, 3)
-        ax.plot(self.t, self.sdd, **plotopts)
-        ax.grid(True)
-        ax.set_xlim(0, max(self.t))
+            # plot acceleration
+            ax = plt.subplot(3, 1, 3)
+            ax.plot(self.t, self.sdd, **plotopts)
+            ax.grid(True)
+            ax.set_xlim(0, max(self.t))
 
-        if self.istime:
-            ax.set_ylabel(f"$\ddot{{q}}(t)$", **textopts)
-            ax.set_xlabel("t (seconds)")
-        else:
-            ax.set_ylabel("$d^2q/dk^2$", **textopts)
-            ax.set_xlabel("k (step)")
+            if self.istime:
+                ax.set_ylabel(f"$\ddot{{q}}(t)$", **textopts)
+                ax.set_xlabel("t (seconds)")
+            else:
+                ax.set_ylabel("$d^2q/dk^2$", **textopts)
+                ax.set_xlabel("k (step)")
 
         plt.show(block=block)
 
     def qplot(self, **kwargs):
         """
         Plot multi-axis trajectory
 
@@ -249,14 +261,17 @@
         Plots a multi-axis trajectory, held within the object, as position against time.
 
         :seealso: :func:`qplot`
         """
         xplot(self.t, self.q, **kwargs)
 
 
+# -------------------------------------------------------------------------- #
+
+
 def quintic(q0, qf, t, qd0=0, qdf=0):
     """
     Generate scalar polynomial trajectory
 
     :param q0: initial value
     :type q0: float
     :param qf: final value
@@ -264,15 +279,15 @@
     :param t: time
     :type t: int or array_like(m)
     :param qd0: initial velocity, optional
     :type q0: float
     :param qdf: final velocity, optional
     :type q0: float
     :return: trajectory
-    :rtype: Trajectory instance
+    :rtype: :class:`Trajectory` instance
 
     - ``tg = quintic(q0, q1, m)`` is a scalar trajectory (Mx1) that varies
       smoothly from ``q0`` to ``qf`` using a quintic polynomial.  The initial
       and final velocity and acceleration are zero. ``m`` is an integer scalar,
       indicating the total number of timesteps and
 
             - Velocity is in units of distance per trajectory step, not per
@@ -285,21 +300,39 @@
 
             - Velocity is in units of distance per second.
             - Acceleration is in units of distance per second squared.
 
     The return value is an object that contains position, velocity and
     acceleration data.
 
+    Example:
+
+    .. runblock:: pycon
+
+        >>> from roboticstoolbox import quintic
+        >>> tg = quintic(1, 2, 10)
+        >>> tg
+        >>> len(tg)
+        >>> tg.q
+        >>> tg.plot()
+
+    .. plot::
+
+        from roboticstoolbox import quintic
+        tg = quintic(1, 2, 10)
+        tg.plot()
+
+
     .. note:: The time vector T is assumed to be monotonically increasing, and
         time scaling is based on the first and last element.
 
-    References:
+    :References:
+
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
 
-    - Robotics, Vision & Control, Chap 3,
-      P. Corke, Springer 2011.
 
     :seealso: :func:`trapezoidal`, :func:`mtraj`.
     """
     if isinstance(t, int):
         t = np.arange(0, t)
         istime = False
     elif isvector(t):
@@ -317,24 +350,57 @@
     pd = traj[1]
     pdd = traj[2]
 
     return Trajectory("quintic", t, p, pd, pdd, istime)
 
 
 def quintic_func(q0, qf, T, qd0=0, qdf=0):
+    """
+    Quintic scalar polynomial as a function
+
+    :param q0: initial value
+    :type q0: float
+    :param qf: final value
+    :type qf: float
+    :param T: trajectory time
+    :type T: float
+    :param qd0: initial velocity, defaults to 0
+    :type q0: float, optional
+    :param qdf: final velocity, defaults to 0
+    :type q0: float, optional
+    :return: polynomial function :math:`f: t \mapsto (q(t), \dot{q}(t), \ddot{q}(t))`
+    :rtype: callable
+
+    Returns a function which computes the specific quintic polynomial, and its
+    derivatives, as described by the parameters.
+
+    Example:
+
+    .. runblock:: pycon
+
+        >>> from roboticstoolbox import quintic_func
+        >>> f = quintic_func(1, 2, 5)
+        >>> f(0)
+        >>> f(5)
+        >>> f(2.5)
+
+    :seealso: :func:`quintic` :func:`trapezoidal_func`
+    """
 
     # solve for the polynomial coefficients using least squares
+    # fmt: off
     X = [
-        [0, 0, 0, 0, 0, 1],
-        [T**5, T**4, T**3, T**2, T, 1],
-        [0, 0, 0, 0, 1, 0],
-        [5 * T**4, 4 * T**3, 3 * T**2, 2 * T, 1, 0],
-        [0, 0, 0, 2, 0, 0],
-        [20 * T**3, 12 * T**2, 6 * T, 2, 0, 0],
+        [ 0.0,          0.0,         0.0,        0.0,     0.0,  1.0],
+        [ T**5,         T**4,        T**3,       T**2,    T,    1.0],
+        [ 0.0,          0.0,         0.0,        0.0,     1.0,  0.0],
+        [ 5.0 * T**4,   4.0 * T**3,  3.0 * T**2, 2.0 * T, 1.0,  0.0],
+        [ 0.0,          0.0,         0.0,        2.0,     0.0,  0.0],
+        [20.0 * T**3,  12.0 * T**2,  6.0 * T,    2.0,     0.0,  0.0],
     ]
+    # fmt: on
     coeffs, resid, rank, s = np.linalg.lstsq(
         X, np.r_[q0, qf, qd0, qdf, 0, 0], rcond=None
     )
 
     # coefficients of derivatives
     coeffs_d = coeffs[0:5] * np.arange(5, 0, -1)
     coeffs_dd = coeffs_d[0:4] * np.arange(4, 0, -1)
@@ -346,32 +412,38 @@
     )
 
 
 # -------------------------------------------------------------------------- #
 
 
 def lspb(*args, **kwargs):
+    """
+    .. warning:: Deprecated, use ``trapezoidal`` instead.
+    """
     warnings.warn("lsp is deprecated, use trapezoidal", FutureWarning)
     return trapezoidal(*args, **kwargs)
 
 
+# -------------------------------------------------------------------------- #
+
+
 def trapezoidal(q0, qf, t, V=None):
     """
     Scalar trapezoidal trajectory
 
     :param q0: initial value
     :type q0: float
     :param qf: final value
     :type qf: float
     :param t: time
     :type t: float or array_like
     :param V: velocity of linear segment, optional
     :type V: float
     :return: trajectory
-    :rtype: Trajectory instance
+    :rtype: :class:`Trajectory` instance
 
     Computes a trapezoidal trajectory, which has a linear motion segment with
     parabolic blends.
 
     - ``tg = trapezoidal(q0, qf, t)`` is a scalar trajectory (Mx1) that varies
       smoothly from ``q0`` to ``qf`` in M steps using a constant velocity
       segment and parabolic blends.  Time ``t`` can be either:
@@ -389,27 +461,42 @@
 
     - ``tg = trapezoidal(q0, q1, t, V)``  as above but specifies the velocity of the
       linear segment which is normally computed automatically.
 
     The return value is an object that contains position, velocity and
     acceleration data.
 
+    Example:
+
+    .. runblock:: pycon
+
+        >>> from roboticstoolbox import trapezoidal
+        >>> tg = trapezoidal(1, 2, 10)
+        >>> tg
+        >>> len(tg)
+        >>> tg.q
+
+    .. plot::
+
+        from roboticstoolbox import trapezoidal
+        tg = trapezoidal(1, 2, 10)
+        tg.plot()
+
     .. note::
 
-        - For some values of V no solution is possible and an error is flagged.
+        - For some values of ``V`` no solution is possible and an error is flagged.
         - The time vector, if given, is assumed to be monotonically increasing,
           and time scaling is based on the first and last element.
         - ``tg`` has an extra attribute ``xblend`` which is the blend duration.
 
     :References:
 
-        - Robotics, Vision & Control, Chap 3,
-          P. Corke, Springer 2011.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
 
-    :seealso: :func:`quintic`, :func:`mtraj`.
+    :seealso: :func:`quintic`, :func:`trapezoidal_func` :func:`mtraj`.
     """
 
     if isinstance(t, int):
         t = np.arange(0, t)
         istime = False
     elif isvector(t):
         t = getvector(t)
@@ -428,35 +515,59 @@
     pdd = traj[2]
 
     traj = Trajectory("trapezoidal", t, p, pd, pdd, istime)
     traj.tblend = trapezoidalfunc.tb
     return traj
 
 
-def trapezoidal_func(q0, qf, tf, V=None):
+def trapezoidal_func(q0, qf, T, V=None):
+    r"""
+    Trapezoidal scalar profile as a function
+
+    :param q0: initial value
+    :type q0: float
+    :param qf: final value
+    :type qf: float
+    :param T: maximum time
+    :type T: float
+    :param V: velocity of linear segment
+    :type V: float, optional
+    :return: trapezoidal profile function :math:`f: t \mapsto (q(t), \dot{q}(t), \ddot{q}(t))`
+    :rtype: callable
+
+    Returns a function which computes the specific trapezoidal profile, and its
+    derivatives, as described by the parameters.
+
+    Example:
+
+    .. runblock:: pycon
+
+        >>> from roboticstoolbox import trapezoidal_func
+        >>> f = trapezoidal_func(1, 2, 5)
+        >>> f(0)
+        >>> f(5)
+        >>> f(2.5)
+    """
 
     if V is None:
         # if velocity not specified, compute it
-        V = (qf - q0) / tf * 1.5
+        V = (qf - q0) / T * 1.5
     else:
         V = abs(V) * np.sign(qf - q0)
-        if abs(V) < (abs(qf - q0) / tf):
+        if abs(V) < (abs(qf - q0) / T):
             raise ValueError("V too small")
-        elif abs(V) > (2 * abs(qf - q0) / tf):
+        elif abs(V) > (2 * abs(qf - q0) / T):
             raise ValueError("V too big")
 
-    if q0 == qf:
-        # Commented these because they arent used anywhere
-        # s = np.ones((len(t), len(t))) @ q0
-        # sd = np.zeros((len(t), len(t)))
-        # sdd = np.zeros((len(t), len(t)))
-        return
-
-    tb = (q0 - qf + V * tf) / V
-    a = V / tb
+    if V == 0:
+        tb = np.inf
+        a = 0
+    else:
+        tb = (q0 - qf + V * T) / V
+        a = V / tb
 
     def trapezoidalfunc(t):
 
         p = []
         pd = []
         pdd = []
 
@@ -468,23 +579,23 @@
                 pdk = 0
                 pddk = 0
             elif tk <= tb:
                 # initial blend
                 pk = q0 + a / 2 * tk**2
                 pdk = a * tk
                 pddk = a
-            elif tk <= (tf - tb):
+            elif tk <= (T - tb):
                 # linear motion
-                pk = (qf + q0 - V * tf) / 2 + V * tk
+                pk = (qf + q0 - V * T) / 2 + V * tk
                 pdk = V
                 pddk = 0
-            elif tk <= tf:
+            elif tk <= T:
                 # final blend
-                pk = qf - a / 2 * tf**2 + a * tf * tk - a / 2 * tk**2
-                pdk = a * tf - a * tk
+                pk = qf - a / 2 * T**2 + a * T * tk - a / 2 * tk**2
+                pdk = a * T - a * tk
                 pddk = -a
             else:
                 pk = qf
                 pdk = 0
                 pddk = 0
             p.append(pk)
             pd.append(pdk)
@@ -499,14 +610,83 @@
 
     return func
 
 
 # -------------------------------------------------------------------------- #
 
 
+def mtraj(tfunc, q0, qf, t):
+    """
+    Multi-axis trajectory
+
+    :param tfunc: a 1D trajectory function, eg. :func:`quintic` or :func:`trapezoidal`
+    :type tfunc: callable
+    :param q0: initial configuration
+    :type q0: ndarray(m)
+    :param qf: final configuration
+    :type qf: ndarray(m)
+    :param t: time vector or number of steps
+    :type t: array_like or int
+    :raises TypeError: ``tfunc`` is not callable
+    :raises ValueError: length of ``q0`` and ``qf`` are different
+    :return: trajectory
+    :rtype: :class:`Trajectory` instance
+
+    - ``tg = mtraj(func, q0, qf, n)`` is a multi-axis trajectory varying
+      from configuration ``q0`` (M) to ``qf`` (M) according to the scalar trajectory
+      function ``tfunc`` in ``n`` steps.
+
+    - ``tg = mtraj(func, q0, qf, t)`` as above but ``t`` is a uniformly-spaced time
+      vector
+
+    The scalar trajectory function is applied to each axis::
+
+            tg = tfunc(s0, sF, n)
+
+    and possible values of ``tfunc`` include ``trapezoidal`` for a trapezoidal trajectory, or
+    ``quintic`` for a polynomial trajectory.
+
+    The return value is an object that contains position, velocity and
+    acceleration data.
+
+    .. note:: The time vector, if given, is assumed to be monotonically increasing, and
+        time scaling is based on the first and last element.
+
+    :References:
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
+
+    :seealso: :func:`quintic`, :func:`trapezoidal`
+    """
+
+    if not callable(tfunc):
+        raise TypeError("first argument must be a function reference")
+
+    q0 = getvector(q0)
+    qf = getvector(qf)
+    if len(q0) != len(qf):
+        raise ValueError("must be same number of elements in q0 and qf")
+
+    traj = []
+    for i in range(len(q0)):
+        # for each axis
+        traj.append(tfunc(q0[i], qf[i], t))
+
+    x = traj[0].t
+    y = np.array([tg.s for tg in traj]).T
+    yd = np.array([tg.sd for tg in traj]).T
+    ydd = np.array([tg.sdd for tg in traj]).T
+
+    istime = traj[0].istime
+
+    return Trajectory("mtraj", x, y, yd, ydd, istime)
+
+
+# -------------------------------------------------------------------------- #
+
+
 def jtraj(q0, qf, t, qd0=None, qd1=None):
     """
     Compute a joint-space trajectory
 
     :param q0: initial joint coordinate
     :type q0: array_like(n)
     :param qf: final joint coordinate
@@ -514,32 +694,33 @@
     :param t: time vector or number of steps
     :type t: array_like or int
     :param qd0: initial velocity, defaults to zero
     :type qd0: array_like(n), optional
     :param qd1: final velocity, defaults to zero
     :type qd1: array_like(n), optional
     :return: trajectory
-    :rtype: Trajectory instance
+    :rtype: :class:`Trajectory` instance
 
     - ``tg = jtraj(q0, qf, N)`` is a joint space trajectory where the joint
       coordinates vary from ``q0`` (M) to ``qf`` (M).  A quintic (5th order)
       polynomial is used with default zero boundary conditions for velocity and
       acceleration.  Time is assumed to vary from 0 to 1 in ``N`` steps.
 
     - ``tg = jtraj(q0, qf, t)`` as above but ``t`` is a uniformly-spaced time
       vector
 
     The return value is an object that contains position, velocity and
     acceleration data.
 
-    Notes:
+    .. note:: The time vector, if given, scales the velocity and acceleration outputs
+        assuming that the time vector starts at zero and increases linearly.
+
+    :References:
 
-    - The time vector, if given, scales the velocity and acceleration outputs
-      assuming that the time vector starts at zero and increases
-      linearly.
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
 
     :seealso: :func:`ctraj`, :func:`qplot`, :func:`~SerialLink.jtraj`
     """
     # print(f"  --- jtraj: {q0} --> {q1} in {tv}")
     if isinstance(t, int):
         tscal = 1.0
         ts = np.linspace(0, 1, t)  # normalized time from 0 -> 1
@@ -591,77 +772,14 @@
         [np.zeros(A.shape), np.zeros(A.shape), 20 * A, 12 * B, 6 * C, np.zeros(A.shape)]
     )
     qddt = tt @ coeffs / tscal**2
 
     return Trajectory("jtraj", tv, qt, qdt, qddt, istime=True)
 
 
-def mtraj(tfunc, q0, qf, t):
-    """
-    Multi-axis trajectory
-
-    :param tfunc: a 1D trajectory function, eg. :func:`quintic` or :func:`trapezoidal`
-    :type tfunc: callable
-    :param q0: initial configuration
-    :type q0: ndarray(m)
-    :param qf: final configuration
-    :type qf: ndarray(m)
-    :param t: time vector or number of steps
-    :type t: array_like or int
-    :raises TypeError: ``tfunc`` is not callable
-    :raises ValueError: length of ``q0`` and ``qf`` are different
-    :return: trajectory
-    :rtype: Trajectory instance
-
-    - ``tg = mtraj(func, q0, qf, n)`` is a multi-axis trajectory varying
-      from configuration ``q0`` (M) to ``qf`` (M) according to the scalar trajectory
-      function ``tfunc`` in ``n``` steps.
-
-    - ``tg = mtraj(func, q0, qf, t)`` as above but ``t`` is a uniformly-spaced time
-      vector
-
-    The scalar trajectory function is applied to each axis::
-
-            tg = tfunc(s0, sF, n)
-
-    and possible values of TFUNC include ``trapezoidal`` for a trapezoidal trajectory, or
-    ``quintic`` for a polynomial trajectory.
-
-    The return value is an object that contains position, velocity and
-    acceleration data.
-
-    .. note:: The time vector, if given, is assumed to be monotonically increasing, and
-        time scaling is based on the first and last element.
-
-    :seealso: :func:`quintic`, :func:`trapezoidal`
-    """
-
-    if not callable(tfunc):
-        raise TypeError("first argument must be a function reference")
-
-    q0 = getvector(q0)
-    qf = getvector(qf)
-    if len(q0) != len(qf):
-        raise ValueError("must be same number of elements in q0 and qf")
-
-    traj = []
-    for i in range(len(q0)):
-        # for each axis
-        traj.append(tfunc(q0[i], qf[i], t))
-
-    x = traj[0].t
-    y = np.array([tg.s for tg in traj]).T
-    yd = np.array([tg.sd for tg in traj]).T
-    ydd = np.array([tg.sdd for tg in traj]).T
-
-    istime = traj[0].istime
-
-    return Trajectory("mtraj", x, y, yd, ydd, istime)
-
-
 # -------------------------------------------------------------------------- #
 
 
 def ctraj(T0, T1, t=None, s=None):
     """
     Cartesian trajectory between two poses
 
@@ -691,25 +809,23 @@
 
     Examples::
 
         >>> tg = ctraj(SE3.Rand(), SE3.Rand(), 20)
         >>> len(tg)
         20
 
-    Notes:
-
-    - In the second case ``s`` could be generated by a scalar trajectory
-      generator such as ``quintic`` or ``trapezoidal`` (default).
-    - Orientation interpolation is performed using unit-quaternion
-      interpolation.
+    .. note::
 
-    Reference:
+        - In the second case ``s`` could be generated by a scalar trajectory
+        generator such as ``quintic`` or ``trapezoidal`` (default).
+        - Orientation interpolation is performed using unit-quaternion
+        interpolation.
 
-    - Robotics, Vision & Control, Sec 3.1.5,
-      Peter Corke, Springer 2011
+    :References:
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
 
     :seealso: :func:`~roboticstoolbox.trajectory.trapezoidal`,
         :func:`~spatialmath.unitquaternion.interp`
     """
 
     if isinstance(t, int):
         s = trapezoidal(0, 1, t).s
@@ -721,14 +837,16 @@
     else:
         raise TypeError("bad argument for time, must be int or vector")
 
     return T0.interp(T1, s)
 
 
 def cmstraj():
+    # Cartesian version of mstraj, via points are SE3
+    # perhaps refactor mstraj to allow interpolation of any type
     pass
 
 
 # -------------------------------------------------------------------------- #
 
 
 def mstraj(
@@ -761,15 +879,15 @@
     :param qd0: inital  velocity, defaults to zero
     :type qd0: array_like(n), optional
     :param qdf: final  velocity, defaults to zero
     :type qdf: array_like(n), optional
     :param verbose: print debug information, defaults to False
     :type verbose: bool, optional
     :return: trajectory
-    :rtype: Trajectory instance
+    :rtype: :class:`Trajectory` instance
 
     Computes a trajectory for N axes moving smoothly through a set of
     viapoints.
     The motion comprises M segments:
 
     - The initial coordinates are the first row of ``viapoints`` or ``q0`` if
       provided.
@@ -780,15 +898,15 @@
       coordinated across axes
 
     The time of the segments can be specified in two different ways:
 
     #. In terms of segment time where ``tsegment`` is an array of segment times
        which is the number of via points minus one::
 
-            ``traj = mstraj(viapoints, dt, tacc, tsegment=TS)``
+            traj = mstraj(viapoints, dt, tacc, tsegment=TS)
 
     #. Governed by the speed of the slowest axis for the segment.  The axis
        speed is a scalar (all axes have the same speed) or an N-vector of speed
        per axis::
 
             traj = mstraj(viapoints, dt, tacc, qdmax=SPEED)
 
@@ -800,30 +918,32 @@
         - ``info`` a list of named tuples, one per segment that describe the
           slowest axis, segment time,  and time stamp
         - ``via`` the passed set of via points
 
     The  trajectory proper is (``traj.t``, ``traj.q``).  The trajectory is a
     matrix has one row per time step, and one column per axis.
 
-     Notes:
+    .. note::
 
-     - Only one of ``qdmag`` or ``tsegment`` can be specified
-     - If ``tacc`` is greater than zero then the path smoothly accelerates
-       between segments using a polynomial blend.  This means that the the via
-       point is not actually reached.
-     - The path length K is a function of the number of via
-       points and the time or velocity limits that apply.
-     - Can be used to create joint space trajectories where each axis is a
-       joint coordinate.
-     - Can be used to create Cartesian trajectories where the "axes"
-       correspond to translation and orientation in RPY or Euler angle form.
-     - If ``qdmax`` is a scalar then all axes are assumed to have the same
-       maximum speed.
-    - ``tg`` has extra attributes ``arrive``, ``info`` and ``via``
+        - Only one of ``qdmag`` or ``tsegment`` can be specified
+        - If ``tacc`` is greater than zero then the path smoothly accelerates
+          between segments using a polynomial blend.  This means that the the via
+          point is not actually reached.
+        - The path length K is a function of the number of via
+          points and the time or velocity limits that apply.
+        - Can be used to create joint space trajectories where each axis is a
+          joint coordinate.
+        - Can be used to create Cartesian trajectories where the "axes"
+          correspond to translation and orientation in RPY or Euler angle form.
+        - If ``qdmax`` is a scalar then all axes are assumed to have the same
+          maximum speed.
+        - ``tg`` has extra attributes ``arrive``, ``info`` and ``via``
 
+    :References:
+        - Robotics, Vision & Control in Python, 3e, P. Corke, Springer 2023, Chap 3.
 
     :seealso: :func:`trapezoidal`, :func:`ctraj`, :func:`mtraj`
     """
 
     if q0 is None:
         q0 = viapoints[0, :]
         viapoints = viapoints[1:, :]
@@ -966,18 +1086,21 @@
 
         # create the trajectories for this segment
 
         # linear velocity from qprev to qnext
         qd = dq / tseg
 
         # add the blend polynomial
-        qb = jtraj(q0, q_prev + tacc2 * qd, mrange(0, taccx, dt), qd0=qd_prev, qd1=qd).s
-        if verbose:  # pragma nocover
-            print(qb)
-        tg = np.vstack([tg, qb[1:, :]])
+        if taccx > 0:
+            qb = jtraj(
+                q0, q_prev + tacc2 * qd, mrange(0, taccx, dt), qd0=qd_prev, qd1=qd
+            ).s
+            if verbose:  # pragma nocover
+                print(qb)
+            tg = np.vstack([tg, qb[1:, :]])
 
         clock = clock + taccx  # update the clock
 
         # add the linear part, from tacc/2+dt to tseg-tacc/2
         for t in mrange(tacc2 + dt, tseg - tacc2, dt):
             s = t / tseg
             q0 = (1 - s) * q_prev + s * q_next  # linear step
@@ -986,28 +1109,26 @@
             tg = np.vstack([tg, q0])
             clock += dt
 
         q_prev = q_next  # next target becomes previous target
         qd_prev = qd
 
     # add the final blend
-    qb = jtraj(q0, q_next, mrange(0, tacc2, dt), qd0=qd_prev, qd1=qdf).s
-    tg = np.vstack([tg, qb[1:, :]])
+    if tacc2 > 0:
+        qb = jtraj(q0, q_next, mrange(0, tacc2, dt), qd0=qd_prev, qd1=qdf).s
+        tg = np.vstack([tg, qb[1:, :]])
 
     infolist.append(info(None, tseg, clock))
 
     traj = Trajectory("mstraj", dt * np.arange(0, tg.shape[0]), tg)
     traj.arrive = arrive
     traj.info = infolist
     traj.via = viapoints
 
     return traj
-    # return namedtuple(
-    #     'mstraj', 't q arrive info via')(
-    #         dt * np.arange(0, tg.shape[0]), tg, arrive, infolist, viapoints)
 
 
 if __name__ == "__main__":
 
     # t = quintic(0, 1, 50)
     # t.plot()
 
@@ -1016,12 +1137,18 @@
 
     # t = trapezoidal(0, 1, 50)
     # t.plot()
     # t = trapezoidal(0, 1, np.linspace(0, 1, 50))
     # t.plot(block=True)
 
     from roboticstoolbox import *
+    from spatialmath import SO2
+
+    # puma = models.DH.Puma560()
 
-    puma = models.DH.Puma560()
+    # traj = jtraj(puma.qz, puma.qr, 100)
+    # traj.plot(block=True)
 
-    traj = jtraj(puma.qz, puma.qr, 100)
-    traj.plot(block=True)
+    via = SO2(30, unit="deg") * np.array([[-1, 1, 1, -1, -1], [1, 1, -1, -1, 1]])
+    traj0 = mstraj(via.T, dt=0.2, tacc=0.5, qdmax=[2, 1])
+    xplot(traj0.q[:, 0], traj0.q[:, 1], color="red")
+    traj0.plot(block=True)
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/__init__.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/urdf.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/urdf.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/urdf/utils.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/urdf/utils.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/__init__.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/__init__.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/cli.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/cli.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/color.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/color.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox/tools/xacro/xmlutils.py` & `roboticstoolbox-python-1.1.0/roboticstoolbox/tools/xacro/xmlutils.py`

 * *Files identical despite different names*

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/PKG-INFO` & `roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 00000000: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
 00000010: 3a20 322e 310a 4e61 6d65 3a20 726f 626f  : 2.1.Name: robo
 00000020: 7469 6373 746f 6f6c 626f 782d 7079 7468  ticstoolbox-pyth
-00000030: 6f6e 0a56 6572 7369 6f6e 3a20 312e 302e  on.Version: 1.0.
-00000040: 330a 5375 6d6d 6172 793a 2041 2050 7974  3.Summary: A Pyt
+00000030: 6f6e 0a56 6572 7369 6f6e 3a20 312e 312e  on.Version: 1.1.
+00000040: 300a 5375 6d6d 6172 793a 2041 2050 7974  0.Summary: A Pyt
 00000050: 686f 6e20 6c69 6272 6172 7920 666f 7220  hon library for 
 00000060: 726f 626f 7469 6373 2065 6475 6361 7469  robotics educati
 00000070: 6f6e 2061 6e64 2072 6573 6561 7263 680a  on and research.
 00000080: 4175 7468 6f72 2d65 6d61 696c 3a20 4a65  Author-email: Je
 00000090: 7373 6520 4861 7669 6c61 6e64 203c 6a2e  sse Haviland <j.
 000000a0: 6861 7669 6c61 6e64 4071 7574 2e65 6475  haviland@qut.edu
 000000b0: 2e61 753e 2c20 5065 7465 7220 436f 726b  .au>, Peter Cork
@@ -201,995 +201,982 @@
 00000c80: 612d 666f 7267 652f 726f 626f 7469 6373  a-forge/robotics
 00000c90: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
 00000ca0: 215b 5079 5049 202d 2050 7974 686f 6e20  ![PyPI - Python 
 00000cb0: 5665 7273 696f 6e5d 2868 7474 7073 3a2f  Version](https:/
 00000cc0: 2f69 6d67 2e73 6869 656c 6473 2e69 6f2f  /img.shields.io/
 00000cd0: 7079 7069 2f70 7976 6572 7369 6f6e 732f  pypi/pyversions/
 00000ce0: 726f 626f 7469 6373 746f 6f6c 626f 782d  roboticstoolbox-
-00000cf0: 7079 7468 6f6e 2e73 7667 290a 5b21 5b4c  python.svg).[![L
-00000d00: 6963 656e 7365 3a20 4d49 545d 2868 7474  icense: MIT](htt
-00000d10: 7073 3a2f 2f69 6d67 2e73 6869 656c 6473  ps://img.shields
-00000d20: 2e69 6f2f 6261 6467 652f 4c69 6365 6e73  .io/badge/Licens
-00000d30: 652d 4d49 542d 7965 6c6c 6f77 2e73 7667  e-MIT-yellow.svg
-00000d40: 295d 2868 7474 7073 3a2f 2f6f 7065 6e73  )](https://opens
-00000d50: 6f75 7263 652e 6f72 672f 6c69 6365 6e73  ource.org/licens
-00000d60: 6573 2f4d 4954 290a 0a5b 215b 4275 696c  es/MIT)..[![Buil
-00000d70: 6420 5374 6174 7573 5d28 6874 7470 733a  d Status](https:
-00000d80: 2f2f 6769 7468 7562 2e63 6f6d 2f70 6574  //github.com/pet
-00000d90: 6572 636f 726b 652f 726f 626f 7469 6373  ercorke/robotics
-00000da0: 2d74 6f6f 6c62 6f78 2d70 7974 686f 6e2f  -toolbox-python/
-00000db0: 776f 726b 666c 6f77 732f 6275 696c 642f  workflows/build/
-00000dc0: 6261 6467 652e 7376 673f 6272 616e 6368  badge.svg?branch
-00000dd0: 3d6d 6173 7465 7229 5d28 6874 7470 733a  =master)](https:
-00000de0: 2f2f 6769 7468 7562 2e63 6f6d 2f70 6574  //github.com/pet
-00000df0: 6572 636f 726b 652f 726f 626f 7469 6373  ercorke/robotics
-00000e00: 2d74 6f6f 6c62 6f78 2d70 7974 686f 6e2f  -toolbox-python/
-00000e10: 6163 7469 6f6e 733f 7175 6572 793d 776f  actions?query=wo
-00000e20: 726b 666c 6f77 2533 4162 7569 6c64 290a  rkflow%3Abuild).
-00000e30: 5b21 5b43 6f76 6572 6167 655d 2868 7474  [![Coverage](htt
-00000e40: 7073 3a2f 2f63 6f64 6563 6f76 2e69 6f2f  ps://codecov.io/
-00000e50: 6768 2f70 6574 6572 636f 726b 652f 726f  gh/petercorke/ro
-00000e60: 626f 7469 6373 2d74 6f6f 6c62 6f78 2d70  botics-toolbox-p
-00000e70: 7974 686f 6e2f 6272 616e 6368 2f6d 6173  ython/branch/mas
-00000e80: 7465 722f 6772 6170 682f 6261 6467 652e  ter/graph/badge.
-00000e90: 7376 6729 5d28 6874 7470 733a 2f2f 636f  svg)](https://co
-00000ea0: 6465 636f 762e 696f 2f67 682f 7065 7465  decov.io/gh/pete
-00000eb0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00000ec0: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
-00000ed0: 5b21 5b4c 616e 6775 6167 6520 6772 6164  [![Language grad
-00000ee0: 653a 2050 7974 686f 6e5d 2868 7474 7073  e: Python](https
-00000ef0: 3a2f 2f69 6d67 2e73 6869 656c 6473 2e69  ://img.shields.i
-00000f00: 6f2f 6c67 746d 2f67 7261 6465 2f70 7974  o/lgtm/grade/pyt
-00000f10: 686f 6e2f 672f 7065 7465 7263 6f72 6b65  hon/g/petercorke
-00000f20: 2f72 6f62 6f74 6963 732d 746f 6f6c 626f  /robotics-toolbo
-00000f30: 782d 7079 7468 6f6e 2e73 7667 3f6c 6f67  x-python.svg?log
-00000f40: 6f3d 6c67 746d 266c 6f67 6f57 6964 7468  o=lgtm&logoWidth
-00000f50: 3d31 3829 5d28 6874 7470 733a 2f2f 6c67  =18)](https://lg
-00000f60: 746d 2e63 6f6d 2f70 726f 6a65 6374 732f  tm.com/projects/
-00000f70: 672f 7065 7465 7263 6f72 6b65 2f72 6f62  g/petercorke/rob
-00000f80: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00000f90: 7468 6f6e 2f63 6f6e 7465 7874 3a70 7974  thon/context:pyt
-00000fa0: 686f 6e29 0a5b 215b 5079 5049 202d 2044  hon).[![PyPI - D
-00000fb0: 6f77 6e6c 6f61 6473 5d28 6874 7470 733a  ownloads](https:
-00000fc0: 2f2f 696d 672e 7368 6965 6c64 732e 696f  //img.shields.io
-00000fd0: 2f70 7970 692f 6477 2f72 6f62 6f74 6963  /pypi/dw/robotic
-00000fe0: 7374 6f6f 6c62 6f78 2d70 7974 686f 6e29  stoolbox-python)
-00000ff0: 5d28 6874 7470 733a 2f2f 7079 7069 7374  ](https://pypist
-00001000: 6174 732e 6f72 672f 7061 636b 6167 6573  ats.org/packages
-00001010: 2f72 6f62 6f74 6963 7374 6f6f 6c62 6f78  /roboticstoolbox
-00001020: 2d70 7974 686f 6e29 0a0a 3c74 6162 6c65  -python)..<table
-00001030: 2073 7479 6c65 3d22 626f 7264 6572 3a30   style="border:0
-00001040: 7078 223e 0a3c 7472 2073 7479 6c65 3d22  px">.<tr style="
-00001050: 626f 7264 6572 3a30 7078 223e 0a3c 7464  border:0px">.<td
-00001060: 2073 7479 6c65 3d22 626f 7264 6572 3a30   style="border:0
-00001070: 7078 223e 0a3c 696d 6720 7372 633d 2268  px">.<img src="h
-00001080: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00001090: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-000010a0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-000010b0: 7468 6f6e 2f72 6177 2f6d 6173 7465 722f  thon/raw/master/
-000010c0: 646f 6373 2f66 6967 732f 526f 6254 6f6f  docs/figs/RobToo
-000010d0: 6c42 6f78 5f52 6f75 6e64 4c6f 676f 422e  lBox_RoundLogoB.
-000010e0: 706e 6722 2077 6964 7468 3d22 3230 3022  png" width="200"
-000010f0: 3e3c 2f74 643e 0a3c 7464 2073 7479 6c65  ></td>.<td style
-00001100: 3d22 626f 7264 6572 3a30 7078 223e 0a41  ="border:0px">.A
-00001110: 2050 7974 686f 6e20 696d 706c 656d 656e   Python implemen
-00001120: 7461 7469 6f6e 206f 6620 7468 6520 3c61  tation of the <a
-00001130: 2068 7265 663d 2268 7474 7073 3a2f 2f67   href="https://g
-00001140: 6974 6875 622e 636f 6d2f 7065 7465 7263  ithub.com/peterc
-00001150: 6f72 6b65 2f72 6f62 6f74 6963 732d 746f  orke/robotics-to
-00001160: 6f6c 626f 782d 6d61 746c 6162 223e 526f  olbox-matlab">Ro
-00001170: 626f 7469 6373 2054 6f6f 6c62 6f78 2066  botics Toolbox f
-00001180: 6f72 204d 4154 4c41 423c 7375 703e 2672  or MATLAB<sup>&r
-00001190: 6567 3b3c 2f73 7570 3e3c 2f61 3e0a 3c75  eg;</sup></a>.<u
-000011a0: 6c3e 0a3c 6c69 3e3c 6120 6872 6566 3d22  l>.<li><a href="
-000011b0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-000011c0: 6f6d 2f70 6574 6572 636f 726b 652f 726f  om/petercorke/ro
-000011d0: 626f 7469 6373 2d74 6f6f 6c62 6f78 2d70  botics-toolbox-p
-000011e0: 7974 686f 6e22 3e47 6974 4875 6220 7265  ython">GitHub re
-000011f0: 706f 7369 746f 7279 203c 2f61 3e3c 2f6c  pository </a></l
-00001200: 693e 0a3c 6c69 3e3c 6120 6872 6566 3d22  i>.<li><a href="
-00001210: 6874 7470 733a 2f2f 7065 7465 7263 6f72  https://petercor
-00001220: 6b65 2e67 6974 6875 622e 696f 2f72 6f62  ke.github.io/rob
-00001230: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00001240: 7468 6f6e 223e 446f 6375 6d65 6e74 6174  thon">Documentat
-00001250: 696f 6e3c 2f61 3e3c 2f6c 693e 0a3c 6c69  ion</a></li>.<li
-00001260: 3e3c 6120 6872 6566 3d22 2336 223e 4943  ><a href="#6">IC
-00001270: 5241 2050 6170 6572 3c2f 613e 3c2f 6c69  RA Paper</a></li
-00001280: 3e0a 3c6c 693e 3c61 2068 7265 663d 2268  >.<li><a href="h
-00001290: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-000012a0: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-000012b0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-000012c0: 7468 6f6e 2f77 696b 6922 3e57 696b 6920  thon/wiki">Wiki 
-000012d0: 2865 7861 6d70 6c65 7320 616e 6420 6465  (examples and de
-000012e0: 7461 696c 7329 3c2f 613e 3c2f 6c69 3e0a  tails)</a></li>.
-000012f0: 3c2f 756c 3e0a 3c2f 7464 3e0a 3c2f 7472  </ul>.</td>.</tr
-00001300: 3e0a 3c2f 7461 626c 653e 0a0a 3c21 2d2d  >.</table>..<!--
-00001310: 203c 6272 3e20 2d2d 3e0a 0a23 2320 436f   <br> -->..## Co
-00001320: 6e74 656e 7473 0a0a 2d20 5b53 796e 6f70  ntents..- [Synop
-00001330: 7369 735d 2823 3129 0a2d 205b 4765 7474  sis](#1).- [Gett
-00001340: 696e 6720 676f 696e 675d 2823 3229 0a2d  ing going](#2).-
-00001350: 205b 5475 746f 7269 616c 735d 2823 3329   [Tutorials](#3)
-00001360: 0a2d 205b 436f 6465 2045 7861 6d70 6c65  .- [Code Example
-00001370: 735d 2823 3429 0a2d 205b 546f 6f6c 626f  s](#4).- [Toolbo
-00001380: 7820 5265 7365 6172 6368 2041 7070 6c69  x Research Appli
-00001390: 6361 7469 6f6e 735d 2823 3529 0a2d 205b  cations](#5).- [
-000013a0: 546f 6f6c 626f 7820 4943 5241 2050 6170  Toolbox ICRA Pap
-000013b0: 6572 2061 6e64 2043 6974 6174 696f 6e20  er and Citation 
-000013c0: 496e 666f 5d28 2336 290a 2d20 5b55 7369  Info](#6).- [Usi
-000013d0: 6e67 2074 6865 2054 6f6f 6c62 6f78 2069  ng the Toolbox i
-000013e0: 6e20 796f 7572 204f 7065 6e20 536f 7572  n your Open Sour
-000013f0: 6365 2043 6f64 653f 5d28 2337 290a 2d20  ce Code?](#7).- 
-00001400: 5b43 6f6d 6d6f 6e20 4973 7375 6573 2061  [Common Issues a
-00001410: 6e64 2053 6f6c 7574 696f 6e73 5d28 2338  nd Solutions](#8
-00001420: 290a 0a3c 6272 3e0a 0a3c 6120 6964 3d27  )..<br>..<a id='
-00001430: 3127 3e3c 2f61 3e0a 0a23 2320 5379 6e6f  1'></a>..## Syno
-00001440: 7073 6973 0a0a 5468 6973 2074 6f6f 6c62  psis..This toolb
-00001450: 6f78 2062 7269 6e67 7320 726f 626f 7469  ox brings roboti
-00001460: 6373 2d73 7065 6369 6669 6320 6675 6e63  cs-specific func
-00001470: 7469 6f6e 616c 6974 7920 746f 2050 7974  tionality to Pyt
-00001480: 686f 6e2c 2061 6e64 206c 6576 6572 6167  hon, and leverag
-00001490: 6573 0a50 7974 686f 6e27 7320 6164 7661  es.Python's adva
-000014a0: 6e74 6167 6573 206f 6620 706f 7274 6162  ntages of portab
-000014b0: 696c 6974 792c 2075 6269 7175 6974 7920  ility, ubiquity 
-000014c0: 616e 6420 7375 7070 6f72 742c 2061 6e64  and support, and
-000014d0: 2074 6865 2063 6170 6162 696c 6974 7920   the capability 
-000014e0: 6f66 0a74 6865 206f 7065 6e2d 736f 7572  of.the open-sour
-000014f0: 6365 2065 636f 7379 7374 656d 2066 6f72  ce ecosystem for
-00001500: 206c 696e 6561 7220 616c 6765 6272 6120   linear algebra 
-00001510: 286e 756d 7079 2c20 7363 6970 7929 2c20  (numpy, scipy), 
-00001520: 6772 6170 6869 6373 0a28 6d61 7470 6c6f  graphics.(matplo
-00001530: 746c 6962 2c20 7468 7265 652e 6a73 2c20  tlib, three.js, 
-00001540: 5765 6247 4c29 2c20 696e 7465 7261 6374  WebGL), interact
-00001550: 6976 6520 6465 7665 6c6f 706d 656e 7420  ive development 
-00001560: 286a 7570 7974 6572 2c20 6a75 7079 7465  (jupyter, jupyte
-00001570: 726c 6162 2c0a 6d79 6269 6e64 6572 2e6f  rlab,.mybinder.o
-00001580: 7267 292c 2061 6e64 2064 6f63 756d 656e  rg), and documen
-00001590: 7461 7469 6f6e 2028 7370 6869 6e78 292e  tation (sphinx).
-000015a0: 0a0a 5468 6520 546f 6f6c 626f 7820 7072  ..The Toolbox pr
-000015b0: 6f76 6964 6573 2074 6f6f 6c73 2066 6f72  ovides tools for
-000015c0: 2072 6570 7265 7365 6e74 696e 6720 7468   representing th
-000015d0: 6520 6b69 6e65 6d61 7469 6373 2061 6e64  e kinematics and
-000015e0: 2064 796e 616d 6963 7320 6f66 0a73 6572   dynamics of.ser
-000015f0: 6961 6c2d 6c69 6e6b 206d 616e 6970 756c  ial-link manipul
-00001600: 6174 6f72 7320 2d20 796f 7520 6361 6e20  ators - you can 
-00001610: 6561 7369 6c79 2063 7265 6174 6520 796f  easily create yo
-00001620: 7572 206f 776e 2069 6e20 4465 6e61 7669  ur own in Denavi
-00001630: 742d 4861 7274 656e 6265 7267 0a66 6f72  t-Hartenberg.for
-00001640: 6d2c 2069 6d70 6f72 7420 6120 5552 4446  m, import a URDF
-00001650: 2066 696c 652c 206f 7220 7573 6520 6f76   file, or use ov
-00001660: 6572 2033 3020 7375 7070 6c69 6564 206d  er 30 supplied m
-00001670: 6f64 656c 7320 666f 7220 7765 6c6c 2d6b  odels for well-k
-00001680: 6e6f 776e 0a63 6f6e 7465 6d70 6f72 6172  nown.contemporar
-00001690: 7920 726f 626f 7473 2066 726f 6d20 4672  y robots from Fr
-000016a0: 616e 6b61 2d45 6d69 6b61 2c20 4b69 6e6f  anka-Emika, Kino
-000016b0: 7661 2c20 556e 6976 6572 7361 6c20 526f  va, Universal Ro
-000016c0: 626f 7469 6373 2c20 5265 7468 696e 6b20  botics, Rethink 
-000016d0: 6173 0a77 656c 6c20 6173 2063 6c61 7373  as.well as class
-000016e0: 6963 616c 2072 6f62 6f74 7320 7375 6368  ical robots such
-000016f0: 2061 7320 7468 6520 5075 6d61 2035 3630   as the Puma 560
-00001700: 2061 6e64 2074 6865 2053 7461 6e66 6f72   and the Stanfor
-00001710: 6420 6172 6d2e 0a0a 5468 6520 546f 6f6c  d arm...The Tool
-00001720: 626f 7820 636f 6e74 6169 6e73 2066 6173  box contains fas
-00001730: 7420 696d 706c 656d 656e 7461 7469 6f6e  t implementation
-00001740: 7320 6f66 206b 696e 656d 6174 6963 206f  s of kinematic o
-00001750: 7065 7261 7469 6f6e 732e 2054 6865 2066  perations. The f
-00001760: 6f72 7761 7264 0a6b 696e 656d 6174 6963  orward.kinematic
-00001770: 7320 616e 6420 7468 6520 6d61 6e69 7075  s and the manipu
-00001780: 6c61 746f 7220 4a61 636f 6269 616e 2063  lator Jacobian c
-00001790: 616e 2062 6520 636f 6d70 7574 6564 2069  an be computed i
-000017a0: 6e20 6c65 7373 2074 6861 6e20 3120 6d69  n less than 1 mi
-000017b0: 6372 6f73 6563 6f6e 640a 7768 696c 6520  crosecond.while 
-000017c0: 6e75 6d65 7269 6361 6c20 696e 7665 7273  numerical invers
-000017d0: 6520 6b69 6e65 6d61 7469 6373 2063 616e  e kinematics can
-000017e0: 2062 6520 736f 6c76 6564 2069 6e20 6173   be solved in as
-000017f0: 206c 6974 746c 6520 6173 2034 206d 6963   little as 4 mic
-00001800: 726f 7365 636f 6e64 732e 0a0a 5468 6520  roseconds...The 
-00001810: 746f 6f6c 626f 7820 616c 736f 2073 7570  toolbox also sup
-00001820: 706f 7274 7320 6d6f 6269 6c65 2072 6f62  ports mobile rob
-00001830: 6f74 7320 7769 7468 2066 756e 6374 696f  ots with functio
-00001840: 6e73 2066 6f72 2072 6f62 6f74 206d 6f74  ns for robot mot
-00001850: 696f 6e20 6d6f 6465 6c73 0a28 756e 6963  ion models.(unic
-00001860: 7963 6c65 2c20 6269 6379 636c 6529 2c20  ycle, bicycle), 
-00001870: 7061 7468 2070 6c61 6e6e 696e 6720 616c  path planning al
-00001880: 676f 7269 7468 6d73 2028 6275 672c 2064  gorithms (bug, d
-00001890: 6973 7461 6e63 6520 7472 616e 7366 6f72  istance transfor
-000018a0: 6d2c 2044 5c2a 2c0a 5052 4d29 2c20 6b69  m, D\*,.PRM), ki
-000018b0: 6e6f 6479 6e61 6d69 6320 706c 616e 6e69  nodynamic planni
-000018c0: 6e67 2028 6c61 7474 6963 652c 2052 5254  ng (lattice, RRT
-000018d0: 292c 206c 6f63 616c 697a 6174 696f 6e20  ), localization 
-000018e0: 2845 4b46 2c20 7061 7274 6963 6c65 2066  (EKF, particle f
-000018f0: 696c 7465 7229 2c0a 6d61 7020 6275 696c  ilter),.map buil
-00001900: 6469 6e67 2028 454b 4629 2061 6e64 2073  ding (EKF) and s
-00001910: 696d 756c 7461 6e65 6f75 7320 6c6f 6361  imultaneous loca
-00001920: 6c69 7a61 7469 6f6e 2061 6e64 206d 6170  lization and map
-00001930: 7069 6e67 2028 454b 4629 2e0a 0a54 6865  ping (EKF)...The
-00001940: 2054 6f6f 6c62 6f78 2070 726f 7669 6465   Toolbox provide
-00001950: 733a 0a0a 2d20 636f 6465 2074 6861 7420  s:..- code that 
-00001960: 6973 206d 6174 7572 6520 616e 6420 7072  is mature and pr
-00001970: 6f76 6964 6573 2061 2070 6f69 6e74 206f  ovides a point o
-00001980: 6620 636f 6d70 6172 6973 6f6e 2066 6f72  f comparison for
-00001990: 206f 7468 6572 0a20 2069 6d70 6c65 6d65   other.  impleme
-000019a0: 6e74 6174 696f 6e73 206f 6620 7468 6520  ntations of the 
-000019b0: 7361 6d65 2061 6c67 6f72 6974 686d 733b  same algorithms;
-000019c0: 0a2d 2072 6f75 7469 6e65 7320 7768 6963  .- routines whic
-000019d0: 6820 6172 6520 6765 6e65 7261 6c6c 7920  h are generally 
-000019e0: 7772 6974 7465 6e20 696e 2061 2073 7472  written in a str
-000019f0: 6169 6768 7466 6f72 7761 7264 206d 616e  aightforward man
-00001a00: 6e65 7220 7768 6963 680a 2020 616c 6c6f  ner which.  allo
-00001a10: 7773 2066 6f72 2065 6173 7920 756e 6465  ws for easy unde
-00001a20: 7273 7461 6e64 696e 672c 2070 6572 6861  rstanding, perha
-00001a30: 7073 2061 7420 7468 6520 6578 7065 6e73  ps at the expens
-00001a40: 6520 6f66 2063 6f6d 7075 7461 7469 6f6e  e of computation
-00001a50: 616c 0a20 2065 6666 6963 6965 6e63 793b  al.  efficiency;
-00001a60: 0a2d 2073 6f75 7263 6520 636f 6465 2077  .- source code w
-00001a70: 6869 6368 2063 616e 2062 6520 7265 6164  hich can be read
-00001a80: 2066 6f72 206c 6561 726e 696e 6720 616e   for learning an
-00001a90: 6420 7465 6163 6869 6e67 3b0a 2d20 6261  d teaching;.- ba
-00001aa0: 636b 7761 7264 2063 6f6d 7061 7461 6269  ckward compatabi
-00001ab0: 6c69 7479 2077 6974 6820 7468 6520 526f  lity with the Ro
-00001ac0: 626f 7469 6373 2054 6f6f 6c62 6f78 2066  botics Toolbox f
-00001ad0: 6f72 204d 4154 4c41 420a 0a54 6865 2054  or MATLAB..The T
-00001ae0: 6f6f 6c62 6f78 206c 6576 6572 6167 6573  oolbox leverages
-00001af0: 2074 6865 205b 5370 6174 6961 6c20 4d61   the [Spatial Ma
-00001b00: 7468 7320 546f 6f6c 626f 7820 666f 7220  ths Toolbox for 
-00001b10: 5079 7468 6f6e 5d28 6874 7470 733a 2f2f  Python](https://
-00001b20: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
-00001b30: 636f 726b 652f 7370 6174 6961 6c6d 6174  corke/spatialmat
-00001b40: 682d 7079 7468 6f6e 2920 746f 0a70 726f  h-python) to.pro
-00001b50: 7669 6465 2073 7570 706f 7274 2066 6f72  vide support for
-00001b60: 2064 6174 6120 7479 7065 7320 7375 6368   data types such
-00001b70: 2061 7320 534f 286e 2920 616e 6420 5345   as SO(n) and SE
-00001b80: 286e 2920 6d61 7472 6963 6573 2c20 7175  (n) matrices, qu
-00001b90: 6174 6572 6e69 6f6e 732c 2074 7769 7374  aternions, twist
-00001ba0: 7320 616e 6420 7370 6174 6961 6c20 7665  s and spatial ve
-00001bb0: 6374 6f72 732e 0a0a 3c62 723e 0a0a 3c61  ctors...<br>..<a
-00001bc0: 2069 643d 2732 273e 3c2f 613e 0a0a 2323   id='2'></a>..##
-00001bd0: 2047 6574 7469 6e67 2067 6f69 6e67 0a0a   Getting going..
-00001be0: 596f 7520 7769 6c6c 206e 6565 6420 5079  You will need Py
-00001bf0: 7468 6f6e 203e 3d20 332e 360a 0a23 2323  thon >= 3.6..###
-00001c00: 2055 7369 6e67 2070 6970 0a0a 496e 7374   Using pip..Inst
-00001c10: 616c 6c20 6120 736e 6170 7368 6f74 2066  all a snapshot f
-00001c20: 726f 6d20 5079 5049 0a0a 6060 6073 6865  rom PyPI..```she
-00001c30: 6c6c 2073 6372 6970 740a 7069 7033 2069  ll script.pip3 i
-00001c40: 6e73 7461 6c6c 2072 6f62 6f74 6963 7374  nstall roboticst
-00001c50: 6f6f 6c62 6f78 2d70 7974 686f 6e0a 6060  oolbox-python.``
-00001c60: 600a 0a41 7661 696c 6162 6c65 206f 7074  `..Available opt
-00001c70: 696f 6e73 2061 7265 3a0a 0a2d 2060 636f  ions are:..- `co
-00001c80: 6c6c 6973 696f 6e60 2069 6e73 7461 6c6c  llision` install
-00001c90: 2063 6f6c 6c69 7369 6f6e 2063 6865 636b   collision check
-00001ca0: 696e 6720 7769 7468 205b 7079 6275 6c6c  ing with [pybull
-00001cb0: 6574 5d28 6874 7470 733a 2f2f 7079 6275  et](https://pybu
-00001cc0: 6c6c 6574 2e6f 7267 290a 0a50 7574 2074  llet.org)..Put t
-00001cd0: 6865 206f 7074 696f 6e73 2069 6e20 6120  he options in a 
-00001ce0: 636f 6d6d 6120 7365 7061 7261 7465 6420  comma separated 
-00001cf0: 6c69 7374 206c 696b 650a 0a60 6060 7368  list like..```sh
-00001d00: 656c 6c20 7363 7269 7074 0a70 6970 3320  ell script.pip3 
-00001d10: 696e 7374 616c 6c20 726f 626f 7469 6373  install robotics
-00001d20: 746f 6f6c 626f 782d 7079 7468 6f6e 5b6f  toolbox-python[o
-00001d30: 7074 696f 6e6c 6973 745d 0a60 6060 0a0a  ptionlist].```..
-00001d40: 5b53 7769 6674 5d28 6874 7470 733a 2f2f  [Swift](https://
-00001d50: 6769 7468 7562 2e63 6f6d 2f6a 6861 766c  github.com/jhavl
-00001d60: 2f73 7769 6674 292c 2061 2077 6562 2d62  /swift), a web-b
-00001d70: 6173 6564 2076 6973 7561 6c69 7a65 722c  ased visualizer,
-00001d80: 2069 730a 696e 7374 616c 6c65 6420 6173   is.installed as
-00001d90: 2070 6172 7420 6f66 2052 6f62 6f74 6963   part of Robotic
-00001da0: 7320 546f 6f6c 626f 782e 0a0a 2323 2320  s Toolbox...### 
-00001db0: 4672 6f6d 2047 6974 4875 620a 0a54 6f20  From GitHub..To 
-00001dc0: 696e 7374 616c 6c20 7468 6520 626c 6565  install the blee
-00001dd0: 6469 6e67 2d65 6467 6520 7665 7273 696f  ding-edge versio
-00001de0: 6e20 6672 6f6d 2047 6974 4875 620a 0a60  n from GitHub..`
-00001df0: 6060 7368 656c 6c20 7363 7269 7074 0a67  ``shell script.g
-00001e00: 6974 2063 6c6f 6e65 2068 7474 7073 3a2f  it clone https:/
-00001e10: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-00001e20: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00001e30: 746f 6f6c 626f 782d 7079 7468 6f6e 2e67  toolbox-python.g
-00001e40: 6974 0a63 6420 726f 626f 7469 6373 2d74  it.cd robotics-t
-00001e50: 6f6f 6c62 6f78 2d70 7974 686f 6e0a 7069  oolbox-python.pi
-00001e60: 7033 2069 6e73 7461 6c6c 202d 6520 2e0a  p3 install -e ..
-00001e70: 6060 600a 0a3c 6272 3e0a 0a3c 6120 6964  ```..<br>..<a id
-00001e80: 3d27 3327 3e3c 2f61 3e0a 0a23 2320 5475  ='3'></a>..## Tu
-00001e90: 746f 7269 616c 730a 0a3c 7461 626c 6520  torials..<table 
-00001ea0: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00001eb0: 7822 3e0a 3c74 7220 7374 796c 653d 2262  x">.<tr style="b
-00001ec0: 6f72 6465 723a 3070 7822 3e0a 3c74 6420  order:0px">.<td 
-00001ed0: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00001ee0: 7822 3e3c 6120 6872 6566 3d22 6874 7470  x"><a href="http
-00001ef0: 733a 2f2f 6269 742e 6c79 2f33 616b 3547  s://bit.ly/3ak5G
-00001f00: 4469 223e 3c69 6d67 2073 7263 3d22 6874  Di"><img src="ht
-00001f10: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00001f20: 2f6a 6861 766c 2f64 6b74 2f72 6177 2f6d  /jhavl/dkt/raw/m
-00001f30: 6169 6e2f 696d 672f 6172 7469 636c 6531  ain/img/article1
-00001f40: 2e70 6e67 2220 7769 6474 683d 2234 3030  .png" width="400
-00001f50: 223e 3c2f 613e 3c2f 7464 3e0a 3c74 6420  "></a></td>.<td 
-00001f60: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00001f70: 7822 3e3c 6120 6872 6566 3d22 6874 7470  x"><a href="http
-00001f80: 733a 2f2f 6269 742e 6c79 2f33 616b 3547  s://bit.ly/3ak5G
-00001f90: 4469 223e 3c69 6d67 2073 7263 3d22 6874  Di"><img src="ht
-00001fa0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00001fb0: 2f6a 6861 766c 2f64 6b74 2f72 6177 2f6d  /jhavl/dkt/raw/m
-00001fc0: 6169 6e2f 696d 672f 6172 7469 636c 6532  ain/img/article2
-00001fd0: 2e70 6e67 2220 7769 6474 683d 2234 3030  .png" width="400
-00001fe0: 223e 3c2f 613e 3c2f 7464 3e0a 3c74 6420  "></a></td>.<td 
-00001ff0: 7374 796c 653d 2262 6f72 6465 723a 3070  style="border:0p
-00002000: 7822 3e0a 446f 2079 6f75 2077 616e 7420  x">.Do you want 
-00002010: 746f 206c 6561 726e 2061 626f 7574 206d  to learn about m
-00002020: 616e 6970 756c 6174 6f72 206b 696e 656d  anipulator kinem
-00002030: 6174 6963 732c 2064 6966 6665 7265 6e74  atics, different
-00002040: 6961 6c20 6b69 6e65 6d61 7469 6373 2c20  ial kinematics, 
-00002050: 696e 7665 7273 652d 6b69 6e65 6d61 7469  inverse-kinemati
-00002060: 6373 2061 6e64 206d 6f74 696f 6e20 636f  cs and motion co
-00002070: 6e74 726f 6c3f 2048 6176 6520 6120 6c6f  ntrol? Have a lo
-00002080: 6f6b 2061 7420 6f75 720a 3c61 2068 7265  ok at our.<a hre
-00002090: 663d 2268 7474 7073 3a2f 2f62 6974 2e6c  f="https://bit.l
-000020a0: 792f 3361 6b35 4744 6922 3e74 7574 6f72  y/3ak5GDi">tutor
-000020b0: 6961 6c3c 2f61 3e2e 0a54 6869 7320 7475  ial</a>..This tu
-000020c0: 746f 7269 616c 2063 6f6d 6573 2077 6974  torial comes wit
-000020d0: 6820 7477 6f20 6172 7469 636c 6573 2074  h two articles t
-000020e0: 6f20 636f 7665 7220 7468 6520 7468 656f  o cover the theo
-000020f0: 7279 2061 6e64 2031 3220 4a75 7079 7465  ry and 12 Jupyte
-00002100: 7220 4e6f 7465 626f 6f6b 7320 7072 6f76  r Notebooks prov
-00002110: 6964 696e 6720 6675 6c6c 2063 6f64 6520  iding full code 
-00002120: 696d 706c 656d 656e 7461 7469 6f6e 7320  implementations 
-00002130: 616e 6420 6578 616d 706c 6573 2e20 4d6f  and examples. Mo
-00002140: 7374 206f 6620 7468 6520 4e6f 7465 626f  st of the Notebo
-00002150: 6f6b 7320 6172 6520 616c 736f 2047 6f6f  oks are also Goo
-00002160: 676c 6520 436f 6c61 6220 636f 6d70 6174  gle Colab compat
-00002170: 6962 6c65 2061 6c6c 6f77 696e 6720 7468  ible allowing th
-00002180: 656d 2074 6f20 7275 6e20 6f6e 6c69 6e65  em to run online
-00002190: 2e0a 3c2f 7464 3e0a 3c2f 7472 3e0a 3c2f  ..</td>.</tr>.</
-000021a0: 7461 626c 653e 0a0a 3c62 723e 0a0a 3c61  table>..<br>..<a
-000021b0: 2069 643d 2734 273e 3c2f 613e 0a0a 2323   id='4'></a>..##
-000021c0: 2043 6f64 6520 4578 616d 706c 6573 0a0a   Code Examples..
-000021d0: 5765 2077 696c 6c20 6c6f 6164 2061 206d  We will load a m
-000021e0: 6f64 656c 206f 6620 7468 6520 4672 616e  odel of the Fran
-000021f0: 6b61 2d45 6d69 6b61 2050 616e 6461 2072  ka-Emika Panda r
-00002200: 6f62 6f74 2064 6566 696e 6564 2062 7920  obot defined by 
-00002210: 6120 5552 4446 2066 696c 650a 0a60 6060  a URDF file..```
-00002220: 7079 7468 6f6e 0a69 6d70 6f72 7420 726f  python.import ro
-00002230: 626f 7469 6373 746f 6f6c 626f 7820 6173  boticstoolbox as
-00002240: 2072 7462 0a72 6f62 6f74 203d 2072 7462   rtb.robot = rtb
-00002250: 2e6d 6f64 656c 732e 5061 6e64 6128 290a  .models.Panda().
-00002260: 7072 696e 7428 726f 626f 7429 0a0a 0945  print(robot)...E
-00002270: 526f 626f 743a 2070 616e 6461 2028 6279  Robot: panda (by
-00002280: 2046 7261 6e6b 6120 456d 696b 6129 2c20   Franka Emika), 
-00002290: 3720 6a6f 696e 7473 2028 5252 5252 5252  7 joints (RRRRRR
-000022a0: 5229 2c20 3120 6772 6970 7065 722c 2067  R), 1 gripper, g
-000022b0: 656f 6d65 7472 792c 2063 6f6c 6c69 7369  eometry, collisi
-000022c0: 6f6e 0a09 e294 8ce2 9480 e294 80e2 9480  on..............
-000022d0: e294 80e2 9480 e294 ace2 9480 e294 80e2  ................
-000022e0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-000022f0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002300: e294 80e2 94ac e294 80e2 9480 e294 80e2  ................
-00002310: 9480 e294 80e2 9480 e294 80e2 94ac e294  ................
-00002320: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002330: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002340: 9480 e294 80e2 94ac e294 80e2 9480 e294  ................
-00002350: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002360: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002370: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002380: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002390: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000023a0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-000023b0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000023c0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000023d0: 9480 e294 80e2 9480 e294 900a 09e2 9482  ................
-000023e0: 6c69 6e6b 20e2 9482 2020 2020 206c 696e  link ...     lin
-000023f0: 6b20 2020 2020 e294 8220 6a6f 696e 7420  k     ... joint 
-00002400: e294 8220 2020 7061 7265 6e74 2020 2020  ...   parent    
-00002410: e294 8220 2020 2020 2020 2020 2020 2020  ...             
-00002420: 2045 5453 3a20 7061 7265 6e74 2074 6f20   ETS: parent to 
-00002430: 6c69 6e6b 2020 2020 2020 2020 2020 2020  link            
-00002440: 2020 20e2 9482 0a09 e294 9ce2 9480 e294     .............
-00002450: 80e2 9480 e294 80e2 9480 e294 bce2 9480  ................
-00002460: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002470: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002480: 80e2 9480 e294 80e2 94bc e294 80e2 9480  ................
-00002490: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000024a0: 94bc e294 80e2 9480 e294 80e2 9480 e294  ................
-000024b0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000024c0: e294 80e2 9480 e294 80e2 94bc e294 80e2  ................
-000024d0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-000024e0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000024f0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002500: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002510: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002520: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002530: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002540: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002550: e294 80e2 9480 e294 80e2 9480 e294 a40a  ................
-00002560: 09e2 9482 2020 2030 20e2 9482 2070 616e  ....   0 ... pan
-00002570: 6461 5f6c 696e 6b30 2020 e294 8220 2020  da_link0  ...   
-00002580: 2020 2020 e294 8220 4241 5345 2020 2020      ... BASE    
-00002590: 2020 2020 e294 8220 2020 2020 2020 2020      ...         
-000025a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000025b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000025c0: 2020 2020 2020 20e2 9482 0a09 e294 8220         ........ 
-000025d0: 2020 3120 e294 8220 7061 6e64 615f 6c69    1 ... panda_li
-000025e0: 6e6b 3120 20e2 9482 2020 2020 2030 20e2  nk1  ...     0 .
-000025f0: 9482 2070 616e 6461 5f6c 696e 6b30 20e2  .. panda_link0 .
-00002600: 9482 2053 4533 2830 2c20 302c 2030 2e33  .. SE3(0, 0, 0.3
-00002610: 3333 2920 e28a 9520 527a 2871 3029 2020  33) ... Rz(q0)  
-00002620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002630: 2020 2020 e294 820a 09e2 9482 2020 2032      ........   2
-00002640: 20e2 9482 2070 616e 6461 5f6c 696e 6b32   ... panda_link2
-00002650: 2020 e294 8220 2020 2020 3120 e294 8220    ...     1 ... 
-00002660: 7061 6e64 615f 6c69 6e6b 3120 e294 8220  panda_link1 ... 
-00002670: 5345 3328 2d39 30c2 b02c 202d 30c2 b02c  SE3(-90.., -0..,
-00002680: 2030 c2b0 2920 e28a 9520 527a 2871 3129   0..) ... Rz(q1)
-00002690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000026a0: 2020 2020 e294 820a 09e2 9482 2020 2033      ........   3
-000026b0: 20e2 9482 2070 616e 6461 5f6c 696e 6b33   ... panda_link3
-000026c0: 2020 e294 8220 2020 2020 3220 e294 8220    ...     2 ... 
-000026d0: 7061 6e64 615f 6c69 6e6b 3220 e294 8220  panda_link2 ... 
-000026e0: 5345 3328 302c 202d 302e 3331 362c 2030  SE3(0, -0.316, 0
-000026f0: 3b20 3930 c2b0 2c20 2d30 c2b0 2c20 30c2  ; 90.., -0.., 0.
-00002700: b029 20e2 8a95 2052 7a28 7132 2920 2020  .) ... Rz(q2)   
-00002710: 2020 2020 e294 820a 09e2 9482 2020 2034      ........   4
-00002720: 20e2 9482 2070 616e 6461 5f6c 696e 6b34   ... panda_link4
-00002730: 2020 e294 8220 2020 2020 3320 e294 8220    ...     3 ... 
-00002740: 7061 6e64 615f 6c69 6e6b 3320 e294 8220  panda_link3 ... 
-00002750: 5345 3328 302e 3038 3235 2c20 302c 2030  SE3(0.0825, 0, 0
-00002760: 3b20 3930 c2b0 2c20 2d30 c2b0 2c20 30c2  ; 90.., -0.., 0.
-00002770: b029 20e2 8a95 2052 7a28 7133 2920 2020  .) ... Rz(q3)   
-00002780: 2020 2020 e294 820a 09e2 9482 2020 2035      ........   5
-00002790: 20e2 9482 2070 616e 6461 5f6c 696e 6b35   ... panda_link5
-000027a0: 2020 e294 8220 2020 2020 3420 e294 8220    ...     4 ... 
-000027b0: 7061 6e64 615f 6c69 6e6b 3420 e294 8220  panda_link4 ... 
-000027c0: 5345 3328 2d30 2e30 3832 352c 2030 2e33  SE3(-0.0825, 0.3
-000027d0: 3834 2c20 303b 202d 3930 c2b0 2c20 2d30  84, 0; -90.., -0
-000027e0: c2b0 2c20 30c2 b029 20e2 8a95 2052 7a28  .., 0..) ... Rz(
-000027f0: 7134 2920 e294 820a 09e2 9482 2020 2036  q4) ........   6
-00002800: 20e2 9482 2070 616e 6461 5f6c 696e 6b36   ... panda_link6
-00002810: 2020 e294 8220 2020 2020 3520 e294 8220    ...     5 ... 
-00002820: 7061 6e64 615f 6c69 6e6b 3520 e294 8220  panda_link5 ... 
-00002830: 5345 3328 3930 c2b0 2c20 2d30 c2b0 2c20  SE3(90.., -0.., 
-00002840: 30c2 b029 20e2 8a95 2052 7a28 7135 2920  0..) ... Rz(q5) 
+00000cf0: 7079 7468 6f6e 2e73 7667 290a 0a5b 215b  python.svg)..[![
+00000d00: 4275 696c 6420 5374 6174 7573 5d28 6874  Build Status](ht
+00000d10: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00000d20: 2f70 6574 6572 636f 726b 652f 726f 626f  /petercorke/robo
+00000d30: 7469 6373 2d74 6f6f 6c62 6f78 2d70 7974  tics-toolbox-pyt
+00000d40: 686f 6e2f 776f 726b 666c 6f77 732f 5465  hon/workflows/Te
+00000d50: 7374 2f62 6164 6765 2e73 7667 3f62 7261  st/badge.svg?bra
+00000d60: 6e63 683d 6d61 7374 6572 295d 2868 7474  nch=master)](htt
+00000d70: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00000d80: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
+00000d90: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
+00000da0: 6f6e 2f61 6374 696f 6e73 3f71 7565 7279  on/actions?query
+00000db0: 3d77 6f72 6b66 6c6f 7725 3341 5465 7374  =workflow%3ATest
+00000dc0: 290a 5b21 5b43 6f76 6572 6167 655d 2868  ).[![Coverage](h
+00000dd0: 7474 7073 3a2f 2f63 6f64 6563 6f76 2e69  ttps://codecov.i
+00000de0: 6f2f 6768 2f70 6574 6572 636f 726b 652f  o/gh/petercorke/
+00000df0: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00000e00: 2d70 7974 686f 6e2f 6272 616e 6368 2f6d  -python/branch/m
+00000e10: 6173 7465 722f 6772 6170 682f 6261 6467  aster/graph/badg
+00000e20: 652e 7376 6729 5d28 6874 7470 733a 2f2f  e.svg)](https://
+00000e30: 636f 6465 636f 762e 696f 2f67 682f 7065  codecov.io/gh/pe
+00000e40: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
+00000e50: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
+00000e60: 290a 5b21 5b50 7950 4920 2d20 446f 776e  ).[![PyPI - Down
+00000e70: 6c6f 6164 735d 2868 7474 7073 3a2f 2f69  loads](https://i
+00000e80: 6d67 2e73 6869 656c 6473 2e69 6f2f 7079  mg.shields.io/py
+00000e90: 7069 2f64 772f 726f 626f 7469 6373 746f  pi/dw/roboticsto
+00000ea0: 6f6c 626f 782d 7079 7468 6f6e 295d 2868  olbox-python)](h
+00000eb0: 7474 7073 3a2f 2f70 7970 6973 7461 7473  ttps://pypistats
+00000ec0: 2e6f 7267 2f70 6163 6b61 6765 732f 726f  .org/packages/ro
+00000ed0: 626f 7469 6373 746f 6f6c 626f 782d 7079  boticstoolbox-py
+00000ee0: 7468 6f6e 290a 5b21 5b4c 6963 656e 7365  thon).[![License
+00000ef0: 3a20 4d49 545d 2868 7474 7073 3a2f 2f69  : MIT](https://i
+00000f00: 6d67 2e73 6869 656c 6473 2e69 6f2f 6261  mg.shields.io/ba
+00000f10: 6467 652f 4c69 6365 6e73 652d 4d49 542d  dge/License-MIT-
+00000f20: 7965 6c6c 6f77 2e73 7667 295d 2868 7474  yellow.svg)](htt
+00000f30: 7073 3a2f 2f6f 7065 6e73 6f75 7263 652e  ps://opensource.
+00000f40: 6f72 672f 6c69 6365 6e73 6573 2f4d 4954  org/licenses/MIT
+00000f50: 290a 0a3c 7461 626c 6520 7374 796c 653d  )..<table style=
+00000f60: 2262 6f72 6465 723a 3070 7822 3e0a 3c74  "border:0px">.<t
+00000f70: 7220 7374 796c 653d 2262 6f72 6465 723a  r style="border:
+00000f80: 3070 7822 3e0a 3c74 6420 7374 796c 653d  0px">.<td style=
+00000f90: 2262 6f72 6465 723a 3070 7822 3e0a 3c69  "border:0px">.<i
+00000fa0: 6d67 2073 7263 3d22 6874 7470 733a 2f2f  mg src="https://
+00000fb0: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
+00000fc0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+00000fd0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 7261  oolbox-python/ra
+00000fe0: 772f 6d61 7374 6572 2f64 6f63 732f 6669  w/master/docs/fi
+00000ff0: 6773 2f52 6f62 546f 6f6c 426f 785f 526f  gs/RobToolBox_Ro
+00001000: 756e 644c 6f67 6f42 2e70 6e67 2220 7769  undLogoB.png" wi
+00001010: 6474 683d 2232 3030 223e 3c2f 7464 3e0a  dth="200"></td>.
+00001020: 3c74 6420 7374 796c 653d 2262 6f72 6465  <td style="borde
+00001030: 723a 3070 7822 3e0a 4120 5079 7468 6f6e  r:0px">.A Python
+00001040: 2069 6d70 6c65 6d65 6e74 6174 696f 6e20   implementation 
+00001050: 6f66 2074 6865 203c 6120 6872 6566 3d22  of the <a href="
+00001060: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00001070: 6f6d 2f70 6574 6572 636f 726b 652f 726f  om/petercorke/ro
+00001080: 626f 7469 6373 2d74 6f6f 6c62 6f78 2d6d  botics-toolbox-m
+00001090: 6174 6c61 6222 3e52 6f62 6f74 6963 7320  atlab">Robotics 
+000010a0: 546f 6f6c 626f 7820 666f 7220 4d41 544c  Toolbox for MATL
+000010b0: 4142 3c73 7570 3e26 7265 673b 3c2f 7375  AB<sup>&reg;</su
+000010c0: 703e 3c2f 613e 0a3c 756c 3e0a 3c6c 693e  p></a>.<ul>.<li>
+000010d0: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
+000010e0: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
+000010f0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
+00001100: 746f 6f6c 626f 782d 7079 7468 6f6e 223e  toolbox-python">
+00001110: 4769 7448 7562 2072 6570 6f73 6974 6f72  GitHub repositor
+00001120: 7920 3c2f 613e 3c2f 6c69 3e0a 3c6c 693e  y </a></li>.<li>
+00001130: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
+00001140: 2f70 6574 6572 636f 726b 652e 6769 7468  /petercorke.gith
+00001150: 7562 2e69 6f2f 726f 626f 7469 6373 2d74  ub.io/robotics-t
+00001160: 6f6f 6c62 6f78 2d70 7974 686f 6e22 3e44  oolbox-python">D
+00001170: 6f63 756d 656e 7461 7469 6f6e 3c2f 613e  ocumentation</a>
+00001180: 3c2f 6c69 3e0a 3c6c 693e 3c61 2068 7265  </li>.<li><a hre
+00001190: 663d 2223 3622 3e49 4352 4120 5061 7065  f="#6">ICRA Pape
+000011a0: 723c 2f61 3e3c 2f6c 693e 0a3c 6c69 3e3c  r</a></li>.<li><
+000011b0: 6120 6872 6566 3d22 6874 7470 733a 2f2f  a href="https://
+000011c0: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
+000011d0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+000011e0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 7769  oolbox-python/wi
+000011f0: 6b69 223e 5769 6b69 2028 6578 616d 706c  ki">Wiki (exampl
+00001200: 6573 2061 6e64 2064 6574 6169 6c73 293c  es and details)<
+00001210: 2f61 3e3c 2f6c 693e 0a3c 2f75 6c3e 0a3c  /a></li>.</ul>.<
+00001220: 2f74 643e 0a3c 2f74 723e 0a3c 2f74 6162  /td>.</tr>.</tab
+00001230: 6c65 3e0a 0a3c 212d 2d20 3c62 723e 202d  le>..<!-- <br> -
+00001240: 2d3e 0a0a 2323 2043 6f6e 7465 6e74 730a  ->..## Contents.
+00001250: 0a2d 205b 5379 6e6f 7073 6973 5d28 2331  .- [Synopsis](#1
+00001260: 290a 2d20 5b47 6574 7469 6e67 2067 6f69  ).- [Getting goi
+00001270: 6e67 5d28 2332 290a 2d20 5b54 7574 6f72  ng](#2).- [Tutor
+00001280: 6961 6c73 5d28 2333 290a 2d20 5b43 6f64  ials](#3).- [Cod
+00001290: 6520 4578 616d 706c 6573 5d28 2334 290a  e Examples](#4).
+000012a0: 2d20 5b54 6f6f 6c62 6f78 2052 6573 6561  - [Toolbox Resea
+000012b0: 7263 6820 4170 706c 6963 6174 696f 6e73  rch Applications
+000012c0: 5d28 2335 290a 2d20 5b54 6f6f 6c62 6f78  ](#5).- [Toolbox
+000012d0: 2049 4352 4120 5061 7065 7220 616e 6420   ICRA Paper and 
+000012e0: 4369 7461 7469 6f6e 2049 6e66 6f5d 2823  Citation Info](#
+000012f0: 3629 0a2d 205b 5573 696e 6720 7468 6520  6).- [Using the 
+00001300: 546f 6f6c 626f 7820 696e 2079 6f75 7220  Toolbox in your 
+00001310: 4f70 656e 2053 6f75 7263 6520 436f 6465  Open Source Code
+00001320: 3f5d 2823 3729 0a2d 205b 436f 6d6d 6f6e  ?](#7).- [Common
+00001330: 2049 7373 7565 7320 616e 6420 536f 6c75   Issues and Solu
+00001340: 7469 6f6e 735d 2823 3829 0a0a 3c62 723e  tions](#8)..<br>
+00001350: 0a0a 3c61 2069 643d 2731 273e 3c2f 613e  ..<a id='1'></a>
+00001360: 0a0a 2323 2053 796e 6f70 7369 730a 0a54  ..## Synopsis..T
+00001370: 6869 7320 746f 6f6c 626f 7820 6272 696e  his toolbox brin
+00001380: 6773 2072 6f62 6f74 6963 732d 7370 6563  gs robotics-spec
+00001390: 6966 6963 2066 756e 6374 696f 6e61 6c69  ific functionali
+000013a0: 7479 2074 6f20 5079 7468 6f6e 2c20 616e  ty to Python, an
+000013b0: 6420 6c65 7665 7261 6765 730a 5079 7468  d leverages.Pyth
+000013c0: 6f6e 2773 2061 6476 616e 7461 6765 7320  on's advantages 
+000013d0: 6f66 2070 6f72 7461 6269 6c69 7479 2c20  of portability, 
+000013e0: 7562 6971 7569 7479 2061 6e64 2073 7570  ubiquity and sup
+000013f0: 706f 7274 2c20 616e 6420 7468 6520 6361  port, and the ca
+00001400: 7061 6269 6c69 7479 206f 660a 7468 6520  pability of.the 
+00001410: 6f70 656e 2d73 6f75 7263 6520 6563 6f73  open-source ecos
+00001420: 7973 7465 6d20 666f 7220 6c69 6e65 6172  ystem for linear
+00001430: 2061 6c67 6562 7261 2028 6e75 6d70 792c   algebra (numpy,
+00001440: 2073 6369 7079 292c 2067 7261 7068 6963   scipy), graphic
+00001450: 730a 286d 6174 706c 6f74 6c69 622c 2074  s.(matplotlib, t
+00001460: 6872 6565 2e6a 732c 2057 6562 474c 292c  hree.js, WebGL),
+00001470: 2069 6e74 6572 6163 7469 7665 2064 6576   interactive dev
+00001480: 656c 6f70 6d65 6e74 2028 6a75 7079 7465  elopment (jupyte
+00001490: 722c 206a 7570 7974 6572 6c61 622c 0a6d  r, jupyterlab,.m
+000014a0: 7962 696e 6465 722e 6f72 6729 2c20 616e  ybinder.org), an
+000014b0: 6420 646f 6375 6d65 6e74 6174 696f 6e20  d documentation 
+000014c0: 2873 7068 696e 7829 2e0a 0a54 6865 2054  (sphinx)...The T
+000014d0: 6f6f 6c62 6f78 2070 726f 7669 6465 7320  oolbox provides 
+000014e0: 746f 6f6c 7320 666f 7220 7265 7072 6573  tools for repres
+000014f0: 656e 7469 6e67 2074 6865 206b 696e 656d  enting the kinem
+00001500: 6174 6963 7320 616e 6420 6479 6e61 6d69  atics and dynami
+00001510: 6373 206f 660a 7365 7269 616c 2d6c 696e  cs of.serial-lin
+00001520: 6b20 6d61 6e69 7075 6c61 746f 7273 202d  k manipulators -
+00001530: 2079 6f75 2063 616e 2065 6173 696c 7920   you can easily 
+00001540: 6372 6561 7465 2079 6f75 7220 6f77 6e20  create your own 
+00001550: 696e 2044 656e 6176 6974 2d48 6172 7465  in Denavit-Harte
+00001560: 6e62 6572 670a 666f 726d 2c20 696d 706f  nberg.form, impo
+00001570: 7274 2061 2055 5244 4620 6669 6c65 2c20  rt a URDF file, 
+00001580: 6f72 2075 7365 206f 7665 7220 3330 2073  or use over 30 s
+00001590: 7570 706c 6965 6420 6d6f 6465 6c73 2066  upplied models f
+000015a0: 6f72 2077 656c 6c2d 6b6e 6f77 6e0a 636f  or well-known.co
+000015b0: 6e74 656d 706f 7261 7279 2072 6f62 6f74  ntemporary robot
+000015c0: 7320 6672 6f6d 2046 7261 6e6b 612d 456d  s from Franka-Em
+000015d0: 696b 612c 204b 696e 6f76 612c 2055 6e69  ika, Kinova, Uni
+000015e0: 7665 7273 616c 2052 6f62 6f74 6963 732c  versal Robotics,
+000015f0: 2052 6574 6869 6e6b 2061 730a 7765 6c6c   Rethink as.well
+00001600: 2061 7320 636c 6173 7369 6361 6c20 726f   as classical ro
+00001610: 626f 7473 2073 7563 6820 6173 2074 6865  bots such as the
+00001620: 2050 756d 6120 3536 3020 616e 6420 7468   Puma 560 and th
+00001630: 6520 5374 616e 666f 7264 2061 726d 2e0a  e Stanford arm..
+00001640: 0a54 6865 2054 6f6f 6c62 6f78 2063 6f6e  .The Toolbox con
+00001650: 7461 696e 7320 6661 7374 2069 6d70 6c65  tains fast imple
+00001660: 6d65 6e74 6174 696f 6e73 206f 6620 6b69  mentations of ki
+00001670: 6e65 6d61 7469 6320 6f70 6572 6174 696f  nematic operatio
+00001680: 6e73 2e20 5468 6520 666f 7277 6172 640a  ns. The forward.
+00001690: 6b69 6e65 6d61 7469 6373 2061 6e64 2074  kinematics and t
+000016a0: 6865 206d 616e 6970 756c 6174 6f72 204a  he manipulator J
+000016b0: 6163 6f62 6961 6e20 6361 6e20 6265 2063  acobian can be c
+000016c0: 6f6d 7075 7465 6420 696e 206c 6573 7320  omputed in less 
+000016d0: 7468 616e 2031 206d 6963 726f 7365 636f  than 1 microseco
+000016e0: 6e64 0a77 6869 6c65 206e 756d 6572 6963  nd.while numeric
+000016f0: 616c 2069 6e76 6572 7365 206b 696e 656d  al inverse kinem
+00001700: 6174 6963 7320 6361 6e20 6265 2073 6f6c  atics can be sol
+00001710: 7665 6420 696e 2061 7320 6c69 7474 6c65  ved in as little
+00001720: 2061 7320 3420 6d69 6372 6f73 6563 6f6e   as 4 microsecon
+00001730: 6473 2e0a 0a54 6865 2074 6f6f 6c62 6f78  ds...The toolbox
+00001740: 2061 6c73 6f20 7375 7070 6f72 7473 206d   also supports m
+00001750: 6f62 696c 6520 726f 626f 7473 2077 6974  obile robots wit
+00001760: 6820 6675 6e63 7469 6f6e 7320 666f 7220  h functions for 
+00001770: 726f 626f 7420 6d6f 7469 6f6e 206d 6f64  robot motion mod
+00001780: 656c 730a 2875 6e69 6379 636c 652c 2062  els.(unicycle, b
+00001790: 6963 7963 6c65 292c 2070 6174 6820 706c  icycle), path pl
+000017a0: 616e 6e69 6e67 2061 6c67 6f72 6974 686d  anning algorithm
+000017b0: 7320 2862 7567 2c20 6469 7374 616e 6365  s (bug, distance
+000017c0: 2074 7261 6e73 666f 726d 2c20 445c 2a2c   transform, D\*,
+000017d0: 0a50 524d 292c 206b 696e 6f64 796e 616d  .PRM), kinodynam
+000017e0: 6963 2070 6c61 6e6e 696e 6720 286c 6174  ic planning (lat
+000017f0: 7469 6365 2c20 5252 5429 2c20 6c6f 6361  tice, RRT), loca
+00001800: 6c69 7a61 7469 6f6e 2028 454b 462c 2070  lization (EKF, p
+00001810: 6172 7469 636c 6520 6669 6c74 6572 292c  article filter),
+00001820: 0a6d 6170 2062 7569 6c64 696e 6720 2845  .map building (E
+00001830: 4b46 2920 616e 6420 7369 6d75 6c74 616e  KF) and simultan
+00001840: 656f 7573 206c 6f63 616c 697a 6174 696f  eous localizatio
+00001850: 6e20 616e 6420 6d61 7070 696e 6720 2845  n and mapping (E
+00001860: 4b46 292e 0a0a 5468 6520 546f 6f6c 626f  KF)...The Toolbo
+00001870: 7820 7072 6f76 6964 6573 3a0a 0a2d 2063  x provides:..- c
+00001880: 6f64 6520 7468 6174 2069 7320 6d61 7475  ode that is matu
+00001890: 7265 2061 6e64 2070 726f 7669 6465 7320  re and provides 
+000018a0: 6120 706f 696e 7420 6f66 2063 6f6d 7061  a point of compa
+000018b0: 7269 736f 6e20 666f 7220 6f74 6865 720a  rison for other.
+000018c0: 2020 696d 706c 656d 656e 7461 7469 6f6e    implementation
+000018d0: 7320 6f66 2074 6865 2073 616d 6520 616c  s of the same al
+000018e0: 676f 7269 7468 6d73 3b0a 2d20 726f 7574  gorithms;.- rout
+000018f0: 696e 6573 2077 6869 6368 2061 7265 2067  ines which are g
+00001900: 656e 6572 616c 6c79 2077 7269 7474 656e  enerally written
+00001910: 2069 6e20 6120 7374 7261 6967 6874 666f   in a straightfo
+00001920: 7277 6172 6420 6d61 6e6e 6572 2077 6869  rward manner whi
+00001930: 6368 0a20 2061 6c6c 6f77 7320 666f 7220  ch.  allows for 
+00001940: 6561 7379 2075 6e64 6572 7374 616e 6469  easy understandi
+00001950: 6e67 2c20 7065 7268 6170 7320 6174 2074  ng, perhaps at t
+00001960: 6865 2065 7870 656e 7365 206f 6620 636f  he expense of co
+00001970: 6d70 7574 6174 696f 6e61 6c0a 2020 6566  mputational.  ef
+00001980: 6669 6369 656e 6379 3b0a 2d20 736f 7572  ficiency;.- sour
+00001990: 6365 2063 6f64 6520 7768 6963 6820 6361  ce code which ca
+000019a0: 6e20 6265 2072 6561 6420 666f 7220 6c65  n be read for le
+000019b0: 6172 6e69 6e67 2061 6e64 2074 6561 6368  arning and teach
+000019c0: 696e 673b 0a2d 2062 6163 6b77 6172 6420  ing;.- backward 
+000019d0: 636f 6d70 6174 6162 696c 6974 7920 7769  compatability wi
+000019e0: 7468 2074 6865 2052 6f62 6f74 6963 7320  th the Robotics 
+000019f0: 546f 6f6c 626f 7820 666f 7220 4d41 544c  Toolbox for MATL
+00001a00: 4142 0a0a 5468 6520 546f 6f6c 626f 7820  AB..The Toolbox 
+00001a10: 6c65 7665 7261 6765 7320 7468 6520 5b53  leverages the [S
+00001a20: 7061 7469 616c 204d 6174 6873 2054 6f6f  patial Maths Too
+00001a30: 6c62 6f78 2066 6f72 2050 7974 686f 6e5d  lbox for Python]
+00001a40: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00001a50: 636f 6d2f 7065 7465 7263 6f72 6b65 2f73  com/petercorke/s
+00001a60: 7061 7469 616c 6d61 7468 2d70 7974 686f  patialmath-pytho
+00001a70: 6e29 2074 6f0a 7072 6f76 6964 6520 7375  n) to.provide su
+00001a80: 7070 6f72 7420 666f 7220 6461 7461 2074  pport for data t
+00001a90: 7970 6573 2073 7563 6820 6173 2053 4f28  ypes such as SO(
+00001aa0: 6e29 2061 6e64 2053 4528 6e29 206d 6174  n) and SE(n) mat
+00001ab0: 7269 6365 732c 2071 7561 7465 726e 696f  rices, quaternio
+00001ac0: 6e73 2c20 7477 6973 7473 2061 6e64 2073  ns, twists and s
+00001ad0: 7061 7469 616c 2076 6563 746f 7273 2e0a  patial vectors..
+00001ae0: 0a3c 6272 3e0a 0a3c 6120 6964 3d27 3227  .<br>..<a id='2'
+00001af0: 3e3c 2f61 3e0a 0a23 2320 4765 7474 696e  ></a>..## Gettin
+00001b00: 6720 676f 696e 670a 0a59 6f75 2077 696c  g going..You wil
+00001b10: 6c20 6e65 6564 2050 7974 686f 6e20 3e3d  l need Python >=
+00001b20: 2033 2e36 0a0a 2323 2320 5573 696e 6720   3.6..### Using 
+00001b30: 7069 700a 0a49 6e73 7461 6c6c 2061 2073  pip..Install a s
+00001b40: 6e61 7073 686f 7420 6672 6f6d 2050 7950  napshot from PyP
+00001b50: 490a 0a60 6060 7368 656c 6c20 7363 7269  I..```shell scri
+00001b60: 7074 0a70 6970 3320 696e 7374 616c 6c20  pt.pip3 install 
+00001b70: 726f 626f 7469 6373 746f 6f6c 626f 782d  roboticstoolbox-
+00001b80: 7079 7468 6f6e 0a60 6060 0a0a 4176 6169  python.```..Avai
+00001b90: 6c61 626c 6520 6f70 7469 6f6e 7320 6172  lable options ar
+00001ba0: 653a 0a0a 2d20 6063 6f6c 6c69 7369 6f6e  e:..- `collision
+00001bb0: 6020 696e 7374 616c 6c20 636f 6c6c 6973  ` install collis
+00001bc0: 696f 6e20 6368 6563 6b69 6e67 2077 6974  ion checking wit
+00001bd0: 6820 5b70 7962 756c 6c65 745d 2868 7474  h [pybullet](htt
+00001be0: 7073 3a2f 2f70 7962 756c 6c65 742e 6f72  ps://pybullet.or
+00001bf0: 6729 0a0a 5075 7420 7468 6520 6f70 7469  g)..Put the opti
+00001c00: 6f6e 7320 696e 2061 2063 6f6d 6d61 2073  ons in a comma s
+00001c10: 6570 6172 6174 6564 206c 6973 7420 6c69  eparated list li
+00001c20: 6b65 0a0a 6060 6073 6865 6c6c 2073 6372  ke..```shell scr
+00001c30: 6970 740a 7069 7033 2069 6e73 7461 6c6c  ipt.pip3 install
+00001c40: 2072 6f62 6f74 6963 7374 6f6f 6c62 6f78   roboticstoolbox
+00001c50: 2d70 7974 686f 6e5b 6f70 7469 6f6e 6c69  -python[optionli
+00001c60: 7374 5d0a 6060 600a 0a5b 5377 6966 745d  st].```..[Swift]
+00001c70: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00001c80: 636f 6d2f 6a68 6176 6c2f 7377 6966 7429  com/jhavl/swift)
+00001c90: 2c20 6120 7765 622d 6261 7365 6420 7669  , a web-based vi
+00001ca0: 7375 616c 697a 6572 2c20 6973 0a69 6e73  sualizer, is.ins
+00001cb0: 7461 6c6c 6564 2061 7320 7061 7274 206f  talled as part o
+00001cc0: 6620 526f 626f 7469 6373 2054 6f6f 6c62  f Robotics Toolb
+00001cd0: 6f78 2e0a 0a23 2323 2046 726f 6d20 4769  ox...### From Gi
+00001ce0: 7448 7562 0a0a 546f 2069 6e73 7461 6c6c  tHub..To install
+00001cf0: 2074 6865 2062 6c65 6564 696e 672d 6564   the bleeding-ed
+00001d00: 6765 2076 6572 7369 6f6e 2066 726f 6d20  ge version from 
+00001d10: 4769 7448 7562 0a0a 6060 6073 6865 6c6c  GitHub..```shell
+00001d20: 2073 6372 6970 740a 6769 7420 636c 6f6e   script.git clon
+00001d30: 6520 6874 7470 733a 2f2f 6769 7468 7562  e https://github
+00001d40: 2e63 6f6d 2f70 6574 6572 636f 726b 652f  .com/petercorke/
+00001d50: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00001d60: 2d70 7974 686f 6e2e 6769 740a 6364 2072  -python.git.cd r
+00001d70: 6f62 6f74 6963 732d 746f 6f6c 626f 782d  obotics-toolbox-
+00001d80: 7079 7468 6f6e 0a70 6970 3320 696e 7374  python.pip3 inst
+00001d90: 616c 6c20 2d65 202e 0a60 6060 0a0a 3c62  all -e ..```..<b
+00001da0: 723e 0a0a 3c61 2069 643d 2733 273e 3c2f  r>..<a id='3'></
+00001db0: 613e 0a0a 2323 2054 7574 6f72 6961 6c73  a>..## Tutorials
+00001dc0: 0a0a 3c74 6162 6c65 2073 7479 6c65 3d22  ..<table style="
+00001dd0: 626f 7264 6572 3a30 7078 223e 0a3c 7472  border:0px">.<tr
+00001de0: 2073 7479 6c65 3d22 626f 7264 6572 3a30   style="border:0
+00001df0: 7078 223e 0a3c 7464 2073 7479 6c65 3d22  px">.<td style="
+00001e00: 626f 7264 6572 3a30 7078 223e 3c61 2068  border:0px"><a h
+00001e10: 7265 663d 2268 7474 7073 3a2f 2f62 6974  ref="https://bit
+00001e20: 2e6c 792f 3361 6b35 4744 6922 3e3c 696d  .ly/3ak5GDi"><im
+00001e30: 6720 7372 633d 2268 7474 7073 3a2f 2f67  g src="https://g
+00001e40: 6974 6875 622e 636f 6d2f 6a68 6176 6c2f  ithub.com/jhavl/
+00001e50: 646b 742f 7261 772f 6d61 696e 2f69 6d67  dkt/raw/main/img
+00001e60: 2f61 7274 6963 6c65 312e 706e 6722 2077  /article1.png" w
+00001e70: 6964 7468 3d22 3430 3022 3e3c 2f61 3e3c  idth="400"></a><
+00001e80: 2f74 643e 0a3c 7464 2073 7479 6c65 3d22  /td>.<td style="
+00001e90: 626f 7264 6572 3a30 7078 223e 3c61 2068  border:0px"><a h
+00001ea0: 7265 663d 2268 7474 7073 3a2f 2f62 6974  ref="https://bit
+00001eb0: 2e6c 792f 3361 6b35 4744 6922 3e3c 696d  .ly/3ak5GDi"><im
+00001ec0: 6720 7372 633d 2268 7474 7073 3a2f 2f67  g src="https://g
+00001ed0: 6974 6875 622e 636f 6d2f 6a68 6176 6c2f  ithub.com/jhavl/
+00001ee0: 646b 742f 7261 772f 6d61 696e 2f69 6d67  dkt/raw/main/img
+00001ef0: 2f61 7274 6963 6c65 322e 706e 6722 2077  /article2.png" w
+00001f00: 6964 7468 3d22 3430 3022 3e3c 2f61 3e3c  idth="400"></a><
+00001f10: 2f74 643e 0a3c 7464 2073 7479 6c65 3d22  /td>.<td style="
+00001f20: 626f 7264 6572 3a30 7078 223e 0a44 6f20  border:0px">.Do 
+00001f30: 796f 7520 7761 6e74 2074 6f20 6c65 6172  you want to lear
+00001f40: 6e20 6162 6f75 7420 6d61 6e69 7075 6c61  n about manipula
+00001f50: 746f 7220 6b69 6e65 6d61 7469 6373 2c20  tor kinematics, 
+00001f60: 6469 6666 6572 656e 7469 616c 206b 696e  differential kin
+00001f70: 656d 6174 6963 732c 2069 6e76 6572 7365  ematics, inverse
+00001f80: 2d6b 696e 656d 6174 6963 7320 616e 6420  -kinematics and 
+00001f90: 6d6f 7469 6f6e 2063 6f6e 7472 6f6c 3f20  motion control? 
+00001fa0: 4861 7665 2061 206c 6f6f 6b20 6174 206f  Have a look at o
+00001fb0: 7572 0a3c 6120 6872 6566 3d22 6874 7470  ur.<a href="http
+00001fc0: 733a 2f2f 6269 742e 6c79 2f33 616b 3547  s://bit.ly/3ak5G
+00001fd0: 4469 223e 7475 746f 7269 616c 3c2f 613e  Di">tutorial</a>
+00001fe0: 2e0a 5468 6973 2074 7574 6f72 6961 6c20  ..This tutorial 
+00001ff0: 636f 6d65 7320 7769 7468 2074 776f 2061  comes with two a
+00002000: 7274 6963 6c65 7320 746f 2063 6f76 6572  rticles to cover
+00002010: 2074 6865 2074 6865 6f72 7920 616e 6420   the theory and 
+00002020: 3132 204a 7570 7974 6572 204e 6f74 6562  12 Jupyter Noteb
+00002030: 6f6f 6b73 2070 726f 7669 6469 6e67 2066  ooks providing f
+00002040: 756c 6c20 636f 6465 2069 6d70 6c65 6d65  ull code impleme
+00002050: 6e74 6174 696f 6e73 2061 6e64 2065 7861  ntations and exa
+00002060: 6d70 6c65 732e 204d 6f73 7420 6f66 2074  mples. Most of t
+00002070: 6865 204e 6f74 6562 6f6f 6b73 2061 7265  he Notebooks are
+00002080: 2061 6c73 6f20 476f 6f67 6c65 2043 6f6c   also Google Col
+00002090: 6162 2063 6f6d 7061 7469 626c 6520 616c  ab compatible al
+000020a0: 6c6f 7769 6e67 2074 6865 6d20 746f 2072  lowing them to r
+000020b0: 756e 206f 6e6c 696e 652e 0a3c 2f74 643e  un online..</td>
+000020c0: 0a3c 2f74 723e 0a3c 2f74 6162 6c65 3e0a  .</tr>.</table>.
+000020d0: 0a3c 6272 3e0a 0a3c 6120 6964 3d27 3427  .<br>..<a id='4'
+000020e0: 3e3c 2f61 3e0a 0a23 2320 436f 6465 2045  ></a>..## Code E
+000020f0: 7861 6d70 6c65 730a 0a57 6520 7769 6c6c  xamples..We will
+00002100: 206c 6f61 6420 6120 6d6f 6465 6c20 6f66   load a model of
+00002110: 2074 6865 2046 7261 6e6b 612d 456d 696b   the Franka-Emik
+00002120: 6120 5061 6e64 6120 726f 626f 7420 6465  a Panda robot de
+00002130: 6669 6e65 6420 6279 2061 2055 5244 4620  fined by a URDF 
+00002140: 6669 6c65 0a0a 6060 6070 7974 686f 6e0a  file..```python.
+00002150: 696d 706f 7274 2072 6f62 6f74 6963 7374  import roboticst
+00002160: 6f6f 6c62 6f78 2061 7320 7274 620a 726f  oolbox as rtb.ro
+00002170: 626f 7420 3d20 7274 622e 6d6f 6465 6c73  bot = rtb.models
+00002180: 2e50 616e 6461 2829 0a70 7269 6e74 2872  .Panda().print(r
+00002190: 6f62 6f74 290a 0a09 4552 6f62 6f74 3a20  obot)...ERobot: 
+000021a0: 7061 6e64 6120 2862 7920 4672 616e 6b61  panda (by Franka
+000021b0: 2045 6d69 6b61 292c 2037 206a 6f69 6e74   Emika), 7 joint
+000021c0: 7320 2852 5252 5252 5252 292c 2031 2067  s (RRRRRRR), 1 g
+000021d0: 7269 7070 6572 2c20 6765 6f6d 6574 7279  ripper, geometry
+000021e0: 2c20 636f 6c6c 6973 696f 6e0a 09e2 948c  , collision.....
+000021f0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002200: 94ac e294 80e2 9480 e294 80e2 9480 e294  ................
+00002210: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002220: e294 80e2 9480 e294 80e2 9480 e294 ace2  ................
+00002230: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002240: 80e2 9480 e294 ace2 9480 e294 80e2 9480  ................
+00002250: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002260: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002270: ace2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002280: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002290: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000022a0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000022b0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000022c0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000022d0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000022e0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000022f0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002300: 80e2 9490 0a09 e294 826c 696e 6b20 e294  .........link ..
+00002310: 8220 2020 2020 6c69 6e6b 2020 2020 20e2  .     link     .
+00002320: 9482 206a 6f69 6e74 20e2 9482 2020 2070  .. joint ...   p
+00002330: 6172 656e 7420 2020 20e2 9482 2020 2020  arent    ...    
+00002340: 2020 2020 2020 2020 2020 4554 533a 2070            ETS: p
+00002350: 6172 656e 7420 746f 206c 696e 6b20 2020  arent to link   
+00002360: 2020 2020 2020 2020 2020 2020 e294 820a              ....
+00002370: 09e2 949c e294 80e2 9480 e294 80e2 9480  ................
+00002380: e294 80e2 94bc e294 80e2 9480 e294 80e2  ................
+00002390: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000023a0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000023b0: e294 bce2 9480 e294 80e2 9480 e294 80e2  ................
+000023c0: 9480 e294 80e2 9480 e294 bce2 9480 e294  ................
+000023d0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000023e0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000023f0: 9480 e294 bce2 9480 e294 80e2 9480 e294  ................
+00002400: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002410: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002420: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002430: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002440: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002450: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002460: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002470: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002480: 9480 e294 80e2 94a4 0a09 e294 8220 2020  .............   
+00002490: 3020 e294 8220 7061 6e64 615f 6c69 6e6b  0 ... panda_link
+000024a0: 3020 20e2 9482 2020 2020 2020 20e2 9482  0  ...       ...
+000024b0: 2042 4153 4520 2020 2020 2020 20e2 9482   BASE        ...
+000024c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000024f0: e294 820a 09e2 9482 2020 2031 20e2 9482  ........   1 ...
+00002500: 2070 616e 6461 5f6c 696e 6b31 2020 e294   panda_link1  ..
+00002510: 8220 2020 2020 3020 e294 8220 7061 6e64  .     0 ... pand
+00002520: 615f 6c69 6e6b 3020 e294 8220 5345 3328  a_link0 ... SE3(
+00002530: 302c 2030 2c20 302e 3333 3329 20e2 8a95  0, 0, 0.333) ...
+00002540: 2052 7a28 7130 2920 2020 2020 2020 2020   Rz(q0)         
+00002550: 2020 2020 2020 2020 2020 2020 20e2 9482               ...
+00002560: 0a09 e294 8220 2020 3220 e294 8220 7061  .....   2 ... pa
+00002570: 6e64 615f 6c69 6e6b 3220 20e2 9482 2020  nda_link2  ...  
+00002580: 2020 2031 20e2 9482 2070 616e 6461 5f6c     1 ... panda_l
+00002590: 696e 6b31 20e2 9482 2053 4533 282d 3930  ink1 ... SE3(-90
+000025a0: c2b0 2c20 2d30 c2b0 2c20 30c2 b029 20e2  .., -0.., 0..) .
+000025b0: 8a95 2052 7a28 7131 2920 2020 2020 2020  .. Rz(q1)       
+000025c0: 2020 2020 2020 2020 2020 2020 20e2 9482               ...
+000025d0: 0a09 e294 8220 2020 3320 e294 8220 7061  .....   3 ... pa
+000025e0: 6e64 615f 6c69 6e6b 3320 20e2 9482 2020  nda_link3  ...  
+000025f0: 2020 2032 20e2 9482 2070 616e 6461 5f6c     2 ... panda_l
+00002600: 696e 6b32 20e2 9482 2053 4533 2830 2c20  ink2 ... SE3(0, 
+00002610: 2d30 2e33 3136 2c20 303b 2039 30c2 b02c  -0.316, 0; 90..,
+00002620: 202d 30c2 b02c 2030 c2b0 2920 e28a 9520   -0.., 0..) ... 
+00002630: 527a 2871 3229 2020 2020 2020 20e2 9482  Rz(q2)       ...
+00002640: 0a09 e294 8220 2020 3420 e294 8220 7061  .....   4 ... pa
+00002650: 6e64 615f 6c69 6e6b 3420 20e2 9482 2020  nda_link4  ...  
+00002660: 2020 2033 20e2 9482 2070 616e 6461 5f6c     3 ... panda_l
+00002670: 696e 6b33 20e2 9482 2053 4533 2830 2e30  ink3 ... SE3(0.0
+00002680: 3832 352c 2030 2c20 303b 2039 30c2 b02c  825, 0, 0; 90..,
+00002690: 202d 30c2 b02c 2030 c2b0 2920 e28a 9520   -0.., 0..) ... 
+000026a0: 527a 2871 3329 2020 2020 2020 20e2 9482  Rz(q3)       ...
+000026b0: 0a09 e294 8220 2020 3520 e294 8220 7061  .....   5 ... pa
+000026c0: 6e64 615f 6c69 6e6b 3520 20e2 9482 2020  nda_link5  ...  
+000026d0: 2020 2034 20e2 9482 2070 616e 6461 5f6c     4 ... panda_l
+000026e0: 696e 6b34 20e2 9482 2053 4533 282d 302e  ink4 ... SE3(-0.
+000026f0: 3038 3235 2c20 302e 3338 342c 2030 3b20  0825, 0.384, 0; 
+00002700: 2d39 30c2 b02c 202d 30c2 b02c 2030 c2b0  -90.., -0.., 0..
+00002710: 2920 e28a 9520 527a 2871 3429 20e2 9482  ) ... Rz(q4) ...
+00002720: 0a09 e294 8220 2020 3620 e294 8220 7061  .....   6 ... pa
+00002730: 6e64 615f 6c69 6e6b 3620 20e2 9482 2020  nda_link6  ...  
+00002740: 2020 2035 20e2 9482 2070 616e 6461 5f6c     5 ... panda_l
+00002750: 696e 6b35 20e2 9482 2053 4533 2839 30c2  ink5 ... SE3(90.
+00002760: b02c 202d 30c2 b02c 2030 c2b0 2920 e28a  ., -0.., 0..) ..
+00002770: 9520 527a 2871 3529 2020 2020 2020 2020  . Rz(q5)        
+00002780: 2020 2020 2020 2020 2020 2020 20e2 9482               ...
+00002790: 0a09 e294 8220 2020 3720 e294 8220 7061  .....   7 ... pa
+000027a0: 6e64 615f 6c69 6e6b 3720 20e2 9482 2020  nda_link7  ...  
+000027b0: 2020 2036 20e2 9482 2070 616e 6461 5f6c     6 ... panda_l
+000027c0: 696e 6b36 20e2 9482 2053 4533 2830 2e30  ink6 ... SE3(0.0
+000027d0: 3838 2c20 302c 2030 3b20 3930 c2b0 2c20  88, 0, 0; 90.., 
+000027e0: 2d30 c2b0 2c20 30c2 b029 20e2 8a95 2052  -0.., 0..) ... R
+000027f0: 7a28 7136 2920 2020 2020 2020 20e2 9482  z(q6)        ...
+00002800: 0a09 e294 8220 2020 3820 e294 8220 4070  .....   8 ... @p
+00002810: 616e 6461 5f6c 696e 6b38 20e2 9482 2020  anda_link8 ...  
+00002820: 2020 2020 20e2 9482 2070 616e 6461 5f6c       ... panda_l
+00002830: 696e 6b37 20e2 9482 2053 4533 2830 2c20  ink7 ... SE3(0, 
+00002840: 302c 2030 2e31 3037 2920 2020 2020 2020  0, 0.107)       
 00002850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002860: 2020 2020 e294 820a 09e2 9482 2020 2037      ........   7
-00002870: 20e2 9482 2070 616e 6461 5f6c 696e 6b37   ... panda_link7
-00002880: 2020 e294 8220 2020 2020 3620 e294 8220    ...     6 ... 
-00002890: 7061 6e64 615f 6c69 6e6b 3620 e294 8220  panda_link6 ... 
-000028a0: 5345 3328 302e 3038 382c 2030 2c20 303b  SE3(0.088, 0, 0;
-000028b0: 2039 30c2 b02c 202d 30c2 b02c 2030 c2b0   90.., -0.., 0..
-000028c0: 2920 e28a 9520 527a 2871 3629 2020 2020  ) ... Rz(q6)    
-000028d0: 2020 2020 e294 820a 09e2 9482 2020 2038      ........   8
-000028e0: 20e2 9482 2040 7061 6e64 615f 6c69 6e6b   ... @panda_link
-000028f0: 3820 e294 8220 2020 2020 2020 e294 8220  8 ...       ... 
-00002900: 7061 6e64 615f 6c69 6e6b 3720 e294 8220  panda_link7 ... 
-00002910: 5345 3328 302c 2030 2c20 302e 3130 3729  SE3(0, 0, 0.107)
-00002920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002930: 2020 2020 2020 2020 2020 2020 2020 20e2                 .
-00002940: 9482 0a09 e294 94e2 9480 e294 80e2 9480  ................
-00002950: e294 80e2 9480 e294 b4e2 9480 e294 80e2  ................
-00002960: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002970: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002980: e294 80e2 94b4 e294 80e2 9480 e294 80e2  ................
-00002990: 9480 e294 80e2 9480 e294 80e2 94b4 e294  ................
-000029a0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000029b0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000029c0: 9480 e294 80e2 94b4 e294 80e2 9480 e294  ................
-000029d0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-000029e0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-000029f0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002a00: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002a10: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002a20: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002a30: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002a40: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002a50: 9480 e294 80e2 9480 e294 980a 0a09 e294  ................
-00002a60: 8ce2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002a70: e294 ace2 9480 e294 80e2 9480 e294 80e2  ................
-00002a80: 9480 e294 ace2 9480 e294 80e2 9480 e294  ................
-00002a90: 80e2 9480 e294 80e2 9480 e294 80e2 94ac  ................
-00002aa0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002ab0: 94ac e294 80e2 9480 e294 80e2 9480 e294  ................
-00002ac0: 80e2 9480 e294 80e2 94ac e294 80e2 9480  ................
-00002ad0: e294 80e2 9480 e294 80e2 94ac e294 80e2  ................
-00002ae0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002af0: 80e2 94ac e294 80e2 9480 e294 80e2 9480  ................
-00002b00: e294 80e2 9480 e294 900a 09e2 9482 6e61  ..............na
-00002b10: 6d65 20e2 9482 2071 3020 20e2 9482 2071  me ... q0  ... q
-00002b20: 3120 2020 2020 e294 8220 7132 2020 e294  1     ... q2  ..
-00002b30: 8220 7133 2020 2020 e294 8220 7134 2020  . q3    ... q4  
-00002b40: e294 8220 7135 2020 2020 e294 8220 7136  ... q5    ... q6
-00002b50: 2020 20e2 9482 0a09 e294 9ce2 9480 e294     .............
-00002b60: 80e2 9480 e294 80e2 9480 e294 bce2 9480  ................
-00002b70: e294 80e2 9480 e294 80e2 9480 e294 bce2  ................
-00002b80: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002b90: 80e2 9480 e294 80e2 94bc e294 80e2 9480  ................
-00002ba0: e294 80e2 9480 e294 80e2 94bc e294 80e2  ................
-00002bb0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002bc0: 80e2 94bc e294 80e2 9480 e294 80e2 9480  ................
-00002bd0: e294 80e2 94bc e294 80e2 9480 e294 80e2  ................
-00002be0: 9480 e294 80e2 9480 e294 80e2 94bc e294  ................
-00002bf0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002c00: e294 a40a 09e2 9482 2020 7172 20e2 9482  ........  qr ...
-00002c10: 2020 30c2 b020 e294 8220 2d31 372e 32c2    0.. ... -17.2.
-00002c20: b020 e294 8220 2030 c2b0 20e2 9482 202d  . ...  0.. ... -
-00002c30: 3132 36c2 b020 e294 8220 2030 c2b0 20e2  126.. ...  0.. .
-00002c40: 9482 2020 3131 35c2 b020 e294 8220 2034  ..  115.. ...  4
-00002c50: 35c2 b020 e294 820a 09e2 9482 2020 717a  5.. ........  qz
-00002c60: 20e2 9482 2020 30c2 b020 e294 8220 2030   ...  0.. ...  0
-00002c70: c2b0 2020 2020 e294 8220 2030 c2b0 20e2  ..    ...  0.. .
-00002c80: 9482 2020 30c2 b020 2020 e294 8220 2030  ..  0..   ...  0
-00002c90: c2b0 20e2 9482 2020 30c2 b020 2020 e294  .. ...  0..   ..
-00002ca0: 8220 2030 c2b0 2020 e294 820a 09e2 9494  .  0..  ........
-00002cb0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
-00002cc0: 94b4 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002cd0: 80e2 94b4 e294 80e2 9480 e294 80e2 9480  ................
-00002ce0: e294 80e2 9480 e294 80e2 9480 e294 b4e2  ................
-00002cf0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
-00002d00: b4e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002d10: e294 80e2 9480 e294 b4e2 9480 e294 80e2  ................
-00002d20: 9480 e294 80e2 9480 e294 b4e2 9480 e294  ................
-00002d30: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
-00002d40: e294 b4e2 9480 e294 80e2 9480 e294 80e2  ................
-00002d50: 9480 e294 80e2 9498 0a60 6060 0a0a 5468  .........```..Th
-00002d60: 6520 7379 6d62 6f6c 2060 4060 2069 6e64  e symbol `@` ind
-00002d70: 6963 6174 6573 2074 6865 206c 696e 6b20  icates the link 
-00002d80: 6173 2061 6e20 656e 642d 6566 6665 6374  as an end-effect
-00002d90: 6f72 2c20 6120 6c65 6166 206e 6f64 6520  or, a leaf node 
-00002da0: 696e 2074 6865 2072 6967 6964 2d62 6f64  in the rigid-bod
-00002db0: 790a 7472 6565 2028 5079 7468 6f6e 2070  y.tree (Python p
-00002dc0: 726f 6d70 7473 2061 7265 206e 6f74 2073  rompts are not s
-00002dd0: 686f 776e 2074 6f20 6d61 6b65 2069 7420  hown to make it 
-00002de0: 6561 7379 2074 6f20 636f 7079 2b70 6173  easy to copy+pas
-00002df0: 7465 2074 6865 2063 6f64 652c 2063 6f6e  te the code, con
-00002e00: 736f 6c65 206f 7574 7075 7420 6973 2069  sole output is i
-00002e10: 6e64 656e 7465 6429 2e0a 5765 2077 696c  ndented)..We wil
-00002e20: 6c20 636f 6d70 7574 6520 7468 6520 666f  l compute the fo
-00002e30: 7277 6172 6420 6b69 6e65 6d61 7469 6373  rward kinematics
-00002e40: 206e 6578 740a 0a60 6060 0a54 6520 3d20   next..```.Te = 
-00002e50: 726f 626f 742e 666b 696e 6528 726f 626f  robot.fkine(robo
-00002e60: 742e 7172 2920 2023 2066 6f72 7761 7264  t.qr)  # forward
-00002e70: 206b 696e 656d 6174 6963 730a 7072 696e   kinematics.prin
-00002e80: 7428 5465 290a 0a09 302e 3939 3520 2020  t(Te)...0.995   
-00002e90: 2020 3020 2020 2020 2020 2020 302e 3039    0         0.09
-00002ea0: 3938 3320 2020 302e 3438 340a 0930 2020  983   0.484..0  
-00002eb0: 2020 2020 2020 2d31 2020 2020 2020 2020        -1        
-00002ec0: 2030 2020 2020 2020 2020 2030 0a09 302e   0         0..0.
-00002ed0: 3039 3938 3320 2020 3020 2020 2020 2020  09983   0       
-00002ee0: 202d 302e 3939 3520 2020 2020 302e 3431   -0.995     0.41
-00002ef0: 3236 0a09 3020 2020 2020 2020 2020 3020  26..0         0 
-00002f00: 2020 2020 2020 2020 3020 2020 2020 2020          0       
-00002f10: 2020 310a 6060 600a 0a57 6520 6361 6e20    1.```..We can 
-00002f20: 736f 6c76 6520 696e 7665 7273 6520 6b69  solve inverse ki
-00002f30: 6e65 6d61 7469 6373 2076 6572 7920 6561  nematics very ea
-00002f40: 7369 6c79 2e20 5765 2066 6972 7374 2063  sily. We first c
-00002f50: 686f 6f73 6520 616e 2053 4528 3329 2070  hoose an SE(3) p
-00002f60: 6f73 650a 6465 6669 6e65 6420 696e 2074  ose.defined in t
-00002f70: 6572 6d73 206f 6620 706f 7369 7469 6f6e  erms of position
-00002f80: 2061 6e64 206f 7269 656e 7461 7469 6f6e   and orientation
-00002f90: 2028 656e 642d 6566 6665 6374 6f72 207a   (end-effector z
-00002fa0: 2d61 7869 7320 646f 776e 2028 413d 2d5a  -axis down (A=-Z
-00002fb0: 2920 616e 6420 6669 6e67 6572 0a6f 7269  ) and finger.ori
-00002fc0: 656e 7461 7469 6f6e 2070 6172 616c 6c65  entation paralle
-00002fd0: 6c20 746f 2079 2d61 7869 7320 284f 3d2b  l to y-axis (O=+
-00002fe0: 5929 292e 0a0a 6060 6070 7974 686f 6e0a  Y))...```python.
-00002ff0: 6672 6f6d 2073 7061 7469 616c 6d61 7468  from spatialmath
-00003000: 2069 6d70 6f72 7420 5345 330a 0a54 6570   import SE3..Tep
-00003010: 203d 2053 4533 2e54 7261 6e73 2830 2e36   = SE3.Trans(0.6
-00003020: 2c20 2d30 2e33 2c20 302e 3129 202a 2053  , -0.3, 0.1) * S
-00003030: 4533 2e4f 4128 5b30 2c20 312c 2030 5d2c  E3.OA([0, 1, 0],
-00003040: 205b 302c 2030 2c20 2d31 5d29 0a73 6f6c   [0, 0, -1]).sol
-00003050: 203d 2072 6f62 6f74 2e69 6b5f 6c6d 5f63   = robot.ik_lm_c
-00003060: 6861 6e28 5465 7029 2020 2020 2020 2020  han(Tep)        
-00003070: 2023 2073 6f6c 7665 2049 4b0a 7072 696e   # solve IK.prin
-00003080: 7428 736f 6c29 0a0a 0928 6172 7261 7928  t(sol)...(array(
-00003090: 5b20 302e 3230 3539 3238 3135 2c20 2030  [ 0.20592815,  0
-000030a0: 2e38 3636 3039 3438 312c 202d 302e 3739  .86609481, -0.79
-000030b0: 3437 3332 3036 2c20 2d31 2e36 3832 3534  473206, -1.68254
-000030c0: 3739 342c 2020 302e 3734 3837 3239 3135  794,  0.74872915
-000030d0: 2c0a 0909 0932 2e32 3137 3634 3734 362c  ,....2.21764746,
-000030e0: 202d 302e 3130 3235 3536 3036 5d29 2c20   -0.10255606]), 
-000030f0: 312c 2031 3134 2c20 372c 2032 2e38 3930  1, 114, 7, 2.890
-00003100: 3136 3430 3537 3233 3032 3238 652d 3037  164057230228e-07
-00003110: 290a 0a71 5f70 6963 6b75 7020 3d20 736f  )..q_pickup = so
-00003120: 6c5b 305d 0a70 7269 6e74 2872 6f62 6f74  l[0].print(robot
-00003130: 2e66 6b69 6e65 2871 5f70 6963 6b75 7029  .fkine(q_pickup)
-00003140: 2920 2020 2023 2046 4b20 7368 6f77 7320  )    # FK shows 
-00003150: 7468 6174 2064 6573 6972 6564 2065 6e64  that desired end
-00003160: 2d65 6666 6563 746f 7220 706f 7365 2077  -effector pose w
-00003170: 6173 2061 6368 6965 7665 640a 0a09 2031  as achieved... 1
-00003180: 2020 2020 2020 2020 202d 382e 3931 3365           -8.913e
-00003190: 2d30 3520 202d 302e 3030 3033 3333 3420  -05  -0.0003334 
-000031a0: 2030 2e35 3939 360a 092d 382e 3932 3965   0.5996..-8.929e
-000031b0: 2d30 3520 2d31 2020 2020 2020 2020 2020  -05 -1          
-000031c0: 2d30 2e30 3030 3439 3132 202d 302e 3239  -0.0004912 -0.29
-000031d0: 3938 0a09 2d30 2e30 3030 3333 3334 2020  98..-0.0003334  
-000031e0: 302e 3030 3034 3931 3220 202d 3120 2020  0.0004912  -1   
-000031f0: 2020 2020 2020 2030 2e31 3030 310a 0920         0.1001.. 
-00003200: 3020 2020 2020 2020 2020 2030 2020 2020  0          0    
-00003210: 2020 2020 2020 2030 2020 2020 2020 2020         0        
-00003220: 2020 310a 6060 600a 0a57 6520 6361 6e20    1.```..We can 
-00003230: 616e 696d 6174 6520 6120 7061 7468 2066  animate a path f
-00003240: 726f 6d20 7468 6520 7265 6164 7920 706f  rom the ready po
-00003250: 7365 2060 7172 6020 636f 6e66 6967 7572  se `qr` configur
-00003260: 6174 696f 6e20 746f 2074 6869 7320 7069  ation to this pi
-00003270: 636b 7570 2063 6f6e 6669 6775 7261 7469  ckup configurati
-00003280: 6f6e 0a0a 6060 6070 7974 686f 6e0a 7174  on..```python.qt
-00003290: 203d 2072 7462 2e6a 7472 616a 2872 6f62   = rtb.jtraj(rob
-000032a0: 6f74 2e71 722c 2071 5f70 6963 6b75 702c  ot.qr, q_pickup,
-000032b0: 2035 3029 0a72 6f62 6f74 2e70 6c6f 7428   50).robot.plot(
-000032c0: 7174 2e71 2c20 6261 636b 656e 643d 2770  qt.q, backend='p
-000032d0: 7970 6c6f 7427 2c20 6d6f 7669 653d 2770  yplot', movie='p
-000032e0: 616e 6461 312e 6769 6627 290a 6060 600a  anda1.gif').```.
-000032f0: 0a3c 7020 616c 6967 6e3d 2263 656e 7465  .<p align="cente
-00003300: 7222 3e0a 093c 696d 6720 7372 633d 222e  r">..<img src=".
-00003310: 2f64 6f63 732f 6669 6773 2f70 616e 6461  /docs/figs/panda
-00003320: 312e 6769 6622 3e0a 3c2f 703e 0a0a 7768  1.gif">.</p>..wh
-00003330: 6572 6520 7765 2068 6176 6520 7370 6563  ere we have spec
-00003340: 6966 6965 6420 7468 6520 6d61 7470 6c6f  ified the matplo
-00003350: 746c 6962 2060 7079 706c 6f74 6020 6261  tlib `pyplot` ba
-00003360: 636b 656e 642e 2042 6c75 6520 6172 726f  ckend. Blue arro
-00003370: 7773 2073 686f 7720 7468 6520 6a6f 696e  ws show the join
-00003380: 7420 6178 6573 2061 6e64 2074 6865 2063  t axes and the c
-00003390: 6f6c 6f75 7265 6420 6672 616d 6520 7368  oloured frame sh
-000033a0: 6f77 7320 7468 6520 656e 642d 6566 6665  ows the end-effe
-000033b0: 6374 6f72 2070 6f73 652e 0a0a 5765 2063  ctor pose...We c
-000033c0: 616e 2061 6c73 6f20 706c 6f74 2074 6865  an also plot the
-000033d0: 2074 7261 6a65 6374 6f72 7920 696e 2074   trajectory in t
-000033e0: 6865 2053 7769 6674 2073 696d 756c 6174  he Swift simulat
-000033f0: 6f72 2028 6120 6272 6f77 7365 722d 6261  or (a browser-ba
-00003400: 7365 6420 3364 2d73 696d 756c 6174 696f  sed 3d-simulatio
-00003410: 6e20 656e 7669 726f 6e6d 656e 7420 6275  n environment bu
-00003420: 696c 7420 746f 2077 6f72 6b20 7769 7468  ilt to work with
-00003430: 2074 6865 2054 6f6f 6c62 6f78 290a 0a60   the Toolbox)..`
-00003440: 6060 7079 7468 6f6e 0a72 6f62 6f74 2e70  ``python.robot.p
-00003450: 6c6f 7428 7174 2e71 290a 6060 600a 0a3c  lot(qt.q).```..<
-00003460: 7020 616c 6967 6e3d 2263 656e 7465 7222  p align="center"
-00003470: 3e0a 093c 696d 6720 7372 633d 222e 2f64  >..<img src="./d
-00003480: 6f63 732f 6669 6773 2f70 616e 6461 322e  ocs/figs/panda2.
-00003490: 6769 6622 3e0a 3c2f 703e 0a0a 5765 2063  gif">.</p>..We c
-000034a0: 616e 2061 6c73 6f20 6578 7065 7269 6d65  an also experime
-000034b0: 6e74 2077 6974 6820 7665 6c6f 6369 7479  nt with velocity
-000034c0: 2063 6f6e 7472 6f6c 6c65 7273 2069 6e20   controllers in 
-000034d0: 5377 6966 742e 2048 6572 6520 6973 2061  Swift. Here is a
-000034e0: 2072 6573 6f6c 7665 642d 7261 7465 206d   resolved-rate m
-000034f0: 6f74 696f 6e20 636f 6e74 726f 6c20 6578  otion control ex
-00003500: 616d 706c 650a 0a60 6060 7079 7468 6f6e  ample..```python
-00003510: 0a69 6d70 6f72 7420 7377 6966 740a 696d  .import swift.im
-00003520: 706f 7274 2072 6f62 6f74 6963 7374 6f6f  port roboticstoo
-00003530: 6c62 6f78 2061 7320 7270 0a69 6d70 6f72  lbox as rp.impor
-00003540: 7420 7370 6174 6961 6c6d 6174 6820 6173  t spatialmath as
-00003550: 2073 6d0a 696d 706f 7274 206e 756d 7079   sm.import numpy
-00003560: 2061 7320 6e70 0a0a 656e 7620 3d20 7377   as np..env = sw
-00003570: 6966 742e 5377 6966 7428 290a 656e 762e  ift.Swift().env.
-00003580: 6c61 756e 6368 2872 6561 6c74 696d 653d  launch(realtime=
-00003590: 5472 7565 290a 0a70 616e 6461 203d 2072  True)..panda = r
-000035a0: 702e 6d6f 6465 6c73 2e50 616e 6461 2829  p.models.Panda()
-000035b0: 0a70 616e 6461 2e71 203d 2070 616e 6461  .panda.q = panda
-000035c0: 2e71 720a 0a54 6570 203d 2070 616e 6461  .qr..Tep = panda
-000035d0: 2e66 6b69 6e65 2870 616e 6461 2e71 2920  .fkine(panda.q) 
-000035e0: 2a20 736d 2e53 4533 2e54 7261 6e73 2830  * sm.SE3.Trans(0
-000035f0: 2e32 2c20 302e 322c 2030 2e34 3529 0a0a  .2, 0.2, 0.45)..
-00003600: 6172 7269 7665 6420 3d20 4661 6c73 650a  arrived = False.
-00003610: 656e 762e 6164 6428 7061 6e64 6129 0a0a  env.add(panda)..
-00003620: 6474 203d 2030 2e30 350a 0a77 6869 6c65  dt = 0.05..while
-00003630: 206e 6f74 2061 7272 6976 6564 3a0a 0a20   not arrived:.. 
-00003640: 2020 2076 2c20 6172 7269 7665 6420 3d20     v, arrived = 
-00003650: 7270 2e70 5f73 6572 766f 2870 616e 6461  rp.p_servo(panda
-00003660: 2e66 6b69 6e65 2870 616e 6461 2e71 292c  .fkine(panda.q),
-00003670: 2054 6570 2c20 3129 0a20 2020 2070 616e   Tep, 1).    pan
-00003680: 6461 2e71 6420 3d20 6e70 2e6c 696e 616c  da.qd = np.linal
-00003690: 672e 7069 6e76 2870 616e 6461 2e6a 6163  g.pinv(panda.jac
-000036a0: 6f62 6528 7061 6e64 612e 7129 2920 4020  obe(panda.q)) @ 
-000036b0: 760a 2020 2020 656e 762e 7374 6570 2864  v.    env.step(d
-000036c0: 7429 0a0a 2320 556e 636f 6d6d 656e 7420  t)..# Uncomment 
-000036d0: 746f 2073 746f 7020 7468 6520 6272 6f77  to stop the brow
-000036e0: 7365 7220 7461 6220 6672 6f6d 2063 6c6f  ser tab from clo
-000036f0: 7369 6e67 0a23 2065 6e76 2e68 6f6c 6428  sing.# env.hold(
-00003700: 290a 6060 600a 0a3c 7020 616c 6967 6e3d  ).```..<p align=
-00003710: 2263 656e 7465 7222 3e0a 093c 696d 6720  "center">..<img 
-00003720: 7372 633d 222e 2f64 6f63 732f 6669 6773  src="./docs/figs
-00003730: 2f70 616e 6461 332e 6769 6622 3e0a 3c2f  /panda3.gif">.</
-00003740: 703e 0a0a 2323 2320 5275 6e20 736f 6d65  p>..### Run some
-00003750: 2065 7861 6d70 6c65 730a 0a54 6865 205b   examples..The [
-00003760: 606e 6f74 6562 6f6f 6b73 605d 2868 7474  `notebooks`](htt
-00003770: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00003780: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
-00003790: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
-000037a0: 6f6e 2f74 7265 652f 6d61 7374 6572 2f6e  on/tree/master/n
-000037b0: 6f74 6562 6f6f 6b73 2920 666f 6c64 6572  otebooks) folder
-000037c0: 2063 6f6e 7461 696e 7320 736f 6d65 2074   contains some t
-000037d0: 7574 6f72 6961 6c20 4a75 7079 7465 7220  utorial Jupyter 
-000037e0: 6e6f 7465 626f 6f6b 7320 7768 6963 6820  notebooks which 
-000037f0: 796f 7520 6361 6e20 6272 6f77 7365 206f  you can browse o
-00003800: 6e20 4769 7448 7562 2e20 4164 6469 7469  n GitHub. Additi
-00003810: 6f6e 616c 6c79 2c20 6861 7665 2061 206c  onally, have a l
-00003820: 6f6f 6b20 696e 2074 6865 205b 6065 7861  ook in the [`exa
-00003830: 6d70 6c65 7360 5d28 6874 7470 733a 2f2f  mples`](https://
-00003840: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
-00003850: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
-00003860: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 7472  oolbox-python/tr
-00003870: 6565 2f6d 6173 7465 722f 726f 626f 7469  ee/master/roboti
-00003880: 6373 746f 6f6c 626f 782f 6578 616d 706c  cstoolbox/exampl
-00003890: 6573 2920 666f 6c64 6572 2066 6f72 206d  es) folder for m
-000038a0: 616e 7920 7265 6164 7920 746f 2072 756e  any ready to run
-000038b0: 2065 7861 6d70 6c65 732e 0a0a 3c62 723e   examples...<br>
-000038c0: 0a0a 3c61 2069 643d 2735 273e 3c2f 613e  ..<a id='5'></a>
-000038d0: 0a0a 2323 2054 6f6f 6c62 6f78 2052 6573  ..## Toolbox Res
-000038e0: 6561 7263 6820 4170 706c 6963 6174 696f  earch Applicatio
-000038f0: 6e73 0a0a 5468 6520 746f 6f6c 626f 7820  ns..The toolbox 
-00003900: 6973 2069 6e63 7265 6469 626c 7920 7573  is incredibly us
-00003910: 6566 756c 2066 6f72 2064 6576 656c 6f70  eful for develop
-00003920: 696e 6720 616e 6420 7072 6f74 6f74 7970  ing and prototyp
-00003930: 696e 6720 616c 676f 7269 7468 6d73 2066  ing algorithms f
-00003940: 6f72 2072 6573 6561 7263 682c 2074 6861  or research, tha
-00003950: 6e6b 7320 746f 2074 6865 2065 7868 6175  nks to the exhau
-00003960: 7374 6976 6520 7365 7420 6f66 2077 656c  stive set of wel
-00003970: 6c20 646f 6375 6d65 6e74 6564 2061 6e64  l documented and
-00003980: 206d 6174 7572 6520 726f 626f 7469 6320   mature robotic 
-00003990: 6675 6e63 7469 6f6e 7320 6578 706f 7365  functions expose
-000039a0: 6420 7468 726f 7567 6820 636c 6561 6e20  d through clean 
-000039b0: 616e 6420 7061 696e 6c65 7373 2041 5049  and painless API
-000039c0: 732e 2041 6464 6974 696f 6e61 6c6c 792c  s. Additionally,
-000039d0: 2074 6865 2065 6173 6520 6174 2077 6869   the ease at whi
-000039e0: 6368 2061 2075 7365 7220 6361 6e20 7669  ch a user can vi
-000039f0: 7375 616c 697a 6520 7468 6569 7220 616c  sualize their al
-00003a00: 676f 7269 7468 6d20 7375 7070 6f72 7473  gorithm supports
-00003a10: 2061 2072 6170 6964 2070 726f 746f 7479   a rapid prototy
-00003a20: 7069 6e67 2070 6172 6164 6967 6d2e 0a0a  ping paradigm...
-00003a30: 2323 2320 5075 626c 6963 6174 696f 6e20  ### Publication 
-00003a40: 4c69 7374 0a0a 4a2e 2048 6176 696c 616e  List..J. Havilan
-00003a50: 642c 204e 2e20 53c3 bc6e 6465 7268 6175  d, N. S..nderhau
-00003a60: 6620 616e 6420 502e 2043 6f72 6b65 2c20  f and P. Corke, 
-00003a70: 222a 2a41 2048 6f6c 6973 7469 6320 4170  "**A Holistic Ap
-00003a80: 7072 6f61 6368 2074 6f20 5265 6163 7469  proach to Reacti
-00003a90: 7665 204d 6f62 696c 6520 4d61 6e69 7075  ve Mobile Manipu
-00003aa0: 6c61 7469 6f6e 2a2a 2c22 2069 6e20 5f49  lation**," in _I
-00003ab0: 4545 4520 526f 626f 7469 6373 2061 6e64  EEE Robotics and
-00003ac0: 2041 7574 6f6d 6174 696f 6e20 4c65 7474   Automation Lett
-00003ad0: 6572 735f 2c20 646f 693a 2031 302e 3131  ers_, doi: 10.11
-00003ae0: 3039 2f4c 5241 2e32 3032 322e 3331 3436  09/LRA.2022.3146
-00003af0: 3535 342e 2049 6e20 7468 6520 7669 6465  554. In the vide
-00003b00: 6f2c 2074 6865 2072 6f62 6f74 2069 7320  o, the robot is 
-00003b10: 636f 6e74 726f 6c6c 6564 2075 7369 6e67  controlled using
-00003b20: 2074 6865 2052 6f62 6f74 6963 7320 746f   the Robotics to
-00003b30: 6f6c 626f 7820 666f 7220 5079 7468 6f6e  olbox for Python
-00003b40: 2061 6e64 2066 6561 7475 7265 7320 6120   and features a 
-00003b50: 7265 636f 7264 696e 6720 6672 6f6d 2074  recording from t
-00003b60: 6865 205b 5377 6966 745d 2868 7474 7073  he [Swift](https
-00003b70: 3a2f 2f67 6974 6875 622e 636f 6d2f 6a68  ://github.com/jh
-00003b80: 6176 6c2f 7377 6966 7429 2053 696d 756c  avl/swift) Simul
-00003b90: 6174 6f72 2e0a 0a5b 5b41 7278 6976 2050  ator...[[Arxiv P
-00003ba0: 6170 6572 5d28 6874 7470 733a 2f2f 6172  aper](https://ar
-00003bb0: 7869 762e 6f72 672f 6162 732f 3231 3039  xiv.org/abs/2109
-00003bc0: 2e30 3437 3439 295d 205b 5b49 4545 4520  .04749)] [[IEEE 
-00003bd0: 5870 6c6f 7265 5d28 6874 7470 733a 2f2f  Xplore](https://
-00003be0: 6965 6565 7870 6c6f 7265 2e69 6565 652e  ieeexplore.ieee.
-00003bf0: 6f72 672f 6162 7374 7261 6374 2f64 6f63  org/abstract/doc
-00003c00: 756d 656e 742f 3936 3935 3239 3829 5d20  ument/9695298)] 
-00003c10: 5b5b 5072 6f6a 6563 7420 5765 6273 6974  [[Project Websit
-00003c20: 655d 2868 7474 7073 3a2f 2f6a 6861 766c  e](https://jhavl
-00003c30: 2e67 6974 6875 622e 696f 2f68 6f6c 6973  .github.io/holis
-00003c40: 7469 632f 295d 205b 5b56 6964 656f 5d28  tic/)] [[Video](
-00003c50: 6874 7470 733a 2f2f 796f 7574 752e 6265  https://youtu.be
-00003c60: 2f2d 4458 4251 5065 4c49 5634 295d 205b  /-DXBQPeLIV4)] [
-00003c70: 5b43 6f64 6520 4578 616d 706c 655d 2868  [Code Example](h
-00003c80: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00003c90: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-00003ca0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-00003cb0: 7468 6f6e 2f62 6c6f 622f 6d61 7374 6572  thon/blob/master
-00003cc0: 2f72 6f62 6f74 6963 7374 6f6f 6c62 6f78  /roboticstoolbox
-00003cd0: 2f65 7861 6d70 6c65 732f 686f 6c69 7374  /examples/holist
-00003ce0: 6963 5f6d 6d5f 6e6f 6e5f 686f 6c6f 6e6f  ic_mm_non_holono
-00003cf0: 6d69 632e 7079 295d 0a0a 3c70 3e0a 2020  mic.py)]..<p>.  
-00003d00: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
-00003d10: 2f79 6f75 7475 2e62 652f 2d44 5842 5150  /youtu.be/-DXBQP
-00003d20: 654c 4956 3422 3e0a 2020 2020 3c69 6d67  eLIV4">.    <img
-00003d30: 2073 7263 3d22 6874 7470 733a 2f2f 6769   src="https://gi
-00003d40: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
-00003d50: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
-00003d60: 6c62 6f78 2d70 7974 686f 6e2f 7261 772f  lbox-python/raw/
-00003d70: 6d61 7374 6572 2f64 6f63 732f 6669 6773  master/docs/figs
-00003d80: 2f68 6f6c 6973 7469 635f 796f 7574 7562  /holistic_youtub
-00003d90: 652e 706e 6722 2077 6964 7468 3d22 3536  e.png" width="56
-00003da0: 3022 3e0a 2020 3c2f 613e 0a3c 2f70 3e0a  0">.  </a>.</p>.
-00003db0: 0a4a 2e20 4861 7669 6c61 6e64 2061 6e64  .J. Haviland and
-00003dc0: 2050 2e20 436f 726b 652c 2022 2a2a 4e45   P. Corke, "**NE
-00003dd0: 4f3a 2041 204e 6f76 656c 2045 7870 6564  O: A Novel Exped
-00003de0: 6974 696f 7573 204f 7074 696d 6973 6174  itious Optimisat
-00003df0: 696f 6e20 416c 676f 7269 7468 6d20 666f  ion Algorithm fo
-00003e00: 7220 5265 6163 7469 7665 204d 6f74 696f  r Reactive Motio
-00003e10: 6e20 436f 6e74 726f 6c20 6f66 204d 616e  n Control of Man
-00003e20: 6970 756c 6174 6f72 732a 2a2c 2220 696e  ipulators**," in
-00003e30: 205f 4945 4545 2052 6f62 6f74 6963 7320   _IEEE Robotics 
-00003e40: 616e 6420 4175 746f 6d61 7469 6f6e 204c  and Automation L
-00003e50: 6574 7465 7273 5f2c 2064 6f69 3a20 3130  etters_, doi: 10
-00003e60: 2e31 3130 392f 4c52 412e 3230 3231 2e33  .1109/LRA.2021.3
-00003e70: 3035 3630 3630 2e20 496e 2074 6865 2076  056060. In the v
-00003e80: 6964 656f 2c20 7468 6520 726f 626f 7420  ideo, the robot 
-00003e90: 6973 2063 6f6e 7472 6f6c 6c65 6420 7573  is controlled us
-00003ea0: 696e 6720 7468 6520 526f 626f 7469 6373  ing the Robotics
-00003eb0: 2074 6f6f 6c62 6f78 2066 6f72 2050 7974   toolbox for Pyt
-00003ec0: 686f 6e20 616e 6420 6665 6174 7572 6573  hon and features
-00003ed0: 2061 2072 6563 6f72 6469 6e67 2066 726f   a recording fro
-00003ee0: 6d20 7468 6520 5b53 7769 6674 5d28 6874  m the [Swift](ht
-00003ef0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00003f00: 2f6a 6861 766c 2f73 7769 6674 2920 5369  /jhavl/swift) Si
-00003f10: 6d75 6c61 746f 722e 0a0a 5b5b 4172 7869  mulator...[[Arxi
-00003f20: 7620 5061 7065 725d 2868 7474 7073 3a2f  v Paper](https:/
-00003f30: 2f61 7278 6976 2e6f 7267 2f61 6273 2f32  /arxiv.org/abs/2
-00003f40: 3031 302e 3038 3638 3629 5d20 5b5b 4945  010.08686)] [[IE
-00003f50: 4545 2058 706c 6f72 655d 2868 7474 7073  EE Xplore](https
-00003f60: 3a2f 2f69 6565 6578 706c 6f72 652e 6965  ://ieeexplore.ie
-00003f70: 6565 2e6f 7267 2f64 6f63 756d 656e 742f  ee.org/document/
-00003f80: 3933 3433 3731 3829 5d20 5b5b 5072 6f6a  9343718)] [[Proj
-00003f90: 6563 7420 5765 6273 6974 655d 2868 7474  ect Website](htt
-00003fa0: 7073 3a2f 2f6a 6861 766c 2e67 6974 6875  ps://jhavl.githu
-00003fb0: 622e 696f 2f6e 656f 2f29 5d20 5b5b 5669  b.io/neo/)] [[Vi
-00003fc0: 6465 6f5d 2868 7474 7073 3a2f 2f79 6f75  deo](https://you
-00003fd0: 7475 2e62 652f 6a53 4c50 4a42 7238 5154  tu.be/jSLPJBr8QT
-00003fe0: 5929 5d20 5b5b 436f 6465 2045 7861 6d70  Y)] [[Code Examp
-00003ff0: 6c65 5d28 6874 7470 733a 2f2f 6769 7468  le](https://gith
-00004000: 7562 2e63 6f6d 2f70 6574 6572 636f 726b  ub.com/petercork
-00004010: 652f 726f 626f 7469 6373 2d74 6f6f 6c62  e/robotics-toolb
-00004020: 6f78 2d70 7974 686f 6e2f 626c 6f62 2f6d  ox-python/blob/m
-00004030: 6173 7465 722f 726f 626f 7469 6373 746f  aster/roboticsto
-00004040: 6f6c 626f 782f 6578 616d 706c 6573 2f6e  olbox/examples/n
-00004050: 656f 2e70 7929 5d0a 0a3c 703e 0a20 203c  eo.py)]..<p>.  <
-00004060: 6120 6872 6566 3d22 6874 7470 733a 2f2f  a href="https://
-00004070: 796f 7574 752e 6265 2f6a 534c 504a 4272  youtu.be/jSLPJBr
-00004080: 3851 5459 223e 0a20 2020 203c 696d 6720  8QTY">.    <img 
-00004090: 7372 633d 2268 7474 7073 3a2f 2f67 6974  src="https://git
-000040a0: 6875 622e 636f 6d2f 7065 7465 7263 6f72  hub.com/petercor
-000040b0: 6b65 2f72 6f62 6f74 6963 732d 746f 6f6c  ke/robotics-tool
-000040c0: 626f 782d 7079 7468 6f6e 2f72 6177 2f6d  box-python/raw/m
-000040d0: 6173 7465 722f 646f 6373 2f66 6967 732f  aster/docs/figs/
-000040e0: 6e65 6f5f 796f 7574 7562 652e 706e 6722  neo_youtube.png"
-000040f0: 2077 6964 7468 3d22 3536 3022 3e0a 2020   width="560">.  
-00004100: 3c2f 613e 0a3c 2f70 3e0a 0a2a 2a41 2050  </a>.</p>..**A P
-00004110: 7572 656c 792d 5265 6163 7469 7665 204d  urely-Reactive M
-00004120: 616e 6970 756c 6162 696c 6974 792d 4d61  anipulability-Ma
-00004130: 7869 6d69 7369 6e67 204d 6f74 696f 6e20  ximising Motion 
-00004140: 436f 6e74 726f 6c6c 6572 2a2a 2c20 4a2e  Controller**, J.
-00004150: 2048 6176 696c 616e 6420 616e 6420 502e   Haviland and P.
-00004160: 2043 6f72 6b65 2e20 496e 2074 6865 2076   Corke. In the v
-00004170: 6964 656f 2c20 7468 6520 726f 626f 7420  ideo, the robot 
-00004180: 6973 2063 6f6e 7472 6f6c 6c65 6420 7573  is controlled us
-00004190: 696e 6720 7468 6520 526f 626f 7469 6373  ing the Robotics
-000041a0: 2074 6f6f 6c62 6f78 2066 6f72 2050 7974   toolbox for Pyt
-000041b0: 686f 6e2e 0a0a 5b5b 5061 7065 725d 2868  hon...[[Paper](h
-000041c0: 7474 7073 3a2f 2f61 7278 6976 2e6f 7267  ttps://arxiv.org
-000041d0: 2f61 6273 2f32 3030 322e 3131 3930 3129  /abs/2002.11901)
-000041e0: 5d20 5b5b 5072 6f6a 6563 7420 5765 6273  ] [[Project Webs
-000041f0: 6974 655d 2868 7474 7073 3a2f 2f6a 6861  ite](https://jha
-00004200: 766c 2e67 6974 6875 622e 696f 2f6d 6d63  vl.github.io/mmc
-00004210: 2f29 5d20 5b5b 5669 6465 6f5d 2868 7474  /)] [[Video](htt
-00004220: 7073 3a2f 2f79 6f75 7475 2e62 652f 5675  ps://youtu.be/Vu
-00004230: 5f72 6350 6c61 4144 4929 5d20 5b5b 436f  _rcPlaADI)] [[Co
-00004240: 6465 2045 7861 6d70 6c65 5d28 6874 7470  de Example](http
-00004250: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f70  s://github.com/p
-00004260: 6574 6572 636f 726b 652f 726f 626f 7469  etercorke/roboti
-00004270: 6373 2d74 6f6f 6c62 6f78 2d70 7974 686f  cs-toolbox-pytho
-00004280: 6e2f 626c 6f62 2f6d 6173 7465 722f 726f  n/blob/master/ro
-00004290: 626f 7469 6373 746f 6f6c 626f 782f 6578  boticstoolbox/ex
-000042a0: 616d 706c 6573 2f6d 6d63 2e70 7929 5d0a  amples/mmc.py)].
-000042b0: 0a3c 703e 0a20 203c 6120 6872 6566 3d22  .<p>.  <a href="
-000042c0: 6874 7470 733a 2f2f 796f 7574 752e 6265  https://youtu.be
-000042d0: 2f56 755f 7263 506c 6141 4449 223e 0a20  /Vu_rcPlaADI">. 
-000042e0: 2020 203c 696d 6720 7372 633d 2268 7474     <img src="htt
-000042f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00004300: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
-00004310: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
-00004320: 6f6e 2f72 6177 2f6d 6173 7465 722f 646f  on/raw/master/do
-00004330: 6373 2f66 6967 732f 6d6d 635f 796f 7574  cs/figs/mmc_yout
-00004340: 7562 652e 706e 6722 2077 6964 7468 3d22  ube.png" width="
-00004350: 3536 3022 3e0a 2020 3c2f 613e 0a3c 2f70  560">.  </a>.</p
-00004360: 3e0a 0a3c 6272 3e0a 0a3c 6272 3e0a 0a3c  >..<br>..<br>..<
-00004370: 6120 6964 3d27 3627 3e3c 2f61 3e0a 0a23  a id='6'></a>..#
-00004380: 2320 546f 6f6c 626f 7820 4943 5241 2050  # Toolbox ICRA P
-00004390: 6170 6572 2061 6e64 2043 6974 6174 696f  aper and Citatio
-000043a0: 6e20 496e 666f 0a0a 4368 6563 6b20 6f75  n Info..Check ou
-000043b0: 7420 6f75 7220 4943 5241 2032 3032 3120  t our ICRA 2021 
-000043c0: 7061 7065 7220 6f6e 205b 4945 4545 2058  paper on [IEEE X
-000043d0: 706c 6f72 655d 2868 7474 7073 3a2f 2f69  plore](https://i
-000043e0: 6565 6578 706c 6f72 652e 6965 6565 2e6f  eeexplore.ieee.o
-000043f0: 7267 2f64 6f63 756d 656e 742f 3935 3631  rg/document/9561
-00004400: 3336 3629 206f 7220 6765 7420 7468 6520  366) or get the 
-00004410: 5044 4620 6672 6f6d 205b 5065 7465 7227  PDF from [Peter'
-00004420: 7320 7765 6273 6974 655d 2868 7474 7073  s website](https
-00004430: 3a2f 2f62 6974 2e6c 792f 3343 6863 794e  ://bit.ly/3ChcyN
-00004440: 7029 2e0a 0a49 6620 7468 6520 746f 6f6c  p)...If the tool
-00004450: 626f 7820 6865 6c70 6564 2079 6f75 2069  box helped you i
-00004460: 6e20 796f 7572 2072 6573 6561 7263 682c  n your research,
-00004470: 2070 6c65 6173 6520 6369 7465 0a0a 6060   please cite..``
-00004480: 600a 4069 6e70 726f 6365 6564 696e 6773  `.@inproceedings
-00004490: 7b72 7462 2c0a 2020 7469 746c 653d 7b4e  {rtb,.  title={N
-000044a0: 6f74 2079 6f75 7220 6772 616e 646d 6f74  ot your grandmot
-000044b0: 6865 72e2 8099 7320 746f 6f6c 626f 782d  her...s toolbox-
-000044c0: 2d74 6865 2052 6f62 6f74 6963 7320 546f  -the Robotics To
-000044d0: 6f6c 626f 7820 7265 696e 7665 6e74 6564  olbox reinvented
-000044e0: 2066 6f72 2050 7974 686f 6e7d 2c0a 2020   for Python},.  
-000044f0: 6175 7468 6f72 3d7b 436f 726b 652c 2050  author={Corke, P
-00004500: 6574 6572 2061 6e64 2048 6176 696c 616e  eter and Havilan
-00004510: 642c 204a 6573 7365 7d2c 0a20 2062 6f6f  d, Jesse},.  boo
-00004520: 6b74 6974 6c65 3d7b 3230 3231 2049 4545  ktitle={2021 IEE
-00004530: 4520 496e 7465 726e 6174 696f 6e61 6c20  E International 
-00004540: 436f 6e66 6572 656e 6365 206f 6e20 526f  Conference on Ro
-00004550: 626f 7469 6373 2061 6e64 2041 7574 6f6d  botics and Autom
-00004560: 6174 696f 6e20 2849 4352 4129 7d2c 0a20  ation (ICRA)},. 
-00004570: 2070 6167 6573 3d7b 3131 3335 372d 2d31   pages={11357--1
-00004580: 3133 3633 7d2c 0a20 2079 6561 723d 7b32  1363},.  year={2
-00004590: 3032 317d 2c0a 2020 6f72 6761 6e69 7a61  021},.  organiza
-000045a0: 7469 6f6e 3d7b 4945 4545 7d0a 7d0a 6060  tion={IEEE}.}.``
-000045b0: 600a 0a3c 6272 3e0a 0a3c 6120 6964 3d27  `..<br>..<a id='
-000045c0: 3727 3e3c 2f61 3e0a 0a23 2320 5573 696e  7'></a>..## Usin
-000045d0: 6720 7468 6520 546f 6f6c 626f 7820 696e  g the Toolbox in
-000045e0: 2079 6f75 7220 4f70 656e 2053 6f75 7263   your Open Sourc
-000045f0: 6520 436f 6465 3f0a 0a49 6620 796f 7520  e Code?..If you 
-00004600: 6172 6520 7573 696e 6720 7468 6520 546f  are using the To
-00004610: 6f6c 626f 7820 696e 2079 6f75 7220 6f70  olbox in your op
-00004620: 656e 2073 6f75 7263 6520 636f 6465 2c20  en source code, 
-00004630: 6665 656c 2066 7265 6520 746f 2061 6464  feel free to add
-00004640: 206f 7572 2062 6164 6765 2074 6f20 796f   our badge to yo
-00004650: 7572 2072 6561 646d 6521 0a0a 466f 7220  ur readme!..For 
-00004660: 7468 6520 706f 7765 7265 6420 6279 2072  the powered by r
-00004670: 6f62 6f74 6963 7320 746f 6f6c 626f 7820  obotics toolbox 
-00004680: 6261 6467 650a 0a5b 215b 506f 7765 7265  badge..[![Powere
-00004690: 6420 6279 2074 6865 2052 6f62 6f74 6963  d by the Robotic
-000046a0: 7320 546f 6f6c 626f 785d 2868 7474 7073  s Toolbox](https
-000046b0: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
-000046c0: 7263 6f6e 7465 6e74 2e63 6f6d 2f70 6574  rcontent.com/pet
-000046d0: 6572 636f 726b 652f 726f 626f 7469 6373  ercorke/robotics
-000046e0: 2d74 6f6f 6c62 6f78 2d70 7974 686f 6e2f  -toolbox-python/
-000046f0: 6d61 7374 6572 2f2e 6769 7468 7562 2f73  master/.github/s
-00004700: 7667 2f72 7462 5f70 6f77 6572 6564 2e6d  vg/rtb_powered.m
-00004710: 696e 2e73 7667 295d 2868 7474 7073 3a2f  in.svg)](https:/
-00004720: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-00004730: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-00004740: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
-00004750: 0a63 6f70 7920 7468 6520 666f 6c6c 6f77  .copy the follow
-00004760: 696e 670a 0a60 6060 0a5b 215b 506f 7765  ing..```.[![Powe
-00004770: 7265 6420 6279 2074 6865 2052 6f62 6f74  red by the Robot
-00004780: 6963 7320 546f 6f6c 626f 785d 2868 7474  ics Toolbox](htt
-00004790: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
-000047a0: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f70  sercontent.com/p
-000047b0: 6574 6572 636f 726b 652f 726f 626f 7469  etercorke/roboti
-000047c0: 6373 2d74 6f6f 6c62 6f78 2d70 7974 686f  cs-toolbox-pytho
-000047d0: 6e2f 6d61 7374 6572 2f2e 6769 7468 7562  n/master/.github
-000047e0: 2f73 7667 2f72 7462 5f70 6f77 6572 6564  /svg/rtb_powered
-000047f0: 2e6d 696e 2e73 7667 295d 2868 7474 7073  .min.svg)](https
-00004800: 3a2f 2f67 6974 6875 622e 636f 6d2f 7065  ://github.com/pe
-00004810: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
-00004820: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
-00004830: 290a 6060 600a 0a46 6f72 2074 6865 2070  ).```..For the p
-00004840: 6f77 6572 6564 2062 7920 7079 7468 6f6e  owered by python
-00004850: 2072 6f62 6f74 6963 7320 6261 6467 650a   robotics badge.
-00004860: 0a5b 215b 506f 7765 7265 6420 6279 2050  .[![Powered by P
-00004870: 7974 686f 6e20 526f 626f 7469 6373 5d28  ython Robotics](
-00004880: 6874 7470 733a 2f2f 7261 772e 6769 7468  https://raw.gith
-00004890: 7562 7573 6572 636f 6e74 656e 742e 636f  ubusercontent.co
-000048a0: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
-000048b0: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
-000048c0: 7468 6f6e 2f6d 6173 7465 722f 2e67 6974  thon/master/.git
-000048d0: 6875 622f 7376 672f 7072 5f70 6f77 6572  hub/svg/pr_power
-000048e0: 6564 2e6d 696e 2e73 7667 295d 2868 7474  ed.min.svg)](htt
-000048f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00004900: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
-00004910: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
-00004920: 6f6e 290a 0a63 6f70 7920 7468 6520 666f  on)..copy the fo
-00004930: 6c6c 6f77 696e 670a 0a60 6060 0a5b 215b  llowing..```.[![
-00004940: 506f 7765 7265 6420 6279 2050 7974 686f  Powered by Pytho
-00004950: 6e20 526f 626f 7469 6373 5d28 6874 7470  n Robotics](http
-00004960: 733a 2f2f 7261 772e 6769 7468 7562 7573  s://raw.githubus
-00004970: 6572 636f 6e74 656e 742e 636f 6d2f 7065  ercontent.com/pe
-00004980: 7465 7263 6f72 6b65 2f72 6f62 6f74 6963  tercorke/robotic
-00004990: 732d 746f 6f6c 626f 782d 7079 7468 6f6e  s-toolbox-python
-000049a0: 2f6d 6173 7465 722f 2e67 6974 6875 622f  /master/.github/
-000049b0: 7376 672f 7072 5f70 6f77 6572 6564 2e6d  svg/pr_powered.m
-000049c0: 696e 2e73 7667 295d 2868 7474 7073 3a2f  in.svg)](https:/
-000049d0: 2f67 6974 6875 622e 636f 6d2f 7065 7465  /github.com/pete
-000049e0: 7263 6f72 6b65 2f72 6f62 6f74 6963 732d  rcorke/robotics-
-000049f0: 746f 6f6c 626f 782d 7079 7468 6f6e 290a  toolbox-python).
-00004a00: 6060 600a 0a3c 6272 3e0a 0a3c 6120 6964  ```..<br>..<a id
-00004a10: 3d27 3827 3e3c 2f61 3e0a 0a23 2320 436f  ='8'></a>..## Co
-00004a20: 6d6d 6f6e 2049 7373 7565 7320 616e 6420  mmon Issues and 
-00004a30: 536f 6c75 7469 6f6e 730a 0a53 6565 2074  Solutions..See t
-00004a40: 6865 2063 6f6d 6d6f 6e20 6973 7375 6573  he common issues
-00004a50: 2077 6974 6820 6669 7865 7320 5b68 6572   with fixes [her
-00004a60: 655d 2868 7474 7073 3a2f 2f67 6974 6875  e](https://githu
-00004a70: 622e 636f 6d2f 7065 7465 7263 6f72 6b65  b.com/petercorke
-00004a80: 2f72 6f62 6f74 6963 732d 746f 6f6c 626f  /robotics-toolbo
-00004a90: 782d 7079 7468 6f6e 2f77 696b 692f 436f  x-python/wiki/Co
-00004aa0: 6d6d 6f6e 2d49 7373 7565 7329 2e0a       mmon-Issues)..
+00002860: 2020 2020 2020 2020 e294 820a 09e2 9494          ........
+00002870: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002880: 94b4 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002890: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000028a0: e294 80e2 9480 e294 80e2 9480 e294 b4e2  ................
+000028b0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000028c0: 80e2 9480 e294 b4e2 9480 e294 80e2 9480  ................
+000028d0: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+000028e0: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+000028f0: b4e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002900: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002910: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002920: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002930: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002940: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002950: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002960: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002970: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002980: 80e2 9498 0a0a 09e2 948c e294 80e2 9480  ................
+00002990: e294 80e2 9480 e294 80e2 94ac e294 80e2  ................
+000029a0: 9480 e294 80e2 9480 e294 80e2 94ac e294  ................
+000029b0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000029c0: e294 80e2 9480 e294 ace2 9480 e294 80e2  ................
+000029d0: 9480 e294 80e2 9480 e294 ace2 9480 e294  ................
+000029e0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+000029f0: e294 ace2 9480 e294 80e2 9480 e294 80e2  ................
+00002a00: 9480 e294 ace2 9480 e294 80e2 9480 e294  ................
+00002a10: 80e2 9480 e294 80e2 9480 e294 ace2 9480  ................
+00002a20: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002a30: 9490 0a09 e294 826e 616d 6520 e294 8220  .......name ... 
+00002a40: 7130 2020 e294 8220 7131 2020 2020 20e2  q0  ... q1     .
+00002a50: 9482 2071 3220 20e2 9482 2071 3320 2020  .. q2  ... q3   
+00002a60: 20e2 9482 2071 3420 20e2 9482 2071 3520   ... q4  ... q5 
+00002a70: 2020 20e2 9482 2071 3620 2020 e294 820a     ... q6   ....
+00002a80: 09e2 949c e294 80e2 9480 e294 80e2 9480  ................
+00002a90: e294 80e2 94bc e294 80e2 9480 e294 80e2  ................
+00002aa0: 9480 e294 80e2 94bc e294 80e2 9480 e294  ................
+00002ab0: 80e2 9480 e294 80e2 9480 e294 80e2 9480  ................
+00002ac0: e294 bce2 9480 e294 80e2 9480 e294 80e2  ................
+00002ad0: 9480 e294 bce2 9480 e294 80e2 9480 e294  ................
+00002ae0: 80e2 9480 e294 80e2 9480 e294 bce2 9480  ................
+00002af0: e294 80e2 9480 e294 80e2 9480 e294 bce2  ................
+00002b00: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002b10: 80e2 9480 e294 bce2 9480 e294 80e2 9480  ................
+00002b20: e294 80e2 9480 e294 80e2 94a4 0a09 e294  ................
+00002b30: 8220 2071 7220 e294 8220 2030 c2b0 20e2  .  qr ...  0.. .
+00002b40: 9482 202d 3137 2e32 c2b0 20e2 9482 2020  .. -17.2.. ...  
+00002b50: 30c2 b020 e294 8220 2d31 3236 c2b0 20e2  0.. ... -126.. .
+00002b60: 9482 2020 30c2 b020 e294 8220 2031 3135  ..  0.. ...  115
+00002b70: c2b0 20e2 9482 2020 3435 c2b0 20e2 9482  .. ...  45.. ...
+00002b80: 0a09 e294 8220 2071 7a20 e294 8220 2030  .....  qz ...  0
+00002b90: c2b0 20e2 9482 2020 30c2 b020 2020 20e2  .. ...  0..    .
+00002ba0: 9482 2020 30c2 b020 e294 8220 2030 c2b0  ..  0.. ...  0..
+00002bb0: 2020 20e2 9482 2020 30c2 b020 e294 8220     ...  0.. ... 
+00002bc0: 2030 c2b0 2020 20e2 9482 2020 30c2 b020   0..   ...  0.. 
+00002bd0: 20e2 9482 0a09 e294 94e2 9480 e294 80e2   ...............
+00002be0: 9480 e294 80e2 9480 e294 b4e2 9480 e294  ................
+00002bf0: 80e2 9480 e294 80e2 9480 e294 b4e2 9480  ................
+00002c00: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002c10: 9480 e294 80e2 94b4 e294 80e2 9480 e294  ................
+00002c20: 80e2 9480 e294 80e2 94b4 e294 80e2 9480  ................
+00002c30: e294 80e2 9480 e294 80e2 9480 e294 80e2  ................
+00002c40: 94b4 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002c50: 80e2 94b4 e294 80e2 9480 e294 80e2 9480  ................
+00002c60: e294 80e2 9480 e294 80e2 94b4 e294 80e2  ................
+00002c70: 9480 e294 80e2 9480 e294 80e2 9480 e294  ................
+00002c80: 980a 6060 600a 0a54 6865 2073 796d 626f  ..```..The symbo
+00002c90: 6c20 6040 6020 696e 6469 6361 7465 7320  l `@` indicates 
+00002ca0: 7468 6520 6c69 6e6b 2061 7320 616e 2065  the link as an e
+00002cb0: 6e64 2d65 6666 6563 746f 722c 2061 206c  nd-effector, a l
+00002cc0: 6561 6620 6e6f 6465 2069 6e20 7468 6520  eaf node in the 
+00002cd0: 7269 6769 642d 626f 6479 0a74 7265 6520  rigid-body.tree 
+00002ce0: 2850 7974 686f 6e20 7072 6f6d 7074 7320  (Python prompts 
+00002cf0: 6172 6520 6e6f 7420 7368 6f77 6e20 746f  are not shown to
+00002d00: 206d 616b 6520 6974 2065 6173 7920 746f   make it easy to
+00002d10: 2063 6f70 792b 7061 7374 6520 7468 6520   copy+paste the 
+00002d20: 636f 6465 2c20 636f 6e73 6f6c 6520 6f75  code, console ou
+00002d30: 7470 7574 2069 7320 696e 6465 6e74 6564  tput is indented
+00002d40: 292e 0a57 6520 7769 6c6c 2063 6f6d 7075  )..We will compu
+00002d50: 7465 2074 6865 2066 6f72 7761 7264 206b  te the forward k
+00002d60: 696e 656d 6174 6963 7320 6e65 7874 0a0a  inematics next..
+00002d70: 6060 600a 5465 203d 2072 6f62 6f74 2e66  ```.Te = robot.f
+00002d80: 6b69 6e65 2872 6f62 6f74 2e71 7229 2020  kine(robot.qr)  
+00002d90: 2320 666f 7277 6172 6420 6b69 6e65 6d61  # forward kinema
+00002da0: 7469 6373 0a70 7269 6e74 2854 6529 0a0a  tics.print(Te)..
+00002db0: 0930 2e39 3935 2020 2020 2030 2020 2020  .0.995     0    
+00002dc0: 2020 2020 2030 2e30 3939 3833 2020 2030       0.09983   0
+00002dd0: 2e34 3834 0a09 3020 2020 2020 2020 202d  .484..0        -
+00002de0: 3120 2020 2020 2020 2020 3020 2020 2020  1         0     
+00002df0: 2020 2020 300a 0930 2e30 3939 3833 2020      0..0.09983  
+00002e00: 2030 2020 2020 2020 2020 2d30 2e39 3935   0        -0.995
+00002e10: 2020 2020 2030 2e34 3132 360a 0930 2020       0.4126..0  
+00002e20: 2020 2020 2020 2030 2020 2020 2020 2020         0        
+00002e30: 2030 2020 2020 2020 2020 2031 0a60 6060   0         1.```
+00002e40: 0a0a 5765 2063 616e 2073 6f6c 7665 2069  ..We can solve i
+00002e50: 6e76 6572 7365 206b 696e 656d 6174 6963  nverse kinematic
+00002e60: 7320 7665 7279 2065 6173 696c 792e 2057  s very easily. W
+00002e70: 6520 6669 7273 7420 6368 6f6f 7365 2061  e first choose a
+00002e80: 6e20 5345 2833 2920 706f 7365 0a64 6566  n SE(3) pose.def
+00002e90: 696e 6564 2069 6e20 7465 726d 7320 6f66  ined in terms of
+00002ea0: 2070 6f73 6974 696f 6e20 616e 6420 6f72   position and or
+00002eb0: 6965 6e74 6174 696f 6e20 2865 6e64 2d65  ientation (end-e
+00002ec0: 6666 6563 746f 7220 7a2d 6178 6973 2064  ffector z-axis d
+00002ed0: 6f77 6e20 2841 3d2d 5a29 2061 6e64 2066  own (A=-Z) and f
+00002ee0: 696e 6765 720a 6f72 6965 6e74 6174 696f  inger.orientatio
+00002ef0: 6e20 7061 7261 6c6c 656c 2074 6f20 792d  n parallel to y-
+00002f00: 6178 6973 2028 4f3d 2b59 2929 2e0a 0a60  axis (O=+Y))...`
+00002f10: 6060 7079 7468 6f6e 0a66 726f 6d20 7370  ``python.from sp
+00002f20: 6174 6961 6c6d 6174 6820 696d 706f 7274  atialmath import
+00002f30: 2053 4533 0a0a 5465 7020 3d20 5345 332e   SE3..Tep = SE3.
+00002f40: 5472 616e 7328 302e 362c 202d 302e 332c  Trans(0.6, -0.3,
+00002f50: 2030 2e31 2920 2a20 5345 332e 4f41 285b   0.1) * SE3.OA([
+00002f60: 302c 2031 2c20 305d 2c20 5b30 2c20 302c  0, 1, 0], [0, 0,
+00002f70: 202d 315d 290a 736f 6c20 3d20 726f 626f   -1]).sol = robo
+00002f80: 742e 696b 5f6c 6d5f 6368 616e 2854 6570  t.ik_lm_chan(Tep
+00002f90: 2920 2020 2020 2020 2020 2320 736f 6c76  )         # solv
+00002fa0: 6520 494b 0a70 7269 6e74 2873 6f6c 290a  e IK.print(sol).
+00002fb0: 0a09 2861 7272 6179 285b 2030 2e32 3035  ..(array([ 0.205
+00002fc0: 3932 3831 352c 2020 302e 3836 3630 3934  92815,  0.866094
+00002fd0: 3831 2c20 2d30 2e37 3934 3733 3230 362c  81, -0.79473206,
+00002fe0: 202d 312e 3638 3235 3437 3934 2c20 2030   -1.68254794,  0
+00002ff0: 2e37 3438 3732 3931 352c 0a09 0909 322e  .74872915,....2.
+00003000: 3231 3736 3437 3436 2c20 2d30 2e31 3032  21764746, -0.102
+00003010: 3535 3630 365d 292c 2031 2c20 3131 342c  55606]), 1, 114,
+00003020: 2037 2c20 322e 3839 3031 3634 3035 3732   7, 2.8901640572
+00003030: 3330 3232 3865 2d30 3729 0a0a 715f 7069  30228e-07)..q_pi
+00003040: 636b 7570 203d 2073 6f6c 5b30 5d0a 7072  ckup = sol[0].pr
+00003050: 696e 7428 726f 626f 742e 666b 696e 6528  int(robot.fkine(
+00003060: 715f 7069 636b 7570 2929 2020 2020 2320  q_pickup))    # 
+00003070: 464b 2073 686f 7773 2074 6861 7420 6465  FK shows that de
+00003080: 7369 7265 6420 656e 642d 6566 6665 6374  sired end-effect
+00003090: 6f72 2070 6f73 6520 7761 7320 6163 6869  or pose was achi
+000030a0: 6576 6564 0a0a 0920 3120 2020 2020 2020  eved... 1       
+000030b0: 2020 2d38 2e39 3133 652d 3035 2020 2d30    -8.913e-05  -0
+000030c0: 2e30 3030 3333 3334 2020 302e 3539 3936  .0003334  0.5996
+000030d0: 0a09 2d38 2e39 3239 652d 3035 202d 3120  ..-8.929e-05 -1 
+000030e0: 2020 2020 2020 2020 202d 302e 3030 3034           -0.0004
+000030f0: 3931 3220 2d30 2e32 3939 380a 092d 302e  912 -0.2998..-0.
+00003100: 3030 3033 3333 3420 2030 2e30 3030 3439  0003334  0.00049
+00003110: 3132 2020 2d31 2020 2020 2020 2020 2020  12  -1          
+00003120: 302e 3130 3031 0a09 2030 2020 2020 2020  0.1001.. 0      
+00003130: 2020 2020 3020 2020 2020 2020 2020 2020      0           
+00003140: 3020 2020 2020 2020 2020 2031 0a60 6060  0          1.```
+00003150: 0a0a 5765 2063 616e 2061 6e69 6d61 7465  ..We can animate
+00003160: 2061 2070 6174 6820 6672 6f6d 2074 6865   a path from the
+00003170: 2072 6561 6479 2070 6f73 6520 6071 7260   ready pose `qr`
+00003180: 2063 6f6e 6669 6775 7261 7469 6f6e 2074   configuration t
+00003190: 6f20 7468 6973 2070 6963 6b75 7020 636f  o this pickup co
+000031a0: 6e66 6967 7572 6174 696f 6e0a 0a60 6060  nfiguration..```
+000031b0: 7079 7468 6f6e 0a71 7420 3d20 7274 622e  python.qt = rtb.
+000031c0: 6a74 7261 6a28 726f 626f 742e 7172 2c20  jtraj(robot.qr, 
+000031d0: 715f 7069 636b 7570 2c20 3530 290a 726f  q_pickup, 50).ro
+000031e0: 626f 742e 706c 6f74 2871 742e 712c 2062  bot.plot(qt.q, b
+000031f0: 6163 6b65 6e64 3d27 7079 706c 6f74 272c  ackend='pyplot',
+00003200: 206d 6f76 6965 3d27 7061 6e64 6131 2e67   movie='panda1.g
+00003210: 6966 2729 0a60 6060 0a0a 3c70 2061 6c69  if').```..<p ali
+00003220: 676e 3d22 6365 6e74 6572 223e 0a09 3c69  gn="center">..<i
+00003230: 6d67 2073 7263 3d22 2e2f 646f 6373 2f66  mg src="./docs/f
+00003240: 6967 732f 7061 6e64 6131 2e67 6966 223e  igs/panda1.gif">
+00003250: 0a3c 2f70 3e0a 0a77 6865 7265 2077 6520  .</p>..where we 
+00003260: 6861 7665 2073 7065 6369 6669 6564 2074  have specified t
+00003270: 6865 206d 6174 706c 6f74 6c69 6220 6070  he matplotlib `p
+00003280: 7970 6c6f 7460 2062 6163 6b65 6e64 2e20  yplot` backend. 
+00003290: 426c 7565 2061 7272 6f77 7320 7368 6f77  Blue arrows show
+000032a0: 2074 6865 206a 6f69 6e74 2061 7865 7320   the joint axes 
+000032b0: 616e 6420 7468 6520 636f 6c6f 7572 6564  and the coloured
+000032c0: 2066 7261 6d65 2073 686f 7773 2074 6865   frame shows the
+000032d0: 2065 6e64 2d65 6666 6563 746f 7220 706f   end-effector po
+000032e0: 7365 2e0a 0a57 6520 6361 6e20 616c 736f  se...We can also
+000032f0: 2070 6c6f 7420 7468 6520 7472 616a 6563   plot the trajec
+00003300: 746f 7279 2069 6e20 7468 6520 5377 6966  tory in the Swif
+00003310: 7420 7369 6d75 6c61 746f 7220 2861 2062  t simulator (a b
+00003320: 726f 7773 6572 2d62 6173 6564 2033 642d  rowser-based 3d-
+00003330: 7369 6d75 6c61 7469 6f6e 2065 6e76 6972  simulation envir
+00003340: 6f6e 6d65 6e74 2062 7569 6c74 2074 6f20  onment built to 
+00003350: 776f 726b 2077 6974 6820 7468 6520 546f  work with the To
+00003360: 6f6c 626f 7829 0a0a 6060 6070 7974 686f  olbox)..```pytho
+00003370: 6e0a 726f 626f 742e 706c 6f74 2871 742e  n.robot.plot(qt.
+00003380: 7129 0a60 6060 0a0a 3c70 2061 6c69 676e  q).```..<p align
+00003390: 3d22 6365 6e74 6572 223e 0a09 3c69 6d67  ="center">..<img
+000033a0: 2073 7263 3d22 2e2f 646f 6373 2f66 6967   src="./docs/fig
+000033b0: 732f 7061 6e64 6132 2e67 6966 223e 0a3c  s/panda2.gif">.<
+000033c0: 2f70 3e0a 0a57 6520 6361 6e20 616c 736f  /p>..We can also
+000033d0: 2065 7870 6572 696d 656e 7420 7769 7468   experiment with
+000033e0: 2076 656c 6f63 6974 7920 636f 6e74 726f   velocity contro
+000033f0: 6c6c 6572 7320 696e 2053 7769 6674 2e20  llers in Swift. 
+00003400: 4865 7265 2069 7320 6120 7265 736f 6c76  Here is a resolv
+00003410: 6564 2d72 6174 6520 6d6f 7469 6f6e 2063  ed-rate motion c
+00003420: 6f6e 7472 6f6c 2065 7861 6d70 6c65 0a0a  ontrol example..
+00003430: 6060 6070 7974 686f 6e0a 696d 706f 7274  ```python.import
+00003440: 2073 7769 6674 0a69 6d70 6f72 7420 726f   swift.import ro
+00003450: 626f 7469 6373 746f 6f6c 626f 7820 6173  boticstoolbox as
+00003460: 2072 700a 696d 706f 7274 2073 7061 7469   rp.import spati
+00003470: 616c 6d61 7468 2061 7320 736d 0a69 6d70  almath as sm.imp
+00003480: 6f72 7420 6e75 6d70 7920 6173 206e 700a  ort numpy as np.
+00003490: 0a65 6e76 203d 2073 7769 6674 2e53 7769  .env = swift.Swi
+000034a0: 6674 2829 0a65 6e76 2e6c 6175 6e63 6828  ft().env.launch(
+000034b0: 7265 616c 7469 6d65 3d54 7275 6529 0a0a  realtime=True)..
+000034c0: 7061 6e64 6120 3d20 7270 2e6d 6f64 656c  panda = rp.model
+000034d0: 732e 5061 6e64 6128 290a 7061 6e64 612e  s.Panda().panda.
+000034e0: 7120 3d20 7061 6e64 612e 7172 0a0a 5465  q = panda.qr..Te
+000034f0: 7020 3d20 7061 6e64 612e 666b 696e 6528  p = panda.fkine(
+00003500: 7061 6e64 612e 7129 202a 2073 6d2e 5345  panda.q) * sm.SE
+00003510: 332e 5472 616e 7328 302e 322c 2030 2e32  3.Trans(0.2, 0.2
+00003520: 2c20 302e 3435 290a 0a61 7272 6976 6564  , 0.45)..arrived
+00003530: 203d 2046 616c 7365 0a65 6e76 2e61 6464   = False.env.add
+00003540: 2870 616e 6461 290a 0a64 7420 3d20 302e  (panda)..dt = 0.
+00003550: 3035 0a0a 7768 696c 6520 6e6f 7420 6172  05..while not ar
+00003560: 7269 7665 643a 0a0a 2020 2020 762c 2061  rived:..    v, a
+00003570: 7272 6976 6564 203d 2072 702e 705f 7365  rrived = rp.p_se
+00003580: 7276 6f28 7061 6e64 612e 666b 696e 6528  rvo(panda.fkine(
+00003590: 7061 6e64 612e 7129 2c20 5465 702c 2031  panda.q), Tep, 1
+000035a0: 290a 2020 2020 7061 6e64 612e 7164 203d  ).    panda.qd =
+000035b0: 206e 702e 6c69 6e61 6c67 2e70 696e 7628   np.linalg.pinv(
+000035c0: 7061 6e64 612e 6a61 636f 6265 2870 616e  panda.jacobe(pan
+000035d0: 6461 2e71 2929 2040 2076 0a20 2020 2065  da.q)) @ v.    e
+000035e0: 6e76 2e73 7465 7028 6474 290a 0a23 2055  nv.step(dt)..# U
+000035f0: 6e63 6f6d 6d65 6e74 2074 6f20 7374 6f70  ncomment to stop
+00003600: 2074 6865 2062 726f 7773 6572 2074 6162   the browser tab
+00003610: 2066 726f 6d20 636c 6f73 696e 670a 2320   from closing.# 
+00003620: 656e 762e 686f 6c64 2829 0a60 6060 0a0a  env.hold().```..
+00003630: 3c70 2061 6c69 676e 3d22 6365 6e74 6572  <p align="center
+00003640: 223e 0a09 3c69 6d67 2073 7263 3d22 2e2f  ">..<img src="./
+00003650: 646f 6373 2f66 6967 732f 7061 6e64 6133  docs/figs/panda3
+00003660: 2e67 6966 223e 0a3c 2f70 3e0a 0a23 2323  .gif">.</p>..###
+00003670: 2052 756e 2073 6f6d 6520 6578 616d 706c   Run some exampl
+00003680: 6573 0a0a 5468 6520 5b60 6e6f 7465 626f  es..The [`notebo
+00003690: 6f6b 7360 5d28 6874 7470 733a 2f2f 6769  oks`](https://gi
+000036a0: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
+000036b0: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
+000036c0: 6c62 6f78 2d70 7974 686f 6e2f 7472 6565  lbox-python/tree
+000036d0: 2f6d 6173 7465 722f 6e6f 7465 626f 6f6b  /master/notebook
+000036e0: 7329 2066 6f6c 6465 7220 636f 6e74 6169  s) folder contai
+000036f0: 6e73 2073 6f6d 6520 7475 746f 7269 616c  ns some tutorial
+00003700: 204a 7570 7974 6572 206e 6f74 6562 6f6f   Jupyter noteboo
+00003710: 6b73 2077 6869 6368 2079 6f75 2063 616e  ks which you can
+00003720: 2062 726f 7773 6520 6f6e 2047 6974 4875   browse on GitHu
+00003730: 622e 2041 6464 6974 696f 6e61 6c6c 792c  b. Additionally,
+00003740: 2068 6176 6520 6120 6c6f 6f6b 2069 6e20   have a look in 
+00003750: 7468 6520 5b60 6578 616d 706c 6573 605d  the [`examples`]
+00003760: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00003770: 636f 6d2f 7065 7465 7263 6f72 6b65 2f72  com/petercorke/r
+00003780: 6f62 6f74 6963 732d 746f 6f6c 626f 782d  obotics-toolbox-
+00003790: 7079 7468 6f6e 2f74 7265 652f 6d61 7374  python/tree/mast
+000037a0: 6572 2f72 6f62 6f74 6963 7374 6f6f 6c62  er/roboticstoolb
+000037b0: 6f78 2f65 7861 6d70 6c65 7329 2066 6f6c  ox/examples) fol
+000037c0: 6465 7220 666f 7220 6d61 6e79 2072 6561  der for many rea
+000037d0: 6479 2074 6f20 7275 6e20 6578 616d 706c  dy to run exampl
+000037e0: 6573 2e0a 0a3c 6272 3e0a 0a3c 6120 6964  es...<br>..<a id
+000037f0: 3d27 3527 3e3c 2f61 3e0a 0a23 2320 546f  ='5'></a>..## To
+00003800: 6f6c 626f 7820 5265 7365 6172 6368 2041  olbox Research A
+00003810: 7070 6c69 6361 7469 6f6e 730a 0a54 6865  pplications..The
+00003820: 2074 6f6f 6c62 6f78 2069 7320 696e 6372   toolbox is incr
+00003830: 6564 6962 6c79 2075 7365 6675 6c20 666f  edibly useful fo
+00003840: 7220 6465 7665 6c6f 7069 6e67 2061 6e64  r developing and
+00003850: 2070 726f 746f 7479 7069 6e67 2061 6c67   prototyping alg
+00003860: 6f72 6974 686d 7320 666f 7220 7265 7365  orithms for rese
+00003870: 6172 6368 2c20 7468 616e 6b73 2074 6f20  arch, thanks to 
+00003880: 7468 6520 6578 6861 7573 7469 7665 2073  the exhaustive s
+00003890: 6574 206f 6620 7765 6c6c 2064 6f63 756d  et of well docum
+000038a0: 656e 7465 6420 616e 6420 6d61 7475 7265  ented and mature
+000038b0: 2072 6f62 6f74 6963 2066 756e 6374 696f   robotic functio
+000038c0: 6e73 2065 7870 6f73 6564 2074 6872 6f75  ns exposed throu
+000038d0: 6768 2063 6c65 616e 2061 6e64 2070 6169  gh clean and pai
+000038e0: 6e6c 6573 7320 4150 4973 2e20 4164 6469  nless APIs. Addi
+000038f0: 7469 6f6e 616c 6c79 2c20 7468 6520 6561  tionally, the ea
+00003900: 7365 2061 7420 7768 6963 6820 6120 7573  se at which a us
+00003910: 6572 2063 616e 2076 6973 7561 6c69 7a65  er can visualize
+00003920: 2074 6865 6972 2061 6c67 6f72 6974 686d   their algorithm
+00003930: 2073 7570 706f 7274 7320 6120 7261 7069   supports a rapi
+00003940: 6420 7072 6f74 6f74 7970 696e 6720 7061  d prototyping pa
+00003950: 7261 6469 676d 2e0a 0a23 2323 2050 7562  radigm...### Pub
+00003960: 6c69 6361 7469 6f6e 204c 6973 740a 0a4a  lication List..J
+00003970: 2e20 4861 7669 6c61 6e64 2c20 4e2e 2053  . Haviland, N. S
+00003980: c3bc 6e64 6572 6861 7566 2061 6e64 2050  ..nderhauf and P
+00003990: 2e20 436f 726b 652c 2022 2a2a 4120 486f  . Corke, "**A Ho
+000039a0: 6c69 7374 6963 2041 7070 726f 6163 6820  listic Approach 
+000039b0: 746f 2052 6561 6374 6976 6520 4d6f 6269  to Reactive Mobi
+000039c0: 6c65 204d 616e 6970 756c 6174 696f 6e2a  le Manipulation*
+000039d0: 2a2c 2220 696e 205f 4945 4545 2052 6f62  *," in _IEEE Rob
+000039e0: 6f74 6963 7320 616e 6420 4175 746f 6d61  otics and Automa
+000039f0: 7469 6f6e 204c 6574 7465 7273 5f2c 2064  tion Letters_, d
+00003a00: 6f69 3a20 3130 2e31 3130 392f 4c52 412e  oi: 10.1109/LRA.
+00003a10: 3230 3232 2e33 3134 3635 3534 2e20 496e  2022.3146554. In
+00003a20: 2074 6865 2076 6964 656f 2c20 7468 6520   the video, the 
+00003a30: 726f 626f 7420 6973 2063 6f6e 7472 6f6c  robot is control
+00003a40: 6c65 6420 7573 696e 6720 7468 6520 526f  led using the Ro
+00003a50: 626f 7469 6373 2074 6f6f 6c62 6f78 2066  botics toolbox f
+00003a60: 6f72 2050 7974 686f 6e20 616e 6420 6665  or Python and fe
+00003a70: 6174 7572 6573 2061 2072 6563 6f72 6469  atures a recordi
+00003a80: 6e67 2066 726f 6d20 7468 6520 5b53 7769  ng from the [Swi
+00003a90: 6674 5d28 6874 7470 733a 2f2f 6769 7468  ft](https://gith
+00003aa0: 7562 2e63 6f6d 2f6a 6861 766c 2f73 7769  ub.com/jhavl/swi
+00003ab0: 6674 2920 5369 6d75 6c61 746f 722e 0a0a  ft) Simulator...
+00003ac0: 5b5b 4172 7869 7620 5061 7065 725d 2868  [[Arxiv Paper](h
+00003ad0: 7474 7073 3a2f 2f61 7278 6976 2e6f 7267  ttps://arxiv.org
+00003ae0: 2f61 6273 2f32 3130 392e 3034 3734 3929  /abs/2109.04749)
+00003af0: 5d20 5b5b 4945 4545 2058 706c 6f72 655d  ] [[IEEE Xplore]
+00003b00: 2868 7474 7073 3a2f 2f69 6565 6578 706c  (https://ieeexpl
+00003b10: 6f72 652e 6965 6565 2e6f 7267 2f61 6273  ore.ieee.org/abs
+00003b20: 7472 6163 742f 646f 6375 6d65 6e74 2f39  tract/document/9
+00003b30: 3639 3532 3938 295d 205b 5b50 726f 6a65  695298)] [[Proje
+00003b40: 6374 2057 6562 7369 7465 5d28 6874 7470  ct Website](http
+00003b50: 733a 2f2f 6a68 6176 6c2e 6769 7468 7562  s://jhavl.github
+00003b60: 2e69 6f2f 686f 6c69 7374 6963 2f29 5d20  .io/holistic/)] 
+00003b70: 5b5b 5669 6465 6f5d 2868 7474 7073 3a2f  [[Video](https:/
+00003b80: 2f79 6f75 7475 2e62 652f 2d44 5842 5150  /youtu.be/-DXBQP
+00003b90: 654c 4956 3429 5d20 5b5b 436f 6465 2045  eLIV4)] [[Code E
+00003ba0: 7861 6d70 6c65 5d28 6874 7470 733a 2f2f  xample](https://
+00003bb0: 6769 7468 7562 2e63 6f6d 2f70 6574 6572  github.com/peter
+00003bc0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+00003bd0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 626c  oolbox-python/bl
+00003be0: 6f62 2f6d 6173 7465 722f 726f 626f 7469  ob/master/roboti
+00003bf0: 6373 746f 6f6c 626f 782f 6578 616d 706c  cstoolbox/exampl
+00003c00: 6573 2f68 6f6c 6973 7469 635f 6d6d 5f6e  es/holistic_mm_n
+00003c10: 6f6e 5f68 6f6c 6f6e 6f6d 6963 2e70 7929  on_holonomic.py)
+00003c20: 5d0a 0a3c 703e 0a20 203c 6120 6872 6566  ]..<p>.  <a href
+00003c30: 3d22 6874 7470 733a 2f2f 796f 7574 752e  ="https://youtu.
+00003c40: 6265 2f2d 4458 4251 5065 4c49 5634 223e  be/-DXBQPeLIV4">
+00003c50: 0a20 2020 203c 696d 6720 7372 633d 2268  .    <img src="h
+00003c60: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00003c70: 6d2f 7065 7465 7263 6f72 6b65 2f72 6f62  m/petercorke/rob
+00003c80: 6f74 6963 732d 746f 6f6c 626f 782d 7079  otics-toolbox-py
+00003c90: 7468 6f6e 2f72 6177 2f6d 6173 7465 722f  thon/raw/master/
+00003ca0: 646f 6373 2f66 6967 732f 686f 6c69 7374  docs/figs/holist
+00003cb0: 6963 5f79 6f75 7475 6265 2e70 6e67 2220  ic_youtube.png" 
+00003cc0: 7769 6474 683d 2235 3630 223e 0a20 203c  width="560">.  <
+00003cd0: 2f61 3e0a 3c2f 703e 0a0a 4a2e 2048 6176  /a>.</p>..J. Hav
+00003ce0: 696c 616e 6420 616e 6420 502e 2043 6f72  iland and P. Cor
+00003cf0: 6b65 2c20 222a 2a4e 454f 3a20 4120 4e6f  ke, "**NEO: A No
+00003d00: 7665 6c20 4578 7065 6469 7469 6f75 7320  vel Expeditious 
+00003d10: 4f70 7469 6d69 7361 7469 6f6e 2041 6c67  Optimisation Alg
+00003d20: 6f72 6974 686d 2066 6f72 2052 6561 6374  orithm for React
+00003d30: 6976 6520 4d6f 7469 6f6e 2043 6f6e 7472  ive Motion Contr
+00003d40: 6f6c 206f 6620 4d61 6e69 7075 6c61 746f  ol of Manipulato
+00003d50: 7273 2a2a 2c22 2069 6e20 5f49 4545 4520  rs**," in _IEEE 
+00003d60: 526f 626f 7469 6373 2061 6e64 2041 7574  Robotics and Aut
+00003d70: 6f6d 6174 696f 6e20 4c65 7474 6572 735f  omation Letters_
+00003d80: 2c20 646f 693a 2031 302e 3131 3039 2f4c  , doi: 10.1109/L
+00003d90: 5241 2e32 3032 312e 3330 3536 3036 302e  RA.2021.3056060.
+00003da0: 2049 6e20 7468 6520 7669 6465 6f2c 2074   In the video, t
+00003db0: 6865 2072 6f62 6f74 2069 7320 636f 6e74  he robot is cont
+00003dc0: 726f 6c6c 6564 2075 7369 6e67 2074 6865  rolled using the
+00003dd0: 2052 6f62 6f74 6963 7320 746f 6f6c 626f   Robotics toolbo
+00003de0: 7820 666f 7220 5079 7468 6f6e 2061 6e64  x for Python and
+00003df0: 2066 6561 7475 7265 7320 6120 7265 636f   features a reco
+00003e00: 7264 696e 6720 6672 6f6d 2074 6865 205b  rding from the [
+00003e10: 5377 6966 745d 2868 7474 7073 3a2f 2f67  Swift](https://g
+00003e20: 6974 6875 622e 636f 6d2f 6a68 6176 6c2f  ithub.com/jhavl/
+00003e30: 7377 6966 7429 2053 696d 756c 6174 6f72  swift) Simulator
+00003e40: 2e0a 0a5b 5b41 7278 6976 2050 6170 6572  ...[[Arxiv Paper
+00003e50: 5d28 6874 7470 733a 2f2f 6172 7869 762e  ](https://arxiv.
+00003e60: 6f72 672f 6162 732f 3230 3130 2e30 3836  org/abs/2010.086
+00003e70: 3836 295d 205b 5b49 4545 4520 5870 6c6f  86)] [[IEEE Xplo
+00003e80: 7265 5d28 6874 7470 733a 2f2f 6965 6565  re](https://ieee
+00003e90: 7870 6c6f 7265 2e69 6565 652e 6f72 672f  xplore.ieee.org/
+00003ea0: 646f 6375 6d65 6e74 2f39 3334 3337 3138  document/9343718
+00003eb0: 295d 205b 5b50 726f 6a65 6374 2057 6562  )] [[Project Web
+00003ec0: 7369 7465 5d28 6874 7470 733a 2f2f 6a68  site](https://jh
+00003ed0: 6176 6c2e 6769 7468 7562 2e69 6f2f 6e65  avl.github.io/ne
+00003ee0: 6f2f 295d 205b 5b56 6964 656f 5d28 6874  o/)] [[Video](ht
+00003ef0: 7470 733a 2f2f 796f 7574 752e 6265 2f6a  tps://youtu.be/j
+00003f00: 534c 504a 4272 3851 5459 295d 205b 5b43  SLPJBr8QTY)] [[C
+00003f10: 6f64 6520 4578 616d 706c 655d 2868 7474  ode Example](htt
+00003f20: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00003f30: 7065 7465 7263 6f72 6b65 2f72 6f62 6f74  petercorke/robot
+00003f40: 6963 732d 746f 6f6c 626f 782d 7079 7468  ics-toolbox-pyth
+00003f50: 6f6e 2f62 6c6f 622f 6d61 7374 6572 2f72  on/blob/master/r
+00003f60: 6f62 6f74 6963 7374 6f6f 6c62 6f78 2f65  oboticstoolbox/e
+00003f70: 7861 6d70 6c65 732f 6e65 6f2e 7079 295d  xamples/neo.py)]
+00003f80: 0a0a 3c70 3e0a 2020 3c61 2068 7265 663d  ..<p>.  <a href=
+00003f90: 2268 7474 7073 3a2f 2f79 6f75 7475 2e62  "https://youtu.b
+00003fa0: 652f 6a53 4c50 4a42 7238 5154 5922 3e0a  e/jSLPJBr8QTY">.
+00003fb0: 2020 2020 3c69 6d67 2073 7263 3d22 6874      <img src="ht
+00003fc0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00003fd0: 2f70 6574 6572 636f 726b 652f 726f 626f  /petercorke/robo
+00003fe0: 7469 6373 2d74 6f6f 6c62 6f78 2d70 7974  tics-toolbox-pyt
+00003ff0: 686f 6e2f 7261 772f 6d61 7374 6572 2f64  hon/raw/master/d
+00004000: 6f63 732f 6669 6773 2f6e 656f 5f79 6f75  ocs/figs/neo_you
+00004010: 7475 6265 2e70 6e67 2220 7769 6474 683d  tube.png" width=
+00004020: 2235 3630 223e 0a20 203c 2f61 3e0a 3c2f  "560">.  </a>.</
+00004030: 703e 0a0a 2a2a 4120 5075 7265 6c79 2d52  p>..**A Purely-R
+00004040: 6561 6374 6976 6520 4d61 6e69 7075 6c61  eactive Manipula
+00004050: 6269 6c69 7479 2d4d 6178 696d 6973 696e  bility-Maximisin
+00004060: 6720 4d6f 7469 6f6e 2043 6f6e 7472 6f6c  g Motion Control
+00004070: 6c65 722a 2a2c 204a 2e20 4861 7669 6c61  ler**, J. Havila
+00004080: 6e64 2061 6e64 2050 2e20 436f 726b 652e  nd and P. Corke.
+00004090: 2049 6e20 7468 6520 7669 6465 6f2c 2074   In the video, t
+000040a0: 6865 2072 6f62 6f74 2069 7320 636f 6e74  he robot is cont
+000040b0: 726f 6c6c 6564 2075 7369 6e67 2074 6865  rolled using the
+000040c0: 2052 6f62 6f74 6963 7320 746f 6f6c 626f   Robotics toolbo
+000040d0: 7820 666f 7220 5079 7468 6f6e 2e0a 0a5b  x for Python...[
+000040e0: 5b50 6170 6572 5d28 6874 7470 733a 2f2f  [Paper](https://
+000040f0: 6172 7869 762e 6f72 672f 6162 732f 3230  arxiv.org/abs/20
+00004100: 3032 2e31 3139 3031 295d 205b 5b50 726f  02.11901)] [[Pro
+00004110: 6a65 6374 2057 6562 7369 7465 5d28 6874  ject Website](ht
+00004120: 7470 733a 2f2f 6a68 6176 6c2e 6769 7468  tps://jhavl.gith
+00004130: 7562 2e69 6f2f 6d6d 632f 295d 205b 5b56  ub.io/mmc/)] [[V
+00004140: 6964 656f 5d28 6874 7470 733a 2f2f 796f  ideo](https://yo
+00004150: 7574 752e 6265 2f56 755f 7263 506c 6141  utu.be/Vu_rcPlaA
+00004160: 4449 295d 205b 5b43 6f64 6520 4578 616d  DI)] [[Code Exam
+00004170: 706c 655d 2868 7474 7073 3a2f 2f67 6974  ple](https://git
+00004180: 6875 622e 636f 6d2f 7065 7465 7263 6f72  hub.com/petercor
+00004190: 6b65 2f72 6f62 6f74 6963 732d 746f 6f6c  ke/robotics-tool
+000041a0: 626f 782d 7079 7468 6f6e 2f62 6c6f 622f  box-python/blob/
+000041b0: 6d61 7374 6572 2f72 6f62 6f74 6963 7374  master/roboticst
+000041c0: 6f6f 6c62 6f78 2f65 7861 6d70 6c65 732f  oolbox/examples/
+000041d0: 6d6d 632e 7079 295d 0a0a 3c70 3e0a 2020  mmc.py)]..<p>.  
+000041e0: 3c61 2068 7265 663d 2268 7474 7073 3a2f  <a href="https:/
+000041f0: 2f79 6f75 7475 2e62 652f 5675 5f72 6350  /youtu.be/Vu_rcP
+00004200: 6c61 4144 4922 3e0a 2020 2020 3c69 6d67  laADI">.    <img
+00004210: 2073 7263 3d22 6874 7470 733a 2f2f 6769   src="https://gi
+00004220: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
+00004230: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
+00004240: 6c62 6f78 2d70 7974 686f 6e2f 7261 772f  lbox-python/raw/
+00004250: 6d61 7374 6572 2f64 6f63 732f 6669 6773  master/docs/figs
+00004260: 2f6d 6d63 5f79 6f75 7475 6265 2e70 6e67  /mmc_youtube.png
+00004270: 2220 7769 6474 683d 2235 3630 223e 0a20  " width="560">. 
+00004280: 203c 2f61 3e0a 3c2f 703e 0a0a 3c62 723e   </a>.</p>..<br>
+00004290: 0a0a 3c62 723e 0a0a 3c61 2069 643d 2736  ..<br>..<a id='6
+000042a0: 273e 3c2f 613e 0a0a 2323 2054 6f6f 6c62  '></a>..## Toolb
+000042b0: 6f78 2049 4352 4120 5061 7065 7220 616e  ox ICRA Paper an
+000042c0: 6420 4369 7461 7469 6f6e 2049 6e66 6f0a  d Citation Info.
+000042d0: 0a43 6865 636b 206f 7574 206f 7572 2049  .Check out our I
+000042e0: 4352 4120 3230 3231 2070 6170 6572 206f  CRA 2021 paper o
+000042f0: 6e20 5b49 4545 4520 5870 6c6f 7265 5d28  n [IEEE Xplore](
+00004300: 6874 7470 733a 2f2f 6965 6565 7870 6c6f  https://ieeexplo
+00004310: 7265 2e69 6565 652e 6f72 672f 646f 6375  re.ieee.org/docu
+00004320: 6d65 6e74 2f39 3536 3133 3636 2920 6f72  ment/9561366) or
+00004330: 2067 6574 2074 6865 2050 4446 2066 726f   get the PDF fro
+00004340: 6d20 5b50 6574 6572 2773 2077 6562 7369  m [Peter's websi
+00004350: 7465 5d28 6874 7470 733a 2f2f 6269 742e  te](https://bit.
+00004360: 6c79 2f33 4368 6379 4e70 292e 0a0a 4966  ly/3ChcyNp)...If
+00004370: 2074 6865 2074 6f6f 6c62 6f78 2068 656c   the toolbox hel
+00004380: 7065 6420 796f 7520 696e 2079 6f75 7220  ped you in your 
+00004390: 7265 7365 6172 6368 2c20 706c 6561 7365  research, please
+000043a0: 2063 6974 650a 0a60 6060 0a40 696e 7072   cite..```.@inpr
+000043b0: 6f63 6565 6469 6e67 737b 7274 622c 0a20  oceedings{rtb,. 
+000043c0: 2074 6974 6c65 3d7b 4e6f 7420 796f 7572   title={Not your
+000043d0: 2067 7261 6e64 6d6f 7468 6572 e280 9973   grandmother...s
+000043e0: 2074 6f6f 6c62 6f78 2d2d 7468 6520 526f   toolbox--the Ro
+000043f0: 626f 7469 6373 2054 6f6f 6c62 6f78 2072  botics Toolbox r
+00004400: 6569 6e76 656e 7465 6420 666f 7220 5079  einvented for Py
+00004410: 7468 6f6e 7d2c 0a20 2061 7574 686f 723d  thon},.  author=
+00004420: 7b43 6f72 6b65 2c20 5065 7465 7220 616e  {Corke, Peter an
+00004430: 6420 4861 7669 6c61 6e64 2c20 4a65 7373  d Haviland, Jess
+00004440: 657d 2c0a 2020 626f 6f6b 7469 746c 653d  e},.  booktitle=
+00004450: 7b32 3032 3120 4945 4545 2049 6e74 6572  {2021 IEEE Inter
+00004460: 6e61 7469 6f6e 616c 2043 6f6e 6665 7265  national Confere
+00004470: 6e63 6520 6f6e 2052 6f62 6f74 6963 7320  nce on Robotics 
+00004480: 616e 6420 4175 746f 6d61 7469 6f6e 2028  and Automation (
+00004490: 4943 5241 297d 2c0a 2020 7061 6765 733d  ICRA)},.  pages=
+000044a0: 7b31 3133 3537 2d2d 3131 3336 337d 2c0a  {11357--11363},.
+000044b0: 2020 7965 6172 3d7b 3230 3231 7d2c 0a20    year={2021},. 
+000044c0: 206f 7267 616e 697a 6174 696f 6e3d 7b49   organization={I
+000044d0: 4545 457d 0a7d 0a60 6060 0a0a 3c62 723e  EEE}.}.```..<br>
+000044e0: 0a0a 3c61 2069 643d 2737 273e 3c2f 613e  ..<a id='7'></a>
+000044f0: 0a0a 2323 2055 7369 6e67 2074 6865 2054  ..## Using the T
+00004500: 6f6f 6c62 6f78 2069 6e20 796f 7572 204f  oolbox in your O
+00004510: 7065 6e20 536f 7572 6365 2043 6f64 653f  pen Source Code?
+00004520: 0a0a 4966 2079 6f75 2061 7265 2075 7369  ..If you are usi
+00004530: 6e67 2074 6865 2054 6f6f 6c62 6f78 2069  ng the Toolbox i
+00004540: 6e20 796f 7572 206f 7065 6e20 736f 7572  n your open sour
+00004550: 6365 2063 6f64 652c 2066 6565 6c20 6672  ce code, feel fr
+00004560: 6565 2074 6f20 6164 6420 6f75 7220 6261  ee to add our ba
+00004570: 6467 6520 746f 2079 6f75 7220 7265 6164  dge to your read
+00004580: 6d65 210a 0a46 6f72 2074 6865 2070 6f77  me!..For the pow
+00004590: 6572 6564 2062 7920 726f 626f 7469 6373  ered by robotics
+000045a0: 2074 6f6f 6c62 6f78 2062 6164 6765 0a0a   toolbox badge..
+000045b0: 5b21 5b50 6f77 6572 6564 2062 7920 7468  [![Powered by th
+000045c0: 6520 526f 626f 7469 6373 2054 6f6f 6c62  e Robotics Toolb
+000045d0: 6f78 5d28 6874 7470 733a 2f2f 7261 772e  ox](https://raw.
+000045e0: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
+000045f0: 742e 636f 6d2f 7065 7465 7263 6f72 6b65  t.com/petercorke
+00004600: 2f72 6f62 6f74 6963 732d 746f 6f6c 626f  /robotics-toolbo
+00004610: 782d 7079 7468 6f6e 2f6d 6173 7465 722f  x-python/master/
+00004620: 2e67 6974 6875 622f 7376 672f 7274 625f  .github/svg/rtb_
+00004630: 706f 7765 7265 642e 6d69 6e2e 7376 6729  powered.min.svg)
+00004640: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00004650: 2e63 6f6d 2f70 6574 6572 636f 726b 652f  .com/petercorke/
+00004660: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00004670: 2d70 7974 686f 6e29 0a0a 636f 7079 2074  -python)..copy t
+00004680: 6865 2066 6f6c 6c6f 7769 6e67 0a0a 6060  he following..``
+00004690: 600a 5b21 5b50 6f77 6572 6564 2062 7920  `.[![Powered by 
+000046a0: 7468 6520 526f 626f 7469 6373 2054 6f6f  the Robotics Too
+000046b0: 6c62 6f78 5d28 6874 7470 733a 2f2f 7261  lbox](https://ra
+000046c0: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
+000046d0: 656e 742e 636f 6d2f 7065 7465 7263 6f72  ent.com/petercor
+000046e0: 6b65 2f72 6f62 6f74 6963 732d 746f 6f6c  ke/robotics-tool
+000046f0: 626f 782d 7079 7468 6f6e 2f6d 6173 7465  box-python/maste
+00004700: 722f 2e67 6974 6875 622f 7376 672f 7274  r/.github/svg/rt
+00004710: 625f 706f 7765 7265 642e 6d69 6e2e 7376  b_powered.min.sv
+00004720: 6729 5d28 6874 7470 733a 2f2f 6769 7468  g)](https://gith
+00004730: 7562 2e63 6f6d 2f70 6574 6572 636f 726b  ub.com/petercork
+00004740: 652f 726f 626f 7469 6373 2d74 6f6f 6c62  e/robotics-toolb
+00004750: 6f78 2d70 7974 686f 6e29 0a60 6060 0a0a  ox-python).```..
+00004760: 466f 7220 7468 6520 706f 7765 7265 6420  For the powered 
+00004770: 6279 2070 7974 686f 6e20 726f 626f 7469  by python roboti
+00004780: 6373 2062 6164 6765 0a0a 5b21 5b50 6f77  cs badge..[![Pow
+00004790: 6572 6564 2062 7920 5079 7468 6f6e 2052  ered by Python R
+000047a0: 6f62 6f74 6963 735d 2868 7474 7073 3a2f  obotics](https:/
+000047b0: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
+000047c0: 6f6e 7465 6e74 2e63 6f6d 2f70 6574 6572  ontent.com/peter
+000047d0: 636f 726b 652f 726f 626f 7469 6373 2d74  corke/robotics-t
+000047e0: 6f6f 6c62 6f78 2d70 7974 686f 6e2f 6d61  oolbox-python/ma
+000047f0: 7374 6572 2f2e 6769 7468 7562 2f73 7667  ster/.github/svg
+00004800: 2f70 725f 706f 7765 7265 642e 6d69 6e2e  /pr_powered.min.
+00004810: 7376 6729 5d28 6874 7470 733a 2f2f 6769  svg)](https://gi
+00004820: 7468 7562 2e63 6f6d 2f70 6574 6572 636f  thub.com/peterco
+00004830: 726b 652f 726f 626f 7469 6373 2d74 6f6f  rke/robotics-too
+00004840: 6c62 6f78 2d70 7974 686f 6e29 0a0a 636f  lbox-python)..co
+00004850: 7079 2074 6865 2066 6f6c 6c6f 7769 6e67  py the following
+00004860: 0a0a 6060 600a 5b21 5b50 6f77 6572 6564  ..```.[![Powered
+00004870: 2062 7920 5079 7468 6f6e 2052 6f62 6f74   by Python Robot
+00004880: 6963 735d 2868 7474 7073 3a2f 2f72 6177  ics](https://raw
+00004890: 2e67 6974 6875 6275 7365 7263 6f6e 7465  .githubuserconte
+000048a0: 6e74 2e63 6f6d 2f70 6574 6572 636f 726b  nt.com/petercork
+000048b0: 652f 726f 626f 7469 6373 2d74 6f6f 6c62  e/robotics-toolb
+000048c0: 6f78 2d70 7974 686f 6e2f 6d61 7374 6572  ox-python/master
+000048d0: 2f2e 6769 7468 7562 2f73 7667 2f70 725f  /.github/svg/pr_
+000048e0: 706f 7765 7265 642e 6d69 6e2e 7376 6729  powered.min.svg)
+000048f0: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00004900: 2e63 6f6d 2f70 6574 6572 636f 726b 652f  .com/petercorke/
+00004910: 726f 626f 7469 6373 2d74 6f6f 6c62 6f78  robotics-toolbox
+00004920: 2d70 7974 686f 6e29 0a60 6060 0a0a 3c62  -python).```..<b
+00004930: 723e 0a0a 3c61 2069 643d 2738 273e 3c2f  r>..<a id='8'></
+00004940: 613e 0a0a 2323 2043 6f6d 6d6f 6e20 4973  a>..## Common Is
+00004950: 7375 6573 2061 6e64 2053 6f6c 7574 696f  sues and Solutio
+00004960: 6e73 0a0a 5365 6520 7468 6520 636f 6d6d  ns..See the comm
+00004970: 6f6e 2069 7373 7565 7320 7769 7468 2066  on issues with f
+00004980: 6978 6573 205b 6865 7265 5d28 6874 7470  ixes [here](http
+00004990: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f70  s://github.com/p
+000049a0: 6574 6572 636f 726b 652f 726f 626f 7469  etercorke/roboti
+000049b0: 6373 2d74 6f6f 6c62 6f78 2d70 7974 686f  cs-toolbox-pytho
+000049c0: 6e2f 7769 6b69 2f43 6f6d 6d6f 6e2d 4973  n/wiki/Common-Is
+000049d0: 7375 6573 292e 0a                        sues)..
```

### Comparing `roboticstoolbox-python-1.0.3/roboticstoolbox_python.egg-info/SOURCES.txt` & `roboticstoolbox-python-1.1.0/roboticstoolbox_python.egg-info/SOURCES.txt`

 * *Files 8% similar despite different names*

```diff
@@ -14,28 +14,22 @@
 roboticstoolbox/backends/__init__.py
 roboticstoolbox/backends/PyPlot/EllipsePlot.py
 roboticstoolbox/backends/PyPlot/PyPlot.py
 roboticstoolbox/backends/PyPlot/PyPlot2.py
 roboticstoolbox/backends/PyPlot/RobotPlot.py
 roboticstoolbox/backends/PyPlot/RobotPlot2.py
 roboticstoolbox/backends/PyPlot/__init__.py
-roboticstoolbox/backends/VPython/VPython.py
-roboticstoolbox/backends/VPython/__init__.py
-roboticstoolbox/backends/VPython/canvas.py
-roboticstoolbox/backends/VPython/common_functions.py
-roboticstoolbox/backends/VPython/graphicalrobot.py
-roboticstoolbox/backends/VPython/grid.py
-roboticstoolbox/backends/VPython/object2d.py
-roboticstoolbox/backends/VPython/stl.py
-roboticstoolbox/backends/VPython/text.py
 roboticstoolbox/backends/swift/__init__.py
-roboticstoolbox/bin/rtbtool
+roboticstoolbox/bin/__init__.py
+roboticstoolbox/bin/rtbtool.py
 roboticstoolbox/blocks/__init__.py
 roboticstoolbox/blocks/arm.py
 roboticstoolbox/blocks/mobile.py
+roboticstoolbox/blocks/quad_model.py
+roboticstoolbox/blocks/spatial.py
 roboticstoolbox/blocks/uav.py
 roboticstoolbox/core/fknm.cpp
 roboticstoolbox/core/fknm.h
 roboticstoolbox/core/frne.c
 roboticstoolbox/core/frne.h
 roboticstoolbox/core/ik.cpp
 roboticstoolbox/core/ik.h
@@ -393,14 +387,16 @@
 roboticstoolbox/examples/eigdemo.py
 roboticstoolbox/examples/fetch_vision.py
 roboticstoolbox/examples/holistic_mm_non_holonomic.py
 roboticstoolbox/examples/holistic_mm_omni.py
 roboticstoolbox/examples/icra2021.py
 roboticstoolbox/examples/ik_exp.py
 roboticstoolbox/examples/ik_speed.py
+roboticstoolbox/examples/ikine_evaluate.py
+roboticstoolbox/examples/ikine_evaluate2.py
 roboticstoolbox/examples/mexican-wave.py
 roboticstoolbox/examples/mmc.py
 roboticstoolbox/examples/mobile.py
 roboticstoolbox/examples/neo.py
 roboticstoolbox/examples/park.py
 roboticstoolbox/examples/plot.py
 roboticstoolbox/examples/plot_swift.py
@@ -496,49 +492,73 @@
 roboticstoolbox/models/URDF/rx150.py
 roboticstoolbox/models/URDF/rx200.py
 roboticstoolbox/models/URDF/vx300.py
 roboticstoolbox/models/URDF/vx300s.py
 roboticstoolbox/models/URDF/wx200.py
 roboticstoolbox/models/URDF/wx250.py
 roboticstoolbox/models/URDF/wx250s.py
+roboticstoolbox/robot/BaseRobot.py
 roboticstoolbox/robot/DHFactor.py
 roboticstoolbox/robot/DHLink.py
 roboticstoolbox/robot/DHRobot.py
 roboticstoolbox/robot/Dynamics.py
 roboticstoolbox/robot/ELink.py
 roboticstoolbox/robot/ERobot.py
 roboticstoolbox/robot/ET.py
 roboticstoolbox/robot/ETS.py
-roboticstoolbox/robot/ETSRobot.py
 roboticstoolbox/robot/Gripper.py
 roboticstoolbox/robot/IK.py
-roboticstoolbox/robot/KinematicCache.py
 roboticstoolbox/robot/Link.py
 roboticstoolbox/robot/PoERobot.py
 roboticstoolbox/robot/Robot.py
+roboticstoolbox/robot/RobotKinematics.py
+roboticstoolbox/robot/RobotProto.py
 roboticstoolbox/robot/__init__.py
-roboticstoolbox/robot/ikine_evaluate.py
-roboticstoolbox/robot/ikine_evaluate2.py
 roboticstoolbox/tools/DHFactor.py
 roboticstoolbox/tools/Ticker.py
 roboticstoolbox/tools/__init__.py
 roboticstoolbox/tools/data.py
 roboticstoolbox/tools/jsingu.py
 roboticstoolbox/tools/null.py
 roboticstoolbox/tools/numerical.py
 roboticstoolbox/tools/p_servo.py
 roboticstoolbox/tools/params.py
 roboticstoolbox/tools/plot.py
 roboticstoolbox/tools/trajectory.py
+roboticstoolbox/tools/types.py
 roboticstoolbox/tools/urdf/__init__.py
 roboticstoolbox/tools/urdf/urdf.py
 roboticstoolbox/tools/urdf/utils.py
 roboticstoolbox/tools/xacro/__init__.py
 roboticstoolbox/tools/xacro/cli.py
 roboticstoolbox/tools/xacro/color.py
 roboticstoolbox/tools/xacro/xmlutils.py
 roboticstoolbox_python.egg-info/PKG-INFO
 roboticstoolbox_python.egg-info/SOURCES.txt
 roboticstoolbox_python.egg-info/dependency_links.txt
 roboticstoolbox_python.egg-info/entry_points.txt
 roboticstoolbox_python.egg-info/requires.txt
-roboticstoolbox_python.egg-info/top_level.txt
+roboticstoolbox_python.egg-info/top_level.txt
+tests/test_BaseRobot.py
+tests/test_CustomXacro.py
+tests/test_DHRobot.py
+tests/test_ELink.py
+tests/test_ERobot.py
+tests/test_ET.py
+tests/test_ETS.py
+tests/test_ETS2.py
+tests/test_Gripper.py
+tests/test_IK.py
+tests/test_Link.py
+tests/test_PyPlot.py
+tests/test_PyPlot2.py
+tests/test_Robot.py
+tests/test_Ticker.py
+tests/test_VPython.py
+tests/test_blocks.py
+tests/test_fknm.py
+tests/test_jacob.py
+tests/test_mobile.py
+tests/test_mobile_planner.py
+tests/test_models.py
+tests/test_tools.py
+tests/test_trajectory.py
```

### Comparing `roboticstoolbox-python-1.0.3/setup.py` & `roboticstoolbox-python-1.1.0/setup.py`

 * *Files 8% similar despite different names*

```diff
@@ -39,11 +39,8 @@
     ],
     include_dirs=["./roboticstoolbox/core/", numpy.get_include()],
 )
 
 setup(
     ext_modules=[frne, fknm],
     package_data={"roboticstoolbox": extra_files},
-    scripts=[
-        "roboticstoolbox/bin/rtbtool",
-    ],
 )
```

